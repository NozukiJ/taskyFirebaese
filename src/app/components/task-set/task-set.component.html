<div class="task-list-container">
  <div class="task-actions">
    <input type="text" [(ngModel)]="newTaskSetName" placeholder="新しいタスクセットの名前" />
    <button (click)="createTaskSet()">タスクセット作成</button>
  </div>
  <div *ngFor="let taskSet of taskSets">
    <div class="task-set-header">
      <input type="checkbox" [(ngModel)]="taskSet.selected" class="task-checkbox">
      <h3 (click)="selectTaskSet(taskSet)">{{ taskSet.name }}</h3>
      <button (click)="openAddTaskToSetDialog(taskSet)">＋セットにタスクを追加</button>
      <button (click)="deleteTaskSet(taskSet)">削除</button>
    </div>
    <ul class="task-list" *ngIf="selectedTaskSet && selectedTaskSet.id === taskSet.id">
      <li class="task-header">
        <div class="task-header-content">
          <span class="task-header-item">選択</span>
          <span class="task-header-item">タイトル</span>
          <span class="task-header-item">ステータス</span>
          <span class="task-header-item">優先度</span>
          <span class="task-header-item">開始日時</span>
          <span class="task-header-item">終了日時</span>
          <span class="task-header-item">タグ</span>
          <span class="task-header-item">タグの色</span>
        </div>
      </li>
      <li class="task-item" *ngFor="let task of tasks">
        <div class="task-item-content">
          <input type="checkbox" [(ngModel)]="task.selected" class="task-checkbox">
          <a (click)="openTaskDetailDialog(task)" class="task-link">
            <div class="task-title">{{ task.title }}</div>
            <div class="task-details">
              <span class="task-status">{{ task.status }}</span>
              <span class="task-priority" [ngClass]="task.priority">{{ getPriorityLabel(task.priority) }}</span>
              <span class="task-start-date">{{ task.startDateTime | date: 'short' }}</span>
              <span class="task-end-date">{{ task.endDateTime | date: 'short' }}</span>
              <span class="task-tag">{{ task.tag }}</span>
              <span class="task-tag-color" [style.backgroundColor]="task.tagColor"></span>
            </div>
          </a>
        </div>
      </li>
    </ul>
  </div>
  <div class="task-actions">
    <input type="text" [(ngModel)]="newIntervalSetName" placeholder="新しいインターバルセットの名前" />
    <button (click)="createIntervalSet()">インターバルセット作成</button>
  </div>
  <div *ngFor="let intervalSet of intervalSets">
    <div class="project-header">
      <input type="checkbox" [(ngModel)]="intervalSet.selected" class="project-checkbox">
      <h3 (click)="selectIntervalSet(intervalSet)">{{ intervalSet.name }}</h3>
      <button (click)="deleteIntervalSet(intervalSet)">削除</button>
    </div>
  </div>
</div>
