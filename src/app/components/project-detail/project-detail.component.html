<!-- src\app\components\project-detail\project-detail.component.html -->
<div class="modal-overlay" *ngIf="project"></div>
<div class="project-detail-container" *ngIf="project">
  <div class="header">
    <h2>プロジェクト詳細</h2>
    <div *ngIf="isOwner" class="buttons">
      <button (click)="updateProject()">保存</button>
      <button (click)="cancel()">キャンセル</button>
    </div>
  </div>
  <div class="form-group">
    <label>名前:
      <input [(ngModel)]="projectCopy.name" placeholder="名前" class="input-field">
    </label>
  </div>
  <div class="form-group">
    <label>説明:
      <textarea [(ngModel)]="projectCopy.description" placeholder="説明" class="input-field"></textarea>
    </label>
  </div>
  <div class="form-group dates">
    <label>開始日:
      <input type="date" [(ngModel)]="projectCopy.startDate" class="input-field">
    </label>
    <label>終了日:
      <input type="date" [(ngModel)]="projectCopy.endDate" class="input-field">
    </label>
  </div>
  <div class="form-group">
    <label>色:</label>
    <div class="color-dropdown">
      <div *ngFor="let color of colors" 
           class="color-option" 
           [ngStyle]="{'background-color': color, 'border': projectCopy.color === color ? '3px solid black' : '1px solid #000'}"
           (click)="projectCopy.color = color"></div>
    </div>
  </div>

  <h4>オーナー</h4>
  <ul>
    <li *ngFor="let owner of ownersCopy">
      {{ owner.displayName }}
      <button *ngIf="isOwner && owner.uid !== currentUserUid" (click)="removeOwner(owner)">削除</button>
    </li>
  </ul>

  <h4>メンバー</h4>
  <ul>
    <li *ngFor="let member of membersCopy">
      {{ member.displayName }}
      <button (click)="removeMember(member)">削除</button>
    </li>
  </ul>

  <h4>ユーザー検索</h4>
  <app-project-user-search (userSelected)="handleUserSelected($event)"></app-project-user-search>

  <ul>
    <li *ngFor="let user of searchedUsers">
      {{ user.displayName }}
      <button (click)="addMember(user)">メンバー追加</button>
      <button (click)="addOwner(user)">オーナー追加</button>
    </li>
  </ul>
</div>
