"use strict";(self.webpackChunktasky=self.webpackChunktasky||[]).push([[179],{58:(Fo,Xi,wt)=>{wt.d(Xi,{BH:()=>vn,G6:()=>zl,L:()=>Bt,LL:()=>ge,Pz:()=>nn,Sg:()=>kr,UG:()=>Sn,ZB:()=>tt,ZR:()=>Oe,aH:()=>Vn,b$:()=>Nn,eu:()=>_e,hl:()=>he,jU:()=>Ae,m9:()=>oa,ne:()=>Hr,pd:()=>Zs,r3:()=>hi,ru:()=>qn,tV:()=>De,uI:()=>di,vZ:()=>$a,w1:()=>Is,xO:()=>Wa,xb:()=>Mr,z$:()=>ot,zd:()=>Eu});const ve=function(J){const Y=[];let ee=0;for(let be=0;be<J.length;be++){let le=J.charCodeAt(be);le<128?Y[ee++]=le:le<2048?(Y[ee++]=le>>6|192,Y[ee++]=63&le|128):55296==(64512&le)&&be+1<J.length&&56320==(64512&J.charCodeAt(be+1))?(le=65536+((1023&le)<<10)+(1023&J.charCodeAt(++be)),Y[ee++]=le>>18|240,Y[ee++]=le>>12&63|128,Y[ee++]=le>>6&63|128,Y[ee++]=63&le|128):(Y[ee++]=le>>12|224,Y[ee++]=le>>6&63|128,Y[ee++]=63&le|128)}return Y},Wn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,Y){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let le=0;le<J.length;le+=3){const we=J[le],et=le+1<J.length,un=et?J[le+1]:0,lt=le+2<J.length,xi=lt?J[le+2]:0;let Gn=(15&un)<<2|xi>>6,bn=63&xi;lt||(bn=64,et||(Gn=64)),be.push(ee[we>>2],ee[(3&we)<<4|un>>4],ee[Gn],ee[bn])}return be.join("")},encodeString(J,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(J):this.encodeByteArray(ve(J),Y)},decodeString(J,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(J):function(J){const Y=[];let ee=0,be=0;for(;ee<J.length;){const le=J[ee++];if(le<128)Y[be++]=String.fromCharCode(le);else if(le>191&&le<224){const we=J[ee++];Y[be++]=String.fromCharCode((31&le)<<6|63&we)}else if(le>239&&le<365){const lt=((7&le)<<18|(63&J[ee++])<<12|(63&J[ee++])<<6|63&J[ee++])-65536;Y[be++]=String.fromCharCode(55296+(lt>>10)),Y[be++]=String.fromCharCode(56320+(1023&lt))}else{const we=J[ee++],et=J[ee++];Y[be++]=String.fromCharCode((15&le)<<12|(63&we)<<6|63&et)}}return Y.join("")}(this.decodeStringToByteArray(J,Y))},decodeStringToByteArray(J,Y){this.init_();const ee=Y?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let le=0;le<J.length;){const we=ee[J.charAt(le++)],un=le<J.length?ee[J.charAt(le)]:0;++le;const xi=le<J.length?ee[J.charAt(le)]:64;++le;const Qe=le<J.length?ee[J.charAt(le)]:64;if(++le,null==we||null==un||null==xi||null==Qe)throw new ri;be.push(we<<2|un>>4),64!==xi&&(be.push(un<<4&240|xi>>2),64!==Qe&&be.push(xi<<6&192|Qe))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}};class ri extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bt=function(J){return function(J){const Y=ve(J);return Wn.encodeByteArray(Y,!0)}(J).replace(/\./g,"")},De=function(J){try{return Wn.decodeString(J,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function tt(J,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return Y}for(const ee in Y)!Y.hasOwnProperty(ee)||!Ot(ee)||(J[ee]=tt(J[ee],Y[ee]));return J}function Ot(J){return"__proto__"!==J}const Dt=()=>{try{return function Xt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const J=process.env.__FIREBASE_DEFAULTS__;return J?JSON.parse(J):void 0})()||(()=>{if(typeof document>"u")return;let J;try{J=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Y=J&&De(J[1]);return Y&&JSON.parse(Y)})()}catch(J){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${J}`)}},Vn=()=>{var J;return null===(J=Dt())||void 0===J?void 0:J.config},nn=J=>{var Y;return null===(Y=Dt())||void 0===Y?void 0:Y[`_${J}`]};class vn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,ee)=>{this.resolve=Y,this.reject=ee})}wrapCallback(Y){return(ee,be)=>{ee?this.reject(ee):this.resolve(be),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(ee):Y(ee,be))}}}function kr(J,Y){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=Y||"demo-project",le=J.iat||0,we=J.sub||J.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const et=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:le,exp:le+3600,auth_time:le,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},J);return[Bt(JSON.stringify({alg:"none",type:"JWT"})),Bt(JSON.stringify(et)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function di(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function Sn(){var J;const Y=null===(J=Dt())||void 0===J?void 0:J.forceEnvironment;if("node"===Y)return!0;if("browser"===Y)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ae(){return"object"==typeof self&&self.self===self}function qn(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function Nn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Is(){const J=ot();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function zl(){return!Sn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((J,Y)=>{try{let ee=!0;const be="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(be);le.onsuccess=()=>{le.result.close(),ee||self.indexedDB.deleteDatabase(be),J(!0)},le.onupgradeneeded=()=>{ee=!1},le.onerror=()=>{var we;Y((null===(we=le.error)||void 0===we?void 0:we.message)||"")}}catch(ee){Y(ee)}})}class Oe extends Error{constructor(Y,ee,be){super(ee),this.code=Y,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor(Y,ee,be){this.service=Y,this.serviceName=ee,this.errors=be}create(Y,...ee){const be=ee[0]||{},le=`${this.service}/${Y}`,we=this.errors[Y],et=we?function Re(J,Y){return J.replace(Ht,(ee,be)=>{const le=Y[be];return null!=le?String(le):`<${be}?>`})}(we,be):"Error";return new Oe(le,`${this.serviceName}: ${et} (${le}).`,be)}}const Ht=/\{\$([^}]+)}/g;function hi(J,Y){return Object.prototype.hasOwnProperty.call(J,Y)}function Mr(J){for(const Y in J)if(Object.prototype.hasOwnProperty.call(J,Y))return!1;return!0}function $a(J,Y){if(J===Y)return!0;const ee=Object.keys(J),be=Object.keys(Y);for(const le of ee){if(!be.includes(le))return!1;const we=J[le],et=Y[le];if(si(we)&&si(et)){if(!$a(we,et))return!1}else if(we!==et)return!1}for(const le of be)if(!ee.includes(le))return!1;return!0}function si(J){return null!==J&&"object"==typeof J}function Wa(J){const Y=[];for(const[ee,be]of Object.entries(J))Array.isArray(be)?be.forEach(le=>{Y.push(encodeURIComponent(ee)+"="+encodeURIComponent(le))}):Y.push(encodeURIComponent(ee)+"="+encodeURIComponent(be));return Y.length?"&"+Y.join("&"):""}function Eu(J){const Y={};return J.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[le,we]=be.split("=");Y[decodeURIComponent(le)]=decodeURIComponent(we)}}),Y}function Zs(J){const Y=J.indexOf("?");if(!Y)return"";const ee=J.indexOf("#",Y);return J.substring(Y,ee>0?ee:void 0)}function Hr(J,Y){const ee=new Ks(J,Y);return ee.subscribe.bind(ee)}class Ks{constructor(Y,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{Y(this)}).catch(be=>{this.error(be)})}next(Y){this.forEachObserver(ee=>{ee.next(Y)})}error(Y){this.forEachObserver(ee=>{ee.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,ee,be){let le;if(void 0===Y&&void 0===ee&&void 0===be)throw new Error("Missing Observer.");le=function Ys(J,Y){if("object"!=typeof J||null===J)return!1;for(const ee of Y)if(ee in J&&"function"==typeof J[ee])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:ee,complete:be},void 0===le.next&&(le.next=In),void 0===le.error&&(le.error=In),void 0===le.complete&&(le.complete=In);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch{}}),this.observers.push(le),we}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,Y)}sendOne(Y,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{ee(this.observers[Y])}catch(be){typeof console<"u"&&console.error&&console.error(be)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}function oa(J){return J&&J._delegate?J._delegate:J}},136:(Fo,Xi,wt)=>{function B(n){return"function"==typeof n}function ht(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Ze=ht(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function ve(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class Et{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(B(i))try{i()}catch(s){t=s instanceof Ze?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ji(s)}catch(o){t=t??[],o instanceof Ze?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Ze(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Ji(t);else{if(t instanceof Et){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ve(e,t)}remove(t){const{_finalizers:e}=this;e&&ve(e,t),t instanceof Et&&t._removeParent(this)}}Et.EMPTY=(()=>{const n=new Et;return n.closed=!0,n})();const Wn=Et.EMPTY;function ri(n){return n instanceof Et||n&&"closed"in n&&B(n.remove)&&B(n.add)&&B(n.unsubscribe)}function Ji(n){B(n)?n():n.unsubscribe()}const Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},De={setTimeout(n,t,...e){const{delegate:i}=De;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=De;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Pe(n){De.setTimeout(()=>{const{onUnhandledError:t}=Bt;if(!t)throw n;t(n)})}function tt(){}const Ot=tn("C",void 0,void 0);function tn(n,t,e){return{kind:n,value:t,error:e}}let gt=null;function Dt(n){if(Bt.useDeprecatedSynchronousErrorHandling){const t=!gt;if(t&&(gt={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=gt;if(gt=null,e)throw i}}else n()}class nr extends Et{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ri(t)&&t.add(this)):this.destination=Ae}static create(t,e,i){return new kr(t,e,i)}next(t){this.isStopped?Sn(function er(n){return tn("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Sn(function Xt(n){return tn("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Sn(Ot,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Vn=Function.prototype.bind;function nn(n,t){return Vn.call(n,t)}class vn{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){ot(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){ot(i)}else ot(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ot(e)}}}class kr extends nr{constructor(t,e,i){let r;if(super(),B(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Bt.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&nn(t.next,s),error:t.error&&nn(t.error,s),complete:t.complete&&nn(t.complete,s)}):r=t}this.destination=new vn(r)}}function ot(n){Bt.useDeprecatedSynchronousErrorHandling?function tr(n){Bt.useDeprecatedSynchronousErrorHandling&&gt&&(gt.errorThrown=!0,gt.error=n)}(n):Pe(n)}function Sn(n,t){const{onStoppedNotification:e}=Bt;e&&De.setTimeout(()=>e(n,t))}const Ae={closed:!0,next:tt,error:function di(n){throw n},complete:tt},qn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Nn(n){return n}function Is(n){return 0===n.length?Nn:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}let pt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const s=function he(n){return n&&n instanceof nr||function zl(n){return n&&B(n.next)&&B(n.error)&&B(n.complete)}(n)&&ri(n)}(e)?e:new kr(e,i,r);return Dt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=za(i))((r,s)=>{const o=new kr({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[qn](){return this}pipe(...e){return Is(e)(this)}toPromise(e){return new(e=za(e))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function za(n){var t;return null!==(t=n??Bt.Promise)&&void 0!==t?t:Promise}const _e=ht(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let se=(()=>{class n extends pt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ee(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new _e}next(e){Dt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){Dt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Dt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Wn:(this.currentObservers=null,s.push(e),new Et(()=>{this.currentObservers=null,ve(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){const e=new pt;return e.source=this,e}}return n.create=(t,e)=>new Ee(t,e),n})();class Ee extends se{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:Wn}}function Oe(n){return B(n?.lift)}function ge(n){return t=>{if(Oe(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(n,t,e,i,r){return new Ht(n,t,e,i,r)}class Ht extends nr{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Fe(n,t){return ge((e,i)=>{let r=0;e.subscribe(Re(i,s=>{i.next(n.call(t,s,r++))}))})}var st=wt(582);const Tt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Bn(n){return B(n?.then)}function As(n){return B(n[qn])}function cn(n){return Symbol.asyncIterator&&B(n?.[Symbol.asyncIterator])}function Ti(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const pr=function hi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Mr(n){return B(n?.[pr])}function $l(n){return(0,st.FC)(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,st.qq)(e.read());if(r)return yield(0,st.qq)(void 0);yield yield(0,st.qq)(i)}}finally{e.releaseLock()}})}function $a(n){return B(n?.getReader)}function si(n){if(n instanceof pt)return n;if(null!=n){if(As(n))return function Cu(n){return new pt(t=>{const e=n[qn]();if(B(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tt(n))return function Wa(n){return new pt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(Bn(n))return function Eu(n){return new pt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Pe)})}(n);if(cn(n))return Du(n);if(Mr(n))return function Zs(n){return new pt(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if($a(n))return function Hr(n){return Du($l(n))}(n)}throw Ti(n)}function Du(n){return new pt(t=>{(function Ks(n,t){var e,i,r,s;return(0,st.mG)(this,void 0,void 0,function*(){try{for(e=(0,st.KL)(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Si(n,t,e,i=0,r=!1){const s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function In(n,t,e=1/0){return B(t)?In((i,r)=>Fe((s,o)=>t(i,s,r,o))(si(n(i,r))),e):("number"==typeof t&&(e=t),ge((i,r)=>function Ys(n,t,e,i,r,s,o,a){const l=[];let c=0,u=0,f=!1;const m=()=>{f&&!l.length&&!c&&t.complete()},y=w=>c<i?v(w):l.push(w),v=w=>{s&&t.next(w),c++;let D=!1;si(e(w,u++)).subscribe(Re(t,P=>{r?.(P),s?y(P):t.next(P)},()=>{D=!0},void 0,()=>{if(D)try{for(c--;l.length&&c<i;){const P=l.shift();o?Si(t,o,()=>v(P)):v(P)}m()}catch(P){t.error(P)}}))};return n.subscribe(Re(t,y,()=>{f=!0,m()})),()=>{a?.()}}(i,r,n,e)))}function xs(n=1/0){return In(Nn,n)}const Ii=new pt(n=>n.complete());function Wl(n){return n&&B(n.schedule)}function zr(n){return n[n.length-1]}function qa(n){return B(zr(n))?n.pop():void 0}function Ai(n){return Wl(zr(n))?n.pop():void 0}function ps(n,t=0){return ge((e,i)=>{e.subscribe(Re(i,r=>Si(i,n,()=>i.next(r),t),()=>Si(i,n,()=>i.complete(),t),r=>Si(i,n,()=>i.error(r),t)))})}function $r(n,t=0){return ge((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function oa(n,t){if(!n)throw new Error("Iterable cannot be null");return new pt(e=>{Si(e,t,()=>{const i=n[Symbol.asyncIterator]();Si(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function ee(n,t){return t?function Y(n,t){if(null!=n){if(As(n))return function sa(n,t){return si(n).pipe($r(t),ps(t))}(n,t);if(Tt(n))return function Gl(n,t){return new pt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(Bn(n))return function Ch(n,t){return si(n).pipe($r(t),ps(t))}(n,t);if(cn(n))return oa(n,t);if(Mr(n))return function Su(n,t){return new pt(e=>{let i;return Si(e,t,()=>{i=n[pr](),Si(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>B(i?.return)&&i.return()})}(n,t);if($a(n))return function J(n,t){return oa($l(n),t)}(n,t)}throw Ti(n)}(n,t):si(n)}function be(...n){const t=Ai(n),e=function ql(n,t){return"number"==typeof zr(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?si(i[0]):xs(e)(ee(i,t)):Ii}class le extends se{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}function we(...n){return ee(n,Ai(n))}function et(n={}){const{connector:t=(()=>new se),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,f=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=f=!1},v=()=>{const w=o;y(),w?.unsubscribe()};return ge((w,D)=>{c++,!f&&!u&&m();const P=l=l??t();D.add(()=>{c--,0===c&&!f&&!u&&(a=un(v,r))}),P.subscribe(D),!o&&c>0&&(o=new kr({next:I=>P.next(I),error:I=>{f=!0,m(),a=un(y,e,I),P.error(I)},complete:()=>{u=!0,m(),a=un(y,i),P.complete()}}),si(w).subscribe(o))})(s)}}function un(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new kr({next:()=>{i.unsubscribe(),n()}});return si(t(...e)).subscribe(i)}function lt(n,t){return ge((e,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();e.subscribe(Re(i,l=>{r?.unsubscribe();let c=0;const u=s++;si(n(l,u)).subscribe(r=Re(i,f=>i.next(t?t(l,f,u,c++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function xi(n,t=Nn){return n=n??ki,ge((e,i)=>{let r,s=!0;e.subscribe(Re(i,o=>{const a=t(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function ki(n,t){return n===t}function Qe(n){for(let t in n)if(n[t]===Qe)return t;throw Error("Could not find renamed property on target object.")}function Gn(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function bn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(bn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function aa(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Iu=Qe({__forward_ref__:Qe});function fn(n){return n.__forward_ref__=fn,n.toString=function(){return bn(this())},n}function ct(n){return Lo(n)?n():n}function Lo(n){return"function"==typeof n&&n.hasOwnProperty(Iu)&&n.__forward_ref__===fn}function Zl(n){return n&&!!n.\u0275providers}const Vo="https://g.co/ng/security#xss";class H extends Error{constructor(t,e){super(function ae(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function ue(n){return"string"==typeof n?n:null==n?"":String(n)}function An(n,t){throw new H(-201,!1)}function Ms(n,t){null==n&&function ft(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kl(n){return Bv(n,Th)||Bv(n,Uv)}function Bv(n,t){return n.hasOwnProperty(t)?n[t]:null}function Au(n){return n&&(n.hasOwnProperty(Sh)||n.hasOwnProperty(Yl))?n[Sh]:null}const Th=Qe({\u0275prov:Qe}),Sh=Qe({\u0275inj:Qe}),Uv=Qe({ngInjectableDef:Qe}),Yl=Qe({ngInjectorDef:Qe});var Ft=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ft||{});let xu;function gr(n){const t=xu;return xu=n,t}function zv(n,t,e){const i=Kl(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Ft.Optional?null:void 0!==t?t:void An(bn(n))}const xn=globalThis;class Te{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ke({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Za={},vg="__NG_DI_FLAG__",Xl="ngTempTokenPath",Bo=/\n/gm,Kv="__source";let Pr;function go(n){const t=Pr;return Pr=n,t}function dT(n,t=Ft.Default){if(void 0===Pr)throw new H(-203,!1);return null===Pr?zv(n,void 0,t):Pr.get(n,t&Ft.Optional?null:void 0,t)}function ie(n,t=Ft.Default){return(function Hv(){return xu}()||dT)(ct(n),t)}function He(n,t=Ft.Default){return ie(n,Ih(t))}function Ih(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function wg(n){const t=[];for(let e=0;e<n.length;e++){const i=ct(n[e]);if(Array.isArray(i)){if(0===i.length)throw new H(900,!1);let r,s=Ft.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Ya(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(ie(r,s))}else t.push(ie(i))}return t}function Ka(n,t){return n[vg]=t,n.prototype[vg]=t,n}function Ya(n){return n[vg]}function gs(n){return{toString:n}.toString()}var Cg=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Cg||{}),Wr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Wr||{});const Hi={},jt=[],jo=Qe({\u0275cmp:Qe}),Ah=Qe({\u0275dir:Qe}),xh=Qe({\u0275pipe:Qe}),Eg=Qe({\u0275mod:Qe}),Uo=Qe({\u0275fac:Qe}),mo=Qe({__NG_ELEMENT_ID__:Qe}),Qv=Qe({__NG_ENV_ID__:Qe});function Ou(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}function kh(n,t,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{const s=r,o=e[++i];Mh(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function Dg(n){return 3===n||4===n||6===n}function Mh(n){return 64===n.charCodeAt(0)}function mr(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||Tg(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function Tg(n,t,e,i,r){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const Xv="ng-template";function Sg(n,t,e){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(e&&"class"===s&&-1!==Ou(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Nu(n){return 4===n.type&&n.value!==Xv}function Jv(n,t,e){return t===(4!==n.type||e?n.value:Xv)}function eb(n,t,e){let i=4;const r=n.attrs||[],s=function Rh(n){for(let t=0;t<n.length;t++)if(Dg(n[t]))return t;return n.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Jv(n,l,e)||""===l&&1===t.length){if(Qs(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!Sg(n.attrs,c,e)){if(Qs(i))return!1;o=!0}continue}const f=Ig(8&i?"class":l,r,Nu(n),e);if(-1===f){if(Qs(i))return!1;o=!0;continue}if(""!==c){let m;m=f>s?"":r[f+1].toLowerCase();const y=8&i?m:null;if(y&&-1!==Ou(y,c,0)||2&i&&c!==m){if(Qs(i))return!1;o=!0}}}}else{if(!o&&!Qs(i)&&!Qs(l))return!1;if(o&&Qs(l))continue;o=!1,i=l|1&i}}return Qs(i)||o}function Qs(n){return 0==(1&n)}function Ig(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function xg(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function Ph(n,t,e=!1){for(let i=0;i<t.length;i++)if(eb(n,t[i],e))return!0;return!1}function Oh(n,t){return n?":not("+t.trim()+")":t}function nb(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Qs(o)&&(t+=Oh(s,r),r=""),i=o,s=s||!Qs(i);e++}return""!==r&&(t+=Oh(s,r)),t}function kt(n){return gs(()=>{const t=Lh(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Cg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wr.Emulated,styles:n.styles||jt,_:null,schemas:n.schemas||null,tView:null,id:""};sb(e);const i=n.dependencies;return e.directiveDefs=Jl(i,!1),e.pipeDefs=Jl(i,!0),e.id=function Pg(n){let t=0;const e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(e),e})}function Mg(n){return Lt(n)||Pi(n)}function rb(n){return null!==n}function Wt(n){return gs(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Fh(n,t){if(null==n)return Hi;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,t&&(t[r]=s)}return e}function nt(n){return gs(()=>{const t=Lh(n);return sb(t),t})}function Mi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Lt(n){return n[jo]||null}function Pi(n){return n[Ah]||null}function ir(n){return n[xh]||null}function Rr(n,t){const e=n[Eg]||null;if(!e&&!0===t)throw new Error(`Type ${bn(n)} does not have '\u0275mod' property.`);return e}function Lh(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Hi,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fh(n.inputs,t),outputs:Fh(n.outputs)}}function sb(n){n.features?.forEach(t=>t(n))}function Jl(n,t){if(!n)return null;const e=t?ir:Mg;return()=>("function"==typeof n?n():n).map(i=>e(i)).filter(rb)}const oi=0,ze=1,vt=2,kn=3,Xs=4,Qa=5,_r=6,la=7,fi=8,ca=9,ua=10,_t=11,Fu=12,Vh=13,ec=14,Zn=15,Lu=16,da=17,_o=18,Xa=19,ob=20,yo=21,zo=22,Ja=23,Vu=24,Mt=25,Rg=1,Og=2,Ps=7,Js=9,rr=11;function qr(n){return Array.isArray(n)&&"object"==typeof n[Rg]}function Or(n){return Array.isArray(n)&&!0===n[Rg]}function Ng(n){return 0!=(4&n.flags)}function nc(n){return n.componentOffset>-1}function Fg(n){return 1==(1&n.flags)}function vo(n){return!!n.template}function Bu(n){return 0!=(512&n[vt])}function el(n,t){return n.hasOwnProperty(Uo)?n[Uo]:null}let _i=null,Vg=!1;function Ri(n){const t=_i;return _i=n,t}const cb={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function rc(n){if(!Hu(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Hh(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function hb(n){n.dirty=!0,function db(n){if(void 0===n.liveConsumerNode)return;const t=Vg;Vg=!0;try{for(const e of n.liveConsumerNode)e.dirty||hb(e)}finally{Vg=t}}(n),n.consumerMarkedDirty?.(n)}function ju(n){return n&&(n.nextProducerIndex=0),Ri(n)}function Bg(n,t){if(Ri(t),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Hu(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Uu(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Hh(n){$o(n);for(let t=0;t<n.producerNode.length;t++){const e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(rc(e),i!==e.version))return!0}return!1}function fb(n){if($o(n),Hu(n))for(let t=0;t<n.producerNode.length;t++)Uu(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Uu(n,t){if(function jg(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),$o(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Uu(n.producerNode[i],n.producerIndexOfThis[i]);const e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];$o(r),r.producerIndexOfThis[i]=t}}function Hu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function $o(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let _b=null;function $u(n){const t=Ri(null);try{return n()}finally{Ri(t)}}const wb=()=>{},ET=(()=>({...cb,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:wb}))();class DT{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function zi(){return Eb}function Eb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Db),TT}function TT(){const n=Sb(this),t=n?.current;if(t){const e=n.previous;if(e===Hi)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function Db(n,t,e,i){const r=this.declaredInputs[e],s=Sb(n)||function ST(n,t){return n[Tb]=t}(n,{previous:Hi,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new DT(l&&l.currentValue,t,a===Hi),n[i]=t}zi.ngInherit=!0;const Tb="__ngSimpleChanges__";function Sb(n){return n[Tb]||null}const Rs=function(n,t,e){};function Mn(n){for(;Array.isArray(n);)n=n[oi];return n}function tl(n,t){return Mn(t[n])}function yr(n,t){return Mn(t[n.index])}function Wh(n,t){return n.data[t]}function bo(n,t){return n[t]}function Oi(n,t){const e=t[n];return qr(e)?e:e[oi]}function fa(n,t){return null==t?null:n[t]}function qh(n){n[da]=0}function Ab(n){1024&n[vt]||(n[vt]|=1024,kb(n,1))}function xb(n){1024&n[vt]&&(n[vt]&=-1025,kb(n,-1))}function kb(n,t){let e=n[kn];if(null===e)return;e[Qa]+=t;let i=e;for(e=e[kn];null!==e&&(1===t&&1===i[Qa]||-1===t&&0===i[Qa]);)e[Qa]+=t,i=e,e=e[kn]}const dt={lFrame:im(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Rb(){return dt.bindingsEnabled}function Se(){return dt.lFrame.lView}function zt(){return dt.lFrame.tView}function te(n){return dt.lFrame.contextLView=n,n[fi]}function ne(n){return dt.lFrame.contextLView=null,n}function Ni(){let n=Ob();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ob(){return dt.lFrame.currentTNode}function Os(n,t){const e=dt.lFrame;e.currentTNode=n,e.isParent=t}function Yg(){return dt.lFrame.isParent}function Qg(){dt.lFrame.isParent=!1}function $i(){const n=dt.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function pa(){return dt.lFrame.bindingIndex++}function Wo(n){const t=dt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function Fb(n,t){const e=dt.lFrame;e.bindingIndex=e.bindingRootIndex=n,Kh(t)}function Kh(n){dt.lFrame.currentDirectiveIndex=n}function Lb(){return dt.lFrame.currentQueryIndex}function tm(n){dt.lFrame.currentQueryIndex=n}function NT(n){const t=n[ze];return 2===t.type?t.declTNode:1===t.type?n[_r]:null}function Yh(n,t,e){if(e&Ft.SkipSelf){let r=t,s=n;for(;!(r=r.parent,null!==r||e&Ft.Host||(r=NT(s),null===r||(s=s[ec],10&r.type))););if(null===r)return!1;t=r,n=s}const i=dt.lFrame=Vb();return i.currentTNode=t,i.lView=n,!0}function nm(n){const t=Vb(),e=n[ze];dt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Vb(){const n=dt.lFrame,t=null===n?null:n.child;return null===t?im(n):t}function im(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Bb(){const n=dt.lFrame;return dt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Yu=Bb;function rm(){const n=Bb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Nr(){return dt.lFrame.selectedIndex}function nl(n){dt.lFrame.selectedIndex=n}function Kn(){const n=dt.lFrame;return Wh(n.tView,n.selectedIndex)}let Ub=!0;function Qh(){return Ub}function ga(n){Ub=n}function Xh(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),null!=u&&(n.destroyHooks??=[]).push(e,u)}}function Jh(n,t,e){zb(n,t,3,e)}function ef(n,t,e,i){(3&n[vt])===e&&zb(n,t,e,i)}function om(n,t){let e=n[vt];(3&e)===t&&(e&=8191,e+=1,n[vt]=e)}function zb(n,t,e,i){const s=i??-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&n[da]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[da]+=65536),(a<s||-1==s)&&(am(n,e,t,l),n[da]=(4294901760&n[da])+l+2),l++}function tf(n,t){Rs(4,n,t);const e=Ri(null);try{t.call(n)}finally{Ri(e),Rs(5,n,t)}}function am(n,t,e,i){const r=e[i]<0,s=e[i+1],a=n[r?-e[i]:e[i]];r?n[vt]>>13<n[da]>>16&&(3&n[vt])===t&&(n[vt]+=8192,tf(a,s)):tf(a,s)}const ac=-1;class il{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function lc(n){return n!==ac}function cc(n){return 32767&n}function Qu(n,t){let e=function qb(n){return n>>16}(n),i=t;for(;e>0;)i=i[ec],e--;return i}let cm=!0;function nf(n){const t=cm;return cm=n,t}const Gb=255,um=5;let WT=0;const qo={};function wo(n,t){const e=Zb(n,t);if(-1!==e)return e;const i=t[ze];i.firstCreatePass&&(n.injectorIndex=t.length,dm(i.data,n),dm(t,null),dm(i.blueprint,null));const r=uc(n,t),s=n.injectorIndex;if(lc(r)){const o=cc(r),a=Qu(r,t),l=a[ze].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function dm(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Zb(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function uc(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){if(i=t0(r),null===i)return ac;if(e++,r=r[ec],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return ac}function hm(n,t,e){!function qT(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(mo)&&(i=e[mo]),null==i&&(i=e[mo]=WT++);const r=i&Gb;t.data[n+(r>>um)]|=1<<r}(n,t,e)}function Kb(n,t,e){if(e&Ft.Optional||void 0!==n)return n;An()}function Yb(n,t,e,i){if(e&Ft.Optional&&void 0===i&&(i=null),!(e&(Ft.Self|Ft.Host))){const r=n[ca],s=gr(void 0);try{return r?r.get(t,i,e&Ft.Optional):zv(t,i,e&Ft.Optional)}finally{gr(s)}}return Kb(i,0,e)}function rf(n,t,e,i=Ft.Default,r){if(null!==n){if(2048&t[vt]&&!(i&Ft.Self)){const o=function pm(n,t,e,i,r){let s=n,o=t;for(;null!==s&&null!==o&&2048&o[vt]&&!(512&o[vt]);){const a=Qb(s,o,e,i|Ft.Self,qo);if(a!==qo)return a;let l=s.parent;if(!l){const c=o[ob];if(c){const u=c.get(e,qo,i);if(u!==qo)return u}l=t0(o),o=o[ec]}s=l}return r}(n,t,e,i,qo);if(o!==qo)return o}const s=Qb(n,t,e,i,qo);if(s!==qo)return s}return Yb(t,e,i,r)}function Qb(n,t,e,i,r){const s=function ZT(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(mo)?n[mo]:void 0;return"number"==typeof t?t>=0?t&Gb:KT:t}(e);if("function"==typeof s){if(!Yh(t,n,i))return i&Ft.Host?Kb(r,0,i):Yb(t,e,i,r);try{let o;if(o=s(i),null!=o||i&Ft.Optional)return o;An()}finally{Yu()}}else if("number"==typeof s){let o=null,a=Zb(n,t),l=ac,c=i&Ft.Host?t[Zn][_r]:null;for((-1===a||i&Ft.SkipSelf)&&(l=-1===a?uc(n,t):t[a+8],l!==ac&&Jb(i,!1)?(o=t[ze],a=cc(l),t=Qu(l,t)):a=-1);-1!==a;){const u=t[ze];if(Xb(s,a,u.data)){const f=GT(a,t,e,o,i,c);if(f!==qo)return f}l=t[a+8],l!==ac&&Jb(i,t[ze].data[a+8]===c)&&Xb(s,a,t)?(o=u,a=cc(l),t=Qu(l,t)):a=-1}}return r}function GT(n,t,e,i,r,s){const o=t[ze],a=o.data[n+8],u=dc(a,o,e,null==i?nc(a)&&cm:i!=o&&0!=(3&a.type),r&Ft.Host&&s===a);return null!==u?rl(t,o,u,a):qo}function dc(n,t,e,i,r){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,u=s>>20,m=r?a+u:n.directiveEnd;for(let y=i?a:a+u;y<m;y++){const v=o[y];if(y<l&&e===v||y>=l&&v.type===e)return y}if(r){const y=o[l];if(y&&vo(y)&&y.type===e)return l}return null}function rl(n,t,e,i){let r=n[e];const s=t.data;if(function UT(n){return n instanceof il}(r)){const o=r;o.resolving&&function mt(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new H(-200,`Circular dependency in DI detected for ${n}${e}`)}(function xe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ue(n)}(s[e]));const a=nf(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?gr(o.injectImpl):null;Yh(n,i,Ft.Default);try{r=n[e]=o.factory(void 0,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&function Hb(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const o=Eb(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}(e,s[e],t)}finally{null!==c&&gr(c),nf(a),o.resolving=!1,Yu()}}return r}function Xb(n,t,e){return!!(e[t+(n>>um)]&1<<n)}function Jb(n,t){return!(n&Ft.Self||n&Ft.Host&&t)}class sr{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return rf(this._tNode,this._lView,t,Ih(i),e)}}function KT(){return new sr(Ni(),Se())}function Wi(n){return gs(()=>{const t=n.prototype.constructor,e=t[Uo]||Ju(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Uo]||Ju(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Ju(n){return Lo(n)?()=>{const t=Ju(ct(n));return t&&t()}:el(n)}function t0(n){const t=n[ze],e=t.type;return 2===e?t.declTNode:1===e?n[_r]:null}const hc="__parameters__";function pc(n,t,e){return gs(()=>{const i=function af(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const f=l.hasOwnProperty(hc)?l[hc]:Object.defineProperty(l,hc,{value:[]})[hc];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function _c(n,t){n.forEach(e=>Array.isArray(e)?_c(e,t):t(e))}function Zr(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function ma(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Kr(n,t,e){let i=ms(n,t);return i>=0?n[1|i]=e:(i=~i,function mm(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function _m(n,t){const e=ms(n,t);if(e>=0)return n[1|e]}function ms(n,t){return function o0(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}(n,t,1)}const vc=Ka(pc("Optional"),8),cf=Ka(pc("SkipSelf"),4);function _0(n){return 128==(128&n.flags)}var bc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(bc||{});const G7=/^>|^->|<!--|-->|--!>|<!-$/g,Z7=/(<|>)/g,K7="\u200b$1\u200b";const oS=new Map;let Y7=0;const lS="__ngContext__";function Qr(n,t){qr(t)?(n[lS]=t[Xa],function X7(n){oS.set(n[Xa],n)}(t)):n[lS]=t}let cS;function uS(n,t){return cS(n,t)}function Am(n){const t=n[kn];return Or(t)?t[kn]:t}function zO(n){return WO(n[Fu])}function $O(n){return WO(n[Xs])}function WO(n){for(;null!==n&&!Or(n);)n=n[Xs];return n}function pf(n,t,e,i,r){if(null!=i){let s,o=!1;Or(i)?s=i:qr(i)&&(o=!0,i=i[oi]);const a=Mn(i);0===n&&null!==e?null==r?KO(t,e,a):td(t,e,a,r||null,!0):1===n&&null!==e?td(t,e,a,r||null,!0):2===n?function D0(n,t,e){const i=C0(n,t);i&&function _q(n,t,e,i){n.removeChild(t,e,i)}(n,i,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=s&&function bq(n,t,e,i,r){const s=e[Ps];s!==Mn(e)&&pf(t,n,i,s,r);for(let a=rr;a<e.length;a++){const l=e[a];km(l[ze],l,n,t,i,s)}}(t,n,s,e,r)}}function dS(n,t){return n.createComment(function NO(n){return n.replace(G7,t=>t.replace(Z7,K7))}(t))}function b0(n,t,e){return n.createElement(t,e)}function GO(n,t){const e=n[Js],i=e.indexOf(t);xb(t),e.splice(i,1)}function w0(n,t){if(n.length<=rr)return;const e=rr+t,i=n[e];if(i){const r=i[Lu];null!==r&&r!==n&&GO(r,i),t>0&&(n[e-1][Xs]=i[Xs]);const s=ma(n,rr+t);!function cq(n,t){km(n,t,t[_t],2,null,null),t[oi]=null,t[_r]=null}(i[ze],i);const o=s[_o];null!==o&&o.detachView(s[ze]),i[kn]=null,i[Xs]=null,i[vt]&=-129}return i}function hS(n,t){if(!(256&t[vt])){const e=t[_t];t[Ja]&&fb(t[Ja]),t[Vu]&&fb(t[Vu]),e.destroyNode&&km(n,t,e,3,null,null),function hq(n){let t=n[Fu];if(!t)return fS(n[ze],n);for(;t;){let e=null;if(qr(t))e=t[Fu];else{const i=t[rr];i&&(e=i)}if(!e){for(;t&&!t[Xs]&&t!==n;)qr(t)&&fS(t[ze],t),t=t[kn];null===t&&(t=n),qr(t)&&fS(t[ze],t),e=t&&t[Xs]}t=e}}(t)}}function fS(n,t){if(!(256&t[vt])){t[vt]&=-129,t[vt]|=256,function mq(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof il)){const s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Rs(4,a,l);try{l.call(a)}finally{Rs(5,a,l)}}else{Rs(4,r,s);try{s.call(r)}finally{Rs(5,r,s)}}}}}(n,t),function gq(n,t){const e=n.cleanup,i=t[la];if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else e[s].call(i[e[s+1]]);null!==i&&(t[la]=null);const r=t[yo];if(null!==r){t[yo]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,t),1===t[ze].type&&t[_t].destroy();const e=t[Lu];if(null!==e&&Or(t[kn])){e!==t[kn]&&GO(e,t);const i=t[_o];null!==i&&i.detachView(n)}!function J7(n){oS.delete(n[Xa])}(t)}}function pS(n,t,e){return function ZO(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[oi];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Wr.None||s===Wr.Emulated)return null}return yr(i,e)}}(n,t.parent,e)}function td(n,t,e,i,r){n.insertBefore(t,e,i,r)}function KO(n,t,e){n.appendChild(t,e)}function YO(n,t,e,i,r){null!==i?td(n,t,e,i,r):KO(n,t,e)}function C0(n,t){return n.parentNode(t)}let gS,T0,vS,S0,JO=function XO(n,t,e){return 40&n.type?yr(n,e):null};function E0(n,t,e,i){const r=pS(n,i,t),s=t[_t],a=function QO(n,t,e){return JO(n,t,e)}(i.parent||t[_r],i,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)YO(s,r,e[l],a,!1);else YO(s,r,e,a,!1);void 0!==gS&&gS(s,i,t,e,r)}function xm(n,t){if(null!==t){const e=t.type;if(3&e)return yr(t,n);if(4&e)return mS(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return xm(n,i);{const r=n[t.index];return Or(r)?mS(-1,r):Mn(r)}}if(32&e)return uS(t,n)()||Mn(n[t.index]);{const i=tN(n,t);return null!==i?Array.isArray(i)?i[0]:xm(Am(n[Zn]),i):xm(n,t.next)}}return null}function tN(n,t){return null!==t?n[Zn][_r].projection[t.projection]:null}function mS(n,t){const e=rr+n+1;if(e<t.length){const i=t[e],r=i[ze].firstChild;if(null!==r)return xm(i,r)}return t[Ps]}function _S(n,t,e,i,r,s,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&Qr(Mn(a),i),e.flags|=2),32!=(32&e.flags))if(8&l)_S(n,t,e.child,i,r,s,!1),pf(t,n,r,a,s);else if(32&l){const c=uS(e,i);let u;for(;u=c();)pf(t,n,r,u,s);pf(t,n,r,a,s)}else 16&l?iN(n,t,i,e,r,s):pf(t,n,r,a,s);e=o?e.projectionNext:e.next}}function km(n,t,e,i,r,s){_S(e,i,n.firstChild,t,r,s,!1)}function iN(n,t,e,i,r,s){const o=e[Zn],l=o[_r].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)pf(t,n,r,l[c],s);else{let c=l;const u=o[kn];_0(i)&&(c.flags|=128),_S(n,t,c,u,r,s,!0)}}function rN(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function sN(n,t,e){const{mergedAttrs:i,classes:r,styles:s}=e;null!==i&&kh(n,t,i),null!==r&&rN(n,t,r),null!==s&&function Cq(n,t,e){n.setAttribute(t,"style",e)}(n,t,s)}function gf(n){return function yS(){if(void 0===T0&&(T0=null,xn.trustedTypes))try{T0=xn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return T0}()?.createHTML(n)||n}function mf(){if(void 0!==vS)return vS;if(typeof document<"u")return document;throw new H(210,!1)}function bS(){if(void 0===S0&&(S0=null,xn.trustedTypes))try{S0=xn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return S0}function oN(n){return bS()?.createHTML(n)||n}function lN(n){return bS()?.createScriptURL(n)||n}class cN{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vo})`}}function wc(n){return n instanceof cN?n.changingThisBreaksApplicationSecurity:n}function Mm(n,t){const e=function Pq(n){return n instanceof cN&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Vo})`)}return e===t}class Rq{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(gf(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class Oq{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=gf(t),e}}const Fq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wS(n){return(n=String(n)).match(Fq)?n:"unsafe:"+n}function sl(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Pm(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const dN=sl("area,br,col,hr,img,wbr"),hN=sl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fN=sl("rp,rt"),CS=Pm(dN,Pm(hN,sl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pm(fN,sl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pm(fN,hN)),ES=sl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pN=Pm(ES,sl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lq=sl("script,style,template");class Vq{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!CS.hasOwnProperty(e))return this.sanitizedSomething=!0,!Lq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!pN.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;ES[a]&&(l=wS(l)),this.buf.push(" ",o,'="',gN(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();CS.hasOwnProperty(e)&&!dN.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(gN(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Bq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jq=/([^\#-~ |!])/g;function gN(n){return n.replace(/&/g,"&amp;").replace(Bq,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(jq,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let I0;function DS(n){return"content"in n&&function Hq(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var _f=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(_f||{});function A0(n){const t=Rm();return t?oN(t.sanitize(_f.HTML,n)||""):Mm(n,"HTML")?oN(wc(n)):function Uq(n,t){let e=null;try{I0=I0||function uN(n){const t=new Oq(n);return function Nq(){try{return!!(new window.DOMParser).parseFromString(gf(""),"text/html")}catch{return!1}}()?new Rq(t):t}(n);let i=t?String(t):"";e=I0.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=I0.getInertBodyElement(i)}while(i!==s);return gf((new Vq).sanitizeChildren(DS(e)||e))}finally{if(e){const i=DS(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(mf(),ue(n))}function mN(n){const t=Rm();return t?t.sanitize(_f.URL,n)||"":Mm(n,"URL")?wc(n):wS(ue(n))}function _N(n){const t=Rm();if(t)return lN(t.sanitize(_f.RESOURCE_URL,n)||"");if(Mm(n,"ResourceURL"))return lN(wc(n));throw new H(904,!1)}function Rm(){const n=Se();return n&&n[ua].sanitizer}const Om=new Te("ENVIRONMENT_INITIALIZER"),vN=new Te("INJECTOR",-1),bN=new Te("INJECTOR_DEF_TYPES");class TS{get(t,e=Za){if(e===Za){const i=new Error(`NullInjectorError: No provider for ${bn(t)}!`);throw i.name="NullInjectorError",i}return e}}function SS(n){return{\u0275providers:n}}function wN(...n){return{\u0275providers:CN(0,n),\u0275fromNgModule:!0}}function CN(n,...t){const e=[],i=new Set;let r;const s=o=>{e.push(o)};return _c(t,o=>{const a=o;x0(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&EN(r,s),e}function EN(n,t){for(let e=0;e<n.length;e++){const{ngModule:i,providers:r}=n[e];IS(r,s=>{t(s,i)})}}function x0(n,t,e,i){if(!(n=ct(n)))return!1;let r=null,s=Au(n);const o=!s&&Lt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=Au(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)x0(c,t,e,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{_c(s.imports,u=>{x0(u,t,e,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&EN(c,t)}if(!a){const c=el(r)||(()=>new r);t({provide:r,useFactory:c,deps:jt},r),t({provide:bN,useValue:r,multi:!0},r),t({provide:Om,useValue:()=>ie(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;IS(l,u=>{t(u,c)})}}}return r!==n&&void 0!==n.providers}function IS(n,t){for(let e of n)Zl(e)&&(e=e.\u0275providers),Array.isArray(e)?IS(e,t):t(e)}const Zq=Qe({provide:String,useValue:Qe});function AS(n){return null!==n&&"object"==typeof n&&Zq in n}function nd(n){return"function"==typeof n}const xS=new Te("Set Injector scope."),k0={},Yq={};let kS;function M0(){return void 0===kS&&(kS=new TS),kS}class to{}class yf extends to{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,PS(t,o=>this.processProvider(o)),this.records.set(vN,vf(void 0,this)),r.has("environment")&&this.records.set(to,vf(void 0,this));const s=this.records.get(xS);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bN.multi,jt,Ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of t)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=go(this),i=gr(void 0);try{return t()}finally{go(e),gr(i)}}get(t,e=Za,i=Ft.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Qv))return t[Qv](this);i=Ih(i);const s=go(this),o=gr(void 0);try{if(!(i&Ft.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function tG(n){return"function"==typeof n||"object"==typeof n&&n instanceof Te}(t)&&Kl(t);l=c&&this.injectableDefInScope(c)?vf(MS(t),k0):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(i&Ft.Self?M0():this.parent).get(t,e=i&Ft.Optional&&e===Za?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Xl]=a[Xl]||[]).unshift(bn(t)),s)throw a;return function hT(n,t,e,i){const r=n[Xl];throw t[Kv]&&r.unshift(t[Kv]),n.message=function fT(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=bn(t);if(Array.isArray(t))r=t.map(bn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):bn(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(Bo,"\n  ")}`}("\n"+n.message,r,e,i),n.ngTokenPath=r,n[Xl]=null,n}(a,t,"R3InjectorError",this.source)}throw a}finally{gr(o),go(s)}}resolveInjectorInitializers(){const t=go(this),e=gr(void 0);try{const r=this.get(Om.multi,jt,Ft.Self);for(const s of r)s()}finally{go(t),gr(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(bn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(t){let e=nd(t=ct(t))?t:ct(t&&t.provide);const i=function Xq(n){return AS(n)?vf(void 0,n.useValue):vf(SN(n),k0)}(t);if(nd(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=vf(void 0,k0,!0),r.factory=()=>wg(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===k0&&(e.value=Yq,e.value=e.factory()),"object"==typeof e.value&&e.value&&function eG(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ct(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function MS(n){const t=Kl(n),e=null!==t?t.factory:el(n);if(null!==e)return e;if(n instanceof Te)throw new H(204,!1);if(n instanceof Function)return function Qq(n){const t=n.length;if(t>0)throw function yc(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}(t,"?"),new H(204,!1);const e=function jv(n){return n&&(n[Th]||n[Uv])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new H(204,!1)}function SN(n,t,e){let i;if(nd(n)){const r=ct(n);return el(r)||MS(r)}if(AS(n))i=()=>ct(n.useValue);else if(function TN(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...wg(n.deps||[]));else if(function DN(n){return!(!n||!n.useExisting)}(n))i=()=>ie(ct(n.useExisting));else{const r=ct(n&&(n.useClass||n.provide));if(!function Jq(n){return!!n.deps}(n))return el(r)||MS(r);i=()=>new r(...wg(n.deps))}return i}function vf(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function PS(n,t){for(const e of n)Array.isArray(e)?PS(e,t):e&&Zl(e)?PS(e.\u0275providers,t):t(e)}const P0=new Te("AppId",{providedIn:"root",factory:()=>nG}),nG="ng",IN=new Te("Platform Initializer"),Co=new Te("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nm=new Te("AnimationModuleType"),RS=new Te("CSP nonce",{providedIn:"root",factory:()=>mf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let AN=(n,t,e)=>null;function US(n,t,e=!1){return AN(n,t,e)}class hG{}class MN{}class pG{resolveComponentFactory(t){throw function fG(n){const t=Error(`No component factory found for ${bn(n)}.`);return t.ngComponent=n,t}(t)}}let id=(()=>{class n{static#e=this.NULL=new pG}return n})();function gG(){return Cf(Ni(),Se())}function Cf(n,t){return new pn(yr(n,t))}let pn=(()=>{class n{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=gG}return n})();function mG(n){return n instanceof pn?n.nativeElement:n}class Vm{}let Xr=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function _G(){const n=Se(),e=Oi(Ni().index,n);return(qr(e)?e:n)[_t]}()}return n})(),yG=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null})}return n})();class Cc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const RN=new Cc("16.2.12"),$S={};function LN(n,t=null,e=null,i){const r=VN(n,t,e,i);return r.resolveInjectorInitializers(),r}function VN(n,t=null,e=null,i,r=new Set){const s=[e||jt,wN(n)];return i=i||("object"==typeof n?void 0:bn(n)),new yf(s,t||M0(),i||null,r)}let qi=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Za;static#t=this.NULL=new TS;static create(e,i){if(Array.isArray(e))return LN({name:""},i,e,"");{const r=e.name??"";return LN({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=ke({token:n,providedIn:"any",factory:()=>ie(vN)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function qS(n){return n.ngOriginalError}class ol{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&qS(t);for(;e&&qS(e);)e=qS(e);return e||null}}function ZS(n){return t=>{setTimeout(n,void 0,t)}}const $e=class TG extends se{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=ZS(s),r&&(r=ZS(r)),o&&(o=ZS(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof Et&&t.add(a),a}};function jN(...n){}class at{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $e(!1),this.onMicrotaskEmpty=new $e(!1),this.onStable=new $e(!1),this.onError=new $e(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function SG(){const n="function"==typeof xn.requestAnimationFrame;let t=xn[n?"requestAnimationFrame":"setTimeout"],e=xn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function xG(n){const t=()=>{!function AG(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,YS(n),n.isCheckStableRunning=!0,KS(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),YS(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,o,a)=>{if(function MG(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(r,s,o,a);try{return UN(n),e.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),HN(n)}},onInvoke:(e,i,r,s,o,a,l)=>{try{return UN(n),e.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),HN(n)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,YS(n),KS(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!at.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(at.isInAngularZone())throw new H(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,IG,jN,jN);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const IG={};function KS(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function YS(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function UN(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HN(n){n._nesting--,KS(n)}const zN=new Te("",{providedIn:"root",factory:$N});function $N(){const n=He(at);let t=!0;return be(new pt(r=>{t=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(t),r.complete()})}),new pt(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{at.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(t=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{at.assertInAngularZone(),t&&(t=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(et()))}function al(n){return n instanceof Function?n():n}let QS=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}return n})();function Bm(n){for(;n;){n[vt]|=64;const t=Am(n);if(Bu(n)&&!t)return n;n=t}return null}const KN=new Te("",{providedIn:"root",factory:()=>!1});let B0=null;function JN(n,t){return n[t]??nF()}function eF(n,t){const e=nF();e.producerNode?.length&&(n[t]=B0,e.lView=n,B0=tF())}const UG={...cb,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Bm(n.lView)},lView:null};function tF(){return Object.create(UG)}function nF(){return B0??=tF(),B0}const Ct={};function R(n){iF(zt(),Se(),Nr()+n,!1)}function iF(n,t,e,i){if(!i)if(3==(3&t[vt])){const s=n.preOrderCheckHooks;null!==s&&Jh(t,s,e)}else{const s=n.preOrderHooks;null!==s&&ef(t,s,0,e)}nl(e)}function G(n,t=Ft.Default){const e=Se();return null===e?ie(n,t):rf(Ni(),e,ct(n),t)}function XS(){throw new Error("invalid")}function j0(n,t,e,i,r,s,o,a,l,c,u){const f=t.blueprint.slice();return f[oi]=r,f[vt]=140|i,(null!==c||n&&2048&n[vt])&&(f[vt]|=2048),qh(f),f[kn]=f[ec]=n,f[fi]=e,f[ua]=o||n&&n[ua],f[_t]=a||n&&n[_t],f[ca]=l||n&&n[ca]||null,f[_r]=s,f[Xa]=function Q7(){return Y7++}(),f[zo]=u,f[ob]=c,f[Zn]=2==t.type?n[Zn]:f,f}function Tf(n,t,e,i,r){let s=n.data[t];if(null===s)s=function JS(n,t,e,i,r){const s=Ob(),o=Yg(),l=n.data[t]=function KG(n,t,e,i,r,s){let o=t?t.injectorIndex:-1,a=0;return function oc(){return null!==dt.skipHydrationRootTNode}()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,t,e,i,r),function Nb(){return dt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const o=function Zu(){const n=dt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Os(s,!0),s}function jm(n,t,e,i){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function rF(n,t,e,i,r){const s=JN(t,Ja),o=Nr(),a=2&i;try{nl(-1),a&&t.length>Mt&&iF(n,t,Mt,!1),Rs(a?2:0,r);const c=a?s:null,u=ju(c);try{null!==c&&(c.dirty=!1),e(i,r)}finally{Bg(c,u)}}finally{a&&null===t[Ja]&&eF(t,Ja),nl(o),Rs(a?3:1,r)}}function eI(n,t,e){if(Ng(t)){const i=Ri(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{Ri(i)}}}function tI(n,t,e){Rb()&&(function nZ(n,t,e,i){const r=e.directiveStart,s=e.directiveEnd;nc(e)&&function cZ(n,t,e){const i=yr(t,n),r=sF(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=U0(n,j0(n,r,null,o,i,t,null,n[ua].rendererFactory.createRenderer(i,e),null,null,null));n[t.index]=a}(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||wo(e,t),Qr(i,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=rl(t,n,a,e);Qr(c,t),null!==o&&uZ(0,a-r,c,l,0,o),vo(l)&&(Oi(e.index,t)[fi]=rl(t,n,a,e))}}(n,t,e,yr(e,t)),64==(64&e.flags)&&uF(n,t,e))}function nI(n,t,e=yr){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?e(t,n):n[o];n[r++]=a}}}function sF(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=iI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function iI(n,t,e,i,r,s,o,a,l,c,u){const f=Mt+i,m=f+r,y=function zG(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:Ct);return e}(f,m),v="function"==typeof c?c():c;return y[ze]={type:n,blueprint:y,template:e,queries:null,viewQuery:a,declTNode:t,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:u}}let oF=n=>null;function aF(n,t,e,i){for(let r in n)if(n.hasOwnProperty(r)){e=null===e?{}:e;const s=n[r];null===i?lF(e,t,r,s):i.hasOwnProperty(r)&&lF(e,t,i[r],s)}return e}function lF(n,t,e,i){n.hasOwnProperty(e)?n[e].push(t,i):n[e]=[t,i]}function no(n,t,e,i,r,s,o,a){const l=yr(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(lI(n,e,u,i,r),nc(t)&&function XG(n,t){const e=Oi(t,n);16&e[vt]||(e[vt]|=64)}(e,t.index)):3&t.type&&(i=function QG(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,t.value||"",i):r,s.setProperty(l,i,r))}function rI(n,t,e,i){if(Rb()){const r=null===i?null:{"":-1},s=function rZ(n,t){const e=n.directiveRegistry;let i=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Ph(t,o.selectors,!1))if(i||(i=[]),vo(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),sI(n,t,a.length)}else i.unshift(o),sI(n,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&cF(n,t,e,o,r,a),r&&function sZ(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new H(-301,!1);i.push(t[r],s)}}}(e,i,r)}e.mergedAttrs=mr(e.mergedAttrs,e.attrs)}function cF(n,t,e,i,r,s){for(let c=0;c<i.length;c++)hm(wo(e,t),n,i[c].type);!function aZ(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=jm(n,t,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];e.mergedAttrs=mr(e.mergedAttrs,u.hostAttrs),lZ(n,e,t,l,u),oZ(l,u,r),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const f=u.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function YG(n,t,e){const r=t.directiveEnd,s=n.data,o=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<r;u++){const f=s[u],m=e?e.get(f):null,v=m?m.outputs:null;l=aF(f.inputs,u,l,m?m.inputs:null),c=aF(f.outputs,u,c,v);const w=null===l||null===o||Nu(t)?null:dZ(l,u,o);a.push(w)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,s)}function uF(n,t,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,o=function OT(){return dt.lFrame.currentDirectiveIndex}();try{nl(s);for(let a=i;a<r;a++){const l=n.data[a],c=t[a];Kh(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&iZ(l,c)}}finally{nl(-1),Kh(o)}}function iZ(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function sI(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function oZ(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;vo(t)&&(e[""]=n)}}function lZ(n,t,e,i,r){n.data[i]=r;const s=r.factory||(r.factory=el(r.type)),o=new il(s,vo(r),G);n.blueprint[i]=o,e[i]=o,function eZ(n,t,e,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~t.index;(function tZ(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,i,s)}}(n,t,i,jm(n,e,r.hostVars,Ct),r)}function _a(n,t,e,i,r,s){const o=yr(n,t);!function oI(n,t,e,i,r,s,o){if(null==s)n.removeAttribute(t,r,e);else{const a=null==o?ue(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}(t[_t],o,s,n.value,e,i,r)}function uZ(n,t,e,i,r,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)dF(i,e,o[a++],o[a++],o[a++])}function dF(n,t,e,i,r){const s=Ri(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(t,r)),null!==n.setInput?n.setInput(t,r,e,i):t[i]=r}finally{Ri(s)}}function dZ(n,t,e){let i=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){i.push(s,o[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function hF(n,t,e,i){return[n,!0,!1,t,null,0,i,e,null,null,null]}function fF(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const o=n.data[s];tm(e[i]),o.contentQueries(2,t[s],s)}}}function U0(n,t){return n[Fu]?n[Vh][Xs]=t:n[Fu]=t,n[Vh]=t,t}function aI(n,t,e){tm(0);const i=Ri(null);try{t(n,e)}finally{Ri(i)}}function pF(n){return n[la]||(n[la]=[])}function gF(n){return n.cleanup||(n.cleanup=[])}function _F(n,t){const e=n[ca],i=e?e.get(ol,null):null;i&&i.handleError(t)}function lI(n,t,e,i,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++];dF(n.data[o],t[o],i,a,r)}}function ll(n,t,e){const i=tl(t,n);!function qO(n,t,e){n.setValue(t,e)}(n[_t],i,e)}function hZ(n,t){const e=Oi(t,n),i=e[ze];!function fZ(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}(i,e);const r=e[oi];null!==r&&null===e[zo]&&(e[zo]=US(r,e[ca])),cI(i,e,e[fi])}function cI(n,t,e){nm(t);try{const i=n.viewQuery;null!==i&&aI(1,i,e);const r=n.template;null!==r&&rF(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&fF(n,t),n.staticViewQueries&&aI(2,n.viewQuery,e);const s=n.components;null!==s&&function pZ(n,t){for(let e=0;e<t.length;e++)hZ(n,t[e])}(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[vt]&=-5,rm()}}let yF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(e,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function CT(n,t,e){const i=Object.create(ET);e&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=t;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>hb(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Hh(i))return;i.hasRun=!0;const o=ju(i);try{i.cleanupFn(),i.cleanupFn=wb,i.fn(r)}finally{Bg(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(e,c=>{this.all.has(c)&&this.queue.set(c,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[e,i]of this.queue)this.queue.delete(e),i?i.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}return n})();function H0(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=aa(r,a):2==s&&(i=aa(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function Um(n,t,e,i,r=!1){for(;null!==e;){const s=t[e.index];null!==s&&i.push(Mn(s)),Or(s)&&vF(s,i);const o=e.type;if(8&o)Um(n,t,e.child,i);else if(32&o){const a=uS(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=tN(t,e);if(Array.isArray(a))i.push(...a);else{const l=Am(t[Zn]);Um(l[ze],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function vF(n,t){for(let e=rr;e<n.length;e++){const i=n[e],r=i[ze].firstChild;null!==r&&Um(i[ze],i,r,t)}n[Ps]!==n[oi]&&t.push(n[Ps])}function z0(n,t,e,i=!0){const r=t[ua],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{bF(n,t,n.template,e)}catch(l){throw i&&_F(t,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function bF(n,t,e,i){const r=t[vt];if(256!=(256&r)){t[ua].effectManager?.flush(),nm(t);try{qh(t),function Jg(n){return dt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&rF(n,t,e,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&Jh(t,c,null)}else{const c=n.preOrderHooks;null!==c&&ef(t,c,0,null),om(t,0)}if(function _Z(n){for(let t=zO(n);null!==t;t=$O(t)){if(!t[Og])continue;const e=t[Js];for(let i=0;i<e.length;i++){Ab(e[i])}}}(t),wF(t,2),null!==n.contentQueries&&fF(n,t),o){const c=n.contentCheckHooks;null!==c&&Jh(t,c)}else{const c=n.contentHooks;null!==c&&ef(t,c,1),om(t,1)}!function HG(n,t){const e=n.hostBindingOpCodes;if(null===e)return;const i=JN(t,Vu);try{for(let r=0;r<e.length;r++){const s=e[r];if(s<0)nl(~s);else{const o=s,a=e[++r],l=e[++r];Fb(a,o),i.dirty=!1;const c=ju(i);try{l(2,t[o])}finally{Bg(i,c)}}}}finally{null===t[Vu]&&eF(t,Vu),nl(-1)}}(n,t);const a=n.components;null!==a&&EF(t,a,0);const l=n.viewQuery;if(null!==l&&aI(2,l,i),o){const c=n.viewCheckHooks;null!==c&&Jh(t,c)}else{const c=n.viewHooks;null!==c&&ef(t,c,2),om(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[vt]&=-73,xb(t)}finally{rm()}}}function wF(n,t){for(let e=zO(n);null!==e;e=$O(e))for(let i=rr;i<e.length;i++)CF(e[i],t)}function yZ(n,t,e){CF(Oi(t,n),e)}function CF(n,t){if(!function xT(n){return 128==(128&n[vt])}(n))return;const e=n[ze],i=n[vt];if(80&i&&0===t||1024&i||2===t)bF(e,n,e.template,n[fi]);else if(n[Qa]>0){wF(n,1);const r=e.components;null!==r&&EF(n,r,1)}}function EF(n,t,e){for(let i=0;i<t.length;i++)yZ(n,t[i],e)}class Hm{get rootNodes(){const t=this._lView,e=t[ze];return Um(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fi]}set context(t){this._lView[fi]=t}get destroyed(){return 256==(256&this._lView[vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[kn];if(Or(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(w0(t,i),ma(e,i))}this._attachedToViewContainer=!1}hS(this._lView[ze],this._lView)}onDestroy(t){!function Gh(n,t){if(256==(256&n[vt]))throw new H(911,!1);null===n[yo]&&(n[yo]=[]),n[yo].push(t)}(this._lView,t)}markForCheck(){Bm(this._cdRefInjectingView||this._lView)}detach(){this._lView[vt]&=-129}reattach(){this._lView[vt]|=128}detectChanges(){z0(this._lView[ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dq(n,t){km(n,t,t[_t],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=t}}class vZ extends Hm{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;z0(t[ze],t,t[fi],!1)}checkNoChanges(){}get context(){return null}}class DF extends id{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Lt(t);return new zm(e,this.ngModule)}}function TF(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class wZ{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Ih(i);const r=this.injector.get(t,$S,i);return r!==$S||e===$S?r:this.parentInjector.get(t,e,i)}}class zm extends MN{get inputs(){const t=this.componentDef,e=t.inputTransforms,i=TF(t.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return TF(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function kg(n){return n.map(nb).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let s=(r=r||this.ngModule)instanceof to?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new wZ(t,s):t,a=o.get(Vm,null);if(null===a)throw new H(407,!1);const f={rendererFactory:a,sanitizer:o.get(yG,null),effectManager:o.get(yF,null),afterRenderEventManager:o.get(QS,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",v=i?function $G(n,t,e,i){const s=i.get(KN,!1)||e===Wr.ShadowDom,o=n.selectRootElement(t,s);return function WG(n){oF(n)}(o),o}(m,i,this.componentDef.encapsulation,o):b0(m,y,function bZ(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(y)),P=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let I=null;null!==v&&(I=US(v,o,!0));const O=iI(0,null,null,1,0,null,null,null,null,null,null),W=j0(null,O,null,P,null,null,f,m,o,null,I);let K,re;nm(W);try{const V=this.componentDef;let M,F=null;V.findHostDirectiveDefs?(M=[],F=new Map,V.findHostDirectiveDefs(V,M,F),M.push(V)):M=[V];const z=function EZ(n,t){const e=n[ze],i=Mt;return n[i]=t,Tf(e,i,2,"#host",null)}(W,v),j=function DZ(n,t,e,i,r,s,o){const a=r[ze];!function TZ(n,t,e,i){for(const r of n)t.mergedAttrs=mr(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(H0(t,t.mergedAttrs,!0),null!==e&&sN(i,e,t))}(i,n,t,o);let l=null;null!==t&&(l=US(t,r[ca]));const c=s.rendererFactory.createRenderer(t,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const f=j0(r,sF(e),null,u,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&sI(a,n,i.length-1),U0(r,f),r[n.index]=f}(z,v,V,M,W,f,m);re=Wh(O,Mt),v&&function IZ(n,t,e,i){if(i)kh(n,e,["ng-version",RN.full]);else{const{attrs:r,classes:s}=function Nh(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&t.push(s,n[++i]):8===r&&e.push(s);else{if(!Qs(r))break;r=s}i++}return{attrs:t,classes:e}}(t.selectors[0]);r&&kh(n,e,r),s&&s.length>0&&rN(n,e,s.join(" "))}}(m,V,v,i),void 0!==e&&function AZ(n,t,e){const i=n.projection=[];for(let r=0;r<t.length;r++){const s=e[r];i.push(null!=s?Array.from(s):null)}}(re,this.ngContentSelectors,e),K=function SZ(n,t,e,i,r,s){const o=Ni(),a=r[ze],l=yr(o,r);cF(a,r,o,e,null,i);for(let u=0;u<e.length;u++)Qr(rl(r,a,o.directiveStart+u,o),r);uF(a,r,o),l&&Qr(l,r);const c=rl(r,a,o.directiveStart+o.componentOffset,o);if(n[fi]=r[fi]=c,null!==s)for(const u of s)u(c,t);return eI(a,o,n),c}(j,V,M,F,W,[xZ]),cI(O,W,null)}finally{rm()}return new CZ(this.componentType,K,Cf(re,W),W,re)}}class CZ extends hG{constructor(t,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new vZ(r),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const s=this._rootLView;lI(s[ze],s,r,t,e),this.previousInputValues.set(t,e),Bm(Oi(this._tNode.index,s))}}get injector(){return new sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function xZ(){const n=Ni();Xh(Se()[ze],n)}function sn(n){let t=function SF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(vo(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new H(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);const o=n;o.inputs=$0(n.inputs),o.inputTransforms=$0(n.inputTransforms),o.declaredInputs=$0(n.declaredInputs),o.outputs=$0(n.outputs);const a=r.hostBindings;a&&RZ(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&MZ(n,l),c&&PZ(n,c),Gn(n.inputs,r.inputs),Gn(n.declaredInputs,r.declaredInputs),Gn(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Gn(o.inputTransforms,r.inputTransforms)),vo(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===sn&&(e=!1)}}t=Object.getPrototypeOf(t)}!function kZ(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=mr(r.hostAttrs,e=mr(e,r.hostAttrs))}}(i)}function $0(n){return n===Hi?{}:n===jt?[]:n}function MZ(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function PZ(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,s)=>{t(i,r,s),e(i,r,s)}:t}function RZ(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}function kF(n){const t=n.inputConfig,e={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];Array.isArray(r)&&r[2]&&(e[i]=r[2])}n.inputTransforms=e}function W0(n){return!!uI(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function uI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ya(n,t,e){return n[t]=e}function $m(n,t){return n[t]}function Jr(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function rd(n,t,e,i){const r=Jr(n,t,e);return Jr(n,t+1,i)||r}function q0(n,t,e,i,r){const s=rd(n,t,e,i);return Jr(n,t+2,r)||s}function Eo(n,t,e,i,r,s){const o=rd(n,t,e,i);return rd(n,t+2,r,s)||o}function gi(n,t,e,i){const r=Se();return Jr(r,pa(),t)&&(zt(),_a(Kn(),r,n,t,e,i)),gi}function Af(n,t,e,i,r,s){const a=rd(n,function eo(){return dt.lFrame.bindingIndex}(),e,r);return Wo(2),a?t+ue(e)+i+ue(r)+s:Ct}function me(n,t,e,i,r,s,o,a){const l=Se(),c=zt(),u=n+Mt,f=c.firstCreatePass?function rK(n,t,e,i,r,s,o,a,l){const c=t.consts,u=Tf(t,n,4,o||null,fa(c,a));rI(t,e,u,fa(c,l)),Xh(t,u);const f=u.tView=iI(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,i,r,s,o):c.data[u];Os(f,!1);const m=zF(c,l,f,n);Qh()&&E0(c,l,m,f),Qr(m,l),U0(l,l[u]=hF(m,l,m,f)),Fg(f)&&tI(c,l,f),null!=o&&nI(l,f,a)}let zF=function $F(n,t,e,i){return ga(!0),t[_t].createComment("")};function vr(n){return bo(function Xg(){return dt.lFrame.contextLView}(),Mt+n)}function N(n,t,e){const i=Se();return Jr(i,pa(),t)&&no(zt(),Kn(),i,n,t,i[_t],e,!1),N}function mI(n,t,e,i,r){const o=r?"class":"style";lI(n,e,t.inputs[o],o,i)}function C(n,t,e,i){const r=Se(),s=zt(),o=Mt+n,a=r[_t],l=s.firstCreatePass?function lK(n,t,e,i,r,s){const o=t.consts,l=Tf(t,n,2,i,fa(o,r));return rI(t,e,l,fa(o,s)),null!==l.attrs&&H0(l,l.attrs,!1),null!==l.mergedAttrs&&H0(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,i):s.data[o],c=WF(s,r,l,a,t,n);r[o]=c;const u=Fg(l);return Os(l,!0),sN(a,c,l),32!=(32&l.flags)&&Qh()&&E0(s,r,c,l),0===function Wg(){return dt.lFrame.elementDepthCount}()&&Qr(c,r),function PT(){dt.lFrame.elementDepthCount++}(),u&&(tI(s,r,l),eI(s,l,r)),null!==i&&nI(r,l),C}function E(){let n=Ni();Yg()?Qg():(n=n.parent,Os(n,!1));const t=n;(function qg(n){return dt.skipHydrationRootTNode===n})(t)&&function Kg(){dt.skipHydrationRootTNode=null}(),function Gu(){dt.lFrame.elementDepthCount--}();const e=zt();return e.firstCreatePass&&(Xh(e,n),Ng(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function zT(n){return 0!=(8&n.flags)}(t)&&mI(e,t,Se(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function wO(n){return 0!=(16&n.flags)}(t)&&mI(e,t,Se(),t.stylesWithoutHost,!1),E}function dn(n,t,e,i){return C(n,t,e,i),E(),dn}let WF=(n,t,e,i,r,s)=>(ga(!0),b0(i,r,function jb(){return dt.lFrame.currentNamespace}()));function _I(n,t,e){const i=Se(),r=zt(),s=n+Mt,o=r.firstCreatePass?function dK(n,t,e,i,r){const s=t.consts,o=fa(s,i),a=Tf(t,n,8,"ng-container",o);return null!==o&&H0(a,o,!0),rI(t,e,a,fa(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,e):r.data[s];Os(o,!0);const a=qF(r,i,o,n);return i[s]=a,Qh()&&E0(r,i,a,o),Qr(a,i),Fg(o)&&(tI(r,i,o),eI(r,o,i)),null!=e&&nI(i,o),_I}function yI(){let n=Ni();const t=zt();return Yg()?Qg():(n=n.parent,Os(n,!1)),t.firstCreatePass&&(Xh(t,n),Ng(n)&&t.queries.elementEnd(n)),yI}function vI(n,t,e){return _I(n,t,e),yI(),vI}let qF=(n,t,e,i)=>(ga(!0),dS(t[_t],""));function We(){return Se()}function Zm(n){return!!n&&"function"==typeof n.then}function GF(n){return!!n&&"function"==typeof n.subscribe}function X(n,t,e,i){const r=Se(),s=zt(),o=Ni();return function KF(n,t,e,i,r,s,o){const a=Fg(i),c=n.firstCreatePass&&gF(n),u=t[fi],f=pF(t);let m=!0;if(3&i.type||o){const w=yr(i,t),D=o?o(w):w,P=f.length,I=o?W=>o(Mn(W[i.index])):i.index;let O=null;if(!o&&a&&(O=function pK(n,t,e,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===i){const a=t[la],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,r,i.index)),null!==O)(O.__ngLastListenerFn__||O).__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,m=!1;else{s=QF(i,t,u,s,!1);const W=e.listen(D,r,s);f.push(s,W),c&&c.push(r,I,P,P+1)}}else s=QF(i,t,u,s,!1);const y=i.outputs;let v;if(m&&null!==y&&(v=y[r])){const w=v.length;if(w)for(let D=0;D<w;D+=2){const K=t[v[D]][v[D+1]].subscribe(s),re=f.length;f.push(s,K),c&&c.push(r,i.index,re,-(re+1))}}}(s,r,r[_t],o,n,t,i),X}function YF(n,t,e,i){try{return Rs(6,t,e),!1!==e(i)}catch(r){return _F(n,r),!1}finally{Rs(7,t,e)}}function QF(n,t,e,i,r){return function s(o){if(o===Function)return i;Bm(n.componentOffset>-1?Oi(n.index,t):t);let l=YF(t,e,i,o),c=s.__ngNextListenerFn__;for(;c;)l=YF(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function U(n=1){return function FT(n){return(dt.lFrame.contextLView=function LT(n,t){for(;n>0;)t=t[ec],n--;return t}(n,dt.lFrame.contextLView))[fi]}(n)}function Y0(n,t){return n<<17|t<<2}function Ec(n){return n>>17&32767}function wI(n){return 2|n}function sd(n){return(131068&n)>>2}function CI(n,t){return-131069&n|t<<2}function EI(n){return 1|n}function l2(n,t,e,i,r){const s=n[e+1],o=null===t;let a=i?Ec(s):sd(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];EK(n[a],t)&&(l=!0,n[a+1]=i?EI(u):wI(u)),a=i?Ec(u):sd(u)}l&&(n[e+1]=i?wI(s):EI(s))}function EK(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&ms(n,t)>=0}function _s(n,t,e){return Zo(n,t,e,!1),_s}function br(n,t){return Zo(n,t,null,!0),br}function Zo(n,t,e,i){const r=Se(),s=zt(),o=Wo(2);s.firstUpdatePass&&function m2(n,t,e,i){const r=n.data;if(null===r[e+1]){const s=r[Nr()],o=function g2(n,t){return t>=n.expandoStartIndex}(n,e);(function b2(n,t){return 0!=(n.flags&(t?8:16))})(s,i)&&null===t&&!o&&(t=!1),t=function PK(n,t,e,i){const r=function Ku(n){const t=dt.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=Km(e=DI(null,n,t,e,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==r)if(e=DI(r,n,t,e,i),null===s){let l=function RK(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==sd(i))return n[Ec(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=DI(null,n,t,l[1],i),l=Km(l,t.attrs,i),function OK(n,t,e,i){n[Ec(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else s=function NK(n,t,e){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=Km(i,n[s].hostAttrs,e);return Km(i,t.attrs,e)}(n,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,i),function wK(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=Ec(o),l=sd(o);n[i]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||ms(e,u)>0)&&(c=!0)):u=e,r)if(0!==l){const m=Ec(n[a+1]);n[i+1]=Y0(m,a),0!==m&&(n[m+1]=CI(n[m+1],i)),n[a+1]=function vK(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=Y0(a,0),0!==a&&(n[a+1]=CI(n[a+1],i)),a=i;else n[i+1]=Y0(l,0),0===a?a=i:n[l+1]=CI(n[l+1],i),l=i;c&&(n[i+1]=wI(n[i+1])),l2(n,u,i,!0),l2(n,u,i,!1),function CK(n,t,e,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&ms(s,t)>=0&&(e[i+1]=EI(e[i+1]))}(t,u,n,i,s),o=Y0(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,i)}}(s,n,o,i),t!==Ct&&Jr(r,o,t)&&function y2(n,t,e,i,r,s,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function bK(n){return 1==(1&n)}(c)?v2(l,t,e,r,sd(c),o):void 0;Q0(u)||(Q0(s)||function yK(n){return 2==(2&n)}(c)&&(s=v2(l,null,e,r,a,o)),function wq(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=-1===i.indexOf("-")?void 0:bc.DashCase;null==r?n.removeStyle(e,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=bc.Important),n.setStyle(e,i,r,s))}}(i,o,tl(Nr(),e),r,s))}(s,s.data[Nr()],r,r[_t],n,r[o+1]=function BK(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=bn(wc(n)))),n}(t,e),i,o)}function DI(n,t,e,i,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],i=Km(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function Km(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Kr(n,o,!!e||t[++s]))}return void 0===n?null:n}function v2(n,t,e,i,r,s){const o=null===t;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,f=null===u;let m=e[r+1];m===Ct&&(m=f?jt:void 0);let y=f?_m(m,i):u===i?m:void 0;if(c&&!Q0(y)&&(y=_m(l,i)),Q0(y)&&(a=y,o))return a;const v=n[r+1];r=o?Ec(v):sd(v)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=_m(l,i))}return a}function Q0(n){return void 0!==n}function x(n,t=""){const e=Se(),i=zt(),r=n+Mt,s=i.firstCreatePass?Tf(i,r,1,t,null):i.data[r],o=w2(i,e,s,t,n);e[r]=o,Qh()&&E0(i,e,o,s),Os(s,!1)}let w2=(n,t,e,i,r)=>(ga(!0),function v0(n,t){return n.createText(t)}(t[_t],i));function Je(n){return yi("",n,""),Je}function yi(n,t,e){const i=Se(),r=function If(n,t,e,i){return Jr(n,pa(),e)?t+ue(e)+i:Ct}(i,n,t,e);return r!==Ct&&ll(i,Nr(),r),yi}function X0(n,t,e,i,r){const s=Se(),o=Af(s,n,t,e,i,r);return o!==Ct&&ll(s,Nr(),o),X0}function TI(n,t,e){const i=Se();return Jr(i,pa(),t)&&no(zt(),Kn(),i,n,t,i[_t],e,!0),TI}const od=void 0;var aY=["en",[["a","p"],["AM","PM"],od],[["AM","PM"],od,od],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],od,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],od,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",od,"{1} 'at' {0}",od],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oY(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Ff={};function ys(n){const t=function lY(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=j2(t);if(e)return e;const i=t.split("-")[0];if(e=j2(i),e)return e;if("en"===i)return aY;throw new H(701,!1)}function j2(n){return n in Ff||(Ff[n]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[n]),Ff[n]}var jn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(jn||{});const Lf="en-US";let U2=Lf;function AI(n,t,e,i,r){if(n=ct(n),Array.isArray(n))for(let s=0;s<n.length;s++)AI(n[s],t,e,i,r);else{const s=zt(),o=Se(),a=Ni();let l=nd(n)?n:ct(n.provide);const c=SN(n),u=1048575&a.providerIndexes,f=a.directiveStart,m=a.providerIndexes>>20;if(nd(n)||!n.multi){const y=new il(c,r,G),v=kI(l,t,r?u:u+m,f);-1===v?(hm(wo(a,o),s,l),xI(s,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(y),o.push(y)):(e[v]=y,o[v]=y)}else{const y=kI(l,t,u+m,f),v=kI(l,t,u,u+m),D=v>=0&&e[v];if(r&&!D||!r&&!(y>=0&&e[y])){hm(wo(a,o),s,l);const P=function oQ(n,t,e,i,r){const s=new il(n,e,G);return s.multi=[],s.index=t,s.componentProviders=0,hL(s,r,i&&!e),s}(r?sQ:rQ,e.length,r,i,c);!r&&D&&(e[v].providerFactory=P),xI(s,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(P),o.push(P)}else xI(s,n,y>-1?y:v,hL(e[r?v:y],c,!r&&i));!r&&i&&D&&e[v].componentProviders++}}}function xI(n,t,e,i){const r=nd(t),s=function Kq(n){return!!n.useClass}(t);if(r||s){const l=(s?ct(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function hL(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function kI(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function rQ(n,t,e,i){return MI(this.multi,[])}function sQ(n,t,e,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=rl(e,e[ze],this.providerFactory.index,i);s=a.slice(0,o),MI(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],MI(r,s);return s}function MI(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function gn(n,t=[]){return e=>{e.providersResolver=(i,r)=>function iQ(n,t,e){const i=zt();if(i.firstCreatePass){const r=vo(n);AI(e,i.data,i.blueprint,r,!0),AI(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class ad{}class fL{}class PI extends ad{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DF(this);const r=Rr(t);this._bootstrapComponents=al(r.bootstrap),this._r3Injector=VN(t,e,[{provide:ad,useValue:this},{provide:id,useValue:this.componentFactoryResolver},...i],bn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class RI extends fL{constructor(t){super(),this.moduleType=t}create(t){return new PI(this.moduleType,t,[])}}class pL extends ad{constructor(t){super(),this.componentFactoryResolver=new DF(this),this.instance=null;const e=new yf([...t.providers,{provide:ad,useValue:this},{provide:id,useValue:this.componentFactoryResolver}],t.parent||M0(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function OI(n,t,e=null){return new pL({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}let cQ=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=CN(0,e.type),r=i.length>0?OI([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(ie(to))})}return n})();function Gi(n){n.getStandaloneInjector=t=>t.get(cQ).getOrCreateStandaloneInjector(n)}function Un(n,t,e){const i=$i()+n,r=Se();return r[i]===Ct?ya(r,i,e?t.call(e):t()):$m(r,i)}function Jt(n,t,e,i){return DL(Se(),$i(),n,t,e,i)}function Fi(n,t,e,i,r){return TL(Se(),$i(),n,t,e,i,r)}function iw(n,t,e,i,r,s){return SL(Se(),$i(),n,t,e,i,r,s)}function wL(n,t,e,i,r,s,o){return function IL(n,t,e,i,r,s,o,a,l){const c=t+e;return Eo(n,c,r,s,o,a)?ya(n,c+4,l?i.call(l,r,s,o,a):i(r,s,o,a)):t_(n,c+4)}(Se(),$i(),n,t,e,i,r,s,o)}function FI(n,t,e,i,r,s,o,a){const l=$i()+n,c=Se(),u=Eo(c,l,e,i,r,s);return Jr(c,l+4,o)||u?ya(c,l+5,a?t.call(a,e,i,r,s,o):t(e,i,r,s,o)):$m(c,l+5)}function LI(n,t,e,i){return function AL(n,t,e,i,r,s){let o=t+e,a=!1;for(let l=0;l<r.length;l++)Jr(n,o++,r[l])&&(a=!0);return a?ya(n,o,i.apply(s,r)):t_(n,o)}(Se(),$i(),n,t,e,i)}function t_(n,t){const e=n[t];return e===Ct?void 0:e}function DL(n,t,e,i,r,s){const o=t+e;return Jr(n,o,r)?ya(n,o+1,s?i.call(s,r):i(r)):t_(n,o+1)}function TL(n,t,e,i,r,s,o){const a=t+e;return rd(n,a,r,s)?ya(n,a+2,o?i.call(o,r,s):i(r,s)):t_(n,a+2)}function SL(n,t,e,i,r,s,o,a){const l=t+e;return q0(n,l,r,s,o)?ya(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):t_(n,l+3)}function qt(n,t){const e=zt();let i;const r=n+Mt;e.firstCreatePass?(i=function vQ(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}}(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=el(i.type)),a=gr(G);try{const l=nf(!1),c=s();return nf(l),function aK(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,Se(),r,c),c}finally{gr(a)}}function VI(n,t,e){const i=n+Mt,r=Se(),s=bo(r,i);return n_(r,i)?DL(r,$i(),t,s.transform,e,s):s.transform(e)}function Yn(n,t,e,i){const r=n+Mt,s=Se(),o=bo(s,r);return n_(s,r)?TL(s,$i(),t,o.transform,e,i,o):o.transform(e,i)}function wa(n,t,e,i,r){const s=n+Mt,o=Se(),a=bo(o,s);return n_(o,s)?SL(o,$i(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function n_(n,t){return n[ze].data[t].pure}function CQ(){return this._results[Symbol.iterator]()}class BI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new $e)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=BI.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=CQ)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=function Gr(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function JT(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function DQ(n,t,e,i=!0){const r=t[ze];if(function fq(n,t,e,i){const r=rr+i,s=e.length;i>0&&(e[r-1][Xs]=t),i<s-rr?(t[Xs]=e[r],Zr(e,rr+i,t)):(e.push(t),t[Xs]=null),t[kn]=e;const o=t[Lu];null!==o&&e!==o&&function pq(n,t){const e=n[Js];t[Zn]!==t[kn][kn][Zn]&&(n[Og]=!0),null===e?n[Js]=[t]:e.push(t)}(o,t);const a=t[_o];null!==a&&a.insertView(n),t[vt]|=128}(r,t,n,e),i){const s=mS(e,n),o=t[_t],a=C0(o,n[Ps]);null!==a&&function uq(n,t,e,i,r,s){i[oi]=r,i[_r]=t,km(n,i,e,1,r,s)}(r,n[_r],o,t,a,s)}}let Do=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=IQ}return n})();const TQ=Do,SQ=class extends TQ{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){const r=function EQ(n,t,e,i){const r=t.tView,a=j0(n,r,e,4096&n[vt]?4096:16,null,t,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Lu]=n[t.index];const c=n[_o];return null!==c&&(a[_o]=c.createEmbeddedView(r)),cI(r,a,e),a}(this._declarationLView,this._declarationTContainer,t,{injector:e,hydrationInfo:i});return new Hm(r)}};function IQ(){return rw(Ni(),Se())}function rw(n,t){return 4&n.type?new SQ(t,n,Cf(n,t)):null}let vs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=RQ}return n})();function RQ(){return NL(Ni(),Se())}const OQ=vs,RL=class extends OQ{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Cf(this._hostTNode,this._hostLView)}get injector(){return new sr(this._hostTNode,this._hostLView)}get parentInjector(){const t=uc(this._hostTNode,this._hostLView);if(lc(t)){const e=Qu(t,this._hostLView),i=cc(t);return new sr(e[ze].data[i+8],e)}return new sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=OL(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-rr}createEmbeddedView(t,e,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=t.createEmbeddedViewImpl(e||{},s,null);return this.insertImpl(a,r,false),a}createComponent(t,e,i,r,s){const o=t&&!function mc(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const w=e||{};a=w.index,i=w.injector,r=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const l=o?t:new zm(Lt(t)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const D=(o?c:this.parentInjector).get(to,null);D&&(s=D)}Lt(l.componentType??{});const y=l.create(c,r,null,s);return this.insertImpl(y.hostView,a,false),y}insert(t,e){return this.insertImpl(t,e,!1)}insertImpl(t,e,i){const r=t._lView;if(function kT(n){return Or(n[kn])}(r)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const c=r[kn],u=new RL(c,c[_r],c[kn]);u.detach(u.indexOf(t))}}const o=this._adjustIndex(e),a=this._lContainer;return DQ(a,r,o,!i),t.attachToViewContainerRef(),Zr(jI(a),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=OL(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=w0(this._lContainer,e);i&&(ma(jI(this._lContainer),e),hS(i[ze],i))}detach(t){const e=this._adjustIndex(t,-1),i=w0(this._lContainer,e);return i&&null!=ma(jI(this._lContainer),e)?new Hm(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function OL(n){return n[8]}function jI(n){return n[8]||(n[8]=[])}function NL(n,t){let e;const i=t[n.index];return Or(i)?e=i:(e=hF(i,t,null,n),t[n.index]=e,U0(t,e)),FL(e,t,n,i),new RL(e,n,t)}let FL=function LL(n,t,e,i){if(n[Ps])return;let r;r=8&e.type?Mn(i):function NQ(n,t){const e=n[_t],i=e.createComment(""),r=yr(t,n);return td(e,C0(e,r),i,function yq(n,t){return n.nextSibling(t)}(e,r),!1),i}(t,e),n[Ps]=r};class UI{constructor(t){this.queryList=t,this.matches=null}clone(){return new UI(this.queryList)}setDirty(){this.queryList.setDirty()}}class HI{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new HI(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==HL(t,e).matches&&this.queries[e].setDirty()}}class VL{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class zI{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new zI(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class $I{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new $I(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,e,VQ(e,s)),this.matchTNodeWithReadOption(t,e,dc(e,t,s,!1,!1))}else i===Do?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,dc(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===pn||r===vs||r===Do&&4&e.type)this.addMatch(e.index,-2);else{const s=dc(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function VQ(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function jQ(n,t,e,i){return-1===e?function BQ(n,t){return 11&n.type?Cf(n,t):4&n.type?rw(n,t):null}(t,n):-2===e?function UQ(n,t,e){return e===pn?Cf(t,n):e===Do?rw(t,n):e===vs?NL(t,n):void 0}(n,t,i):rl(n,n[ze],e,t)}function BL(n,t,e,i){const r=t[_o].queries[i];if(null===r.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:jQ(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function WI(n,t,e,i){const r=n.queries.getByIndex(e),s=r.matches;if(null!==s){const o=BL(n,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let f=rr;f<u.length;f++){const m=u[f];m[Lu]===m[kn]&&WI(m[ze],m,c,i)}if(null!==u[Js]){const f=u[Js];for(let m=0;m<f.length;m++){const y=f[m];WI(y[ze],y,c,i)}}}}}return i}function ld(n){const t=Se(),e=zt(),i=Lb();tm(i+1);const r=HL(e,i);if(n.dirty&&function $g(n){return 4==(4&n[vt])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?WI(e,t,i,[]):BL(e,t,r,i);n.reset(s,mG),n.notifyOnChanges()}return!0}return!1}function qI(n,t,e){const i=zt();i.firstCreatePass&&(function UL(n,t,e){null===n.queries&&(n.queries=new zI),n.queries.track(new $I(t,e))}(i,new VL(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),function jL(n,t,e){const i=new BI(4==(4&e));(function ZG(n,t,e,i){const r=pF(t);r.push(e),n.firstCreatePass&&gF(n).push(i,r.length-1)})(n,t,i,i.destroy),null===t[_o]&&(t[_o]=new HI),t[_o].queries.push(new UI(i))}(i,Se(),t)}function cd(){return function HQ(n,t){return n[_o].queries[t].queryList}(Se(),Lb())}function HL(n,t){return n.queries.getByIndex(t)}function To(n,t){return rw(n,t)}const XI=new Te("Application Initializer");let JI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=He(XI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const s=r();if(Zm(s))e.push(s);else if(GF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sV=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Bs=new Te("LocaleId",{providedIn:"root",factory:()=>He(Bs,Ft.Optional|Ft.SkipSelf)||function uX(){return typeof $localize<"u"&&$localize.locale||Lf}()});let aw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new le(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class fX{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let oV=(()=>{class n{compileModuleSync(e){return new RI(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=al(Rr(e).declarations).reduce((o,a)=>{const l=Lt(a);return l&&o.push(new zm(l)),o},[]);return new fX(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const uV=new Te(""),cw=new Te("");let rA,nA=(()=>{class n{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rA||(function NX(n){rA=n}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{at.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(ie(at),ie(iA),ie(cw))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),iA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return rA?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Dc=null;const sA=new Te("PlatformDestroyListeners"),oA=new Te("appBootstrapListener");class fV{constructor(t,e){this.name=t,this.token=e}}function jX(n){try{const{rootComponent:t,appProviders:e,platformProviders:i}=n,r=function BX(n=[]){if(Dc)return Dc;const t=function gV(n=[],t){return qi.create({name:t,providers:[{provide:xS,useValue:"platform"},{provide:sA,useValue:new Set([()=>Dc=null])},...n]})}(n);return Dc=t,function hV(){!function yb(n){_b=n}(()=>{throw new H(600,!1)})}(),function pV(n){n.get(IN,null)?.forEach(e=>e())}(t),t}(i),s=[WX(),...e||[]],a=new pL({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(at);return l.run(()=>{a.resolveInjectorInitializers();const c=a.get(ol,null);let u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:y=>{c.handleError(y)}})});const f=()=>a.destroy(),m=r.get(sA);return m.add(f),a.onDestroy(()=>{u.unsubscribe(),m.delete(f)}),function yV(n,t,e){try{const i=e();return Zm(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(c,l,()=>{const y=a.get(JI);return y.runInitializers(),y.donePromise.then(()=>{!function H2(n){Ms(n,"Expected localeId to be defined"),"string"==typeof n&&(U2=n.toLowerCase().replace(/_/g,"-"))}(a.get(Bs,Lf)||Lf);const w=a.get(Tc);return void 0!==t&&w.bootstrap(t),w})})})}catch(t){return Promise.reject(t)}}let Tc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=He(wV),this.zoneIsStable=He(zN),this.componentTypes=[],this.components=[],this.isStable=He(aw).hasPendingTasks.pipe(lt(e=>e?we(!1):this.zoneIsStable),xi(),et()),this._injector=He(to)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof MN;if(!this._injector.get(JI).done)throw!r&&function Ho(n){const t=Lt(n)||Pi(n)||ir(n);return null!==t&&t.standalone}(e),new H(405,!1);let o;o=r?e:this._injector.get(id).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function LX(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ad),c=o.create(qi.NULL,[],i||o.selector,a),u=c.location.nativeElement,f=c.injector.get(uV,null);return f?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),uw(this.components,c),f?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;uw(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(oA,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>uw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new H(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uw(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const wV=new Te("",{providedIn:"root",factory:()=>He(ol).handleError.bind(void 0)});function zX(){const n=He(at),t=He(ol);return e=>n.runOutsideAngular(()=>t.handleError(e))}let $X=(()=>{class n{constructor(){this.zone=He(at),this.applicationRef=He(Tc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CV(n){return[{provide:at,useFactory:n},{provide:Om,multi:!0,useFactory:()=>{const t=He($X,{optional:!0});return()=>t.initialize()}},{provide:wV,useFactory:zX},{provide:zN,useFactory:$N}]}function WX(n){return SS([[],CV(()=>new at(function _V(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}(n)))])}let Sc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qX}return n})();function qX(n){return function GX(n,t,e){if(nc(n)&&!e){const i=Oi(n.index,t);return new Hm(i,i)}return 47&n.type?new Hm(t[Zn],t):null}(Ni(),Se(),16==(16&n))}class IV{constructor(){}supports(t){return W0(t)}create(t){return new JX(t)}}const XX=(n,t)=>t;class JX{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||XX}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const o=!i||e&&e.currentIndex<xV(i,r,s)?e:i,a=xV(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,v=y+m;u<=v&&v<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!W0(t))throw new H(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),i=!0),e=e._next}else r=0,function jZ(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new eJ(e,i),s,r),t}_verifyReinsertion(t,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new AV),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AV),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class eJ{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tJ{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class AV{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new tJ,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xV(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}class kV{constructor(){}supports(t){return t instanceof Map||uI(t)}create(){return new nJ}}class nJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||uI(t)))throw new H(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new iJ(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class iJ{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function MV(){return new fw([new IV])}let fw=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:MV});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||MV()),deps:[[n,new cf,new vc]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new H(901,!1)}}return n})();function PV(){return new o_([new kV])}let o_=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:PV});constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||PV()),deps:[[n,new cf,new vc]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new H(901,!1)}}return n})(),oJ=(()=>{class n{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Tc))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({})}return n})();function jf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let fA=null;function Ic(){return fA}class bJ{}const Vt=new Te("DocumentToken");let pA=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(CJ)},providedIn:"platform"})}return n})();const wJ=new Te("Location Initialized");let CJ=(()=>{class n extends pA{constructor(){super(),this._doc=He(Vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ic().getBaseHref(this._doc)}onPopState(e){const i=Ic().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Ic().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function gA(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function HV(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function cl(n){return n&&"?"!==n[0]?"?"+n:n}let dd=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He($V)},providedIn:"root"})}return n})();const zV=new Te("appBaseHref");let $V=(()=>{class n extends dd{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??He(Vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return gA(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+cl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const o=this.prepareExternalUrl(r+cl(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){const o=this.prepareExternalUrl(r+cl(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(pA),ie(zV,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EJ=(()=>{class n extends dd{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=gA(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+cl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+cl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(pA),ie(zV,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),a_=(()=>{class n{constructor(e){this._subject=new $e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function SJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(HV(WV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+cl(i))}normalize(e){return n.stripTrailingSlash(function TJ(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,WV(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+cl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+cl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=cl;static#t=this.joinWithSlash=gA;static#n=this.stripTrailingSlash=HV;static#i=this.\u0275fac=function(i){return new(i||n)(ie(dd))};static#r=this.\u0275prov=ke({token:n,factory:function(){return function DJ(){return new a_(ie(dd))}()},providedIn:"root"})}return n})();function WV(n){return n.replace(/\/index.html$/,"")}var Uf=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(Uf||{}),ws=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ws||{}),Fn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Fn||{}),io=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(io||{}),Li=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Li||{});function mw(n,t){return Io(ys(n)[jn.DateFormat],t)}function _w(n,t){return Io(ys(n)[jn.TimeFormat],t)}function yw(n,t){return Io(ys(n)[jn.DateTimeFormat],t)}function So(n,t){const e=ys(n),i=e[jn.NumberSymbols][t];if(typeof i>"u"){if(t===Li.CurrencyDecimal)return e[jn.NumberSymbols][Li.Decimal];if(t===Li.CurrencyGroup)return e[jn.NumberSymbols][Li.Group]}return i}const OJ=function B2(n){return ys(n)[jn.PluralCase]};function GV(n){if(!n[jn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[jn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Io(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function _A(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const jJ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,l_={},UJ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ul=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ul||{}),mn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(mn||{}),_n=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(_n||{});function ar(n,t,e,i){let r=function YJ(n){if(YV(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return vw(r,s-1,o)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(jJ))return function QJ(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,o,a,l,c),t}(i)}const t=new Date(n);if(!YV(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=dl(e,t)||t;let a,o=[];for(;t;){if(a=UJ.exec(t),!a){o.push(t);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;t=u}}let l=r.getTimezoneOffset();i&&(l=KV(i,l),r=function KJ(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function ZJ(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(KV(t,r)-r))}(r,i,!0));let c="";return o.forEach(u=>{const f=function GJ(n){if(vA[n])return vA[n];let t;switch(n){case"G":case"GG":case"GGG":t=Hn(_n.Eras,Fn.Abbreviated);break;case"GGGG":t=Hn(_n.Eras,Fn.Wide);break;case"GGGGG":t=Hn(_n.Eras,Fn.Narrow);break;case"y":t=Zi(mn.FullYear,1,0,!1,!0);break;case"yy":t=Zi(mn.FullYear,2,0,!0,!0);break;case"yyy":t=Zi(mn.FullYear,3,0,!1,!0);break;case"yyyy":t=Zi(mn.FullYear,4,0,!1,!0);break;case"Y":t=Ew(1);break;case"YY":t=Ew(2,!0);break;case"YYY":t=Ew(3);break;case"YYYY":t=Ew(4);break;case"M":case"L":t=Zi(mn.Month,1,1);break;case"MM":case"LL":t=Zi(mn.Month,2,1);break;case"MMM":t=Hn(_n.Months,Fn.Abbreviated);break;case"MMMM":t=Hn(_n.Months,Fn.Wide);break;case"MMMMM":t=Hn(_n.Months,Fn.Narrow);break;case"LLL":t=Hn(_n.Months,Fn.Abbreviated,ws.Standalone);break;case"LLLL":t=Hn(_n.Months,Fn.Wide,ws.Standalone);break;case"LLLLL":t=Hn(_n.Months,Fn.Narrow,ws.Standalone);break;case"w":t=yA(1);break;case"ww":t=yA(2);break;case"W":t=yA(1,!0);break;case"d":t=Zi(mn.Date,1);break;case"dd":t=Zi(mn.Date,2);break;case"c":case"cc":t=Zi(mn.Day,1);break;case"ccc":t=Hn(_n.Days,Fn.Abbreviated,ws.Standalone);break;case"cccc":t=Hn(_n.Days,Fn.Wide,ws.Standalone);break;case"ccccc":t=Hn(_n.Days,Fn.Narrow,ws.Standalone);break;case"cccccc":t=Hn(_n.Days,Fn.Short,ws.Standalone);break;case"E":case"EE":case"EEE":t=Hn(_n.Days,Fn.Abbreviated);break;case"EEEE":t=Hn(_n.Days,Fn.Wide);break;case"EEEEE":t=Hn(_n.Days,Fn.Narrow);break;case"EEEEEE":t=Hn(_n.Days,Fn.Short);break;case"a":case"aa":case"aaa":t=Hn(_n.DayPeriods,Fn.Abbreviated);break;case"aaaa":t=Hn(_n.DayPeriods,Fn.Wide);break;case"aaaaa":t=Hn(_n.DayPeriods,Fn.Narrow);break;case"b":case"bb":case"bbb":t=Hn(_n.DayPeriods,Fn.Abbreviated,ws.Standalone,!0);break;case"bbbb":t=Hn(_n.DayPeriods,Fn.Wide,ws.Standalone,!0);break;case"bbbbb":t=Hn(_n.DayPeriods,Fn.Narrow,ws.Standalone,!0);break;case"B":case"BB":case"BBB":t=Hn(_n.DayPeriods,Fn.Abbreviated,ws.Format,!0);break;case"BBBB":t=Hn(_n.DayPeriods,Fn.Wide,ws.Format,!0);break;case"BBBBB":t=Hn(_n.DayPeriods,Fn.Narrow,ws.Format,!0);break;case"h":t=Zi(mn.Hours,1,-12);break;case"hh":t=Zi(mn.Hours,2,-12);break;case"H":t=Zi(mn.Hours,1);break;case"HH":t=Zi(mn.Hours,2);break;case"m":t=Zi(mn.Minutes,1);break;case"mm":t=Zi(mn.Minutes,2);break;case"s":t=Zi(mn.Seconds,1);break;case"ss":t=Zi(mn.Seconds,2);break;case"S":t=Zi(mn.FractionalSeconds,1);break;case"SS":t=Zi(mn.FractionalSeconds,2);break;case"SSS":t=Zi(mn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=ww(ul.Short);break;case"ZZZZZ":t=ww(ul.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=ww(ul.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=ww(ul.Long);break;default:return null}return vA[n]=t,t}(u);c+=f?f(r,e,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function vw(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function dl(n,t){const e=function AJ(n){return ys(n)[jn.LocaleId]}(n);if(l_[e]=l_[e]||{},l_[e][t])return l_[e][t];let i="";switch(t){case"shortDate":i=mw(n,io.Short);break;case"mediumDate":i=mw(n,io.Medium);break;case"longDate":i=mw(n,io.Long);break;case"fullDate":i=mw(n,io.Full);break;case"shortTime":i=_w(n,io.Short);break;case"mediumTime":i=_w(n,io.Medium);break;case"longTime":i=_w(n,io.Long);break;case"fullTime":i=_w(n,io.Full);break;case"short":const r=dl(n,"shortTime"),s=dl(n,"shortDate");i=bw(yw(n,io.Short),[r,s]);break;case"medium":const o=dl(n,"mediumTime"),a=dl(n,"mediumDate");i=bw(yw(n,io.Medium),[o,a]);break;case"long":const l=dl(n,"longTime"),c=dl(n,"longDate");i=bw(yw(n,io.Long),[l,c]);break;case"full":const u=dl(n,"fullTime"),f=dl(n,"fullDate");i=bw(yw(n,io.Full),[u,f])}return i&&(l_[e][t]=i),i}function bw(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Yo(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function Zi(n,t,e=0,i=!1,r=!1){return function(s,o){let a=function zJ(n,t){switch(n){case mn.FullYear:return t.getFullYear();case mn.Month:return t.getMonth();case mn.Date:return t.getDate();case mn.Hours:return t.getHours();case mn.Minutes:return t.getMinutes();case mn.Seconds:return t.getSeconds();case mn.FractionalSeconds:return t.getMilliseconds();case mn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||a>-e)&&(a+=e),n===mn.Hours)0===a&&-12===e&&(a=12);else if(n===mn.FractionalSeconds)return function HJ(n,t){return Yo(n,3).substring(0,t)}(a,t);const l=So(o,Li.MinusSign);return Yo(a,t,l,i,r)}}function Hn(n,t,e=ws.Format,i=!1){return function(r,s){return function $J(n,t,e,i,r,s){switch(e){case _n.Months:return function MJ(n,t,e){const i=ys(n),s=Io([i[jn.MonthsFormat],i[jn.MonthsStandalone]],t);return Io(s,e)}(t,r,i)[n.getMonth()];case _n.Days:return function kJ(n,t,e){const i=ys(n),s=Io([i[jn.DaysFormat],i[jn.DaysStandalone]],t);return Io(s,e)}(t,r,i)[n.getDay()];case _n.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function NJ(n){const t=ys(n);return GV(t),(t[jn.ExtraData][2]||[]).map(i=>"string"==typeof i?_A(i):[_A(i[0]),_A(i[1])])}(t),u=function FJ(n,t,e){const i=ys(n);GV(i);const s=Io([i[jn.ExtraData][0],i[jn.ExtraData][1]],t)||[];return Io(s,e)||[]}(t,r,i),f=c.findIndex(m=>{if(Array.isArray(m)){const[y,v]=m,w=o>=y.hours&&a>=y.minutes,D=o<v.hours||o===v.hours&&a<v.minutes;if(y.hours<v.hours){if(w&&D)return!0}else if(w||D)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(-1!==f)return u[f]}return function xJ(n,t,e){const i=ys(n),s=Io([i[jn.DayPeriodsFormat],i[jn.DayPeriodsStandalone]],t);return Io(s,e)}(t,r,i)[o<12?0:1];case _n.Eras:return function PJ(n,t){return Io(ys(n)[jn.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function ww(n){return function(t,e,i){const r=-1*i,s=So(e,Li.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case ul.Short:return(r>=0?"+":"")+Yo(o,2,s)+Yo(Math.abs(r%60),2,s);case ul.ShortGMT:return"GMT"+(r>=0?"+":"")+Yo(o,1,s);case ul.Long:return"GMT"+(r>=0?"+":"")+Yo(o,2,s)+":"+Yo(Math.abs(r%60),2,s);case ul.Extended:return 0===i?"Z":(r>=0?"+":"")+Yo(o,2,s)+":"+Yo(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const WJ=0,Cw=4;function ZV(n){return vw(n.getFullYear(),n.getMonth(),n.getDate()+(Cw-n.getDay()))}function yA(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=ZV(e),o=function qJ(n){const t=vw(n,WJ,1).getDay();return vw(n,0,1+(t<=Cw?Cw:Cw+7)-t)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Yo(r,n,So(i,Li.MinusSign))}}function Ew(n,t=!1){return function(e,i){return Yo(ZV(e).getFullYear(),n,So(i,Li.MinusSign),t)}}const vA={};function KV(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function YV(n){return n instanceof Date&&!isNaN(n.valueOf())}let DA=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(i){let r=null;return i?r=new i:(s=ie(Bs),r=new lee(s)),r;var s},providedIn:"root"})}return n})();let lee=(()=>{class n extends DA{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(OJ(i||this.locale)(e)){case Uf.Zero:return"zero";case Uf.One:return"one";case Uf.Two:return"two";case Uf.Few:return"few";case Uf.Many:return"many";default:return"other"}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Bs))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function e3(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}const TA=/\s+/,t3=[];let wr=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=t3,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(TA):t3}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(TA):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(TA).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(G(fw),G(o_),G(pn),G(Xr))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class uee{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vi=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new uee(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),r3(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{r3(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(G(vs),G(Do),G(fw))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function r3(n,t){n.context.$implicit=t.item}let Cr=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new dee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){s3("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){s3("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(G(vs),G(Do))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class dee{constructor(){this.$implicit=null,this.ngIf=null}}function s3(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${bn(t)}'.`)}let Ao=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:bc.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(G(pn),G(o_),G(Xr))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),xo=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(G(vs))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[zi]})}return n})();function Qo(n,t){return new H(2100,!1)}class gee{createSubscription(t,e){return $u(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){$u(()=>t.unsubscribe())}}class mee{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const _ee=new mee,yee=new gee;let a3=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Zm(e))return _ee;if(GF(e))return yee;throw Qo()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(G(Sc,16))};static#t=this.\u0275pipe=Mi({name:"async",type:n,pure:!1,standalone:!0})}return n})();const Dee=new Te("DATE_PIPE_DEFAULT_TIMEZONE"),Tee=new Te("DATE_PIPE_DEFAULT_OPTIONS");let u_=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(null==e||""===e||e!=e)return null;try{return ar(e,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Qo()}}static#e=this.\u0275fac=function(i){return new(i||n)(G(Bs,16),G(Dee,24),G(Tee,24))};static#t=this.\u0275pipe=Mi({name:"date",type:n,pure:!0,standalone:!0})}return n})();const See=/#/g;let AA=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(null==e)return"";if("object"!=typeof i||null===i)throw Qo();return i[function JV(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(e,Object.keys(i),this._localization,r)].replace(See,e.toString())}static#e=this.\u0275fac=function(i){return new(i||n)(G(DA,16))};static#t=this.\u0275pipe=Mi({name:"i18nPlural",type:n,pure:!0,standalone:!0})}return n})(),c3=(()=>{class n{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw Qo();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=Mi({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),mi=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({})}return n})();const u3="browser";function d3(n){return n===u3}function Tw(n){return"server"===n}let Lee=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new Vee(ie(Vt),window)})}return n})();class Vee{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Bee(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class h3{}class lte extends bJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class RA extends lte{static makeCurrent(){!function vJ(n){fA||(fA=n)}(new RA)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function cte(){return h_=h_||document.querySelector("base"),h_?h_.getAttribute("href"):null}();return null==e?null:function ute(n){Aw=Aw||document.createElement("a"),Aw.setAttribute("href",n);const t=Aw.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){h_=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return e3(document.cookie,t)}}let Aw,h_=null,hte=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const OA=new Te("EventManagerPlugins");let _3=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(ie(OA),ie(at))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class y3{constructor(t){this._doc=t}}const NA="ng-app-id";let v3=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Tw(s),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${NA}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(NA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(NA,this.appId),o}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt),ie(P0),ie(RS,8),ie(Co))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const FA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},LA=/%COMP%/g,mte=new Te("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function w3(n,t){return t.map(e=>e.replace(LA,n))}let VA=(()=>{class n{constructor(e,i,r,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Tw(a),this.defaultRenderer=new BA(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Wr.ShadowDom&&(i={...i,encapsulation:Wr.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof E3?r.applyToHost(e):r instanceof jA&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Wr.Emulated:s=new E3(l,c,i,this.appId,u,o,a,f);break;case Wr.ShadowDom:return new bte(l,c,e,i,o,a,this.nonce,f);default:s=new jA(l,c,i,u,o,a,f)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(_3),ie(v3),ie(P0),ie(mte),ie(Vt),ie(Co),ie(at),ie(RS))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class BA{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(FA[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(C3(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(C3(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new H(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=FA[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=FA[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(bc.DashCase|bc.Important)?t.style.setProperty(e,i,r&bc.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&bc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=Ic().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function C3(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class bte extends BA{constructor(t,e,i,r,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=w3(r.id,r.styles);for(const u of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jA extends BA{constructor(t,e,i,r,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?w3(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class E3 extends jA{constructor(t,e,i,r,s,o,a,l){const c=r+"-"+i.id;super(t,e,i,s,o,a,l,c),this.contentAttr=function _te(n){return"_ngcontent-%COMP%".replace(LA,n)}(c),this.hostAttr=function yte(n){return"_nghost-%COMP%".replace(LA,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let wte=(()=>{class n extends y3{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const D3=["alt","control","meta","shift"],Cte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ete={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Dte=(()=>{class n extends y3{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ic().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),D3.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let r=Cte[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),D3.forEach(o=>{o!==r&&(0,Ete[o])(e)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function T3(n){return{appProviders:[...I3,...n?.providers??[]],platformProviders:xte}}const xte=[{provide:Co,useValue:u3},{provide:IN,useValue:function Ste(){RA.makeCurrent()},multi:!0},{provide:Vt,useFactory:function Ate(){return function Sq(n){vS=n}(document),document},deps:[]}],kte=new Te(""),S3=[{provide:cw,useClass:class dte{addToWindow(t){xn.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new H(5103,!1);return s},xn.getAllAngularTestabilities=()=>t.getAllTestabilities(),xn.getAllAngularRootElements=()=>t.getAllRootElements(),xn.frameworkStabilizers||(xn.frameworkStabilizers=[]),xn.frameworkStabilizers.push(i=>{const r=xn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?Ic().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:uV,useClass:nA,deps:[at,iA,cw]},{provide:nA,useClass:nA,deps:[at,iA,cw]}],I3=[{provide:xS,useValue:"root"},{provide:ol,useFactory:function Ite(){return new ol},deps:[]},{provide:OA,useClass:wte,multi:!0,deps:[Vt,at,Co]},{provide:OA,useClass:Dte,multi:!0,deps:[Vt]},VA,v3,_3,{provide:Vm,useExisting:VA},{provide:h3,useClass:hte,deps:[]},[]];let Mte=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:P0,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(kte,12))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:[...I3,...S3],imports:[mi,oJ]})}return n})(),A3=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:function(i){let r=null;return r=i?new i:function Rte(){return new A3(ie(Vt))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:Bte}=Array,{getPrototypeOf:jte,prototype:Ute,keys:Hte}=Object;function P3(n){if(1===n.length){const t=n[0];if(Bte(t))return{args:t,keys:null};if(function zte(n){return n&&"object"==typeof n&&jte(n)===Ute}(t)){const e=Hte(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:$te}=Array;function HA(n){return Fe(t=>function Wte(n,t){return $te(t)?n(...t):n(t)}(n,t))}function R3(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function hd(...n){const t=Ai(n),e=qa(n),{args:i,keys:r}=P3(n);if(0===i.length)return ee([],t);const s=new pt(function qte(n,t,e=Nn){return i=>{O3(t,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)O3(t,()=>{const c=ee(n[l],t);let u=!1;c.subscribe(Re(i,f=>{s[l]=f,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,r?o=>R3(r,o):Nn));return e?s.pipe(HA(e)):s}function O3(n,t,e){n?Si(e,n,t):t()}const xw=ht(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function kw(...n){return function Gte(){return xs(1)}()(ee(n,Ai(n)))}function Mw(n){return new pt(t=>{si(n()).subscribe(t)})}function f_(n,t){const e=B(n)?n:()=>n,i=r=>r.error(e());return new pt(t?r=>t.schedule(i,0,r):i)}function zA(){return ge((n,t)=>{let e=null;n._refCount++;const i=Re(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class N3 extends pt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Oe(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Et;const e=this.getSubject();t.add(this.source.subscribe(Re(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Et.EMPTY)}return t}refCount(){return zA()(this)}}function Ki(n){return n<=0?()=>Ii:ge((t,e)=>{let i=0;t.subscribe(Re(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function ko(...n){const t=Ai(n);return ge((e,i)=>{(t?kw(n,e,t):kw(n,e)).subscribe(i)})}function wn(n,t){return ge((e,i)=>{let r=0;e.subscribe(Re(i,s=>n.call(t,s,r++)&&i.next(s)))})}function Pw(n){return ge((t,e)=>{let i=!1;t.subscribe(Re(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function F3(n=Zte){return ge((t,e)=>{let i=!1;t.subscribe(Re(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Zte(){return new xw}function xc(n,t){const e=arguments.length>=2;return i=>i.pipe(n?wn((r,s)=>n(r,s,i)):Nn,Ki(1),e?Pw(t):F3(()=>new xw))}function Hf(n,t){return B(t)?In(n,t,1):In(n,1)}function lr(n,t,e){const i=B(n)||t||e?{next:n,error:t,complete:e}:n;return i?ge((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Re(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Nn}function fd(n){return ge((t,e)=>{let s,i=null,r=!1;i=t.subscribe(Re(e,void 0,void 0,o=>{s=si(n(o,fd(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function L3(n,t,e,i,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Re(o,u=>{const f=c++;l=a?n(l,u,f):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Rw(n,t){return ge(L3(n,t,arguments.length>=2,!0))}function Ow(n){return n<=0?()=>Ii:ge((t,e)=>{let i=[];t.subscribe(Re(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function p_(n){return ge((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function es(n){return ge((t,e)=>{si(n).subscribe(Re(e,()=>e.complete(),tt)),!e.closed&&t.subscribe(e)})}const St="primary",g_=Symbol("RouteTitle");class Qte{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function zf(n){return new Qte(n)}function Xte(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ca(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!V3(n[r],t[r]))return!1;return!0}function V3(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function B3(n){return n.length>0?n[n.length-1]:null}function kc(n){return function Vte(n){return!!n&&(n instanceof pt||B(n.lift)&&B(n.subscribe))}(n)?n:Zm(n)?ee(Promise.resolve(n)):we(n)}const ene={exact:function H3(n,t,e){if(!pd(n.segments,t.segments)||!Nw(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!H3(n.children[i],t.children[i],e))return!1;return!0},subset:z3},j3={exact:function tne(n,t){return Ca(n,t)},subset:function nne(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>V3(n[e],t[e]))},ignored:()=>!0};function U3(n,t,e){return ene[e.paths](n.root,t.root,e.matrixParams)&&j3[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function z3(n,t,e){return $3(n,t,t.segments,e)}function $3(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!pd(r,e)||t.hasChildren()||!Nw(r,e,i))}if(n.segments.length===e.length){if(!pd(n.segments,e)||!Nw(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!z3(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(pd(n.segments,r)&&Nw(n.segments,r,i)&&n.children[St])&&$3(n.children[St],t,s,i)}}function Nw(n,t,e){return t.every((i,r)=>j3[e](n[r].parameters,i.parameters))}class $f{constructor(t=new Cn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zf(this.queryParams)),this._queryParamMap}toString(){return sne.serialize(this)}}class Cn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fw(this)}}class m_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=zf(this.parameters)),this._parameterMap}toString(){return G3(this)}}function pd(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let __=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return new $A},providedIn:"root"})}return n})();class $A{parse(t){const e=new mne(t);return new $f(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${y_(t.root,!0)}`,i=function lne(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Lw(e)}=${Lw(r)}`).join("&"):`${Lw(e)}=${Lw(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function one(n){return encodeURI(n)}(t.fragment)}`:""}`}}const sne=new $A;function Fw(n){return n.segments.map(t=>G3(t)).join("/")}function y_(n,t){if(!n.hasChildren())return Fw(n);if(t){const e=n.children[St]?y_(n.children[St],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==St&&i.push(`${r}:${y_(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function rne(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===St&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==St&&(e=e.concat(t(r,i)))}),e}(n,(i,r)=>r===St?[y_(n.children[St],!1)]:[`${r}:${y_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${Fw(n)}/${e[0]}`:`${Fw(n)}/(${e.join("//")})`}}function W3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lw(n){return W3(n).replace(/%3B/gi,";")}function WA(n){return W3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vw(n){return decodeURIComponent(n)}function q3(n){return Vw(n.replace(/\+/g,"%20"))}function G3(n){return`${WA(n.path)}${function ane(n){return Object.keys(n).map(t=>`;${WA(t)}=${WA(n[t])}`).join("")}(n.parameters)}`}const cne=/^[^\/()?;#]+/;function qA(n){const t=n.match(cne);return t?t[0]:""}const une=/^[^\/()?;=#]+/,hne=/^[^=?&#]+/,pne=/^[^&#]+/;class mne{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[St]=new Cn(t,e)),i}parseSegment(){const t=qA(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(t),new m_(Vw(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function dne(n){const t=n.match(une);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=qA(this.remaining);r&&(i=r,this.capture(i))}t[Vw(e)]=Vw(i)}parseQueryParam(t){const e=function fne(n){const t=n.match(hne);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function gne(n){const t=n.match(pne);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=q3(e),s=q3(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=qA(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new H(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=St);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[St]:new Cn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new H(4011,!1)}}function Z3(n){return n.segments.length>0?new Cn([],{[St]:n}):n}function K3(n){const t={};for(const i of Object.keys(n.children)){const s=K3(n.children[i]);if(i===St&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function _ne(n){if(1===n.numberOfChildren&&n.children[St]){const t=n.children[St];return new Cn(n.segments.concat(t.segments),t.children)}return n}(new Cn(n.segments,t))}function gd(n){return n instanceof $f}function Y3(n){let t;const r=Z3(function e(s){const o={};for(const l of s.children){const c=e(l);o[l.outlet]=c}const a=new Cn(s.url,o);return s===n&&(t=a),a}(n.root));return t??r}function Q3(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(0===t.length)return GA(r,r,r,e,i);const s=function vne(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new J3(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new J3(e,t,i)}(t);if(s.toRoot())return GA(r,r,new Cn([],{}),e,i);const o=function bne(n,t,e){if(n.isAbsolute)return new jw(t,!0,0);if(!e)return new jw(t,!1,NaN);if(null===e.parent)return new jw(e,!0,0);const i=Bw(n.commands[0])?0:1;return function wne(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new H(4005,!1);r=i.segments.length}return new jw(i,!1,r-s)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?b_(o.segmentGroup,o.index,s.commands):eB(o.segmentGroup,o.index,s.commands);return GA(r,o.segmentGroup,a,e,i)}function Bw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function v_(n){return"object"==typeof n&&null!=n&&n.outlets}function GA(n,t,e,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===t?e:X3(n,t,e);const a=Z3(K3(o));return new $f(a,s,r)}function X3(n,t,e){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===t?e:X3(s,t,e)}),new Cn(n.segments,i)}class J3{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Bw(i[0]))throw new H(4003,!1);const r=i.find(v_);if(r&&r!==B3(i))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jw{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function eB(n,t,e){if(n||(n=new Cn([],{})),0===n.segments.length&&n.hasChildren())return b_(n,t,e);const i=function Ene(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const o=n.segments[r],a=e[i];if(v_(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!nB(l,c,o))return s;i+=2}else{if(!nB(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Cn(n.segments.slice(0,i.pathIndex),{});return s.children[St]=new Cn(n.segments.slice(i.pathIndex),n.children),b_(s,0,r)}return i.match&&0===r.length?new Cn(n.segments,{}):i.match&&!n.hasChildren()?ZA(n,t,e):i.match?b_(n,0,r):ZA(n,t,e)}function b_(n,t,e){if(0===e.length)return new Cn(n.segments,{});{const i=function Cne(n){return v_(n[0])?n[0].outlets:{[St]:n}}(e),r={};if(Object.keys(i).some(s=>s!==St)&&n.children[St]&&1===n.numberOfChildren&&0===n.children[St].segments.length){const s=b_(n.children[St],t,e);return new Cn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=eB(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new Cn(n.segments,r)}}function ZA(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(v_(s)){const l=Dne(s.outlets);return new Cn(i,l)}if(0===r&&Bw(e[0])){i.push(new m_(n.segments[t].path,tB(e[0]))),r++;continue}const o=v_(s)?s.outlets[St]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Bw(a)?(i.push(new m_(o,tB(a))),r+=2):(i.push(new m_(o,{})),r++)}return new Cn(i,{})}function Dne(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=ZA(new Cn([],{}),0,i))}),t}function tB(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function nB(n,t,e){return n==e.path&&Ca(t,e.parameters)}const w_="imperative";class Ea{constructor(t,e){this.id=t,this.url=e}}class Uw extends Ea{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hl extends Ea{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class C_ extends Ea{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wf extends Ea{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class Hw extends Ea{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iB extends Ea{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tne extends Ea{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sne extends Ea{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ine extends Ea{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ane extends Ea{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xne{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kne{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mne{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pne{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rne{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class One{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rB{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class KA{}class YA{constructor(t){this.url=t}}class Nne{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new E_,this.attachRef=null}}let E_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Nne,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class sB{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=QA(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=QA(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=XA(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return XA(t,this._root).map(e=>e.value)}}function QA(n,t){if(n===t.value)return t;for(const e of t.children){const i=QA(n,e);if(i)return i}return null}function XA(n,t){if(n===t.value)return[t];for(const e of t.children){const i=XA(n,e);if(i.length)return i.unshift(t),i}return[]}class fl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function qf(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class oB extends sB{constructor(t,e){super(t),this.snapshot=e,JA(this,t)}toString(){return this.snapshot.toString()}}function aB(n,t){const e=function Fne(n,t){const o=new zw([],{},{},"",{},St,t,null,{});return new cB("",new fl(o,[]))}(0,t),i=new le([new m_("",{})]),r=new le({}),s=new le({}),o=new le({}),a=new le(""),l=new Gf(i,r,o,a,s,St,t,e.root);return l.snapshot=e.root,new oB(new fl(l,[]),e)}class Gf{constructor(t,e,i,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Fe(c=>c[g_]))??we(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Fe(t=>zf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Fe(t=>zf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lB(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Lne(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class zw{get title(){return this.data?.[g_]}constructor(t,e,i,r,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cB extends sB{constructor(t,e){super(e),this.url=t,JA(this,e)}toString(){return uB(this._root)}}function JA(n,t){t.value._routerState=n,t.children.forEach(e=>JA(n,e))}function uB(n){const t=n.children.length>0?` { ${n.children.map(uB).join(", ")} } `:"";return`${n.value}${t}`}function ex(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ca(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ca(t.params,e.params)||n.paramsSubject.next(e.params),function Jte(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ca(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),Ca(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tx(n,t){const e=Ca(n.params,t.params)&&function ine(n,t){return pd(n,t)&&n.every((e,i)=>Ca(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||tx(n.parent,t.parent))}let nx=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new $e,this.deactivateEvents=new $e,this.attachEvents=new $e,this.detachEvents=new $e,this.parentContexts=He(E_),this.location=He(vs),this.changeDetector=He(Sc),this.environmentInjector=He(to),this.inputBinder=He($w,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Vne(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=nt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zi]})}return n})();class Vne{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Gf?this.route:t===E_?this.childContexts:this.parent.get(t,e)}}const $w=new Te("");let dB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=hd([i.queryParams,i.params,i.data]).pipe(lt(([s,o,a],l)=>(a={...s,...o,...a},0===l?we(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const o=function yJ(n){const t=Lt(n);if(!t)return null;const e=new zm(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function D_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function jne(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return D_(n,i,r);return D_(n,i)})}(n,t,e);return new fl(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>D_(n,a)),o}}const i=function Une(n){return new Gf(new le(n.url),new le(n.params),new le(n.queryParams),new le(n.fragment),new le(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>D_(n,s));return new fl(i,r)}}const ix="ngNavigationCancelingError";function hB(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=gd(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=fB(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function fB(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[ix]=!0,i.cancellationCode=t,e&&(i.url=e),i}function pB(n){return n&&n[ix]}let gB=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=kt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Gi],decls:1,vars:0,template:function(i,r){1&i&&dn(0,"router-outlet")},dependencies:[nx],encapsulation:2})}return n})();function rx(n){const t=n.children&&n.children.map(rx),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==St&&(e.component=gB),e}function Xo(n){return n.outlet||St}function T_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Kne{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),ex(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=qf(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=qf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=qf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const r=qf(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new One(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Pne(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(ex(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ex(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=T_(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class mB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ww{constructor(t,e){this.component=t,this.route=e}}function Yne(n,t,e){const i=n._root;return S_(i,t?t._root:null,e,[i.value])}function Zf(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||function lT(n){return null!==Kl(n)}(n)?t.get(n):n:i}function S_(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=qf(t);return n.children.forEach(o=>{(function Xne(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Jne(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!pd(n.url,t.url);case"pathParamsOrQueryParamsChange":return!pd(n.url,t.url)||!Ca(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tx(n,t)||!Ca(n.queryParams,t.queryParams);default:return!tx(n,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new mB(i)):(s.data=o.data,s._resolvedData=o._resolvedData),S_(n,t,s.component?a?a.children:null:e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ww(a.outlet.component,o))}else o&&I_(t,a,r),r.canActivateChecks.push(new mB(i)),S_(n,null,s.component?a?a.children:null:e,i,r)})(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>I_(a,e.getContext(o),r)),r}function I_(n,t,e){const i=qf(n),r=n.value;Object.entries(i).forEach(([s,o])=>{I_(o,r.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new Ww(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function A_(n){return"function"==typeof n}function _B(n){return n instanceof xw||"EmptyError"===n?.name}const qw=Symbol("INITIAL_VALUE");function Kf(){return lt(n=>hd(n.map(t=>t.pipe(Ki(1),ko(qw)))).pipe(Fe(t=>{for(const e of t)if(!0!==e){if(e===qw)return qw;if(!1===e||e instanceof $f)return e}return!0}),wn(t=>t!==qw),Ki(1)))}function yB(n){return function fs(...n){return Is(n)}(lr(t=>{if(gd(t))throw hB(0,t)}),Fe(t=>!0===t))}class Gw{constructor(t){this.segmentGroup=t||null}}class vB{constructor(t){this.urlTree=t}}function Yf(n){return f_(new Gw(n))}function bB(n){return f_(new vB(n))}class vie{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new H(4002,!1)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return we(i);if(r.numberOfChildren>1||!r.children[St])return f_(new H(4e3,!1));r=r.children[St]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new $f(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,r)}),new Cn(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new H(4001,!1);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}const sx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bie(n,t,e,i,r){const s=ox(n,t,e);return s.matched?(i=function zne(n,t){return n.providers&&!n._injector&&(n._injector=OI(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function mie(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?we(r.map(o=>{const a=Zf(o,n);return kc(function sie(n){return n&&A_(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(Kf(),yB()):we(!0)}(i,t,e).pipe(Fe(o=>!0===o?s:{...sx}))):we(s)}function ox(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...sx}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Xte)(e,n,t);if(!r)return{...sx};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function wB(n,t,e,i){return e.length>0&&function Eie(n,t,e){return e.some(i=>Zw(n,t,i)&&Xo(i)!==St)}(n,e,i)?{segmentGroup:new Cn(t,Cie(i,new Cn(e,n.children))),slicedSegments:[]}:0===e.length&&function Die(n,t,e){return e.some(i=>Zw(n,t,i))}(n,e,i)?{segmentGroup:new Cn(n.segments,wie(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Cn(n.segments,n.children),slicedSegments:e}}function wie(n,t,e,i,r){const s={};for(const o of i)if(Zw(n,e,o)&&!r[Xo(o)]){const a=new Cn([],{});s[Xo(o)]=a}return{...r,...s}}function Cie(n,t){const e={};e[St]=t;for(const i of n)if(""===i.path&&Xo(i)!==St){const r=new Cn([],{});e[Xo(i)]=r}return e}function Zw(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class Aie{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new vie(this.urlSerializer,this.urlTree)}noMatchError(t){return new H(4002,!1)}recognize(){const t=wB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,St).pipe(fd(e=>{if(e instanceof vB)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof Gw?this.noMatchError(e):e}),Fe(e=>{const i=new zw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,{}),r=new fl(i,e),s=new cB("",r),o=function yne(n,t,e=null,i=null){return Q3(Y3(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,St).pipe(fd(i=>{throw i instanceof Gw?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=lB(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0)}processChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return ee(r).pipe(Hf(s=>{const o=i.children[s],a=function Gne(n,t){const e=n.filter(i=>Xo(i)===t);return e.push(...n.filter(i=>Xo(i)!==t)),e}(e,s);return this.processSegmentGroup(t,a,o,s)}),Rw((s,o)=>(s.push(...o),s)),Pw(null),function Kte(n,t){const e=arguments.length>=2;return i=>i.pipe(n?wn((r,s)=>n(r,s,i)):Nn,Ow(1),e?Pw(t):F3(()=>new xw))}(),In(s=>{if(null===s)return Yf(i);const o=CB(s);return function xie(n){n.sort((t,e)=>t.value.outlet===St?-1:e.value.outlet===St?1:t.value.outlet.localeCompare(e.value.outlet))}(o),we(o)}))}processSegment(t,e,i,r,s,o){return ee(e).pipe(Hf(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,s,o).pipe(fd(l=>{if(l instanceof Gw)return we(null);throw l}))),xc(a=>!!a),fd(a=>{if(_B(a))return function Sie(n,t,e){return 0===t.length&&!n.children[e]}(i,r,s)?we([]):Yf(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,s,o,a){return function Tie(n,t,e,i){return!!(Xo(n)===i||i!==St&&Zw(t,e,n))&&("**"===n.path||ox(t,n,e).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o):Yf(r):Yf(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?bB(s):this.applyRedirects.lineralizeSegments(i,s).pipe(In(o=>{const a=new Cn(o,{});return this.processSegment(t,e,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=ox(e,r,s);if(!a)return Yf(e);const f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?bB(f):this.applyRedirects.lineralizeSegments(r,f).pipe(In(m=>this.processSegment(t,i,e,m.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?B3(r).parameters:{};a=we({snapshot:new zw(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,EB(i),Xo(i),i.component??i._loadedComponent??null,i,DB(i)),consumedSegments:[],remainingSegments:[]}),e.children={}}else a=bie(e,i,r,t).pipe(Fe(({matched:l,consumedSegments:c,remainingSegments:u,parameters:f})=>l?{snapshot:new zw(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,EB(i),Xo(i),i.component??i._loadedComponent??null,i,DB(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(lt(l=>null===l?Yf(e):this.getChildConfig(t=i._injector??t,i,r).pipe(lt(({routes:c})=>{const u=i._loadedInjector??t,{snapshot:f,consumedSegments:m,remainingSegments:y}=l,{segmentGroup:v,slicedSegments:w}=wB(e,m,y,c);if(0===w.length&&v.hasChildren())return this.processChildren(u,c,v).pipe(Fe(P=>null===P?null:[new fl(f,P)]));if(0===c.length&&0===w.length)return we([new fl(f,[])]);const D=Xo(i)===s;return this.processSegment(u,c,v,w,D?St:s,!0).pipe(Fe(P=>[new fl(f,P)]))}))))}getChildConfig(t,e,i){return e.children?we({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?we({routes:e._loadedRoutes,injector:e._loadedInjector}):function gie(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?we(!0):we(r.map(o=>{const a=Zf(o,n);return kc(function tie(n){return n&&A_(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(Kf(),yB())}(t,e,i).pipe(In(r=>r?this.configLoader.loadChildren(t,e).pipe(lr(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function yie(n){return f_(fB(!1,3))}())):we({routes:[],injector:t})}}function kie(n){const t=n.value.routeConfig;return t&&""===t.path}function CB(n){const t=[],e=new Set;for(const i of n){if(!kie(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=CB(i.children);t.push(new fl(i.value,r))}return t.filter(i=>!e.has(i))}function EB(n){return n.data||{}}function DB(n){return n.resolve||{}}function TB(n){return"string"==typeof n.title||null===n.title}function ax(n){return lt(t=>{const e=n(t);return e?ee(e).pipe(Fe(()=>t)):we(t)})}const Qf=new Te("ROUTES");let lx=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=He(oV)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return we(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=kc(e.loadComponent()).pipe(Fe(SB),lr(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),p_(()=>{this.componentLoaders.delete(e)})),r=new N3(i,()=>new se).pipe(zA());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return we({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Lie(n,t,e,i){return kc(n.loadChildren()).pipe(Fe(SB),In(r=>r instanceof fL||Array.isArray(r)?we(r):ee(t.compileModuleAsync(r))),Fe(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(e).injector,o=s.get(Qf,[],{optional:!0,self:!0}).flat()),{routes:o.map(rx),injector:s}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(p_(()=>{this.childrenLoaders.delete(i)})),o=new N3(s,()=>new se).pipe(zA());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SB(n){return function Vie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Kw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new se,this.transitionAbortSubject=new se,this.configLoader=He(lx),this.environmentInjector=He(to),this.urlSerializer=He(__),this.rootContexts=He(E_),this.inputBindingEnabled=null!==He($w,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>we(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new kne(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new xne(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new le({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:w_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wn(s=>0!==s.id),Fe(s=>({...s,extractedUrl:e.urlHandlingStrategy.extract(s.rawUrl)})),lt(s=>{this.currentTransition=s;let o=!1,a=!1;return we(s).pipe(lr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),lt(l=>{const c=l.currentBrowserUrl.toString(),u=!e.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const m="";return this.events.next(new Wf(l.id,this.urlSerializer.serialize(l.rawUrl),m,0)),l.resolve(null),Ii}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return we(l).pipe(lt(m=>{const y=this.transitions?.getValue();return this.events.next(new Uw(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Ii:Promise.resolve(m)}),function Mie(n,t,e,i,r,s){return In(o=>function Iie(n,t,e,i,r,s,o="emptyOnly"){return new Aie(n,t,e,i,r,o,s).recognize()}(n,t,e,i,o.extractedUrl,r,s).pipe(Fe(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),lr(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new iB(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(u&&e.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:m,extractedUrl:y,source:v,restoredState:w,extras:D}=l,P=new Uw(m,this.urlSerializer.serialize(y),v,w);this.events.next(P);const I=aB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:I,urlAfterRedirects:y,extras:{...D,skipLocationChange:!1,replaceUrl:!1}},we(s)}{const m="";return this.events.next(new Wf(l.id,this.urlSerializer.serialize(l.extractedUrl),m,1)),l.resolve(null),Ii}}),lr(l=>{const c=new Tne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Fe(l=>(this.currentTransition=s={...l,guards:Yne(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function aie(n,t){return In(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?we({...e,guardsResult:!0}):function lie(n,t,e,i){return ee(n).pipe(In(r=>function pie(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?we(s.map(a=>{const l=T_(t)??r,c=Zf(a,l);return kc(function rie(n){return n&&A_(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,i):l.runInContext(()=>c(n,t,e,i))).pipe(xc())})).pipe(Kf()):we(!0)}(r.component,r.route,e,t,i)),xc(r=>!0!==r,!0))}(o,i,r,n).pipe(In(a=>a&&function eie(n){return"boolean"==typeof n}(a)?function cie(n,t,e,i){return ee(t).pipe(Hf(r=>kw(function die(n,t){return null!==n&&t&&t(new Mne(n)),we(!0)}(r.route.parent,i),function uie(n,t){return null!==n&&t&&t(new Rne(n)),we(!0)}(r.route,i),function fie(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function Qne(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>Mw(()=>we(o.guards.map(l=>{const c=T_(o.node)??e,u=Zf(l,c);return kc(function iie(n){return n&&A_(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(xc())})).pipe(Kf())));return we(s).pipe(Kf())}(n,r.path,e),function hie(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return we(!0);const r=i.map(s=>Mw(()=>{const o=T_(t)??e,a=Zf(s,o);return kc(function nie(n){return n&&A_(n.canActivate)}(a)?a.canActivate(t,n):o.runInContext(()=>a(t,n))).pipe(xc())}));return we(r).pipe(Kf())}(n,r.route,e))),xc(r=>!0!==r,!0))}(i,s,n,t):we(a)),Fe(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),lr(l=>{if(s.guardsResult=l.guardsResult,gd(l.guardsResult))throw hB(0,l.guardsResult);const c=new Sne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),wn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),ax(l=>{if(l.guards.canActivateChecks.length)return we(l).pipe(lr(c=>{const u=new Ine(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),lt(c=>{let u=!1;return we(c).pipe(function Pie(n,t){return In(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return we(e);let s=0;return ee(r).pipe(Hf(o=>function Rie(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!TB(r)&&(s[g_]=r.title),function Oie(n,t,e,i){const r=function Nie(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return we({});const s={};return ee(r).pipe(In(o=>function Fie(n,t,e,i){const r=T_(t)??i,s=Zf(n,r);return kc(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[o],t,e,i).pipe(xc(),lr(a=>{s[o]=a}))),Ow(1),function Yte(n){return Fe(()=>n)}(s),fd(o=>_B(o)?Ii:f_(o)))}(s,n,t,i).pipe(Fe(o=>(n._resolvedData=o,n.data=lB(n,e).resolve,r&&TB(r)&&(n.data[g_]=r.title),null)))}(o.route,i,n,t)),lr(()=>s++),Ow(1),In(o=>s===r.length?we(e):Ii))})}(e.paramsInheritanceStrategy,this.environmentInjector),lr({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),lr(c=>{const u=new Ane(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),ax(l=>{const c=u=>{const f=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(u.routeConfig).pipe(lr(m=>{u.component=m}),Fe(()=>{})));for(const m of u.children)f.push(...c(m));return f};return hd(c(l.targetSnapshot.root)).pipe(Pw(),Ki(1))}),ax(()=>this.afterPreactivation()),Fe(l=>{const c=function Bne(n,t,e){const i=D_(n,t._root,e?e._root:void 0);return new oB(i,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),lr(()=>{this.events.next(new KA)}),((n,t,e,i)=>Fe(r=>(new Kne(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ki(1),lr({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),es(this.transitionAbortSubject.pipe(lr(l=>{throw l}))),p_(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),fd(l=>{if(a=!0,pB(l))this.events.next(new C_(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function Hne(n){return pB(n)&&gd(n.url)}(l)?this.events.next(new YA(l.url)):s.resolve(!1);else{this.events.next(new Hw(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(l))}catch(c){s.reject(c)}}return Ii}))}))}cancelNavigationTransition(e,i,r){const s=new C_(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IB(n){return n!==w_}let AB=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===St);return i}getResolvedTitleForRoute(e){return e.data[g_]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(Bie)},providedIn:"root"})}return n})(),Bie=(()=>{class n extends AB{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(A3))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(Hie)},providedIn:"root"})}return n})();class Uie{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Hie=(()=>{class n extends Uie{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Yw=new Te("",{providedIn:"root",factory:()=>({})});let zie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He($ie)},providedIn:"root"})}return n})(),$ie=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var x_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(x_||{});function xB(n,t){n.events.pipe(wn(e=>e instanceof hl||e instanceof C_||e instanceof Hw||e instanceof Wf),Fe(e=>e instanceof hl||e instanceof Wf?x_.COMPLETE:e instanceof C_&&(0===e.code||1===e.code)?x_.REDIRECTING:x_.FAILED),wn(e=>e!==x_.REDIRECTING),Ki(1)).subscribe(()=>{t()})}function Wie(n){throw n}function qie(n,t,e){return t.parse("/")}const Gie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ts=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=He(sV),this.isNgZoneEnabled=!1,this._events=new se,this.options=He(Yw,{optional:!0})||{},this.pendingTasks=He(aw),this.errorHandler=this.options.errorHandler||Wie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||qie,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=He(zie),this.routeReuseStrategy=He(jie),this.titleStrategy=He(AB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=He(Qf,{optional:!0})?.flat()??[],this.navigationTransitions=He(Kw),this.urlSerializer=He(__),this.location=He(a_),this.componentInputBindingEnabled=!!He($w,{optional:!0}),this.eventsSubscription=new Et,this.isNgZoneEnabled=He(at)instanceof at&&at.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new $f,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=aB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(kB(i)&&this._events.next(i));if(i instanceof Uw)IB(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Wf)this.rawUrlTree=r.rawUrl;else if(i instanceof iB){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof KA)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof C_)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof YA){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||IB(r.source)};this.scheduleNavigation(s,w_,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof Hw&&this.restoreHistory(r,!0),i instanceof hl&&(this.navigated=!0),kB(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),w_,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(rx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let f,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{f=Y3(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),f=this.currentUrlTree.root}return Q3(f,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=gd(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,w_,null,i)}navigate(e,i={skipLocationChange:!1}){return function Kie(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new H(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...Gie}:!1===i?{...Zie}:i,gd(e))return U3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return U3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((f,m)=>{a=f,l=m});const u=this.pendingTasks.add();return xB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kB(n){return!(n instanceof KA||n instanceof YA)}let md=(()=>{class n{constructor(e,i,r,s,o,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new se,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof hl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function yN(n,t,e){return function Gq(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?_N:mN}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(G(ts),G(Gf),function sf(n){return function fm(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if(Dg(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(Ni(),n)}("tabindex"),G(Xr),G(pn),G(dd))};static#t=this.\u0275dir=nt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&X("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&gi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",jf],skipLocationChange:["skipLocationChange","skipLocationChange",jf],replaceUrl:["replaceUrl","replaceUrl",jf],routerLink:"routerLink"},standalone:!0,features:[kF,zi]})}return n})();class MB{}let Xie=(()=>{class n{constructor(e,i,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(wn(e=>e instanceof hl),Hf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=OI(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ee(r).pipe(xs())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):we(null);const s=r.pipe(In(o=>null===o?we(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return i.loadComponent&&!i._loadedComponent?ee([s,this.loader.loadComponent(i)]).pipe(xs()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(ie(ts),ie(oV),ie(to),ie(MB),ie(lx))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const cx=new Te("");let PB=(()=>{class n{constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Uw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof hl?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Wf&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof rB&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rB(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){XS()};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function pl(n,t){return{\u0275kind:n,\u0275providers:t}}function OB(){const n=He(qi);return t=>{const e=n.get(Tc);if(t!==e.components[0])return;const i=n.get(ts),r=n.get(NB);1===n.get(ux)&&i.initialNavigation(),n.get(FB,null,Ft.Optional)?.setUpPreloading(),n.get(cx,null,Ft.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const NB=new Te("",{factory:()=>new se}),ux=new Te("",{providedIn:"root",factory:()=>1}),FB=new Te("");function nre(n){return pl(0,[{provide:FB,useExisting:Xie},{provide:MB,useExisting:n}])}const LB=new Te("ROUTER_FORROOT_GUARD"),rre=[a_,{provide:__,useClass:$A},ts,E_,{provide:Gf,useFactory:function RB(n){return n.routerState.root},deps:[ts]},lx,[]];function sre(){return new fV("Router",ts)}let Mc=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[rre,[],{provide:Qf,multi:!0,useValue:e},{provide:LB,useFactory:cre,deps:[[ts,new vc,new cf]]},{provide:Yw,useValue:i||{}},i?.useHash?{provide:dd,useClass:EJ}:{provide:dd,useClass:$V},{provide:cx,useFactory:()=>{const n=He(Lee),t=He(at),e=He(Yw),i=He(Kw),r=He(__);return e.scrollOffset&&n.setOffset(e.scrollOffset),new PB(r,i,n,t,e)}},i?.preloadingStrategy?nre(i.preloadingStrategy).\u0275providers:[],{provide:fV,multi:!0,useFactory:sre},i?.initialNavigation?ure(i):[],i?.bindToComponentInputs?pl(8,[dB,{provide:$w,useExisting:dB}]).\u0275providers:[],[{provide:VB,useFactory:OB},{provide:oA,multi:!0,useExisting:VB}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Qf,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(LB,8))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({})}return n})();function cre(n){return"guarded"}function ure(n){return["disabled"===n.initialNavigation?pl(3,[{provide:XI,multi:!0,useFactory:()=>{const t=He(ts);return()=>{t.setUpLocationChangeListener()}}},{provide:ux,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?pl(2,[{provide:ux,useValue:0},{provide:XI,multi:!0,deps:[qi],useFactory:t=>{const e=t.get(wJ,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(ts),s=t.get(NB);xB(r,()=>{i(!0)}),t.get(Kw).afterPreactivation=()=>(i(!0),s.closed?we(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const VB=new Te("");var pe=wt(861),Us=wt(106);Us.Z.registerVersion("firebase","10.12.2","app-compat"),wt(985);var Xf=wt(534);(0,Xf.registerVersion)("firebase","10.12.2","app");class mre extends Et{constructor(t,e){super()}schedule(t,e=0){return this}}const Qw={setInterval(n,t,...e){const{delegate:i}=Qw;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=Qw;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class Xw extends mre{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return Qw.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&Qw.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ve(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const dx={now:()=>(dx.delegate||Date).now(),delegate:void 0};class k_{constructor(t,e=k_.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}k_.now=dx.now;class Jw extends k_{constructor(t,e=k_.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const vre=new class yre extends Jw{}(class _re extends Xw{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(t,e,i):(t.flush(this),0)}}),Jf=new Jw(Xw),bre=Jf,hx=new Cc("ANGULARFIRE2_VERSION");class BB{constructor(){return((n,t)=>{const e=(0,Xf.getApps)(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(Cre)}}const Cre="app-check";function ep(){}class jB{zone;delegate;constructor(t,e=vre){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{t.apply(this,[o])})},e,i)}}class Ere{zone;task=null;constructor(t){this.zone=t}call(t,e){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ep,{},ep,ep)),e.pipe(lr({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let UB=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new jB(Zone.current)),this.insideAngular=e.run(()=>new jB(Zone.current,Jf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(ie(at))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ro(n){return function Tre(n){return function(e){return(e=e.lift(new Ere(n.ngZone))).pipe($r(n.outsideAngular),ps(n.insideAngular))}}(function tp(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}const Ire=["ngOnDestroy"];class HB{constructor(t){return t}}const eC=new Te("angularfire2.app.options"),tC=new Te("angularfire2.app.name");function fx(n,t,e){const r="object"==typeof e&&e||{};r.name=r.name||"string"==typeof e&&e||"[DEFAULT]";const o=Us.Z.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>Us.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;kre("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new HB(o)}const kre=(n,...t)=>{},Mre={provide:HB,useFactory:fx,deps:[eC,at,[new vc,tC]]};let Pre=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:eC,useValue:e},{provide:tC,useValue:i}]}}constructor(e){Us.Z.registerVersion("angularfire",hx.full,"core"),Us.Z.registerVersion("angularfire",hx.full,"app-compat"),Us.Z.registerVersion("angular",RN.full,e.toString())}static \u0275fac=function(i){return new(i||n)(ie(Co))};static \u0275mod=Wt({type:n});static \u0275inj=Yt({providers:[Mre]})}return n})();function zB(n,t,e,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Rre(n,t){try{return n.toString()===t.toString()}catch{return n===t}}(r,o)||($B("error",`${t} was already initialized on the ${e} Firebase App with different settings.${Ore?" You may need to reload as Firebase is not HMR aware.":""}`),$B("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const Ore=typeof module<"u"&&!!module.hot,$B=(n,...t)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class WB extends se{constructor(t=1/0,e=1/0,i=dx){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(i.push(t),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=i?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function qB(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,et({connector:()=>new WB(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function px(n,t){return B(t)?lt(()=>n,t):lt(()=>n)}const GB=new Te("angularfire2.auth.use-emulator"),ZB=new Te("angularfire2.auth.settings"),KB=new Te("angularfire2.auth.tenant-id"),YB=new Te("angularfire2.auth.langugage-code"),QB=new Te("angularfire2.auth.use-device-language"),XB=new Te("angularfire.auth.persistence"),JB=(n,t,e,i,r,s,o,a)=>zB(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=t.runOutsideAngular(()=>n.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[e,i,r,s,o,a]);let gx=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,s,o,a,l,c,u,f,m,y){const v=new se,w=we(void 0).pipe(ps(o.outsideAngular),lt(()=>s.runOutsideAngular(()=>Promise.resolve().then(wt.bind(wt,985)))),Fe(()=>fx(e,s,i)),Fe(D=>JB(D,s,a,c,u,f,l,m)),qB({bufferSize:1,refCount:!1}));if(Tw(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=we(null);else{w.pipe(xc()).subscribe();const D=w.pipe(lt(O=>O.getRedirectResult().then(W=>W,()=>null)),ro,qB({bufferSize:1,refCount:!1})),P=w.pipe(lt(O=>new pt(W=>({unsubscribe:s.runOutsideAngular(()=>O.onAuthStateChanged(K=>W.next(K),K=>W.error(K),()=>W.complete()))})))),I=w.pipe(lt(O=>new pt(W=>({unsubscribe:s.runOutsideAngular(()=>O.onIdTokenChanged(K=>W.next(K),K=>W.error(K),()=>W.complete()))}))));this.authState=D.pipe(px(P),$r(o.outsideAngular),ps(o.insideAngular)),this.user=D.pipe(px(I),$r(o.outsideAngular),ps(o.insideAngular)),this.idToken=this.user.pipe(lt(O=>O?ee(O.getIdToken()):we(null))),this.idTokenResult=this.user.pipe(lt(O=>O?ee(O.getIdTokenResult()):we(null))),this.credential=be(D,v,this.authState.pipe(wn(O=>!O))).pipe(Fe(O=>O?.user?O:null),$r(o.outsideAngular),ps(o.insideAngular))}return((n,t,e,i={})=>new Proxy(n,{get:(r,s)=>e.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(Ire.indexOf(s)>-1)return()=>{};const o=t.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>e.run(()=>c)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const f=u?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,f),f})})})}))(this,w,s,{spy:{apply:(D,P,I)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&I.then(O=>v.next(O))}}})}static \u0275fac=function(i){return new(i||n)(ie(eC),ie(tC,8),ie(Co),ie(at),ie(UB),ie(GB,8),ie(ZB,8),ie(KB,8),ie(YB,8),ie(QB,8),ie(XB,8),ie(BB,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function np(){return ge((n,t)=>{let e,i=!1;n.subscribe(Re(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var yd,ij,ej=wt(537),Da=wt(879),yn=wt(58),tj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nj={};(function(){var n;function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function r(V,M,F){F||(F=0);var z=Array(16);if("string"==typeof M)for(var j=0;16>j;++j)z[j]=M.charCodeAt(F++)|M.charCodeAt(F++)<<8|M.charCodeAt(F++)<<16|M.charCodeAt(F++)<<24;else for(j=0;16>j;++j)z[j]=M[F++]|M[F++]<<8|M[F++]<<16|M[F++]<<24;var $=V.g[3],q=(M=V.g[0])+($^(F=V.g[1])&((j=V.g[2])^$))+z[0]+3614090360&4294967295;q=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=(F=(j=($=(M=F+(q<<7&4294967295|q>>>25))+((q=$+(j^M&(F^j))+z[1]+3905402710&4294967295)<<12&4294967295|q>>>20))+((q=j+(F^$&(M^F))+z[2]+606105819&4294967295)<<17&4294967295|q>>>15))+((q=F+(M^j&($^M))+z[3]+3250441966&4294967295)<<22&4294967295|q>>>10))+((q=M+($^F&(j^$))+z[4]+4118548399&4294967295)<<7&4294967295|q>>>25))+((q=$+(j^M&(F^j))+z[5]+1200080426&4294967295)<<12&4294967295|q>>>20))+((q=j+(F^$&(M^F))+z[6]+2821735955&4294967295)<<17&4294967295|q>>>15))+((q=F+(M^j&($^M))+z[7]+4249261313&4294967295)<<22&4294967295|q>>>10))+((q=M+($^F&(j^$))+z[8]+1770035416&4294967295)<<7&4294967295|q>>>25))+((q=$+(j^M&(F^j))+z[9]+2336552879&4294967295)<<12&4294967295|q>>>20))+((q=j+(F^$&(M^F))+z[10]+4294925233&4294967295)<<17&4294967295|q>>>15))+((q=F+(M^j&($^M))+z[11]+2304563134&4294967295)<<22&4294967295|q>>>10))+((q=M+($^F&(j^$))+z[12]+1804603682&4294967295)<<7&4294967295|q>>>25))+((q=$+(j^M&(F^j))+z[13]+4254626195&4294967295)<<12&4294967295|q>>>20))+((q=j+(F^$&(M^F))+z[14]+2792965006&4294967295)<<17&4294967295|q>>>15))+((q=F+(M^j&($^M))+z[15]+1236535329&4294967295)<<22&4294967295|q>>>10))+((q=M+(j^$&(F^j))+z[1]+4129170786&4294967295)<<5&4294967295|q>>>27))+((q=$+(F^j&(M^F))+z[6]+3225465664&4294967295)<<9&4294967295|q>>>23))+((q=j+(M^F&($^M))+z[11]+643717713&4294967295)<<14&4294967295|q>>>18))+((q=F+($^M&(j^$))+z[0]+3921069994&4294967295)<<20&4294967295|q>>>12))+((q=M+(j^$&(F^j))+z[5]+3593408605&4294967295)<<5&4294967295|q>>>27))+((q=$+(F^j&(M^F))+z[10]+38016083&4294967295)<<9&4294967295|q>>>23))+((q=j+(M^F&($^M))+z[15]+3634488961&4294967295)<<14&4294967295|q>>>18))+((q=F+($^M&(j^$))+z[4]+3889429448&4294967295)<<20&4294967295|q>>>12))+((q=M+(j^$&(F^j))+z[9]+568446438&4294967295)<<5&4294967295|q>>>27))+((q=$+(F^j&(M^F))+z[14]+3275163606&4294967295)<<9&4294967295|q>>>23))+((q=j+(M^F&($^M))+z[3]+4107603335&4294967295)<<14&4294967295|q>>>18))+((q=F+($^M&(j^$))+z[8]+1163531501&4294967295)<<20&4294967295|q>>>12))+((q=M+(j^$&(F^j))+z[13]+2850285829&4294967295)<<5&4294967295|q>>>27))+((q=$+(F^j&(M^F))+z[2]+4243563512&4294967295)<<9&4294967295|q>>>23))+((q=j+(M^F&($^M))+z[7]+1735328473&4294967295)<<14&4294967295|q>>>18))+((q=F+($^M&(j^$))+z[12]+2368359562&4294967295)<<20&4294967295|q>>>12))+((q=M+(F^j^$)+z[5]+4294588738&4294967295)<<4&4294967295|q>>>28))+((q=$+(M^F^j)+z[8]+2272392833&4294967295)<<11&4294967295|q>>>21))+((q=j+($^M^F)+z[11]+1839030562&4294967295)<<16&4294967295|q>>>16))+((q=F+(j^$^M)+z[14]+4259657740&4294967295)<<23&4294967295|q>>>9))+((q=M+(F^j^$)+z[1]+2763975236&4294967295)<<4&4294967295|q>>>28))+((q=$+(M^F^j)+z[4]+1272893353&4294967295)<<11&4294967295|q>>>21))+((q=j+($^M^F)+z[7]+4139469664&4294967295)<<16&4294967295|q>>>16))+((q=F+(j^$^M)+z[10]+3200236656&4294967295)<<23&4294967295|q>>>9))+((q=M+(F^j^$)+z[13]+681279174&4294967295)<<4&4294967295|q>>>28))+((q=$+(M^F^j)+z[0]+3936430074&4294967295)<<11&4294967295|q>>>21))+((q=j+($^M^F)+z[3]+3572445317&4294967295)<<16&4294967295|q>>>16))+((q=F+(j^$^M)+z[6]+76029189&4294967295)<<23&4294967295|q>>>9))+((q=M+(F^j^$)+z[9]+3654602809&4294967295)<<4&4294967295|q>>>28))+((q=$+(M^F^j)+z[12]+3873151461&4294967295)<<11&4294967295|q>>>21))+((q=j+($^M^F)+z[15]+530742520&4294967295)<<16&4294967295|q>>>16))+((q=F+(j^$^M)+z[2]+3299628645&4294967295)<<23&4294967295|q>>>9))+((q=M+(j^(F|~$))+z[0]+4096336452&4294967295)<<6&4294967295|q>>>26))+((q=$+(F^(M|~j))+z[7]+1126891415&4294967295)<<10&4294967295|q>>>22))+((q=j+(M^($|~F))+z[14]+2878612391&4294967295)<<15&4294967295|q>>>17))+((q=F+($^(j|~M))+z[5]+4237533241&4294967295)<<21&4294967295|q>>>11))+((q=M+(j^(F|~$))+z[12]+1700485571&4294967295)<<6&4294967295|q>>>26))+((q=$+(F^(M|~j))+z[3]+2399980690&4294967295)<<10&4294967295|q>>>22))+((q=j+(M^($|~F))+z[10]+4293915773&4294967295)<<15&4294967295|q>>>17))+((q=F+($^(j|~M))+z[1]+2240044497&4294967295)<<21&4294967295|q>>>11))+((q=M+(j^(F|~$))+z[8]+1873313359&4294967295)<<6&4294967295|q>>>26))+((q=$+(F^(M|~j))+z[15]+4264355552&4294967295)<<10&4294967295|q>>>22))+((q=j+(M^($|~F))+z[6]+2734768916&4294967295)<<15&4294967295|q>>>17))+((q=F+($^(j|~M))+z[13]+1309151649&4294967295)<<21&4294967295|q>>>11))+(($=(M=F+((q=M+(j^(F|~$))+z[4]+4149444226&4294967295)<<6&4294967295|q>>>26))+((q=$+(F^(M|~j))+z[11]+3174756917&4294967295)<<10&4294967295|q>>>22))^((j=$+((q=j+(M^($|~F))+z[2]+718787259&4294967295)<<15&4294967295|q>>>17))|~M))+z[9]+3951481745&4294967295,V.g[0]=V.g[0]+M&4294967295,V.g[1]=V.g[1]+(j+(q<<21&4294967295|q>>>11))&4294967295,V.g[2]=V.g[2]+j&4294967295,V.g[3]=V.g[3]+$&4294967295}function o(V,M){this.h=M;for(var F=[],z=!0,j=V.length-1;0<=j;j--){var $=0|V[j];z&&$==M||(F[j]=$,z=!1)}this.g=F}(function t(V,M){function F(){}F.prototype=M.prototype,V.D=M.prototype,V.prototype=new F,V.prototype.constructor=V,V.C=function(z,j,$){for(var q=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)q[ut-2]=arguments[ut];return M.prototype[j].apply(z,q)}})(i,function e(){this.blockSize=-1}),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},i.prototype.u=function(V,M){void 0===M&&(M=V.length);for(var F=M-this.blockSize,z=this.B,j=this.h,$=0;$<M;){if(0==j)for(;$<=F;)r(this,V,$),$+=this.blockSize;if("string"==typeof V){for(;$<M;)if(z[j++]=V.charCodeAt($++),j==this.blockSize){r(this,z),j=0;break}}else for(;$<M;)if(z[j++]=V[$++],j==this.blockSize){r(this,z),j=0;break}}this.h=j,this.o+=M},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var M=1;M<V.length-8;++M)V[M]=0;var F=8*this.o;for(M=V.length-8;M<V.length;++M)V[M]=255&F,F/=256;for(this.u(V),V=Array(16),M=F=0;4>M;++M)for(var z=0;32>z;z+=8)V[F++]=this.g[M]>>>z&255;return V};var a={};function l(V){return-128<=V&&128>V?function s(V,M){var F=a;return Object.prototype.hasOwnProperty.call(F,V)?F[V]:F[V]=M(V)}(V,function(M){return new o([0|M],0>M?-1:0)}):new o([0|V],0>V?-1:0)}function c(V){if(isNaN(V)||!isFinite(V))return f;if(0>V)return D(c(-V));for(var M=[],F=1,z=0;V>=F;z++)M[z]=V/F|0,F*=4294967296;return new o(M,0)}var f=l(0),m=l(1),y=l(16777216);function v(V){if(0!=V.h)return!1;for(var M=0;M<V.g.length;M++)if(0!=V.g[M])return!1;return!0}function w(V){return-1==V.h}function D(V){for(var M=V.g.length,F=[],z=0;z<M;z++)F[z]=~V.g[z];return new o(F,~V.h).add(m)}function P(V,M){return V.add(D(M))}function I(V,M){for(;(65535&V[M])!=V[M];)V[M+1]+=V[M]>>>16,V[M]&=65535,M++}function O(V,M){this.g=V,this.h=M}function W(V,M){if(v(M))throw Error("division by zero");if(v(V))return new O(f,f);if(w(V))return M=W(D(V),M),new O(D(M.g),D(M.h));if(w(M))return M=W(V,D(M)),new O(D(M.g),M.h);if(30<V.g.length){if(w(V)||w(M))throw Error("slowDivide_ only works with positive integers.");for(var F=m,z=M;0>=z.l(V);)F=K(F),z=K(z);var j=re(F,1),$=re(z,1);for(z=re(z,2),F=re(F,2);!v(z);){var q=$.add(z);0>=q.l(V)&&(j=j.add(F),$=q),z=re(z,1),F=re(F,1)}return M=P(V,j.j(M)),new O(j,M)}for(j=f;0<=V.l(M);){for(F=Math.max(1,Math.floor(V.m()/M.m())),z=48>=(z=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,z-48),q=($=c(F)).j(M);w(q)||0<q.l(V);)q=($=c(F-=z)).j(M);v($)&&($=m),j=j.add($),V=P(V,q)}return new O(j,V)}function K(V){for(var M=V.g.length+1,F=[],z=0;z<M;z++)F[z]=V.i(z)<<1|V.i(z-1)>>>31;return new o(F,V.h)}function re(V,M){var F=M>>5;M%=32;for(var z=V.g.length-F,j=[],$=0;$<z;$++)j[$]=0<M?V.i($+F)>>>M|V.i($+F+1)<<32-M:V.i($+F);return new o(j,V.h)}(n=o.prototype).m=function(){if(w(this))return-D(this).m();for(var V=0,M=1,F=0;F<this.g.length;F++){var z=this.i(F);V+=(0<=z?z:4294967296+z)*M,M*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(v(this))return"0";if(w(this))return"-"+D(this).toString(V);for(var M=c(Math.pow(V,6)),F=this,z="";;){var j=W(F,M).g,$=((0<(F=P(F,j.j(M))).g.length?F.g[0]:F.h)>>>0).toString(V);if(v(F=j))return $+z;for(;6>$.length;)$="0"+$;z=$+z}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return w(V=P(this,V))?-1:v(V)?0:1},n.abs=function(){return w(this)?D(this):this},n.add=function(V){for(var M=Math.max(this.g.length,V.g.length),F=[],z=0,j=0;j<=M;j++){var $=z+(65535&this.i(j))+(65535&V.i(j)),q=($>>>16)+(this.i(j)>>>16)+(V.i(j)>>>16);z=q>>>16,F[j]=(q&=65535)<<16|($&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(V){if(v(this)||v(V))return f;if(w(this))return w(V)?D(this).j(D(V)):D(D(this).j(V));if(w(V))return D(this.j(D(V)));if(0>this.l(y)&&0>V.l(y))return c(this.m()*V.m());for(var M=this.g.length+V.g.length,F=[],z=0;z<2*M;z++)F[z]=0;for(z=0;z<this.g.length;z++)for(var j=0;j<V.g.length;j++){var $=this.i(z)>>>16,q=65535&this.i(z),ut=V.i(j)>>>16,Rt=65535&V.i(j);F[2*z+2*j]+=q*Rt,I(F,2*z+2*j),F[2*z+2*j+1]+=$*Rt,I(F,2*z+2*j+1),F[2*z+2*j+1]+=q*ut,I(F,2*z+2*j+1),F[2*z+2*j+2]+=$*ut,I(F,2*z+2*j+2)}for(z=0;z<M;z++)F[z]=F[2*z+1]<<16|F[2*z];for(z=M;z<2*M;z++)F[z]=0;return new o(F,0)},n.A=function(V){return W(this,V).h},n.and=function(V){for(var M=Math.max(this.g.length,V.g.length),F=[],z=0;z<M;z++)F[z]=this.i(z)&V.i(z);return new o(F,this.h&V.h)},n.or=function(V){for(var M=Math.max(this.g.length,V.g.length),F=[],z=0;z<M;z++)F[z]=this.i(z)|V.i(z);return new o(F,this.h|V.h)},n.xor=function(V){for(var M=Math.max(this.g.length,V.g.length),F=[],z=0;z<M;z++)F[z]=this.i(z)^V.i(z);return new o(F,this.h^V.h)},i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ij=nj.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(V,M){if(0==V.length)throw Error("number format error: empty string");if(2>(M=M||10)||36<M)throw Error("radix out of range: "+M);if("-"==V.charAt(0))return D(u(V.substring(1),M));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=c(Math.pow(M,8)),z=f,j=0;j<V.length;j+=8){var $=Math.min(8,V.length-j),q=parseInt(V.substring(j,j+$),M);8>$?($=c(Math.pow(M,$)),z=z.j($).add(c(q))):z=(z=z.j(F)).add(c(q))}return z},yd=nj.Integer=o}).apply(typeof tj<"u"?tj:typeof self<"u"?self:typeof window<"u"?window:{});var rj,sj,M_,oj,iC,mx,aj,lj,cj,nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gl={};(function(){var n,t="function"==typeof Object.defineProperties?Object.defineProperty:function(p,b,S){return p==Array.prototype||p==Object.prototype||(p[b]=S.value),p},i=function e(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof nC&&nC];for(var b=0;b<p.length;++b){var S=p[b];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}(this);!function r(p,b){if(b)e:{var S=i;p=p.split(".");for(var L=0;L<p.length-1;L++){var ce=p[L];if(!(ce in S))break e;S=S[ce]}(b=b(L=S[p=p[p.length-1]]))!=L&&null!=b&&t(S,p,{configurable:!0,writable:!0,value:b})}}("Array.prototype.values",function(p){return p||function(){return function s(p,b){p instanceof String&&(p+="");var S=0,L=!1,ce={next:function(){if(!L&&S<p.length){var ye=S++;return{value:b(ye,p[ye]),done:!1}}return L=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}(this,function(b,S){return S})}});var o=o||{},a=this||self;function l(p){var b=typeof p;return"array"==(b="object"!=b?b:p?Array.isArray(p)?"array":b:"null")||"object"==b&&"number"==typeof p.length}function c(p){var b=typeof p;return"object"==b&&null!=p||"function"==b}function u(p,b,S){return p.call.apply(p.bind,arguments)}function f(p,b,S){if(!p)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,L),p.apply(b,ce)}}return function(){return p.apply(b,arguments)}}function m(p,b,S){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:f).apply(null,arguments)}function y(p,b){var S=Array.prototype.slice.call(arguments,1);return function(){var L=S.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function v(p,b){function S(){}S.prototype=b.prototype,p.aa=b.prototype,p.prototype=new S,p.prototype.constructor=p,p.Qb=function(L,ce,ye){for(var je=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)je[Ln-2]=arguments[Ln];return b.prototype[ce].apply(L,je)}}function w(p){const b=p.length;if(0<b){const S=Array(b);for(let L=0;L<b;L++)S[L]=p[L];return S}return[]}function D(p,b){for(let S=1;S<arguments.length;S++){const L=arguments[S];if(l(L)){const ce=p.length||0,ye=L.length||0;p.length=ce+ye;for(let je=0;je<ye;je++)p[ce+je]=L[je]}else p.push(L)}}function I(p){return/^[\s\xa0]*$/.test(p)}function O(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function W(p){return W[" "](p),p}W[" "]=function(){};var K=!(-1==O().indexOf("Gecko")||-1!=O().toLowerCase().indexOf("webkit")&&-1==O().indexOf("Edge")||-1!=O().indexOf("Trident")||-1!=O().indexOf("MSIE")||-1!=O().indexOf("Edge"));function re(p,b,S){for(const L in p)b.call(S,p[L],L,p)}function M(p){const b={};for(const S in p)b[S]=p[S];return b}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(p,b){let S,L;for(let ce=1;ce<arguments.length;ce++){for(S in L=arguments[ce],L)p[S]=L[S];for(let ye=0;ye<F.length;ye++)S=F[ye],Object.prototype.hasOwnProperty.call(L,S)&&(p[S]=L[S])}}function j(p){var b=1;p=p.split(":");const S=[];for(;0<b&&p.length;)S.push(p.shift()),b--;return p.length&&S.push(p.join(":")),S}function $(p){a.setTimeout(()=>{throw p},0)}function q(){var p=Ge;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}var Rt=new class P{constructor(b,S){this.i=b,this.j=S,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}(()=>new Ne,p=>p.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(b,S){this.h=b,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,qe=!1,Ge=new class ut{constructor(){this.h=this.g=null}add(b,S){const L=Rt.get();L.set(b,S),this.h?this.h.next=L:this.g=L,this.h=L}},Qt=()=>{const p=a.Promise.resolve(void 0);Le=()=>{p.then(Tn)}};var Tn=()=>{for(var p;p=q();){try{p.h.call(p.g)}catch(S){$(S)}var b=Rt;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}qe=!1};function an(){this.s=this.s,this.C=this.C}function ln(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}an.prototype.s=!1,an.prototype.ma=function(){this.s||(this.s=!0,this.N())},an.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ln.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const S=()=>{};a.addEventListener("test",S,b),a.removeEventListener("test",S,b)}catch{}return p}();function jr(p,b){if(ln.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var S=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(K){e:{try{W(b.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(b=null)}}else"mouseover"==S?b=p.fromElement:"mouseout"==S&&(b=p.toElement);this.relatedTarget=b,L?(this.clientX=void 0!==L.clientX?L.clientX:L.pageX,this.clientY=void 0!==L.clientY?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:fo[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&jr.aa.h.call(this)}}v(jr,ln);var fo={2:"touch",3:"pen",4:"mouse"};jr.prototype.h=function(){jr.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ei="closure_listenable_"+(1e6*Math.random()|0),Bl=0;function Gs(p,b,S,L,ce){this.listener=p,this.proxy=null,this.src=b,this.type=S,this.capture=!!L,this.ha=ce,this.key=++Bl,this.da=this.fa=!1}function jl(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function yu(p){this.src=p,this.g={},this.h=0}function MR(p,b){var S=b.type;if(S in p.g){var ye,L=p.g[S],ce=Array.prototype.indexOf.call(L,b,void 0);(ye=0<=ce)&&Array.prototype.splice.call(L,ce,1),ye&&(jl(b),0==p.g[S].length&&(delete p.g[S],p.h--))}}function PR(p,b,S,L){for(var ce=0;ce<p.length;++ce){var ye=p[ce];if(!ye.da&&ye.listener==b&&ye.capture==!!S&&ye.ha==L)return ce}return-1}yu.prototype.add=function(p,b,S,L,ce){var ye=p.toString();(p=this.g[ye])||(p=this.g[ye]=[],this.h++);var je=PR(p,b,L,ce);return-1<je?(b=p[je],S||(b.fa=!1)):((b=new Gs(b,this.src,ye,!!L,ce)).fa=S,p.push(b)),b};var RR="closure_lm_"+(1e6*Math.random()|0),OR={};function BW(p,b,S,L,ce){if(L&&L.once)return UW(p,b,S,L,ce);if(Array.isArray(b)){for(var ye=0;ye<b.length;ye++)BW(p,b[ye],S,L,ce);return null}return S=VR(S),p&&p[Ei]?p.K(b,S,c(L)?!!L.capture:!!L,ce):jW(p,b,S,!1,L,ce)}function jW(p,b,S,L,ce,ye){if(!b)throw Error("Invalid event type");var je=c(ce)?!!ce.capture:!!ce,Ln=FR(p);if(Ln||(p[RR]=Ln=new yu(p)),(S=Ln.add(b,S,L,je,ye)).proxy)return S;if(L=function PDe(){const b=RDe;return function p(S){return b.call(p.src,p.listener,S)}}(),S.proxy=L,L.src=p,L.listener=S,p.addEventListener)$t||(ce=je),void 0===ce&&(ce=!1),p.addEventListener(b.toString(),L,ce);else if(p.attachEvent)p.attachEvent(zW(b.toString()),L);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(L)}return S}function UW(p,b,S,L,ce){if(Array.isArray(b)){for(var ye=0;ye<b.length;ye++)UW(p,b[ye],S,L,ce);return null}return S=VR(S),p&&p[Ei]?p.L(b,S,c(L)?!!L.capture:!!L,ce):jW(p,b,S,!0,L,ce)}function HW(p,b,S,L,ce){if(Array.isArray(b))for(var ye=0;ye<b.length;ye++)HW(p,b[ye],S,L,ce);else L=c(L)?!!L.capture:!!L,S=VR(S),p&&p[Ei]?(p=p.i,(b=String(b).toString())in p.g&&-1<(S=PR(ye=p.g[b],S,L,ce))&&(jl(ye[S]),Array.prototype.splice.call(ye,S,1),0==ye.length&&(delete p.g[b],p.h--))):p&&(p=FR(p))&&(b=p.g[b.toString()],p=-1,b&&(p=PR(b,S,L,ce)),(S=-1<p?b[p]:null)&&NR(S))}function NR(p){if("number"!=typeof p&&p&&!p.da){var b=p.src;if(b&&b[Ei])MR(b.i,p);else{var S=p.type,L=p.proxy;b.removeEventListener?b.removeEventListener(S,L,p.capture):b.detachEvent?b.detachEvent(zW(S),L):b.addListener&&b.removeListener&&b.removeListener(L),(S=FR(b))?(MR(S,p),0==S.h&&(S.src=null,b[RR]=null)):jl(p)}}}function zW(p){return p in OR?OR[p]:OR[p]="on"+p}function RDe(p,b){if(p.da)p=!0;else{b=new jr(b,this);var S=p.listener,L=p.ha||p.src;p.fa&&NR(p),p=S.call(L,b)}return p}function FR(p){return(p=p[RR])instanceof yu?p:null}var LR="__closure_events_fn_"+(1e9*Math.random()>>>0);function VR(p){return"function"==typeof p?p:(p[LR]||(p[LR]=function(b){return p.handleEvent(b)}),p[LR])}function us(){an.call(this),this.i=new yu(this),this.M=this,this.F=null}function Ts(p,b){var S,L=p.F;if(L)for(S=[];L;L=L.F)S.push(L);if(p=p.M,L=b.type||b,"string"==typeof b)b=new ln(b,p);else if(b instanceof ln)b.target=b.target||p;else{var ce=b;z(b=new ln(L,p),ce)}if(ce=!0,S)for(var ye=S.length-1;0<=ye;ye--){var je=b.g=S[ye];ce=UD(je,L,!0,b)&&ce}if(ce=UD(je=b.g=p,L,!0,b)&&ce,ce=UD(je,L,!1,b)&&ce,S)for(ye=0;ye<S.length;ye++)ce=UD(je=b.g=S[ye],L,!1,b)&&ce}function UD(p,b,S,L){if(!(b=p.i.g[String(b)]))return!0;b=b.concat();for(var ce=!0,ye=0;ye<b.length;++ye){var je=b[ye];if(je&&!je.da&&je.capture==S){var Ln=je.listener,Ur=je.ha||je.src;je.fa&&MR(p.i,je),ce=!1!==Ln.call(Ur,L)&&ce}}return ce&&!L.defaultPrevented}function $W(p,b,S){if("function"==typeof p)S&&(p=m(p,S));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=m(p.handleEvent,p)}return 2147483647<Number(b)?-1:a.setTimeout(p,b||0)}function WW(p){p.g=$W(()=>{p.g=null,p.i&&(p.i=!1,WW(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}v(us,an),us.prototype[Ei]=!0,us.prototype.removeEventListener=function(p,b,S,L){HW(this,p,b,S,L)},us.prototype.N=function(){if(us.aa.N.call(this),this.i){var b,p=this.i;for(b in p.g){for(var S=p.g[b],L=0;L<S.length;L++)jl(S[L]);delete p.g[b],p.h--}}this.F=null},us.prototype.K=function(p,b,S,L){return this.i.add(String(p),b,!1,S,L)},us.prototype.L=function(p,b,S,L){return this.i.add(String(p),b,!0,S,L)};class ODe extends an{constructor(b,S){super(),this.m=b,this.l=S,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:WW(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wv(p){an.call(this),this.h=p,this.g={}}v(wv,an);var qW=[];function GW(p){re(p.g,function(b,S){this.g.hasOwnProperty(S)&&NR(b)},p),p.g={}}wv.prototype.N=function(){wv.aa.N.call(this),GW(this)},wv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var BR=a.JSON.stringify,NDe=a.JSON.parse,FDe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function jR(){}function KW(){}jR.prototype.h=null;var Cv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function UR(){ln.call(this,"d")}function HR(){ln.call(this,"c")}v(UR,ln),v(HR,ln);var yh={},YW=null;function HD(){return YW=YW||new us}function QW(p){ln.call(this,yh.La,p)}function Ev(p){const b=HD();Ts(b,new QW(b))}function XW(p,b){ln.call(this,yh.STAT_EVENT,p),this.stat=b}function Ss(p){const b=HD();Ts(b,new XW(b,p))}function JW(p,b){ln.call(this,yh.Ma,p),this.size=b}function Dv(p,b){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},b)}function Tv(){this.g=!0}function gg(p,b,S,L){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+function jDe(p,b){if(!p.g)return b;if(!b)return null;try{var S=JSON.parse(b);if(S)for(p=0;p<S.length;p++)if(Array.isArray(S[p])){var L=S[p];if(!(2>L.length)){var ce=L[1];if(Array.isArray(ce)&&!(1>ce.length)){var ye=ce[0];if("noop"!=ye&&"stop"!=ye&&"close"!=ye)for(var je=1;je<ce.length;je++)ce[je]=""}}}return BR(S)}catch{return b}}(p,S)+(L?" "+L:"")})}yh.La="serverreachability",v(QW,ln),yh.STAT_EVENT="statevent",v(XW,ln),yh.Ma="timingevent",v(JW,ln),Tv.prototype.xa=function(){this.g=!1},Tv.prototype.info=function(){};var zR,zD={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},e7={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function $D(){}function vu(p,b,S,L){this.j=p,this.i=b,this.l=S,this.R=L||1,this.U=new wv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new t7}function t7(){this.i=null,this.g="",this.h=!1}v($D,jR),$D.prototype.g=function(){return new XMLHttpRequest},$D.prototype.i=function(){return{}},zR=new $D;var n7={},$R={};function WR(p,b,S){p.L=1,p.v=ZD(Ul(b)),p.m=S,p.P=!0,i7(p,null)}function i7(p,b){p.F=Date.now(),WD(p),p.A=Ul(p.v);var S=p.A,L=p.R;Array.isArray(L)||(L=[String(L)]),_7(S.i,"t",L),p.C=0,S=p.j.J,p.h=new t7,p.g=N7(p.j,S?b:null,!p.m),0<p.O&&(p.M=new ODe(m(p.Y,p,p.g),p.O)),b=p.U,S=p.g,L=p.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(qW[0]=ce.toString()),ce=qW);for(var ye=0;ye<ce.length;ye++){var je=BW(S,ce[ye],L||b.handleEvent,!1,b.h||b);if(!je)break;b.g[je.key]=je}b=p.H?M(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),Ev(),function LDe(p,b,S,L,ce,ye){p.info(function(){if(p.g)if(ye)for(var je="",Ln=ye.split("&"),Ur=0;Ur<Ln.length;Ur++){var hn=Ln[Ur].split("=");if(1<hn.length){var ds=hn[0];hn=hn[1];var hs=ds.split("_");je=2<=hs.length&&"type"==hs[1]?je+(ds+"=")+hn+"&":je+(ds+"=redacted&")}}else je=null;else je=ye;return"XMLHTTP REQ ("+L+") [attempt "+ce+"]: "+b+"\n"+S+"\n"+je})}(p.i,p.u,p.A,p.l,p.R,p.m)}function r7(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function UDe(p,b){var S=p.C,L=b.indexOf("\n",S);return-1==L?$R:(S=Number(b.substring(S,L)),isNaN(S)?n7:(L+=1)+S>b.length?$R:(b=b.slice(L,L+S),p.C=L+S,b))}function WD(p){p.S=Date.now()+p.I,s7(p,p.I)}function s7(p,b){if(null!=p.B)throw Error("WatchDog timer not null");p.B=Dv(m(p.ba,p),b)}function qR(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function Sv(p){0==p.j.G||p.J||M7(p.j,p)}function vh(p){qR(p);var b=p.M;b&&"function"==typeof b.ma&&b.ma(),p.M=null,GW(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function GR(p,b){try{var S=p.j;if(0!=S.G&&(S.g==p||ZR(S.h,p)))if(!p.K&&ZR(S.h,p)&&3==S.G){try{var L=S.Da.g.parse(b)}catch{L=null}if(Array.isArray(L)&&3==L.length){var ce=L;if(0==ce[0]){e:if(!S.u){if(S.g){if(!(S.g.F+3e3<p.F))break e;JD(S),QD(S)}XR(S),Ss(18)}}else S.za=ce[1],0<S.za-S.T&&37500>ce[2]&&S.F&&0==S.v&&!S.C&&(S.C=Dv(m(S.Za,S),6e3));if(1>=l7(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else wh(S,11)}else if((p.K||S.g==p)&&JD(S),!I(b))for(ce=S.Da.g.parse(b),b=0;b<ce.length;b++){let hn=ce[b];if(S.T=hn[0],hn=hn[1],2==S.G)if("c"==hn[0]){S.K=hn[1],S.ia=hn[2];const ds=hn[3];null!=ds&&(S.la=ds,S.j.info("VER="+S.la));const hs=hn[4];null!=hs&&(S.Aa=hs,S.j.info("SVER="+S.Aa));const yg=hn[5];null!=yg&&"number"==typeof yg&&0<yg&&(S.L=L=1.5*yg,S.j.info("backChannelRequestTimeoutMs_="+L)),L=S;const ia=p.g;if(ia){const tT=ia.g?ia.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tT){var ye=L.h;ye.g||-1==tT.indexOf("spdy")&&-1==tT.indexOf("quic")&&-1==tT.indexOf("h2")||(ye.j=ye.l,ye.g=new Set,ye.h&&(KR(ye,ye.h),ye.h=null))}if(L.D){const eO=ia.g?ia.g.getResponseHeader("X-HTTP-Session-Id"):null;eO&&(L.ya=eO,ii(L.I,L.D,eO))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-p.F,S.j.info("Handshake RTT: "+S.R+"ms"));var je=p;if((L=S).qa=O7(L,L.J?L.ia:null,L.W),je.K){c7(L.h,je);var Ln=je,Ur=L.L;Ur&&(Ln.I=Ur),Ln.B&&(qR(Ln),WD(Ln)),L.g=je}else x7(L);0<S.i.length&&XD(S)}else"stop"!=hn[0]&&"close"!=hn[0]||wh(S,7);else 3==S.G&&("stop"==hn[0]||"close"==hn[0]?"stop"==hn[0]?wh(S,7):QR(S):"noop"!=hn[0]&&S.l&&S.l.ta(hn),S.v=0)}Ev()}catch{}}function o7(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function a7(p){return!!p.h||!!p.g&&p.g.size>=p.j}function l7(p){return p.h?1:p.g?p.g.size:0}function ZR(p,b){return p.h?p.h==b:!!p.g&&p.g.has(b)}function KR(p,b){p.g?p.g.add(b):p.h=b}function c7(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}function u7(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let b=p.i;for(const S of p.g.values())b=b.concat(S.D);return b}return w(p.i)}function d7(p,b){if(p.forEach&&"function"==typeof p.forEach)p.forEach(b,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,b,void 0);else for(var S=function $De(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var b=[];p=p.length;for(var S=0;S<p;S++)b.push(S);return b}b=[],S=0;for(const L in p)b[S++]=L;return b}}}(p),L=function zDe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var b=[],S=p.length,L=0;L<S;L++)b.push(p[L]);return b}for(L in b=[],S=0,p)b[S++]=p[L];return b}(p),ce=L.length,ye=0;ye<ce;ye++)b.call(void 0,L[ye],S&&S[ye],p)}vu.prototype.ca=function(p){p=p.target;const b=this.M;b&&3==Hl(p)?b.j():this.Y(p)},vu.prototype.Y=function(p){try{if(p==this.g)e:{const hs=Hl(this.g);var b=this.g.Ba();if(this.g.Z(),!(3>hs)&&(3!=hs||this.g&&(this.h.h||this.g.oa()||D7(this.g)))){this.J||4!=hs||7==b||Ev(),qR(this);var S=this.g.Z();this.X=S;t:if(r7(this)){var L=D7(this.g);p="";var ce=L.length,ye=4==Hl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vh(this),Sv(this);var je="";break t}this.h.i=new a.TextDecoder}for(b=0;b<ce;b++)this.h.h=!0,p+=this.h.i.decode(L[b],{stream:!(ye&&b==ce-1)});L.length=0,this.h.g+=p,this.C=0,je=this.h.g}else je=this.g.oa();if(this.o=200==S,function VDe(p,b,S,L,ce,ye,je){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+ce+"]: "+b+"\n"+S+"\n"+ye+" "+je})}(this.i,this.u,this.A,this.l,this.R,hs,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Ln,Ur=this.g;if((Ln=Ur.g?Ur.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ln)){var hn=Ln;break t}}hn=null}if(!(S=hn)){this.o=!1,this.s=3,Ss(12),vh(this),Sv(this);break e}gg(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,GR(this,S)}if(this.P){let ia;for(S=!0;!this.J&&this.C<je.length;){if(ia=UDe(this,je),ia==$R){4==hs&&(this.s=4,Ss(14),S=!1),gg(this.i,this.l,null,"[Incomplete Response]");break}if(ia==n7){this.s=4,Ss(15),gg(this.i,this.l,je,"[Invalid Chunk]"),S=!1;break}gg(this.i,this.l,ia,null),GR(this,ia)}if(r7(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=hs||0!=je.length||this.h.h||(this.s=1,Ss(16),S=!1),this.o=this.o&&S,S){if(0<je.length&&!this.W){this.W=!0;var ds=this.j;ds.g==this&&ds.ba&&!ds.M&&(ds.j.info("Great, no buffering proxy detected. Bytes received: "+je.length),JR(ds),ds.M=!0,Ss(11))}}else gg(this.i,this.l,je,"[Invalid Chunked Response]"),vh(this),Sv(this)}else gg(this.i,this.l,je,null),GR(this,je);4==hs&&vh(this),this.o&&!this.J&&(4==hs?M7(this.j,this):(this.o=!1,WD(this)))}else(function rTe(p){const b={};p=(p.g&&2<=Hl(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let L=0;L<p.length;L++){if(I(p[L]))continue;var S=j(p[L]);const ce=S[0];if("string"!=typeof(S=S[1]))continue;S=S.trim();const ye=b[ce]||[];b[ce]=ye,ye.push(S)}!function V(p,b){for(const S in p)b.call(void 0,p[S],S,p)}(b,function(L){return L.join(", ")})})(this.g),400==S&&0<je.indexOf("Unknown SID")?(this.s=3,Ss(12)):(this.s=0,Ss(13)),vh(this),Sv(this)}}}catch{}},vu.prototype.cancel=function(){this.J=!0,vh(this)},vu.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function BDe(p,b){p.info(function(){return"TIMEOUT: "+b})}(this.i,this.A),2!=this.L&&(Ev(),Ss(17)),vh(this),this.s=2,Sv(this)):s7(this,this.S-p)},o7.prototype.cancel=function(){if(this.i=u7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var h7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bh(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof bh){this.h=p.h,qD(this,p.j),this.o=p.o,this.g=p.g,GD(this,p.s),this.l=p.l;var b=p.i,S=new xv;S.i=b.i,b.g&&(S.g=new Map(b.g),S.h=b.h),f7(this,S),this.m=p.m}else p&&(b=String(p).match(h7))?(this.h=!1,qD(this,b[1]||"",!0),this.o=Iv(b[2]||""),this.g=Iv(b[3]||"",!0),GD(this,b[4]),this.l=Iv(b[5]||"",!0),f7(this,b[6]||"",!0),this.m=Iv(b[7]||"")):(this.h=!1,this.i=new xv(null,this.h))}function Ul(p){return new bh(p)}function qD(p,b,S){p.j=S?Iv(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function GD(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function f7(p,b,S){b instanceof xv?(p.i=b,function QDe(p,b){b&&!p.j&&(bu(p),p.i=null,p.g.forEach(function(S,L){var ce=L.toLowerCase();L!=ce&&(g7(this,L),_7(this,ce,S))},p)),p.j=b}(p.i,p.h)):(S||(b=Av(b,KDe)),p.i=new xv(b,p.h))}function ii(p,b,S){p.i.set(b,S)}function ZD(p){return ii(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Iv(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Av(p,b,S){return"string"==typeof p?(p=encodeURI(p).replace(b,qDe),S&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function qDe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}bh.prototype.toString=function(){var p=[],b=this.j;b&&p.push(Av(b,p7,!0),":");var S=this.g;return(S||"file"==b)&&(p.push("//"),(b=this.o)&&p.push(Av(b,p7,!0),"@"),p.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(S=this.s)&&p.push(":",String(S))),(S=this.l)&&(this.g&&"/"!=S.charAt(0)&&p.push("/"),p.push(Av(S,"/"==S.charAt(0)?ZDe:GDe,!0))),(S=this.i.toString())&&p.push("?",S),(S=this.m)&&p.push("#",Av(S,YDe)),p.join("")};var p,p7=/[#\/\?@]/g,GDe=/[#\?:]/g,ZDe=/[#\?]/g,KDe=/[#\?@]/g,YDe=/#/g;function xv(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function bu(p){p.g||(p.g=new Map,p.h=0,p.i&&function WDe(p,b){if(p){p=p.split("&");for(var S=0;S<p.length;S++){var L=p[S].indexOf("="),ce=null;if(0<=L){var ye=p[S].substring(0,L);ce=p[S].substring(L+1)}else ye=p[S];b(ye,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}(p.i,function(b,S){p.add(decodeURIComponent(b.replace(/\+/g," ")),S)}))}function g7(p,b){bu(p),b=mg(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function m7(p,b){return bu(p),b=mg(p,b),p.g.has(b)}function _7(p,b,S){g7(p,b),0<S.length&&(p.i=null,p.g.set(mg(p,b),w(S)),p.h+=S.length)}function mg(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function wu(p,b,S,L,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),L(S)}catch{}}function eTe(){this.g=new FDe}function tTe(p,b,S){const L=S||"";try{d7(p,function(ce,ye){let je=ce;c(ce)&&(je=BR(ce)),b.push(L+ye+"="+encodeURIComponent(je))})}catch(ce){throw b.push(L+"type="+encodeURIComponent("_badmap")),ce}}function kv(p){this.l=p.Ub||null,this.j=p.eb||!1}function KD(p,b){us.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function y7(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Mv(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Pv(p)}function Pv(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function v7(p){let b="";return re(p,function(S,L){b+=L,b+=":",b+=S,b+="\r\n"}),b}function YR(p,b,S){e:{for(L in S){var L=!1;break e}L=!0}L||(S=v7(S),"string"==typeof p?null!=S&&encodeURIComponent(String(S)):ii(p,b,S))}function Di(p){us.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=xv.prototype).add=function(p,b){bu(this),this.i=null,p=mg(this,p);var S=this.g.get(p);return S||this.g.set(p,S=[]),S.push(b),this.h+=1,this},n.forEach=function(p,b){bu(this),this.g.forEach(function(S,L){S.forEach(function(ce){p.call(b,ce,L,this)},this)},this)},n.na=function(){bu(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),S=[];for(let L=0;L<b.length;L++){const ce=p[L];for(let ye=0;ye<ce.length;ye++)S.push(b[L])}return S},n.V=function(p){bu(this);let b=[];if("string"==typeof p)m7(this,p)&&(b=b.concat(this.g.get(mg(this,p))));else{p=Array.from(this.g.values());for(let S=0;S<p.length;S++)b=b.concat(p[S])}return b},n.set=function(p,b){return bu(this),this.i=null,m7(this,p=mg(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},n.get=function(p,b){return p&&0<(p=this.V(p)).length?String(p[0]):b},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var S=0;S<b.length;S++){var L=b[S];const ye=encodeURIComponent(String(L)),je=this.V(L);for(L=0;L<je.length;L++){var ce=ye;""!==je[L]&&(ce+="="+encodeURIComponent(String(je[L]))),p.push(ce)}}return this.i=p.join("&")},v(kv,jR),kv.prototype.g=function(){return new KD(this.l,this.j)},kv.prototype.i=(p={},function(){return p}),v(KD,us),(n=KD.prototype).open=function(p,b){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,Pv(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mv(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Pv(this)),this.g&&(this.readyState=3,Pv(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;y7(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?Mv(this):Pv(this),3==this.readyState&&y7(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Mv(this))},n.Qa=function(p){this.g&&(this.response=p,Mv(this))},n.ga=function(){this.g&&Mv(this)},n.setRequestHeader=function(p,b){this.u.append(p,b)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var S=b.next();!S.done;)p.push((S=S.value)[0]+": "+S[1]),S=b.next();return p.join("\r\n")},Object.defineProperty(KD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),v(Di,us);var nTe=/^https?$/i,iTe=["POST","PUT"];function b7(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,w7(p),YD(p)}function w7(p){p.A||(p.A=!0,Ts(p,"complete"),Ts(p,"error"))}function C7(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=Hl(p)||2!=p.Z()))if(p.u&&4==Hl(p))$W(p.Ea,0,p);else if(Ts(p,"readystatechange"),4==Hl(p)){p.h=!1;try{const je=p.Z();e:switch(je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var S;if(!(S=b)){var L;if(L=0===je){var ce=String(p.D).match(h7)[1]||null;!ce&&a.self&&a.self.location&&(ce=a.self.location.protocol.slice(0,-1)),L=!nTe.test(ce?ce.toLowerCase():"")}S=L}if(S)Ts(p,"complete"),Ts(p,"success");else{p.m=6;try{var ye=2<Hl(p)?p.g.statusText:""}catch{ye=""}p.l=ye+" ["+p.Z()+"]",w7(p)}}finally{YD(p)}}}function YD(p,b){if(p.g){E7(p);const S=p.g,L=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||Ts(p,"ready");try{S.onreadystatechange=L}catch{}}}function E7(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function Hl(p){return p.g?p.g.readyState:0}function D7(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Rv(p,b,S){return S&&S.internalChannelParams&&S.internalChannelParams[p]||b}function T7(p){this.Aa=0,this.i=[],this.j=new Tv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rv("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rv("baseRetryDelayMs",5e3,p),this.cb=Rv("retryDelaySeedMs",1e4,p),this.Wa=Rv("forwardChannelMaxRetries",2,p),this.wa=Rv("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new o7(p&&p.concurrentRequestLimit),this.Da=new eTe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function QR(p){if(S7(p),3==p.G){var b=p.U++,S=Ul(p.I);if(ii(S,"SID",p.K),ii(S,"RID",b),ii(S,"TYPE","terminate"),Ov(p,S),(b=new vu(p,p.j,b)).L=2,b.v=ZD(Ul(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!S&&a.Image&&((new Image).src=b.v,S=!0),S||(b.g=N7(b.j,null),b.g.ea(b.v)),b.F=Date.now(),WD(b)}R7(p)}function QD(p){p.g&&(JR(p),p.g.cancel(),p.g=null)}function S7(p){QD(p),p.u&&(a.clearTimeout(p.u),p.u=null),JD(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function XD(p){if(!a7(p.h)&&!p.s){p.s=!0;var b=p.Ga;Le||Qt(),qe||(Le(),qe=!0),Ge.add(b,p),p.B=0}}function I7(p,b){var S;S=b?b.l:p.U++;const L=Ul(p.I);ii(L,"SID",p.K),ii(L,"RID",S),ii(L,"AID",p.T),Ov(p,L),p.m&&p.o&&YR(L,p.m,p.o),S=new vu(p,p.j,S,p.B+1),null===p.m&&(S.H=p.o),b&&(p.i=b.D.concat(p.i)),b=A7(p,S,1e3),S.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),KR(p.h,S),WR(S,L,b)}function Ov(p,b){p.H&&re(p.H,function(S,L){ii(b,L,S)}),p.l&&d7({},function(S,L){ii(b,L,S)})}function A7(p,b,S){S=Math.min(p.i.length,S);var L=p.l?m(p.l.Na,p.l,p):null;e:{var ce=p.i;let ye=-1;for(;;){const je=["count="+S];-1==ye?0<S?(ye=ce[0].g,je.push("ofs="+ye)):ye=0:je.push("ofs="+ye);let Ln=!0;for(let Ur=0;Ur<S;Ur++){let hn=ce[Ur].g;const ds=ce[Ur].map;if(hn-=ye,0>hn)ye=Math.max(0,ce[Ur].g-100),Ln=!1;else try{tTe(ds,je,"req"+hn+"_")}catch{L&&L(ds)}}if(Ln){L=je.join("&");break e}}}return p=p.i.splice(0,S),b.D=p,L}function x7(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;Le||Qt(),qe||(Le(),qe=!0),Ge.add(b,p),p.v=0}}function XR(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=Dv(m(p.Fa,p),P7(p,p.v)),p.v++,0))}function JR(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function k7(p){p.g=new vu(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var b=Ul(p.qa);ii(b,"RID","rpc"),ii(b,"SID",p.K),ii(b,"AID",p.T),ii(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&ii(b,"TO",p.ja),ii(b,"TYPE","xmlhttp"),Ov(p,b),p.m&&p.o&&YR(b,p.m,p.o),p.L&&(p.g.I=p.L);var S=p.g;p=p.ia,S.L=1,S.v=ZD(Ul(b)),S.m=null,S.P=!0,i7(S,p)}function JD(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function M7(p,b){var S=null;if(p.g==b){JD(p),JR(p),p.g=null;var L=2}else{if(!ZR(p.h,b))return;S=b.D,c7(p.h,b),L=1}if(0!=p.G)if(b.o)if(1==L){S=b.m?b.m.length:0,b=Date.now()-b.F;var ce=p.B;Ts(L=HD(),new JW(L,S)),XD(p)}else x7(p);else if(3==(ce=b.s)||0==ce&&0<b.X||!(1==L&&function sTe(p,b){return!(l7(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=b.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=Dv(m(p.Ga,p,b),P7(p,p.B)),p.B++,0)))}(p,b)||2==L&&XR(p)))switch(S&&0<S.length&&(b=p.h,b.i=b.i.concat(S)),ce){case 1:wh(p,5);break;case 4:wh(p,10);break;case 3:wh(p,6);break;default:wh(p,2)}}function P7(p,b){let S=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(S*=2),S*b}function wh(p,b){if(p.j.info("Error code "+b),2==b){var S=m(p.fb,p),L=p.Xa;const ce=!L;L=new bh(L||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||qD(L,"https"),ZD(L),ce?function XDe(p,b){const S=new Tv;if(a.Image){const L=new Image;L.onload=y(wu,S,"TestLoadImage: loaded",!0,b,L),L.onerror=y(wu,S,"TestLoadImage: error",!1,b,L),L.onabort=y(wu,S,"TestLoadImage: abort",!1,b,L),L.ontimeout=y(wu,S,"TestLoadImage: timeout",!1,b,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else b(!1)}(L.toString(),S):function JDe(p,b){new Tv;const L=new AbortController,ce=setTimeout(()=>{L.abort(),wu(0,0,!1,b)},1e4);fetch(p,{signal:L.signal}).then(ye=>{clearTimeout(ce),wu(0,0,!!ye.ok,b)}).catch(()=>{clearTimeout(ce),wu(0,0,!1,b)})}(L.toString(),S)}else Ss(2);p.G=0,p.l&&p.l.sa(b),R7(p),S7(p)}function R7(p){if(p.G=0,p.ka=[],p.l){const b=u7(p.h);(0!=b.length||0!=p.i.length)&&(D(p.ka,b),D(p.ka,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.ra()}}function O7(p,b,S){var L=S instanceof bh?Ul(S):new bh(S);if(""!=L.g)b&&(L.g=b+"."+L.g),GD(L,L.s);else{var ce=a.location;L=ce.protocol,b=b?b+"."+ce.hostname:ce.hostname,ce=+ce.port;var ye=new bh(null);L&&qD(ye,L),b&&(ye.g=b),ce&&GD(ye,ce),S&&(ye.l=S),L=ye}return b=p.ya,(S=p.D)&&b&&ii(L,S,b),ii(L,"VER",p.la),Ov(p,L),L}function N7(p,b,S){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new Di(p.Ca&&!p.pa?new kv({eb:S}):p.pa)).Ha(p.J),b}function F7(){}function eT(){}function po(p,b){us.call(this),this.g=new T7(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!I(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!I(b)&&(this.g.D=b,null!==(p=this.h)&&b in p&&b in(p=this.h)&&delete p[b]),this.j=new _g(this)}function L7(p){UR.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const S in b){p=S;break e}p=void 0}(this.i=p)&&(p=this.i,b=null!==b&&p in b?b[p]:void 0),this.data=b}else this.data=p}function V7(){HR.call(this),this.status=1}function _g(p){this.g=p}(n=Di.prototype).Ha=function(p){this.J=p},n.ea=function(p,b,S,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zR.g(),this.v=function ZW(p){return p.h||(p.h=p.i())}(this.o?this.o:zR),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(ye){return void b7(this,ye)}if(p=S||"",S=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var ce in L)S.set(ce,L[ce]);else{if("function"!=typeof L.keys||"function"!=typeof L.get)throw Error("Unknown input type for opt_headers: "+String(L));for(const ye of L.keys())S.set(ye,L.get(ye))}L=Array.from(S.keys()).find(ye=>"content-type"==ye.toLowerCase()),ce=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iTe,b,void 0))||L||ce||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,je]of S)this.g.setRequestHeader(ye,je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{E7(this),this.u=!0,this.g.send(p),this.u=!1}catch(ye){b7(this,ye)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ts(this,"complete"),Ts(this,"abort"),YD(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),YD(this,!0)),Di.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?C7(this):this.bb())},n.bb=function(){C7(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Hl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&0==b.indexOf(p)&&(b=b.substring(p.length)),NDe(b)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=T7.prototype).la=8,n.G=1,n.connect=function(p,b,S,L){Ss(0),this.W=p,this.H=b||{},S&&void 0!==L&&(this.H.OSID=S,this.H.OAID=L),this.F=this.X,this.I=O7(this,null,this.W),XD(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ce=new vu(this,this.j,p);let ye=this.o;if(this.S&&(ye?(ye=M(ye),z(ye,this.S)):ye=this.S),null!==this.m||this.O||(ce.H=ye,ye=null),this.P)e:{for(var b=0,S=0;S<this.i.length;S++){var L=this.i[S];if(void 0===(L="__data__"in L.map&&"string"==typeof(L=L.map.__data__)?L.length:void 0))break;if(4096<(b+=L)){b=S;break e}if(4096===b||S===this.i.length-1){b=S+1;break e}}b=1e3}else b=1e3;b=A7(this,ce,b),ii(S=Ul(this.I),"RID",p),ii(S,"CVER",22),this.D&&ii(S,"X-HTTP-Session-Id",this.D),Ov(this,S),ye&&(this.O?b="headers="+encodeURIComponent(String(v7(ye)))+"&"+b:this.m&&YR(S,this.m,ye)),KR(this.h,ce),this.Ua&&ii(S,"TYPE","init"),this.P?(ii(S,"$req",b),ii(S,"SID","null"),ce.T=!0,WR(ce,S,null)):WR(ce,S,b),this.G=2}}else 3==this.G&&(p?I7(this,p):0==this.i.length||a7(this.h)||I7(this))},n.Fa=function(){if(this.u=null,k7(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Dv(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ss(10),QD(this),k7(this))},n.Za=function(){null!=this.C&&(this.C=null,QD(this),XR(this),Ss(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Ss(2)):(this.j.info("Failed to ping google.com"),Ss(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=F7.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},eT.prototype.g=function(p,b){return new po(p,b)},v(po,us),po.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},po.prototype.close=function(){QR(this.g)},po.prototype.o=function(p){var b=this.g;if("string"==typeof p){var S={};S.__data__=p,p=S}else this.u&&((S={}).__data__=BR(p),p=S);b.i.push(new class{constructor(p,b){this.g=p,this.map=b}}(b.Ya++,p)),3==b.G&&XD(b)},po.prototype.N=function(){this.g.l=null,delete this.j,QR(this.g),delete this.g,po.aa.N.call(this)},v(L7,UR),v(V7,HR),v(_g,F7),_g.prototype.ua=function(){Ts(this.g,"a")},_g.prototype.ta=function(p){Ts(this.g,new L7(p))},_g.prototype.sa=function(p){Ts(this.g,new V7)},_g.prototype.ra=function(){Ts(this.g,"b")},eT.prototype.createWebChannel=eT.prototype.g,po.prototype.send=po.prototype.o,po.prototype.open=po.prototype.m,po.prototype.close=po.prototype.close,cj=gl.createWebChannelTransport=function(){return new eT},lj=gl.getStatEventTarget=function(){return HD()},aj=gl.Event=yh,mx=gl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zD.NO_ERROR=0,zD.TIMEOUT=8,zD.HTTP_ERROR=6,iC=gl.ErrorCode=zD,e7.COMPLETE="complete",oj=gl.EventType=e7,KW.EventType=Cv,Cv.OPEN="a",Cv.CLOSE="b",Cv.ERROR="c",Cv.MESSAGE="d",us.prototype.listen=us.prototype.K,M_=gl.WebChannel=KW,sj=gl.FetchXmlHttpFactory=kv,Di.prototype.listenOnce=Di.prototype.L,Di.prototype.getLastError=Di.prototype.Ka,Di.prototype.getLastErrorCode=Di.prototype.Ba,Di.prototype.getStatus=Di.prototype.Z,Di.prototype.getResponseJson=Di.prototype.Oa,Di.prototype.getResponseText=Di.prototype.oa,Di.prototype.send=Di.prototype.ea,Di.prototype.setWithCredentials=Di.prototype.Ha,rj=gl.XhrIo=Di}).apply(typeof nC<"u"?nC:typeof self<"u"?self:typeof window<"u"?window:{});const uj="@firebase/firestore";class Er{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let ip="10.12.1";const Pc=new Da.Yd("@firebase/firestore");function rp(){return Pc.logLevel}function Me(n,...t){if(Pc.logLevel<=Da.in.DEBUG){const e=t.map(_x);Pc.debug(`Firestore (${ip}): ${n}`,...e)}}function Bi(n,...t){if(Pc.logLevel<=Da.in.ERROR){const e=t.map(_x);Pc.error(`Firestore (${ip}): ${n}`,...e)}}function Hs(n,...t){if(Pc.logLevel<=Da.in.WARN){const e=t.map(_x);Pc.warn(`Firestore (${ip}): ${n}`,...e)}}function _x(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Xe(n="Unexpected state"){const t=`FIRESTORE (${ip}) INTERNAL ASSERTION FAILED: `+n;throw Bi(t),new Error(t)}function it(n,t){n||Xe()}function Be(n,t){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends yn.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class dj{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Vre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Er.UNAUTHENTICATED))}shutdown(){}}class Bre{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class jre{constructor(t){this.t=t,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;t.enqueueRetryable((0,pe.Z)(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it("string"==typeof i.accessToken),new dj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return it(null===t||"string"==typeof t),new Er(t)}}class Ure{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hre{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Ure(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hj{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zre{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const i=s=>{null!=s.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(it("string"==typeof e.token),this.R=e.token,new hj(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $re(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class fj{static newId(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=$re(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function bt(n,t){return n<t?-1:n>t?1:0}function sp(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function pj(n){return n+"\0"}class li{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return li.fromMillis(Date.now())}static fromDate(t){return li.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new li(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?bt(this.nanoseconds,t.nanoseconds):bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new rt(t)}static min(){return new rt(new li(0,0))}static max(){return new rt(new li(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class P_{constructor(t,e,i){void 0===e?e=0:e>t.length&&Xe(),void 0===i?i=t.length-e:i>t.length-e&&Xe(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===P_.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof P_?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Gt extends P_{construct(t,e,i){return new Gt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ie(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Gt(e)}static emptyPath(){return new Gt([])}}const Wre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends P_{construct(t,e,i){return new Qn(t,e,i)}static isValidIdentifier(t){return Wre.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ie(fe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if("\\"===a){if(r+1===t.length)throw new Ie(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ie(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ie(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qn(e)}static emptyPath(){return new Qn([])}}class Ue{constructor(t){this.path=t}static fromPath(t){return new Ue(Gt.fromString(t))}static fromName(t){return new Ue(Gt.fromString(t).popFirst(5))}static empty(){return new Ue(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Gt.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Gt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ue(new Gt(t.slice()))}}class op{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function yx(n){return n.fields.find(t=>2===t.kind)}function vd(n){return n.fields.filter(t=>2!==t.kind)}op.UNKNOWN_ID=-1;class bd{constructor(t,e){this.fieldPath=t,this.kind=e}}class ap{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new ap(0,so.min())}}function gj(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=rt.fromTimestamp(1e9===i?new li(e+1,0):new li(e,i));return new so(r,Ue.empty(),t)}function mj(n){return new so(n.readTime,n.key,-1)}class so{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new so(rt.min(),Ue.empty(),-1)}static max(){return new so(rt.max(),Ue.empty(),-1)}}function vx(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Ue.comparator(n.documentKey,t.documentKey),0!==e?e:bt(n.largestBatchId,t.largestBatchId))}const _j="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Rc(n){return bx.apply(this,arguments)}function bx(){return(bx=(0,pe.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==_j)throw n;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class de{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new de((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof de?e:de.resolve(e)}catch(e){return de.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):de.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):de.reject(e)}static resolve(t){return new de((e,i)=>{e(t)})}static reject(t){return new de((e,i)=>{i(t)})}static waitFor(t){return new de((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},l=>i(l))}),o=!0,s===r&&e()})}static or(t){let e=de.resolve(!1);for(const i of t)e=e.next(r=>r?de.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new de((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;e(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,e){return new de((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class rC{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new cr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new R_(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=wx(i.target.error);this.V.reject(new R_(t,r))}}static open(t,e,i,r){try{return new rC(e,t.transaction(r,i))}catch(s){throw new R_(e,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Me("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Kre(e)}}class Ta{constructor(t,e,i){this.name=t,this.version=e,this.p=i,12.2===Ta.S((0,yn.z$)())&&Bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Me("SimpleDb","Removing database:",t),wd(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,yn.hl)())return!1;if(Ta.C())return!0;const t=(0,yn.z$)(),e=Ta.S(t),i=0<e&&e<10,r=vj(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.v)}static F(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(t){var e=this;return(0,pe.Z)(function*(){return e.db||(Me("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new R_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new Ie(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ie(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new R_(t,a))},s.onupgradeneeded=o=>{Me("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',o.oldVersion),e.p.O(o.target.result,s.transaction,o.oldVersion,e.version).next(()=>{Me("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.N&&(e.db.onversionchange=i=>e.N(i)),e.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,pe.Z)(function*(){const o="readonly"===e;let a=0;for(;;){++a;try{s.db=yield s.M(t);const l=rC.open(s.db,t,o?"readonly":"readwrite",i),c=r(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),de.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Me("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function vj(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class Zre{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return wd(this.B.delete())}}class R_ extends Ie{constructor(t,e){super(fe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Oc(n){return"IndexedDbTransactionError"===n.name}class Kre{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Me("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),wd(i)}add(t){return Me("SimpleDb","ADD",this.store.name,t,t),wd(this.store.add(t))}get(t){return wd(this.store.get(t)).next(e=>(void 0===e&&(e=null),Me("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Me("SimpleDb","DELETE",this.store.name,t),wd(this.store.delete(t))}count(){return Me("SimpleDb","COUNT",this.store.name),wd(this.store.count())}U(t,e){const i=this.options(t,e),r=i.index?this.store.index(i.index):this.store;if("function"==typeof r.getAll){const s=r.getAll(i.range);return new de((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new de((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(t,e){Me("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Y(t){const e=this.cursor({});return new de((i,r)=>{e.onerror=s=>{const o=wx(s.target.error);r(o)},e.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(t,e){const i=[];return new de((r,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new Zre(a),c=e(a.primaryKey,a.value,l);if(c instanceof de){const u=c.catch(f=>(l.done(),de.reject(f)));i.push(u)}l.isDone?r():null===l.K?a.continue():a.continue(l.K)}}).next(()=>de.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function wd(n){return new de((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=wx(i.target.error);e(r)}})}let bj=!1;function wx(n){const t=Ta.S((0,yn.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bj||(bj=!0,setTimeout(()=>{throw i},0)),i}}return n}class Yre{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var e=this;Me("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,pe.Z)(function*(){e.task=null;try{Me("IndexBackfiller",`Documents written: ${yield e.Z.ee()}`)}catch(i){Oc(i)?Me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield Rc(i)}yield e.X(6e4)}))}}class Qre{constructor(t,e){this.localStore=t,this.persistence=e}ee(t=50){var e=this;return(0,pe.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.te(i,t))})()}te(t,e){const i=new Set;let r=e,s=!0;return de.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(null!==o&&!i.has(o))return Me("IndexBackfiller",`Processing collection: ${o}`),this.ne(t,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>e-r)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.re(r,s)).next(a=>(Me("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}re(t,e){let i=t;return e.changes.forEach((r,s)=>{const o=mj(s);vx(o,i)>0&&(i=o)}),new so(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let oo=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function O_(n){return null==n}function N_(n){return 0===n&&1/n==-1/0}function wj(n){return"number"==typeof n&&Number.isInteger(n)&&!N_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ns(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Cj(t)),t=Xre(n.get(e),t);return Cj(t)}function Xre(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Cj(n){return n+"\x01\x01"}function Sa(n){const t=n.length;if(it(t>=2),2===t)return it("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Gt.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const o=n.indexOf("\x01",s);switch((o<0||o>e)&&Xe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:Xe()}s=o+2}return new Gt(i)}const Ej=["userId","batchId"];function sC(n,t){return[n,ns(t)]}function Dj(n,t,e){return[n,ns(t),e]}const Jre={},ese=["prefixPath","collectionGroup","readTime","documentId"],tse=["prefixPath","collectionGroup","documentId"],nse=["collectionGroup","readTime","prefixPath","documentId"],ise=["canonicalId","targetId"],rse=["targetId","path"],sse=["path","targetId"],ose=["collectionId","parent"],ase=["indexId","uid"],lse=["uid","sequenceNumber"],cse=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],use=["indexId","uid","orderedDocumentKey"],dse=["userId","collectionPath","documentId"],hse=["userId","collectionPath","largestBatchId"],fse=["userId","collectionGroup","largestBatchId"],Tj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pse=[...Tj,"documentOverlays"],Sj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ij=Sj,Aj=[...Ij,"indexConfiguration","indexState","indexEntries"],gse=Aj;class Cx extends yj{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function Dr(n,t){const e=Be(n);return Ta.F(e._e,t)}function xj(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Nc(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Mj(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class zn{constructor(t,e){this.comparator=t,this.root=e||Fr.EMPTY}insert(t,e){return new zn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(t){return new zn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new oC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new oC(this.root,t,this.comparator,!1)}getReverseIterator(){return new oC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new oC(this.root,t,this.comparator,!0)}}class oC{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fr{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Fr.RED,this.left=r??Fr.EMPTY,this.right=s??Fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Fr(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Fr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const t=this.left.check();if(t!==this.right.check())throw Xe();return t+(this.isRed()?0:1)}}Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1,Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Fr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(t){this.comparator=t,this.data=new zn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Pj(this.data.getIterator())}getIteratorFrom(t){return new Pj(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Rn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Rn(this.comparator);return e.data=t,e}}class Pj{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lp(n){return n.hasNext()?n.getNext():void 0}class zs{constructor(t){this.fields=t,t.sort(Qn.comparator)}static empty(){return new zs([])}unionWith(t){let e=new Rn(Qn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new zs(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return sp(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Rj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ur{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Rj("Invalid base64 string: "+s):s}}(t);return new ur(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new ur(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const _se=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(n){if(it(!!n),"string"==typeof n){let t=0;const e=_se.exec(n);if(it(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:bi(n.seconds),nanos:bi(n.nanos)}}function bi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _l(n){return"string"==typeof n?ur.fromBase64String(n):ur.fromUint8Array(n)}function aC(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function lC(n){const t=n.mapValue.fields.__previous_value__;return aC(t)?lC(t):t}function F_(n){const t=ml(n.mapValue.fields.__local_write_time__.timestampValue);return new li(t.seconds,t.nanos)}class yse{constructor(t,e,i,r,s,o,a,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Fc{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Fc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Fc&&t.projectId===this.projectId&&t.database===this.database}}const Lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cC={nullValue:"NULL_VALUE"};function Vc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aC(n)?4:Lj(n)?9007199254740991:10:Xe()}function Ia(n,t){if(n===t)return!0;const e=Vc(n);if(e!==Vc(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return F_(n).isEqual(F_(t));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=ml(r.timestampValue),a=ml(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return s=t,_l(n.bytesValue).isEqual(_l(s.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return bi(r.geoPointValue.latitude)===bi(s.geoPointValue.latitude)&&bi(r.geoPointValue.longitude)===bi(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return bi(r.integerValue)===bi(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=bi(r.doubleValue),a=bi(s.doubleValue);return o===a?N_(o)===N_(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return sp(n.arrayValue.values||[],t.arrayValue.values||[],Ia);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(xj(o)!==xj(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ia(o[l],a[l])))return!1;return!0}(n,t);default:return Xe()}var s}function L_(n,t){return void 0!==(n.values||[]).find(e=>Ia(e,t))}function Bc(n,t){if(n===t)return 0;const e=Vc(n),i=Vc(t);if(e!==i)return bt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,t.booleanValue);case 2:return function(s,o){const a=bi(s.integerValue||s.doubleValue),l=bi(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return Oj(n.timestampValue,t.timestampValue);case 4:return Oj(F_(n),F_(t));case 5:return bt(n.stringValue,t.stringValue);case 6:return function(s,o){const a=_l(s),l=_l(o);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=bt(a[c],l[c]);if(0!==u)return u}return bt(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){const a=bt(bi(s.latitude),bi(o.latitude));return 0!==a?a:bt(bi(s.longitude),bi(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Bc(a[c],l[c]);if(u)return u}return bt(a.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Lc.mapValue&&o===Lc.mapValue)return 0;if(s===Lc.mapValue)return 1;if(o===Lc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const m=bt(l[f],u[f]);if(0!==m)return m;const y=Bc(a[l[f]],c[u[f]]);if(0!==y)return y}return bt(l.length,u.length)}(n.mapValue,t.mapValue);default:throw Xe()}}function Oj(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return bt(n,t);const e=ml(n),i=ml(t),r=bt(e.seconds,i.seconds);return 0!==r?r:bt(e.nanos,i.nanos)}function cp(n){return Ex(n)}function Ex(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=ml(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_l(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const s of e.values||[])r?r=!1:i+=",",i+=Ex(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Ex(e.fields[o])}`;return r+"}"}(n.mapValue):Xe()}function Cd(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Dx(n){return!!n&&"integerValue"in n}function V_(n){return!!n&&"arrayValue"in n}function Nj(n){return!!n&&"nullValue"in n}function Fj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dC(n){return!!n&&"mapValue"in n}function B_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Nc(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=B_(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=B_(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Lj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vse(n){return"nullValue"in n?cC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cd(Fc.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function bse(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cd(Fc.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Lc:Xe()}function Vj(n,t){const e=Bc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function Bj(n,t){const e=Bc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Lr{constructor(t){this.value=t}static empty(){return new Lr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!dC(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=B_(e)}setAll(t){let e=Qn.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=B_(o):r.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());dC(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ia(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];dC(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Nc(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Lr(B_(this.value))}}function jj(n){const t=[];return Nc(n.fields,(e,i)=>{const r=new Qn([e]);if(dC(i)){const s=jj(i.mapValue).fields;if(0===s.length)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new zs(t)}class Xn{constructor(t,e,i,r,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Xn(t,0,rt.min(),rt.min(),rt.min(),Lr.empty(),0)}static newFoundDocument(t,e,i,r){return new Xn(t,1,e,rt.min(),i,r,0)}static newNoDocument(t,e){return new Xn(t,2,e,rt.min(),rt.min(),Lr.empty(),0)}static newUnknownDocument(t,e){return new Xn(t,3,e,rt.min(),rt.min(),Lr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(rt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Xn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jc{constructor(t,e){this.position=t,this.inclusive=e}}function Uj(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],o=n.position[r];if(i=s.field.isKeyField()?Ue.comparator(Ue.fromName(o.referenceValue),e.key):Bc(o,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Hj(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ia(n.position[e],t.position[e]))return!1;return!0}class j_{constructor(t,e="asc"){this.field=t,this.dir=e}}function wse(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class zj{}class Zt extends zj{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new Cse(t,e,i):"array-contains"===e?new Tse(t,i):"in"===e?new Kj(t,i):"not-in"===e?new Sse(t,i):"array-contains-any"===e?new Ise(t,i):new Zt(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new Ese(t,i):new Dse(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Bc(e,this.value)):null!==e&&Vc(this.value)===Vc(e)&&this.matchesComparison(Bc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends zj{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new En(t,e)}matches(t){return up(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function up(n){return"and"===n.op}function Tx(n){return"or"===n.op}function Sx(n){return $j(n)&&up(n)}function $j(n){for(const t of n.filters)if(t instanceof En)return!1;return!0}function Ix(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+cp(n.value);if(Sx(n))return n.filters.map(t=>Ix(t)).join(",");{const t=n.filters.map(e=>Ix(e)).join(",");return`${n.op}(${t})`}}function Wj(n,t){return n instanceof Zt?(i=n,(r=t)instanceof Zt&&i.op===r.op&&i.field.isEqual(r.field)&&Ia(i.value,r.value)):n instanceof En?function(i,r){return r instanceof En&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((s,o,a)=>s&&Wj(o,r.filters[a]),!0)}(n,t):void Xe();var i,r}function qj(n,t){const e=n.filters.concat(t);return En.create(e,n.op)}function Gj(n){return n instanceof Zt?`${(e=n).field.canonicalString()} ${e.op} ${cp(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(Gj).join(" ,")+"}"}(n):"Filter";var e}class Cse extends Zt{constructor(t,e,i){super(t,e,i),this.key=Ue.fromName(i.referenceValue)}matches(t){const e=Ue.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ese extends Zt{constructor(t,e){super(t,"in",e),this.keys=Zj(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Dse extends Zt{constructor(t,e){super(t,"not-in",e),this.keys=Zj(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Zj(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Ue.fromName(i.referenceValue))}class Tse extends Zt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return V_(e)&&L_(e.arrayValue,this.value)}}class Kj extends Zt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&L_(this.value.arrayValue,e)}}class Sse extends Zt{constructor(t,e){super(t,"not-in",e)}matches(t){if(L_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!L_(this.value.arrayValue,e)}}class Ise extends Zt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!V_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>L_(this.value.arrayValue,i))}}class Ase{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ax(n,t=null,e=[],i=[],r=null,s=null,o=null){return new Ase(n,t,e,i,r,s,o)}function Ed(n){const t=Be(n);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Ix(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),O_(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>cp(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>cp(i)).join(",")),t.ue=e}return t.ue}function U_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!wse(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Wj(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Hj(n.startAt,t.startAt)&&Hj(n.endAt,t.endAt)}function hC(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fC(n,t){return n.filters.filter(e=>e instanceof Zt&&e.field.isEqual(t))}function Yj(n,t,e){let i=cC,r=!0;for(const s of fC(n,t)){let o=cC,a=!0;switch(s.op){case"<":case"<=":o=vse(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=cC}Vj({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const o=e.position[s];Vj({value:i,inclusive:r},{value:o,inclusive:e.inclusive})<0&&(i=o,r=e.inclusive);break}return{value:i,inclusive:r}}function Qj(n,t,e){let i=Lc,r=!0;for(const s of fC(n,t)){let o=Lc,a=!0;switch(s.op){case">=":case">":o=bse(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Lc}Bj({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const o=e.position[s];Bj({value:i,inclusive:r},{value:o,inclusive:e.inclusive})>0&&(i=o,r=e.inclusive);break}return{value:i,inclusive:r}}class yl{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function Xj(n,t,e,i,r,s,o,a){return new yl(n,t,e,i,r,s,o,a)}function dp(n){return new yl(n)}function Jj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function xx(n){return null!==n.collectionGroup}function hp(n){const t=Be(n);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rn(Qn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new j_(s,i))}),e.has(Qn.keyField().canonicalString())||t.ce.push(new j_(Qn.keyField(),i))}return t.ce}function is(n){const t=Be(n);return t.le||(t.le=function tU(n,t){if("F"===n.limitType)return Ax(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>new j_(r.field,"desc"===r.dir?"asc":"desc"));const e=n.endAt?new jc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new jc(n.startAt.position,n.startAt.inclusive):null;return Ax(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}(t,hp(n))),t.le}function kx(n,t){const e=n.filters.concat([t]);return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function pC(n,t,e){return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function H_(n,t){return U_(is(n),is(t))&&n.limitType===t.limitType}function nU(n){return`${Ed(is(n))}|lt:${n.limitType}`}function fp(n){return`Query(target=${function(e){let i=e.path.canonicalString();return null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>Gj(r)).join(", ")}]`),O_(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>cp(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>cp(r)).join(",")),`Target(${i})`}(is(n))}; limitType=${n.limitType})`}function z_(n,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Ue.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(const s of hp(i))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&(r=t,!((i=n).startAt&&!function(o,a,l){const c=Uj(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,hp(i),r)||i.endAt&&!function(o,a,l){const c=Uj(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,hp(i),r)));var i,r}function iU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rU(n){return(t,e)=>{let i=!1;for(const r of hp(n)){const s=xse(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function xse(n,t,e){const i=n.field.isKeyField()?Ue.comparator(t.key,e.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Bc(l,c):Xe()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Xe()}}class vl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Nc(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Mj(this.inner)}size(){return this.innerSize}}const kse=new zn(Ue.comparator);function $s(){return kse}const sU=new zn(Ue.comparator);function $_(...n){let t=sU;for(const e of n)t=t.insert(e.key,e);return t}function oU(n){let t=sU;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Aa(){return W_()}function aU(){return W_()}function W_(){return new vl(n=>n.toString(),(n,t)=>n.isEqual(t))}const Mse=new zn(Ue.comparator),Pse=new Rn(Ue.comparator);function It(...n){let t=Pse;for(const e of n)t=t.add(e);return t}const Rse=new Rn(bt);function Mx(){return Rse}function lU(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:N_(t)?"-0":t}}function cU(n){return{integerValue:""+n}}function uU(n,t){return wj(t)?cU(t):lU(n,t)}class gC{constructor(){this._=void 0}}function Ose(n,t,e){return n instanceof pp?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&aC(s)&&(s=lC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof Dd?hU(n,t):n instanceof Td?fU(n,t):function(r,s){const o=dU(r,s),a=pU(o)+pU(r.Pe);return Dx(o)&&Dx(r.Pe)?cU(a):lU(r.serializer,a)}(n,t)}function Nse(n,t,e){return n instanceof Dd?hU(n,t):n instanceof Td?fU(n,t):e}function dU(n,t){return n instanceof gp?Dx(i=t)||(s=i)&&"doubleValue"in s?t:{integerValue:0}:null;var i,s}class pp extends gC{}class Dd extends gC{constructor(t){super(),this.elements=t}}function hU(n,t){const e=gU(t);for(const i of n.elements)e.some(r=>Ia(r,i))||e.push(i);return{arrayValue:{values:e}}}class Td extends gC{constructor(t){super(),this.elements=t}}function fU(n,t){let e=gU(t);for(const i of n.elements)e=e.filter(r=>!Ia(r,i));return{arrayValue:{values:e}}}class gp extends gC{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function pU(n){return bi(n.integerValue||n.doubleValue)}function gU(n){return V_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class q_{constructor(t,e){this.field=t,this.transform=e}}class Lse{constructor(t,e){this.version=t,this.transformResults=e}}class ci{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ci}static exists(t){return new ci(void 0,t)}static updateTime(t){return new ci(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function mC(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class _C{}function mU(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new _p(n.key,ci.none()):new mp(n.key,n.data,ci.none());{const e=n.data,i=Lr.empty();let r=new Rn(Qn.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);null===o&&s.length>1&&(s=s.popLast(),o=e.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new bl(n.key,i,new zs(r.toArray()),ci.none())}}function Vse(n,t,e){n instanceof mp?function(r,s,o){const a=r.value.clone(),l=vU(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof bl?function(r,s,o){if(!mC(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=vU(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(yU(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function G_(n,t,e,i){return n instanceof mp?function(s,o,a,l){if(!mC(s.precondition,o))return a;const c=s.value.clone(),u=bU(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,t,e,i):n instanceof bl?function(s,o,a,l){if(!mC(s.precondition,o))return a;const c=bU(s.fieldTransforms,l,o),u=o.data;return u.setAll(yU(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,t,e,i):(a=e,mC(n.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Bse(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=dU(i.transform,r||null);null!=s&&(null===e&&(e=Lr.empty()),e.set(i.field,s))}return e||null}function _U(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&sp(i,r,(s,o)=>function Fse(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(i=n.transform)instanceof Dd&&r instanceof Dd||i instanceof Td&&r instanceof Td?sp(i.elements,r.elements,Ia):i instanceof gp&&r instanceof gp?Ia(i.Pe,r.Pe):i instanceof pp&&r instanceof pp);var i,r}(s,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var i,r}class mp extends _C{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bl extends _C{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yU(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function vU(n,t,e){const i=new Map;it(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,Nse(o,a,e[r]))}return i}function bU(n,t,e){const i=new Map;for(const r of n){const s=r.transform,o=e.data.field(r.field);i.set(r.field,Ose(s,o,t))}return i}class _p extends _C{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Px extends _C{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rx{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Vse(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=G_(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=G_(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=aU();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;const l=mU(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(rt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),It())}isEqual(t){return this.batchId===t.batchId&&sp(this.mutations,t.mutations,(e,i)=>_U(e,i))&&sp(this.baseMutations,t.baseMutations,(e,i)=>_U(e,i))}}class Ox{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){it(t.mutations.length===i.length);let r=Mse;const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Ox(t,e,i,r)}}class Nx{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jse{constructor(t,e){this.count=t,this.unchangedNames=e}}var Yi,en;function CU(n){switch(n){default:return Xe();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function EU(n){if(void 0===n)return Bi("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Yi.OK:return fe.OK;case Yi.CANCELLED:return fe.CANCELLED;case Yi.UNKNOWN:return fe.UNKNOWN;case Yi.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Yi.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Yi.INTERNAL:return fe.INTERNAL;case Yi.UNAVAILABLE:return fe.UNAVAILABLE;case Yi.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Yi.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Yi.NOT_FOUND:return fe.NOT_FOUND;case Yi.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Yi.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Yi.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Yi.ABORTED:return fe.ABORTED;case Yi.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Yi.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Yi.DATA_LOSS:return fe.DATA_LOSS;default:return Xe()}}(en=Yi||(Yi={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";function DU(){return new TextEncoder}const Use=new yd([4294967295,4294967295],0);function TU(n){const t=DU().encode(n),e=new ij;return e.update(t),new Uint8Array(e.digest())}function SU(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new yd([e,i],0),new yd([r,s],0)]}class Fx{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Z_(`Invalid padding: ${e}`);if(i<0)throw new Z_(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new Z_(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new Z_(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=yd.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(yd.fromNumber(i)));return 1===r.compare(Use)&&(r=new yd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=TU(t),[i,r]=SU(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Fx(s,r,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(0===this.Ie)return;const e=TU(t),[i,r]=SU(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class Z_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class K_{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Y_.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new K_(rt.min(),r,new zn(bt),$s(),It())}}class Y_{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Y_(i,e,It(),It(),It())}}class vC{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}}class IU{constructor(t,e){this.targetId=t,this.me=e}}class AU{constructor(t,e,i=ur.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class xU{constructor(){this.fe=0,this.ge=MU(),this.pe=ur.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=It(),e=It(),i=It();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Xe()}}),new Y_(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=MU()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,it(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Hse{constructor(t){this.Le=t,this.Be=new Map,this.ke=$s(),this.qe=kU(),this.Qe=new zn(bt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:Xe()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,i=t.me.count,r=this.Je(e);if(r){const s=r.target;if(hC(s))if(0===i){const o=new Ue(s.path);this.Ue(e,o,Xn.newNoDocument(o,rt.min()))}else it(1===i);else{const o=this.Ye(e);if(o!==i){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;0!==l&&(this.je(e),this.Qe=this.Qe.insert(e,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e;let o,a;try{o=_l(i).toUint8Array()}catch(l){if(l instanceof Rj)return Hs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Fx(o,r,s)}catch(l){return Hs(l instanceof Z_?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&hC(a.target)){const l=new Ue(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Xn.newNoDocument(l,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let i=It();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new K_(t,e,this.Qe,this.ke,i);return this.ke=$s(),this.qe=kU(),this.Qe=new zn(bt),r}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new xU,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Rn(bt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||Me("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new xU),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function kU(){return new zn(Ue.comparator)}function MU(){return new zn(Ue.comparator)}const zse={asc:"ASCENDING",desc:"DESCENDING"},$se={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wse={and:"AND",or:"OR"};class qse{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Lx(n,t){return n.useProto3Json||O_(t)?t:{value:t}}function yp(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function PU(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Gse(n,t){return yp(n,t.toTimestamp())}function ji(n){return it(!!n),rt.fromTimestamp(function(e){const i=ml(e);return new li(i.seconds,i.nanos)}(n))}function Vx(n,t){return Bx(n,t).canonicalString()}function Bx(n,t){const e=(r=n,new Gt(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?e:e.child(t)}function RU(n){const t=Gt.fromString(n);return it($U(t)),t}function Q_(n,t){return Vx(n.databaseId,t.path)}function xa(n,t){const e=RU(t);if(e.get(1)!==n.databaseId.projectId)throw new Ie(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ie(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ue(FU(e))}function OU(n,t){return Vx(n.databaseId,t)}function NU(n){const t=RU(n);return 4===t.length?Gt.emptyPath():FU(t)}function jx(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FU(n){return it(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function LU(n,t,e){return{name:Q_(n,t),fields:e.value.mapValue.fields}}function VU(n,t,e){const i=xa(n,t.name),r=ji(t.updateTime),s=t.createTime?ji(t.createTime):rt.min(),o=new Lr({mapValue:{fields:t.fields}}),a=Xn.newFoundDocument(i,r,s,o);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function X_(n,t){let e;if(t instanceof mp)e={update:LU(n,t.key,t.value)};else if(t instanceof _p)e={delete:Q_(n,t.key)};else if(t instanceof bl)e={update:LU(n,t.key,t.data),updateMask:toe(t.fieldMask)};else{if(!(t instanceof Px))return Xe();e={verify:Q_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof pp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Td)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Xe()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(s=t.precondition).updateTime?{updateTime:Gse(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Xe()),e;var s}function Ux(n,t){const e=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?ci.updateTime(ji(s.updateTime)):void 0!==s.exists?ci.exists(s.exists):ci.none():ci.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,a){let l=null;"setToServerValue"in a?(it("REQUEST_TIME"===a.setToServerValue),l=new pp):"appendMissingElements"in a?l=new Dd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Td(a.removeAllFromArray.values||[]):"increment"in a?l=new gp(o,a.increment):Xe();const c=Qn.fromServerFormat(a.fieldPath);return new q_(c,l)}(n,r)):[];var s;if(t.update){const r=xa(n,t.update.name),s=new Lr({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=new zs((t.updateMask.fieldPaths||[]).map(u=>Qn.fromServerFormat(u)));return new bl(r,s,o,e,i)}return new mp(r,s,e,i)}if(t.delete){const r=xa(n,t.delete);return new _p(r,e)}if(t.verify){const r=xa(n,t.verify);return new Px(r,e)}return Xe()}function BU(n,t){return{documents:[OU(n,t.path)]}}function bC(n,t){const e={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=OU(n,r);const s=function(c){if(0!==c.length)return zU(En.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Uc((m=u).field),direction:Xse(m.dir)};var m})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=Lx(n,t.limit);return null!==a&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r};var c}function UU(n){let t=NU(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){it(1===i);const u=e.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];e.where&&(s=function(f){const m=HU(f);return m instanceof En&&Sx(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=e.orderBy.map(m=>{return new j_(vp((v=m).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;e.limit&&(a=function(f){let m;return m="object"==typeof f?f.value:f,O_(m)?null:m}(e.limit));let l=null;var f;e.startAt&&(l=new jc((f=e.startAt).values||[],!!f.before));let c=null;return e.endAt&&(c=function(f){return new jc(f.values||[],!f.before)}(e.endAt)),Xj(t,r,o,s,a,"F",l,c)}function HU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=vp(e.unaryFilter.field);return Zt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=vp(e.unaryFilter.field);return Zt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vp(e.unaryFilter.field);return Zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vp(e.unaryFilter.field);return Zt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}(n):void 0!==n.fieldFilter?Zt.create(vp((e=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(i=>HU(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Xe()}}(e.compositeFilter.op))}(n):Xe();var e}function Xse(n){return zse[n]}function Jse(n){return $se[n]}function eoe(n){return Wse[n]}function Uc(n){return{fieldPath:n.canonicalString()}}function vp(n){return Qn.fromServerFormat(n.fieldPath)}function zU(n){return n instanceof Zt?function(e){if("=="===e.op){if(Fj(e.value))return{unaryFilter:{field:Uc(e.field),op:"IS_NAN"}};if(Nj(e.value))return{unaryFilter:{field:Uc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fj(e.value))return{unaryFilter:{field:Uc(e.field),op:"IS_NOT_NAN"}};if(Nj(e.value))return{unaryFilter:{field:Uc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uc(e.field),op:Jse(e.op),value:e.value}}}(n):n instanceof En?function(e){const i=e.getFilters().map(r=>zU(r));return 1===i.length?i[0]:{compositeFilter:{op:eoe(e.op),filters:i}}}(n):Xe()}function toe(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function $U(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class wl{constructor(t,e,i,r,s=rt.min(),o=rt.min(),a=ur.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new wl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class WU{constructor(t){this.ct=t}}function qU(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:wC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:Q_(s=n.ct,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:yp(s,o.version.toTimestamp()),createTime:yp(s,o.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Sd(t.version)};else{if(!t.isUnknownDocument())return Xe();i.unknownDocument={path:e.path.toArray(),version:Sd(t.version)}}var s,o;return i}function wC(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Sd(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Id(n){const t=new li(n.seconds,n.nanoseconds);return rt.fromTimestamp(t)}function Ad(n,t){const e=(t.baseMutations||[]).map(s=>Ux(n.ct,s));for(let s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);const i=t.mutations.map(s=>Ux(n.ct,s)),r=li.fromMillis(t.localWriteTimeMs);return new Rx(t.batchId,r,e,i)}function J_(n){const t=Id(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Id(n.lastLimboFreeSnapshotVersion):rt.min();let i;return i=void 0!==n.query.documents?(it(1===(s=n.query).documents.length),is(dp(NU(s.documents[0])))):function(s){return is(UU(s))}(n.query),new wl(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,ur.fromBase64String(n.resumeToken));var s}function GU(n,t){const e=Sd(t.snapshotVersion),i=Sd(t.lastLimboFreeSnapshotVersion);let r;r=hC(t.target)?BU(n.ct,t.target):bC(n.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ed(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Hx(n){const t=UU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?pC(t,t.limit,"L"):t}function zx(n,t){return new Nx(t.largestBatchId,Ux(n.ct,t.overlayMutation))}function ZU(n,t){const e=t.path.lastSegment();return[n,ns(t.path.popLast()),e]}function KU(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:Sd(i.readTime),documentKey:ns(i.documentKey.path),largestBatchId:i.largestBatchId}}class ioe{getBundleMetadata(t,e){return YU(t).get(e).next(i=>{if(i)return{id:(s=i).bundleId,createTime:Id(s.createTime),version:s.version};var s})}saveBundleMetadata(t,e){return YU(t).put({bundleId:(r=e).id,createTime:Sd(ji(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return QU(t).get(e).next(i=>{if(i)return{name:(s=i).name,query:Hx(s.bundledQuery),readTime:Id(s.readTime)};var s})}saveNamedQuery(t,e){return QU(t).put({name:(r=e).name,readTime:Sd(ji(r.readTime)),bundledQuery:r.bundledQuery});var r}}function YU(n){return Dr(n,"bundles")}function QU(n){return Dr(n,"namedQueries")}class CC{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){return new CC(t,e.uid||"")}getOverlay(t,e){return ey(t).get(ZU(this.userId,e)).next(i=>i?zx(this.serializer,i):null)}getOverlays(t,e){const i=Aa();return de.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,o)=>{const a=new Nx(e,o);r.push(this.ht(t,a))}),de.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(o=>r.add(ns(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(ey(t).j("collectionPathOverlayIndex",a))}),de.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Aa(),s=ns(e),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ey(t).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=zx(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Aa();let o;const a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ey(t).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const f=zx(this.serializer,c);s.size()<r||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):u.done()}).next(()=>s)}ht(t,e){return ey(t).put(function(r,s,o){const[a,l,c]=ZU(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:X_(r.ct,o.mutation)}}(this.serializer,this.userId,e))}}function ey(n){return Dr(n,"documentOverlays")}class xd{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(bi(t.integerValue));else if("doubleValue"in t){const i=bi(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),N_(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),"string"==typeof i&&(i=ml(i)),e.At(`${i.seconds||""}`),e.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(_l(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?Lj(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Xe()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const i=t.fields||{};this.Et(e,55);for(const r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){const i=t.values||[];this.Et(e,50);for(const r of i)this.It(r,e)}gt(t,e){this.Et(e,37),Ue.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}function roe(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function XU(n){const t=64-function(i){let r=0;for(let s=0;s<8;++s){const o=roe(255&i[s]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(t/8)}xd.bt=new xd;class soe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ct(i.value),i=e.next();this.vt()}Ft(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Mt(i.value),i=e.next();this.xt()}Ot(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{const r=e.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{const r=e.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(t){const e=this.Bt(t),i=XU(e);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}qt(t){const e=this.Bt(t),i=XU(e);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Bt(t){const e=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ct(t){const e=255&t;0===e?(this.Kt(0),this.Kt(255)):255===e?(this.Kt(255),this.Kt(0)):this.Kt(e)}Mt(t){const e=255&t;0===e?(this.Ut(0),this.Ut(255)):255===e?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class ooe{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Lt(t)}Tt(){this.Gt.Qt()}}class aoe{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}}class ty{constructor(){this.Gt=new soe,this.zt=new ooe(this.Gt),this.jt=new aoe(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return 0===t?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class kd{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Jt(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new kd(this.indexId,this.documentKey,this.arrayValue,i)}}function Hc(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=JU(n.arrayValue,t.arrayValue),0!==e?e:(e=JU(n.directionalValue,t.directionalValue),0!==e?e:Ue.comparator(n.documentKey,t.documentKey)))}function JU(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class e4{constructor(t){this.Yt=new Rn((e,i)=>Qn.comparator(e.field,i.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(const e of t.filters){const i=e;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(t){if(it(t.collectionGroup===this.collectionId),this.en)return!1;const e=yx(t);if(void 0!==e&&!this.nn(e))return!1;const i=vd(t);let r=new Set,s=0,o=0;for(;s<i.length&&this.nn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<i.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],i[s]))return!1;return!0}on(){if(this.en)return null;let t=new Rn(Qn.comparator);const e=[];for(const i of this.Xt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)e.push(new bd(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new bd(i.field,0))}for(const i of this.Zt)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new bd(i.field,"asc"===i.dir?0:1)));return new op(op.UNKNOWN_ID,this.collectionId,e,ap.empty())}nn(t){for(const e of this.Xt)if(this.rn(e,t))return!0;return!1}rn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function t4(n){var t,e;if(it(n instanceof Zt||n instanceof En),n instanceof Zt){if(n instanceof Kj){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>Zt.create(n.field,"==",s)))||[];return En.create(r,"or")}return n}const i=n.filters.map(r=>t4(r));return En.create(i,n.op)}function loe(n){if(0===n.getFilters().length)return[];const t=qx(t4(n));return it(n4(t)),$x(t)||Wx(t)?[t]:t.getFilters()}function $x(n){return n instanceof Zt}function Wx(n){return n instanceof En&&Sx(n)}function n4(n){return $x(n)||Wx(n)||function(e){if(e instanceof En&&Tx(e)){for(const i of e.getFilters())if(!$x(i)&&!Wx(i))return!1;return!0}return!1}(n)}function qx(n){if(it(n instanceof Zt||n instanceof En),n instanceof Zt)return n;if(1===n.filters.length)return qx(n.filters[0]);const t=n.filters.map(i=>qx(i));let e=En.create(t,n.op);return e=EC(e),n4(e)?e:(it(e instanceof En),it(up(e)),it(e.filters.length>1),e.filters.reduce((i,r)=>Gx(i,r)))}function Gx(n,t){let e;return it(n instanceof Zt||n instanceof En),it(t instanceof Zt||t instanceof En),e=n instanceof Zt?t instanceof Zt?En.create([n,t],"and"):i4(n,t):t instanceof Zt?i4(t,n):function(r,s){if(it(r.filters.length>0&&s.filters.length>0),up(r)&&up(s))return qj(r,s.getFilters());const o=Tx(r)?r:s,a=Tx(r)?s:r,l=o.filters.map(c=>Gx(c,a));return En.create(l,"or")}(n,t),EC(e)}function i4(n,t){if(up(t))return qj(t,n.getFilters());{const e=t.filters.map(i=>Gx(n,i));return En.create(e,"or")}}function EC(n){if(it(n instanceof Zt||n instanceof En),n instanceof Zt)return n;const t=n.getFilters();if(1===t.length)return EC(t[0]);if($j(n))return n;const e=t.map(r=>EC(r)),i=[];return e.forEach(r=>{r instanceof Zt?i.push(r):r instanceof En&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:En.create(i,n.op)}class coe{constructor(){this._n=new Zx}addToCollectionParentIndex(t,e){return this._n.add(e),de.resolve()}getCollectionParents(t,e){return de.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return de.resolve()}deleteFieldIndex(t,e){return de.resolve()}deleteAllFieldIndexes(t){return de.resolve()}createTargetIndexes(t,e){return de.resolve()}getDocumentsMatchingTarget(t,e){return de.resolve(null)}getIndexType(t,e){return de.resolve(0)}getFieldIndexes(t,e){return de.resolve([])}getNextCollectionGroupToUpdate(t){return de.resolve(null)}getMinOffset(t,e){return de.resolve(so.min())}getMinOffsetFromCollectionGroup(t,e){return de.resolve(so.min())}updateCollectionGroup(t,e,i){return de.resolve()}updateIndexEntries(t,e){return de.resolve()}}class Zx{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Rn(Gt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Rn(Gt.comparator)).toArray()}}const DC=new Uint8Array(0);class uoe{constructor(t,e){this.databaseId=e,this.an=new Zx,this.un=new vl(i=>Ed(i),(i,r)=>U_(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.an.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.an.add(e)});const s={collectionId:i,parent:ns(r)};return r4(t).put(s)}return de.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[pj(e),""],!1,!0);return r4(t).U(r).next(s=>{for(const o of s){if(o.collectionId!==e)break;i.push(Sa(o.parent))}return i})}addFieldIndex(t,e){const i=ny(t),r={indexId:(a=e).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const s=i.add(r);if(e.indexState){const o=wp(t);return s.next(a=>{o.put(KU(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=ny(t),r=wp(t),s=bp(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=ny(t),i=bp(t),r=wp(t);return e.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(t,e){return de.forEach(this.cn(e),i=>this.getIndexType(t,i).next(r=>{if(0===r||1===r){const s=new e4(i).on();if(null!=s)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const i=bp(t);let r=!0;const s=new Map;return de.forEach(this.cn(e),o=>this.ln(t,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=It();const a=[];return de.forEach(s,(l,c)=>{var O;Me("IndexedDbIndexManager",`Using index ${O=l,`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`} to execute ${Ed(e)}`);const u=function(O,W){const K=yx(W);if(void 0===K)return null;for(const re of fC(O,K.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(c,l),f=function(O,W){const K=new Map;for(const re of vd(W))for(const V of fC(O,re.fieldPath))switch(V.op){case"==":case"in":K.set(re.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return K.set(re.fieldPath.canonicalString(),V.value),Array.from(K.values())}return null}(c,l),m=function(O,W){const K=[];let re=!0;for(const V of vd(W)){const M=0===V.kind?Yj(O,V.fieldPath,O.startAt):Qj(O,V.fieldPath,O.startAt);K.push(M.value),re&&(re=M.inclusive)}return new jc(K,re)}(c,l),y=function(O,W){const K=[];let re=!0;for(const V of vd(W)){const M=0===V.kind?Qj(O,V.fieldPath,O.endAt):Yj(O,V.fieldPath,O.endAt);K.push(M.value),re&&(re=M.inclusive)}return new jc(K,re)}(c,l),v=this.hn(l,c,m),w=this.hn(l,c,y),D=this.Pn(l,c,f),P=this.In(l.indexId,u,v,m.inclusive,w,y.inclusive,D);return de.forEach(P,I=>i.G(I,e.limit).next(O=>{O.forEach(W=>{const K=Ue.fromSegments(W.documentKey);o.has(K)||(o=o.add(K),a.push(K))})}))}).next(()=>a)}return de.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:loe(En.create(t.filters,"and")).map(i=>Ax(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}In(t,e,i,r,s,o,a){const l=(null!=e?e.length:1)*Math.max(i.length,s.length),c=l/(null!=e?e.length:1),u=[];for(let f=0;f<l;++f){const m=e?this.Tn(e[f/c]):DC,y=this.En(t,m,i[f%c],r),v=this.dn(t,m,s[f%c],o),w=a.map(D=>this.En(t,m,D,!0));u.push(...this.createRange(y,v,w))}return u}En(t,e,i,r){const s=new kd(t,Ue.empty(),e,i);return r?s:s.Jt()}dn(t,e,i,r){const s=new kd(t,Ue.empty(),e,i);return r?s.Jt():s}ln(t,e){const i=new e4(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let o=null;for(const a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let i=2;const r=this.cn(e);return de.forEach(r,s=>this.ln(t,s).next(o=>{o?0!==i&&o.fields.length<function(l){let c=new Rn(Qn.comparator),u=!1;for(const f of l.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?u=!0:c=c.add(m.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}An(t,e){const i=new ty;for(const r of vd(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const o=i.Ht(r.kind);xd.bt.Pt(s,o)}return i.Wt()}Tn(t){const e=new ty;return xd.bt.Pt(t,e.Ht(0)),e.Wt()}Rn(t,e){const i=new ty;return xd.bt.Pt(Cd(this.databaseId,e),i.Ht(function(s){const o=vd(s);return 0===o.length?0:o[o.length-1].kind}(t))),i.Wt()}Pn(t,e,i){if(null===i)return[];let r=[];r.push(new ty);let s=0;for(const o of vd(t)){const a=i[s++];for(const l of r)if(this.Vn(e,o.fieldPath)&&V_(a))r=this.mn(r,o,a);else{const c=l.Ht(o.kind);xd.bt.Pt(a,c)}}return this.fn(r)}hn(t,e,i){return this.Pn(t,e,i.position)}fn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Wt();return e}mn(t,e,i){const r=[...t],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new ty;l.seed(a.Wt()),xd.bt.Pt(o,l.Ht(e.kind)),s.push(l)}return s}Vn(t,e){return!!t.filters.find(i=>i instanceof Zt&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=ny(t),r=wp(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(s=>{const o=[];return de.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(u,f){const m=f?new ap(f.sequenceNumber,new so(Id(f.readTime),new Ue(Sa(f.documentKey)),f.largestBatchId)):ap.empty(),y=u.fields.map(([v,w])=>new bd(Qn.fromServerFormat(v),w));return new op(u.indexId,u.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:bt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=ny(t),s=wp(t);return this.gn(t).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>de.forEach(a,l=>s.put(KU(l.indexId,this.uid,o,i)))))}updateIndexEntries(t,e){const i=new Map;return de.forEach(e,(r,s)=>{const o=i.get(r.collectionGroup);return(o?de.resolve(o):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),de.forEach(a,l=>this.pn(t,r,l).next(c=>{const u=this.yn(s,l);return c.isEqual(u)?de.resolve():this.wn(t,s,l,c,u)}))))})}Sn(t,e,i,r){return bp(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,e.key),documentKey:e.key.path.toArray()})}bn(t,e,i,r){return bp(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,e.key),e.key.path.toArray()])}pn(t,e,i){const r=bp(t);let s=new Rn(Hc);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,e)])},(o,a)=>{s=s.add(new kd(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(t,e){let i=new Rn(Hc);const r=this.An(e,t);if(null==r)return i;const s=yx(e);if(null!=s){const o=t.data.field(s.fieldPath);if(V_(o))for(const a of o.arrayValue.values||[])i=i.add(new kd(e.indexId,t.key,this.Tn(a),r))}else i=i.add(new kd(e.indexId,t.key,DC,r));return i}wn(t,e,i,r,s){Me("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const o=[];return function(l,c,u,f,m){const y=l.getIterator(),v=c.getIterator();let w=lp(y),D=lp(v);for(;w||D;){let P=!1,I=!1;if(w&&D){const O=u(w,D);O<0?I=!0:O>0&&(P=!0)}else null!=w?I=!0:P=!0;P?(f(D),D=lp(v)):I?(m(w),w=lp(y)):(w=lp(y),D=lp(v))}}(r,s,Hc,a=>{o.push(this.Sn(t,e,i,a))},a=>{o.push(this.bn(t,e,i,a))}),de.waitFor(o)}gn(t){let e=1;return wp(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,a)=>Hc(o,a)).filter((o,a,l)=>!a||0!==Hc(o,l[a-1]));const r=[];r.push(t);for(const o of i){const a=Hc(o,t),l=Hc(o,e);if(0===a)r[0]=t.Jt();else if(a>0&&l<0)r.push(o),r.push(o.Jt());else if(l>0)break}r.push(e);const s=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,DC,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,DC,[]]))}return s}Dn(t,e){return Hc(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(s4)}getMinOffset(t,e){return de.mapArray(this.cn(e),i=>this.ln(t,i).next(r=>r||Xe())).next(s4)}}function r4(n){return Dr(n,"collectionParents")}function bp(n){return Dr(n,"indexEntries")}function ny(n){return Dr(n,"indexConfiguration")}function wp(n){return Dr(n,"indexState")}function s4(n){it(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;vx(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new so(t.readTime,t.documentKey,e)}const o4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rs{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new rs(t,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function a4(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(e.batchId);let a=0;const l=i.J({range:o},(u,f,m)=>(a++,m.delete()));s.push(l.next(()=>{it(1===a)}));const c=[];for(const u of e.mutations){const f=Dj(t,u.key.path,e.batchId);s.push(r.delete(f)),c.push(u.key)}return de.waitFor(s).next(()=>c)}function TC(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Xe();t=n.noDocument}return JSON.stringify(t).length}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class SC{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(t,e,i,r){it(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new SC(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zc(t).J({index:"userMutationsIndex",range:i},(r,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Cp(t),o=zc(t);return o.add({}).next(a=>{it("number"==typeof a);const l=new Rx(a,e,i,r),c=function(y,v,w){const D=w.baseMutations.map(I=>X_(y.ct,I)),P=w.mutations.map(I=>X_(y.ct,I));return{userId:v,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:D,mutations:P}}(this.serializer,this.userId,l),u=[];let f=new Rn((m,y)=>bt(m.canonicalString(),y.canonicalString()));for(const m of r){const y=Dj(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),u.push(o.put(c)),u.push(s.put(y,Jre))}return f.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),de.waitFor(u).next(()=>l)})}lookupMutationBatch(t,e){return zc(t).get(e).next(i=>i?(it(i.userId===this.userId),Ad(this.serializer,i)):null)}vn(t,e){return this.Cn[e]?de.resolve(this.Cn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Cn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return zc(t).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(it(a.batchId>=i),s=Ad(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return zc(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zc(t).U("userMutationsIndex",e).next(i=>i.map(r=>Ad(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=sC(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Cp(t).J({range:r},(o,a,l)=>{const[c,u,f]=o,m=Sa(u);if(c===this.userId&&e.path.isEqual(m))return zc(t).get(f).next(y=>{if(!y)throw Xe();it(y.userId===this.userId),s.push(Ad(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Rn(bt);const r=[];return e.forEach(s=>{const o=sC(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Cp(t).J({range:a},(c,u,f)=>{const[m,y,v]=c,w=Sa(y);m===this.userId&&s.path.isEqual(w)?i=i.add(v):f.done()});r.push(l)}),de.waitFor(r).next(()=>this.Fn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=sC(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Rn(bt);return Cp(t).J({range:o},(l,c,u)=>{const[f,m,y]=l,v=Sa(m);f===this.userId&&i.isPrefixOf(v)?v.length===r&&(a=a.add(y)):u.done()}).next(()=>this.Fn(t,a))}Fn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(zc(t).get(s).next(o=>{if(null===o)throw Xe();it(o.userId===this.userId),i.push(Ad(this.serializer,o))}))}),de.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return a4(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Mn(e.batchId)}),de.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return de.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Cp(t).J({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Sa(s[1]);r.push(l)}else a.done()}).next(()=>{it(0===r.length)})})}containsKey(t,e){return l4(t,this.userId,e)}xn(t){return c4(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function l4(n,t,e){const i=sC(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Cp(n).J({range:s,H:!0},(a,l,c)=>{const[u,f,m]=a;u===t&&f===r&&(o=!0),c.done()}).next(()=>o)}function zc(n){return Dr(n,"mutations")}function Cp(n){return Dr(n,"documentMutations")}function c4(n){return Dr(n,"mutationQueues")}class Md{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Md(0)}static Ln(){return new Md(-1)}}class doe{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Bn(t).next(e=>{const i=new Md(e.highestTargetId);return e.highestTargetId=i.next(),this.kn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(e=>rt.fromTimestamp(new li(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.kn(t,r)))}addTargetData(t,e){return this.qn(t,e).next(()=>this.Bn(t).next(i=>(i.targetCount+=1,this.Qn(e,i),this.kn(t,i))))}updateTargetData(t,e){return this.qn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Ep(t).delete(e.targetId)).next(()=>this.Bn(t)).next(i=>(it(i.targetCount>0),i.targetCount-=1,this.kn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Ep(t).J((o,a)=>{const l=J_(a);l.sequenceNumber<=e&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(t,l)))}).next(()=>de.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Ep(t).J((i,r)=>{const s=J_(r);e(s)})}Bn(t){return u4(t).get("targetGlobalKey").next(e=>(it(null!==e),e))}kn(t,e){return u4(t).put("targetGlobalKey",e)}qn(t,e){return Ep(t).put(GU(this.serializer,e))}Qn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Ed(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Ep(t).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=J_(a);U_(e,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=$c(t);return e.forEach(o=>{const a=ns(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,o))}),de.waitFor(r)}removeMatchingKeys(t,e,i){const r=$c(t);return de.forEach(e,s=>{const o=ns(s.path);return de.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=$c(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=$c(t);let s=It();return r.J({range:i,H:!0},(o,a,l)=>{const c=Sa(o[1]),u=new Ue(c);s=s.add(u)}).next(()=>s)}containsKey(t,e){const i=ns(e.path),r=IDBKeyRange.bound([i],[pj(i)],!1,!0);let s=0;return $c(t).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(t,e){return Ep(t).get(e).next(i=>i?J_(i):null)}}function Ep(n){return Dr(n,"targets")}function u4(n){return Dr(n,"targetGlobal")}function $c(n){return Dr(n,"targetDocuments")}function d4([n,t],[e,i]){const r=bt(n,e);return 0===r?bt(t,i):r}class hoe{constructor(t){this.Kn=t,this.buffer=new Rn(d4),this.$n=0}Un(){return++this.$n}Wn(t){const e=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();d4(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class h4{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(t){var e=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,pe.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Oc(i)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Rc(i)}yield e.zn(3e5)}))}}class foe{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.Hn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return de.resolve(oo.oe);const i=new hoe(e);return this.jn.forEachTarget(t,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(t,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(o4)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o4):this.Yn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,e){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(t,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(t,i,e))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(f=>(c=Date.now(),rp()<=Da.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${f} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}class poe{constructor(t,e){this.db=t,this.garbageCollector=function f4(n,t){return new foe(n,t)}(this,e)}Hn(t){const e=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Zn(t){let e=0;return this.Jn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Jn(t,e){return this.Xn(t,(i,r)=>e(r))}addReference(t,e,i){return IC(t,i)}removeReference(t,e,i){return IC(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return IC(t,e)}er(t,e){return function(r,s){let o=!1;return c4(r).Y(a=>l4(r,a,s).next(l=>(l&&(o=!0),de.resolve(!l)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Xn(t,(o,a)=>{if(a<=e){const l=this.er(t,o).next(c=>{if(!c)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,rt.min()),$c(t).delete([0,ns(o.path)])))});r.push(l)}}).next(()=>de.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return IC(t,e)}Xn(t,e){const i=$c(t);let r,s=oo.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==oo.oe&&e(new Ue(Sa(r)),s),s=c,r=l):s=oo.oe}).next(()=>{s!==oo.oe&&e(new Ue(Sa(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function IC(n,t){return $c(n).put((r=n.currentSequenceNumber,{targetId:0,path:ns(t.path),sequenceNumber:r}));var r}class p4{constructor(){this.changes=new vl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Xn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?de.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class goe{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Pd(t).put(i)}removeEntry(t,e,i){return Pd(t).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],wC(o),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.tr(t,i)))}getEntry(t,e){let i=Xn.newInvalidDocument(e);return Pd(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(iy(e))},(r,s)=>{i=this.nr(e,s)}).next(()=>i)}rr(t,e){let i={size:0,document:Xn.newInvalidDocument(e)};return Pd(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(iy(e))},(r,s)=>{i={document:this.nr(e,s),size:TC(s)}}).next(()=>i)}getEntries(t,e){let i=$s();return this.ir(t,e,(r,s)=>{const o=this.nr(r,s);i=i.insert(r,o)}).next(()=>i)}sr(t,e){let i=$s(),r=new zn(Ue.comparator);return this.ir(t,e,(s,o)=>{const a=this.nr(s,o);i=i.insert(s,a),r=r.insert(s,TC(o))}).next(()=>({documents:i,_r:r}))}ir(t,e,i){if(e.isEmpty())return de.resolve();let r=new Rn(y4);e.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(iy(r.first()),iy(r.last())),o=r.getIterator();let a=o.getNext();return Pd(t).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const f=Ue.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&y4(a,f)<0;)i(a,null),a=o.getNext();a&&a.isEqual(f)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.$(iy(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,s){const o=e.path,a=[o.popLast().toArray(),o.lastSegment(),wC(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pd(t).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=$s();for(const f of c){const m=this.nr(Ue.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(z_(e,m)||r.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(t,e,i,r){let s=$s();const o=_4(e,i),a=_4(e,so.max());return Pd(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const f=this.nr(Ue.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(t){return new moe(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return m4(t).get("remoteDocumentGlobalKey").next(e=>(it(!!e),e))}tr(t,e){return m4(t).put("remoteDocumentGlobalKey",e)}nr(t,e){if(e){const i=function noe(n,t){let e;if(t.document)e=VU(n.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Ue.fromSegments(t.noDocument.path),r=Id(t.noDocument.readTime);e=Xn.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xe();{const i=Ue.fromSegments(t.unknownDocument.path),r=Id(t.unknownDocument.version);e=Xn.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){const s=new li(r[0],r[1]);return rt.fromTimestamp(s)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(rt.min()))return i}return Xn.newInvalidDocument(t)}}function g4(n){return new goe(n)}class moe extends p4{constructor(t,e){super(),this.ar=t,this.trackRemovals=e,this.ur=new vl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Rn((s,o)=>bt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(e.push(this.ar.removeEntry(t,s,a.readTime)),o.isValidDocument()){const l=qU(this.ar.serializer,o);r=r.add(s.path.popLast());const c=TC(l);i+=c-a.size,e.push(this.ar.addEntry(t,s,l))}else if(i-=a.size,this.trackRemovals){const l=qU(this.ar.serializer,o.convertToNoDocument(rt.min()));e.push(this.ar.addEntry(t,s,l))}}),r.forEach(s=>{e.push(this.ar.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.ar.updateMetadata(t,i)),de.waitFor(e)}getFromCache(t,e){return this.ar.rr(t,e).next(i=>(this.ur.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.ar.sr(t,e).next(({documents:i,_r:r})=>(r.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function m4(n){return Dr(n,"remoteDocumentGlobal")}function Pd(n){return Dr(n,"remoteDocumentsV14")}function iy(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function _4(n,t){const e=t.documentKey.path.toArray();return[n,wC(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function y4(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=bt(e[s],i[s]),r)return r;return r=bt(e.length,i.length),r||(r=bt(e[e.length-2],i[i.length-2]),r||bt(e[e.length-1],i[i.length-1]))}class _oe{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class v4{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&G_(i.mutation,r,zs.empty(),li.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,It()).next(()=>i))}getLocalViewOfDocuments(t,e,i=It()){const r=Aa();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=$_();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Aa();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,It()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=$s();const o=W_(),a=W_();return e.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof bl)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),G_(u.mutation,c,u.mutation.getFieldMask(),li.now())):o.set(c.key,zs.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),e.forEach((c,u)=>{var f;return a.set(c,new _oe(u,null!==(f=o.get(c))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(t,e){const i=W_();let r=new zn((o,a)=>o-a),s=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=e.get(l);if(null===c)return;let u=i.get(l)||zs.empty();u=a.applyToLocalView(c,u),i.set(l,u);const f=(r.get(a.batchId)||It()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=aU();u.forEach(m=>{if(!s.has(m)){const y=mU(e.get(m),i.get(m));null!==y&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return de.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return Ue.isDocumentKey((o=e).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):xx(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r);var o}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):de.resolve(Aa());let a=-1,l=s;return o.next(c=>de.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?de.resolve():this.remoteDocumentCache.getEntry(t,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,It())).next(u=>({batchId:a,changes:oU(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ue(e)).next(i=>{let r=$_();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const s=e.collectionGroup;let o=$_();return this.indexManager.getCollectionParents(t,s).next(a=>de.forEach(a,l=>{const c=(f=e,m=l.child(s),new yl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,m;return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,Xn.newInvalidDocument(u)))});let a=$_();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&G_(u.mutation,c,zs.empty(),li.now()),z_(e,c)&&(a=a.insert(l,c))}),a})}}class yoe{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return de.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,{id:(r=e).id,version:r.version,createTime:ji(r.createTime)}),de.resolve();var r}getNamedQuery(t,e){return de.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,{name:(r=e).name,query:Hx(r.bundledQuery),readTime:ji(r.readTime)}),de.resolve();var r}}class voe{constructor(){this.overlays=new zn(Ue.comparator),this.hr=new Map}getOverlay(t,e){return de.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Aa();return de.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),de.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.hr.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),de.resolve()}getOverlaysForCollection(t,e,i){const r=Aa(),s=e.length+1,o=new Ue(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return de.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new zn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>i){let u=s.get(c.largestBatchId);null===u&&(u=Aa(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Aa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return de.resolve(a)}ht(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Nx(e,i));let s=this.hr.get(e);void 0===s&&(s=It(),this.hr.set(e,s)),this.hr.set(e,s.add(i.key))}}class Kx{constructor(){this.Pr=new Rn(Tr.Ir),this.Tr=new Rn(Tr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const i=new Tr(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new Tr(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){const e=new Ue(new Gt([])),i=new Tr(e,t),r=new Tr(e,t+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new Ue(new Gt([])),i=new Tr(e,t),r=new Tr(e,t+1);let s=It();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Tr(t,0),i=this.Pr.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Tr{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return Ue.comparator(t.key,e.key)||bt(t.pr,e.pr)}static Er(t,e){return bt(t.pr,e.pr)||Ue.comparator(t.key,e.key)}}class boe{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Rn(Tr.Ir)}checkEmpty(t){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.yr;this.yr++;const o=new Rx(s,e,i,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new Tr(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return de.resolve(o)}lookupMutationBatch(t,e){return de.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.br(e+1),s=r<0?0:r;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Tr(e,0),r=new Tr(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{const a=this.Sr(o.pr);s.push(a)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Rn(bt);return e.forEach(r=>{const s=new Tr(r,0),o=new Tr(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),de.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Ue.isDocumentKey(s)||(s=s.child(""));const o=new Tr(new Ue(s),0);let a=new Rn(bt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.pr)),!0)},o),de.resolve(this.Dr(a))}Dr(t){const e=[];return t.forEach(i=>{const r=this.Sr(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){it(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let i=this.wr;return de.forEach(e.mutations,r=>{const s=new Tr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){const i=new Tr(e,0),r=this.wr.firstAfterOrEqual(i);return de.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return de.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class woe{constructor(t){this.vr=t,this.docs=new zn(Ue.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return de.resolve(i?i.document.mutableCopy():Xn.newInvalidDocument(e))}getEntries(t,e){let i=$s();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Xn.newInvalidDocument(r))}),de.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=$s();const o=e.path,a=new Ue(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||vx(mj(u),i)<=0||(r.has(u.key)||z_(e,u))&&(s=s.insert(u.key,u.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(t,e,i,r){Xe()}Fr(t,e){return de.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Coe(this)}getSize(t){return de.resolve(this.size)}}class Coe extends p4{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),de.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class Eoe{constructor(t){this.persistence=t,this.Mr=new vl(e=>Ed(e),U_),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Kx,this.targetCount=0,this.Lr=Md.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),de.resolve()}getLastRemoteSnapshotVersion(t){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return de.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),de.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new Md(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,de.resolve()}updateTargetData(t,e){return this.qn(e),de.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,de.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=e&&null===i.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),de.waitFor(s).next(()=>r)}getTargetCount(t){return de.resolve(this.targetCount)}getTargetData(t,e){const i=this.Mr.get(e)||null;return de.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),de.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),de.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),de.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Nr.gr(e);return de.resolve(i)}containsKey(t,e){return de.resolve(this.Nr.containsKey(e))}}class Yx{constructor(t,e){this.Br={},this.overlays={},this.kr=new oo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Eoe(this),this.indexManager=new coe,this.remoteDocumentCache=new woe(i=>this.referenceDelegate.Kr(i)),this.serializer=new WU(e),this.$r=new yoe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new voe,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new boe(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){Me("MemoryPersistence","Starting transaction:",t);const r=new Doe(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return de.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}}class Doe extends yj{constructor(t){super(),this.currentSequenceNumber=t}}class AC{constructor(t){this.persistence=t,this.zr=new Kx,this.jr=null}static Hr(t){return new AC(t)}get Jr(){if(this.jr)return this.jr;throw Xe()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),de.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),de.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),de.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Jr,i=>{const r=Ue.fromPath(i);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,rt.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return de.or([()=>de.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class Toe{constructor(t){this.serializer=t}O(t,e,i,r){const s=new rC("createOrUpgrade",e);var l;i<1&&r>=1&&(t.createObjectStore("owner"),(l=t).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ej,{unique:!0}),l.createObjectStore("documentMutations"),b4(t),function(l){l.createObjectStore("remoteDocuments")}(t));let o=de.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),b4(t)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rt.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ej,{unique:!0});const f=c.store("mutations"),m=u.map(y=>f.put(y));return de.waitFor(m)})}(t,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(o=o.next(()=>this.Xr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.ei(s)))),i<7&&r>=7&&(o=o.next(()=>this.ti(s))),i<8&&r>=8&&(o=o.next(()=>this.ni(t,s))),i<9&&r>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(o=o.next(()=>this.ri(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:dse});c.createIndex("collectionPathOverlayIndex",hse,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",fse,{unique:!1})}(t)})),i<13&&r>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:ese});c.createIndex("documentKeyIndex",tse),c.createIndex("collectionGroupIndex",nse)}(t)).next(()=>this.ii(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(t,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:ase}).createIndex("sequenceNumberIndex",lse,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:cse}).createIndex("documentKeyIndex",use,{unique:!1})}(t))),i<16&&r>=16&&(o=o.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),o}ei(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=TC(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(r=>de.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>de.forEach(a,l=>{it(l.userId===s.userId);const c=Ad(this.serializer,l);return a4(t,s.userId,c).next(()=>{})}))}))}ti(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((o,a)=>{const l=new Gt(o),c=[0,ns(l)];s.push(e.get(c).next(u=>u?de.resolve():e.put({targetId:0,path:ns(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>de.waitFor(s))})}ni(t,e){t.createObjectStore("collectionParents",{keyPath:ose});const i=e.store("collectionParents"),r=new Zx,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:ns(l)})}};return e.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Gt(o);return s(l.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Sa(a);return s(u.popLast())}))}ri(t){const e=t.store("targets");return e.J((i,r)=>{const s=J_(r),o=GU(this.serializer,s);return e.put(o)})}ii(t,e){const i=e.store("remoteDocuments"),r=[];return i.J((s,o)=>{const a=e.store("remoteDocumentsV14"),l=(f=o,f.document?new Ue(Gt.fromString(f.document.name).popFirst(5)):f.noDocument?Ue.fromSegments(f.noDocument.path):f.unknownDocument?Ue.fromSegments(f.unknownDocument.path):Xe()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var f;r.push(a.put(c))}).next(()=>de.waitFor(r))}si(t,e){const i=e.store("mutations"),r=g4(this.serializer),s=new Yx(AC.Hr,this.serializer.ct);return i.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:It();Ad(this.serializer,l).keys().forEach(f=>u=u.add(f)),a.set(l.userId,u)}),de.forEach(a,(l,c)=>{const u=new Er(c),f=CC.lt(this.serializer,u),m=s.getIndexManager(u),y=SC.lt(u,this.serializer,m,s.referenceDelegate);return new v4(r,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Cx(e,oo.oe),l).next()})})}}function b4(n){n.createObjectStore("targetDocuments",{keyPath:rse}).createIndex("documentTargetsIndex",sse,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ise,{unique:!0}),n.createObjectStore("targetGlobal")}const Qx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xx{constructor(t,e,i,r,s,o,a,l,c,u,f=16){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=u,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!Xx.D())throw new Ie(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new poe(this,r),this.Ti=e+"main",this.serializer=new WU(l),this.Ei=new Ta(this.Ti,this.ui,new Toe(this.serializer)),this.Qr=new doe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=g4(this.serializer),this.$r=new ioe,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(fe.FAILED_PRECONDITION,Qx);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new oo(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){var e=this;return this.Ii=function(){var i=(0,pe.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.L(function(){var e=(0,pe.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget((0,pe.Z)(function*(){e.started&&(yield e.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>kC(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(e=>this.isPrimary&&!e?this.yi(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(Oc(t))return Me("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return ry(t).get("owner").next(e=>de.resolve(this.Si(e)))}bi(t){return kC(t).delete(this.clientId)}Di(){var t=this;return(0,pe.Z)(function*(){if(t.isPrimary&&!t.Ci(t.Pi,18e5)){t.Pi=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Dr(i,"clientMetadata");return r.U().next(s=>{const o=t.vi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return de.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(t.di)for(const i of e)t.di.removeItem(t.Fi(i.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?de.resolve(!0):ry(t).get("owner").next(e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)){if(this.Si(e)&&this.networkEnabled)return!0;if(!this.Si(e)){if(!e.allowTabSynchronization)throw new Ie(fe.FAILED_PRECONDITION,Qx);return!1}}return!(!this.networkEnabled||!this.inForeground)||kC(t).U().next(i=>void 0===this.vi(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Me("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,pe.Z)(function*(){t.qr=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Oi(),t.Ni(),yield t.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new Cx(e,oo.oe);return t.yi(i).next(()=>t.bi(i))}),t.Ei.close(),t.Li()})()}vi(t,e){return t.filter(i=>this.Ci(i.updateTimeMs,e)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>kC(t).U().next(e=>this.vi(e,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(t,e){return SC.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new uoe(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return CC.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,e,i){Me("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=16===(l=this.ui)?gse:15===l?Aj:14===l?Ij:13===l?Sj:12===l?pse:11===l?Tj:void Xe();var l;let o;return this.Ei.runTransaction(t,r,s,a=>(o=new Cx(a,this.kr?this.kr.next():oo.oe),"readwrite-primary"===e?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw Bi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ie(fe.FAILED_PRECONDITION,_j);return i(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(t){return ry(t).get("owner").next(e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ie(fe.FAILED_PRECONDITION,Qx)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ry(t).put("owner",e)}static D(){return Ta.D()}yi(t){const e=ry(t);return e.get("owner").next(i=>this.Si(i)?(Me("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):de.resolve())}Ci(t,e){const i=Date.now();return!(t<i-e||t>i&&(Bi(`Detected an update time that is in the future: ${t} > ${i}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,yn.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var e;try{const i=null!==(null===(e=this.di)||void 0===e?void 0:e.getItem(this.Fi(t)));return Me("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Bi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){Bi("Failed to set zombie client id.",t)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ry(n){return Dr(n,"owner")}function kC(n){return Dr(n,"clientMetadata")}function Jx(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class ek{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=It(),r=It();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ek(t,e.fromCache,i,r)}}class Soe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class w4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,yn.G6)()?8:vj((0,yn.z$)())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Soe;return this.Ji(t,e,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,e,o,a.size)})}).next(()=>s.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(rp()<=Da.in.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",fp(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),de.resolve()):(rp()<=Da.in.DEBUG&&Me("QueryEngine","Query:",fp(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(rp()<=Da.in.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",fp(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,is(e))):de.resolve())}ji(t,e){if(Jj(e))return de.resolve(null);let i=is(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=pC(e,null,"F"),i=is(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=It(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.Zi(e,a);return this.Xi(e,c,o,l.readTime)?this.ji(t,pC(e,null,"F")):this.es(t,c,e,l)}))})))}Hi(t,e,i,r){return Jj(e)||r.isEqual(rt.min())?de.resolve(null):this.zi.getDocuments(t,i).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,i,r)?de.resolve(null):(rp()<=Da.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fp(e)),this.es(t,o,e,gj(r,-1)).next(a=>a))})}Zi(t,e){let i=new Rn(rU(t));return e.forEach((r,s)=>{z_(t,s)&&(i=i.add(s))}),i}Xi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,i){return rp()<=Da.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",fp(e)),this.zi.getDocumentsMatchingQuery(t,e,so.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Ioe{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new zn(bt),this.rs=new vl(s=>Ed(s),U_),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new v4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function C4(n,t,e,i){return new Ioe(n,t,e,i)}function E4(n,t){return tk.apply(this,arguments)}function tk(){return(tk=(0,pe.Z)(function*(n,t){const e=Be(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=It();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function D4(n){const t=Be(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function T4(n,t,e){let i=It(),r=It();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=$s();return e.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(rt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:r}})}function koe(n,t){const e=Be(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Dp(n,t){const e=Be(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(s=>s?(r=s,de.resolve(r)):e.Qr.allocateTargetId(i).next(o=>(r=new wl(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ns.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function Tp(n,t,e){return nk.apply(this,arguments)}function nk(){return(nk=(0,pe.Z)(function*(n,t,e){const i=Be(n),r=i.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Oc(o))throw o;Me("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})).apply(this,arguments)}function MC(n,t,e){const i=Be(n);let r=rt.min(),s=It();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Be(l),m=f.rs.get(u);return void 0!==m?de.resolve(f.ns.get(m)):f.Qr.getTargetData(c,u)}(i,o,is(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,e?r:rt.min(),e?s:It())).next(a=>(A4(i,iU(t),a),{documents:a,hs:s})))}function S4(n,t){const e=Be(n),i=Be(e.Qr),r=e.ns.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,t).next(o=>o?o.target:null))}function I4(n,t){const e=Be(n),i=e.ss.get(t)||rt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.os.getAllFromCollectionGroup(r,t,gj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(A4(e,t,r),r))}function A4(n,t,e){let i=n.ss.get(t)||rt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(t,i)}function ik(){return(ik=(0,pe.Z)(function*(n,t,e,i){const r=Be(n);let s=It(),o=$s();for(const c of e){const u=t.Ps(c.metadata.name);c.document&&(s=s.add(u));const f=t.Is(c);f.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(u,f)}const a=r.os.newChangeBuffer({trackRemovals:!0}),l=yield Dp(r,(u=i,is(dp(Gt.fromString(`__bundle__/docs/${u}`)))));var u;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>T4(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.cs,u.ls)).next(()=>u.cs)))})).apply(this,arguments)}function Poe(n,t){return rk.apply(this,arguments)}function rk(){return(rk=(0,pe.Z)(function*(n,t,e=It()){const i=yield Dp(n,is(Hx(t.bundledQuery))),r=Be(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=ji(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.$r.saveNamedQuery(s,t);const a=i.withResumeToken(ur.EMPTY_BYTE_STRING,o);return r.ns=r.ns.insert(a.targetId,a),r.Qr.updateTargetData(s,a).next(()=>r.Qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Qr.addMatchingKeys(s,e,i.targetId)).next(()=>r.$r.saveNamedQuery(s,t))})})).apply(this,arguments)}function x4(n,t){return`firestore_clients_${n}_${t}`}function k4(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function sk(n,t){return`firestore_targets_${n}_${t}`}class PC{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Es(t,e,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new Ie(r.error.code,r.error.message))),o?new PC(t,e,r.state,s):(Bi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class sy{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Es(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ie(i.error.code,i.error.message))),s?new sy(t,i.state,r):(Bi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class RC{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Es(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=Mx();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=wj(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new RC(t,s):(Bi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class ok{constructor(t,e){this.clientId=t,this.onlineState=e}static Es(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new ok(e.clientId,e.onlineState):(Bi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class ak{constructor(){this.activeTargetIds=Mx()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class lk{constructor(t,e,i,r,s){this.window=t,this.oi=e,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new zn(bt),this.started=!1,this.ys=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=x4(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new ak),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,pe.Z)(function*(){const e=yield t.syncEngine.Bi();for(const r of e){if(r===t.Vs)continue;const s=t.getItem(x4(t.persistenceKey,r));if(s){const o=RC.Es(r,s);o&&(t.ps=t.ps.insert(o.clientId,o))}}t.Ms();const i=t.storage.getItem(t.vs);if(i){const r=t.xs(i);r&&t.Os(r)}for(const r of t.ys)t.gs(r);t.ys=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let e=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Ls(t,"pending")}updateMutationState(t,e,i){this.Ls(t,e,i),this.Bs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(sk(this.persistenceKey,t));if(i){const r=sy.Es(t,i);r&&(e=r.state)}}return this.ks.As(t),this.Ms(),e}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(sk(this.persistenceKey,t))}updateQueryState(t,e,i){this.qs(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Bs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Me("SharedClientState","READ",t,e),e}setItem(t,e){Me("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Me("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Me("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ws)return void Bi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,pe.Z)(function*(){if(e.started){if(null!==i.key)if(e.bs.test(i.key)){if(null==i.newValue){const r=e.$s(i.key);return e.Us(r,null)}{const r=e.Ws(i.key,i.newValue);if(r)return e.Us(r.clientId,r)}}else if(e.Ds.test(i.key)){if(null!==i.newValue){const r=e.Gs(i.key,i.newValue);if(r)return e.zs(r)}}else if(e.Cs.test(i.key)){if(null!==i.newValue){const r=e.js(i.key,i.newValue);if(r)return e.Hs(r)}}else if(i.key===e.vs){if(null!==i.newValue){const r=e.xs(i.newValue);if(r)return e.Os(r)}}else if(i.key===e.Ss){const r=function(o){let a=oo.oe;if(null!=o)try{const l=JSON.parse(o);it("number"==typeof l),a=l}catch(l){Bi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==oo.oe&&e.sequenceNumberHandler(r)}else if(i.key===e.Fs){const r=e.Js(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Ys(s)))}}else e.ys.push(i)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(t,e,i){const r=new PC(this.currentUser,t,e,i),s=k4(this.persistenceKey,this.currentUser,t);this.setItem(s,r.ds())}Bs(t){const e=k4(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Qs(t){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:t}))}qs(t,e,i){const r=sk(this.persistenceKey,t),s=new sy(t,e,i);this.setItem(r,s.ds())}Ks(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Fs,e)}$s(t){const e=this.bs.exec(t);return e?e[1]:null}Ws(t,e){const i=this.$s(t);return RC.Es(i,e)}Gs(t,e){const i=this.Ds.exec(t),r=Number(i[1]);return PC.Es(new Er(void 0!==i[2]?i[2]:null),r,e)}js(t,e){const i=this.Cs.exec(t),r=Number(i[1]);return sy.Es(r,e)}xs(t){return ok.Es(t)}Js(t){return JSON.parse(t)}zs(t){var e=this;return(0,pe.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Zs(t.batchId,t.state,t.error);Me("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,e){const i=e?this.ps.insert(t,e):this.ps.remove(t),r=this.Ns(this.ps),s=this.Ns(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=i})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let e=Mx();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class M4{constructor(){this.no=new ak,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ak,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Roe{io(t){}shutdown(){}}class P4{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OC=null;function ck(){return null===OC?OC=268435456+Math.round(2147483648*Math.random()):OC++,"0x"+OC.toString(16)}const Ooe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Noe{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}const ss="WebChannelConnection";class Foe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,i,r,s,o){const a=ck(),l=this.vo(e,i.toUriEncodedString());Me("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,l,c,r).then(u=>(Me("RestConnection",`Received RPC '${e}' ${a}: `,u),u),u=>{throw Hs("RestConnection",`RPC '${e}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}xo(e,i,r,s,o,a){return this.Co(e,i,r,s,o)}Fo(e,i,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ip,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,i){return`${this.wo}/v1/${i}:${Ooe[e]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,i,r){const s=ck();return new Promise((o,a)=>{const l=new rj;l.setWithCredentials(!0),l.listenOnce(oj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case iC.NO_ERROR:const u=l.getResponseJson();Me(ss,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case iC.TIMEOUT:Me(ss,`RPC '${t}' ${s} timed out`),a(new Ie(fe.DEADLINE_EXCEEDED,"Request time out"));break;case iC.HTTP_ERROR:const f=l.getStatus();if(Me(ss,`RPC '${t}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const v=function(D){const P=D.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(P)>=0?P:fe.UNKNOWN}(y.status);a(new Ie(v,y.message))}else a(new Ie(fe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ie(fe.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Me(ss,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);Me(ss,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",c,i,15)})}Oo(t,e,i){const r=ck(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=cj(),a=lj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new sj({})),this.Fo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;const u=s.join("");Me(ss,`Creating RPC '${t}' stream ${r}: ${u}`,l);const f=o.createWebChannel(u,l);let m=!1,y=!1;const v=new Noe({lo:D=>{y?Me(ss,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(m||(Me(ss,`Opening RPC '${t}' stream ${r} transport.`),f.open(),m=!0),Me(ss,`RPC '${t}' stream ${r} sending:`,D),f.send(D))},ho:()=>f.close()}),w=(D,P,I)=>{D.listen(P,O=>{try{I(O)}catch(W){setTimeout(()=>{throw W},0)}})};return w(f,M_.EventType.OPEN,()=>{y||(Me(ss,`RPC '${t}' stream ${r} transport opened.`),v.mo())}),w(f,M_.EventType.CLOSE,()=>{y||(y=!0,Me(ss,`RPC '${t}' stream ${r} transport closed`),v.po())}),w(f,M_.EventType.ERROR,D=>{y||(y=!0,Hs(ss,`RPC '${t}' stream ${r} transport errored:`,D),v.po(new Ie(fe.UNAVAILABLE,"The operation could not be completed")))}),w(f,M_.EventType.MESSAGE,D=>{var P;if(!y){const I=D.data[0];it(!!I);const W=I.error||(null===(P=I[0])||void 0===P?void 0:P.error);if(W){Me(ss,`RPC '${t}' stream ${r} received error:`,W);const K=W.status;let re=function(F){const z=Yi[F];if(void 0!==z)return EU(z)}(K),V=W.message;void 0===re&&(re=fe.INTERNAL,V="Unknown error status: "+K+" with message "+W.message),y=!0,v.po(new Ie(re,V)),f.close()}else Me(ss,`RPC '${t}' stream ${r} received:`,I),v.yo(I)}}),w(a,aj.STAT_EVENT,D=>{D.stat===mx.PROXY?Me(ss,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===mx.NOPROXY&&Me(ss,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}}function R4(){return typeof window<"u"?window:null}function NC(){return typeof document<"u"?document:null}function oy(n){return new qse(n,!0)}class uk{constructor(t,e,i=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-i);r>0&&Me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class O4{constructor(t,e,i,r,s,o,a,l){this.oi=t,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new uk(t,e)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var t=this;return(0,pe.Z)(function*(){t.Zo()&&(yield t.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){var t=this;return(0,pe.Z)(function*(){if(t.Xo())return t.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){var i=this;return(0,pe.Z)(function*(){i.s_(),i.o_(),i.Yo.cancel(),i.jo++,4!==t?i.Yo.reset():e&&e.code===fe.RESOURCE_EXHAUSTED?(Bi(e.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),i.Yo.Ko()):e&&e.code===fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.__(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Ao(e)})()}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===e&&this.u_(i,r)},i=>{t(()=>{const r=new Ie(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(t,e){const i=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){var t=this;this.state=5,this.Yo.$o((0,pe.Z)(function*(){t.state=0,t.start()}))}c_(t){return Me("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Loe extends O4{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=function Kse(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(c=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Xe(),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(it(void 0===u||"string"==typeof u),ur.fromBase64String(u||"")):(it(void 0===u||u instanceof Buffer||u instanceof Uint8Array),ur.fromUint8Array(u||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=void 0===c.code?fe.UNKNOWN:EU(c.code);return new Ie(u,c.message||"")}(o);e=new AU(i,r,s,a||null)}else if("documentChange"in t){const i=t.documentChange,r=xa(n,i.document.name),s=ji(i.document.updateTime),o=i.document.createTime?ji(i.document.createTime):rt.min(),a=new Lr({mapValue:{fields:i.document.fields}}),l=Xn.newFoundDocument(r,s,o,a);e=new vC(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){const i=t.documentDelete,r=xa(n,i.document),s=i.readTime?ji(i.readTime):rt.min(),o=Xn.newNoDocument(r,s);e=new vC([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const i=t.documentRemove,r=xa(n,i.document);e=new vC([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return Xe();{const i=t.filter,{count:r=0,unchangedNames:s}=i,o=new jse(r,s);e=new IU(i.targetId,o)}}var c;return e}(this.serializer,t),i=function(s){if(!("targetChange"in s))return rt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?rt.min():o.readTime?ji(o.readTime):rt.min()}(t);return this.listener.h_(e,i)}P_(t){const e={};e.database=jx(this.serializer),e.addTarget=function(s,o){let a;const l=o.target;if(a=hC(l)?{documents:BU(s,l)}:{query:bC(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=PU(s,o.resumeToken);const c=Lx(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(rt.min())>0){a.readTime=yp(s,o.snapshotVersion.toTimestamp());const c=Lx(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,t);const i=function Qse(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.i_(e)}I_(t){const e={};e.database=jx(this.serializer),e.removeTarget=t,this.i_(e)}}class Voe extends O4{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(it(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=function Yse(n,t){return n&&n.length>0?(it(void 0!==t),n.map(e=>function(r,s){let o=ji(r.updateTime?r.updateTime:s);return o.isEqual(rt.min())&&(o=ji(s)),new Lse(o,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=ji(t.commitTime);return this.listener.A_(i,e)}return it(!t.writeResults||0===t.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=jx(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>X_(this.serializer,i))};this.i_(e)}}class Boe extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Ie(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Bx(e,i),r,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(fe.UNKNOWN,s.toString())})}xo(t,e,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,Bx(e,i),r,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(fe.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class joe{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,"Online"===t&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Bi(e),this.y_=!1):Me("OnlineStateTracker",e)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Uoe{constructor(t,e,i,r,s){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{i.enqueueAndForget((0,pe.Z)(function*(){var l;Wc(o)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,pe.Z)(function*(u){const f=Be(u);f.M_.add(4),yield Sp(f),f.N_.set("Unknown"),f.M_.delete(4),yield ay(f)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.N_=new joe(i,r)}}function ay(n){return dk.apply(this,arguments)}function dk(){return(dk=(0,pe.Z)(function*(n){if(Wc(n))for(const t of n.x_)yield t(!0)})).apply(this,arguments)}function Sp(n){return hk.apply(this,arguments)}function hk(){return(hk=(0,pe.Z)(function*(n){for(const t of n.x_)yield t(!1)})).apply(this,arguments)}function FC(n,t){const e=Be(n);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),gk(e)?pk(e):xp(e).Xo()&&fk(e,t))}function Ip(n,t){const e=Be(n),i=xp(e);e.F_.delete(t),i.Xo()&&N4(e,t),0===e.F_.size&&(i.Xo()?i.n_():Wc(e)&&e.N_.set("Unknown"))}function fk(n,t){if(n.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}xp(n).P_(t)}function N4(n,t){n.L_.xe(t),xp(n).I_(t)}function pk(n){n.L_=new Hse({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.F_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),xp(n).start(),n.N_.w_()}function gk(n){return Wc(n)&&!xp(n).Zo()&&n.F_.size>0}function Wc(n){return 0===Be(n).M_.size}function F4(n){n.L_=void 0}function Hoe(n){return mk.apply(this,arguments)}function mk(){return(mk=(0,pe.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function zoe(n){return _k.apply(this,arguments)}function _k(){return(_k=(0,pe.Z)(function*(n){n.F_.forEach((t,e)=>{fk(n,t)})})).apply(this,arguments)}function $oe(n,t){return yk.apply(this,arguments)}function yk(){return(yk=(0,pe.Z)(function*(n,t){F4(n),gk(n)?(n.N_.D_(t),pk(n)):n.N_.set("Unknown")})).apply(this,arguments)}function Woe(n,t,e){return vk.apply(this,arguments)}function vk(){return vk=(0,pe.Z)(function*(n,t,e){if(n.N_.set("Online"),t instanceof AU&&2===t.state&&t.cause)try{yield(i=(0,pe.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.F_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.F_.delete(l),s.L_.removeTarget(l))}),function r(s,o){return i.apply(this,arguments)})(n,t)}catch(i){Me("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield LC(n,i)}else if(t instanceof vC?n.L_.Ke(t):t instanceof IU?n.L_.He(t):n.L_.We(t),!e.isEqual(rt.min()))try{const i=yield D4(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.F_.get(c);u&&s.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.F_.get(l);if(!u)return;s.F_.set(l,u.withResumeToken(ur.EMPTY_BYTE_STRING,u.snapshotVersion)),N4(s,l);const f=new wl(u.target,l,c,u.sequenceNumber);fk(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){Me("RemoteStore","Failed to raise snapshot:",i),yield LC(n,i)}var i}),vk.apply(this,arguments)}function LC(n,t,e){return bk.apply(this,arguments)}function bk(){return(bk=(0,pe.Z)(function*(n,t,e){if(!Oc(t))throw t;n.M_.add(1),yield Sp(n),n.N_.set("Offline"),e||(e=()=>D4(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield e(),n.M_.delete(1),yield ay(n)}))})).apply(this,arguments)}function L4(n,t){return t().catch(e=>LC(n,e,t))}function Ap(n){return wk.apply(this,arguments)}function wk(){return(wk=(0,pe.Z)(function*(n){const t=Be(n),e=qc(t);let i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;qoe(t);)try{const r=yield koe(t.localStore,i);if(null===r){0===t.v_.length&&e.n_();break}i=r.batchId,Goe(t,r)}catch(r){yield LC(t,r)}V4(t)&&B4(t)})).apply(this,arguments)}function qoe(n){return Wc(n)&&n.v_.length<10}function Goe(n,t){n.v_.push(t);const e=qc(n);e.Xo()&&e.E_&&e.d_(t.mutations)}function V4(n){return Wc(n)&&!qc(n).Zo()&&n.v_.length>0}function B4(n){qc(n).start()}function Zoe(n){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,pe.Z)(function*(n){qc(n).V_()})).apply(this,arguments)}function Koe(n){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,pe.Z)(function*(n){const t=qc(n);for(const e of n.v_)t.d_(e.mutations)})).apply(this,arguments)}function Yoe(n,t,e){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,pe.Z)(function*(n,t,e){const i=n.v_.shift(),r=Ox.from(i,t,e);yield L4(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Ap(n)})).apply(this,arguments)}function Qoe(n,t){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,pe.Z)(function*(n,t){var e;t&&qc(n).E_&&(yield(e=(0,pe.Z)(function*(r,s){if(CU(a=s.code)&&a!==fe.ABORTED){const o=r.v_.shift();qc(r).t_(),yield L4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Ap(r)}var a}),function i(r,s){return e.apply(this,arguments)})(n,t)),V4(n)&&B4(n)}),Tk.apply(this,arguments)}function j4(n,t){return Sk.apply(this,arguments)}function Sk(){return(Sk=(0,pe.Z)(function*(n,t){const e=Be(n);e.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const i=Wc(e);e.M_.add(3),yield Sp(e),i&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield ay(e)})).apply(this,arguments)}function Ik(n,t){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,pe.Z)(function*(n,t){const e=Be(n);t?(e.M_.delete(2),yield ay(e)):t||(e.M_.add(2),yield Sp(e),e.N_.set("Unknown"))})).apply(this,arguments)}function xp(n){return n.B_||(n.B_=function(e,i,r){const s=Be(e);return s.f_(),new Loe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:Hoe.bind(null,n),To:zoe.bind(null,n),Ao:$oe.bind(null,n),h_:Woe.bind(null,n)}),n.x_.push(function(){var t=(0,pe.Z)(function*(e){e?(n.B_.t_(),gk(n)?pk(n):n.N_.set("Unknown")):(yield n.B_.stop(),F4(n))});return function(e){return t.apply(this,arguments)}}())),n.B_}function qc(n){return n.k_||(n.k_=function(e,i,r){const s=Be(e);return s.f_(),new Voe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:Zoe.bind(null,n),Ao:Qoe.bind(null,n),R_:Koe.bind(null,n),A_:Yoe.bind(null,n)}),n.x_.push(function(){var t=(0,pe.Z)(function*(e){e?(n.k_.t_(),yield Ap(n)):(yield n.k_.stop(),n.v_.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(e){return t.apply(this,arguments)}}())),n.k_}class xk{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){const o=Date.now()+i,a=new xk(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(fe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kp(n,t){if(Bi("AsyncQueue",`${t}: ${n}`),Oc(n))return new Ie(fe.UNAVAILABLE,`${t}: ${n}`);throw n}class Mp{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Ue.comparator(e.key,i.key):(e,i)=>Ue.comparator(e.key,i.key),this.keyedMap=$_(),this.sortedSet=new zn(this.comparator)}static emptySet(t){return new Mp(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Mp)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Mp;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class U4{constructor(){this.q_=new zn(Ue.comparator)}track(t){const e=t.doc.key,i=this.q_.get(e);i?0!==t.type&&3===i.type?this.q_=this.q_.insert(e,t):3===t.type&&1!==i.type?this.q_=this.q_.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.q_=this.q_.remove(e):1===t.type&&2===i.type?this.q_=this.q_.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):Xe():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,i)=>{t.push(i)}),t}}class Pp{constructor(t,e,i,r,s,o,a,l,c){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,i,r,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new Pp(t,e,Mp.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&H_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class Xoe{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Joe{constructor(){this.queries=new vl(t=>nU(t),H_),this.onlineState="Unknown",this.z_=new Set}}function kk(n,t){return Mk.apply(this,arguments)}function Mk(){return(Mk=(0,pe.Z)(function*(n,t){const e=Be(n);let i=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new Xoe,i=t.G_()?0:1);try{switch(i){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){const a=kp(o,`Initialization of query '${fp(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&Ok(e)})).apply(this,arguments)}function Pk(n,t){return Rk.apply(this,arguments)}function Rk(){return(Rk=(0,pe.Z)(function*(n,t){const e=Be(n),i=t.query;let r=3;const s=e.queries.get(i);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),0===s.U_.length?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})).apply(this,arguments)}function eae(n,t){const e=Be(n);let i=!1;for(const r of t){const o=e.queries.get(r.query);if(o){for(const a of o.U_)a.H_(r)&&(i=!0);o.K_=r}}i&&Ok(e)}function tae(n,t,e){const i=Be(n),r=i.queries.get(t);if(r)for(const s of r.U_)s.onError(e);i.queries.delete(t)}function Ok(n){n.z_.forEach(t=>{t.next()})}var Nk,H4;(H4=Nk||(Nk={})).J_="default",H4.Cache="cache";class Fk{constructor(t,e,i){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Pp(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){return!t.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ea(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(t){t=Pp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Nk.Cache}}class nae{constructor(t,e){this.ia=t,this.byteLength=e}sa(){return"metadata"in this.ia}}class z4{constructor(t){this.serializer=t}Ps(t){return xa(this.serializer,t)}Is(t){return t.metadata.exists?VU(this.serializer,t.document,!1):Xn.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return ji(t)}}class iae{constructor(t,e,i){this.oa=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$4(t)}_a(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ia.namedQuery)this.queries.push(t.ia.namedQuery);else if(t.ia.documentMetadata){this.documents.push({metadata:t.ia.documentMetadata}),t.ia.documentMetadata.exists||++e;const i=Gt.fromString(t.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ia.document&&(this.documents[this.documents.length-1].document=t.ia.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}aa(t){const e=new Map,i=new z4(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.Ps(r.metadata.name);for(const o of r.metadata.queries){const a=(e.get(o)||It()).add(s);e.set(o,a)}}return e}complete(){var t=this;return(0,pe.Z)(function*(){const e=yield function Moe(n,t,e,i){return ik.apply(this,arguments)}(t.localStore,new z4(t.serializer),t.documents,t.oa.id),i=t.aa(t.documents);for(const r of t.queries)yield Poe(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,ua:t.collectionGroups,ca:e}})()}}function $4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class W4{constructor(t){this.key=t}}class q4{constructor(t){this.key=t}}class G4{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=It(),this.mutatedKeys=It(),this.Ia=rU(t),this.Ta=new Mp(this.Ia)}get Ea(){return this.la}da(t,e){const i=e?e.Aa:new U4,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,f)=>{const m=r.get(u),y=z_(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let D=!1;m&&y?m.data.isEqual(y.data)?v!==w&&(i.track({type:3,doc:y}),D=!0):this.Ra(m,y)||(i.track({type:2,doc:y}),D=!0,(l&&this.Ia(y,l)>0||c&&this.Ia(y,c)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),D=!0):m&&!y&&(i.track({type:1,doc:m}),D=!0,(l||c)&&(a=!0)),D&&(y?(o=o.add(y),s=w?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ta:o,Aa:i,Xi:a,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((u,f)=>function(y,v){const w=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return w(y)-w(v)}(u.type,f.type)||this.Ia(u.doc,f.doc)),this.Va(i),r=null!=r&&r;const a=e&&!r?this.ma():[],l=0===this.Pa.size&&this.current&&!r?1:0,c=l!==this.ha;return this.ha=l,0!==o.length||c?{snapshot:new Pp(this.query,t.Ta,s,o,t.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new U4,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=It(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const e=[];return t.forEach(i=>{this.Pa.has(i)||e.push(new q4(i))}),this.Pa.forEach(i=>{t.has(i)||e.push(new W4(i))}),e}pa(t){this.la=t.hs,this.Pa=It();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Pp.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class rae{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class sae{constructor(t){this.key=t,this.wa=!1}}class oae{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new vl(a=>nU(a),H_),this.Da=new Map,this.Ca=new Set,this.va=new zn(Ue.comparator),this.Fa=new Map,this.Ma=new Kx,this.xa={},this.Oa=new Map,this.Na=Md.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function aae(n,t){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,pe.Z)(function*(n,t,e=!0){const i=VC(n);let r;const s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield Z4(i,t,e,!0),r})).apply(this,arguments)}function lae(n,t){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,pe.Z)(function*(n,t){const e=VC(n);yield Z4(e,t,!0,!1)})).apply(this,arguments)}function Z4(n,t,e,i){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,pe.Z)(function*(n,t,e,i){const r=yield Dp(n.localStore,is(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=yield jk(n,t,s,"current"===o,r.resumeToken)),n.isPrimaryClient&&e&&FC(n.remoteStore,r),a})).apply(this,arguments)}function jk(n,t,e,i,r){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,pe.Z)(function*(n,t,e,i,r){n.Ba=(f,m,y)=>{return(v=(0,pe.Z)(function*(D,P,I,O){let W=P.view.da(I);W.Xi&&(W=yield MC(D.localStore,P.query,!1).then(({documents:M})=>P.view.da(M,W)));const K=O&&O.targetChanges.get(P.targetId),re=O&&null!=O.targetMismatches.get(P.targetId),V=P.view.applyChanges(W,D.isPrimaryClient,K,re);return Xk(D,P.targetId,V.fa),V.snapshot}),function w(D,P,I,O){return v.apply(this,arguments)})(n,f,m,y);var v};const s=yield MC(n.localStore,t,!0),o=new G4(t,s.hs),a=o.da(s.documents),l=Y_.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),c=o.applyChanges(a,n.isPrimaryClient,l);Xk(n,e,c.fa);const u=new rae(t,e,o);return n.ba.set(t,u),n.Da.has(e)?n.Da.get(e).push(t):n.Da.set(e,[t]),c.snapshot}),Uk.apply(this,arguments)}function cae(n,t,e){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,pe.Z)(function*(n,t,e){const i=Be(n),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!H_(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Tp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Ip(i.remoteStore,r.targetId),Rp(i,r.targetId)}).catch(Rc))):(Rp(i,r.targetId),yield Tp(i.localStore,r.targetId,!0))})).apply(this,arguments)}function uae(n,t){return zk.apply(this,arguments)}function zk(){return(zk=(0,pe.Z)(function*(n,t){const e=Be(n),i=e.ba.get(t),r=e.Da.get(i.targetId);e.isPrimaryClient&&1===r.length&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(e.remoteStore,i.targetId))})).apply(this,arguments)}function $k(){return($k=(0,pe.Z)(function*(n,t,e){const i=cM(n);try{const r=yield function(o,a){const l=Be(o),c=li.now(),u=a.reduce((y,v)=>y.add(v.key),It());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=$s(),w=It();return l.os.getEntries(y,u).next(D=>{v=D,v.forEach((P,I)=>{I.isValidDocument()||(w=w.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,v)).next(D=>{f=D;const P=[];for(const I of a){const O=Bse(I,f.get(I.key).overlayedDocument);null!=O&&P.push(new bl(I.key,O,jj(O.value.mapValue),ci.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,P,a)}).next(D=>{m=D;const P=D.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(y,D.batchId,P)})}).then(()=>({batchId:m.batchId,changes:oU(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new zn(bt)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(i,r.batchId,e),yield Cl(i,r.changes),yield Ap(i.remoteStore)}catch(r){const s=kp(r,"Failed to persist write");e.reject(s)}})).apply(this,arguments)}function K4(n,t){return Wk.apply(this,arguments)}function Wk(){return(Wk=(0,pe.Z)(function*(n,t){const e=Be(n);try{const i=yield function xoe(n,t){const e=Be(n),i=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const a=[];t.targetChanges.forEach((u,f)=>{const m=r.get(f);if(!m)return;a.push(e.Qr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>e.Qr.addMatchingKeys(s,u.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);var w,D,P;null!==t.targetMismatches.get(f)?y=y.withResumeToken(ur.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,i)),r=r.insert(f,y),D=y,P=u,(0===(w=m).resumeToken.approximateByteSize()||D.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0)&&a.push(e.Qr.updateTargetData(s,y))});let l=$s(),c=It();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(T4(s,o,t.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!i.isEqual(rt.min())){const u=e.Qr.getLastRemoteSnapshotVersion(s).next(f=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return de.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(e.ns=r,s))}(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(it(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?it(o.wa):r.removedDocuments.size>0&&(it(o.wa),o.wa=!1))}),yield Cl(e,i,t)}catch(i){yield Rc(i)}})).apply(this,arguments)}function Y4(n,t,e){const i=Be(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Be(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const m of f.U_)m.j_(a)&&(c=!0)}),c&&Ok(l)}(i.eventManager,t),r.length&&i.Sa.h_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function hae(n,t,e){return qk.apply(this,arguments)}function qk(){return(qk=(0,pe.Z)(function*(n,t,e){const i=Be(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Fa.get(t),s=r&&r.key;if(s){let o=new zn(Ue.comparator);o=o.insert(s,Xn.newNoDocument(s,rt.min()));const a=It().add(s),l=new K_(rt.min(),new Map,new zn(bt),o,a);yield K4(i,l),i.va=i.va.remove(s),i.Fa.delete(t),Jk(i)}else yield Tp(i.localStore,t,!1).then(()=>Rp(i,t,e)).catch(Rc)})).apply(this,arguments)}function fae(n,t){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,pe.Z)(function*(n,t){const e=Be(n),i=t.batch.batchId;try{const r=yield function Aoe(n,t){const e=Be(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,m=f.keys();let y=de.resolve();return m.forEach(v=>{y=y.next(()=>u.getEntry(l,v)).next(w=>{const D=c.docVersions.get(v);it(null!==D),w.version.compareTo(D)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=It();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);Qk(e,i,null),Yk(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Cl(e,r)}catch(r){yield Rc(r)}})).apply(this,arguments)}function pae(n,t,e){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,pe.Z)(function*(n,t,e){const i=Be(n);try{const r=yield function(o,a){const l=Be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(it(null!==f),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);Qk(i,t,e),Yk(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Cl(i,r)}catch(r){yield Rc(r)}})).apply(this,arguments)}function Kk(){return(Kk=(0,pe.Z)(function*(n,t){const e=Be(n);Wc(e.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const a=Be(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Oa.get(i)||[];r.push(t),e.Oa.set(i,r)}catch(i){const r=kp(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})).apply(this,arguments)}function Yk(n,t){(n.Oa.get(t)||[]).forEach(e=>{e.resolve()}),n.Oa.delete(t)}function Qk(n,t,e){const i=Be(n);let r=i.xa[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function Rp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Da.get(t))n.ba.delete(i),e&&n.Sa.ka(i,e);n.Da.delete(t),n.isPrimaryClient&&n.Ma.Vr(t).forEach(i=>{n.Ma.containsKey(i)||Q4(n,i)})}function Q4(n,t){n.Ca.delete(t.path.canonicalString());const e=n.va.get(t);null!==e&&(Ip(n.remoteStore,e),n.va=n.va.remove(t),n.Fa.delete(e),Jk(n))}function Xk(n,t,e){for(const i of e)i instanceof W4?(n.Ma.addReference(i.key,t),mae(n,i)):i instanceof q4?(Me("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,t),n.Ma.containsKey(i.key)||Q4(n,i.key)):Xe()}function mae(n,t){const e=t.key,i=e.path.canonicalString();n.va.get(e)||n.Ca.has(i)||(Me("SyncEngine","New document in limbo: "+e),n.Ca.add(i),Jk(n))}function Jk(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const t=n.Ca.values().next().value;n.Ca.delete(t);const e=new Ue(Gt.fromString(t)),i=n.Na.next();n.Fa.set(i,new sae(e)),n.va=n.va.insert(e,i),FC(n.remoteStore,new wl(is(dp(e.path)),i,"TargetPurposeLimboResolution",oo.oe))}}function Cl(n,t,e){return eM.apply(this,arguments)}function eM(){return eM=(0,pe.Z)(function*(n,t,e){const i=Be(n),r=[],s=[],o=[];var a;i.ba.isEmpty()||(i.ba.forEach((a,l)=>{o.push(i.Ba(l,t,e).then(c=>{if((c||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c&&!c.fromCache?"current":"not-current"),c){r.push(c);const u=ek.Ki(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.Sa.h_(r),yield(a=(0,pe.Z)(function*(c,u){const f=Be(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>de.forEach(u,y=>de.forEach(y.qi,v=>f.persistence.referenceDelegate.addReference(m,y.targetId,v)).next(()=>de.forEach(y.Qi,v=>f.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))}catch(m){if(!Oc(m))throw m;Me("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const y=m.targetId;if(!m.fromCache){const v=f.ns.get(y),D=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);f.ns=f.ns.insert(y,D)}}}),function l(c,u){return a.apply(this,arguments)})(i.localStore,s))}),eM.apply(this,arguments)}function _ae(n,t){return tM.apply(this,arguments)}function tM(){return(tM=(0,pe.Z)(function*(n,t){const e=Be(n);if(!e.currentUser.isEqual(t)){Me("SyncEngine","User change. New user:",t.toKey());const i=yield E4(e.localStore,t);e.currentUser=t,(s=e).Oa.forEach(a=>{a.forEach(l=>{l.reject(new Ie(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Cl(e,i.us)}var s})).apply(this,arguments)}function yae(n,t){const e=Be(n),i=e.Fa.get(t);if(i&&i.wa)return It().add(i.key);{let r=It();const s=e.Da.get(t);if(!s)return r;for(const o of s){const a=e.ba.get(o);r=r.unionWith(a.view.Ea)}return r}}function vae(n,t){return nM.apply(this,arguments)}function nM(){return(nM=(0,pe.Z)(function*(n,t){const e=Be(n),i=yield MC(e.localStore,t.query,!0),r=t.view.pa(i);return e.isPrimaryClient&&Xk(e,t.targetId,r.fa),r})).apply(this,arguments)}function bae(n,t){return iM.apply(this,arguments)}function iM(){return(iM=(0,pe.Z)(function*(n,t){const e=Be(n);return I4(e.localStore,t).then(i=>Cl(e,i))})).apply(this,arguments)}function wae(n,t,e,i){return rM.apply(this,arguments)}function rM(){return(rM=(0,pe.Z)(function*(n,t,e,i){const r=Be(n),s=yield function(a,l){const c=Be(a),u=Be(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>u.vn(f,l).next(m=>m?c.localDocuments.getDocuments(f,m):de.resolve(null)))}(r.localStore,t);var l;null!==s?("pending"===e?yield Ap(r.remoteStore):"acknowledged"===e||"rejected"===e?(Qk(r,t,i||null),Yk(r,t),l=t,Be(Be(r.localStore).mutationQueue).Mn(l)):Xe(),yield Cl(r,s)):Me("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function sM(){return(sM=(0,pe.Z)(function*(n,t){const e=Be(n);if(VC(e),cM(e),!0===t&&!0!==e.La){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield X4(e,i.toArray());e.La=!0,yield Ik(e.remoteStore,!0);for(const s of r)FC(e.remoteStore,s)}else if(!1===t&&!1!==e.La){const i=[];let r=Promise.resolve();e.Da.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Rp(e,o),Tp(e.localStore,o,!0))),Ip(e.remoteStore,o)}),yield r,yield X4(e,i),function(o){const a=Be(o);a.Fa.forEach((l,c)=>{Ip(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new zn(Ue.comparator)}(e),e.La=!1,yield Ik(e.remoteStore,!1)}})).apply(this,arguments)}function X4(n,t,e){return oM.apply(this,arguments)}function oM(){return(oM=(0,pe.Z)(function*(n,t,e){const i=Be(n),r=[],s=[];for(const o of t){let a;const l=i.Da.get(o);if(l&&0!==l.length){a=yield Dp(i.localStore,is(l[0]));for(const c of l){const u=i.ba.get(c),f=yield vae(i,u);f.snapshot&&s.push(f.snapshot)}}else{const c=yield S4(i.localStore,o);a=yield Dp(i.localStore,c),yield jk(i,J4(c),o,!1,a.resumeToken)}r.push(a)}return i.Sa.h_(s),r})).apply(this,arguments)}function J4(n){return Xj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Eae(n){return e=Be(n).localStore,Be(Be(e).persistence).Bi();var e}function Dae(n,t,e,i){return aM.apply(this,arguments)}function aM(){return(aM=(0,pe.Z)(function*(n,t,e,i){const r=Be(n);if(r.La)return void Me("SyncEngine","Ignoring unexpected query state notification.");const s=r.Da.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const o=yield I4(r.localStore,iU(s[0])),a=K_.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,ur.EMPTY_BYTE_STRING);yield Cl(r,o,a);break}case"rejected":yield Tp(r.localStore,t,!0),Rp(r,t,i);break;default:Xe()}})).apply(this,arguments)}function Tae(n,t,e){return lM.apply(this,arguments)}function lM(){return(lM=(0,pe.Z)(function*(n,t,e){const i=VC(n);if(i.La){for(const r of t){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Me("SyncEngine","Adding an already active target "+r);continue}const s=yield S4(i.localStore,r),o=yield Dp(i.localStore,s);yield jk(i,J4(s),o.targetId,!1,o.resumeToken),FC(i.remoteStore,o)}for(const r of e)i.Da.has(r)&&(yield Tp(i.localStore,r,!1).then(()=>{Ip(i.remoteStore,r),Rp(i,r)}).catch(Rc))}})).apply(this,arguments)}function VC(n){const t=Be(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=K4.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yae.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hae.bind(null,t),t.Sa.h_=eae.bind(null,t.eventManager),t.Sa.ka=tae.bind(null,t.eventManager),t}function cM(n){const t=Be(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fae.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pae.bind(null,t),t}class ly{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,pe.Z)(function*(){e.serializer=oy(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return C4(this.persistence,new w4,t.initialUser,this.serializer)}createPersistence(t){return new Yx(AC.Hr,this.serializer)}createSharedClientState(t){return new M4}terminate(){var t=this;return(0,pe.Z)(function*(){var e,i;null===(e=t.gcScheduler)||void 0===e||e.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class uM extends ly{constructor(t,e,i){super(),this.Qa=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,pe.Z)(function*(){yield e().call(i,t),yield i.Qa.initialize(i,t),yield cM(i.Qa.syncEngine),yield Ap(i.Qa.remoteStore),yield i.persistence.fi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return C4(this.persistence,new w4,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new h4(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new Qre(e,this.persistence);return new Yre(t.asyncQueue,i)}createPersistence(t){const e=Jx(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new Xx(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,R4(),NC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new M4}}class e5 extends uM{constructor(t,e){super(t,e,!1),this.Qa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,pe.Z)(function*(){yield e().call(i,t);const r=i.Qa.syncEngine;i.sharedClientState instanceof lk&&(i.sharedClientState.syncEngine={Zs:wae.bind(null,r),Xs:Dae.bind(null,r),eo:Tae.bind(null,r),Bi:Eae.bind(null,r),Ys:bae.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.fi(function(){var s=(0,pe.Z)(function*(o){yield function Cae(n,t){return sM.apply(this,arguments)}(i.Qa.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=R4();if(!lk.D(e))throw new Ie(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Jx(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new lk(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class Op{initialize(t,e){var i=this;return(0,pe.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>Y4(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=_ae.bind(null,i.syncEngine),yield Ik(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Joe}createDatastore(t){const e=oy(t.databaseInfo.databaseId),i=new Foe(t.databaseInfo);return new Boe(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return i=this.localStore,r=this.datastore,s=t.asyncQueue,o=e=>Y4(this.syncEngine,e,0),a=P4.D()?new P4:new Roe,new Uoe(i,r,s,o,a);var i,r,s,o,a}createSyncEngine(t,e){return function(r,s,o,a,l,c,u){const f=new oae(r,s,o,a,l,c);return u&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){var t=this;return(0,pe.Z)(function*(){var e,i;yield(i=(0,pe.Z)(function*(s){const o=Be(s);Me("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield Sp(o),o.O_.shutdown(),o.N_.set("Unknown")}),function r(s){return i.apply(this,arguments)})(t.remoteStore),null===(e=t.datastore)||void 0===e||e.terminate()})()}}function t5(n,t=10240){let e=0;return{read:()=>(0,pe.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class BC{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Bi("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class Aae{constructor(t,e){this.Ua=t,this.serializer=e,this.metadata=new cr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){var t=this;return(0,pe.Z)(function*(){return t.metadata.promise})()}qa(){var t=this;return(0,pe.Z)(function*(){return yield t.getMetadata(),t.Ga()})()}Ga(){var t=this;return(0,pe.Z)(function*(){const e=yield t.za();if(null===e)return null;const i=t.Wa.decode(e),r=Number(i);isNaN(r)&&t.ja(`length string (${i}) is not valid number`);const s=yield t.Ha(r);return new nae(JSON.parse(s),e.length+r)})()}Ja(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}za(){var t=this;return(0,pe.Z)(function*(){for(;t.Ja()<0&&!(yield t.Ya()););if(0===t.buffer.length)return null;const e=t.Ja();e<0&&t.ja("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Ha(t){var e=this;return(0,pe.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ya())&&e.ja("Reached the end of bundle when more is expected.");const i=e.Wa.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}ja(t){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${t}`)}Ya(){var t=this;return(0,pe.Z)(function*(){const e=yield t.Ua.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class xae{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw e.lastTransactionError=new Ie(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),e.lastTransactionError;const i=yield(r=(0,pe.Z)(function*(o,a){const l=Be(o),c={documents:a.map(y=>Q_(l.serializer,y))},u=yield l.xo("BatchGetDocuments",l.serializer.databaseId,Gt.emptyPath(),c,a.length),f=new Map;u.forEach(y=>{const v=function Zse(n,t){return"found"in t?function(i,r){it(!!r.found);const s=xa(i,r.found.name),o=ji(r.found.updateTime),a=r.found.createTime?ji(r.found.createTime):rt.min(),l=new Lr({mapValue:{fields:r.found.fields}});return Xn.newFoundDocument(s,o,a,l)}(n,t):"missing"in t?function(i,r){it(!!r.missing),it(!!r.readTime);const s=xa(i,r.missing),o=ji(r.readTime);return Xn.newNoDocument(s,o)}(n,t):Xe()}(l.serializer,y);f.set(v.key.toString(),v)});const m=[];return a.forEach(y=>{const v=f.get(y.toString());it(!!v),m.push(v)}),m}),function s(o,a){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new _p(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=Ue.fromPath(r);t.mutations.push(new Px(s,t.precondition(s)))}),yield(i=(0,pe.Z)(function*(s,o){const a=Be(s),l={writes:o.map(c=>X_(a.serializer,c))};yield a.Co("Commit",a.serializer.databaseId,Gt.emptyPath(),l)}),function r(s,o){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Xe();e=rt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ie(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(rt.min())?ci.exists(!1):ci.updateTime(e):ci.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(rt.min()))throw new Ie(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ci.updateTime(e)}return ci.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class kae{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Za=i.maxAttempts,this.Yo=new uk(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var t=this;this.Yo.$o((0,pe.Z)(function*(){const e=new xae(t.datastore),i=t.tu(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.nu(s)}))}).catch(r=>{t.nu(r)})}))}tu(t){try{const e=this.updateFunction(t);return!O_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(t){this.Za>0&&this.ru(t)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(t)}ru(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!CU(e)}return!1}}class Mae{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Er.UNAUTHENTICATED,this.clientId=fj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,pe.Z)(function*(a){Me("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(Me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=kp(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function jC(n,t){return dM.apply(this,arguments)}function dM(){return dM=(0,pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,pe.Z)(function*(s){i.isEqual(s)||(yield E4(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),dM.apply(this,arguments)}function hM(n,t){return fM.apply(this,arguments)}function fM(){return(fM=(0,pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield pM(n);Me("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>j4(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>j4(t.remoteStore,r)),n._onlineComponents=t})).apply(this,arguments)}function n5(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function pM(n){return gM.apply(this,arguments)}function gM(){return(gM=(0,pe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jC(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!n5(e))throw e;Hs("Error using user provided cache. Falling back to memory cache: "+e),yield jC(n,new ly)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),yield jC(n,new ly);return n._offlineComponents})).apply(this,arguments)}function UC(n){return mM.apply(this,arguments)}function mM(){return(mM=(0,pe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),yield hM(n,n._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),yield hM(n,new Op))),n._onlineComponents})).apply(this,arguments)}function r5(n){return pM(n).then(t=>t.persistence)}function Np(n){return pM(n).then(t=>t.localStore)}function s5(n){return UC(n).then(t=>t.remoteStore)}function _M(n){return UC(n).then(t=>t.syncEngine)}function Fp(n){return yM.apply(this,arguments)}function yM(){return(yM=(0,pe.Z)(function*(n){const t=yield UC(n),e=t.eventManager;return e.onListen=aae.bind(null,t.syncEngine),e.onUnlisten=cae.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=lae.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=uae.bind(null,t.syncEngine),e})).apply(this,arguments)}function a5(n,t,e={}){const i=new cr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,o,a,l,c){const u=new BC({next:m=>{o.enqueueAndForget(()=>Pk(s,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Ie(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?c.reject(new Ie(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Fk(dp(a.path),u,{includeMetadataChanges:!0,ra:!0});return kk(s,f)}(yield Fp(n),n.asyncQueue,t,e,i)})),i.promise}function l5(n,t,e={}){const i=new cr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,o,a,l,c){const u=new BC({next:m=>{o.enqueueAndForget(()=>Pk(s,f)),m.fromCache&&"server"===l.source?c.reject(new Ie(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Fk(a,u,{includeMetadataChanges:!0,ra:!0});return kk(s,f)}(yield Fp(n),n.asyncQueue,t,e,i)})),i.promise}function c5(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const u5=new Map;function vM(n,t,e){if(!e)throw new Ie(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function d5(n,t,e,i){if(!0===t&&!0===i)throw new Ie(fe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function h5(n){if(!Ue.isDocumentKey(n))throw new Ie(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f5(n){if(Ue.isDocumentKey(n))throw new Ie(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(i=n).constructor?i.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var i;return"function"==typeof n?"a function":Xe()}function Ut(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ie(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=HC(n);throw new Ie(fe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function p5(n,t){if(t<=0)throw new Ie(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class g5{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ie(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ie(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}d5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=c5(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ie(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class cy{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g5({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ie(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g5(t),void 0!==t.credentials&&(this._authCredentials=function(i){if(!i)return new Vre;switch(i.type){case"firstParty":return new Hre(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ie(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=u5.get(e);i&&(Me("ComponentProvider","Removing Datastore"),u5.delete(e),i.terminate())}(this),Promise.resolve()}}class Vr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Vr(this.firestore,t,this._query)}}class Jn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Jn(this.firestore,t,this._key)}}class ka extends Vr{constructor(t,e,i){super(t,e,dp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Jn(this.firestore,null,new Ue(t))}withConverter(t){return new ka(this.firestore,t,this._path)}}function _5(n,t,...e){if(n=(0,yn.m9)(n),vM("collection","path",t),n instanceof cy){const i=Gt.fromString(t,...e);return f5(i),new ka(n,null,i)}{if(!(n instanceof Jn||n instanceof ka))throw new Ie(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Gt.fromString(t,...e));return f5(i),new ka(n.firestore,null,i)}}function zC(n,t,...e){if(n=(0,yn.m9)(n),1===arguments.length&&(t=fj.newId()),vM("doc","path",t),n instanceof cy){const i=Gt.fromString(t,...e);return h5(i),new Jn(n,null,new Ue(i))}{if(!(n instanceof Jn||n instanceof ka))throw new Ie(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Gt.fromString(t,...e));return h5(i),new Jn(n.firestore,n instanceof ka?n.converter:null,new Ue(i))}}function y5(n,t){return n=(0,yn.m9)(n),t=(0,yn.m9)(t),(n instanceof Jn||n instanceof ka)&&(t instanceof Jn||t instanceof ka)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function bM(n,t){return n=(0,yn.m9)(n),t=(0,yn.m9)(t),n instanceof Vr&&t instanceof Vr&&n.firestore===t.firestore&&H_(n._query,t._query)&&n.converter===t.converter}class $ae{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new uk(this,"async_queue_retry"),this.hu=()=>{const e=NC();e&&Me("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=NC();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=NC();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new cr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){var t=this;return(0,pe.Z)(function*(){if(0!==t.su.length){try{yield t.su[0](),t.su.shift(),t.Yo.reset()}catch(e){if(!Oc(e))throw e;Me("AsyncQueue","Operation failed with retryable error: "+e)}t.su.length>0&&t.Yo.$o(()=>t.Tu())}})()}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(i=>{throw this.au=i,this.uu=!1,Bi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(i)),i}).then(i=>(this.uu=!1,i))));return this.iu=e,e}enqueueAfterDelay(t,e,i){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=xk.createAndSchedule(this,t,e,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&Xe()}verifyOperationInProgress(){}du(){var t=this;return(0,pe.Z)(function*(){let e;do{e=t.iu,yield e}while(e!==t.iu)})()}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this._u)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function wM(n){return function(e,i){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Wae{constructor(){this._progressObserver={},this._taskCompletionResolver=new cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class On extends cy{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new $ae,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||v5(this),this._firestoreClient.terminate()}}function ui(n){return n._firestoreClient||v5(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function v5(n){var t,e,i;const r=n._freezeSettings(),s=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new yse(n._databaseId,l,n._persistenceKey,(u=r).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,c5(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._firestoreClient=new Mae(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(e=r.localCache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function b5(n,t,e){const i=new cr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield jC(n,e),yield hM(n,t),i.resolve()}catch(r){const s=r;if(!n5(s))throw s;Hs("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function w5(n){if(n._initialized||n._terminated)throw new Ie(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ma{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ma(ur.fromBase64String(t))}catch(e){throw new Ie(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ma(ur.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class El{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ie(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Rd{constructor(t){this._methodName=t}}class $C{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ie(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ie(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return bt(this._lat,t._lat)||bt(this._long,t._long)}}const nle=/^__.*__$/;class ile{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new bl(t,this.data,this.fieldMask,e,this.fieldTransforms):new mp(t,this.data,e,this.fieldTransforms)}}class C5{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new bl(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function E5(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class WC{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new WC(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return ZC(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(0===t.length)throw this.Du("Document fields must not be empty");if(E5(this.fu)&&nle.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class rle{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||oy(t)}Fu(t,e,i,r=!1){return new WC({fu:t,methodName:e,vu:i,path:Qn.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Od(n){const t=n._freezeSettings(),e=oy(n._databaseId);return new rle(n._databaseId,!!t.ignoreUndefinedProperties,e)}function qC(n,t,e,i,r,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,t,e,r);AM("Data must be an object, but it was:",o,i);const a=S5(i,o);let l,c;if(s.merge)l=new zs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const m=hy(t,f,e);if(!o.contains(m))throw new Ie(fe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);A5(u,m)||u.push(m)}l=new zs(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new ile(new Lr(a),l,c)}class dy extends Rd{_toFieldTransform(t){if(2!==t.fu)throw t.Du(1===t.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dy}}function D5(n,t,e){return new WC({fu:3,vu:t.settings.vu,methodName:n._methodName,yu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class CM extends Rd{_toFieldTransform(t){return new q_(t.path,new pp)}isEqual(t){return t instanceof CM}}class EM extends Rd{constructor(t,e){super(t),this.Mu=e}_toFieldTransform(t){const e=D5(this,t,!0),i=this.Mu.map(s=>Nd(s,e)),r=new Dd(i);return new q_(t.path,r)}isEqual(t){return t instanceof EM&&(0,yn.vZ)(this.Mu,t.Mu)}}class DM extends Rd{constructor(t,e){super(t),this.Mu=e}_toFieldTransform(t){const e=D5(this,t,!0),i=this.Mu.map(s=>Nd(s,e)),r=new Td(i);return new q_(t.path,r)}isEqual(t){return t instanceof DM&&(0,yn.vZ)(this.Mu,t.Mu)}}class TM extends Rd{constructor(t,e){super(t),this.xu=e}_toFieldTransform(t){const e=new gp(t.serializer,uU(t.serializer,this.xu));return new q_(t.path,e)}isEqual(t){return t instanceof TM&&this.xu===t.xu}}function SM(n,t,e,i){const r=n.Fu(1,t,e);AM("Data must be an object, but it was:",r,i);const s=[],o=Lr.empty();Nc(i,(l,c)=>{const u=GC(t,l,e);c=(0,yn.m9)(c);const f=r.Su(u);if(c instanceof dy)s.push(u);else{const m=Nd(c,f);null!=m&&(s.push(u),o.set(u,m))}});const a=new zs(s);return new C5(o,a,r.fieldTransforms)}function IM(n,t,e,i,r,s){const o=n.Fu(1,t,e),a=[hy(t,i,e)],l=[r];if(s.length%2!=0)throw new Ie(fe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(hy(t,s[m])),l.push(s[m+1]);const c=[],u=Lr.empty();for(let m=a.length-1;m>=0;--m)if(!A5(c,a[m])){const y=a[m];let v=l[m];v=(0,yn.m9)(v);const w=o.Su(y);if(v instanceof dy)c.push(y);else{const D=Nd(v,w);null!=D&&(c.push(y),u.set(y,D))}}const f=new zs(c);return new C5(u,f,o.fieldTransforms)}function T5(n,t,e,i=!1){return Nd(e,n.Fu(i?4:3,t))}function Nd(n,t){if(I5(n=(0,yn.m9)(n)))return AM("Unsupported field value:",t,n),S5(n,t);if(n instanceof Rd)return function(i,r){if(!E5(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Nd(a,r.bu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if(null===(i=(0,yn.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return uU(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const s=li.fromDate(i);return{timestampValue:yp(r.serializer,s)}}if(i instanceof li){const s=new li(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yp(r.serializer,s)}}if(i instanceof $C)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ma)return{bytesValue:PU(r.serializer,i._byteString)};if(i instanceof Jn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vx(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${HC(i)}`)}(n,t)}function S5(n,t){const e={};return Mj(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nc(n,(i,r)=>{const s=Nd(r,t.pu(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function I5(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof li||n instanceof $C||n instanceof Ma||n instanceof Jn||n instanceof Rd)}function AM(n,t,e){if(!I5(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=HC(e);throw t.Du("an object"===i?n+" a custom object":n+" "+i)}var r}function hy(n,t,e){if((t=(0,yn.m9)(t))instanceof El)return t._internalPath;if("string"==typeof t)return GC(n,t);throw ZC("Field path arguments must be of type string or ",n,!1,void 0,e)}const sle=new RegExp("[~\\*/\\[\\]]");function GC(n,t,e){if(t.search(sle)>=0)throw ZC(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new El(...t.split("."))._internalPath}catch{throw ZC(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ZC(n,t,e,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Ie(fe.INVALID_ARGUMENT,a+n+l)}function A5(n,t){return n.some(e=>e.isEqual(t))}class fy{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new ole(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(KC("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class ole extends fy{data(){return super.data()}}function KC(n,t){return"string"==typeof t?GC(n,t):t instanceof El?t._internalPath:t._delegate._internalPath}function x5(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xM{}class py extends xM{}function Gc(n,t,...e){let i=[];t instanceof xM&&i.push(t),i=i.concat(e),function(s){const o=s.filter(l=>l instanceof Lp).length,a=s.filter(l=>l instanceof gy).length;if(o>1||o>0&&a>0)throw new Ie(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class gy extends py{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new gy(t,e,i)}_apply(t){const e=this._parse(t);return R5(t._query,e),new Vr(t.firestore,t.converter,kx(t._query,e))}_parse(t){const e=Od(t.firestore);return function(s,o,a,l,c,u,f){let m;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Ie(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){P5(f,u);const y=[];for(const v of f)y.push(M5(l,s,v));m={arrayValue:{values:y}}}else m=M5(l,s,f)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||P5(f,u),m=T5(a,"where",f,"in"===u||"not-in"===u);return Zt.create(c,u,m)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class Lp extends xM{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Lp(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:En.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)R5(o,l),o=kx(o,l)}(t._query,e),new Vr(t.firestore,t.converter,kx(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kM extends py{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new kM(t,e)}_apply(t){const e=function(r,s,o){if(null!==r.startAt)throw new Ie(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new j_(s,o)}(t._query,this._field,this._direction);return new Vr(t.firestore,t.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new yl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class YC extends py{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new YC(t,e,i)}_apply(t){return new Vr(t.firestore,t.converter,pC(t._query,this._limit,this._limitType))}}class QC extends py{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new QC(t,e,i)}_apply(t){const e=k5(t,this.type,this._docOrFields,this._inclusive);return new Vr(t.firestore,t.converter,(s=e,new yl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class XC extends py{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new XC(t,e,i)}_apply(t){const e=k5(t,this.type,this._docOrFields,this._inclusive);return new Vr(t.firestore,t.converter,(s=e,new yl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function k5(n,t,e,i){if(e[0]=(0,yn.m9)(e[0]),e[0]instanceof fy)return function(s,o,a,l,c){if(!l)throw new Ie(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const f of hp(s))if(f.field.isKeyField())u.push(Cd(o,l.key));else{const m=l.data.field(f.field);if(aC(m))throw new Ie(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=f.field.canonicalString();throw new Ie(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}u.push(m)}return new jc(u,c)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Od(n.firestore);return function(o,a,l,c,u,f){const m=o.explicitOrderBy;if(u.length>m.length)throw new Ie(fe.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let v=0;v<u.length;v++){const w=u[v];if(m[v].field.isKeyField()){if("string"!=typeof w)throw new Ie(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!xx(o)&&-1!==w.indexOf("/"))throw new Ie(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const D=o.path.child(Gt.fromString(w));if(!Ue.isDocumentKey(D))throw new Ie(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const P=new Ue(D);y.push(Cd(a,P))}else{const D=T5(l,c,w);y.push(D)}}return new jc(y,f)}(n._query,n.firestore._databaseId,r,t,e,i)}}function M5(n,t,e){if("string"==typeof(e=(0,yn.m9)(e))){if(""===e)throw new Ie(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xx(t)&&-1!==e.indexOf("/"))throw new Ie(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Gt.fromString(e));if(!Ue.isDocumentKey(i))throw new Ie(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Cd(n,new Ue(i))}if(e instanceof Jn)return Cd(n,e._key);throw new Ie(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${HC(e)}.`)}function P5(n,t){if(!Array.isArray(n)||0===n.length)throw new Ie(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function R5(n,t){const e=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Ie(fe.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class MM{convertValue(t,e="none"){switch(Vc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(_l(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Xe()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Nc(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new $C(bi(t.latitude),bi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=lC(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(F_(t));default:return null}}convertTimestamp(t){const e=ml(t);return new li(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Gt.fromString(t);it($U(i));const r=new Fc(i.get(1),i.get(3)),s=new Ue(i.popFirst(5));return r.isEqual(e)||Bi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function JC(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class gle extends MM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ma(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Jn(this.firestore,null,e)}}class Fd{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Dl extends fy{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new my(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(KC("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class my extends Dl{data(t={}){return super.data(t)}}class Zc{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Fd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new my(this._firestore,this._userDataWriter,i.key,i,new Fd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ie(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new my(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Fd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new my(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Fd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:_le(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function _le(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function N5(n,t){return n instanceof Dl&&t instanceof Dl?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Zc&&t instanceof Zc&&n._firestore===t._firestore&&bM(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class Kc extends MM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ma(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Jn(this.firestore,null,e)}}function F5(n,t,e){n=Ut(n,Jn);const i=Ut(n.firestore,On),r=JC(n.converter,t,e);return Vp(i,[qC(Od(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,ci.none())])}function L5(n,t,e,...i){n=Ut(n,Jn);const r=Ut(n.firestore,On),s=Od(r);let o;return o="string"==typeof(t=(0,yn.m9)(t))||t instanceof El?IM(s,"updateDoc",n._key,t,e,i):SM(s,"updateDoc",n._key,t),Vp(r,[o.toMutation(n._key,ci.exists(!0))])}function V5(n,...t){var e,i,r;n=(0,yn.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||wM(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wM(t[o])){const f=t[o];t[o]=null===(e=f.next)||void 0===e?void 0:e.bind(f),t[o+1]=null===(i=f.error)||void 0===i?void 0:i.bind(f),t[o+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}let l,c,u;if(n instanceof Jn)c=Ut(n.firestore,On),u=dp(n._key.path),l={next:f=>{t[o]&&t[o](PM(c,n,f))},error:t[o+1],complete:t[o+2]};else{const f=Ut(n,Vr);c=Ut(f.firestore,On),u=f._query;const m=new Kc(c);l={next:y=>{t[o]&&t[o](new Zc(c,m,f,y))},error:t[o+1],complete:t[o+2]},x5(n._query)}return function(m,y,v,w){const D=new BC(w),P=new Fk(y,D,v);return m.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return kk(yield Fp(m),P)})),()=>{D.$a(),m.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Pk(yield Fp(m),P)}))}}(ui(c),u,a,l)}function Vp(n,t){return function(i,r){const s=new cr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function dae(n,t,e){return $k.apply(this,arguments)}(yield _M(i),r,s)})),s.promise}(ui(n),t)}function PM(n,t,e){const i=e.docs.get(t._key),r=new Kc(n);return new Dl(n,r,t._key,i,new Fd(e.hasPendingWrites,e.fromCache),t.converter)}const Nle={maxAttempts:5};class B5{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Od(t)}set(t,e,i){this._verifyNotCommitted();const r=Yc(t,this._firestore),s=JC(r.converter,e,i),o=qC(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,ci.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Yc(t,this._firestore);let o;return o="string"==typeof(e=(0,yn.m9)(e))||e instanceof El?IM(this._dataReader,"WriteBatch.update",s._key,e,i,r):SM(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,ci.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Yc(t,this._firestore);return this._mutations=this._mutations.concat(new _p(e._key,ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yc(n,t){if((n=(0,yn.m9)(n)).firestore!==t)throw new Ie(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Fle extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=Od(e)}get(e){const i=Yc(e,this._firestore),r=new gle(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||1!==s.length)return Xe();const o=s[0];if(o.isFoundDocument())return new fy(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new fy(this._firestore,r,i._key,null,i.converter);throw Xe()})}set(e,i,r){const s=Yc(e,this._firestore),o=JC(s.converter,i,r),a=qC(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,r);return this._transaction.set(s._key,a),this}update(e,i,r,...s){const o=Yc(e,this._firestore);let a;return a="string"==typeof(i=(0,yn.m9)(i))||i instanceof El?IM(this._dataReader,"Transaction.update",o._key,i,r,s):SM(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(e){const i=Yc(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Yc(t,this._firestore),i=new Kc(this._firestore);return super.get(t).then(r=>new Dl(this._firestore,i,e._key,r._document,new Fd(!1,!1),e.converter))}}function OM(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function z5(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function $5(){if(!function mse(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){ip=Xf.SDK_VERSION,(0,Xf._registerComponent)(new ej.wA("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new On(new jre(i.getProvider("auth-internal")),new zre(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ie(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Xf.registerVersion)(uj,"4.6.3",t),(0,Xf.registerVersion)(uj,"4.6.3","esm2017")}();class _y{constructor(t){this._delegate=t}static fromBase64String(t){return $5(),new _y(Ma.fromBase64String(t))}static fromUint8Array(t){return z5(),new _y(Ma.fromUint8Array(t))}toBase64(){return $5(),this._delegate.toBase64()}toUint8Array(){return z5(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NM(n){return function qle(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class Gle{enableIndexedDbPersistence(t,e){return function Gae(n,t){w5(n=Ut(n,On));const e=ui(n);if(e._uninitializedComponentsProvider)throw new Ie(fe.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Op;return b5(e,r,new uM(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Zae(n){w5(n=Ut(n,On));const t=ui(n);if(t._uninitializedComponentsProvider)throw new Ie(fe.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new Op;return b5(t,i,new e5(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function Kae(n){if(n._initialized&&!n._terminated)throw new Ie(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new cr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(e=(0,pe.Z)(function*(r){if(!Ta.D())return Promise.resolve();const s=r+"main";yield Ta.delete(s)}),function i(r){return e.apply(this,arguments)})(Jx(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class W5{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Fc||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function m5(n,t,e,i={}){var r;const s=(n=Ut(n,cy))._getSettings(),o=`${t}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=Er.MOCK_USER;else{a=(0,yn.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ie(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Er(c)}n._authCredentials=new Bre(new dj(a,l))}}(this._delegate,t,e,i)}enableNetwork(){return function Qae(n){return function Pae(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const t=yield r5(n),e=yield s5(n);return t.setNetworkEnabled(!0),function(r){const s=Be(r);return s.M_.delete(0),ay(s)}(e)}))}(ui(n=Ut(n,On)))}(this._delegate)}disableNetwork(){return function Xae(n){return function Rae(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const t=yield r5(n),e=yield s5(n);return t.setNetworkEnabled(!1),(i=(0,pe.Z)(function*(s){const o=Be(s);o.M_.add(0),yield Sp(o),o.N_.set("Offline")}),function r(s){return i.apply(this,arguments)})(e);var i}))}(ui(n=Ut(n,On)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,d5("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Yae(n){return function(e){const i=new cr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function gae(n,t){return Kk.apply(this,arguments)}(yield _M(e),i)})),i.promise}(ui(n=Ut(n,On)))}(this._delegate)}onSnapshotsInSync(t){return function Sle(n,t){return function Lae(n,t){const e=new BC(t);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Fp(n),s=e,Be(r).z_.add(s),void s.next();var r,s})),()=>{e.$a(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Fp(n),s=e,void Be(r).z_.delete(s);var r,s}))}}(ui(n=Ut(n,On)),wM(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Bp(this,_5(this._delegate,t))}catch(e){throw Cs(e,"collection()","Firestore.collection()")}}doc(t){try{return new Mo(this,zC(this._delegate,t))}catch(e){throw Cs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Es(this,function zae(n,t){if(n=Ut(n,cy),vM("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ie(fe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vr(n,null,(i=t,new yl(Gt.emptyPath(),i)));var i}(this._delegate,t))}catch(e){throw Cs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function Lle(n,t,e){n=Ut(n,On);const i=Object.assign(Object.assign({},Nle),e);return function(s){if(s.maxAttempts<1)throw new Ie(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new cr;return s.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const c=yield function o5(n){return UC(n).then(t=>t.datastore)}(s);new kae(s.asyncQueue,c,a,o,l).Xa()})),l.promise}(ui(n),r=>t(new Fle(n,r)),i)}(this._delegate,e=>t(new q5(this,e)))}batch(){return ui(this._delegate),new G5(new B5(this._delegate,t=>Vp(this._delegate,t)))}loadBundle(t){return function Jae(n,t){const e=ui(n=Ut(n,On)),i=new Wae;return function Vae(n,t,e,i){const r=function(o,a){let l;return l="string"==typeof o?DU().encode(o):o,u=function(u,f){if(u instanceof Uint8Array)return t5(u,f);if(u instanceof ArrayBuffer)return t5(new Uint8Array(u),f);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new Aae(u,a);var u}(e,oy(t));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function Sae(n,t,e){const i=Be(n);var r;(r=(0,pe.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(v,w){const D=Be(v),P=ji(w.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",I=>D.$r.getBundleMetadata(I,w.id)).then(I=>!!I&&I.createTime.compareTo(P)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(v=c).totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}),Promise.resolve(new Set);l._updateProgress($4(c));const u=new iae(c,o.localStore,a.serializer);let f=yield a.qa();for(;f;){const y=yield u._a(f);y&&l._updateProgress(y),f=yield a.qa()}const m=yield u.complete();return yield Cl(o,m.ca,void 0),yield function(v,w){const D=Be(v);return D.persistence.runTransaction("Save bundle","readwrite",P=>D.$r.saveBundleMetadata(P,w))}(o.localStore,c),l._completeWith(m.progress),Promise.resolve(m.ua)}catch(c){return Hs("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var v}),function s(o,a,l){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield _M(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function ele(n,t){return function Bae(n,t){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(i,r){const s=Be(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,r))}(yield Np(n),t)}))}(ui(n=Ut(n,On)),t).then(e=>e?new Vr(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Es(this,e):null)}}class tE extends MM{constructor(t){super(),this.firestore=t}convertBytes(t){return new _y(new Ma(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Mo.forKey(e,this.firestore,null)}}class q5{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new tE(t)}get(t){const e=Vd(t);return this._delegate.get(e).then(i=>new yy(this._firestore,new Dl(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Vd(t);return i?(OM("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Vd(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Vd(t);return this._delegate.delete(e),this}}class G5{constructor(t){this._delegate=t}set(t,e,i){const r=Vd(t);return i?(OM("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Vd(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Vd(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Ld{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new my(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new vy(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Ld.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Ld(t,new tE(t),e),r.set(e,s)),s}}Ld.INSTANCES=new WeakMap;class Mo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new tE(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Mo(e,new Jn(e._delegate,i,new Ue(t)))}static forKey(t,e,i){return new Mo(e,new Jn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Bp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Bp(this.firestore,_5(this._delegate,t))}catch(e){throw Cs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,yn.m9)(t))instanceof Jn&&y5(this._delegate,t)}set(t,e){e=OM("DocumentReference.set",e);try{return e?F5(this._delegate,t,e):F5(this._delegate,t)}catch(i){throw Cs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?L5(this._delegate,t):L5(this._delegate,t,e,...i)}catch(r){throw Cs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Dle(n){return Vp(Ut(n.firestore,On),[new _p(n._key,ci.none())])}(this._delegate)}onSnapshot(...t){const e=Z5(t),i=K5(t,r=>new yy(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return V5(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function vle(n){n=Ut(n,Jn);const t=Ut(n.firestore,On),e=ui(t),i=new Kc(t);return function Oae(n,t){const e=new cr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(i=(0,pe.Z)(function*(s,o,a){try{const l=yield function(u,f){const m=Be(u);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,f))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ie(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=kp(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Np(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Dl(t,i,n._key,r,new Fd(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function ble(n){n=Ut(n,Jn);const t=Ut(n.firestore,On);return a5(ui(t),n._key,{source:"server"}).then(e=>PM(t,n,e))}(this._delegate):function yle(n){n=Ut(n,Jn);const t=Ut(n.firestore,On);return a5(ui(t),n._key).then(e=>PM(t,n,e))}(this._delegate),e.then(i=>new yy(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Mo(this.firestore,this._delegate.withConverter(t?Ld.getInstance(this.firestore,t):null))}}function Cs(n,t,e){return n.message=n.message.replace(t,e),n}function Z5(n){for(const t of n)if("object"==typeof t&&!NM(t))return t;return{}}function K5(n,t){var e,i;let r;return r=NM(n[0])?n[0]:NM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class yy{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return N5(this._delegate,t._delegate)}}class vy extends yy{data(t){const e=this._delegate.data(t);return this._delegate._converter||function Lre(n,t){n||Xe()}(void 0!==e),e}}class Es{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new tE(t)}where(t,e,i){try{return new Es(this.firestore,Gc(this._delegate,function ale(n,t,e){const i=t,r=KC("where",n);return gy._create(r,i,e)}(t,e,i)))}catch(r){throw Cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Es(this.firestore,Gc(this._delegate,function lle(n,t="asc"){const e=t,i=KC("orderBy",n);return kM._create(i,e)}(t,e)))}catch(i){throw Cs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Es(this.firestore,Gc(this._delegate,function cle(n){return p5("limit",n),YC._create("limit",n,"F")}(t)))}catch(e){throw Cs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Es(this.firestore,Gc(this._delegate,function ule(n){return p5("limitToLast",n),YC._create("limitToLast",n,"L")}(t)))}catch(e){throw Cs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Es(this.firestore,Gc(this._delegate,function dle(...n){return QC._create("startAt",n,!0)}(...t)))}catch(e){throw Cs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Es(this.firestore,Gc(this._delegate,function hle(...n){return QC._create("startAfter",n,!1)}(...t)))}catch(e){throw Cs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Es(this.firestore,Gc(this._delegate,function fle(...n){return XC._create("endBefore",n,!1)}(...t)))}catch(e){throw Cs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Es(this.firestore,Gc(this._delegate,function ple(...n){return XC._create("endAt",n,!0)}(...t)))}catch(e){throw Cs(e,"endAt()","Query.endAt()")}}isEqual(t){return bM(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function Cle(n){n=Ut(n,Vr);const t=Ut(n.firestore,On),e=ui(t),i=new Kc(t);return function Nae(n,t){const e=new cr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(i=(0,pe.Z)(function*(s,o,a){try{const l=yield MC(s,o,!0),c=new G4(o,l.hs),u=c.da(l.documents),f=c.applyChanges(u,!1);a.resolve(f.snapshot)}catch(l){const c=kp(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Np(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Zc(t,i,n,r))}(this._delegate):"server"===t?.source?function Ele(n){n=Ut(n,Vr);const t=Ut(n.firestore,On),e=ui(t),i=new Kc(t);return l5(e,n._query,{source:"server"}).then(r=>new Zc(t,i,n,r))}(this._delegate):function wle(n){n=Ut(n,Vr);const t=Ut(n.firestore,On),e=ui(t),i=new Kc(t);return x5(n._query),l5(e,n._query).then(r=>new Zc(t,i,n,r))}(this._delegate),e.then(i=>new FM(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=Z5(t),i=K5(t,r=>new FM(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return V5(this._delegate,e,i)}withConverter(t){return new Es(this.firestore,this._delegate.withConverter(t?Ld.getInstance(this.firestore,t):null))}}class Kle{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new vy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FM{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new vy(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new Kle(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new vy(this._firestore,i))})}isEqual(t){return N5(this._delegate,t._delegate)}}class Bp extends Es{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Mo(this.firestore,t):null}doc(t){try{return new Mo(this.firestore,void 0===t?zC(this._delegate):zC(this._delegate,t))}catch(e){throw Cs(e,"doc()","CollectionReference.doc()")}}add(t){return function Tle(n,t){const e=Ut(n.firestore,On),i=zC(n),r=JC(n.converter,t);return Vp(e,[qC(Od(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ci.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Mo(this.firestore,e))}isEqual(t){return y5(this._delegate,t._delegate)}withConverter(t){return new Bp(this.firestore,this._delegate.withConverter(t?Ld.getInstance(this.firestore,t):null))}}function Vd(n){return Ut(n,Jn)}class LM{constructor(...t){this._delegate=new El(...t)}static documentId(){return new LM(Qn.keyField().canonicalString())}isEqual(t){return(t=(0,yn.m9)(t))instanceof El&&this._delegate._internalPath.isEqual(t._internalPath)}}class Bd{constructor(t){this._delegate=t}static serverTimestamp(){const t=function Ble(){return new CM("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Bd(t)}static delete(){const t=function Vle(){return new dy("deleteField")}();return t._methodName="FieldValue.delete",new Bd(t)}static arrayUnion(...t){const e=function jle(...n){return new EM("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Bd(e)}static arrayRemove(...t){const e=function Ule(...n){return new DM("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Bd(e)}static increment(t){const e=function Hle(n){return new TM("increment",n)}(t);return e._methodName="FieldValue.increment",new Bd(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Yle={Firestore:W5,GeoPoint:$C,Timestamp:li,Blob:_y,Transaction:q5,WriteBatch:G5,DocumentReference:Mo,DocumentSnapshot:yy,Query:Es,QueryDocumentSnapshot:vy,QuerySnapshot:FM,CollectionReference:Bp,FieldPath:LM,FieldValue:Bd,setLogLevel:function Zle(n){!function Fre(n){Pc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Y5(n,t){return function Jle(n,t=Jf){return new pt(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function VM(n,t){return Y5(n,t).pipe(Fe(e=>({payload:e,type:"query"})))}!function Xle(n){(function Qle(n,t){n.INTERNAL.registerComponent(new ej.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},Yle)))})(n,(t,e)=>new W5(t,e,new Gle)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Us.Z);class Q5{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=iH(i,e);return new eH(r,s,this.afs)}snapshotChanges(){return function ece(n,t){return Y5(n,t).pipe(ko(void 0),np(),Fe(e=>{const[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ro)}valueChanges(t={}){return this.snapshotChanges().pipe(Fe(({payload:e})=>t.idField?{...e.data(),[t.idField]:e.id}:e.data()))}get(t){return ee(this.ref.get(t)).pipe(ro)}}function nE(n,t){return VM(n,t).pipe(ko(void 0),np(),Fe(e=>{const[i,r]=e,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=s.find(f=>f.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function X5(n,t,e){return nE(n,e).pipe(Rw((i,r)=>function tce(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function nce(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return BM(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return BM(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return BM(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),xi(),Fe(i=>i.map(r=>({type:r.type,payload:r}))))}function BM(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function J5(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class eH{ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=nE(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Fe(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(ko(void 0),np(),wn(([i,r])=>r.length>0||!i),Fe(([,i])=>i),ro)}auditTrail(t){return this.stateChanges(t).pipe(Rw((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=J5(t);return X5(this.query,e,this.afs.schedulers.outsideAngular).pipe(ro)}valueChanges(t={}){return VM(this.query,this.afs.schedulers.outsideAngular).pipe(Fe(e=>e.payload.docs.map(i=>t.idField?{...i.data(),[t.idField]:i.id}:i.data())),ro)}get(t){return ee(this.query.get(t)).pipe(ro)}add(t){return this.ref.add(t)}doc(t){return new Q5(this.ref.doc(t),this.afs)}}class ice{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?nE(this.query,this.afs.schedulers.outsideAngular).pipe(Fe(e=>e.filter(i=>t.indexOf(i.type)>-1)),wn(e=>e.length>0),ro):nE(this.query,this.afs.schedulers.outsideAngular).pipe(ro)}auditTrail(t){return this.stateChanges(t).pipe(Rw((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=J5(t);return X5(this.query,e,this.afs.schedulers.outsideAngular).pipe(ro)}valueChanges(t={}){return VM(this.query,this.afs.schedulers.outsideAngular).pipe(Fe(i=>i.payload.docs.map(r=>t.idField?{[t.idField]:r.id,...r.data()}:r.data())),ro)}get(t){return ee(this.query.get(t)).pipe(ro)}}const tH=new Te("angularfire2.enableFirestorePersistence"),nH=new Te("angularfire2.firestore.persistenceSettings"),rce=new Te("angularfire2.firestore.settings"),sce=new Te("angularfire2.firestore.use-emulator");function iH(n,t=(e=>e)){return{query:t(n),ref:n}}let Pa=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,s,o,a,l,c,u,f,m,y,v,w,D,P,I){this.schedulers=l;const O=fx(e,a,i),W=u;f&&JB(O,a,m,v,w,D,y,P),[this.firestore,this.persistenceEnabled$]=zB(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{const K=a.runOutsideAngular(()=>O.firestore());if(s&&K.settings(s),W&&K.useEmulator(...W),r&&!Tw(o)){const re=()=>{try{return ee(K.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),we(!1)}};return[K,a.runOutsideAngular(re)]}return[K,we(!1)]},[s,W,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:o}=iH(r,i),a=this.schedulers.ngZone.run(()=>s);return new eH(a,o,this)}collectionGroup(e,i){const r=i||(o=>o),s=this.firestore.collectionGroup(e);return new ice(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new Q5(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(ie(eC),ie(tC,8),ie(tH,8),ie(rce,8),ie(Co),ie(at),ie(UB),ie(nH,8),ie(sce,8),ie(gx,8),ie(GB,8),ie(ZB,8),ie(KB,8),ie(YB,8),ie(QB,8),ie(XB,8),ie(BB,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),oce=(()=>{class n{constructor(){Us.Z.registerVersion("angularfire",hx.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:tH,useValue:!0},{provide:nH,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Wt({type:n});static \u0275inj=Yt({providers:[Pa]})}return n})(),ao=(()=>{class n{constructor(e,i){this.afAuth=e,this.firestore=i,this.user$=this.afAuth.authState}login(e,i){var r=this;return(0,pe.Z)(function*(){yield r.afAuth.signInWithEmailAndPassword(e,i)})()}register(e,i){var r=this;return(0,pe.Z)(function*(){yield r.afAuth.createUserWithEmailAndPassword(e,i)})()}resetPassword(e){var i=this;return(0,pe.Z)(function*(){yield i.afAuth.sendPasswordResetEmail(e)})()}logout(){var e=this;return(0,pe.Z)(function*(){yield e.afAuth.signOut()})()}updateProfile(e,i,r,s,o){var a=this;return(0,pe.Z)(function*(){const l=Us.Z.auth().currentUser;return l?(yield l.updateProfile({displayName:e}),a.firestore.collection("users").doc(l.uid).set({displayName:e,bio:i||"",company:r||"",position:s||"",team:o||""},{merge:!0})):Promise.reject("\u30e6\u30fc\u30b6\u30fc\u304c\u8a8d\u8a3c\u3055\u308c\u3066\u3044\u307e\u305b\u3093")})()}getUserById(e){return this.firestore.collection("users").doc(e).valueChanges()}getCurrentUser(){return Us.Z.auth().currentUser}getCurrentUserId(){const e=this.getCurrentUser();return e?e.uid:null}static#e=this.\u0275fac=function(i){return new(i||n)(ie(gx),ie(Pa))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ace=function(){return["/calendar"]},lce=function(){return["/tasks"]},cce=function(){return["/task-sets"]},uce=function(){return["/projects"]},dce=function(){return["/user-search"]},hce=function(){return["/profile"]};let fce=(()=>{class n{constructor(e,i){this.router=e,this.authService=i,this.title="todo-app",this.router.events.subscribe(r=>{r instanceof hl&&console.log("\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u307e\u3057\u305f:",r.urlAfterRedirects)})}logClick(e,i){i.preventDefault();const r=this.getPathFromLinkName(e);console.log(`${e}\u30ea\u30f3\u30af\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u307e\u3057\u305f`),this.router.navigate([r]).then(()=>{console.log(`${e}\u30ea\u30f3\u30af\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f`)})}getPathFromLinkName(e){switch(e){case"\u30ab\u30ec\u30f3\u30c0\u30fc":return"/calendar";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8":return"/projects";case"\u30bf\u30b9\u30af\u4e00\u89a7":return"/tasks";case"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb":return"/profile";case"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22":return"/user-search";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u9032\u6357":return"/project-progress/\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u3092\u5165\u529b";case"\u30bf\u30b9\u30af\u30bb\u30c3\u30c8":return"/task-sets";default:return"/"}}logOut(){this.authService.logout().then(()=>{this.router.navigate(["/login"])}).catch(e=>{console.error("\u30ed\u30b0\u30a2\u30a6\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f",e)})}static#e=this.\u0275fac=function(i){return new(i||n)(G(ts),G(ao))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-root"]],standalone:!0,features:[Gi],decls:27,vars:12,consts:[[1,"app-container"],[1,"side-nav"],[1,"nav-link",3,"routerLink"],[1,"spacer"],[1,"logout-button",3,"click"],[1,"content"]],template:function(i,r){1&i&&(C(0,"div",0)(1,"div",1)(2,"nav")(3,"ul")(4,"li")(5,"a",2),x(6,"\u30ab\u30ec\u30f3\u30c0\u30fc"),E()(),C(7,"li")(8,"a",2),x(9,"\u30bf\u30b9\u30af\u4e00\u89a7"),E()(),C(10,"li")(11,"a",2),x(12,"\u30bf\u30b9\u30af\u30bb\u30c3\u30c8"),E()(),C(13,"li")(14,"a",2),x(15,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),E()(),C(16,"li")(17,"a",2),x(18,"\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30bf\u30b9\u30af\u691c\u7d22"),E()(),C(19,"li")(20,"a",2),x(21,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),E()()()(),dn(22,"div",3),C(23,"button",4),X("click",function(){return r.logOut()}),x(24,"\u30ed\u30b0\u30a2\u30a6\u30c8"),E()(),C(25,"div",5),dn(26,"router-outlet"),E()()),2&i&&(R(5),N("routerLink",Un(6,ace)),R(3),N("routerLink",Un(7,lce)),R(3),N("routerLink",Un(8,cce)),R(3),N("routerLink",Un(9,uce)),R(3),N("routerLink",Un(10,dce)),R(3),N("routerLink",Un(11,hce)))},dependencies:[nx,mi,Mc,md],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw}.side-nav[_ngcontent-%COMP%]{width:200px;background-color:#f8f9fa;display:flex;flex-direction:column;padding:10px;height:100vh;box-sizing:border-box}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0;flex-grow:1}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;display:flex}.nav-link[_ngcontent-%COMP%]{text-decoration:none;padding:5px 10px;color:#000;border-radius:4px;display:flex;align-items:center;justify-content:center;height:18px;flex:1}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.spacer[_ngcontent-%COMP%]{flex-grow:1}.logout-button[_ngcontent-%COMP%]{padding:10px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer;text-align:center;height:40px;display:flex;align-items:center;justify-content:center}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.content[_ngcontent-%COMP%]{flex-grow:1;padding:30px 0 30px 30px;overflow-y:auto;display:flex;flex-direction:column;margin-right:0}"]})}return n})();class rH{}class pce{}const Tl="*";function iE(n,t=null){return{type:4,styles:t,timings:n}}function aH(n,t=null){return{type:2,steps:n,options:t}}function Qc(n){return{type:6,styles:n,offset:null}}function rE(n,t,e){return{type:0,name:n,styles:t,options:e}}function sE(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class by{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class uH{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function dH(n){return new H(3e3,!1)}function Xc(n){switch(n.length){case 0:return new by;case 1:return n[0];default:return new uH(n)}}function hH(n,t,e=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(t.forEach(l=>{const c=l.get("offset"),u=c==o,f=u&&a||new Map;l.forEach((m,y)=>{let v=y,w=m;if("offset"!==y)switch(v=n.normalizePropertyName(v,r),w){case"!":w=e.get(y);break;case Tl:w=i.get(y);break;default:w=n.normalizeStyleValue(y,v,w,r)}f.set(v,w)}),u||s.push(f),a=f,o=c}),r.length)throw function Lce(n){return new H(3502,!1)}();return s}function UM(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&HM(e,"start",n)));break;case"done":n.onDone(()=>i(e&&HM(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&HM(e,"destroy",n)))}}function HM(n,t,e){const s=zM(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),o=n._data;return null!=o&&(s._data=o),s}function zM(n,t,e,i,r="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function lo(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function fH(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const Kce=(()=>typeof document>"u"?null:document.documentElement)();function $M(n){const t=n.parentNode||n.host||null;return t===Kce?null:t}let jd=null,pH=!1;function gH(n,t){for(;t;){if(t===n)return!0;t=$M(t)}return!1}function mH(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]}let _H=(()=>{class n{validateStyleProperty(e){return function Qce(n){jd||(jd=function Xce(){return typeof document<"u"?document.body:null}()||{},pH=!!jd.style&&"WebkitAppearance"in jd.style);let t=!0;return jd.style&&!function Yce(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in jd.style,!t&&pH&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in jd.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return gH(e,i)}getParentElement(e){return $M(e)}query(e,i,r){return mH(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,o,a=[],l){return new by(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),WM=(()=>{class n{static#e=this.NOOP=new _H}return n})();const Jce=1e3,qM="ng-enter",oE="ng-leave",aE="ng-trigger",lE=".ng-trigger",vH="ng-animating",GM=".ng-animating";function Sl(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ZM(parseFloat(t[1]),t[2])}function ZM(n,t){return"s"===t?n*Jce:n}function cE(n,t,e){return n.hasOwnProperty("duration")?n:function tue(n,t,e){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(dH()),{duration:0,delay:0,easing:""};r=ZM(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=ZM(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!e){let a=!1,l=t.length;r<0&&(t.push(function gce(){return new H(3100,!1)}()),a=!0),s<0&&(t.push(function mce(){return new H(3101,!1)}()),a=!0),a&&t.splice(l,0,dH())}return{duration:r,delay:s,easing:o}}(n,t,e)}function wy(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function bH(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Jc(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function Ra(n,t,e){t.forEach((i,r)=>{const s=YM(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function Ud(n,t){t.forEach((e,i)=>{const r=YM(i);n.style[r]=""})}function Cy(n){return Array.isArray(n)?1==n.length?n[0]:aH(n):n}const KM=new RegExp("{{\\s*(.+?)\\s*}}","g");function CH(n){let t=[];if("string"==typeof n){let e;for(;e=KM.exec(n);)t.push(e[1]);KM.lastIndex=0}return t}function Ey(n,t,e){const i=n.toString(),r=i.replace(KM,(s,o)=>{let a=t[o];return null==a&&(e.push(function yce(n){return new H(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function uE(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const rue=/-+([a-z0-9])/g;function YM(n){return n.replace(rue,(...t)=>t[1].toUpperCase())}function co(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function vce(n){return new H(3004,!1)}()}}function EH(n,t){return window.getComputedStyle(n)[t]}const dE="*";function aue(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function lue(n,t,e){if(":"==n[0]){const l=function cue(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function Rce(n){return new H(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Pce(n){return new H(3015,!1)}()),t;const r=i[1],s=i[2],o=i[3];t.push(DH(r,o));"<"==s[0]&&!(r==dE&&o==dE)&&t.push(DH(o,r))}(i,e,t)):e.push(n),e}const hE=new Set(["true","1"]),fE=new Set(["false","0"]);function DH(n,t){const e=hE.has(n)||fE.has(n),i=hE.has(t)||fE.has(t);return(r,s)=>{let o=n==dE||n==r,a=t==dE||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?hE.has(n):fE.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?hE.has(t):fE.has(t)),o&&a}}const uue=new RegExp("s*:selfs*,?","g");function QM(n,t,e,i){return new due(n).build(t,e,i)}class due{constructor(t){this._driver=t}build(t,e,i){const r=new pue(e);return this._resetContextStyleTimingState(r),co(this,Cy(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function wce(){return new H(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function Cce(){return new H(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{CH(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(uE(s.values()),e.errors.push(function Ece(n,t){return new H(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=co(this,Cy(t.animation),e);return{type:1,matchers:aue(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Hd(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>co(this,i,e)),options:Hd(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=i;const a=co(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:Hd(t.options)}}visitAnimate(t,e){const i=function mue(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return XM(cE(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=XM(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=cE(e,t);return XM(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:Qc({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Qc(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Tl?i.push(a):e.errors.push(new H(3002,!1)):i.push(bH(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let f=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(e.errors.push(function Tce(n,t,e,i,r){return new H(3010,!1)}()),f=!1),s=u.startTime),f&&c.set(l,{startTime:s,endTime:r}),e.options&&function iue(n,t,e){const i=t.params||{},r=CH(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function _ce(n){return new H(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Sce(){return new H(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(P=>{const I=this._makeStyleAst(P,e);let O=null!=I.offset?I.offset:function gue(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(I.styles),W=0;return null!=O&&(s++,W=I.offset=O),l=l||W<0||W>1,a=a||W<c,c=W,o.push(W),I});l&&e.errors.push(function Ice(){return new H(3012,!1)}()),a&&e.errors.push(function Ace(){return new H(3200,!1)}());const f=t.steps.length;let m=0;s>0&&s<f?e.errors.push(function xce(){return new H(3202,!1)}()):0==s&&(m=1/(f-1));const y=f-1,v=e.currentTime,w=e.currentAnimateTimings,D=w.duration;return u.forEach((P,I)=>{const O=m>0?I==y?1:m*I:o[I],W=O*D;e.currentTime=v+w.delay+W,w.duration=W,this._validateStyleAst(P,e),P.offset=O,i.styles.push(P)}),i}visitReference(t,e){return{type:8,animation:co(this,Cy(t.animation),e),options:Hd(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Hd(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Hd(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function hue(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(uue,"")),n=n.replace(/@\*/g,lE).replace(/@\w+/g,e=>lE+"-"+e.slice(1)).replace(/:animating/g,GM),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,lo(e.collectedStyles,e.currentQuerySelector,new Map);const a=co(this,Cy(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Hd(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function kce(){return new H(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:cE(t.timings,e.errors,!0);return{type:12,animation:co(this,Cy(t.animation),e),timings:i,options:null}}}class pue{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Hd(n){return n?(n=wy(n)).params&&(n.params=function fue(n){return n?wy(n):null}(n.params)):n={},n}function XM(n,t,e){return{duration:n,delay:t,easing:e}}function JM(n,t,e,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class pE{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const vue=new RegExp(":enter","g"),wue=new RegExp(":leave","g");function e1(n,t,e,i,r,s=new Map,o=new Map,a,l,c=[]){return(new Cue).buildKeyframes(n,t,e,i,r,s,o,a,l,c)}class Cue{buildKeyframes(t,e,i,r,s,o,a,l,c,u=[]){c=c||new pE;const f=new t1(t,e,c,r,s,u,[]);f.options=l;const m=l.delay?Sl(l.delay):0;f.currentTimeline.delayNextStep(m),f.currentTimeline.setStyles([o],null,f.errors,l),co(this,i,f);const y=f.timelines.filter(v=>v.containsAnimation());if(y.length&&a.size){let v;for(let w=y.length-1;w>=0;w--){const D=y[w];if(D.element===e){v=D;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,f.errors,l)}return y.length?y.map(v=>v.buildKeyframes()):[JM(e,[],[],[],0,m,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:Sl(Ey(s,r?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const o=null!=i.duration?Sl(i.duration):null,a=null!=i.delay?Sl(i.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),co(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gE);const o=Sl(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>co(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Sl(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),co(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return cE(e.params?Ey(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Sl(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gE);let o=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const f=e.createSubContext(t.options,c);s&&f.delayNextStep(s),c===e.element&&(l=f.currentTimeline),co(this,t.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const f=u.currentTime;co(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const gE={};class t1{constructor(t,e,i,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new mE(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Sl(i.duration)),null!=i.delay&&(r.delay=Sl(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=Ey(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new t1(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=gE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new Eue(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(vue,"."+this._enterClassName)).replace(wue,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function Mce(n){return new H(3014,!1)}()),a}}class mE{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new mE(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Tl),this._currentKeyframe.set(e,Tl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function Due(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Tl)}else Jc(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=Ey(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Tl),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Jc(a,new Map,this._backFill);c.forEach((u,f)=>{"!"===u?t.add(f):u===Tl&&e.add(f)}),i||c.set("offset",l/this.duration),r.push(c)});const s=t.size?uE(t.values()):[],o=e.size?uE(e.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return JM(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Eue extends mE{constructor(t,e,i,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=i+e,a=e/o,l=Jc(t[0]);l.set("offset",0),s.push(l);const c=Jc(t[0]);c.set("offset",IH(a)),s.push(c);const u=t.length-1;for(let f=1;f<=u;f++){let m=Jc(t[f]);const y=m.get("offset");m.set("offset",IH((e+y*i)/o)),s.push(m)}i=o,e=0,r="",t=s}return JM(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function IH(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class n1{}const Tue=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Sue extends n1{normalizePropertyName(t,e){return YM(t)}normalizeStyleValue(t,e,i,r){let s="";const o=i.toString().trim();if(Tue.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function bce(n,t){return new H(3005,!1)}())}return o+s}}function AH(n,t,e,i,r,s,o,a,l,c,u,f,m){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:f,errors:m}}const r1={};class xH{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function Iue(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,o,a,l,c,u){const f=[],m=this.ast.options&&this.ast.options.params||r1,v=this.buildStyles(i,a&&a.params||r1,f),w=l&&l.params||r1,D=this.buildStyles(r,w,f),P=new Set,I=new Map,O=new Map,W="void"===r,K={params:Aue(w,m),delay:this.ast.options?.delay},re=u?[]:e1(t,e,this.ast.animation,s,o,v,D,K,c,f);let V=0;if(re.forEach(F=>{V=Math.max(F.duration+F.delay,V)}),f.length)return AH(e,this._triggerName,i,r,W,v,D,[],[],I,O,V,f);re.forEach(F=>{const z=F.element,j=lo(I,z,new Set);F.preStyleProps.forEach(q=>j.add(q));const $=lo(O,z,new Set);F.postStyleProps.forEach(q=>$.add(q)),z!==e&&P.add(z)});const M=uE(P.values());return AH(e,this._triggerName,i,r,W,v,D,re,M,I,O,V)}}function Aue(n,t){const e=wy(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class xue{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=wy(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Ey(o,r,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),i.set(a,o)})}),i}}class Mue{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new xue(r.style,r.options&&r.options.params||{},i))}),kH(this.states,"true","1"),kH(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new xH(t,r,this.states))}),this.fallbackTransition=function Pue(n,t,e){return new xH(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(o=>o.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function kH(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Rue=new pE;class Oue{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=QM(this._driver,e,i,[]);if(i.length)throw function Vce(n){return new H(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=hH(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=e1(this._driver,e,s,qM,oE,new Map,new Map,i,Rue,r),o.forEach(u=>{const f=lo(a,u.element,new Map);u.postStyleProps.forEach(m=>f.set(m,null))})):(r.push(function Bce(){return new H(3300,!1)}()),o=[]),r.length)throw function jce(n){return new H(3504,!1)}();a.forEach((u,f)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(f,y,Tl))})});const c=Xc(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Uce(n){return new H(3301,!1)}();return e}listen(t,e,i,r){const s=zM(e,"","","");return UM(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const MH="ng-animate-queued",s1="ng-animate-disabled",Bue=[],PH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Jo="__ng_removed";class o1{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function $ue(n){return n??null}(i?t.value:t),i){const s=wy(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Dy="void",a1=new o1(Dy);class Uue{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Po(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function Hce(n,t){return new H(3302,!1)}();if(null==i||0==i.length)throw function zce(n){return new H(3303,!1)}();if(!function Wue(n){return"start"==n||"done"==n}(i))throw function $ce(n,t){return new H(3400,!1)}();const s=lo(this._elementListeners,t,[]),o={name:e,phase:i,callback:r};s.push(o);const a=lo(this._engine.statesByElement,t,new Map);return a.has(e)||(Po(t,aE),Po(t,aE+"-"+e),a.set(e,a1)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Wce(n){return new H(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),o=new l1(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Po(t,aE),Po(t,aE+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new o1(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=a1),c.value!==Dy&&l.value===c.value){if(!function Zue(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(l.params,c.params)){const w=[],D=s.matchStyles(l.value,l.params,w),P=s.matchStyles(c.value,c.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{Ud(t,D),Ra(t,P)})}return}const m=lo(this._engine.playersByElement,t,[]);m.forEach(w=>{w.namespaceId==this.id&&w.triggerName==e&&w.queued&&w.destroy()});let y=s.matchTransition(l.value,c.value,t,c.params),v=!1;if(!y){if(!r)return;y=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:v}),v||(Po(t,MH),o.onStart(()=>{jp(t,MH)})),o.onDone(()=>{let w=this.players.indexOf(o);w>=0&&this.players.splice(w,1);const D=this._engine.playersByElement.get(t);if(D){let P=D.indexOf(o);P>=0&&D.splice(P,1)}}),this.players.push(o),m.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,lE,!0);i.forEach(r=>{if(r[Jo])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(t,c,Dy,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&Xc(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||a1,u=new o1(Dy),f=new l1(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Jo];(!s||s===PH)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Po(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=zM(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,UM(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class Hue{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Uue(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(_E(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!_E(e))return;const s=e[Jo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Po(t,s1)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),jp(t,s1))}removeNode(t,e,i){if(_E(e)){const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Jo]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return _E(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,lE,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,GM,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Xc(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Jo];if(e&&e.setForRemoval){if(t[Jo]=PH,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(s1)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Po(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Xc(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function qce(n){return new H(3402,!1)}()}_flushAnimations(t,e){const i=new pE,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Ne=>{u.add(Ne);const Le=this.driver.query(Ne,".ng-animate-queued",!0);for(let qe=0;qe<Le.length;qe++)u.add(Le[qe])});const f=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=NH(m,this.collectedEnterElements),v=new Map;let w=0;y.forEach((Ne,Le)=>{const qe=qM+w++;v.set(Le,qe),Ne.forEach(Ge=>Po(Ge,qe))});const D=[],P=new Set,I=new Set;for(let Ne=0;Ne<this.collectedLeaveElements.length;Ne++){const Le=this.collectedLeaveElements[Ne],qe=Le[Jo];qe&&qe.setForRemoval&&(D.push(Le),P.add(Le),qe.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(Ge=>P.add(Ge)):I.add(Le))}const O=new Map,W=NH(m,Array.from(P));W.forEach((Ne,Le)=>{const qe=oE+w++;O.set(Le,qe),Ne.forEach(Ge=>Po(Ge,qe))}),t.push(()=>{y.forEach((Ne,Le)=>{const qe=v.get(Le);Ne.forEach(Ge=>jp(Ge,qe))}),W.forEach((Ne,Le)=>{const qe=O.get(Le);Ne.forEach(Ge=>jp(Ge,qe))}),D.forEach(Ne=>{this.processLeaveNode(Ne)})});const K=[],re=[];for(let Ne=this._namespaceList.length-1;Ne>=0;Ne--)this._namespaceList[Ne].drainQueuedTransitions(e).forEach(qe=>{const Ge=qe.player,Qt=qe.element;if(K.push(Ge),this.collectedEnterElements.length){const Ei=Qt[Jo];if(Ei&&Ei.setForMove){if(Ei.previousTriggersValues&&Ei.previousTriggersValues.has(qe.triggerName)){const Bl=Ei.previousTriggersValues.get(qe.triggerName),Gs=this.statesByElement.get(qe.element);if(Gs&&Gs.has(qe.triggerName)){const jl=Gs.get(qe.triggerName);jl.value=Bl,Gs.set(qe.triggerName,jl)}}return void Ge.destroy()}}const Tn=!f||!this.driver.containsElement(f,Qt),an=O.get(Qt),ln=v.get(Qt),$t=this._buildInstruction(qe,i,ln,an,Tn);if($t.errors&&$t.errors.length)return void re.push($t);if(Tn)return Ge.onStart(()=>Ud(Qt,$t.fromStyles)),Ge.onDestroy(()=>Ra(Qt,$t.toStyles)),void r.push(Ge);if(qe.isFallbackTransition)return Ge.onStart(()=>Ud(Qt,$t.fromStyles)),Ge.onDestroy(()=>Ra(Qt,$t.toStyles)),void r.push(Ge);const jr=[];$t.timelines.forEach(Ei=>{Ei.stretchStartingKeyframe=!0,this.disabledNodes.has(Ei.element)||jr.push(Ei)}),$t.timelines=jr,i.append(Qt,$t.timelines),o.push({instruction:$t,player:Ge,element:Qt}),$t.queriedElements.forEach(Ei=>lo(a,Ei,[]).push(Ge)),$t.preStyleProps.forEach((Ei,Bl)=>{if(Ei.size){let Gs=l.get(Bl);Gs||l.set(Bl,Gs=new Set),Ei.forEach((jl,yu)=>Gs.add(yu))}}),$t.postStyleProps.forEach((Ei,Bl)=>{let Gs=c.get(Bl);Gs||c.set(Bl,Gs=new Set),Ei.forEach((jl,yu)=>Gs.add(yu))})});if(re.length){const Ne=[];re.forEach(Le=>{Ne.push(function Gce(n,t){return new H(3505,!1)}())}),K.forEach(Le=>Le.destroy()),this.reportError(Ne)}const V=new Map,M=new Map;o.forEach(Ne=>{const Le=Ne.element;i.has(Le)&&(M.set(Le,Le),this._beforeAnimationBuild(Ne.player.namespaceId,Ne.instruction,V))}),r.forEach(Ne=>{const Le=Ne.element;this._getPreviousPlayers(Le,!1,Ne.namespaceId,Ne.triggerName,null).forEach(Ge=>{lo(V,Le,[]).push(Ge),Ge.destroy()})});const F=D.filter(Ne=>LH(Ne,l,c)),z=new Map;OH(z,this.driver,I,c,Tl).forEach(Ne=>{LH(Ne,l,c)&&F.push(Ne)});const $=new Map;y.forEach((Ne,Le)=>{OH($,this.driver,new Set(Ne),l,"!")}),F.forEach(Ne=>{const Le=z.get(Ne),qe=$.get(Ne);z.set(Ne,new Map([...Le?.entries()??[],...qe?.entries()??[]]))});const q=[],ut=[],Rt={};o.forEach(Ne=>{const{element:Le,player:qe,instruction:Ge}=Ne;if(i.has(Le)){if(u.has(Le))return qe.onDestroy(()=>Ra(Le,Ge.toStyles)),qe.disabled=!0,qe.overrideTotalTime(Ge.totalTime),void r.push(qe);let Qt=Rt;if(M.size>1){let an=Le;const ln=[];for(;an=an.parentNode;){const $t=M.get(an);if($t){Qt=$t;break}ln.push(an)}ln.forEach($t=>M.set($t,Qt))}const Tn=this._buildAnimation(qe.namespaceId,Ge,V,s,$,z);if(qe.setRealPlayer(Tn),Qt===Rt)q.push(qe);else{const an=this.playersByElement.get(Qt);an&&an.length&&(qe.parentPlayer=Xc(an)),r.push(qe)}}else Ud(Le,Ge.fromStyles),qe.onDestroy(()=>Ra(Le,Ge.toStyles)),ut.push(qe),u.has(Le)&&r.push(qe)}),ut.forEach(Ne=>{const Le=s.get(Ne.element);if(Le&&Le.length){const qe=Xc(Le);Ne.setRealPlayer(qe)}}),r.forEach(Ne=>{Ne.parentPlayer?Ne.syncPlayerEvents(Ne.parentPlayer):Ne.destroy()});for(let Ne=0;Ne<D.length;Ne++){const Le=D[Ne],qe=Le[Jo];if(jp(Le,oE),qe&&qe.hasAnimation)continue;let Ge=[];if(a.size){let Tn=a.get(Le);Tn&&Tn.length&&Ge.push(...Tn);let an=this.driver.query(Le,GM,!0);for(let ln=0;ln<an.length;ln++){let $t=a.get(an[ln]);$t&&$t.length&&Ge.push(...$t)}}const Qt=Ge.filter(Tn=>!Tn.destroyed);Qt.length?que(this,Le,Qt):this.processLeaveNode(Le)}return D.length=0,q.forEach(Ne=>{this.players.push(Ne),Ne.onDone(()=>{Ne.destroy();const Le=this.players.indexOf(Ne);this.players.splice(Le,1)}),Ne.play()}),q}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Dy;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,f=lo(i,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(y=>{const v=y.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),y.destroy(),f.push(y)})}Ud(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,f=new Set,m=e.timelines.map(v=>{const w=v.element;u.add(w);const D=w[Jo];if(D&&D.removedBeforeQueried)return new by(v.duration,v.delay);const P=w!==l,I=function Gue(n){const t=[];return FH(n,t),t}((i.get(w)||Bue).map(V=>V.getRealPlayer())).filter(V=>!!V.element&&V.element===w),O=s.get(w),W=o.get(w),K=hH(this._normalizer,v.keyframes,O,W),re=this._buildPlayer(v,K,I);if(v.subTimeline&&r&&f.add(w),P){const V=new l1(t,a,w);V.setRealPlayer(re),c.push(V)}return re});c.forEach(v=>{lo(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function zue(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,v.element,v))}),u.forEach(v=>Po(v,vH));const y=Xc(m);return y.onDestroy(()=>{u.forEach(v=>jp(v,vH)),Ra(l,e.toStyles)}),f.forEach(v=>{lo(r,v,[]).push(y)}),y}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new by(t.duration,t.delay)}}class l1{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new by,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>UM(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){lo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function _E(n){return n&&1===n.nodeType}function RH(n,t){const e=n.style.display;return n.style.display=t??"none",e}function OH(n,t,e,i,r){const s=[];e.forEach(l=>s.push(RH(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(f=>{const m=t.computeStyle(c,f,r);u.set(f,m),(!m||0==m.length)&&(c[Jo]=jue,o.push(c))}),n.set(c,u)});let a=0;return e.forEach(l=>RH(l,s[a++])),o}function NH(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function Po(n,t){n.classList?.add(t)}function jp(n,t){n.classList?.remove(t)}function que(n,t,e){Xc(e).onDone(()=>n.processLeaveNode(t))}function FH(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof uH?FH(i.players,t):t.push(i)}}function LH(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class yE{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Hue(t,e,i),this._timelineEngine=new Oue(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=QM(this._driver,s,l,[]);if(l.length)throw function Fce(n,t){return new H(3404,!1)}();a=function kue(n,t,e){return new Mue(n,t,e)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,o]=fH(i);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[o,a]=fH(i);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let Yue=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ra(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ra(this._element,this._initialStyles),this._endStyles&&(Ra(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ud(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ud(this._element,this._endStyles),this._endStyles=null),Ra(this._element,this._initialStyles),this._state=3)}}return n})();function c1(n){let t=null;return n.forEach((e,i)=>{(function Que(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class VH{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:EH(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Xue{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return gH(t,e)}getParentElement(t){return $M(t)}query(t,e,i){return mH(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof VH);(function sue(n,t){return 0===n||0===t})(i,r)&&u.forEach(y=>{y.currentSnapshot.forEach((v,w)=>c.set(w,v))});let f=function nue(n){return n.length?n[0]instanceof Map?n:n.map(t=>bH(t)):[]}(e).map(y=>Jc(y));f=function oue(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,EH(n,a)))}}return t}(t,f,c);const m=function Kue(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=c1(t[0]),t.length>1&&(i=c1(t[t.length-1]))):t instanceof Map&&(e=c1(t)),e||i?new Yue(n,e,i):null}(t,f);return new VH(t,f,l,m)}}let Jue=(()=>{class n extends rH{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Wr.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?aH(e):e;return BH(this._renderer,null,i,"register",[r]),new ede(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vm),ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class ede extends pce{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new tde(this._id,t,e||{},this._renderer)}}class tde{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return BH(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function BH(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const jH="@.disabled";let nde=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new UH("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return i.data.animation.forEach(l),new ide(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vm),ie(yE),ie(at))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class UH{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==jH?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class ide extends UH{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==jH?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function rde(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function sde(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}const HH=[{provide:rH,useClass:Jue},{provide:n1,useFactory:function ade(){return new Sue}},{provide:yE,useClass:(()=>{class n extends yE{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt),ie(WM),ie(n1),ie(Tc))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})()},{provide:Vm,useFactory:function lde(n,t,e){return new nde(n,t,e)},deps:[VA,yE,at]}],u1=[{provide:WM,useFactory:()=>new Xue},{provide:Nm,useValue:"BrowserAnimations"},...HH],zH=[{provide:WM,useClass:_H},{provide:Nm,useValue:"NoopAnimations"},...HH];let cde=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?zH:u1}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:u1,imports:[Mte]})}return n})(),$H=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||n)(G(Xr),G(pn))};static#t=this.\u0275dir=nt({type:n})}return n})(),zd=(()=>{class n extends $H{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275dir=nt({type:n,features:[sn]})}return n})();const Oa=new Te("NgValueAccessor"),dde={provide:Oa,useExisting:fn(()=>Na),multi:!0};let Na=(()=>{class n extends zd{writeValue(e){this.setProperty("checked",e)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&X("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[gn([dde]),sn]})}return n})();const hde={provide:Oa,useExisting:fn(()=>Sr),multi:!0},pde=new Te("CompositionEventMode");let Sr=(()=>{class n extends $H{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fde(){const n=Ic()?Ic().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||n)(G(Xr),G(pn),G(pde,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&X("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[gn([hde]),sn]})}return n})();function eu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const os=new Te("NgValidators"),tu=new Te("NgAsyncValidators");function ZH(n){return eu(n.value)?{required:!0}:null}function bE(n){return null}function ez(n){return null!=n}function tz(n){return Zm(n)?ee(n):n}function nz(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function iz(n,t){return t.map(e=>e(n))}function rz(n){return n.map(t=>function mde(n){return!n.validate}(t)?t:e=>t.validate(e))}function d1(n){return null!=n?function sz(n){if(!n)return null;const t=n.filter(ez);return 0==t.length?null:function(e){return nz(iz(e,t))}}(rz(n)):null}function h1(n){return null!=n?function oz(n){if(!n)return null;const t=n.filter(ez);return 0==t.length?null:function(e){return function ude(...n){const t=qa(n),{args:e,keys:i}=P3(n),r=new pt(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let f=!1;si(e[u]).subscribe(Re(s,m=>{f||(f=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!f)&&(c||s.next(i?R3(i,a):a),s.complete())}))}});return t?r.pipe(HA(t)):r}(iz(e,t).map(tz)).pipe(Fe(nz))}}(rz(n)):null}function az(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function f1(n){return n?Array.isArray(n)?n:[n]:[]}function wE(n,t){return Array.isArray(n)?n.includes(t):n===t}function uz(n,t){const e=f1(t);return f1(n).forEach(r=>{wE(e,r)||e.push(r)}),e}function dz(n,t){return f1(t).filter(e=>!wE(n,e))}class hz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=d1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=h1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Ds extends hz{get formDirective(){return null}get path(){return null}}class nu extends hz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fz{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ir=(()=>{class n extends fz{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(G(nu,2))};static#t=this.\u0275dir=nt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&br("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[sn]})}return n})(),Ty=(()=>{class n extends fz{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(G(Ds,10))};static#t=this.\u0275dir=nt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&br("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[sn]})}return n})();const Sy="VALID",EE="INVALID",Up="PENDING",Iy="DISABLED";function m1(n){return(DE(n)?n.validators:n)||null}function _1(n,t){return(DE(t)?t.asyncValidators:n)||null}function DE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class _z{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Sy}get invalid(){return this.status===EE}get pending(){return this.status==Up}get disabled(){return this.status===Iy}get enabled(){return this.status!==Iy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(uz(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(uz(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(dz(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(dz(t,this._rawAsyncValidators))}hasValidator(t){return wE(this._rawValidators,t)}hasAsyncValidator(t){return wE(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Up,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Iy,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Sy,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sy||this.status===Up)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Iy:Sy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Up,this._hasOwnPendingAsyncValidator=!0;const e=tz(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?Iy:this.errors?EE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Up)?Up:this._anyControlsHaveStatus(EE)?EE:Sy}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){DE(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function bde(n){return Array.isArray(n)?d1(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function wde(n){return Array.isArray(n)?h1(n):n||null}(this._rawAsyncValidators)}}class y1 extends _z{constructor(t,e,i){super(m1(e),_1(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function mz(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new H(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function gz(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new H(1e3,"");if(!i[e])throw new H(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const $d=new Te("CallSetDisabledState",{providedIn:"root",factory:()=>Ay}),Ay="always";function xy(n,t,e=Ay){v1(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function Dde(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yz(n,t)})}(n,t),function Sde(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Tde(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yz(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Ede(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function IE(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function v1(n,t){const e=function lz(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(az(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function cz(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(az(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();IE(t._rawValidators,r),IE(t._rawAsyncValidators,r)}function yz(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Mde={provide:Ds,useExisting:fn(()=>Wd)},ky=(()=>Promise.resolve())();let Wd=(()=>{class n extends Ds{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new $e,this.form=new y1({},d1(e),h1(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ky.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),xy(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ky.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ky.then(()=>{const i=this._findContainer(e.path),r=new y1({});(function vz(n,t){v1(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ky.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){ky.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function bz(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(G(os,10),G(tu,10),G($d,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&X("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([Mde]),sn]})}return n})();function wz(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Cz(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ez=class extends _z{constructor(t=null,e,i){super(m1(e),_1(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),DE(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Cz(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){wz(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){wz(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Cz(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Ode={provide:nu,useExisting:fn(()=>dr)},Sz=(()=>Promise.resolve())();let dr=(()=>{class n extends nu{constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Ez,this._registered=!1,this.name="",this.update=new $e,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function C1(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Sr?e=s:function xde(n){return Object.getPrototypeOf(n.constructor)===zd}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function w1(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xy(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Sz.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&jf(i);Sz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function TE(n,t){return[...t.path,n]}(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||n)(G(Ds,9),G(os,10),G(tu,10),G(Oa,10),G(Sc,8),G($d,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gn([Ode]),sn,zi]})}return n})(),My=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const Nde={provide:Oa,useExisting:fn(()=>Hp),multi:!0};let Hp=(()=>{class n extends zd{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){1&i&&X("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[gn([Nde]),sn]})}return n})(),Iz=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({})}return n})();const E1=new Te("NgModelWithFormControlWarning"),$de={provide:Oa,useExisting:fn(()=>Fa),multi:!0};function Rz(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Fa=(()=>{class n extends zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=Rz(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function Wde(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&X("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[gn([$de]),sn]})}return n})(),iu=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Rz(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(G(pn),G(Xr),G(Fa,9))};static#t=this.\u0275dir=nt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const qde={provide:Oa,useExisting:fn(()=>I1),multi:!0};function Oz(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let I1=(()=>{class n extends zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);r.push(c)}}else{const o=i.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function Gde(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&X("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[gn([qde]),sn]})}return n})(),ru=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Oz(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Oz(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(G(pn),G(Xr),G(I1,9))};static#t=this.\u0275dir=nt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();let qd=(()=>{class n{constructor(){this._validator=bE}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):bE,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=nt({type:n,features:[zi]})}return n})();const Kde={provide:os,useExisting:fn(()=>zp),multi:!0};let zp=(()=>{class n extends qd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>function Fz(n){return"number"==typeof n?n:parseFloat(n)}(e),this.createValidator=e=>function qH(n){return t=>{if(eu(t.value)||eu(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(e)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&gi("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[gn([Kde]),sn]})}return n})();const Yde={provide:os,useExisting:fn(()=>Gd),multi:!0};let Gd=(()=>{class n extends qd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=jf,this.createValidator=e=>ZH}enabled(e){return e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Wi(n)))(r||n)}}();static#t=this.\u0275dir=nt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&gi("required",r._enabled?"":null)},inputs:{required:"required"},features:[gn([Yde]),sn]})}return n})(),zz=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({imports:[Iz]})}return n})(),Ar=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:$d,useValue:e.callSetDisabledState??Ay}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({imports:[zz]})}return n})(),ihe=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:E1,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:$d,useValue:e.callSetDisabledState??Ay}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({imports:[zz]})}return n})();function xE(n,t=0){return function rhe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function Py(n){return Array.isArray(n)?n:[n]}function Qi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function hr(n){return n instanceof pn?n.nativeElement:n}const she=["addListener","removeListener"],ohe=["addEventListener","removeEventListener"],ahe=["on","off"];function $p(n,t,e,i){if(B(e)&&(i=e,e=void 0),i)return $p(n,t,e).pipe(HA(i));const[r,s]=function uhe(n){return B(n.addEventListener)&&B(n.removeEventListener)}(n)?ohe.map(o=>a=>n[o](t,a,e)):function lhe(n){return B(n.addListener)&&B(n.removeListener)}(n)?she.map($z(n,t)):function che(n){return B(n.on)&&B(n.off)}(n)?ahe.map($z(n,t)):[];if(!r&&Tt(n))return In(o=>$p(o,t,e))(si(n));if(!r)throw new TypeError("Invalid event target");return new pt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function $z(n,t){return e=>i=>n[e](t,i)}const Ry={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Ry;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Et(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=Ry;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Ry;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},Wz=new class hhe extends Jw{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class dhe extends Xw{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Ry.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Ry.cancelAnimationFrame(e),t._scheduled=void 0)}});let A1,fhe=1;const kE={};function qz(n){return n in kE&&(delete kE[n],!0)}const phe={setImmediate(n){const t=fhe++;return kE[t]=!0,A1||(A1=Promise.resolve()),A1.then(()=>qz(t)&&n()),t},clearImmediate(n){qz(n)}},{setImmediate:ghe,clearImmediate:mhe}=phe,ME={setImmediate(...n){const{delegate:t}=ME;return(t?.setImmediate||ghe)(...n)},clearImmediate(n){const{delegate:t}=ME;return(t?.clearImmediate||mhe)(n)},delegate:void 0};new class yhe extends Jw{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class _he extends Xw{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=ME.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(ME.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}});function x1(n=0,t,e=bre){let i=-1;return null!=t&&(Wl(t)?e=t:i=t),new pt(r=>{let s=function whe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Gz(n,t=Jf){return function bhe(n){return ge((t,e)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Re(e,c=>{i=!0,r=c,s||si(n(c)).subscribe(s=Re(e,a,l))},()=>{o=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>x1(n,t))}let k1;try{k1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{k1=!1}let Oy,Kd,M1,La=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?d3(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!k1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Co))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zd(n){return function Che(){if(null==Oy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Oy=!0}))}finally{Oy=Oy||!1}return Oy}()?n:!!n.capture}function Ehe(){if(null==Kd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Kd=!1,Kd;if("scrollBehavior"in document.documentElement.style)Kd=!0;else{const n=Element.prototype.scrollTo;Kd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Kd}function P1(n){if(function Dhe(){if(null==M1){const n=typeof document<"u"?document.head:null;M1=!(!n||!n.createShadowRoot&&!n.attachShadow)}return M1}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function R1(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Ro(n){return n.composedPath?n.composedPath()[0]:n.target}function O1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const The=new Te("cdk-dir-doc",{providedIn:"root",factory:function She(){return He(Vt)}}),Ihe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ny=(()=>{class n{constructor(e){this.value="ltr",this.change=new $e,e&&(this.value=function Ahe(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Ihe.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(The,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fy=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({})}return n})(),Kz=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new pt(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(Gz(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):we()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(wn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=hr(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$p(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(at),ie(La),ie(Vt,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),N1=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new se,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Gz(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(La),ie(at),ie(Vt,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),F1=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({})}return n})(),Yz=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({imports:[Fy,F1,Fy,F1]})}return n})();class L1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class V1 extends L1{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class Qz extends L1{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Mhe extends L1{constructor(t){super(),this.element=t instanceof pn?t.nativeElement:t}}class B1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof V1?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Qz?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Mhe?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Phe extends B1{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||qi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let j1=(()=>{class n extends B1{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new $e,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(s,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(G(id),G(vs),G(Vt))};static#t=this.\u0275dir=nt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[sn]})}return n})(),RE=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({})}return n})();const Xz=Ehe();class Rhe{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Qi(-this._previousScrollPosition.left),t.style.top=Qi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Xz&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Xz&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class Ohe{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(wn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Jz{enable(){}disable(){}attach(){}}function U1(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function e6(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Nhe{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();U1(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Fhe=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Jz,this.close=o=>new Ohe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Rhe(this._viewportRuler,this._document),this.reposition=o=>new Nhe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Kz),ie(N1),ie(at),ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class t6{constructor(t){if(this.scrollStrategy=new Jz,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Lhe{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let n6=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vhe=(()=>{class n extends n6{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt),ie(at,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bhe=(()=>{class n extends n6{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ro(s)},this._clickListener=s=>{const o=Ro(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt),ie(La),ie(at,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OE=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||O1()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),O1()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt),ie(La))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Ly{constructor(t,e,i,r,s,o,a,l,c,u=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new se,this._attachments=new se,this._detachments=new se,this._locationChanges=Et.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new se,this._outsidePointerEvents=new se,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ki(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Qi(this._config.width),t.height=Qi(this._config.height),t.minWidth=Qi(this._config.minWidth),t.minHeight=Qi(this._config.minHeight),t.maxWidth=Qi(this._config.maxWidth),t.maxHeight=Qi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=Py(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(es(be(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const i6="cdk-overlay-connected-position-bounding-box",jhe=/([A-Za-z%]+)$/;class Uhe{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new se,this._resizeSubscription=Et.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(i6),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(i6),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==i.originX?o:a}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=s6(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-i.height,v=this._subtractOverflows(s.width,0-o,o+s.width-i.width),w=this._subtractOverflows(s.height,m,y),D=v*w;return{visibleArea:D,isCompletelyWithinViewport:s.width*s.height===D,fitsInViewportVertically:w===s.height,fitsInViewportHorizontally:v==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,o=r6(this._overlayRef.getConfig().minHeight),a=r6(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=s6(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),c=Math.max(s.left-i.left-t.x,0);let u=0,f=0;return u=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-i.left-t.x:0,f=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:u,y:f},{x:t.x+u,y:t.y+f}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Lhe(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,f,m;if("top"===e.overlayY)o=t.y,s=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const y=Math.min(i.bottom-t.y+i.top,t.y),v=this._lastBoundingBoxSize.height;s=2*y,o=t.y-y,s>v&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-v/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)m=i.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)f=t.x,u=i.right-t.x;else{const y=Math.min(i.right-t.x+i.left,t.x),v=this._lastBoundingBoxSize.width;u=2*y,f=t.x-y,u>v&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.x-v/2)}return{top:o,left:f,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Qi(i.height),r.top=Qi(i.top),r.bottom=Qi(i.bottom),r.width=Qi(i.width),r.left=Qi(i.left),r.right=Qi(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Qi(s)),o&&(r.maxWidth=Qi(o))}this._lastBoundingBoxSize=i,Yd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Yd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Yd(i,this._getExactOverlayY(e,t,u)),Yd(i,this._getExactOverlayX(e,t,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Qi(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Qi(o.maxWidth):s&&(i.maxWidth="")),Yd(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Qi(s.y),r}_getExactOverlayX(t,e,i){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Qi(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:e6(t,i),isOriginOutsideView:U1(t,i),isOverlayClipped:e6(e,i),isOverlayOutsideView:U1(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Py(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof pn)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Yd(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function r6(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(jhe);return e&&"px"!==e?null:parseFloat(t)}return n||null}function s6(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const o6="cdk-global-overlay-wrapper";class Hhe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(o6),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",v="",w="";l?w="flex-start":"center"===u?(w="center",m?v=f:y=f):m?"left"===u||"end"===u?(w="flex-end",y=f):("right"===u||"start"===u)&&(w="flex-start",v=f):"left"===u||"start"===u?(w="flex-start",y=f):("right"===u||"end"===u)&&(w="flex-end",v=f),t.position=this._cssPosition,t.marginLeft=l?"0":y,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":v,e.justifyContent=w,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(o6),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let zhe=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Hhe}flexibleConnectedTo(e){return new Uhe(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(N1),ie(Vt),ie(La),ie(OE))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$he=0,qp=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,f,m,y){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=f,this._outsideClickDispatcher=m,this._animationsModuleType=y}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new t6(e);return o.direction=o.direction||this._directionality.value,new Ly(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+$he++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Tc)),new Phe(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Fhe),ie(OE),ie(id),ie(zhe),ie(Vhe),ie(qi),ie(at),ie(Vt),ie(Ny),ie(a_),ie(Bhe),ie(Nm,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ghe={provide:new Te("cdk-connected-overlay-scroll-strategy"),deps:[qp],useFactory:function qhe(n){return()=>n.scrollStrategies.reposition()}};let a6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:[qp,Ghe],imports:[Fy,RE,Yz,Yz]})}return n})();function c6(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function u6(n){return wn((t,e)=>n<=e)}let Jhe=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),efe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:[Jhe]})}return n})();const d6=new Set;let Qd,nfe=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):rfe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function ife(n,t){if(!d6.has(n))try{Qd||(Qd=document.createElement("style"),t&&(Qd.nonce=t),Qd.setAttribute("type","text/css"),document.head.appendChild(Qd)),Qd.sheet&&(Qd.sheet.insertRule(`@media ${n} {body{ }}`,0),d6.add(n))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(La),ie(RS,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rfe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let sfe=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new se}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return h6(Py(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=hd(h6(Py(e)).map(o=>this._registerQuery(o).observable));return s=kw(s.pipe(Ki(1)),s.pipe(u6(1),function tfe(n,t=Jf){return ge((e,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}e.subscribe(Re(i,c=>{s=c,o=t.now(),r||(r=t.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(0))),s.pipe(Fe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new pt(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(ko(i),Fe(({matches:o})=>({query:e,matches:o})),es(this._destroySubject)),mql:i};return this._queries.set(e,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(ie(nfe),ie(at))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h6(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let NE=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function cfe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function lfe(n){try{return n.frameElement}catch{return null}}(function _fe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===m6(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=m6(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function gfe(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function mfe(n){return!function dfe(n){return function ffe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function ufe(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function hfe(n){return function pfe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||g6(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(La))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function g6(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function m6(n){if(!g6(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class yfe{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Ki(1)).subscribe(t)}}let H1=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new yfe(e,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(NE),ie(at),ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z1(n){return 0===n.buttons||0===n.detail}function $1(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const vfe=new Te("cdk-input-modality-detector-options"),bfe={ignoreKeys:[18,17,224,91,16]},Gp=Zd({passive:!0,capture:!0});let wfe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new le(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ro(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(z1(o)?"keyboard":"mouse"),this._mostRecentTarget=Ro(o))},this._onTouchstart=o=>{$1(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ro(o))},this._options={...bfe,...s},this.modalityDetected=this._modality.pipe(u6(1)),this.modalityChanged=this.modalityDetected.pipe(xi()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Gp),r.addEventListener("mousedown",this._onMousedown,Gp),r.addEventListener("touchstart",this._onTouchstart,Gp)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Gp),document.removeEventListener("mousedown",this._onMousedown,Gp),document.removeEventListener("touchstart",this._onTouchstart,Gp))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(La),ie(at),ie(Vt),ie(vfe,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Efe=new Te("cdk-focus-monitor-default-options"),FE=Zd({passive:!0,capture:!0});let W1=(()=>{class n{constructor(e,i,r,s,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new se,this._rootNodeFocusAndBlurListener=a=>{for(let c=Ro(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,i=!1){const r=hr(e);if(!this._platform.isBrowser||1!==r.nodeType)return we();const s=P1(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new se,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=hr(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=hr(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Ro(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,FE),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,FE)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(es(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,FE),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,FE),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(ie(at),ie(La),ie(wfe),ie(Vt,8),ie(Efe,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const y6="cdk-high-contrast-black-on-white",v6="cdk-high-contrast-white-on-black",q1="cdk-high-contrast-active";let b6=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=He(sfe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(q1,y6,v6),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(q1,y6):2===i&&e.add(q1,v6)}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(La),ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dfe=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(b6))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({imports:[efe]})}return n})();function Tfe(n,t){}class LE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let w6=(()=>{class n extends B1{constructor(e,i,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),f},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=R1(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=R1();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=R1())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(G(pn),G(H1),G(Vt,8),G(LE),G(NE),G(at),G(Ly),G(W1))};static#t=this.\u0275cmp=kt({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&qI(j1,7),2&i){let s;ld(s=cd())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&gi("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[sn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&me(0,Tfe,0,0,"ng-template",0)},dependencies:[j1],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class G1{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new se,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!c6(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const C6=new Te("DialogScrollStrategy"),Sfe=new Te("DialogData"),Ife=new Te("DefaultDialogConfig"),xfe={provide:C6,deps:[qp],useFactory:function Afe(n){return()=>n.scrollStrategies.block()}};let kfe=0,E6=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,r,s,o,a){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._ariaHiddenElements=new Map,this.afterAllClosed=Mw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ko(void 0))),this._scrollStrategy=a}open(e,i){(i={...this._defaultOptions||new LE,...i}).id=i.id||"cdk-dialog-"+kfe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new G1(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(e,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Z1(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){Z1(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),Z1(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new t6({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:LE,useValue:r},{provide:G1,useValue:i},{provide:Ly,useValue:e}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=w6;const l=new V1(a,r.viewContainerRef,qi.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,i,r,s){if(e instanceof Do){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Qz(e,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new V1(e,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,s){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:Sfe,useValue:e.data},{provide:G1,useValue:i}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Ny,null,{optional:!0}))&&a.push({provide:Ny,useValue:{value:e.direction,change:we()}}),qi.create({parent:o||s,providers:a})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(ie(qp),ie(qi),ie(Ife,8),ie(n,12),ie(OE),ie(C6))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function Z1(n,t){let e=n.length;for(;e--;)t(n[e])}let Mfe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:[E6,xfe],imports:[a6,RE,Dfe,RE]})}return n})();const Rfe=new Te("mat-sanity-checks",{providedIn:"root",factory:function Pfe(){return!0}});let S6=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!O1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||n)(ie(b6),ie(Rfe,8),ie(Vt))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({imports:[Fy,Fy]})}return n})();const I6=Zd({passive:!0,capture:!0});class Ffe{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=Ro(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){const s=this._events.get(e);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,I6)})}removeHandler(t,e,i){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(i),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,I6)))}}class K1{static#e=this._eventManager=new Ffe;constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=hr(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...A6,...i.animation},o=i.radius||function Vfe(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),y=f.transitionDuration,v="none"===f.transitionProperty||"0s"===y||"0s, 0s"===y||0===r.width&&0===r.height,w=new Nfe(this,u,i,v);u.style.transform="scale3d(1, 1, 1)",w.state=0,i.persistent||(this._mostRecentTransientRipple=w);return!v&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const P=()=>this._finishRippleTransition(w),I=()=>this._destroyRipple(w);u.addEventListener("transitionend",P),u.addEventListener("transitioncancel",I)}),this._activeRipples.set(w,null),(v||!c)&&this._finishRippleTransition(w),w}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...A6,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=hr(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,k6.forEach(i=>{K1._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{M6.forEach(e=>{this._triggerElement.addEventListener(e,this,x6)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=z1(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!$1(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(k6.forEach(e=>K1._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&M6.forEach(e=>t.removeEventListener(e,this,x6)))}}function Bfe(n,t){}class VE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Y1="mdc-dialog--open",P6="mdc-dialog--opening",R6="mdc-dialog--closing";let Hfe=(()=>{class n extends w6{constructor(e,i,r,s,o,a,l,c){super(e,i,r,s,o,a,l,c),this._animationStateChanged=new $e}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}static#e=this.\u0275fac=function(i){return new(i||n)(G(pn),G(H1),G(Vt,8),G(VE),G(NE),G(at),G(Ly),G(W1))};static#t=this.\u0275cmp=kt({type:n,selectors:[["ng-component"]],features:[sn],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const O6="--mat-dialog-transition-duration";function N6(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?xE(n.substring(0,n.length-2)):n.endsWith("s")?1e3*xE(n.substring(0,n.length-1)):"0"===n?0:null}let zfe=(()=>{class n extends Hfe{constructor(e,i,r,s,o,a,l,c,u){super(e,i,r,s,o,a,l,u),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?N6(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?N6(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(O6,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(P6,Y1)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Y1),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Y1),this._animationsEnabled?(this._hostElement.style.setProperty(O6,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(R6)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(P6,R6)}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}static#e=this.\u0275fac=function(i){return new(i||n)(G(pn),G(H1),G(Vt,8),G(VE),G(NE),G(at),G(Ly),G(Nm,8),G(W1))};static#t=this.\u0275cmp=kt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(TI("id",r._config.id),gi("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),br("_mat-animation-noopable",!r._animationsEnabled))},features:[sn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(C(0,"div",0)(1,"div",1),me(2,Bfe,0,0,"ng-template",2),E()())},dependencies:[j1],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class ou{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new se,this._beforeClosed=new se,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(wn(r=>"opened"===r.state),Ki(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(wn(r=>"closed"===r.state),Ki(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),be(this.backdropClick(),this.keydownEvents().pipe(wn(r=>27===r.keyCode&&!this.disableClose&&!c6(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function $fe(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(wn(e=>"closing"===e.state),Ki(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const Zp=new Te("MatMdcDialogData"),Wfe=new Te("mat-mdc-dialog-default-options"),F6=new Te("mat-mdc-dialog-scroll-strategy"),Gfe={provide:F6,deps:[qp],useFactory:function qfe(n){return()=>n.scrollStrategies.block()}};let Zfe=0,Kfe=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,r,s,o,a,l,c,u,f){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._idPrefix="mat-dialog-",this.dialogConfigClass=VE,this.afterAllClosed=Mw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ko(void 0))),this._scrollStrategy=a,this._dialog=i.get(E6)}open(e,i){let r;(i={...this._defaultOptions||new VE,...i}).id=i.id||`${this._idPrefix}${Zfe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:LE,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static#e=this.\u0275fac=function(i){XS()};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),Kp=(()=>{class n extends Kfe{constructor(e,i,r,s,o,a,l,c){super(e,i,s,a,l,o,ou,zfe,Zp,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(ie(qp),ie(qi),ie(a_,8),ie(Wfe,8),ie(F6),ie(n,12),ie(OE),ie(Nm,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),Yfe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:[Kp,Gfe],imports:[Mfe,a6,RE,S6,S6]})}return n})();class BE{}class jE{}class Va{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Va?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Va;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Va?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Qfe{encodeKey(t){return V6(t)}encodeValue(t){return V6(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Jfe=/%(\d[a-f0-9])/gi,epe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function V6(n){return encodeURIComponent(n).replace(Jfe,(t,e)=>epe[e]??t)}function UE(n){return`${n}`}class au{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Qfe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Xfe(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(UE):[UE(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new au({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(UE(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(UE(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class tpe{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function B6(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function j6(n){return typeof Blob<"u"&&n instanceof Blob}function U6(n){return typeof FormData<"u"&&n instanceof FormData}class By{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function npe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Va),this.context||(this.context=new tpe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new au,this.urlWithParams=e}serializeBody(){return null===this.body?null:B6(this.body)||j6(this.body)||U6(this.body)||function ipe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof au?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||U6(this.body)?null:j6(this.body)?this.body.type||null:B6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof au?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((f,m)=>f.set(m,t.setHeaders[m]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((f,m)=>f.set(m,t.setParams[m]),c)),new By(e,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Yp=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Yp||{});class Q1{constructor(t,e=200,i="OK"){this.headers=t.headers||new Va,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class X1 extends Q1{constructor(t={}){super(t),this.type=Yp.ResponseHeader}clone(t={}){return new X1({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Qp extends Q1{constructor(t={}){super(t),this.type=Yp.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Qp({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class H6 extends Q1{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function J1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let rpe=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof By)s=e;else{let l,c;l=r.headers instanceof Va?r.headers:new Va(r.headers),r.params&&(c=r.params instanceof au?r.params:new au({fromObject:r.params})),s=new By(e,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=we(s).pipe(Hf(l=>this.handler.handle(l)));if(e instanceof By||"events"===r.observe)return o;const a=o.pipe(wn(l=>l instanceof Qp));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Fe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Fe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Fe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Fe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new au).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,J1(r,i))}post(e,i,r={}){return this.request("POST",e,J1(r,i))}put(e,i,r={}){return this.request("PUT",e,J1(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(BE))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function W6(n,t){return t(n)}function ope(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}const lpe=new Te(""),jy=new Te(""),q6=new Te("");function cpe(){let n=null;return(t,e)=>{null===n&&(n=(He(lpe,{optional:!0})??[]).reduceRight(ope,W6));const i=He(aw),r=i.add();return n(t,e).pipe(p_(()=>i.remove(r)))}}let G6=(()=>{class n extends BE{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=He(aw)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(jy),...this.injector.get(q6,[])]));this.chain=r.reduceRight((s,o)=>function ape(n,t,e){return(i,r)=>e.runInContext(()=>t(i,s=>n(s,r)))}(s,o,this.injector),W6)}const i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(p_(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(jE),ie(to))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const fpe=/^\)\]\}',?\n/;let K6=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new H(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?ee(i.\u0275loadImpl()):we(null)).pipe(lt(()=>new pt(s=>{const o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((w,D)=>o.setRequestHeader(w,D.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const w=e.detectContentTypeHeader();null!==w&&o.setRequestHeader("Content-Type",w)}if(e.responseType){const w=e.responseType.toLowerCase();o.responseType="json"!==w?w:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const w=o.statusText||"OK",D=new Va(o.getAllResponseHeaders()),P=function ppe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new X1({headers:D,status:o.status,statusText:w,url:P}),l},u=()=>{let{headers:w,status:D,statusText:P,url:I}=c(),O=null;204!==D&&(O=typeof o.response>"u"?o.responseText:o.response),0===D&&(D=O?200:0);let W=D>=200&&D<300;if("json"===e.responseType&&"string"==typeof O){const K=O;O=O.replace(fpe,"");try{O=""!==O?JSON.parse(O):null}catch(re){O=K,W&&(W=!1,O={error:re,text:O})}}W?(s.next(new Qp({body:O,headers:w,status:D,statusText:P,url:I||void 0})),s.complete()):s.error(new H6({error:O,headers:w,status:D,statusText:P,url:I||void 0}))},f=w=>{const{url:D}=c(),P=new H6({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:D||void 0});s.error(P)};let m=!1;const y=w=>{m||(s.next(c()),m=!0);let D={type:Yp.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(D.total=w.total),"text"===e.responseType&&o.responseText&&(D.partialText=o.responseText),s.next(D)},v=w=>{let D={type:Yp.UploadProgress,loaded:w.loaded};w.lengthComputable&&(D.total=w.total),s.next(D)};return o.addEventListener("load",u),o.addEventListener("error",f),o.addEventListener("timeout",f),o.addEventListener("abort",f),e.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",v)),o.send(a),s.next({type:Yp.Sent}),()=>{o.removeEventListener("error",f),o.removeEventListener("abort",f),o.removeEventListener("load",u),o.removeEventListener("timeout",f),e.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",v)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(h3))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const eP=new Te("XSRF_ENABLED"),Y6=new Te("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Q6=new Te("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class X6{}let _pe=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=e3(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt),ie(Co),ie(Y6))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function ype(n,t){const e=n.url.toLowerCase();if(!He(eP)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=He(X6).getToken(),r=He(Q6);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var lu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(lu||{});function vpe(...n){const t=[rpe,K6,G6,{provide:BE,useExisting:G6},{provide:jE,useExisting:K6},{provide:jy,useValue:ype,multi:!0},{provide:eP,useValue:!0},{provide:X6,useClass:_pe}];for(const e of n)t.push(...e.\u0275providers);return SS(t)}const J6=new Te("LEGACY_INTERCEPTOR_FN");function bpe(){return function Xd(n,t){return{\u0275kind:n,\u0275providers:t}}(lu.LegacyInterceptors,[{provide:J6,useFactory:cpe},{provide:jy,useExisting:J6,multi:!0}])}let wpe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:[vpe(bpe())]})}return n})();function e$(n=0,t=Jf){return n<0&&(n=0),x1(n,n,t)}var Ipe=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){void 0===e&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i={top:(i=t.getBoundingClientRect()).top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var s=this.offsetParent(t);i=this.offset(t,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){void 0===e&&(e=!0);var i=t.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft,s={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(t,e,i,r){var s=i.split("-"),o=s[0],a=void 0===o?"top":o,l=s[1],c=void 0===l?"center":l,u=r?this.offset(t,!1):this.position(t,!1),f=this.getAllStyles(e),m=parseFloat(f.marginTop),y=parseFloat(f.marginBottom),v=parseFloat(f.marginLeft),w=parseFloat(f.marginRight),D=0,P=0;switch(a){case"top":D=u.top-(e.offsetHeight+m+y);break;case"bottom":D=u.top+u.height;break;case"left":P=u.left-(e.offsetWidth+v+w);break;case"right":P=u.left+u.width}switch(c){case"top":D=u.top;break;case"bottom":D=u.top+u.height-e.offsetHeight;break;case"left":P=u.left;break;case"right":P=u.left+u.width-e.offsetWidth;break;case"center":"top"===a||"bottom"===a?P=u.left+u.width/2-e.offsetWidth/2:D=u.top+u.height/2-e.offsetHeight/2}e.style.transform="translate("+Math.round(P)+"px, "+Math.round(D)+"px)";var I=e.getBoundingClientRect(),O=document.documentElement,W=window.innerHeight||O.clientHeight,K=window.innerWidth||O.clientWidth;return I.left>=0&&I.top>=0&&I.right<=K&&I.bottom<=W},n}(),Ape=/\s+/,t$=new Ipe,ea=function(){return ea=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},ea.apply(this,arguments)},tP=function(n,t,e){if(e||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},nP=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(nP||{}),kpe=[nP.SUNDAY,nP.SATURDAY],iP=7,cu=86400;function n$(n,t){var e=t.startDate,r=t.excluded,s=t.precision;if(r.length<1)return 0;for(var a=n.getDay,l=n.addDays,c=(0,n.addSeconds)(e,t.seconds-1),u=a(e),f=a(c),m=0,y=e,v=function(){var w=a(y);r.some(function(D){return D===w})&&(m+=function Mpe(n,t){var i=t.day,s=t.dayEnd,o=t.startDate,a=t.endDate,l=n.differenceInSeconds,u=n.startOfDay;if("minutes"===t.precision){if(i===t.dayStart)return l((0,n.endOfDay)(o),o)+1;if(i===s)return l(a,u(a))+1}return cu}(n,{dayStart:u,dayEnd:f,day:w,precision:s,startDate:e,endDate:c})),y=l(y,1)};y<c;)v();return m}function Uy(n,t){var i=t.periodStart,r=t.periodEnd;return t.events.filter(function(s){return function Ope(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,s=n.isSameSecond,o=e.start,a=e.end||e.start;return!!(o>i&&o<r||a>i&&a<r||o<i&&a>r||s(o,i)||s(o,r)||s(a,i)||s(a,r))}(n,{event:s,periodStart:i,periodEnd:r})})}function i$(n,t){var e=t.date,i=t.weekendDays,r=void 0===i?kpe:i,o=n.isSameDay,a=n.getDay,l=(0,n.startOfDay)(new Date),c=a(e);return{date:e,day:c,isPast:e<l,isToday:o(e,l),isFuture:e>l,isWeekend:r.indexOf(c)>-1}}function sP(n,t){for(var r=t.excluded,s=void 0===r?[]:r,o=t.weekendDays,a=t.viewStart,l=void 0===a?n.startOfWeek(t.viewDate,{weekStartsOn:t.weekStartsOn}):a,c=t.viewEnd,u=void 0===c?n.addDays(l,iP):c,f=n.addDays,m=n.getDay,y=[],v=l;v<u;)s.some(function(w){return m(v)===w})||y.push(i$(n,{date:v,weekendDays:o})),v=f(v,1);return y}function Fpe(n,t){var e=t.events,i=void 0===e?[]:e,r=t.excluded,s=void 0===r?[]:r,o=t.precision,a=void 0===o?"days":o,l=t.absolutePositionedEvents,c=void 0!==l&&l,u=t.viewStart,f=t.viewEnd;u=n.startOfDay(u),f=n.endOfDay(f);var m=n.differenceInSeconds,y=n.differenceInDays,v=function Npe(n,t){for(var i=t.date2,r=t.excluded,s=t.date1,o=0;s<i;)-1===r.indexOf(n.getDay(s))&&o++,s=n.addDays(s,1);return o}(n,{date1:u,date2:f,excluded:s}),w=y(f,u)+1,D=i.filter(function(O){return O.allDay}).map(function(O){var W=function Rpe(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,s=t.precision,o=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(e.start<i)return 0;var c=0;switch(s){case"days":c=o(a(e.start),i)*cu;break;case"minutes":c=l(e.start,i)}return c-=n$(n,{startDate:i,seconds:c,excluded:r,precision:s}),Math.abs(c/cu)}(n,{event:O,startOfWeek:u,excluded:s,precision:a}),K=function Ppe(n,t){var e=t.event,i=t.offset,s=t.excluded,o=t.precision,a=t.totalDaysInView,c=n.differenceInSeconds,u=n.addDays,f=n.endOfDay,m=n.differenceInDays,y=cu,v=(0,n.max)([e.start,t.startOfWeekDate]);e.end&&(y="minutes"===o?c(e.end,v):m(u(f(e.end),1),v)*cu);var w=i*cu,P=a*cu;return w+y>P&&(y=P-w),(y-=n$(n,{startDate:v,seconds:y,excluded:s,precision:o}))/cu}(n,{event:O,offset:W,startOfWeekDate:u,excluded:s,precision:a,totalDaysInView:w});return{event:O,offset:W,span:K}}).filter(function(O){return O.offset<v}).filter(function(O){return O.span>0}).map(function(O){return{event:O.event,offset:O.offset,span:O.span,startsBeforeWeek:O.event.start<u,endsAfterWeek:(O.event.end||O.event.start)>f}}).sort(function(O,W){var K=m(O.event.start,W.event.start);return 0===K?m(W.event.end||W.event.start,O.event.end||O.event.start):K}),P=[],I=[];return D.forEach(function(O,W){if(-1===I.indexOf(O)){I.push(O);var K=O.span+O.offset,re=D.slice(W+1).filter(function(F){if(F.offset>=K&&K+F.span<=w&&-1===I.indexOf(F)){var z=F.offset-K;return c||(F.offset=z),K+=F.span+z,I.push(F),!0}}),V=tP([O],re,!0),M=V.filter(function(F){return F.event.id}).map(function(F){return F.event.id}).join("-");P.push(ea({row:V},M?{id:M}:{}))}}),P}function Lpe(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.hourDuration,o=t.dayStart,a=t.dayEnd,l=t.weekStartsOn,c=t.excluded,u=t.weekendDays,f=t.segmentHeight,m=t.viewStart,y=t.viewEnd,v=t.minimumEventHeight,w=function Upe(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,s=t.dayStart,o=t.dayEnd,a=n.setMinutes,l=n.setHours,c=n.startOfDay,u=n.startOfMinute,f=n.endOfDay,m=n.addMinutes,y=n.addDays,v=[],w=a(l(c(e),WE(s.hour)),qE(s.minute)),D=a(l(u(f(e)),WE(o.hour)),qE(o.minute)),P=(r||60)/i,I=c(e),O=f(e),W=function(z){return z};n.getTimezoneOffset(I)!==n.getTimezoneOffset(O)&&(I=y(I,1),w=y(w,1),D=y(D,1),W=function(z){return y(z,-1)});for(var K=r?1440/r:60,re=0;re<K;re++){for(var V=[],M=0;M<i;M++){var F=m(m(w,re*(r||60)),M*P);F>=w&&F<D&&V.push({date:W(F),displayDate:F,isStart:0===M})}V.length>0&&v.push({segments:V})}return v}(n,{viewDate:i,hourSegments:r,hourDuration:s,dayStart:o,dayEnd:a}),D=sP(n,{viewDate:i,weekStartsOn:l,excluded:c,weekendDays:u,viewStart:m,viewEnd:y}),P=n.setHours,I=n.setMinutes,O=n.getHours,W=n.getMinutes;return D.map(function(K){var re=function jpe(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.dayStart,o=t.dayEnd,a=t.eventWidth,l=t.segmentHeight,c=t.hourDuration,u=t.minimumEventHeight,f=n.setMinutes,m=n.setHours,y=n.startOfDay,v=n.startOfMinute,w=n.endOfDay,D=n.differenceInMinutes,P=f(m(y(i),WE(s.hour)),qE(s.minute)),I=f(m(v(w(i)),WE(o.hour)),qE(o.minute));I.setSeconds(59,999);var O=[],W=Uy(n,{events:e.filter(function(M){return!M.allDay}),periodStart:P,periodEnd:I}),K=W.sort(function(M,F){return M.start.valueOf()-F.start.valueOf()}).map(function(M){var F=M.start,z=M.end||F,j=F<P,$=z>I,q=r*l/(c||60),ut=0;if(F>P){var Rt=n.getTimezoneOffset(F),Le=n.getTimezoneOffset(P)-Rt;ut+=D(F,P)+Le}ut*=q,ut=Math.floor(ut);var qe=j?P:F,Ge=$?I:z,Qt=n.getTimezoneOffset(qe)-n.getTimezoneOffset(Ge),Tn=D(Ge,qe)+Qt;M.end?Tn*=q:Tn=l,u&&Tn<u&&(Tn=u),Tn=Math.floor(Tn);for(var ln=$E(O,ut,ut+Tn),$t=0;ln.some(function(fo){return fo.left===$t});)$t+=a;var jr={event:M,height:Tn,width:a,top:ut,left:$t,startsBeforeDay:j,endsAfterDay:$};return O.push(jr),jr}),re=Math.max.apply(Math,K.map(function(M){return M.left+M.width})),V=Uy(n,{events:e.filter(function(M){return M.allDay}),periodStart:y(P),periodEnd:w(I)});return{events:K,width:re,allDayEvents:V,period:{events:W,start:P,end:I}}}(n,{events:e,viewDate:K.date,hourSegments:r,dayStart:o,dayEnd:a,segmentHeight:f,eventWidth:1,hourDuration:s,minimumEventHeight:v}),V=w.map(function(z){var j=z.segments.map(function($){var q=I(P(K.date,O($.date)),W($.date));return ea(ea({},$),{date:q})});return ea(ea({},z),{segments:j})});function M(z,j){var $=Math.max.apply(Math,j.map(function(ut){return ut.left+1})),q=z.filter(function(ut){return ut.left>=$}).filter(function(ut){return $E(j,ut.top,ut.top+ut.height).length>0});return q.length>0?M(z,q):$}var F=re.events.map(function(z){var $=100/M(re.events,$E(re.events,z.top,z.top+z.height));return ea(ea({},z),{left:z.left*$,width:$})});return{hours:V,date:K.date,events:F.map(function(z){var j=$E(F.filter(function($){return $.left>z.left}),z.top,z.top+z.height);return j.length>0?ea(ea({},z),{width:Math.min.apply(Math,j.map(function($){return $.left}))-z.left}):z})}})}function $E(n,t,e){return n.filter(function(i){var r=i.top,s=i.top+i.height;return t<s&&s<e||t<r&&r<e||r<=t&&e<=s})}function WE(n){return Math.max(Math.min(23,n),0)}function qE(n){return Math.max(Math.min(59,n),0)}var Xp=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(Xp||{});function oP(n,t){return n=function Wpe(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}(n,t),"function"==typeof n?function(){for(var i=arguments,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=i[o];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},r$=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":aP(n))&&1===n.nodeType&&"object"===aP(n.style)&&"object"===aP(n.ownerDocument)};function s$(n,t){if(t=cP(t,!0),!r$(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function lP(n,t){return-1!==s$(n,t)}function Gpe(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return function qpe(n,t){for(var e=0;e<t.length;e++)lP(n,t[e])||n.push(t[e]);return t}(n,e=e.map(cP))}function Zpe(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(cP).reduce(function(r,s){var o=s$(n,s);return-1!==o?r.concat(n.splice(o,1)):r},[])}function cP(n,t){if("string"==typeof n)try{return document.querySelector(n)}catch(e){throw e}if(!r$(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function o$(n){if(n===window)return function Ype(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}();try{var t=n.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var t,uP=void 0;"function"!=typeof Object.create?(t=function(){},uP=function(e,i){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===e&&(r.__proto__=null),r}):uP=Object.create;var Xpe=uP,Jd=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function dP(n,t){t=t||{};for(var e=Xpe(n),i=0;i<Jd.length;i++)void 0!==t[Jd[i]]&&(e[Jd[i]]=t[Jd[i]]);return e}function hP(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var Hy=["webkit","moz","ms","o"],zy=function(){if(typeof window>"u")return function(){};for(var n=0,t=Hy.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[Hy[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-e),o=window.setTimeout(function(){return i(r+s)},s);return e=r+s,o}}return window.requestAnimationFrame.bind(window)}(),Jp=function(){if(typeof window>"u")return function(){};for(var n=0,t=Hy.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[Hy[n]+"CancelAnimationFrame"]||window[Hy[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function ege(n,t){void 0===t&&(t={});var e=this,i=4,r=!1;if("object"!=typeof t.margin){var s=t.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var o={},a=function Kpe(n,t){var e=oP((t=t||{}).allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,o=s.documentElement,a=s.body;n.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}(o),l=function Jpe(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function e(s){for(var o=0;o<Jd.length;o++)t[Jd[o]]=s[Jd[o]]}return void 0!==n&&n.addEventListener("mousemove",e),{destroy:function r(){n&&n.removeEventListener("mousemove",e,!1),t=null},dispatch:MouseEvent?function(o,a,l){var c=new MouseEvent("mousemove",dP(t,a));return hP(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEvent?function(o,a,l){var c=dP(t,a),u=document.createEvent("MouseEvents");return u.initMouseEvent("mousemove",!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),hP(u,l),o.dispatchEvent(u)}:"function"==typeof document.createEventObject?function(o,a,l){var c=document.createEventObject(),u=dP(t,a);for(var f in u)c[f]=u[f];return hP(c,l),o.dispatchEvent(c)}:void 0}}(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=oP(t.autoScroll),this.syncMove=oP(t.syncMove,!1),this.destroy=function(j){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",w,!1),window.removeEventListener("touchstart",w,!1),window.removeEventListener("mouseup",D,!1),window.removeEventListener("touchend",D,!1),window.removeEventListener("pointerup",D,!1),window.removeEventListener("mouseleave",I,!1),window.removeEventListener("mousemove",K,!1),window.removeEventListener("touchmove",K,!1),window.removeEventListener("scroll",v,!0),n=[],j&&P()},this.add=function(){for(var j=[],$=arguments.length;$--;)j[$]=arguments[$];return Gpe.apply(void 0,[n].concat(j)),this},this.remove=function(){for(var j=[],$=arguments.length;$--;)j[$]=arguments[$];return Zpe.apply(void 0,[n].concat(j))};var f,j,u=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),j=n,n=[],j.forEach(function($){$===window?u=window:e.add($)}),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return i}},point:{get:function(){return o}},scrolling:{get:function(){return r}}});var y,m=null;function v(j){for(var $=0;$<n.length;$++)if(n[$]===j.target){r=!0;break}r&&zy(function(){return r=!1})}function w(){c=!0}function D(){c=!1,P()}function P(){Jp(y),Jp(f)}function I(){c=!1}function W(){for(var j=null,$=0;$<n.length;$++)a$(o,n[$])&&(j=n[$]);return j}function K(j){if(e.autoScroll()&&!j.dispatched){var $=j.target,q=document.body;m&&!a$(o,m)&&(e.scrollWhenOutside||(m=null)),$&&$.parentNode===q?$=W():($=function O(j){if(!j)return null;if(m===j||lP(n,j))return j;for(;j=j.parentNode;)if(lP(n,j))return j;return null}($),$||($=W())),$&&$!==m&&(m=$),u&&(Jp(f),f=zy(re)),m&&(Jp(y),y=zy(V))}}function re(){M(u),Jp(f),f=zy(re)}function V(){m&&(M(m),Jp(y),y=zy(V))}function M(j){var q,ut,$=o$(j);q=o.x<$.left+e.margin.left?Math.floor(Math.max(-1,(o.x-$.left)/e.margin.left-1)*e.maxSpeed.left):o.x>$.right-e.margin.right?Math.ceil(Math.min(1,(o.x-$.right)/e.margin.right+1)*e.maxSpeed.right):0,ut=o.y<$.top+e.margin.top?Math.floor(Math.max(-1,(o.y-$.top)/e.margin.top-1)*e.maxSpeed.top):o.y>$.bottom-e.margin.bottom?Math.ceil(Math.min(1,(o.y-$.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):0,e.syncMove()&&l.dispatch(j,{pageX:o.pageX+q,pageY:o.pageY+ut,clientX:o.x+q,clientY:o.y+ut}),setTimeout(function(){ut&&function F(j,$){j===window?window.scrollTo(j.pageXOffset,j.pageYOffset+$):j.scrollTop+=$}(j,ut),q&&function z(j,$){j===window?window.scrollTo(j.pageXOffset+$,j.pageYOffset):j.scrollLeft+=$}(j,q)})}window.addEventListener("mousedown",w,!1),window.addEventListener("touchstart",w,!1),window.addEventListener("mouseup",D,!1),window.addEventListener("touchend",D,!1),window.addEventListener("pointerup",D,!1),window.addEventListener("mousemove",K,!1),window.addEventListener("touchmove",K,!1),window.addEventListener("mouseleave",I,!1),window.addEventListener("scroll",v,!0)}function a$(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:function Qpe(n,t){var e=o$(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}(n,t)}function fP(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function GE(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}let l$=(()=>{class n{constructor(){this.currentDrag=new se}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c$=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(G(pn))},n.\u0275dir=nt({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),pP=(()=>{class n{constructor(e,i,r,s,o,a,l){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new $e,this.dragStart=new $e,this.ghostElementCreated=new $e,this.dragging=new $e,this.dragEnd=new $e,this.pointerDown$=new se,this.pointerMove$=new se,this.pointerUp$=new se,this.eventListenerSubscriptions={},this.destroy$=new se,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const e=this.pointerDown$.pipe(wn(()=>this.canDrag()),In(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),o=new pt(y=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",w=>y.next(w))).pipe(ko(s),Fe(()=>this.getScrollPosition())),a=new se,l=new WB;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const c=be(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(et()),u=hd([this.pointerMove$,o]).pipe(Fe(([y,v])=>({currentDrag$:a,transformX:y.clientX-i.clientX,transformY:y.clientY-i.clientY,clientX:y.clientX,clientY:y.clientY,scrollLeft:v.left,scrollTop:v.top,target:y.event.target})),Fe(y=>(this.dragSnapGrid.x&&(y.transformX=Math.round(y.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(y.transformY=Math.round(y.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),y)),Fe(y=>(this.dragAxis.x||(y.transformX=0),this.dragAxis.y||(y.transformY=0),y)),Fe(y=>{const v=y.scrollLeft-s.left,w=y.scrollTop-s.top;return{...y,x:y.transformX+v,y:y.transformY+w}}),wn(({x:y,y:v,transformX:w,transformY:D})=>!this.validateDrag||this.validateDrag({x:y,y:v,transform:{x:w,y:D}})),es(c),et()),f=u.pipe(Ki(1),et()),m=u.pipe(Ow(1),et());return f.subscribe(({clientX:y,clientY:v,x:w,y:D})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function tge(n,t){return new ege(n,t)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),fP(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const P=this.element.nativeElement.getBoundingClientRect(),I=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(I):this.element.nativeElement.parentNode.insertBefore(I,this.element.nativeElement.nextSibling),this.ghostElement=I,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(I,{position:"fixed",top:`${P.top}px`,left:`${P.left}px`,width:`${P.width}px`,height:`${P.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const O=this.vcr.createEmbeddedView(this.ghostElementTemplate);I.innerHTML="",O.rootNodes.filter(W=>W instanceof Node).forEach(W=>{I.appendChild(W)}),m.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(O))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:y-w,clientY:v-D,element:I})}),m.subscribe(()=>{I.parentElement.removeChild(I),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),m.pipe(In(y=>{const v=l.pipe(function $pe(n){return function zpe(n,t){return ge(L3(n,t,arguments.length>=2,!1,!0))}((t,e,i)=>!n||n(e,i)?t+1:t,0)}(),Ki(1),Fe(w=>({...y,dragCancelled:w>0})));return l.complete(),v})).subscribe(({x:y,y:v,dragCancelled:w})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:y,y:v,dragCancelled:w})}),GE(this.renderer,this.element,this.dragActiveClass),a.complete()}),be(c,m).pipe(Ki(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),u}),et());be(e.pipe(Ki(1),Fe(i=>[,i])),e.pipe(np())).pipe(wn(([i,r])=>!i||i.x!==r.x||i.y!==r.y),Fe(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:c,target:u})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const f=`translate3d(${l}px, ${c}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:f,"-webkit-transform":f,"-ms-transform":f,"-moz-transform":f,"-o-transform":f})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:u})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){0===e.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){0===e.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=$p(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=$p(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(e,l,i)),(!this.touchStartLongPress||!s||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){const s=this.getScrollPosition(),o_top=Math.abs(s.top-r.top),o_left=Math.abs(s.left-r.left),a=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-o_left,l=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-o_top,u=this.touchStartLongPress;return(a+l>u.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=u.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const e=this.getScrollElement();return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(G(pn),G(Xr),G(l$),G(at),G(vs),G(c$,8),G(Vt))},n.\u0275dir=nt({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[zi]}),n})();function u$(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}let gP=(()=>{class n{constructor(e,i,r,s,o){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=o,this.dragEnter=new $e,this.dragLeave=new $e,this.dragOver=new $e,this.drop=new $e}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{fP(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const o=e.pipe(Fe(({clientX:c,clientY:u,dropData:f,target:m})=>{s={clientX:c,clientY:u,dropData:f,target:m},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const y=u$(c,u,i.rect),v=!this.validateDrop||this.validateDrop({clientX:c,clientY:u,target:m,dropData:f});return i.scrollContainerRect?y&&v&&u$(c,u,i.scrollContainerRect):y&&v})),a=o.pipe(xi());let l;a.pipe(wn(c=>c)).subscribe(()=>{l=!0,fP(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(wn(c=>c)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(np(),wn(([c,u])=>c&&!u)).subscribe(()=>{l=!1,GE(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),e.subscribe({complete:()=>{r(),GE(this.renderer,this.element,this.dragActiveClass),l&&(GE(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(G(pn),G(l$),G(at),G(Xr),G(c$,8))},n.\u0275dir=nt({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),ZE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Yt({}),n})();const eh=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function d$(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let rge=0;function h$(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${rge++}`)}function f$(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function p$(n,t,e,i){const r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}const g$=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function m$(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function KE({edges:n,initialRectangle:t,newRectangle:e}){const i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}const _$="resize-active";let y$=(()=>{class n{constructor(e,i,r,s){this.platformId=e,this.renderer=i,this.elm=r,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=g$,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new $e,this.resizing=new $e,this.resizeEnd=new $e,this.mouseup=new se,this.mousedown=new se,this.mousemove=new se,this.destroy$=new se,this.pointerEventListeners=eg.getInstance(i,s)}ngOnInit(){const e=be(this.pointerEventListeners.pointerDown,this.mousedown),i=be(this.pointerEventListeners.pointerMove,this.mousemove).pipe(lr(({event:c})=>{s&&c.cancelable&&c.preventDefault()}),et()),r=be(this.pointerEventListeners.pointerUp,this.mouseup);let s;const o=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>({...g$,...this.resizeCursors});e.pipe(In(c=>{function u(y){return{clientX:y.clientX-c.clientX,clientY:y.clientY-c.clientY}}const f=()=>{const y={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?y.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(y.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?y.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(y.y=+this.resizeSnapGrid.bottom)),y};function m(y,v){return{x:Math.ceil(y.clientX/v.x),y:Math.ceil(y.clientY/v.y)}}return be(i.pipe(Ki(1)).pipe(Fe(y=>[,y])),i.pipe(np())).pipe(Fe(([y,v])=>[y&&u(y),u(v)])).pipe(wn(([y,v])=>{if(!y)return!0;const w=f(),D=m(y,w),P=m(v,w);return D.x!==P.x||D.y!==P.y})).pipe(Fe(([,y])=>{const v=f();return{clientX:Math.round(y.clientX/v.x)*v.x,clientY:Math.round(y.clientY/v.y)*v.y}})).pipe(es(be(r,e)))})).pipe(wn(()=>!!s)).pipe(Fe(({clientX:c,clientY:u})=>p$(s.startingRect,s.edges,c,u))).pipe(wn(c=>this.allowNegativeResizes||!!(c.height&&c.width&&c.height>0&&c.width>0))).pipe(wn(c=>!this.validateResize||this.validateResize({rectangle:c,edges:KE({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c})})),es(this.destroy$)).subscribe(c=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${c.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${c.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${c.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${c.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:KE({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c}),rectangle:c})}),s.currentRect=c}),e.pipe(Fe(({edges:c})=>c||{}),wn(c=>Object.keys(c).length>0),es(this.destroy$)).subscribe(c=>{s&&o();const u=function sge(n,t){let e=0,i=0;const r=n.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(o&&o.includes("translate")&&(e=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===t)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{const a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-e,right:a.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:c,startingRect:u,currentRect:u};const f=a(),m=m$(s.edges,f);this.renderer.setStyle(document.body,"cursor",m),this.setElementClass(this.elm,_$,!0),this.enableGhostResize&&(s.clonedNode=function ige(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),"canvas"===i?f$(n,t):("input"===i||"select"===i||"textarea"===i)&&h$(n,t),d$("canvas",n,t,f$),d$("input, textarea, select",n,t,h$),t}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",m$(s.edges,f)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:KE({edges:c,initialRectangle:u,newRectangle:u}),rectangle:p$(u,{},0,0)})})}),r.pipe(es(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,_$),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:KE({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),o(),s=null)})}ngOnDestroy(){d3(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)(G(Co),G(Xr),G(pn),G(at))},n.\u0275dir=nt({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class eg{constructor(t,e){this.pointerDown=new pt(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),eh&&(s=t.listen("document","touchstart",o=>{i.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{r(),eh&&s()}}).pipe(et()),this.pointerMove=new pt(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),eh&&(s=t.listen("document","touchmove",o=>{i.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{r(),eh&&s()}}).pipe(et()),this.pointerUp=new pt(i=>{let r,s,o;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),eh&&(s=t.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),o=t.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),eh&&(s(),o())}}).pipe(et())}static getInstance(t,e){return eg.instance||(eg.instance=new eg(t,e)),eg.instance}}let lge=(()=>{class n{constructor(e,i,r,s){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new se}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),eh&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),be(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return $p(this.element.nativeElement,e).pipe(es(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)(G(Xr),G(pn),G(at),G(y$,8))},n.\u0275dir=nt({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),v$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Yt({}),n})();const cge=function(n){return{action:n}};function uge(n,t){if(1&n){const e=We();C(0,"a",5),X("mwlClick",function(r){const o=te(e).$implicit,a=U(2).event;return ne(o.onClick({event:a,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=te(e).$implicit,a=U(2).event;return ne(o.onClick({event:a,sourceEvent:r}))}),qt(1,"calendarA11y"),E()}if(2&n){const e=t.$implicit;N("ngClass",e.cssClass)("innerHtml",e.label,A0),gi("aria-label",Yn(1,3,Jt(6,cge,e),"actionButtonLabel"))}}function dge(n,t){if(1&n&&(C(0,"span",3),me(1,uge,2,8,"a",4),E()),2&n){const e=U(),i=e.event,r=e.trackByActionId;R(1),N("ngForOf",i.actions)("ngForTrackBy",r)}}function hge(n,t){1&n&&me(0,dge,2,2,"span",2),2&n&&N("ngIf",t.event.actions)}function fge(n,t){}const pge=function(n,t){return{event:n,trackByActionId:t}},tg=function(){return{}};function gge(n,t){if(1&n&&(dn(0,"span",2),qt(1,"calendarEventTitle"),qt(2,"calendarA11y")),2&n){const e=t.event;N("innerHTML",wa(1,2,e.title,t.view,e),A0),gi("aria-hidden",Yn(2,6,Un(9,tg),"hideEventTitle"))}}function mge(n,t){}const _ge=function(n,t){return{event:n,view:t}};function yge(n,t){if(1&n&&(C(0,"div",2),dn(1,"div",3)(2,"div",4),E()),2&n){const e=t.contents;N("ngClass","cal-tooltip-"+t.placement),R(2),N("innerHtml",e,A0)}}function vge(n,t){}const bge=function(n,t,e){return{contents:n,placement:t,event:e}};function wge(n,t){if(1&n&&(C(0,"span",7),x(1),E()),2&n){const e=U().day;R(1),Je(e.badgeTotal)}}const mP=function(n){return{backgroundColor:n}},Cge=function(n,t){return{event:n,draggedFrom:t}},$y=function(n,t){return{x:n,y:t}},YE=function(){return{delay:300,delta:30}};function Ege(n,t){if(1&n){const e=We();C(0,"div",10),X("mouseenter",function(){const s=te(e).$implicit;return ne(U(2).highlightDay.emit({event:s}))})("mouseleave",function(){const s=te(e).$implicit;return ne(U(2).unhighlightDay.emit({event:s}))})("mwlClick",function(r){const o=te(e).$implicit;return ne(U(2).eventClicked.emit({event:o,sourceEvent:r}))}),qt(1,"calendarEventTitle"),qt(2,"calendarA11y"),E()}if(2&n){const e=t.$implicit,i=U(2),r=i.tooltipPlacement,s=i.tooltipTemplate,o=i.tooltipAppendToBody,a=i.tooltipDelay,l=i.day,c=i.validateDrag;br("cal-draggable",e.draggable),N("ngStyle",Jt(22,mP,null==e.color?null:e.color.primary))("ngClass",null==e?null:e.cssClass)("mwlCalendarTooltip",wa(1,15,e.title,"monthTooltip",e))("tooltipPlacement",r)("tooltipEvent",e)("tooltipTemplate",s)("tooltipAppendToBody",o)("tooltipDelay",a)("dropData",Fi(24,Cge,e,l))("dragAxis",Fi(27,$y,e.draggable,e.draggable))("validateDrag",c)("touchStartLongPress",Un(30,YE)),gi("aria-hidden",Yn(2,19,Un(31,tg),"hideMonthCellEvents"))}}function Dge(n,t){if(1&n&&(C(0,"div",8),me(1,Ege,3,32,"div",9),E()),2&n){const e=U(),i=e.day,r=e.trackByEventId;R(1),N("ngForOf",i.events)("ngForTrackBy",r)}}const Tge=function(n,t){return{day:n,locale:t}};function Sge(n,t){if(1&n&&(C(0,"div",2),qt(1,"calendarA11y"),C(2,"span",3),me(3,wge,2,1,"span",4),C(4,"span",5),x(5),qt(6,"calendarDate"),E()()(),me(7,Dge,2,2,"div",6)),2&n){const e=t.day,i=t.locale;gi("aria-label",Yn(1,4,Fi(11,Tge,e,i),"monthCell")),R(3),N("ngIf",e.badgeTotal>0),R(2),Je(wa(6,7,e.date,"monthViewDayNumber",i)),R(2),N("ngIf",e.events.length>0)}}function Ige(n,t){}const Age=function(n,t,e,i,r,s,o,a,l,c,u,f){return{day:n,openDay:t,locale:e,tooltipPlacement:i,highlightDay:r,unhighlightDay:s,eventClicked:o,tooltipTemplate:a,tooltipAppendToBody:l,tooltipDelay:c,trackByEventId:u,validateDrag:f}},xge=function(n){return{event:n}},b$=function(n,t){return{event:n,locale:t}};function kge(n,t){if(1&n){const e=We();C(0,"div",7),dn(1,"span",8),x(2," "),C(3,"mwl-calendar-event-title",9),X("mwlClick",function(r){const o=te(e).$implicit;return ne(U(2).eventClicked.emit({event:o,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=te(e).$implicit;return ne(U(2).eventClicked.emit({event:o,sourceEvent:r}))}),qt(4,"calendarA11y"),E(),x(5," "),dn(6,"mwl-calendar-event-actions",10),E()}if(2&n){const e=t.$implicit,i=U(2).validateDrag,r=U();br("cal-draggable",e.draggable),N("ngClass",null==e?null:e.cssClass)("dropData",Jt(16,xge,e))("dragAxis",Fi(18,$y,e.draggable,e.draggable))("validateDrag",i)("touchStartLongPress",Un(21,YE)),R(1),N("ngStyle",Jt(22,mP,null==e.color?null:e.color.primary)),R(2),N("event",e)("customTemplate",r.eventTitleTemplate),gi("aria-label",Yn(4,13,Fi(24,b$,e,r.locale),"eventDescription")),R(3),N("event",e)("customTemplate",r.eventActionsTemplate)}}const w$=function(n,t){return{date:n,locale:t}};function Mge(n,t){if(1&n&&(C(0,"div",3),dn(1,"span",4),qt(2,"calendarA11y"),dn(3,"span",5),qt(4,"calendarA11y"),me(5,kge,7,27,"div",6),E()),2&n){const e=U(),i=e.events,r=e.trackByEventId,s=U();N("@collapse",void 0),R(1),gi("aria-label",Yn(2,5,Fi(11,w$,s.date,s.locale),"openDayEventsAlert")),R(2),gi("aria-label",Yn(4,8,Fi(14,w$,s.date,s.locale),"openDayEventsLandmark")),R(2),N("ngForOf",i)("ngForTrackBy",r)}}function Pge(n,t){1&n&&me(0,Mge,6,17,"div",2),2&n&&N("ngIf",t.isOpen)}function Rge(n,t){}const Oge=function(n,t,e,i,r){return{events:n,eventClicked:t,isOpen:e,trackByEventId:i,validateDrag:r}};function Nge(n,t){if(1&n){const e=We();C(0,"div",4),X("click",function(r){const o=te(e).$implicit;return ne(U(2).columnHeaderClicked.emit({isoDayNumber:o.day,sourceEvent:r}))}),x(1),qt(2,"calendarDate"),E()}if(2&n){const e=t.$implicit,i=U().locale;br("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),N("ngClass",e.cssClass),R(1),yi(" ",wa(2,10,e.date,"monthViewColumnHeader",i)," ")}}function Fge(n,t){if(1&n&&(C(0,"div",2),me(1,Nge,3,14,"div",3),E()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;R(1),N("ngForOf",e)("ngForTrackBy",i)}}function Lge(n,t){}const Vge=function(n,t,e){return{days:n,locale:t,trackByWeekDayHeaderDate:e}};function Bge(n,t){if(1&n){const e=We();C(0,"mwl-calendar-month-cell",7),X("mwlClick",function(r){const o=te(e).$implicit;return ne(U(2).dayClicked.emit({day:o,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=te(e).$implicit;return ne(U(2).dayClicked.emit({day:o,sourceEvent:r}))})("highlightDay",function(r){return te(e),ne(U(2).toggleDayHighlight(r.event,!0))})("unhighlightDay",function(r){return te(e),ne(U(2).toggleDayHighlight(r.event,!1))})("drop",function(r){const o=te(e).$implicit;return ne(U(2).eventDropped(o,r.dropData.event,r.dropData.draggedFrom))})("eventClicked",function(r){return te(e),ne(U(2).eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))}),qt(1,"calendarA11y"),E()}if(2&n){const e=t.$implicit,i=U(2);N("ngClass",null==e?null:e.cssClass)("day",e)("openDay",i.openDay)("locale",i.locale)("tooltipPlacement",i.tooltipPlacement)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipTemplate",i.tooltipTemplate)("tooltipDelay",i.tooltipDelay)("customTemplate",i.cellTemplate)("ngStyle",Jt(15,mP,e.backgroundColor))("clickListenerDisabled",0===i.dayClicked.observers.length),gi("tabindex",Yn(1,12,Un(17,tg),"monthCellTabIndex"))}}function jge(n,t){if(1&n){const e=We();C(0,"div")(1,"div",4),me(2,Bge,2,18,"mwl-calendar-month-cell",5),qt(3,"slice"),E(),C(4,"mwl-calendar-open-day-events",6),X("eventClicked",function(r){return te(e),ne(U().eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))})("drop",function(r){te(e);const s=U();return ne(s.eventDropped(s.openDay,r.dropData.event,r.dropData.draggedFrom))}),E()()}if(2&n){const e=t.$implicit,i=U();R(2),N("ngForOf",wa(3,9,i.view.days,e,e+i.view.totalDaysVisibleInWeek))("ngForTrackBy",i.trackByDate),R(2),N("locale",i.locale)("isOpen",i.openRowIndex===e)("events",null==i.openDay?null:i.openDay.events)("date",null==i.openDay?null:i.openDay.date)("customTemplate",i.openDayEventsTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)}}function Uge(n,t){if(1&n){const e=We();C(0,"div",4),X("mwlClick",function(r){const o=te(e).$implicit;return ne(U().dayHeaderClicked.emit({day:o,sourceEvent:r}))})("drop",function(r){const o=te(e).$implicit;return ne(U().eventDropped.emit({event:r.dropData.event,newStart:o.date}))})("dragEnter",function(){const s=te(e).$implicit;return ne(U().dragEnter.emit({date:s.date}))}),C(1,"b"),x(2),qt(3,"calendarDate"),E(),dn(4,"br"),C(5,"span"),x(6),qt(7,"calendarDate"),E()()}if(2&n){const e=t.$implicit,i=U().locale;br("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),N("ngClass",e.cssClass),R(2),Je(wa(3,11,e.date,"weekViewColumnHeader",i)),R(4),Je(wa(7,15,e.date,"weekViewColumnSubHeader",i))}}function Hge(n,t){if(1&n&&(C(0,"div",2),me(1,Uge,8,19,"div",3),E()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;R(1),N("ngForOf",e)("ngForTrackBy",i)}}function zge(n,t){}const $ge=function(n,t,e,i,r,s){return{days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:s}},Wge=function(n,t,e){return{color:n,backgroundColor:t,borderColor:e}};function qge(n,t){if(1&n){const e=We();C(0,"div",2),X("mwlClick",function(r){return ne(te(e).eventClicked.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){return ne(te(e).eventClicked.emit({sourceEvent:r}))}),qt(1,"calendarEventTitle"),qt(2,"calendarA11y"),dn(3,"mwl-calendar-event-actions",3),x(4," "),dn(5,"mwl-calendar-event-title",4),E()}if(2&n){const e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,s=t.tooltipAppendToBody,o=t.tooltipDisabled,a=t.tooltipDelay,l=t.daysInWeek,c=U();N("ngStyle",iw(20,Wge,null==e.event.color?null:e.event.color.secondaryText,null==e.event.color?null:e.event.color.secondary,null==e.event.color?null:e.event.color.primary))("mwlCalendarTooltip",o?"":wa(1,13,e.event.title,1===l?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",s)("tooltipDelay",a),gi("aria-label",Yn(2,17,Fi(24,b$,e.tempEvent||e.event,c.locale),"eventDescription")),R(3),N("event",e.tempEvent||e.event)("customTemplate",c.eventActionsTemplate),R(2),N("event",e.tempEvent||e.event)("customTemplate",c.eventTitleTemplate)("view",1===l?"day":"week")}}function Gge(n,t){}const Zge=function(n,t,e,i,r,s,o,a,l){return{weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:s,tooltipDelay:o,column:a,daysInWeek:l}};function Kge(n,t){if(1&n&&(C(0,"div",4),x(1),qt(2,"calendarDate"),E()),2&n){const e=U(),i=e.segment,r=e.daysInWeek,s=e.locale;R(1),yi(" ",wa(2,1,i.displayDate,1===r?"dayViewHour":"weekViewHour",s)," ")}}function Yge(n,t){if(1&n&&(C(0,"div",2),qt(1,"calendarA11y"),me(2,Kge,3,5,"div",3),E()),2&n){const e=t.segment,r=t.isTimeLabel,s=t.daysInWeek;_s("height",t.segmentHeight,"px"),br("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),N("ngClass",e.cssClass),gi("aria-hidden",Yn(1,9,Un(12,tg),1===s?"hideDayHourSegment":"hideWeekHourSegment")),R(2),N("ngIf",r)}}function Qge(n,t){}const Xge=function(n,t,e,i,r){return{segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r}};function Jge(n,t){1&n&&dn(0,"div",3),2&n&&_s("top",U().topPx,"px")}function eme(n,t){1&n&&me(0,Jge,1,2,"div",2),2&n&&N("ngIf",t.isVisible)}function tme(n,t){}const nme=function(n,t,e,i,r,s,o){return{columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:s,topPx:o}};function ime(n,t){1&n&&vI(0)}function rme(n,t){if(1&n){const e=We();C(0,"div",14),X("drop",function(r){const o=te(e).$implicit;return ne(U(2).eventDropped(r,o.date,!0))})("dragEnter",function(){const s=te(e).$implicit;return ne(U(2).dateDragEnter(s.date))}),E()}}const sme=function(){return{left:!0}};function ome(n,t){1&n&&dn(0,"div",23),2&n&&N("resizeEdges",Un(1,sme))}const ame=function(){return{right:!0}};function lme(n,t){1&n&&dn(0,"div",24),2&n&&N("resizeEdges",Un(1,ame))}const cme=function(n,t){return{left:n,right:t}},C$=function(n,t){return{event:n,calendarId:t}},ume=function(n){return{x:n}};function dme(n,t){if(1&n){const e=We();C(0,"div",18,19),X("resizeStart",function(r){const o=te(e).$implicit;U();const a=vr(1);return ne(U(2).allDayEventResizeStarted(a,o,r))})("resizing",function(r){const o=te(e).$implicit,a=U(3);return ne(a.allDayEventResizing(o,r,a.dayColumnWidth))})("resizeEnd",function(){const s=te(e).$implicit;return ne(U(3).allDayEventResizeEnded(s))})("dragStart",function(){const s=te(e).$implicit,o=vr(1);U();const a=vr(1);return ne(U(2).dragStarted(a,o,s,!1))})("dragging",function(){return te(e),ne(U(3).allDayEventDragMove())})("dragEnd",function(r){const o=te(e).$implicit,a=U(3);return ne(a.dragEnded(o,r,a.dayColumnWidth))}),me(2,ome,1,2,"div",20),C(3,"mwl-calendar-week-view-event",21),X("eventClicked",function(r){const o=te(e).$implicit;return ne(U(3).eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),E(),me(4,lme,1,2,"div",22),E()}if(2&n){const e=t.$implicit,i=U(3);_s("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),br("cal-draggable",e.event.draggable&&0===i.allDayEventResizes.size)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),N("ngClass",null==e.event?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",Fi(33,cme,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",Fi(36,C$,e.event,i.calendarId))("dragAxis",Fi(39,$y,e.event.draggable&&0===i.allDayEventResizes.size,!i.snapDraggedEvents&&e.event.draggable&&0===i.allDayEventResizes.size))("dragSnapGrid",i.snapDraggedEvents?Jt(42,ume,i.dayColumnWidth):Un(44,tg))("validateDrag",i.validateDrag)("touchStartLongPress",Un(45,YE)),R(2),N("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),R(1),N("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),R(1),N("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function hme(n,t){if(1&n&&(C(0,"div",15,16),me(2,dme,5,46,"div",17),E()),2&n){const e=t.$implicit,i=U(2);R(2),N("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function fme(n,t){if(1&n){const e=We();C(0,"div",8,9),X("dragEnter",function(){return te(e),ne(U().dragEnter("allDay"))})("dragLeave",function(){return te(e),ne(U().dragLeave("allDay"))}),C(2,"div",5)(3,"div",10),me(4,ime,1,0,"ng-container",11),E(),me(5,rme,1,0,"div",12),E(),me(6,hme,3,2,"div",13),E()}if(2&n){const e=U();R(4),N("ngTemplateOutlet",e.allDayEventsLabelTemplate),R(1),N("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),R(1),N("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function pme(n,t){if(1&n&&dn(0,"mwl-calendar-week-view-hour-segment",28),2&n){const e=t.$implicit,i=U(3);_s("height",i.hourSegmentHeight,"px"),N("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function gme(n,t){if(1&n&&(C(0,"div",26),me(1,pme,1,8,"mwl-calendar-week-view-hour-segment",27),E()),2&n){const e=t.$implicit,i=t.odd,r=U(2);br("cal-hour-odd",i),R(1),N("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function mme(n,t){if(1&n&&(C(0,"div",10),me(1,gme,2,4,"div",25),E()),2&n){const e=U();R(1),N("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}const _me=function(){return{left:!0,top:!0}};function yme(n,t){1&n&&dn(0,"div",23),2&n&&N("resizeEdges",Un(1,_me))}function vme(n,t){}function bme(n,t){if(1&n){const e=We();C(0,"mwl-calendar-week-view-event",36),X("eventClicked",function(r){te(e);const s=U().$implicit;return ne(U(2).eventClicked.emit({event:s.event,sourceEvent:r.sourceEvent}))}),E()}if(2&n){const e=U().$implicit,i=U().$implicit,r=U();N("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}const wme=function(){return{right:!0,bottom:!0}};function Cme(n,t){1&n&&dn(0,"div",24),2&n&&N("resizeEdges",Un(1,wme))}const Eme=function(n,t,e,i){return{left:n,right:t,top:e,bottom:i}};function Dme(n,t){if(1&n){const e=We();C(0,"div",33,19),X("resizeStart",function(r){const o=te(e).$implicit,a=U(2),l=vr(6);return ne(a.timeEventResizeStarted(l,o,r))})("resizing",function(r){const o=te(e).$implicit;return ne(U(2).timeEventResizing(o,r))})("resizeEnd",function(){const s=te(e).$implicit;return ne(U(2).timeEventResizeEnded(s))})("dragStart",function(){const s=te(e).$implicit,o=vr(1),a=U(2),l=vr(6);return ne(a.dragStarted(l,o,s,!0))})("dragging",function(r){const o=te(e).$implicit;return ne(U(2).dragMove(o,r))})("dragEnd",function(r){const o=te(e).$implicit,a=U(2);return ne(a.dragEnded(o,r,a.dayColumnWidth,!0))}),me(2,yme,1,2,"div",20),me(3,vme,0,0,"ng-template",34),me(4,bme,1,12,"ng-template",null,35,To),me(6,Cme,1,2,"div",22),E()}if(2&n){const e=t.$implicit,i=vr(5),r=U(2);_s("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),br("cal-draggable",e.event.draggable&&0===r.timeEventResizes.size)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),N("ngClass",e.event.cssClass)("hidden",0===e.height&&0===e.width)("resizeCursors",r.resizeCursors)("resizeSnapGrid",wL(30,Eme,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",Fi(35,C$,e.event,r.calendarId))("dragAxis",Fi(38,$y,e.event.draggable&&0===r.timeEventResizes.size,e.event.draggable&&0===r.timeEventResizes.size))("dragSnapGrid",r.snapDraggedEvents?Fi(41,$y,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):Un(44,tg))("touchStartLongPress",Un(45,YE))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),R(2),N("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),R(1),N("ngTemplateOutlet",i),R(3),N("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function Tme(n,t){if(1&n){const e=We();C(0,"mwl-calendar-week-view-hour-segment",38),X("mwlClick",function(r){const o=te(e).$implicit;return ne(U(3).hourSegmentClicked.emit({date:o.date,sourceEvent:r}))})("drop",function(r){const o=te(e).$implicit;return ne(U(3).eventDropped(r,o.date,!1))})("dragEnter",function(){const s=te(e).$implicit;return ne(U(3).dateDragEnter(s.date))}),E()}if(2&n){const e=t.$implicit,i=U(3);_s("height",i.hourSegmentHeight,"px"),N("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",0===i.hourSegmentClicked.observers.length)("dragOverClass",i.dragActive&&i.snapDraggedEvents?null:"cal-drag-over")("isTimeLabel",1===i.daysInWeek)}}function Sme(n,t){if(1&n&&(C(0,"div",26),me(1,Tme,1,10,"mwl-calendar-week-view-hour-segment",37),E()),2&n){const e=t.$implicit,i=t.odd,r=U(2);br("cal-hour-odd",i),R(1),N("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function Ime(n,t){if(1&n&&(C(0,"div",29),dn(1,"mwl-calendar-week-view-current-time-marker",30),C(2,"div",31),me(3,Dme,7,46,"div",32),E(),me(4,Sme,2,4,"div",25),E()),2&n){const e=t.$implicit,i=U();R(1),N("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),R(2),N("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),R(1),N("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}let th=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new $e,this.destroy$=new se}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(es(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new pt(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)(G(Xr),G(pn),G(Vt))},n.\u0275dir=nt({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),QE=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new $e,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(13===e.keyCode||13===e.which||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){null!==this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)(G(pn),G(at),G(Xr))},n.\u0275dir=nt({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),Wy=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`\n        ${ar(e.date,"EEEE MMMM d",i)},\n        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${ar(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`\n      Beginning of expanded view for ${ar(e,"EEEE MMMM dd",i)}\n    `}openDayEventsAlert({date:e,locale:i}){return`${ar(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(!0===e.allDay)return this.allDayEventDescription({event:e,locale:i});const r=`\n      ${ar(e.start,"EEEE MMMM dd",i)},\n      ${e.title}, from ${ar(e.start,"hh:mm a",i)}\n    `;return e.end?r+` to ${ar(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){const r=`\n      ${e.title}, event spans multiple days:\n      start time ${ar(e.start,"MMMM dd hh:mm a",i)}\n    `;return e.end?r+`, stop time ${ar(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(ie(AA))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),nh=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){const r=Object.getOwnPropertyNames(Object.getPrototypeOf(Wy.prototype)).filter(s=>"constructor"!==s);throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)(G(Wy,16),G(Bs,16))},n.\u0275pipe=Mi({name:"calendarA11y",type:n,pure:!0}),n})(),E$=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter"]],template:function(e,i){if(1&e&&(me(0,hge,1,1,"ng-template",null,0,To),me(2,fge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",Fi(2,pge,i.event,i.trackByActionId))}},dependencies:[wr,Vi,Cr,xo,th,QE,nh],encapsulation:2}),n})();class XE{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}}let _P=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)(G(XE,16))},n.\u0275pipe=Mi({name:"calendarEventTitle",type:n,pure:!0}),n})(),D$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(1&e&&(me(0,gge,3,10,"ng-template",null,0,To),me(2,mge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",Fi(2,_ge,i.event,i.view))}},dependencies:[xo,_P,nh],encapsulation:2}),n})(),Ame=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(1&e&&(me(0,yge,3,2,"ng-template",null,0,To),me(2,vge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",iw(2,bge,i.contents,i.placement,i.event))}},dependencies:[wr,xo],encapsulation:2}),n})(),T$=(()=>{class n{constructor(e,i,r,s,o,a){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=o,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new se,this.tooltipFactory=s.resolveComponentFactory(Ame)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(null===this.delay?we("now"):x1(this.delay)).pipe(es(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=function xpe(n,t,e,i,r){var s=Array.isArray(e)?e:e.split(Ape),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,l=function(D){var P=D.split("-"),I=P[0],O=P[1],W=[];return r&&(W.push(r+"-"+I),O&&W.push(r+"-"+I+"-"+O),W.forEach(function(K){a.add(K)})),W};r&&o.forEach(function(D){a.remove(r+"-"+D)});var c=s.findIndex(function(D){return"auto"===D});c>=0&&o.forEach(function(D){null==s.find(function(P){return-1!==P.search("^"+D)})&&s.splice(c++,1,D)});var u=t.style;u.position="absolute",u.top="0",u.left="0",u["will-change"]="transform";for(var f,m=!1,y=0,v=s;y<v.length;y++){var w=l(f=v[y]);if(t$.positionElements(n,t,f,i)){m=!0;break}r&&w.forEach(function(D){a.remove(D)})}return m||(l(f=s[0]),t$.positionElements(n,t,f,i)),f}(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===e.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)(G(pn),G(qi),G(Xr),G(id),G(vs),G(Vt))},n.\u0275dir=nt({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){1&e&&X("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:["mwlCalendarTooltip","contents"],placement:["tooltipPlacement","placement"],customTemplate:["tooltipTemplate","customTemplate"],event:["tooltipEvent","event"],appendToBody:["tooltipAppendToBody","appendToBody"],delay:["tooltipDelay","delay"]},features:[zi]}),n})();var Oo=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(Oo||{});const S$=n=>function Hpe(n,t){var e=!0;function i(r,s){t(r,s),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(Xp.StartPropertyNotDate,r):i(Xp.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(Xp.EndPropertyNotDate,r),r.start>r.end&&i(Xp.EndsBeforeStart,r))}),e):(t(Xp.NotArray,n),!1)}(n,(...e)=>console.warn("angular-calendar",...e));function I$(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function A$(n,t){return Math.round(n/t)*t}const x$=(n,t)=>t.id?t.id:t,yP=(n,t)=>t.date.toISOString(),Mme=(n,t)=>t.date.toISOString(),Pme=(n,t)=>t.segments[0].date.toISOString(),Rme=(n,t)=>t.event.id?t.event.id:t.event,Ome=(n,t)=>t.event.id?t.event.id:t.event;function vP(n,t,e,i,r){const s=A$(n,i||e),o=function Fme(n,t,e){return(e||60)/(n*t)}(t,e,r);return s*o}function k$(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function ih(n,t,e,i){let r=0,s=0;const o=e<0?n.subDays:n.addDays;let a=t;for(;s<=Math.abs(e);){a=o(t,r);const l=n.getDay(a);-1===i.indexOf(l)&&s++,r++}return a}function bP(n,t,e,i=[],r){let s=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e});const o=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(s))>-1&&s<o;)s=n.addDays(s,1);if(r)return{viewStart:s,viewEnd:n.endOfDay(ih(n,s,r-1,i))};{let a=o;for(;i.indexOf(n.getDay(a))>-1&&a>s;)a=n.subDays(a,1);return{viewStart:s,viewEnd:a}}}function wP({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}class rh{}let Bme=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return ar(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return ar(e,"d",i)}monthViewTitle({date:e,locale:i}){return ar(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return ar(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return ar(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:s,daysInWeek:o}){const{viewStart:a,viewEnd:l}=bP(this.dateAdapter,e,r,s,o),c=(u,f)=>ar(u,"MMM d"+(f?", yyyy":""),i);return`${c(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${c(l,!0)}`}weekViewHour({date:e,locale:i}){return ar(e,"h a",i)}dayViewHour({date:e,locale:i}){return ar(e,"h a",i)}dayViewTitle({date:e,locale:i}){return ar(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(ie(rh))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),qy=(()=>{class n extends Bme{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Wi(n)))(i||n)}}(),n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),JE=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,s=0,o=[],a){if(typeof this.dateFormatter[i]>"u"){const l=Object.getOwnPropertyNames(Object.getPrototypeOf(qy.prototype)).filter(c=>"constructor"!==c);throw new Error(`${i} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:s,excludeDays:o,daysInWeek:a})}}return n.\u0275fac=function(e){return new(e||n)(G(qy,16),G(Bs,16))},n.\u0275pipe=Mi({name:"calendarDate",type:n,pure:!0}),n})(),Gy=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return function Bpe(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,o=t.excluded,a=void 0===o?[]:o,l=t.viewStart,c=void 0===l?n.startOfMonth(r):l,u=t.viewEnd,f=void 0===u?n.endOfMonth(r):u,m=t.weekendDays;i||(i=[]);for(var F,v=n.endOfWeek,w=n.differenceInDays,D=n.startOfDay,P=n.addHours,I=n.endOfDay,O=n.isSameMonth,W=n.getDay,K=(0,n.startOfWeek)(c,{weekStartsOn:s}),re=v(f,{weekStartsOn:s}),V=Uy(n,{events:i,periodStart:K,periodEnd:re}),M=[],z=function(qe){var Ge;if(F?(Ge=D(P(F,24)),F.getTime()===Ge.getTime()&&(Ge=D(P(F,25))),F=Ge):Ge=F=K,!a.some(function(an){return W(Ge)===an})){var Qt=i$(n,{date:Ge,weekendDays:m}),Tn=Uy(n,{events:V,periodStart:D(Ge),periodEnd:I(Ge)});Qt.inMonth=O(Ge,r),Qt.events=Tn,Qt.badgeTotal=Tn.length,M.push(Qt)}},j=0;j<w(re,K)+1;j++)z();var $=[],q=iP-a.length;if(q<iP)for(j=0;j<M.length;j+=q){var ut=M.slice(j,j+q);ut.some(function(Ge){return c<=Ge.date&&Ge.date<f})&&($=tP(tP([],$,!0),ut,!0))}else $=M;var Ne=Math.floor($.length/q),Le=[];for(j=0;j<Ne;j++)Le.push(j*q);return{rowOffsets:Le,totalDaysVisibleInWeek:q,days:$,period:{start:$[0].date,end:I($[$.length-1].date),events:V}}}(this.dateAdapter,e)}getWeekViewHeader(e){return sP(this.dateAdapter,e)}getWeekView(e){return function Vpe(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,o=t.excluded,a=void 0===o?[]:o,l=t.precision,c=void 0===l?"days":l,u=t.absolutePositionedEvents,f=void 0!==u&&u,m=t.hourSegments,y=t.hourDuration,v=t.dayStart,w=t.dayEnd,D=t.weekendDays,P=t.segmentHeight,I=t.minimumEventHeight,O=t.viewStart,W=void 0===O?n.startOfWeek(r,{weekStartsOn:s}):O,K=t.viewEnd,re=void 0===K?n.endOfWeek(r,{weekStartsOn:s}):K;i||(i=[]);var M=n.endOfDay,F=Uy(n,{events:i,periodStart:W=(0,n.startOfDay)(W),periodEnd:re=M(re)}),z=sP(n,{viewDate:r,weekStartsOn:s,excluded:a,weekendDays:D,viewStart:W,viewEnd:re});return{allDayEventRows:Fpe(n,{events:F,excluded:a,precision:c,absolutePositionedEvents:f,viewStart:W,viewEnd:re}),period:{events:F,start:z[0].date,end:M(z[z.length-1].date)},hourColumns:Lpe(n,{events:i,viewDate:r,hourSegments:m,hourDuration:y,dayStart:v,dayEnd:w,weekStartsOn:s,excluded:a,weekendDays:D,segmentHeight:P,viewStart:W,viewEnd:re,minimumEventHeight:I})}}(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(ie(rh))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();new Te("Moment");var uu=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(uu||{});let ng=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||XE,i.dateFormatter||qy,i.utils||Gy,i.a11y||Wy]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Yt({providers:[AA],imports:[mi]}),n})(),jme=(()=>{class n{constructor(){this.highlightDay=new $e,this.unhighlightDay=new $e,this.eventClicked=new $e,this.trackByEventId=x$,this.validateDrag=wP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(e,i){2&e&&br("cal-past",i.day.isPast)("cal-today",i.day.isToday)("cal-future",i.day.isFuture)("cal-weekend",i.day.isWeekend)("cal-in-month",i.day.inMonth)("cal-out-month",!i.day.inMonth)("cal-has-events",i.day.events.length>0)("cal-open",i.day===i.openDay)("cal-event-highlight",!!i.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:15,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"]],template:function(e,i){if(1&e&&(me(0,Sge,8,14,"ng-template",null,0,To),me(2,Ige,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",LI(2,Age,[i.day,i.openDay,i.locale,i.tooltipPlacement,i.highlightDay,i.unhighlightDay,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDelay,i.trackByEventId,i.validateDrag]))}},dependencies:[wr,Vi,Cr,xo,Ao,pP,T$,th,JE,_P,nh],encapsulation:2}),n})();const Ume=function sH(n,t){return{type:7,name:n,definitions:t,options:{}}}("collapse",[rE("void",Qc({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),rE("*",Qc({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),sE("* => void",iE("150ms ease-out")),sE("void => *",iE("150ms ease-in"))]);let Hme=(()=>{class n{constructor(){this.isOpen=!1,this.eventClicked=new $e,this.trackByEventId=x$,this.validateDrag=wP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-open-day-events","role","application",4,"ngIf"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"event","customTemplate","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"]],template:function(e,i){if(1&e&&(me(0,Pge,1,1,"ng-template",null,0,To),me(2,Rge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",FI(2,Oge,i.events,i.eventClicked,i.isOpen,i.trackByEventId,i.validateDrag))}},dependencies:[wr,Vi,Cr,xo,Ao,pP,E$,D$,th,QE,nh],encapsulation:2,data:{animation:[Ume]}}),n})(),zme=(()=>{class n{constructor(){this.columnHeaderClicked=new $e,this.trackByWeekDayHeaderDate=yP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass","click"]],template:function(e,i){if(1&e&&(me(0,Fge,2,2,"ng-template",null,0,To),me(2,Lge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",iw(2,Vge,i.days,i.locale,i.trackByWeekDayHeaderDate))}},dependencies:[wr,Vi,xo,JE],encapsulation:2}),n})(),$me=(()=>{class n{constructor(e,i,r,s){this.cdr=e,this.utils=i,this.dateAdapter=s,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new $e,this.dayClicked=new $e,this.eventClicked=new $e,this.columnHeaderClicked=new $e,this.eventTimesChanged=new $e,this.trackByRowOffset=(o,a)=>this.view.days.slice(a,this.view.totalDaysVisibleInWeek).map(l=>l.date.toISOString()).join("-"),this.trackByDate=(o,a)=>a.date.toISOString(),this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays,r=e.viewDate||e.events||e.excludeDays||e.weekendDays;i&&this.refreshHeader(),e.events&&S$(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender(),(e.activeDayIsOpen||e.viewDate||e.events||e.excludeDays||e.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(e,i){this.view.days.forEach(r=>{i&&r.events.indexOf(e)>-1?r.backgroundColor=e.color&&e.color.secondary||"#D1E8FF":delete r.backgroundColor})}eventDropped(e,i,r){if(e!==r){const s=this.dateAdapter.getYear(e.date),o=this.dateAdapter.getMonth(e.date),a=this.dateAdapter.getDate(e.date),l=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(i.start,s),o),a);let c;if(i.end){const u=this.dateAdapter.differenceInSeconds(l,i.start);c=this.dateAdapter.addSeconds(i.end,u)}this.eventTimesChanged.emit({event:i,newStart:l,newEnd:c,day:e,type:uu.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(!0===this.activeDayIsOpen){const e=this.activeDay||this.viewDate;this.openDay=this.view.days.find(r=>this.dateAdapter.isSameDay(r.date,e));const i=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(i/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}}return n.\u0275fac=function(e){return new(e||n)(G(Sc),G(Gy),G(Bs),G(rh))},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[zi],decls:4,vars:5,consts:[["role","grid",1,"cal-month-view"],[3,"days","locale","customTemplate","columnHeaderClicked"],[1,"cal-days"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate","eventClicked","drop"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked"]],template:function(e,i){1&e&&(C(0,"div",0)(1,"mwl-calendar-month-view-header",1),X("columnHeaderClicked",function(s){return i.columnHeaderClicked.emit(s)}),E(),C(2,"div",2),me(3,jge,5,13,"div",3),E()()),2&e&&(R(1),N("days",i.columnHeaders)("locale",i.locale)("customTemplate",i.headerTemplate),R(2),N("ngForOf",i.view.rowOffsets)("ngForTrackBy",i.trackByRowOffset))},dependencies:[wr,Vi,Ao,gP,th,QE,jme,Hme,zme,c3,nh],encapsulation:2}),n})(),CP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Yt({imports:[mi,ZE,ng,ZE]}),n})();class Wme{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:s}){const o=wP({x:t,y:e})||r;if(i){const a=Object.assign({},this.startPosition,{left:this.startPosition.left+s.x,right:this.startPosition.right+s.x,top:this.startPosition.top+s.y,bottom:this.startPosition.bottom+s.y});if(o){const l=this.dragContainerElement.getBoundingClientRect(),c=l.top<a.top&&a.top<l.bottom,u=l.top<a.bottom&&a.bottom<l.bottom;return I$(l,a)&&(c||u)}return!1}return o}}class qme{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),!(this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth))&&function kme(n,t){return I$(n,t)&&function xme(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}(n,t)}(this.resizeContainerElement.getBoundingClientRect(),t)}}let Gme=(()=>{class n{constructor(){this.dayHeaderClicked=new $e,this.eventDropped=new $e,this.dragEnter=new $e,this.trackByWeekDayHeaderDate=yP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"ngClass","mwlClick","drop","dragEnter"]],template:function(e,i){if(1&e&&(me(0,Hge,2,2,"ng-template",null,0,To),me(2,zge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",function CL(n,t,e,i,r,s,o,a,l){const c=$i()+n,u=Se(),f=Eo(u,c,e,i,r,s);return rd(u,c+4,o,a)||f?ya(u,c+6,l?t.call(l,e,i,r,s,o,a):t(e,i,r,s,o,a)):$m(u,c+6)}(2,$ge,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[wr,Vi,xo,gP,th,JE],encapsulation:2}),n})(),Zme=(()=>{class n{constructor(){this.eventClicked=new $e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(1&e&&(me(0,qge,6,27,"ng-template",null,0,To),me(2,Gge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",LI(2,Zge,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[xo,Ao,E$,D$,T$,th,QE,_P,nh],encapsulation:2}),n})(),Kme=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(1&e&&(me(0,Yge,3,13,"ng-template",null,0,To),me(2,Qge,0,0,"ng-template",1)),2&e){const r=vr(1);R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",FI(2,Xge,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[wr,Cr,xo,JE,nh],encapsulation:2}),n})(),Yme=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new le(void 0),this.marker$=this.zone.onStable.pipe(lt(()=>e$(6e4)),ko(0),px(this.columnDate$),Fe(r=>{const s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(r,l)&&l>=s&&l<=o,top:this.dateAdapter.differenceInMinutes(l,s)*a}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)(G(rh),G(at))},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[zi],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(1&e&&(me(0,eme,1,1,"ng-template",null,0,To),me(2,tme,0,0,"ng-template",1),qt(3,"async"),qt(4,"async")),2&e){const r=vr(1);let s;R(2),N("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",function EL(n,t,e,i,r,s,o,a,l,c){const u=$i()+n,f=Se();let m=Eo(f,u,e,i,r,s);return q0(f,u+4,o,a,l)||m?ya(f,u+7,c?t.call(c,e,i,r,s,o,a,l):t(e,i,r,s,o,a,l)):$m(f,u+7)}(6,nme,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,null==(s=VI(3,2,i.marker$))?null:s.isVisible,null==(s=VI(4,4,i.marker$))?null:s.top))}},dependencies:[Cr,xo,a3],encapsulation:2}),n})(),M$=(()=>{class n{constructor(e,i,r,s,o){this.cdr=e,this.utils=i,this.dateAdapter=s,this.element=o,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new $e,this.eventClicked=new $e,this.eventTimesChanged=new $e,this.beforeViewRender=new $e,this.hourSegmentClicked=new $e,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=yP,this.trackByHourSegment=Mme,this.trackByHour=Pme,this.trackByWeekAllDayEvent=Rme,this.trackByWeekTimeEvent=Ome,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&S$(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&"rtl"===getComputedStyle(this.element.nativeElement).direction,this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);const r=new Map,s=[...this.events];this.timeEventResizes.forEach((o,a)=>{const l=this.getTimeEventResizedDates(a,o),c={...a,...l};r.set(c,a);const u=s.indexOf(a);s[u]=c}),this.restoreOriginalEvents(s,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);const i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);const r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:uu.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){const s=this.allDayEventResizes.get(e),o=this.rtl?-1:1;if(typeof i.edges.left<"u"){const a=Math.round(+i.edges.left/r)*o;e.offset=s.originalOffset+a,e.span=s.originalSpan-a}else if(typeof i.edges.right<"u"){const a=Math.round(+i.edges.right/r)*o;e.span=s.originalSpan+a}}allDayEventResizeEnded(e){const i=this.allDayEventResizes.get(e);if(i){const r="left"===i.edge;let s;s=r?e.offset-i.originalOffset:e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;const o=this.getAllDayEventResizedDates(e.event,s,r);this.eventTimesChanged.emit({newStart:o.start,newEnd:o.end,event:e.event,type:uu.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){(function Vme(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)})(e,0,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:uu.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,s){this.dayColumnWidth=this.getDayColumnWidth(e);const o=new Wme(e,i);this.validateDrag=({x:a,y:l,transform:c})=>{const u=0===this.allDayEventResizes.size&&0===this.timeEventResizes.size&&o.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:c});if(u&&this.validateEventTimesChanged){const f=this.getDragMovedEventTimes(r,{x:a,y:l},this.dayColumnWidth,s);return this.validateEventTimesChanged({type:uu.Drag,event:r.event,newStart:f.start,newEnd:f.end})}return u},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&s&&this.view.hourColumns.forEach(a=>{const l=a.events.find(c=>c.event===r.event&&c!==r);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(e,i){const r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),s=e.event,o={...s,...r},a=this.events.map(l=>l===s?o:l);this.restoreOriginalEvents(a,new Map([[o,s]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,s=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;const{start:o,end:a}=this.getDragMovedEventTimes(e,i,r,s);(this.snapDraggedEvents||this.eventDragEnterByType[s?"time":"allDay"]>0)&&function Lme(n,t,e){const i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}(o,a,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:o,newEnd:a,event:e.event,type:uu.Drag,allDay:!s}))}refreshHeader(){this.days=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays,...bP(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit({header:this.days,...this.view})}getWeekView(e){return this.utils.getWeekView({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight,...bP(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}getDragMovedEventTimes(e,i,r,s){const o=A$(i.x,r)/r*(this.rtl?-1:1),a=s?vP(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(ih(this.dateAdapter,e.event.start,o,this.excludeDays),a);let c;return e.event.end&&(c=this.dateAdapter.addMinutes(ih(this.dateAdapter,e.event.end,o,this.excludeDays),a)),{start:l,end:c}}restoreOriginalEvents(e,i,r=!0){const s=this.view;r&&(this.view=this.getWeekView(e));const o=e.filter(a=>i.has(a));this.view.hourColumns.forEach((a,l)=>{s.hourColumns[l].hours.forEach((c,u)=>{c.segments.forEach((f,m)=>{a.hours[u].segments[m].cssClass=f.cssClass})}),o.forEach(c=>{const u=i.get(c),f=a.events.find(m=>m.event===(r?c:u));f?(f.event=u,f.tempEvent=c,r||(f.height=0,f.width=0)):a.events.push({event:u,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:c})})}),i.clear()}getTimeEventResizedDates(e,i){const r={start:e.start,end:k$(this.dateAdapter,e,this.minimumEventHeight)},{end:s,...o}=e,a={start:this.dateAdapter.addMinutes(r.end,-1*this.minimumEventHeight),end:k$(this.dateAdapter,o,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof i.edges.left<"u"){const c=Math.round(+i.edges.left/this.dayColumnWidth)*l,u=ih(this.dateAdapter,r.start,c,this.excludeDays);r.start=u<a.start?u:a.start}else if(typeof i.edges.right<"u"){const c=Math.round(+i.edges.right/this.dayColumnWidth)*l,u=ih(this.dateAdapter,r.end,c,this.excludeDays);r.end=u>a.end?u:a.end}if(typeof i.edges.top<"u"){const c=vP(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),u=this.dateAdapter.addMinutes(r.start,c);r.start=u<a.start?u:a.start}else if(typeof i.edges.bottom<"u"){const c=vP(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),u=this.dateAdapter.addMinutes(r.end,c);r.end=u>a.end?u:a.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);const s=new qme(e,r,this.rtl);this.validateResize=({rectangle:o,edges:a})=>{const l=s.validateResize({rectangle:{...o},edges:a});if(l&&this.validateEventTimesChanged){let c;if(r){const u=this.rtl?-1:1;if(typeof a.left<"u"){const f=Math.round(+a.left/r)*u;c=this.getAllDayEventResizedDates(i.event,f,!this.rtl)}else{const f=Math.round(+a.right/r)*u;c=this.getAllDayEventResizedDates(i.event,f,this.rtl)}}else c=this.getTimeEventResizedDates(i.event,{rectangle:o,edges:a});return this.validateEventTimesChanged({type:uu.Resize,event:i.event,newStart:c.start,newEnd:c.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let s=e.start,o=e.end||e.start;return r?s=ih(this.dateAdapter,s,i,this.excludeDays):o=ih(this.dateAdapter,o,i,this.excludeDays),{start:s,end:o}}}return n.\u0275fac=function(e){return new(e||n)(G(Sc),G(Gy),G(Bs),G(rh),G(pn))},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[zi],decls:8,vars:9,consts:[["role","grid",1,"cal-week-view"],[3,"days","locale","customTemplate","dayHeaderClicked","eventDropped","dragEnter"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["dayColumns",""],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],["allDayEventsContainer",""],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["eventRowContainer",""],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],["event",""],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek","eventClicked"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],[3,"ngTemplateOutlet"],["weekEventTemplate",""],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek","eventClicked"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter"]],template:function(e,i){1&e&&(C(0,"div",0)(1,"mwl-calendar-week-view-header",1),X("dayHeaderClicked",function(s){return i.dayHeaderClicked.emit(s)})("eventDropped",function(s){return i.eventDropped({dropData:s},s.newStart,!0)})("dragEnter",function(s){return i.dateDragEnter(s.date)}),E(),me(2,fme,7,5,"div",2),C(3,"div",3),X("dragEnter",function(){return i.dragEnter("time")})("dragLeave",function(){return i.dragLeave("time")}),me(4,mme,2,2,"div",4),C(5,"div",5,6),me(7,Ime,5,13,"div",7),E()()()),2&e&&(R(1),N("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),R(1),N("ngIf",i.view.allDayEventRows.length>0),R(2),N("ngIf",i.view.hourColumns.length>0&&1!==i.daysInWeek),R(1),br("cal-resize-active",i.timeEventResizes.size>0),R(2),N("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[wr,Vi,Cr,xo,y$,lge,pP,gP,th,Gme,Zme,Kme,Yme],encapsulation:2}),n})(),eD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Yt({imports:[mi,v$,ZE,ng,v$,ZE]}),n})(),Qme=(()=>{class n{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new $e,this.hourSegmentClicked=new $e,this.eventTimesChanged=new $e,this.beforeViewRender=new $e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=kt({type:n,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender"]],template:function(e,i){1&e&&(C(0,"mwl-calendar-week-view",0),X("eventClicked",function(s){return i.eventClicked.emit(s)})("hourSegmentClicked",function(s){return i.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return i.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return i.beforeViewRender.emit(s)}),E()),2&e&&N("daysInWeek",1)("viewDate",i.viewDate)("events",i.events)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("minimumEventHeight",i.minimumEventHeight)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("refresh",i.refresh)("locale",i.locale)("eventSnapSize",i.eventSnapSize)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("resizeCursors",i.resizeCursors)("hourSegmentTemplate",i.hourSegmentTemplate)("eventTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("snapDraggedEvents",i.snapDraggedEvents)("allDayEventsLabelTemplate",i.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",i.currentTimeMarkerTemplate)("validateEventTimesChanged",i.validateEventTimesChanged)},dependencies:[M$],encapsulation:2}),n})(),EP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Yt({imports:[mi,ng,eD]}),n})(),P$=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||XE,i.dateFormatter||qy,i.utils||Gy,i.a11y||Wy]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Yt({imports:[ng,CP,eD,EP,ng,CP,eD,EP]}),n})(),R$=(()=>{class n{constructor(){this.apiUrl="https://holidays-jp.github.io/api/v1/date.json"}getHolidays(){var e=this;return(0,pe.Z)(function*(){try{const i=yield fetch(e.apiUrl);if(!i.ok)throw new Error("Network response was not ok");return yield i.json()}catch(i){throw console.error("There was an error fetching the holidays:",i),i}})()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pt(n){const t=Object.prototype.toString.call(n);return n instanceof Date||"object"==typeof n&&"[object Date]"===t?new n.constructor(+n):"number"==typeof n||"[object Number]"===t||"string"==typeof n||"[object String]"===t?new Date(n):new Date(NaN)}function ta(n,t){return n instanceof Date?new n.constructor(t):new Date(t)}function ig(n,t){const e=Pt(n);return isNaN(t)?ta(n,NaN):(t&&e.setDate(e.getDate()+t),e)}function DP(n,t){return ta(n,+Pt(n)+t)}Math.pow(10,8);const Jme=6048e5,e_e=864e5,O$=6e4,t_e=36e5;function i_e(n,t){return DP(n,t*t_e)}function r_e(n,t){return DP(n,t*O$)}function s_e(n,t){return DP(n,1e3*t)}function Zy(n){const t=Pt(n);return t.setHours(0,0,0,0),t}function F$(n){const t=Pt(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function a_e(n,t){const e=Pt(n),i=Pt(t),r=L$(e,i),s=Math.abs(function o_e(n,t){const e=Zy(n),i=Zy(t),r=+e-F$(e),s=+i-F$(i);return Math.round((r-s)/e_e)}(e,i));e.setDate(e.getDate()-r*s);const a=r*(s-+(L$(e,i)===-r));return 0===a?0:a}function L$(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function V$(n){return t=>{const i=(n?Math[n]:Math.trunc)(t);return 0===i?0:i}}function B$(n,t){return+Pt(n)-+Pt(t)}function l_e(n,t,e){const i=B$(n,t)/O$;return V$(e?.roundingMethod)(i)}function c_e(n,t,e){const i=B$(n,t)/1e3;return V$(e?.roundingMethod)(i)}function u_e(n){const t=Pt(n);return t.setHours(23,59,59,999),t}function tD(n){const t=Pt(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}let j$={};function U$(){return j$}function TP(n,t){const e=U$(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Pt(n),s=r.getDay(),o=6+(s<i?-7:0)-(s-i);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function d_e(n){return Pt(n).getDay()}function h_e(n){return Pt(n).getMonth()}function H$(n,t){return+Zy(n)==+Zy(t)}function f_e(n,t){const e=Pt(n),i=Pt(t);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function z$(n){const t=Pt(n);return t.setMilliseconds(0),t}function p_e(n,t){return+z$(n)==+z$(t)}function g_e(n){let t;return n.forEach(function(e){const i=Pt(e);(void 0===t||t<i||isNaN(Number(i)))&&(t=i)}),t||new Date(NaN)}function m_e(n,t){const e=Pt(n);return e.setHours(t),e}function __e(n,t){const e=Pt(n);return e.setMinutes(t),e}function y_e(n){const t=Pt(n);return t.setSeconds(0,0),t}function nD(n){const t=Pt(n);return t.setDate(1),t.setHours(0,0,0,0),t}function Ba(n,t){const e=U$(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Pt(n),s=r.getDay(),o=(s<i?7:0)+s-i;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function v_e(n){return Pt(n).getHours()}function b_e(n){return Pt(n).getMinutes()}function w_e(n){return new Date(n).getTimezoneOffset()}function rg(n,t){return ig(n,7*t)}function sh(n,t){const e=Pt(n);if(isNaN(t))return ta(n,NaN);if(!t)return e;const i=e.getDate(),r=ta(n,e.getTime());return r.setMonth(e.getMonth()+t+1,0),i>=r.getDate()?r:(e.setFullYear(r.getFullYear(),r.getMonth(),i),e)}function sg(n,t){return ig(n,-t)}function E_e(n,t){return rg(n,-t)}function D_e(n,t){return sh(n,-t)}function iD(n){return Ba(n,{weekStartsOn:1})}function I_e(n){const t=Pt(n),e=+iD(t)-+function S_e(n){const t=function T_e(n){const t=Pt(n),e=t.getFullYear(),i=ta(n,0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);const r=iD(i),s=ta(n,0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);const o=iD(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}(n),e=ta(n,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),iD(e)}(t);return Math.round(e/Jme)+1}function A_e(n,t){const e=Pt(n);return e.setDate(t),e}function $$(n,t){const e=Pt(n),i=e.getFullYear(),r=e.getDate(),s=ta(n,0);s.setFullYear(i,t,15),s.setHours(0,0,0,0);const o=function x_e(n){const t=Pt(n),e=t.getFullYear(),i=t.getMonth(),r=ta(n,0);return r.setFullYear(e,i+1,0),r.setHours(0,0,0,0),r.getDate()}(s);return e.setMonth(t,Math.min(r,o)),e}function k_e(n,t){const e=Pt(n);return isNaN(+e)?ta(n,NaN):(e.setFullYear(t),e)}function M_e(n){return Pt(n).getDate()}function P_e(n){return Pt(n).getFullYear()}function W$(){return(0,st.pi)((0,st.pi)({},function C_e(){return{addDays:ig,addHours:i_e,addMinutes:r_e,addSeconds:s_e,differenceInDays:a_e,differenceInMinutes:l_e,differenceInSeconds:c_e,endOfDay:u_e,endOfMonth:tD,endOfWeek:TP,getDay:d_e,getMonth:h_e,isSameDay:H$,isSameMonth:f_e,isSameSecond:p_e,max:g_e,setHours:m_e,setMinutes:__e,startOfDay:Zy,startOfMinute:y_e,startOfMonth:nD,startOfWeek:Ba,getHours:v_e,getMinutes:b_e,getTimezoneOffset:w_e}}()),{addWeeks:rg,addMonths:sh,subDays:sg,subWeeks:E_e,subMonths:D_e,getISOWeek:I_e,setDate:A_e,setMonth:$$,setYear:k_e,getDate:M_e,getYear:P_e})}let SP=(()=>{class n{constructor(){this.reminders={},this.subtaskReminders={}}setReminder(e,i){const r=new Date(e.startDateTime).getTime(),s=r-i,o=Date.now();if(s>o){const a=window.setTimeout(()=>{const l=this.calculateTimeRemaining(r-Date.now());alert(`\u30bf\u30b9\u30af "${e.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${l}`),delete this.reminders[e.id]},s-o);this.reminders[e.id]=a}}clearReminder(e){this.reminders[e.id]&&(clearTimeout(this.reminders[e.id]),delete this.reminders[e.id])}setSubtaskReminder(e,i,r){const s=new Date(r).getTime(),o=s-i,a=Date.now();if(o>a){const l=window.setTimeout(()=>{const c=this.calculateTimeRemaining(s-Date.now());alert(`\u30b5\u30d6\u30bf\u30b9\u30af "${e.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${c}`),delete this.subtaskReminders[e.id]},o-a);this.subtaskReminders[e.id]=l}}clearSubtaskReminder(e){this.subtaskReminders[e.id]&&(clearTimeout(this.subtaskReminders[e.id]),delete this.subtaskReminders[e.id])}calculateTimeRemaining(e){const i=Math.floor(e/1e3),r=Math.floor(i/60),s=Math.floor(r/60),o=Math.floor(s/24);return o>0?`${o}\u65e5`:s>0?`${s}\u6642\u9593`:r>0?`${r}\u5206`:`${i}\u79d2`}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oh=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i}getProjects(){return console.log("Fetching all projects from Firestore..."),this.firestore.collection("projects").valueChanges({idField:"id"})}getProjectById(e){return console.log(`Fetching project by ID: ${e}`),this.firestore.collection("projects").doc(e).valueChanges()}addProject(e){return this.firestore.collection("projects").doc(e.id).set(e).then(()=>{console.log(`Project with ID: ${e.id} successfully added.`)}).catch(i=>{throw console.error(`Error adding project with ID: ${e.id}`,i),i})}updateProject(e){return this.firestore.collection("projects").doc(e.id).update(e).then(()=>{console.log(`Project with ID: ${e.id} successfully updated.`)}).catch(i=>{throw console.error(`Error updating project with ID: ${e.id}`,i),i})}deleteProject(e){return e.id?(console.log(`Deleting project with ID: ${e.id}`),this.firestore.collection("projects").doc(e.id).delete().then(()=>console.log(`Project deleted successfully with ID: ${e.id}`)).catch(i=>{throw console.error(`Error deleting project with ID: ${e.id}`,i),i})):(console.error("Project ID is missing, cannot delete project",e),Promise.reject("Project ID is missing"))}addMemberToProject(e,i){return i?(console.log(`Adding member with ID: ${i} to project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({members:Us.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>{console.log(`Member with ID: ${i} added to project with ID: ${e} successfully`)}).catch(r=>{throw console.error(`Error adding member with ID: ${i} to project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot add member to project",e),Promise.reject("User ID is undefined"))}removeMemberFromProject(e,i){return i?(console.log(`Removing member with ID: ${i} from project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({members:Us.Z.firestore.FieldValue.arrayRemove(i)}).then(()=>console.log(`Member with ID: ${i} removed from project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error removing member with ID: ${i} from project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot remove member from project",e),Promise.reject("User ID is undefined"))}addOwnerToProject(e,i){return i?(console.log(`Adding owner with ID: ${i} to project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({owners:Us.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>{console.log(`Owner with ID: ${i} added to project with ID: ${e} successfully`)}).catch(r=>{throw console.error(`Error adding owner with ID: ${i} to project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot add owner to project",e),Promise.reject("User ID is undefined"))}removeOwnerFromProject(e,i){return i?(console.log(`Removing owner with ID: ${i} from project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({owners:Us.Z.firestore.FieldValue.arrayRemove(i)}).then(()=>console.log(`Owner with ID: ${i} removed from project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error removing owner with ID: ${i} from project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot remove owner from project",e),Promise.reject("User ID is undefined"))}getProjectsByOwnerOrMember(){return this.authService.user$.pipe(lt(e=>e?hd([this.firestore.collection("projects",s=>s.where("owners","array-contains",e.uid)).valueChanges({idField:"id"}),this.firestore.collection("projects",s=>s.where("members","array-contains",e.uid)).valueChanges({idField:"id"})]).pipe(Fe(([s,o])=>{const a=[...s,...o];return Array.from(new Set(a.map(c=>c.id))).map(c=>a.find(u=>u.id===c))})):we([])))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Pa),ie(ao))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function R_e(n,t){1&n&&dn(0,"div",2)}function O_e(n,t){if(1&n){const e=We();C(0,"button",32),X("click",function(){return te(e),ne(U(2).saveTask())}),x(1,"\u4fdd\u5b58"),E()}}function N_e(n,t){if(1&n){const e=We();C(0,"button",32),X("click",function(){return te(e),ne(U(2).duplicateTask())}),x(1,"\u8907\u88fd"),E()}}function F_e(n,t){if(1&n){const e=We();C(0,"button",32),X("click",function(){return te(e),ne(U(2).cancel())}),x(1,"\u30ad\u30e3\u30f3\u30bb\u30eb"),E()}}function L_e(n,t){if(1&n){const e=We();C(0,"button",32),X("click",function(){return te(e),ne(U(2).duplicateAsMyTask())}),x(1,"\u81ea\u5206\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u8907\u88fd"),E()}}function V_e(n,t){if(1&n){const e=We();C(0,"button",32),X("click",function(){return te(e),ne(U(2).cancel())}),x(1,"\u9589\u3058\u308b"),E()}}function B_e(n,t){if(1&n&&(C(0,"option",33),x(1),E()),2&n){const e=t.$implicit;N("value",e.id),R(1),Je(e.name)}}function j_e(n,t){if(1&n&&(C(0,"option",33),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}const Il=function(n){return{"read-only":n}};function U_e(n,t){if(1&n){const e=We();C(0,"div")(1,"label"),x(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),E(),C(3,"input",45),X("ngModelChange",function(r){return te(e),ne(U(3).editedTask.repeatSettings.daysOffsetFromEnd=r)}),E()()}if(2&n){const e=U(3);R(3),N("ngModel",e.editedTask.repeatSettings.daysOffsetFromEnd)("readonly",e.isReadOnly)("ngClass",Jt(3,Il,e.isReadOnly))}}function H_e(n,t){if(1&n){const e=We();C(0,"div"),x(1),C(2,"button",30),X("click",function(){const s=te(e).$implicit;return ne(U(3).removeExcludeDate(s))}),x(3,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit,i=U(3);R(1),yi(" ",e," "),R(1),N("disabled",i.isReadOnly)}}const Ky=function(n){return{"read-only-select":n}};function z_e(n,t){if(1&n){const e=We();C(0,"div",8)(1,"span",9),x(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),E(),C(3,"span",10)(4,"div",34)(5,"div")(6,"label"),x(7,"\u983b\u5ea6:"),E(),C(8,"select",12),X("ngModelChange",function(r){return te(e),ne(U(2).editedTask.repeatSettings.frequency=r)}),C(9,"option",35),x(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),E(),C(11,"option",36),x(12,"\u6bce\u65e5"),E(),C(13,"option",37),x(14,"\u6bce\u9031"),E(),C(15,"option",38),x(16,"\u6bce\u6708"),E(),C(17,"option",39),x(18,"\u6bce\u5e74"),E(),C(19,"option",40),x(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),E()()(),me(21,U_e,4,5,"div",41),C(22,"div")(23,"label"),x(24,"\u7d42\u4e86\u65e5:"),E(),C(25,"input",42),X("ngModelChange",function(r){return te(e),ne(U(2).editedTask.repeatSettings.endDate=r)}),E()(),C(26,"div")(27,"label"),x(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),E(),C(29,"input",43),X("ngModelChange",function(r){return te(e),ne(U(2).editedTask.repeatSettings.businessDaysOnly=r)}),E()(),C(30,"div")(31,"label"),x(32,"\u9664\u5916\u65e5:"),E(),C(33,"input",42),X("ngModelChange",function(r){return te(e),ne(U(2).excludeDate=r)}),E(),C(34,"button",30),X("click",function(){return te(e),ne(U(2).addExcludeDate())}),x(35,"\u8ffd\u52a0"),E(),me(36,H_e,4,2,"div",44),E()()()()}if(2&n){const e=U(2);R(8),N("ngModel",e.editedTask.repeatSettings.frequency)("disabled",e.isReadOnly)("ngClass",Jt(14,Ky,e.isReadOnly)),R(13),N("ngIf","monthlyFromEnd"===e.editedTask.repeatSettings.frequency),R(4),N("ngModel",e.editedTask.repeatSettings.endDate)("readonly",e.isReadOnly)("ngClass",Jt(16,Il,e.isReadOnly)),R(4),N("ngModel",e.editedTask.repeatSettings.businessDaysOnly)("disabled",e.isReadOnly),R(4),N("ngModel",e.excludeDate)("readonly",e.isReadOnly)("ngClass",Jt(18,Il,e.isReadOnly)),R(1),N("disabled",e.isReadOnly),R(2),N("ngForOf",e.editedTask.repeatSettings.excludeDates)}}const $_e=function(n,t){return{selected:n,"read-only":t}},W_e=function(n){return{"background-color":n}};function q_e(n,t){if(1&n){const e=We();C(0,"div",46),X("click",function(){const s=te(e).$implicit;return ne(U(2).selectColor(s))}),E()}if(2&n){const e=t.$implicit,i=U(2);_s("cursor",i.isReadOnly?"not-allowed":"pointer"),N("ngClass",Fi(4,$_e,i.editedTask.tagColor===e,i.isReadOnly))("ngStyle",Jt(7,W_e,e))}}function G_e(n,t){if(1&n){const e=We();C(0,"li",47)(1,"span",48),x(2),E(),C(3,"button",30),X("click",function(){const s=te(e).index;return ne(U(2).deleteSubtask(s))}),x(4,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit,i=U(2);R(2),Je(e.title),R(1),N("disabled",i.isReadOnly)}}function Z_e(n,t){if(1&n){const e=We();C(0,"div",3)(1,"div",4)(2,"h2",5),x(3),E(),C(4,"div",6),me(5,O_e,2,0,"button",7),me(6,N_e,2,0,"button",7),me(7,F_e,2,0,"button",7),me(8,L_e,2,0,"button",7),me(9,V_e,2,0,"button",7),E()(),C(10,"div",8)(11,"span",9),x(12,"\u30bf\u30a4\u30c8\u30eb:"),E(),C(13,"span",10)(14,"input",11),X("ngModelChange",function(r){return te(e),ne(U().editedTask.title=r)}),E()()(),C(15,"div",8)(16,"span",9),x(17,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),E(),C(18,"span",10)(19,"select",12),X("ngModelChange",function(r){return te(e),ne(U().editedTask.projectId=r)}),C(20,"option",13),x(21,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),E(),me(22,B_e,2,2,"option",14),E()()(),C(23,"div",8)(24,"span",9),x(25,"\u8aac\u660e:"),E(),C(26,"span",10)(27,"textarea",15),X("ngModelChange",function(r){return te(e),ne(U().editedTask.description=r)}),E()()(),C(28,"div",8)(29,"span",9),x(30,"\u958b\u59cb\u65e5\u6642:"),E(),C(31,"span",10)(32,"input",16),X("ngModelChange",function(r){return te(e),ne(U().editedTask.startDateTime=r)}),E()()(),C(33,"div",8)(34,"span",9),x(35,"\u7d42\u4e86\u65e5\u6642:"),E(),C(36,"span",10)(37,"input",16),X("ngModelChange",function(r){return te(e),ne(U().editedTask.endDateTime=r)}),E()()(),C(38,"div",8)(39,"span",9),x(40,"\u901a\u77e5"),E(),C(41,"span",10)(42,"input",17),X("ngModelChange",function(r){return te(e),ne(U().editedTask.reminderTime.value=r)}),E(),C(43,"select",18),X("ngModelChange",function(r){return te(e),ne(U().editedTask.reminderTime.unit=r)}),me(44,j_e,2,2,"option",14),E()()(),me(45,z_e,37,20,"div",19),C(46,"div",8)(47,"span",9),x(48,"\u512a\u5148\u5ea6:"),E(),C(49,"span",10)(50,"select",12),X("ngModelChange",function(r){return te(e),ne(U().editedTask.priority=r)}),C(51,"option",20),x(52,"\u4f4e"),E(),C(53,"option",21),x(54,"\u4e2d"),E(),C(55,"option",22),x(56,"\u9ad8"),E()()()(),C(57,"div",8)(58,"span",9),x(59,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),E(),C(60,"span",10)(61,"select",12),X("ngModelChange",function(r){return te(e),ne(U().editedTask.status=r)}),C(62,"option",23),x(63,"\u672a\u7740\u624b"),E(),C(64,"option",24),x(65,"\u9032\u884c\u4e2d"),E(),C(66,"option",25),x(67,"\u5b8c\u4e86"),E()()()(),C(68,"div",8)(69,"span",9),x(70,"\u30bf\u30b0:"),E(),C(71,"span",10)(72,"input",26),X("ngModelChange",function(r){return te(e),ne(U().editedTask.tag=r)}),E()()(),C(73,"div",8)(74,"span",9),x(75,"\u30bf\u30b0\u306e\u8272:"),E(),C(76,"span",10)(77,"div",27),me(78,q_e,1,9,"div",28),E()()(),C(79,"div",29)(80,"h6"),x(81,"\u30b5\u30d6\u30bf\u30b9\u30af"),E(),C(82,"button",30),X("click",function(){return te(e),ne(U().addSubtask())}),x(83,"\u30b5\u30d6\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E(),C(84,"ul"),me(85,G_e,5,2,"li",31),E()()()}if(2&n){const e=U();R(3),yi("",e.task.title," \u306e\u8a73\u7d30"),R(2),N("ngIf",!e.isReadOnly),R(1),N("ngIf",!e.isReadOnly),R(1),N("ngIf",!e.isReadOnly),R(1),N("ngIf",e.isReadOnly),R(1),N("ngIf",e.isReadOnly),R(5),N("ngModel",e.editedTask.title)("readonly",e.isReadOnly)("ngClass",Jt(42,Il,e.isReadOnly)),R(5),N("ngModel",e.editedTask.projectId)("disabled",e.isReadOnly)("ngClass",Jt(44,Ky,e.isReadOnly)),R(3),N("ngForOf",e.projects),R(5),N("ngModel",e.editedTask.description)("readonly",e.isReadOnly)("ngClass",Jt(46,Il,e.isReadOnly)),R(5),N("ngModel",e.editedTask.startDateTime)("disabled",e.isReadOnly)("ngClass",Jt(48,Il,e.isReadOnly)),R(5),N("ngModel",e.editedTask.endDateTime)("disabled",e.isReadOnly)("ngClass",Jt(50,Il,e.isReadOnly)),R(5),N("ngModel",e.editedTask.reminderTime.value)("readonly",e.isReadOnly)("ngClass",Jt(52,Il,e.isReadOnly)),R(1),N("ngModel",e.editedTask.reminderTime.unit)("disabled",e.isReadOnly)("ngClass",Jt(54,Ky,e.isReadOnly)),R(1),N("ngForOf",e.reminderUnits),R(1),N("ngIf",e.editedTask.repeatSettings),R(5),N("ngModel",e.editedTask.priority)("disabled",e.isReadOnly)("ngClass",Jt(56,Ky,e.isReadOnly)),R(11),N("ngModel",e.editedTask.status)("disabled",e.isReadOnly)("ngClass",Jt(58,Ky,e.isReadOnly)),R(11),N("ngModel",e.editedTask.tag)("readonly",e.isReadOnly)("ngClass",Jt(60,Il,e.isReadOnly)),R(6),N("ngForOf",e.colors),R(4),N("disabled",e.isReadOnly),R(3),N("ngForOf",e.editedTask.subtasks)}}let Yy=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.reminderService=i,this.projectService=r,this.dialogRef=s,this.data=o,this.isReadOnly=!1,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",o&&o.task?(this.task=o.task,this.isReadOnly=o.isReadOnly,this.originalTask={...o.task},this.editedTask={...o.task,subtasks:[...o.task.subtasks]}):(this.task={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:""},this.originalTask={...this.task},this.editedTask={...this.task,subtasks:[...this.task.subtasks]})}ngOnInit(){this.projects$=this.projectService.getProjectsByOwnerOrMember(),this.projects$.subscribe(e=>{this.projects=e}),this.editedTask.reminderTime||(this.editedTask.reminderTime={value:null,unit:"\u5206"}),this.editedTask.subtasks||(this.editedTask.subtasks=[])}saveTask(){var e=this;return(0,pe.Z)(function*(){if(!e.isReadOnly){if(e.editedTask.reminderTime&&null!==e.editedTask.reminderTime.value){const i=e.calculateReminderTime({value:e.editedTask.reminderTime.value,unit:e.editedTask.reminderTime.unit});e.reminderService.setReminder(e.editedTask,i)}try{e.editedTask.id?yield e.taskService.updateTask(e.editedTask):yield e.taskService.addTask(e.editedTask),e.dialogRef.close(e.editedTask)}catch(i){console.error("Error updating task:",i)}}})()}duplicateTask(){var e=this;return(0,pe.Z)(function*(){yield e.taskService.duplicateTask(e.editedTask),e.dialogRef.close()})()}duplicateAsMyTask(){var e=this;return(0,pe.Z)(function*(){const i={...e.editedTask,id:e.generateId(),userId:e.data.currentUserId};yield e.taskService.addTask(i),e.dialogRef.close()})()}addSubtask(){if(this.isReadOnly)return;this.editedTask.subtasks||(this.editedTask.subtasks=[]);const e={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"};this.editedTask.subtasks.push(e)}deleteSubtask(e){this.isReadOnly||this.editedTask.subtasks&&this.editedTask.subtasks.splice(e,1)}cancel(){this.dialogRef.close(this.originalTask)}selectColor(e){this.isReadOnly||(this.editedTask.tagColor=e)}addExcludeDate(){this.isReadOnly||(this.editedTask.repeatSettings||(this.editedTask.repeatSettings={frequency:"none",businessDaysOnly:!1,excludeDates:[]}),this.editedTask.repeatSettings.excludeDates||(this.editedTask.repeatSettings.excludeDates=[]),this.excludeDate&&(this.editedTask.repeatSettings.excludeDates.push(this.excludeDate),this.excludeDate=""))}removeExcludeDate(e){this.isReadOnly||this.editedTask.repeatSettings&&this.editedTask.repeatSettings.excludeDates&&(this.editedTask.repeatSettings.excludeDates=this.editedTask.repeatSettings.excludeDates.filter(i=>i!==e))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(i){return new(i||n)(G(Al),G(SP),G(oh),G(ou),G(Zp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-task-detail"]],inputs:{task:"task",isReadOnly:"isReadOnly"},standalone:!0,features:[Gi],decls:2,vars:2,consts:[["class","modal-overlay",4,"ngIf"],["class","task-detail-container",4,"ngIf"],[1,"modal-overlay"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click",4,"ngIf"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","readonly","ngClass","ngModelChange"],[3,"ngModel","disabled","ngClass","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","readonly","ngClass","ngModelChange"],["type","datetime-local",3,"ngModel","disabled","ngClass","ngModelChange"],["type","number","min","1",1,"reminder-input",3,"ngModel","readonly","ngClass","ngModelChange"],[1,"reminder-select",3,"ngModel","disabled","ngClass","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],["placeholder","\u30bf\u30b0",3,"ngModel","readonly","ngClass","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","cursor","click",4,"ngFor","ngForOf"],[1,"subtask-container"],[3,"disabled","click"],["class","subtask-item",4,"ngFor","ngForOf"],[3,"click"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","readonly","ngClass","ngModelChange"],["type","checkbox",3,"ngModel","disabled","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","readonly","ngClass","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"],[1,"subtask-item"],[1,"subtask-title"]],template:function(i,r){1&i&&(me(0,R_e,1,0,"div",0),me(1,Z_e,86,62,"div",1)),2&i&&(N("ngIf",r.editedTask),R(1),N("ngIf",r.editedTask))},dependencies:[mi,wr,Vi,Cr,Ao,Ar,iu,ru,Sr,Hp,Na,Fa,Ir,zp,dr],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}.read-only[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed}.read-only-select[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed;pointer-events:none}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})(),Al=(()=>{class n{constructor(e,i,r,s){this.firestore=e,this.holidayService=i,this.dialog=r,this.authService=s,this.currentDialogRefs={},this.taskUpdatedSource=new le(null),this.taskUpdated$=this.taskUpdatedSource.asObservable()}getCurrentUserId(){return this.authService.getCurrentUserId()}getUserTasks(){return this.authService.user$.pipe(lt(e=>e?this.firestore.collection(`users/${e.uid}/tasks`).snapshotChanges().pipe(Fe(i=>i.map(r=>{const s=r.payload.doc.data();return{id:r.payload.doc.id,title:s.title,completed:s.completed,description:s.description,priority:s.priority,startDateTime:s.startDateTime,endDateTime:s.endDateTime,tag:s.tag,selected:s.selected,tagColor:s.tagColor,status:s.status,subtasks:s.subtasks,reminderTime:s.reminderTime,projectId:s.projectId,repeatSettings:s.repeatSettings,userId:s.userId}}))):we([])))}getTasksByUserId(e){return this.firestore.collection(`users/${e}/tasks`).valueChanges()}getTasks(){const e=this.getCurrentUserId();return e?this.firestore.collection(`users/${e}/tasks`).valueChanges():we([])}addTask(e){const i=this.getCurrentUserId();if(i){const r=this.firestore.createId(),s={...e,id:r,userId:i};return this.firestore.collection(`users/${i}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}return Promise.reject("User not authenticated")}updateTask(e){const i=this.getCurrentUserId();if(i)return console.log("Updating task for user:",i,e),console.log("Exclude dates before update:",e.repeatSettings?.excludeDates),this.firestore.collection(`users/${e.userId}/tasks`).doc(e.id).set(e,{merge:!0}).then(()=>{console.log("Task successfully updated in Firestore:",e),console.log("Exclude dates after update:",e.repeatSettings?.excludeDates),this.taskUpdatedSource.next()}).catch(r=>{throw console.error("Error updating task in Firestore:",r),r});{const r="User not authenticated";return console.error(r),Promise.reject(r)}}duplicateTask(e){const i=this.getCurrentUserId();if(i){const r=this.generateId(),s={...e,id:r,userId:i};return this.firestore.collection(`users/${i}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}return Promise.reject("User not authenticated")}deleteTask(e){return this.firestore.collection(`users/${e.userId}/tasks`).doc(e.id).delete().then(()=>{this.taskUpdatedSource.next()})}openTaskDetail(e){if(console.log("openTaskDetail called"),this.currentDialogRefs[e.id])return void console.log("Task detail is already open for this task:",e.id);const i=this.dialog.open(Yy,{data:{task:e}});this.currentDialogRefs[e.id]=i,i.afterClosed().subscribe(()=>{console.log("Dialog closed for task:",e.id),delete this.currentDialogRefs[e.id]})}generateRecurringTasks(){var e=this;return(0,pe.Z)(function*(){const i=(new Date).toISOString().split("T")[0];try{const r=yield e.holidayService.getHolidays(),s=yield e.firestore.collection("tasks").get().toPromise();s&&!s.empty&&s.forEach(o=>{const a=o.data();a.repeatSettings&&"monthlyFromEnd"===a.repeatSettings.frequency&&e.generateMonthlyFromEndTasks(a,i,r)})}catch(r){console.error("Failed to generate recurring tasks:",r)}})()}generateMonthlyFromEndTasks(e,i,r){let s=new Date(e.startDateTime);const o=e.repeatSettings.endDate?new Date(e.repeatSettings.endDate):null;for(;s.toISOString().split("T")[0]<=i&&(!o||s<=o);){let l=sg(tD(s),e.repeatSettings.daysOffsetFromEnd);e.repeatSettings.businessDaysOnly&&(l=this.adjustForHolidaysAndWeekends(l,r)),l.toISOString().split("T")[0]<=i&&this.createTaskInstance(e,l.toISOString()),s.setMonth(s.getMonth()+1)}}adjustForHolidaysAndWeekends(e,i){for(;i.includes(e.toISOString().split("T")[0])||0===e.getDay()||6===e.getDay();)e.setDate(e.getDate()-1);return e}createTaskInstance(e,i){const r=this.generateId(),s={...e,id:r,startDateTime:i};this.firestore.collection(`users/${e.userId}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}generateId(){return Math.random().toString(36).substr(2,9)}getTasksByProjectIds(e){return 0===e.length?we([]):(console.log("Fetching tasks for project IDs:",e),this.authService.user$.pipe(lt(i=>i?hd(e.map(s=>this.firestore.collection(`users/${i.uid}/tasks`,o=>(console.log(`Querying tasks for projectId: ${s}`),o.where("projectId","==",s))).valueChanges())).pipe(Fe(s=>{const o=s.flat();return console.log("Fetched tasks:",o),o})):we([]))))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Pa),ie(R$),ie(Kp),ie(ao))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K_e(n,t){if(1&n&&(C(0,"option",22),x(1),E()),2&n){const e=t.$implicit;N("value",e.id),R(1),Je(e.name)}}function Y_e(n,t){if(1&n&&(C(0,"option",22),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function Q_e(n,t){if(1&n){const e=We();C(0,"div",6)(1,"span",7),x(2,"\u901a\u77e5:"),E(),C(3,"span",8)(4,"input",23),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.reminderTime.value=r)}),E(),C(5,"select",24),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.reminderTime.unit=r)}),me(6,Y_e,2,2,"option",12),E()()()}if(2&n){const e=U(2);R(4),N("ngModel",e.newTask.reminderTime.value),R(1),N("ngModel",e.newTask.reminderTime.unit),R(1),N("ngForOf",e.reminderUnits)}}function X_e(n,t){if(1&n){const e=We();C(0,"div")(1,"label"),x(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),E(),C(3,"input",36),X("ngModelChange",function(r){return te(e),ne(U(3).newTask.repeatSettings.daysOffsetFromEnd=r)}),E()()}if(2&n){const e=U(3);R(3),N("ngModel",e.newTask.repeatSettings.daysOffsetFromEnd)}}function J_e(n,t){if(1&n){const e=We();C(0,"div"),x(1),C(2,"button",5),X("click",function(){const s=te(e).$implicit;return ne(U(3).removeExcludeDate(s))}),x(3,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e," ")}}function eye(n,t){if(1&n){const e=We();C(0,"div",6)(1,"span",7),x(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),E(),C(3,"span",8)(4,"div",25)(5,"div")(6,"label"),x(7,"\u983b\u5ea6:"),E(),C(8,"select",10),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.repeatSettings.frequency=r)}),C(9,"option",26),x(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),E(),C(11,"option",27),x(12,"\u6bce\u65e5"),E(),C(13,"option",28),x(14,"\u6bce\u9031"),E(),C(15,"option",29),x(16,"\u6bce\u6708"),E(),C(17,"option",30),x(18,"\u6bce\u5e74"),E(),C(19,"option",31),x(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),E()()(),me(21,X_e,4,1,"div",32),C(22,"div")(23,"label"),x(24,"\u7d42\u4e86\u65e5:"),E(),C(25,"input",33),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.repeatSettings.endDate=r)}),E()(),C(26,"div")(27,"label"),x(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),E(),C(29,"input",34),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.repeatSettings.businessDaysOnly=r)}),E()(),C(30,"div")(31,"label"),x(32,"\u9664\u5916\u65e5:"),E(),C(33,"input",33),X("ngModelChange",function(r){return te(e),ne(U(2).excludeDate=r)}),E(),C(34,"button",5),X("click",function(){return te(e),ne(U(2).addExcludeDate())}),x(35,"\u8ffd\u52a0"),E(),me(36,J_e,4,1,"div",35),E()()()()}if(2&n){const e=U(2);R(8),N("ngModel",e.newTask.repeatSettings.frequency),R(13),N("ngIf","monthlyFromEnd"===e.newTask.repeatSettings.frequency),R(4),N("ngModel",e.newTask.repeatSettings.endDate),R(4),N("ngModel",e.newTask.repeatSettings.businessDaysOnly),R(4),N("ngModel",e.excludeDate),R(3),N("ngForOf",e.newTask.repeatSettings.excludeDates)}}const tye=function(n){return{selected:n}},nye=function(n){return{"background-color":n}};function iye(n,t){if(1&n){const e=We();C(0,"div",37),X("click",function(){const s=te(e).$implicit;return ne(U(2).selectColor(s))}),E()}if(2&n){const e=t.$implicit,i=U(2);N("ngClass",Jt(2,tye,i.newTask.tagColor===e))("ngStyle",Jt(4,nye,e))}}function rye(n,t){if(1&n){const e=We();C(0,"div",1)(1,"div",2)(2,"h2",3),x(3,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E(),C(4,"div",4)(5,"button",5),X("click",function(){return te(e),ne(U().saveTask())}),x(6,"\u4fdd\u5b58"),E(),C(7,"button",5),X("click",function(){return te(e),ne(U().cancel())}),x(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),E()()(),C(9,"div",6)(10,"span",7),x(11,"\u30bf\u30a4\u30c8\u30eb:"),E(),C(12,"span",8)(13,"input",9),X("ngModelChange",function(r){return te(e),ne(U().newTask.title=r)}),E()()(),C(14,"div",6)(15,"span",7),x(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),E(),C(17,"span",8)(18,"select",10),X("ngModelChange",function(r){return te(e),ne(U().newTask.projectId=r)}),C(19,"option",11),x(20,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),E(),me(21,K_e,2,2,"option",12),E()()(),C(22,"div",6)(23,"span",7),x(24,"\u8aac\u660e:"),E(),C(25,"span",8)(26,"textarea",13),X("ngModelChange",function(r){return te(e),ne(U().newTask.description=r)}),E()()(),C(27,"div",6)(28,"span",7),x(29,"\u958b\u59cb\u65e5\u6642:"),E(),C(30,"span",8)(31,"input",14),X("ngModelChange",function(r){return te(e),ne(U().newTask.startDateTime=r)}),E()()(),C(32,"div",6)(33,"span",7),x(34,"\u7d42\u4e86\u65e5\u6642:"),E(),C(35,"span",8)(36,"input",14),X("ngModelChange",function(r){return te(e),ne(U().newTask.endDateTime=r)}),E()()(),me(37,Q_e,7,3,"div",15),me(38,eye,37,6,"div",15),C(39,"div",6)(40,"span",7),x(41,"\u512a\u5148\u5ea6:"),E(),C(42,"span",8)(43,"select",10),X("ngModelChange",function(r){return te(e),ne(U().newTask.priority=r)}),C(44,"option",16),x(45,"\u4f4e"),E(),C(46,"option",17),x(47,"\u4e2d"),E(),C(48,"option",18),x(49,"\u9ad8"),E()()()(),C(50,"div",6)(51,"span",7),x(52,"\u30bf\u30b0:"),E(),C(53,"span",8)(54,"input",19),X("ngModelChange",function(r){return te(e),ne(U().newTask.tag=r)}),E()()(),C(55,"div",6)(56,"span",7),x(57,"\u30bf\u30b0\u306e\u8272:"),E(),C(58,"span",8)(59,"div",20),me(60,iye,1,6,"div",21),E()()()()}if(2&n){const e=U();R(13),N("ngModel",e.newTask.title),R(5),N("ngModel",e.newTask.projectId),R(3),N("ngForOf",e.projects),R(5),N("ngModel",e.newTask.description),R(5),N("ngModel",e.newTask.startDateTime),R(5),N("ngModel",e.newTask.endDateTime),R(1),N("ngIf",e.newTask.reminderTime),R(1),N("ngIf",e.newTask.repeatSettings),R(5),N("ngModel",e.newTask.priority),R(11),N("ngModel",e.newTask.tag),R(6),N("ngForOf",e.colors)}}let IP=(()=>{class n{constructor(e,i,r,s){this.dialogRef=e,this.reminderService=i,this.projectService=r,this.taskService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",this.currentUserUid=null,this.newTask={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",daysOffsetFromEnd:1,endDate:"",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:0,unit:"\u5206"},userId:""}}ngOnInit(){const e=this.taskService.getCurrentUserId();e&&(this.newTask.userId=e,this.currentUserUid=e),this.projects$=this.projectService.getProjects(),this.projects$.subscribe(i=>{this.projects=i.filter(r=>r.members.includes(this.currentUserUid)||r.owners.includes(this.currentUserUid))})}saveTask(){var e=this;return(0,pe.Z)(function*(){try{if(e.newTask.startDateTime&&e.newTask.reminderTime&&null!==e.newTask.reminderTime.value){const i=e.calculateReminderTime({value:e.newTask.reminderTime.value,unit:e.newTask.reminderTime.unit});e.reminderService.setReminder(e.newTask,i)}yield e.taskService.addTask(e.newTask),e.dialogRef.close(e.newTask)}catch(i){console.error("Failed to save task:",i)}})()}cancel(){this.dialogRef.close()}selectColor(e){this.newTask.tagColor=e}addExcludeDate(){this.excludeDate&&(this.newTask.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(e){this.newTask.repeatSettings?.excludeDates&&(this.newTask.repeatSettings.excludeDates=this.newTask.repeatSettings.excludeDates.filter(i=>i!==e))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(i){return new(i||n)(G(ou),G(SP),G(oh),G(Al))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-task-add"]],standalone:!0,features:[Gi],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"]],template:function(i,r){1&i&&me(0,rye,61,11,"div",0),2&i&&N("ngIf",r.newTask)},dependencies:[mi,wr,Vi,Cr,Ao,Ar,iu,ru,Sr,Hp,Na,Fa,Ir,zp,dr],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})();function rD(n,t){let e=Pt(n);return isNaN(+e)?ta(n,NaN):(null!=t.year&&e.setFullYear(t.year),null!=t.month&&(e=$$(e,t.month)),null!=t.date&&e.setDate(t.date),null!=t.hours&&e.setHours(t.hours),null!=t.minutes&&e.setMinutes(t.minutes),null!=t.seconds&&e.setSeconds(t.seconds),null!=t.milliseconds&&e.setMilliseconds(t.milliseconds),e)}function q$(n,t){return sh(n,12*t)}function AP(n){const t=Pt(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function lye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function cye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function uye(n,t){if(1&n){const e=We();C(0,"div",18)(1,"h3"),x(2),qt(3,"date"),E(),C(4,"mwl-calendar-month-view",15),X("eventClicked",function(r){return te(e),ne(U(2).handleEvent("Clicked",r.event))}),E()()}if(2&n){const e=U(2);R(2),Je(Yn(3,3,e.compareDate,"yyyy\u5e74MM\u6708")),R(2),N("viewDate",e.compareDate)("events",e.allEvents)}}const xP=function(n){return{"compare-active":n}},kP=function(n){return{"full-width":n}};function dye(n,t){if(1&n){const e=We();C(0,"div")(1,"div",5)(2,"label",6),x(3,"\u5e74:"),E(),C(4,"select",7),X("ngModelChange",function(r){return te(e),ne(U().selectedYear=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(5,lye,2,2,"option",8),E(),C(6,"label",9),x(7,"\u6708:"),E(),C(8,"select",10),X("ngModelChange",function(r){return te(e),ne(U().selectedMonth=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(9,cye,2,2,"option",8),E(),C(10,"label",11),x(11,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),E(),C(12,"input",12),X("ngModelChange",function(r){return te(e),ne(U().compareMode=r)})("change",function(){return te(e),ne(U().toggleCompareMode())}),E()(),C(13,"div",13)(14,"div",14)(15,"h3"),x(16),qt(17,"date"),E(),C(18,"mwl-calendar-month-view",15),X("eventClicked",function(r){return te(e),ne(U().handleEvent("Clicked",r.event))}),E()(),me(19,uye,5,6,"div",16),E()()}if(2&n){const e=U();R(4),N("ngModel",e.selectedYear),R(1),N("ngForOf",e.years),R(3),N("ngModel",e.selectedMonth),R(1),N("ngForOf",e.months),R(3),N("ngModel",e.compareMode),R(1),N("ngClass",Jt(14,xP,e.compareMode)),R(1),N("ngClass",Jt(16,kP,!e.compareMode)),R(2),Je(Yn(17,11,e.viewDate,"yyyy\u5e74MM\u6708")),R(2),N("viewDate",e.viewDate)("events",e.allEvents),R(1),N("ngIf",e.compareMode)}}function hye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function fye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function pye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function gye(n,t){if(1&n){const e=We();C(0,"div",18)(1,"h3"),x(2),E(),C(3,"mwl-calendar-week-view",15),X("eventClicked",function(r){return te(e),ne(U(2).handleEvent("Clicked",r.event))}),E()()}if(2&n){const e=U(2);R(2),Je(e.getCompareWeekRange()),R(1),N("viewDate",e.compareDate)("events",e.getNonHolidayEvents())}}function mye(n,t){if(1&n){const e=We();C(0,"div")(1,"div",5)(2,"label",6),x(3,"\u5e74:"),E(),C(4,"select",7),X("ngModelChange",function(r){return te(e),ne(U().selectedYear=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(5,hye,2,2,"option",8),E(),C(6,"label",9),x(7,"\u6708:"),E(),C(8,"select",10),X("ngModelChange",function(r){return te(e),ne(U().selectedMonth=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(9,fye,2,2,"option",8),E(),C(10,"label",19),x(11,"\u9031\u76ee:"),E(),C(12,"select",20),X("ngModelChange",function(r){return te(e),ne(U().selectedWeek=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(13,pye,2,2,"option",8),E(),C(14,"label",11),x(15,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),E(),C(16,"input",12),X("ngModelChange",function(r){return te(e),ne(U().compareMode=r)})("change",function(){return te(e),ne(U().toggleCompareMode())}),E()(),C(17,"div",13)(18,"div",14)(19,"h3"),x(20),E(),C(21,"mwl-calendar-week-view",15),X("eventClicked",function(r){return te(e),ne(U().handleEvent("Clicked",r.event))}),E()(),me(22,gye,4,3,"div",16),E()()}if(2&n){const e=U();R(4),N("ngModel",e.selectedYear),R(1),N("ngForOf",e.years),R(3),N("ngModel",e.selectedMonth),R(1),N("ngForOf",e.months),R(3),N("ngModel",e.selectedWeek),R(1),N("ngForOf",e.monthWeeks),R(3),N("ngModel",e.compareMode),R(1),N("ngClass",Jt(13,xP,e.compareMode)),R(1),N("ngClass",Jt(15,kP,!e.compareMode)),R(2),Je(e.getWeekRange()),R(1),N("viewDate",e.viewDate)("events",e.getNonHolidayEvents()),R(1),N("ngIf",e.compareMode)}}function _ye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function yye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function vye(n,t){if(1&n&&(C(0,"option",17),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function bye(n,t){if(1&n){const e=We();C(0,"div",18)(1,"h3"),x(2),qt(3,"date"),E(),C(4,"mwl-calendar-day-view",15),X("eventClicked",function(r){return te(e),ne(U(2).handleEvent("Clicked",r.event))}),E()()}if(2&n){const e=U(2);R(2),Je(Yn(3,3,e.compareDate,"yyyy\u5e74MM\u6708dd\u65e5")),R(2),N("viewDate",e.compareDate)("events",e.getNonHolidayEvents())}}function wye(n,t){if(1&n){const e=We();C(0,"div")(1,"div",5)(2,"label",6),x(3,"\u5e74:"),E(),C(4,"select",7),X("ngModelChange",function(r){return te(e),ne(U().selectedYear=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(5,_ye,2,2,"option",8),E(),C(6,"label",9),x(7,"\u6708:"),E(),C(8,"select",10),X("ngModelChange",function(r){return te(e),ne(U().selectedMonth=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(9,yye,2,2,"option",8),E(),C(10,"label",21),x(11,"\u65e5:"),E(),C(12,"select",22),X("ngModelChange",function(r){return te(e),ne(U().selectedDay=r)})("change",function(){return te(e),ne(U().onYearMonthOrWeekChange())}),me(13,vye,2,2,"option",8),E(),C(14,"label",11),x(15,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),E(),C(16,"input",12),X("ngModelChange",function(r){return te(e),ne(U().compareMode=r)})("change",function(){return te(e),ne(U().toggleCompareMode())}),E()(),C(17,"div",13)(18,"div",14)(19,"h3"),x(20),qt(21,"date"),E(),C(22,"mwl-calendar-day-view",15),X("eventClicked",function(r){return te(e),ne(U().handleEvent("Clicked",r.event))}),E()(),me(23,bye,5,6,"div",16),E()()}if(2&n){const e=U();R(4),N("ngModel",e.selectedYear),R(1),N("ngForOf",e.years),R(3),N("ngModel",e.selectedMonth),R(1),N("ngForOf",e.months),R(3),N("ngModel",e.selectedDay),R(1),N("ngForOf",e.daysInMonth),R(3),N("ngModel",e.compareMode),R(1),N("ngClass",Jt(16,xP,e.compareMode)),R(1),N("ngClass",Jt(18,kP,!e.compareMode)),R(2),Je(Yn(21,13,e.viewDate,"yyyy\u5e74MM\u6708dd\u65e5")),R(2),N("viewDate",e.viewDate)("events",e.getNonHolidayEvents()),R(1),N("ngIf",e.compareMode)}}let Cye=(()=>{class n{constructor(e,i,r){this.taskService=e,this.holidayService=i,this.dialog=r,this.view=Oo.Week,this.viewDate=new Date,this.compareDate=new Date,this.events=[],this.holidayEvents=[],this.allEvents=[],this.holidays=[],this.compareMode=!1,this.selectedYear=(new Date).getFullYear(),this.selectedMonth=(new Date).getMonth()+1,this.selectedDay=(new Date).getDate(),this.selectedWeek=1,this.years=[2023,2024,2025],this.months=[1,2,3,4,5,6,7,8,9,10,11,12],this.daysInMonth=[],this.monthWeeks=[],this.CalendarView=Oo}ngOnInit(){console.log("Initializing CalendarComponent..."),this.loadHolidays(),this.updateMonthWeeks(),this.updateDaysInMonth(),this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay)}loadHolidays(){console.log("Loading holidays..."),ee(this.holidayService.getHolidays()).subscribe(e=>{this.holidays=Object.keys(e).map(i=>new Date(i)),this.holidayEvents=this.holidays.map(i=>({start:i,title:e[i.toISOString().split("T")[0]],color:{primary:"#e3bc08",secondary:"#FDF1BA"}})),console.log("Holidays loaded:",this.holidayEvents),this.loadEvents(),this.updateAllEvents()},e=>{console.error("Failed to load holidays:",e)})}loadEvents(){console.log("Loading events..."),this.taskService.getTasks().subscribe(e=>{this.events=this.generateEventsFromTasks(e),console.log("Events loaded:",this.events),this.updateAllEvents()})}generateEventsFromTasks(e){console.log("Generating events from tasks...");const i=[];return e.forEach(r=>{if(r.repeatSettings)i.push(...this.generateRecurringEvents(r));else{const s=new Date(r.startDateTime),o=new Date(r.endDateTime);if(isNaN(s.getTime())||isNaN(o.getTime()))return void console.error(`Invalid date for task: ${r.title}`);if(s>o)return void console.warn(`Start date is after end date for task: ${r.title}`);i.push({start:s,end:o,title:r.title,color:r.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:r})}}),console.log("Events generated:",i),i}generateRecurringEvents(e){console.log("Generating recurring events for task:",e.title);const i=[],r=new Date(e.startDateTime),s=new Date(e.endDateTime),o=e.repeatSettings;if(isNaN(r.getTime())||isNaN(s.getTime())||!o)return console.error(`Invalid date or repeat settings for task: ${e.title}`),i;if("none"===o.frequency)return i.push({start:r,end:s,title:e.title,color:e.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:e}),i;let a=r,l=s;const c=o.endDate?new Date(o.endDate):null,u=1e3;let f=0;for(;(!c||a<=c)&&f<u;){if("monthlyFromEnd"===o.frequency&&void 0!==o.daysOffsetFromEnd&&(a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd),a=rD(a,{hours:r.getHours(),minutes:r.getMinutes()}),l=rD(a,{hours:s.getHours(),minutes:s.getMinutes()})),a>l)return console.warn(`Start date is after end date for recurring task: ${e.title}`),i;!this.isExcludedDate(a,o.excludeDates)&&(!o.businessDaysOnly||!this.isHolidayOrWeekend(a))&&i.push({start:a,end:l,title:e.title,color:e.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:e});let m=!1;for(;!m;){switch(o.frequency){case"daily":a=ig(a,1),l=ig(l,1),m=!0;break;case"weekly":a=rg(a,1),l=rg(l,1),m=!0;break;case"monthly":a=sh(a,1),l=sh(l,1),m=!0;break;case"yearly":a=q$(a,1),l=q$(l,1),m=!0;break;case"monthlyFromEnd":a=sh(a,1),l=sh(l,1),a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd??0),a=rD(a,{hours:r.getHours(),minutes:r.getMinutes()}),l=rD(a,{hours:s.getHours(),minutes:s.getMinutes()}),m=!0;break;default:console.warn(`Unknown repeat frequency: ${o.frequency}`),f=u,m=!0}o.businessDaysOnly&&this.isHolidayOrWeekend(a)&&(m=!1)}f++}return f===u&&console.warn(`Max iterations reached for task: ${e.title}`),console.log("Recurring events generated:",i),i}isExcludedDate(e,i){return!!i&&i.some(r=>{const s=new Date(r);return e.getFullYear()===s.getFullYear()&&e.getMonth()===s.getMonth()&&e.getDate()===s.getDate()})}calculateMonthlyFromEndDate(e,i){let r=sg(AP(e),i),s=0;for(let o=sg(AP(e),i);o<=AP(e);o=ig(o,1))this.isHolidayOrWeekend(o)&&s++;for(r=sg(r,s);this.isHolidayOrWeekend(r);)r=sg(r,1);return console.log(`Final target date: ${r}`),r}isHolidayOrWeekend(e){const i=e.getDay(),r=0===i||6===i,s=this.holidays.some(o=>o.getFullYear()===e.getFullYear()&&o.getMonth()===e.getMonth()&&o.getDate()===e.getDate());return console.log(`Date: ${e}, isWeekend: ${r}, isHoliday: ${s}`),r||s}updateAllEvents(){this.allEvents=[...this.events,...this.holidayEvents],console.log("All events updated:",this.allEvents)}getNonHolidayEvents(){return this.allEvents.filter(e=>!this.holidayEvents.some(i=>i.start.getTime()===e.start.getTime()))}handleEvent(e,i){console.log(`Event ${e} - ${i.title}`),i.meta&&(this.dialog.closeAll(),this.dialog.open(Yy,{width:"600px",data:{task:i.meta}}).afterClosed().subscribe(s=>{s&&(console.log("Event details updated:",s),this.taskService.updateTask(s).then(()=>{this.loadEvents()}))}))}setView(e){console.log(`View changed to ${e}`),this.view=e}addTask(){console.log("Adding new task..."),this.dialog.open(IP,{width:"600px",maxHeight:"80vh",panelClass:"custom-dialog-container"}).afterClosed().subscribe(i=>{i&&(console.log("New task added:",i),this.loadEvents())})}previousPeriod(){switch(console.log("Moving to previous period..."),this.view){case Oo.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()-1));break;case Oo.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-7));break;case Oo.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-1))}console.log("New view date:",this.viewDate)}nextPeriod(){switch(console.log("Moving to next period..."),this.view){case Oo.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()+1));break;case Oo.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+7));break;case Oo.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+1))}console.log("New view date:",this.viewDate)}getWeekRange(){const e=Ba(this.viewDate),i=TP(this.viewDate);return`${e.getFullYear()}\u5e74${("0"+(e.getMonth()+1)).slice(-2)}\u6708${("0"+e.getDate()).slice(-2)}\u65e5\uff5e${i.getFullYear()}\u5e74${("0"+(i.getMonth()+1)).slice(-2)}\u6708${("0"+i.getDate()).slice(-2)}\u65e5`}getCompareWeekRange(){const e=Ba(this.compareDate),i=TP(this.compareDate);return`${e.getFullYear()}\u5e74${("0"+(e.getMonth()+1)).slice(-2)}\u6708${("0"+e.getDate()).slice(-2)}\u65e5\uff5e${i.getFullYear()}\u5e74${("0"+(i.getMonth()+1)).slice(-2)}\u6708${("0"+i.getDate()).slice(-2)}\u65e5`}updateMonthWeeks(){const e=nD(new Date(this.selectedYear,this.selectedMonth-1)),i=tD(new Date(this.selectedYear,this.selectedMonth-1));this.monthWeeks=function sye(n,t){const e=Pt(n.start),i=Pt(n.end);let r=+e>+i;const s=Ba(r?i:e,t),o=Ba(r?e:i,t);s.setHours(15),o.setHours(15);const a=+o.getTime();let l=s,c=t?.step??1;if(!c)return[];c<0&&(c=-c,r=!r);const u=[];for(;+l<=a;)l.setHours(0),u.push(Pt(l)),l=rg(l,c),l.setHours(15);return r?u.reverse():u}({start:e,end:i},{weekStartsOn:0}).map((r,s)=>s+1)}updateDaysInMonth(){const e=nD(new Date(this.selectedYear,this.selectedMonth-1)),i=tD(new Date(this.selectedYear,this.selectedMonth-1));this.daysInMonth=function oye(n,t){const e=Pt(n.start),i=Pt(n.end);let r=+e>+i;const s=r?+e:+i,o=r?i:e;o.setHours(0,0,0,0);let a=t?.step??1;if(!a)return[];a<0&&(a=-a,r=!r);const l=[];for(;+o<=s;)l.push(Pt(o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return r?l.reverse():l}({start:e,end:i}).map(r=>r.getDate())}onYearMonthOrWeekChange(){if(this.updateMonthWeeks(),this.updateDaysInMonth(),this.compareMode)switch(this.view){case Oo.Month:this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,1);break;case Oo.Week:const e=nD(new Date(this.selectedYear,this.selectedMonth-1));this.compareDate=rg(e,this.selectedWeek-1);break;case Oo.Day:this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay)}}toggleCompareMode(){this.compareMode&&this.onYearMonthOrWeekChange()}getWeekNumber(e){const i=new Date(e.getFullYear(),0,1),r=Math.floor((e.getTime()-i.getTime())/864e5);return Math.ceil((r+i.getDay()+1)/7)}isSameWeek(e,i){return function aye(n,t,e){return+Ba(n,e)==+Ba(t,e)}(e,i)}isSameDay(e,i){return H$(e,i)}static#e=this.\u0275fac=function(i){return new(i||n)(G(Al),G(R$),G(Kp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-calendar"]],standalone:!0,features:[gn([Gy,Wy,qy,XE,{provide:rh,useFactory:W$}]),Gi],decls:19,vars:3,consts:[[1,"container"],[1,"button-container"],[1,"action-button",3,"click"],[1,"action-button","add-task-button",3,"click"],[4,"ngIf"],[1,"comparison-settings"],["for","year"],["id","year",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","month"],["id","month",3,"ngModel","ngModelChange","change"],["for","compare"],["type","checkbox","id","compare",3,"ngModel","ngModelChange","change"],[1,"calendar-comparison",3,"ngClass"],[1,"calendar-left",3,"ngClass"],[3,"viewDate","events","eventClicked"],["class","calendar-right",4,"ngIf"],[3,"value"],[1,"calendar-right"],["for","week"],["id","week",3,"ngModel","ngModelChange","change"],["for","day"],["id","day",3,"ngModel","ngModelChange","change"]],template:function(i,r){1&i&&(C(0,"div",0)(1,"h2"),x(2,"\u30ab\u30ec\u30f3\u30c0\u30fc"),E(),C(3,"div",1)(4,"button",2),X("click",function(){return r.setView(r.CalendarView.Month)}),x(5,"\u6708\u30d3\u30e5\u30fc"),E(),C(6,"button",2),X("click",function(){return r.setView(r.CalendarView.Week)}),x(7,"\u9031\u30d3\u30e5\u30fc"),E(),C(8,"button",2),X("click",function(){return r.setView(r.CalendarView.Day)}),x(9,"\u65e5\u30d3\u30e5\u30fc"),E(),C(10,"button",2),X("click",function(){return r.previousPeriod()}),x(11,"\u524d\u306e\u671f\u9593"),E(),C(12,"button",2),X("click",function(){return r.nextPeriod()}),x(13,"\u6b21\u306e\u671f\u9593"),E(),C(14,"button",3),X("click",function(){return r.addTask()}),x(15,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E()(),me(16,dye,20,18,"div",4),me(17,mye,23,17,"div",4),me(18,wye,24,20,"div",4),E()),2&i&&(R(16),N("ngIf",r.view===r.CalendarView.Month),R(1),N("ngIf",r.view===r.CalendarView.Week),R(1),N("ngIf",r.view===r.CalendarView.Day))},dependencies:[mi,wr,Vi,Cr,u_,P$,$me,M$,Qme,ng,CP,EP,eD,Ar,iu,ru,Na,Fa,Ir,dr,ihe],styles:[".container[_ngcontent-%COMP%]{max-width:100%;margin:0;padding:20px;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:8px;height:98%;width:95%}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-start;margin-bottom:20px}.action-button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}.action-button[_ngcontent-%COMP%]:hover{background-color:#bbb}.add-task-button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}.add-task-button[_ngcontent-%COMP%]:hover{background-color:#bbb}.comparison-settings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.comparison-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:4px;font-size:12px;width:auto}.comparison-settings[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px}.calendar-comparison[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;align-items:flex-start}.calendar-left[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.calendar-right[_ngcontent-%COMP%]{width:46%;display:flex;flex-direction:column}.compare-active[_ngcontent-%COMP%]   .calendar-left[_ngcontent-%COMP%]{width:46%}.full-width[_ngcontent-%COMP%]{width:95%}"]})}return n})();function Eye(n,t){if(1&n){const e=We();C(0,"li"),x(1),C(2,"button",2),X("click",function(){const s=te(e).$implicit;return ne(U().addMember(s))}),x(3,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),E(),C(4,"button",2),X("click",function(){const s=te(e).$implicit;return ne(U().addOwner(s))}),x(5,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e.displayName," ")}}let G$=(()=>{class n{constructor(e){this.firestore=e,this.searchTerm="",this.users=[],this.userSelected=new $e}searchUsers(){this.users=[],this.firestore.collection("users",e=>e.where("displayName","==",this.searchTerm).limit(10)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("email","==",this.searchTerm).limit(10)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("uid","==",this.searchTerm).limit(10)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})})}addMember(e){this.userSelected.emit({user:e,role:"member"})}addOwner(e){this.userSelected.emit({user:e,role:"owner"})}static#e=this.\u0275fac=function(i){return new(i||n)(G(Pa))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-project-user-search"]],outputs:{userSelected:"userSelected"},standalone:!0,features:[Gi],decls:6,vars:2,consts:[[1,"search-container"],["placeholder","\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b",1,"input-field",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(i,r){1&i&&(C(0,"div",0)(1,"input",1),X("ngModelChange",function(o){return r.searchTerm=o}),E(),C(2,"button",2),X("click",function(){return r.searchUsers()}),x(3,"\u691c\u7d22"),E()(),C(4,"ul"),me(5,Eye,6,1,"li",3),E()),2&i&&(R(1),N("ngModel",r.searchTerm),R(4),N("ngForOf",r.users))},dependencies:[mi,Vi,Ar,Sr,Ir,dr],styles:[".search-container[_ngcontent-%COMP%]{display:flex;gap:5px;margin:10px 0;width:100%}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px;border-radius:5px;border:1px solid #ccc;width:100%;box-sizing:border-box}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#bbb}"]})}return n})(),MP=(()=>{class n{constructor(e){this.firestore=e}getUserById(e){return this.firestore.collection("users").doc(e).valueChanges()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Pa))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Dye=function(n,t){return{"background-color":n,border:t}};function Tye(n,t){if(1&n){const e=We();C(0,"div",13),X("click",function(){const s=te(e).$implicit;return ne(U().newProject.color=s)}),E()}if(2&n){const e=t.$implicit,i=U();N("ngStyle",Fi(1,Dye,e,i.newProject.color===e?"3px solid black":"1px solid #000"))}}function Sye(n,t){if(1&n){const e=We();C(0,"button",3),X("click",function(){te(e);const r=U().$implicit;return ne(U().removeOwner(r))}),x(1,"\u524a\u9664"),E()}}function Iye(n,t){if(1&n&&(C(0,"li"),x(1),me(2,Sye,2,0,"button",14),E()),2&n){const e=t.$implicit,i=U();R(1),yi(" ",e.displayName," "),R(1),N("ngIf",e.uid!==i.currentUserUid)}}function Aye(n,t){if(1&n){const e=We();C(0,"li"),x(1),C(2,"button",3),X("click",function(){const s=te(e).$implicit;return ne(U().removeMember(s))}),x(3,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e.displayName," ")}}function xye(n,t){if(1&n){const e=We();C(0,"li"),x(1),C(2,"button",3),X("click",function(){const s=te(e).$implicit;return ne(U().addMember(s))}),x(3,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),E(),C(4,"button",3),X("click",function(){const s=te(e).$implicit;return ne(U().addOwner(s))}),x(5,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e.displayName," ")}}let Z$=(()=>{class n{constructor(e,i,r,s){this.dialogRef=e,this.projectService=i,this.authService=r,this.userService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.newProject={id:this.generateId(),name:"",description:"",startDate:"",endDate:"",color:"white",tasks:[],members:[],owners:[]},this.members=[],this.owners=[],this.searchedUsers=[]}ngOnInit(){this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid,this.currentUserUid&&(this.newProject.owners.push(this.currentUserUid),this.userService.getUserById(this.currentUserUid).subscribe(i=>{i&&this.owners.push({...i,uid:this.currentUserUid})}))})}saveProject(){var e=this;return(0,pe.Z)(function*(){try{yield e.projectService.addProject(e.newProject),e.dialogRef.close(e.newProject)}catch(i){console.error("Error saving project:",i)}})()}cancel(){this.dialogRef.close()}handleUserSelected(e){const{user:i,role:r}=e;"member"===r?this.addMember(i):"owner"===r&&this.addOwner(i)}addMember(e){this.newProject.members.includes(e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002"):(this.newProject.members.push(e.uid),this.members.push(e))}addOwner(e){this.newProject.owners.includes(e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002"):(this.newProject.owners.push(e.uid),this.owners.push(e))}removeMember(e){this.newProject.members=this.newProject.members.filter(i=>i!==e.uid),this.members=this.members.filter(i=>i.uid!==e.uid)}removeOwner(e){e.uid!==this.currentUserUid&&(this.newProject.owners=this.newProject.owners.filter(i=>i!==e.uid),this.owners=this.owners.filter(i=>i.uid!==e.uid))}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(i){return new(i||n)(G(ou),G(oh),G(ao),G(MP))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-project-add"]],standalone:!0,features:[Gi],decls:42,vars:8,consts:[[1,"project-detail-container"],[1,"header"],[1,"buttons"],[3,"click"],[1,"form-group"],["placeholder","\u540d\u524d",1,"input-field",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",1,"input-field",3,"ngModel","ngModelChange"],[1,"form-group","dates"],["type","date",1,"input-field",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[1,"color-option",3,"ngStyle","click"],[3,"click",4,"ngIf"]],template:function(i,r){1&i&&(C(0,"div",0)(1,"div",1)(2,"h2"),x(3,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),E(),C(4,"div",2)(5,"button",3),X("click",function(){return r.saveProject()}),x(6,"\u4fdd\u5b58"),E(),C(7,"button",3),X("click",function(){return r.cancel()}),x(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),E()()(),C(9,"div",4)(10,"label"),x(11,"\u540d\u524d: "),C(12,"input",5),X("ngModelChange",function(o){return r.newProject.name=o}),E()()(),C(13,"div",4)(14,"label"),x(15,"\u8aac\u660e: "),C(16,"textarea",6),X("ngModelChange",function(o){return r.newProject.description=o}),E()()(),C(17,"div",7)(18,"label"),x(19,"\u958b\u59cb\u65e5: "),C(20,"input",8),X("ngModelChange",function(o){return r.newProject.startDate=o}),E()(),C(21,"label"),x(22,"\u7d42\u4e86\u65e5: "),C(23,"input",8),X("ngModelChange",function(o){return r.newProject.endDate=o}),E()()(),C(24,"div",4)(25,"label"),x(26,"\u8272:"),E(),C(27,"div",9),me(28,Tye,1,4,"div",10),E()(),C(29,"h4"),x(30,"\u30aa\u30fc\u30ca\u30fc"),E(),C(31,"ul"),me(32,Iye,3,2,"li",11),E(),C(33,"h4"),x(34,"\u30e1\u30f3\u30d0\u30fc"),E(),C(35,"ul"),me(36,Aye,4,1,"li",11),E(),C(37,"h4"),x(38,"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22"),E(),C(39,"app-project-user-search",12),X("userSelected",function(o){return r.handleUserSelected(o)}),E(),C(40,"ul"),me(41,xye,6,1,"li",11),E()()),2&i&&(R(12),N("ngModel",r.newProject.name),R(4),N("ngModel",r.newProject.description),R(4),N("ngModel",r.newProject.startDate),R(3),N("ngModel",r.newProject.endDate),R(5),N("ngForOf",r.colors),R(4),N("ngForOf",r.owners),R(4),N("ngForOf",r.members),R(5),N("ngForOf",r.searchedUsers))},dependencies:[mi,Vi,Cr,Ao,Ar,Sr,Ir,dr,G$],styles:[".project-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}button[_ngcontent-%COMP%]{margin:0;padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#bbb}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:10px 0}ul[_ngcontent-%COMP%]{padding-left:20px;margin:5px 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin:10px 0}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group.dates[_ngcontent-%COMP%]{display:flex;gap:10px}.input-field[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})();function kye(n,t){1&n&&dn(0,"div",2)}function Mye(n,t){if(1&n){const e=We();C(0,"div",15)(1,"button",16),X("click",function(){return te(e),ne(U(2).updateProject())}),x(2,"\u4fdd\u5b58"),E(),C(3,"button",16),X("click",function(){return te(e),ne(U(2).cancel())}),x(4,"\u30ad\u30e3\u30f3\u30bb\u30eb"),E()()}}const Pye=function(n,t){return{"background-color":n,border:t}};function Rye(n,t){if(1&n){const e=We();C(0,"div",17),X("click",function(){const s=te(e).$implicit;return ne(U(2).projectCopy.color=s)}),E()}if(2&n){const e=t.$implicit,i=U(2);N("ngStyle",Fi(1,Pye,e,i.projectCopy.color===e?"3px solid black":"1px solid #000"))}}function Oye(n,t){if(1&n){const e=We();C(0,"button",16),X("click",function(){te(e);const r=U().$implicit;return ne(U(2).removeOwner(r))}),x(1,"\u524a\u9664"),E()}}function Nye(n,t){if(1&n&&(C(0,"li"),x(1),me(2,Oye,2,0,"button",18),E()),2&n){const e=t.$implicit,i=U(2);R(1),yi(" ",e.displayName," "),R(1),N("ngIf",i.isOwner&&e.uid!==i.currentUserUid)}}function Fye(n,t){if(1&n){const e=We();C(0,"li"),x(1),C(2,"button",16),X("click",function(){const s=te(e).$implicit;return ne(U(2).removeMember(s))}),x(3,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e.displayName," ")}}function Lye(n,t){if(1&n){const e=We();C(0,"li"),x(1),C(2,"button",16),X("click",function(){const s=te(e).$implicit;return ne(U(2).addMember(s))}),x(3,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),E(),C(4,"button",16),X("click",function(){const s=te(e).$implicit;return ne(U(2).addOwner(s))}),x(5,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e.displayName," ")}}function Vye(n,t){if(1&n){const e=We();C(0,"div",3)(1,"div",4)(2,"h2"),x(3,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a73\u7d30"),E(),me(4,Mye,5,0,"div",5),E(),C(5,"div",6)(6,"label"),x(7,"\u540d\u524d: "),C(8,"input",7),X("ngModelChange",function(r){return te(e),ne(U().projectCopy.name=r)}),E()()(),C(9,"div",6)(10,"label"),x(11,"\u8aac\u660e: "),C(12,"textarea",8),X("ngModelChange",function(r){return te(e),ne(U().projectCopy.description=r)}),E()()(),C(13,"div",9)(14,"label"),x(15,"\u958b\u59cb\u65e5: "),C(16,"input",10),X("ngModelChange",function(r){return te(e),ne(U().projectCopy.startDate=r)}),E()(),C(17,"label"),x(18,"\u7d42\u4e86\u65e5: "),C(19,"input",10),X("ngModelChange",function(r){return te(e),ne(U().projectCopy.endDate=r)}),E()()(),C(20,"div",6)(21,"label"),x(22,"\u8272:"),E(),C(23,"div",11),me(24,Rye,1,4,"div",12),E()(),C(25,"h4"),x(26,"\u30aa\u30fc\u30ca\u30fc"),E(),C(27,"ul"),me(28,Nye,3,2,"li",13),E(),C(29,"h4"),x(30,"\u30e1\u30f3\u30d0\u30fc"),E(),C(31,"ul"),me(32,Fye,4,1,"li",13),E(),C(33,"h4"),x(34,"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22"),E(),C(35,"app-project-user-search",14),X("userSelected",function(r){return te(e),ne(U().handleUserSelected(r))}),E(),C(36,"ul"),me(37,Lye,6,1,"li",13),E()()}if(2&n){const e=U();R(4),N("ngIf",e.isOwner),R(4),N("ngModel",e.projectCopy.name),R(4),N("ngModel",e.projectCopy.description),R(4),N("ngModel",e.projectCopy.startDate),R(3),N("ngModel",e.projectCopy.endDate),R(5),N("ngForOf",e.colors),R(4),N("ngForOf",e.ownersCopy),R(4),N("ngForOf",e.membersCopy),R(5),N("ngForOf",e.searchedUsers)}}let K$=(()=>{class n{constructor(e,i,r,s,o){this.dialogRef=e,this.data=i,this.projectService=r,this.userService=s,this.authService=o,this.members=[],this.membersCopy=[],this.owners=[],this.ownersCopy=[],this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.isOwner=!1,this.searchedUsers=[],this.project=i.project,this.projectCopy=JSON.parse(JSON.stringify(this.project))}ngOnInit(){this.loadMembers(),this.loadOwners(),this.checkIfOwner(),this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid})}loadMembers(){this.members=[],this.membersCopy=[],this.projectCopy.members.forEach(e=>{this.userService.getUserById(e).subscribe(i=>{i&&(this.members.push({...i,uid:e}),this.membersCopy.push({...i,uid:e}))})})}loadOwners(){this.owners=[],this.ownersCopy=[],this.projectCopy.owners.forEach(e=>{this.userService.getUserById(e).subscribe(i=>{i&&(this.owners.push({...i,uid:e}),this.ownersCopy.push({...i,uid:e}))})})}checkIfOwner(){this.authService.user$.subscribe(e=>{e&&(this.isOwner=this.projectCopy.owners.includes(e.uid))})}updateProject(){var e=this;return(0,pe.Z)(function*(){try{e.projectCopy.members=e.membersCopy.map(i=>i.uid),e.projectCopy.owners=e.ownersCopy.map(i=>i.uid),yield e.projectService.updateProject(e.projectCopy),e.dialogRef.close(e.projectCopy)}catch(i){console.error("Error saving project:",i),alert(`\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4fdd\u5b58\u306b\u5931\u6557\u3057\u307e\u3057\u305f: ${i.message}`)}})()}handleUserSelected(e){const{user:i,role:r}=e;"member"===r?this.addMember(i):"owner"===r&&this.addOwner(i)}addMember(e){this.membersCopy.some(i=>i.uid===e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002"):this.membersCopy.push(e)}addOwner(e){this.ownersCopy.some(i=>i.uid===e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002"):this.ownersCopy.push(e)}removeMember(e){this.membersCopy=this.membersCopy.filter(i=>i.uid!==e.uid)}removeOwner(e){e.uid!==this.currentUserUid&&(this.ownersCopy=this.ownersCopy.filter(i=>i.uid!==e.uid))}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(i){return new(i||n)(G(ou),G(Zp),G(oh),G(MP),G(ao))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-project-detail"]],standalone:!0,features:[Gi],decls:2,vars:2,consts:[["class","modal-overlay",4,"ngIf"],["class","project-detail-container",4,"ngIf"],[1,"modal-overlay"],[1,"project-detail-container"],[1,"header"],["class","buttons",4,"ngIf"],[1,"form-group"],["placeholder","\u540d\u524d",1,"input-field",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",1,"input-field",3,"ngModel","ngModelChange"],[1,"form-group","dates"],["type","date",1,"input-field",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[1,"buttons"],[3,"click"],[1,"color-option",3,"ngStyle","click"],[3,"click",4,"ngIf"]],template:function(i,r){1&i&&(me(0,kye,1,0,"div",0),me(1,Vye,38,9,"div",1)),2&i&&(N("ngIf",r.project),R(1),N("ngIf",r.project))},dependencies:[mi,Vi,Cr,Ao,Ar,Sr,Ir,dr,G$],styles:[".project-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}button[_ngcontent-%COMP%]{margin:0;padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#bbb}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:10px 0}ul[_ngcontent-%COMP%]{padding-left:20px;margin:5px 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin:10px 0}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group.dates[_ngcontent-%COMP%]{display:flex;gap:10px}.input-field[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})();function Bye(n,t){if(1&n&&(C(0,"span"),x(1),E()),2&n){const e=t.$implicit,i=U(2);R(1),yi(" ",(null==i.ownersMap[e]?null:i.ownersMap[e].displayName)||"Unknown Owner"," ")}}function jye(n,t){if(1&n&&(C(0,"span"),x(1),E()),2&n){const e=t.$implicit,i=U(2);R(1),yi(" ",(null==i.membersMap[e]?null:i.membersMap[e].displayName)||"Unknown Member"," ")}}function Uye(n,t){if(1&n){const e=We();C(0,"li",18)(1,"div",19)(2,"input",20),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)}),E(),C(3,"a",21),X("click",function(){const s=te(e).$implicit;return ne(U(2).openTaskDetailDialog(s))}),C(4,"div",22),x(5),E(),C(6,"div",23)(7,"span",24),x(8),E(),C(9,"span",25),x(10),E(),C(11,"span",26),x(12),qt(13,"date"),E(),C(14,"span",27),x(15),qt(16,"date"),E(),C(17,"span",28),x(18),E(),dn(19,"span",29),E()()()()}if(2&n){const e=t.$implicit,i=U().$implicit,r=U();R(2),N("ngModel",e.selected)("disabled",!r.canEdit(i)),R(3),Je(e.title),R(3),Je(e.status),R(1),N("ngClass",e.priority),R(1),Je(r.getPriorityLabel(e.priority)),R(2),Je(Yn(13,11,e.startDateTime,"short")),R(3),Je(Yn(16,14,e.endDateTime,"short")),R(3),Je(e.tag),R(1),_s("background-color",e.tagColor)}}function Hye(n,t){if(1&n){const e=We();C(0,"li")(1,"div",6)(2,"input",12),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)}),E(),C(3,"h3",13),X("click",function(){const s=te(e).$implicit;return ne(U().openProjectDetailDialog(s))}),x(4),E(),C(5,"span",14),x(6),E(),dn(7,"span",15),C(8,"span",16),x(9,"\u30aa\u30fc\u30ca\u30fc: "),me(10,Bye,2,1,"span",5),E(),C(11,"span",17),x(12,"\u30e1\u30f3\u30d0\u30fc: "),me(13,jye,2,1,"span",5),E()(),C(14,"ul",7)(15,"li",8)(16,"div",9)(17,"span",10),x(18,"\u9078\u629e"),E(),C(19,"span",10),x(20,"\u30bf\u30a4\u30c8\u30eb"),E(),C(21,"span",10),x(22,"\u30b9\u30c6\u30fc\u30bf\u30b9"),E(),C(23,"span",10),x(24,"\u512a\u5148\u5ea6"),E(),C(25,"span",10),x(26,"\u958b\u59cb\u65e5\u6642"),E(),C(27,"span",10),x(28,"\u7d42\u4e86\u65e5\u6642"),E(),C(29,"span",10),x(30,"\u30bf\u30b0"),E(),C(31,"span",10),x(32,"\u30bf\u30b0\u306e\u8272"),E()()(),me(33,Uye,20,17,"li",11),E()()}if(2&n){const e=t.$implicit,i=U();R(2),N("ngModel",e.selected)("disabled",!i.canEdit(e)),R(2),Je(e.name),R(2),X0("",e.startDate," - ",e.endDate,""),R(1),_s("background-color",e.color),R(3),N("ngForOf",e.owners),R(3),N("ngForOf",e.members),R(20),N("ngForOf",i.getTasksForProject(e.id))}}function zye(n,t){if(1&n){const e=We();C(0,"li",18)(1,"div",19)(2,"input",30),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)}),E(),C(3,"a",21),X("click",function(){const s=te(e).$implicit;return ne(U().openTaskDetailDialog(s))}),C(4,"div",22),x(5),E(),C(6,"div",23)(7,"span",24),x(8),E(),C(9,"span",25),x(10),E(),C(11,"span",26),x(12),qt(13,"date"),E(),C(14,"span",27),x(15),qt(16,"date"),E(),C(17,"span",28),x(18),E(),dn(19,"span",29),E()()()()}if(2&n){const e=t.$implicit,i=U();R(2),N("ngModel",e.selected),R(3),Je(e.title),R(3),Je(e.status),R(1),N("ngClass",e.priority),R(1),Je(i.getPriorityLabel(e.priority)),R(2),Je(Yn(13,10,e.startDateTime,"short")),R(3),Je(Yn(16,13,e.endDateTime,"short")),R(3),Je(e.tag),R(1),_s("background-color",e.tagColor)}}let $ye=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.projectService=i,this.userService=r,this.authService=s,this.dialog=o,this.projects=[],this.tasks=[],this.membersMap={},this.ownersMap={},this.currentUserUid=null,this.uniqueTaskIds=new Set}ngOnInit(){this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid||null,this.loadProjects()})}loadProjects(){console.log("Loading projects..."),this.projectService.getProjects().subscribe(e=>{this.projects=e.filter(i=>i.members.includes(this.currentUserUid)||i.owners.includes(this.currentUserUid)),console.log("Projects loaded:",this.projects),this.loadUsers(),this.loadTasksForProjects()})}loadTasksForProjects(){console.log("Loading tasks for each project..."),this.tasks=[],this.uniqueTaskIds.clear(),this.currentUserUid&&(this.projects.forEach(e=>{console.log(`User is a member or owner of project: ${e.id}`),this.loadTasksForUsersInProject(e.id,e.members.concat(e.owners))}),this.loadUnassignedTasks())}loadTasksForUsersInProject(e,i){i.forEach(r=>{this.taskService.getTasksByUserId(r).subscribe(s=>{s.forEach(o=>{o.projectId===e&&!this.uniqueTaskIds.has(o.id)&&(this.uniqueTaskIds.add(o.id),this.tasks.push(o))})})})}loadUnassignedTasks(){console.log("Loading unassigned tasks..."),this.taskService.getTasksByUserId(this.currentUserUid).subscribe(e=>{e.forEach(i=>{!i.projectId&&!this.uniqueTaskIds.has(i.id)&&(this.uniqueTaskIds.add(i.id),this.tasks.push(i))}),console.log("Unassigned tasks loaded:",this.tasks)})}loadUsers(){console.log("Loading users...");const e=new Set,i=new Set;this.projects.forEach(o=>{o.members&&o.members.forEach(a=>e.add(a)),o.owners&&o.owners.forEach(a=>i.add(a))});const r=Array.from(e),s=Array.from(i);console.log("Unique Member IDs:",r),console.log("Unique Owner IDs:",s),r.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.membersMap[o]=a,console.log("Added member to membersMap:",a)):console.log("User is undefined or has no UID:",a)})}),s.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.ownersMap[o]=a,console.log("Added owner to ownersMap:",a)):console.log("User is undefined or has no UID:",a)})})}openAddTaskDialog(){console.log("Opening Add Task Dialog..."),this.dialog.open(IP,{width:"400px"}).afterClosed().subscribe(i=>{i&&(console.log("Add Task Dialog closed with result:",i),this.loadTasksForProjects())})}openAddProjectDialog(){console.log("Opening Add Project Dialog..."),this.dialog.open(Z$,{width:"400px"}).afterClosed().subscribe(i=>{i&&(console.log("Add Project Dialog closed with result:",i),this.loadProjects())})}deleteSelectedTasks(){console.log("Deleting selected tasks...");const i=this.tasks.filter(r=>r.selected).map(r=>{const s=this.projects.find(o=>o.id===r.projectId);return console.log("Project found:",s),s&&s.owners.includes(this.currentUserUid)?(console.log("User is owner of the project, deleting task..."),this.taskService.deleteTask(r).then(()=>{console.log("Deleted task:",r)}).catch(o=>{console.error("Error deleting task:",o)})):r.userId===this.currentUserUid?(console.log("User is the creator of the task, deleting task..."),this.taskService.deleteTask(r).then(()=>{console.log("Deleted task:",r)}).catch(o=>{console.error("Error deleting task:",o)})):(console.warn("You do not have permission to delete this task:",r),Promise.resolve())});Promise.all(i).then(()=>{this.loadTasksForProjects()}).catch(r=>{console.error("Error in deleting tasks:",r)})}deleteSelectedProjects(){console.log("Deleting selected projects..."),this.projects.filter(i=>i.selected).forEach(i=>{this.getTasksForProject(i.id).forEach(s=>{this.taskService.deleteTask(s).then(()=>{console.log("Deleted related task:",s),this.loadTasksForProjects()})}),this.projectService.deleteProject(i).then(()=>{console.log("Deleted project:",i),this.loadProjects()})})}openProjectDetailDialog(e){console.log("Opening Project Detail Dialog for project:",e),this.currentUserUid&&e.owners.includes(this.currentUserUid)?(this.dialog.closeAll(),this.dialog.open(K$,{width:"600px",data:{project:e}}).afterClosed().subscribe(r=>{r&&(console.log("Project Detail Dialog closed with result:",r),this.loadProjects())})):alert("\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30aa\u30fc\u30ca\u30fc\u3067\u306f\u306a\u3044\u305f\u3081\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\u3002")}getTasksForProject(e){return this.tasks.filter(i=>i.projectId===e)}openTaskDetailDialog(e){console.log("Opening Task Detail Dialog for task:",e),this.dialog.closeAll(),this.dialog.open(Yy,{width:"600px",data:{task:e}}).afterClosed().subscribe(r=>{r&&(console.log("Task Detail Dialog closed with result:",r),this.loadTasksForProjects())})}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}canEdit(e){return!!this.currentUserUid&&e.owners.includes(this.currentUserUid)}static#e=this.\u0275fac=function(i){return new(i||n)(G(Al),G(oh),G(MP),G(ao),G(Kp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-project-list"]],standalone:!0,features:[Gi],decls:37,vars:2,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"project-task-list-container"],[4,"ngFor","ngForOf"],[1,"project-header"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],["type","checkbox",1,"project-checkbox",3,"ngModel","disabled","ngModelChange"],[3,"click"],[1,"project-dates"],[1,"project-color"],[1,"project-owners"],[1,"project-members"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","disabled","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(C(0,"div",0)(1,"div",1)(2,"button",2),X("click",function(){return r.openAddTaskDialog()}),x(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E(),C(4,"button",3),X("click",function(){return r.openAddProjectDialog()}),x(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),E(),C(6,"button",3),X("click",function(){return r.deleteSelectedTasks()}),x(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),E(),C(8,"button",3),X("click",function(){return r.deleteSelectedProjects()}),x(9,"\u9078\u629e\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664"),E()(),C(10,"div",4)(11,"ul"),me(12,Hye,34,10,"li",5),C(13,"li")(14,"div",6)(15,"h3"),x(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7121\u6240\u5c5e"),E()(),C(17,"ul",7)(18,"li",8)(19,"div",9)(20,"span",10),x(21,"\u9078\u629e"),E(),C(22,"span",10),x(23,"\u30bf\u30a4\u30c8\u30eb"),E(),C(24,"span",10),x(25,"\u30b9\u30c6\u30fc\u30bf\u30b9"),E(),C(26,"span",10),x(27,"\u512a\u5148\u5ea6"),E(),C(28,"span",10),x(29,"\u958b\u59cb\u65e5\u6642"),E(),C(30,"span",10),x(31,"\u7d42\u4e86\u65e5\u6642"),E(),C(32,"span",10),x(33,"\u30bf\u30b0"),E(),C(34,"span",10),x(35,"\u30bf\u30b0\u306e\u8272"),E()()(),me(36,zye,20,16,"li",11),E()()()()()),2&i&&(R(12),N("ngForOf",r.projects),R(24),N("ngForOf",r.getTasksForProject("")))},dependencies:[mi,wr,Vi,u_,Ar,Na,Ir,dr],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;box-sizing:border-box;margin:0 auto}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.project-task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;margin:10px auto}.project-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto 1fr auto auto;align-items:center;gap:10px}.project-checkbox[_ngcontent-%COMP%]{margin-right:10px}.project-dates[_ngcontent-%COMP%], .project-color[_ngcontent-%COMP%], .project-owners[_ngcontent-%COMP%], .project-members[_ngcontent-%COMP%]{margin-left:10px;font-size:.9em;color:#555}.project-dates[_ngcontent-%COMP%]{font-size:1.2em}.project-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;display:inline-block}.project-owners[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .project-members[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;padding:5px 10px;background-color:#f0f0f0;border-radius:10px;font-size:.9em;color:#555}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-start-date[_ngcontent-%COMP%], .task-end-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%], .task-tag-color[_ngcontent-%COMP%]{text-align:center;margin-left:10px}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}"]})}return n})();function PP(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function og(n,t){const e=t?"":"none";PP(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Y$(n,t,e){PP(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function sD(n,t){return t&&"none"!=t?n+" "+t:n}function Q$(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function RP(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function OP(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function NP(n,t,e){const{top:i,bottom:r,left:s,right:o}=n;return e>=i&&e<=r&&t>=s&&t<=o}function Qy(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function X$(n,t,e,i){const{top:r,right:s,bottom:o,left:a,width:l,height:c}=n,u=l*t,f=c*t;return i>r-f&&i<o+f&&e>a-u&&e<s+u}class J${constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:OP(e)})})}handleScroll(t){const e=Ro(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let s,o;if(e===this._document){const c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=e.scrollTop,o=e.scrollLeft;const a=r.top-s,l=r.left-o;return this.positions.forEach((c,u)=>{c.clientRect&&e!==u&&e.contains(u)&&Qy(c.clientRect,a,l)}),r.top=s,r.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function e8(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?i8(n,t):("input"===i||"select"===i||"textarea"===i)&&n8(n,t),t8("canvas",n,t,i8),t8("input, textarea, select",n,t,n8),t}function t8(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let qye=0;function n8(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${qye++}`)}function i8(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const r8=Zd({passive:!0}),oD=Zd({passive:!1}),FP=new Set(["position"]);class Zye{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=function su(n){return null!=n&&"false"!=`${n}`}(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>og(i,e)))}constructor(t,e,i,r,s,o){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new se,this._pointerMoveSubscription=Et.EMPTY,this._pointerUpSubscription=Et.EMPTY,this._scrollSubscription=Et.EMPTY,this._resizeSubscription=Et.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new se,this.started=new se,this.released=new se,this.ended=new se,this.entered=new se,this.exited=new se,this.dropped=new se,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const y=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),v=this._dropContainer;if(!y)return void this._endDragSequence(a);(!v||!v.isDragging()&&!v.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const u=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=c.x-u.x+this._passiveTransform.x,f.y=c.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new J$(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>hr(i)),this._handles.forEach(i=>og(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=hr(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,oD),e.addEventListener("touchstart",this._pointerDown,r8),e.addEventListener("dragstart",this._nativeDragStart,oD)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?hr(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),og(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),og(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Xy(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(o,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),Y$(i,!1,FP),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=Xy(e),s=!r&&0!==e.button,o=this._rootElement,a=Ro(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=r?$1(e):z1(e);if(a&&a.draggable&&"mousedown"===e.type&&e.preventDefault(),i||s||l||c)return;if(this._handles.length){const m=o.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=OP(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Y$(this._rootElement,!0,FP),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),o=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const s=t.matchSize?this._initialClientRect:null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),r=o8(o,this._document),this._previewRef=o,t.matchSize?a8(r,s):r.style.transform=aD(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=e8(this._rootElement),a8(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return PP(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},FP),og(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function Wye(n){const t=getComputedStyle(n),e=RP(t,"transition-property"),i=e.find(a=>"transform"===a||"all"===a);if(!i)return 0;const r=e.indexOf(i),s=RP(t,"transition-duration"),o=RP(t,"transition-delay");return Q$(s[r])+Q$(o[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=o=>{(!o||Ro(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=o8(this._placeholderRef,this._document)):i=e8(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,o=Xy(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition();return{x:s.left-t.left+(o.pageX-s.left-a.left),y:s.top-t.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=Xy(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+o,f=a.bottom-(c-o);i=s8(i,a.left+s,a.right-(l-s)),r=s8(r,u,f)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,og(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,oD),t.removeEventListener("touchstart",this._pointerDown,r8),t.removeEventListener("dragstart",this._nativeDragStart,oD)}_applyRootElementTransform(t,e){const i=aD(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=sD(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=aD(t,e);this._preview.style.transform=sD(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,l=i.bottom-r.bottom;r.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,r.height>i.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Xy(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=Ro(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Qy(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=P1(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return hr(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function aD(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function s8(n,t,e){return Math.max(t,Math.min(e,n))}function Xy(n){return"t"===n.type[0]}function o8(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function a8(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=aD(t.left,t.top)}function l8(n,t,e){const i=Jy(t,n.length-1),r=Jy(e,n.length-1);if(i===r)return;const s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s}function Jy(n,t){return Math.max(0,Math.min(t,n))}class Kye{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,l=s.findIndex(D=>D.drag===t),c=s[o],f=c.clientRect,m=l>o?1:-1,y=this._getItemOffsetPx(s[l].clientRect,f,m),v=this._getSiblingOffsetPx(l,s,m),w=s.slice();return l8(s,l,o),s.forEach((D,P)=>{if(w[P]===D)return;const I=D.drag===t,O=I?y:v,W=I?t.getPlaceholderElement():D.drag.getRootElement();D.offset+=O,a?(W.style.transform=sD(`translate3d(${Math.round(D.offset)}px, 0, 0)`,D.initialTransform),Qy(D.clientRect,0,O)):(W.style.transform=sD(`translate3d(0, ${Math.round(D.offset)}px, 0)`,D.initialTransform),Qy(D.clientRect,O,0))}),this._previousSwap.overlaps=NP(f,e,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:l,currentIndex:o}}enter(t,e,i,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,o=this._activeDraggables,a=o.indexOf(t),l=t.getPlaceholderElement();let c=o[s];if(c===t&&(c=o[s+1]),!c&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const u=c.getRootElement();u.parentElement.insertBefore(l,u),o.splice(s,0,t)}else hr(this._element).appendChild(l),o.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Qy(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:OP(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let s=r?e.left-t.left:e.top-t.top;return-1===i&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,s=e[t].clientRect,o=e[t+-1*i];let a=s[r?"width":"height"]*i;if(o){const l=r?"left":"top",c=r?"right":"bottom";-1===i?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const o=i[i.length-1].clientRect;return r?t>=o.right:e>=o.bottom}{const o=i[0].clientRect;return r?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,r){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>a!==t&&((!r||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?r.x:r.y)!==this._previousSwap.delta)&&(s?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom))));return-1!==o&&this._sortPredicate(o,t)?o:-1}}class Yye{constructor(t,e,i,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new se,this.entered=new se,this.exited=new se,this.dropped=new se,this.sorted=new se,this.receivingStarted=new se,this.receivingStopped=new se,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Et.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new se,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),e$(0,Wz).pipe(es(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=hr(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new J$(i),this._sortStrategy=new Kye(this.element,e),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,s,o,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:l})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=hr(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!X$(this._clientRect,.05,e,i))return;const s=this._sortStrategy.sort(t,e,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||X$(o.clientRect,.05,t,e)&&([r,s]=function Qye(n,t,e,i){const r=d8(t,i),s=h8(t,e);let o=0,a=0;if(r){const l=n.scrollTop;1===r?l>0&&(o=1):n.scrollHeight-l>n.clientHeight&&(o=2)}if(s){const l=n.scrollLeft;1===s?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,t,e),(r||s)&&(i=a))}),!r&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};r=d8(l,e),s=h8(l,t),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=hr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=hr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=hr(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&NP(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!NP(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const s=hr(this.element);return r===s||s.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=P1(hr(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function d8(n,t){const{top:e,bottom:i,height:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}function h8(n,t){const{left:e,right:i,width:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}const lD=Zd({passive:!1,capture:!0});let Xye=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new se,this.pointerUp=new se,this.scroll=new se,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,lD)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,lD)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:lD}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:lD}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new pt(r=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&r.next(a)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),be(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(at),ie(Vt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Jye={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let LP=(()=>{class n{constructor(e,i,r,s){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,i=Jye){return new Zye(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new Yye(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Vt),ie(at),ie(N1),ie(Xye))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ave=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({providers:[LP],imports:[F1]})}return n})();const lve=function(n,t){return{"background-color":n,border:t}};function cve(n,t){if(1&n){const e=We();C(0,"div",22),X("click",function(){const s=te(e).$implicit;return ne(U(2).selectColor(s))}),E()}if(2&n){const e=t.$implicit,i=U(2);N("ngStyle",Fi(1,lve,e,i.editedSubtask.tagColor===e?"3px solid black":"1px solid #000"))}}function uve(n,t){if(1&n){const e=We();C(0,"div",1)(1,"div",2)(2,"h2",3),x(3),E(),C(4,"div",4)(5,"button",5),X("click",function(){return te(e),ne(U().saveSubtask())}),x(6,"\u4fdd\u5b58"),E(),C(7,"button",5),X("click",function(){return te(e),ne(U().cancel())}),x(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),E()()(),C(9,"div",6)(10,"span",7),x(11,"\u30bf\u30a4\u30c8\u30eb:"),E(),C(12,"span",8)(13,"input",9),X("ngModelChange",function(r){return te(e),ne(U().editedSubtask.title=r)}),E()()(),C(14,"div",6)(15,"span",7),x(16,"\u8aac\u660e:"),E(),C(17,"span",8)(18,"textarea",10),X("ngModelChange",function(r){return te(e),ne(U().editedSubtask.description=r)}),E()()(),C(19,"div",6)(20,"span",7),x(21,"\u958b\u59cb\u65e5\u6642:"),E(),C(22,"span",8)(23,"input",11),X("ngModelChange",function(r){return te(e),ne(U().editedSubtask.startDateTime=r)}),E()()(),C(24,"div",6)(25,"span",7),x(26,"\u7d42\u4e86\u65e5\u6642:"),E(),C(27,"span",8)(28,"input",11),X("ngModelChange",function(r){return te(e),ne(U().editedSubtask.endDateTime=r)}),E()()(),C(29,"div",6)(30,"span",7),x(31,"\u512a\u5148\u5ea6:"),E(),C(32,"span",8)(33,"select",12),X("ngModelChange",function(r){return te(e),ne(U().editedSubtask.priority=r)}),C(34,"option",13),x(35,"\u4f4e"),E(),C(36,"option",14),x(37,"\u4e2d"),E(),C(38,"option",15),x(39,"\u9ad8"),E()()()(),C(40,"div",6)(41,"span",7),x(42,"\u30bf\u30b0:"),E(),C(43,"span",8)(44,"input",16),X("ngModelChange",function(r){return te(e),ne(U().editedSubtask.tag=r)}),E()()(),C(45,"div",6)(46,"span",7),x(47,"\u30bf\u30b0\u306e\u8272:"),E(),C(48,"span",8)(49,"div",17),me(50,cve,1,4,"div",18),E()()(),C(51,"div",6)(52,"span",7),x(53,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),E(),C(54,"span",8)(55,"select",12),X("ngModelChange",function(r){return te(e),ne(U().editedSubtask.status=r)}),C(56,"option",19),x(57,"\u672a\u7740\u624b"),E(),C(58,"option",20),x(59,"\u9032\u884c\u4e2d"),E(),C(60,"option",21),x(61,"\u5b8c\u4e86"),E()()()()()}if(2&n){const e=U();R(3),yi("",e.subtask.title," \u306e\u8a73\u7d30"),R(10),N("ngModel",e.editedSubtask.title),R(5),N("ngModel",e.editedSubtask.description),R(5),N("ngModel",e.editedSubtask.startDateTime),R(5),N("ngModel",e.editedSubtask.endDateTime),R(5),N("ngModel",e.editedSubtask.priority),R(11),N("ngModel",e.editedSubtask.tag),R(6),N("ngForOf",e.colors),R(5),N("ngModel",e.editedSubtask.status)}}let dve=(()=>{class n{constructor(e,i,r){this.taskService=e,this.dialogRef=i,this.data=r,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],r&&r.subtask&&r.task?(this.subtask=r.subtask,this.task=r.task,this.editedSubtask={...this.subtask}):(this.subtask={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"},this.editedSubtask={...this.subtask},this.task={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:""})}ngOnInit(){this.task.subtasks||(this.task.subtasks=[])}saveSubtask(){var e=this;return(0,pe.Z)(function*(){if(!e.task||!e.task.id)return void console.error("Task is not properly initialized.");e.task.subtasks||(e.task.subtasks=[]);const i=e.task.subtasks.findIndex(r=>r.id===e.subtask.id);-1!==i?e.task.subtasks[i]={...e.editedSubtask}:e.task.subtasks.push({...e.editedSubtask}),yield e.taskService.updateTask(e.task),e.dialogRef.close(e.editedSubtask)})()}cancel(){this.dialogRef.close()}selectColor(e){this.editedSubtask.tagColor=e}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(i){return new(i||n)(G(Al),G(ou),G(Zp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-subtask-detail"]],inputs:{subtask:"subtask"},standalone:!0,features:[Gi],decls:1,vars:1,consts:[["class","subtask-detail-container",4,"ngIf"],[1,"subtask-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"color-option",3,"ngStyle","click"]],template:function(i,r){1&i&&me(0,uve,62,9,"div",0),2&i&&N("ngIf",r.editedSubtask)},dependencies:[mi,Vi,Cr,Ao,Ar,iu,ru,Sr,Fa,Ir,dr],styles:[".subtask-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;text-align:center}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ddd}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0}"]})}return n})();var cD,hve=new Uint8Array(16);function fve(){if(!cD&&!(cD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cD(hve)}const pve=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Br=[],UP=0;UP<256;++UP)Br.push((UP+256).toString(16).substr(1));const yve=function _ve(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Br[n[t+0]]+Br[n[t+1]]+Br[n[t+2]]+Br[n[t+3]]+"-"+Br[n[t+4]]+Br[n[t+5]]+"-"+Br[n[t+6]]+Br[n[t+7]]+"-"+Br[n[t+8]]+Br[n[t+9]]+"-"+Br[n[t+10]]+Br[n[t+11]]+Br[n[t+12]]+Br[n[t+13]]+Br[n[t+14]]+Br[n[t+15]]).toLowerCase();if(!function gve(n){return"string"==typeof n&&pve.test(n)}(e))throw TypeError("Stringified UUID is invalid");return e},uD=function vve(n,t,e){var i=(n=n||{}).random||(n.rng||fve)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){e=e||0;for(var r=0;r<16;++r)t[e+r]=i[r];return t}return yve(i)};function bve(n,t){if(1&n){const e=We();C(0,"div",36)(1,"button",37),X("click",function(){return te(e),ne(U().openAddTaskDialog())}),x(2,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E(),C(3,"button",38),X("click",function(){return te(e),ne(U().openAddProjectDialog())}),x(4,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),E(),C(5,"button",38),X("click",function(){return te(e),ne(U().deleteSelectedTasks())}),x(6,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),E(),C(7,"button",38),X("click",function(){return te(e),ne(U().duplicateSelectedTasks())}),x(8,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u8907\u88fd"),E()()}}function wve(n,t){if(1&n){const e=We();C(0,"div",36)(1,"button",38),X("click",function(){return te(e),ne(U().duplicateSelectedTasksAsMine())}),x(2,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u81ea\u5206\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u8907\u88fd"),E()()}}function Cve(n,t){if(1&n&&(C(0,"option"),x(1),E()),2&n){const e=t.$implicit;R(1),Je(e)}}function Eve(n,t){if(1&n){const e=We();C(0,"li",54)(1,"div",55),X("click",function(){const s=te(e).$implicit,o=U().$implicit;return ne(U().openSubtaskDetailDialog(s,o))}),C(2,"input",56),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)})("click",function(r){return r.stopPropagation()}),E(),C(3,"span",57),x(4),E(),C(5,"span",58),x(6),E(),C(7,"span",59),x(8),E(),C(9,"span",60),x(10),qt(11,"date"),E(),C(12,"span",61),x(13),qt(14,"date"),E(),C(15,"span",62),x(16),E(),dn(17,"span",63),E()()}if(2&n){const e=t.$implicit,i=U(2);R(2),N("ngModel",e.selected),R(2),Je(e.title),R(2),Je(e.status),R(1),N("ngClass",e.priority),R(1),Je(i.getPriorityLabel(e.priority)),R(2),Je(Yn(11,10,e.startDateTime,"short")),R(3),Je(Yn(14,13,e.endDateTime,"short")),R(3),Je(e.tag),R(1),_s("background-color",e.tagColor)}}function Dve(n,t){if(1&n){const e=We();C(0,"li",39)(1,"div",40)(2,"input",41),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)}),E(),C(3,"a",42),X("click",function(){const s=te(e).$implicit;return ne(U().openTaskDetailDialog(s))}),C(4,"div",43),x(5),E(),C(6,"div",44)(7,"span",45),x(8),E(),C(9,"span",46),x(10),E(),C(11,"span",47),x(12),E(),C(13,"span",48),x(14),qt(15,"date"),E(),C(16,"span",49),x(17),qt(18,"date"),E(),C(19,"span",50),x(20),E(),dn(21,"span",51),E()()(),C(22,"ul",52),me(23,Eve,18,16,"li",53),E()()}if(2&n){const e=t.$implicit,i=U();R(2),N("ngModel",e.selected),R(3),Je(e.title),R(3),Je(i.getProjectName(e.projectId||"")),R(2),Je(e.status),R(1),N("ngClass",e.priority),R(1),Je(i.getPriorityLabel(e.priority)),R(2),Je(Yn(15,12,e.startDateTime,"short")),R(3),Je(Yn(18,15,e.endDateTime,"short")),R(3),Je(e.tag),R(1),_s("background-color",e.tagColor),R(2),N("ngForOf",e.subtasks)}}let _8=(()=>{class n{constructor(e,i,r){this.taskService=e,this.projectService=i,this.dialog=r,this.userId=null,this.isOtherUser=!1,this.isReadOnly=!1,this.taskDuplicated=new $e,this.tasks$=null,this.projects$=null,this.tasks=[],this.projects=[],this.tags=[],this.selectedTag="",this.selectedPriority="",this.selectedStatus="\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9",this.searchText="",this.sortOrder="startDateAsc",this.selectAll=!1}ngOnInit(){this.tasks$=this.userId?this.taskService.getTasksByUserId(this.userId):this.taskService.getTasks(),this.projects$=this.projectService.getProjects(),this.tasks$?.subscribe(e=>{e&&(this.tasks=e,this.tags=this.getTags())}),this.projects$?.subscribe(e=>{e&&(this.projects=e)})}toggleSelectAll(){this.tasks.forEach(e=>{e.selected=this.selectAll,e.subtasks.forEach(i=>i.selected=this.selectAll)})}filteredTasks(){const e=this.searchText.toLowerCase();return this.tasks.filter(i=>("\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"===this.selectedStatus||"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"===this.selectedStatus&&("\u672a\u7740\u624b"===i.status||"\u9032\u884c\u4e2d"===i.status)||this.selectedStatus===i.status)&&(i.title.toLowerCase().includes(e)||i.tag.toLowerCase().includes(e)||i.description.toLowerCase().includes(e)||i.subtasks.some(r=>r.title.toLowerCase().includes(e)||r.tag.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)))&&(""===this.selectedTag||i.tag===this.selectedTag||i.subtasks.some(r=>r.tag===this.selectedTag))&&(""===this.selectedPriority||i.priority===this.selectedPriority)).sort((i,r)=>this.compareTasks(i,r))}sortTasks(e){e&&(this.sortOrder=e),this.tasks.sort((i,r)=>this.compareTasks(i,r))}compareTasks(e,i){const r={high:1,medium:2,low:3,"":4},s=(l,c)=>{switch(c){case"startDateAsc":case"startDateDesc":return l.startDateTime?new Date(l.startDateTime).getTime():null;case"endDateAsc":case"endDateDesc":return l.endDateTime?new Date(l.endDateTime).getTime():null;default:return null}},o=s(e,this.sortOrder),a=s(i,this.sortOrder);return null!==o&&null!==a?o-a:null===o&&null===a?"priority"===this.sortOrder&&e.priority!==i.priority?r[e.priority]-r[i.priority]:0:null===o?1:-1}drop(e){l8(this.tasks,e.previousIndex,e.currentIndex),this.saveTasks()}getTags(){const e=new Set;return this.tasks.forEach(i=>{i.tag&&e.add(i.tag),i.subtasks.forEach(r=>{r.tag&&e.add(r.tag)})}),Array.from(e)}deleteSelectedTasks(){this.tasks=this.tasks.filter(e=>e.selected?(this.taskService.deleteTask(e),!1):(e.subtasks=e.subtasks.filter(i=>!i.selected),!0)),this.deselectAllTasks(),this.saveTasks()}duplicateSelectedTasks(){var e=this;return(0,pe.Z)(function*(){const r=e.tasks.filter(s=>s.selected).map(s=>{const o={...s,id:uD(),selected:!1,subtasks:s.subtasks.map(a=>({...a,id:uD(),selected:!1}))};return e.taskService.duplicateTask(o)});yield Promise.all(r),e.deselectAllTasks(),e.taskDuplicated.emit("\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u8907\u88fd\u3057\u307e\u3057\u305f")})()}duplicateSelectedTasksAsMine(){var e=this;return(0,pe.Z)(function*(){const r=e.tasks.filter(s=>s.selected).map(s=>{const o={...s,id:uD(),projectId:"",selected:!1,subtasks:s.subtasks.map(a=>({...a,id:uD(),selected:!1}))};return e.taskService.duplicateTask(o)});yield Promise.all(r),e.deselectAllTasks(),e.taskDuplicated.emit("\u81ea\u5206\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u8907\u88fd\u3057\u307e\u3057\u305f")})()}deselectAllTasks(){this.tasks.forEach(e=>e.selected=!1),this.tasks.forEach(e=>e.subtasks.forEach(i=>i.selected=!1))}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}getProjectName(e){const i=this.projects.find(r=>r.id===e);return i?i.name:""}openAddTaskDialog(){this.dialog.open(IP,{width:"400px"}).afterClosed().subscribe(i=>{i&&(this.tasks$=this.taskService.getTasks(),this.tasks$?.subscribe(r=>{r&&(this.tasks=r,this.tags=this.getTags())}))})}openAddProjectDialog(){this.dialog.open(Z$,{width:"600px"}).afterClosed().subscribe(i=>{i&&(this.projects$=this.projectService.getProjects(),this.projects$?.subscribe(r=>{r&&(this.projects=r)}))})}openTaskDetailDialog(e){this.dialog.open(Yy,{width:"600px",data:{task:e,isReadOnly:this.isOtherUser,currentUserId:this.userId}}).afterClosed().subscribe(r=>{r&&(this.tasks=this.tasks.map(s=>s.id===r.id?r:s),this.saveTasks())})}openSubtaskDetailDialog(e,i){this.dialog.open(dve,{width:"400px",data:{subtask:e,task:i,isReadOnly:this.isOtherUser}}).afterClosed().subscribe(s=>{s&&(this.tasks=this.tasks.map(o=>o.id===i.id?i:o),this.saveTasks())})}saveTasks(){console.log("Tasks saved")}static#e=this.\u0275fac=function(i){return new(i||n)(G(Al),G(oh),G(Kp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-task-list"]],inputs:{userId:"userId",isOtherUser:"isOtherUser",isReadOnly:"isReadOnly"},outputs:{taskDuplicated:"taskDuplicated"},standalone:!0,features:[Gi],decls:81,vars:10,consts:[[1,"task-list-container"],["class","task-actions",4,"ngIf"],[1,"task-filters"],[1,"filter-group"],["for","searchText"],["type","text","id","searchText","placeholder","\u30bf\u30b9\u30af\u3092\u691c\u7d22",1,"search-input",3,"ngModel","ngModelChange"],["for","sortPriority"],["id","sortPriority",1,"filter-btn",3,"click"],["for","sortDate"],["id","sortDate",1,"filter-select",3,"ngModel","ngModelChange","change"],["value","startDateAsc"],["value","startDateDesc"],["value","endDateAsc"],["value","endDateDesc"],["for","tagSelect"],["id","tagSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["for","prioritySelect"],["id","prioritySelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["for","statusSelect"],["id","statusSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-project"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],[1,"subtask-list"],["class","subtask-item",4,"ngFor","ngForOf"],[1,"subtask-item"],[1,"subtask-item-content",3,"click"],["type","checkbox",1,"subtask-checkbox",3,"ngModel","ngModelChange","click"],[1,"subtask-title"],[1,"subtask-status"],[1,"subtask-priority",3,"ngClass"],[1,"subtask-start-date"],[1,"subtask-end-date"],[1,"subtask-tag"],[1,"subtask-tag-color"]],template:function(i,r){1&i&&(C(0,"div",0),me(1,bve,9,0,"div",1),me(2,wve,3,0,"div",1),C(3,"div",2)(4,"div",3)(5,"label",4),x(6,"\u691c\u7d22:"),E(),C(7,"input",5),X("ngModelChange",function(o){return r.searchText=o}),E()(),C(8,"div",3)(9,"label",6),x(10,"\u512a\u5148\u5ea6\u3067\u30bd\u30fc\u30c8:"),E(),C(11,"button",7),X("click",function(){return r.sortTasks("priority")}),x(12,"\u512a\u5148\u5ea6"),E()(),C(13,"div",3)(14,"label",8),x(15,"\u65e5\u6642\u3067\u30bd\u30fc\u30c8:"),E(),C(16,"select",9),X("ngModelChange",function(o){return r.sortOrder=o})("change",function(){return r.sortTasks()}),C(17,"option",10),x(18,"\u958b\u59cb\u65e5\u6642\u306e\u65e9\u3044\u9806"),E(),C(19,"option",11),x(20,"\u958b\u59cb\u65e5\u6642\u306e\u9045\u3044\u9806"),E(),C(21,"option",12),x(22,"\u7d42\u4e86\u65e5\u6642\u306e\u65e9\u3044\u9806"),E(),C(23,"option",13),x(24,"\u7d42\u4e86\u65e5\u6642\u306e\u9045\u3044\u9806"),E()()(),C(25,"div",3)(26,"label",14),x(27,"\u30bf\u30b0:"),E(),C(28,"select",15),X("ngModelChange",function(o){return r.selectedTag=o}),C(29,"option",16),x(30,"\u3059\u3079\u3066\u306e\u30bf\u30b0"),E(),me(31,Cve,2,1,"option",17),E()(),C(32,"div",3)(33,"label",18),x(34,"\u512a\u5148\u5ea6:"),E(),C(35,"select",19),X("ngModelChange",function(o){return r.selectedPriority=o}),C(36,"option",16),x(37,"\u3059\u3079\u3066\u306e\u512a\u5148\u5ea6"),E(),C(38,"option",20),x(39,"\u4f4e"),E(),C(40,"option",21),x(41,"\u4e2d"),E(),C(42,"option",22),x(43,"\u9ad8"),E()()(),C(44,"div",3)(45,"label",23),x(46,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),E(),C(47,"select",24),X("ngModelChange",function(o){return r.selectedStatus=o}),C(48,"option",25),x(49,"\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"),E(),C(50,"option",26),x(51,"\u672a\u7740\u624b"),E(),C(52,"option",27),x(53,"\u9032\u884c\u4e2d"),E(),C(54,"option",28),x(55,"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"),E(),C(56,"option",29),x(57,"\u5b8c\u4e86"),E()()()(),C(58,"ul",30)(59,"li",31)(60,"div",32)(61,"input",33),X("ngModelChange",function(o){return r.selectAll=o})("change",function(){return r.toggleSelectAll()}),E(),C(62,"span",34),x(63,"\u9078\u629e"),E(),C(64,"span",34),x(65,"\u30bf\u30a4\u30c8\u30eb"),E(),C(66,"span",34),x(67,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),E(),C(68,"span",34),x(69,"\u30b9\u30c6\u30fc\u30bf\u30b9"),E(),C(70,"span",34),x(71,"\u512a\u5148\u5ea6"),E(),C(72,"span",34),x(73,"\u958b\u59cb\u65e5\u6642"),E(),C(74,"span",34),x(75,"\u7d42\u4e86\u65e5\u6642"),E(),C(76,"span",34),x(77,"\u30bf\u30b0"),E(),C(78,"span",34),x(79,"\u30bf\u30b0\u306e\u8272"),E()()(),me(80,Dve,24,18,"li",35),E()()),2&i&&(R(1),N("ngIf",!r.isOtherUser),R(1),N("ngIf",r.isOtherUser),R(5),N("ngModel",r.searchText),R(9),N("ngModel",r.sortOrder),R(12),N("ngModel",r.selectedTag),R(3),N("ngForOf",r.tags),R(4),N("ngModel",r.selectedPriority),R(12),N("ngModel",r.selectedStatus),R(14),N("ngModel",r.selectAll),R(19),N("ngForOf",r.filteredTasks()))},dependencies:[mi,wr,Vi,Cr,u_,Ar,iu,ru,Sr,Na,Fa,Ir,dr,Mc,ave],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%], .show-completed[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2% 4% 14% 10% 10% 8% 15% 15% 15% 7%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 8% 15% 15% 15% 7%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-due-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%]{font-size:.9em;color:#555}.task-tag[_ngcontent-%COMP%]{display:inline-block;padding:2px 4px;border-radius:3px;background-color:transparent}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:10px 0 0 20px}.subtask-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:5px;padding:10px;display:flex;align-items:center}.subtask-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 15% 15% 15% 15%;width:100%;align-items:center}.subtask-title[_ngcontent-%COMP%], .subtask-status[_ngcontent-%COMP%], .subtask-priority[_ngcontent-%COMP%], .subtask-start-date[_ngcontent-%COMP%], .subtask-end-date[_ngcontent-%COMP%], .subtask-tag[_ngcontent-%COMP%], .subtask-tag-color[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.subtask-title[_ngcontent-%COMP%]{padding-right:10px}.subtask-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-item-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}"]})}return n})();const Tve=function(){return["/register"]},Sve=function(){return["/reset-password"]};let Ive=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.password="",this.message=""}login(){this.authService.login(this.email,this.password).then(()=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u6210\u529f\u3057\u307e\u3057\u305f",this.router.navigate(["/"])}).catch(e=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(G(ao),G(ts))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-login"]],standalone:!0,features:[Gi],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(C(0,"div")(1,"h2"),x(2,"\u30ed\u30b0\u30a4\u30f3"),E(),C(3,"form",0),X("ngSubmit",function(){return r.login()}),C(4,"label",1),x(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),E(),C(6,"input",2),X("ngModelChange",function(o){return r.email=o}),E(),C(7,"label",3),x(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),E(),C(9,"input",4),X("ngModelChange",function(o){return r.password=o}),E(),C(10,"button",5),x(11,"\u30ed\u30b0\u30a4\u30f3"),E()(),C(12,"p"),x(13),E(),C(14,"p"),x(15,"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u5834\u5408\u306f\u3001"),C(16,"a",6),x(17,"\u3053\u3061\u3089"),E(),x(18,"\u304b\u3089\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),E(),C(19,"p")(20,"a",6),x(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),E()()()),2&i&&(R(6),N("ngModel",r.email),R(3),N("ngModel",r.password),R(4),Je(r.message),R(3),N("routerLink",Un(5,Tve)),R(4),N("routerLink",Un(6,Sve)))},dependencies:[Ar,My,Sr,Ir,Ty,Gd,dr,Wd,mi,Mc,md]})}return n})();const Ave=function(){return["/login"]},xve=function(){return["/reset-password"]};let kve=(()=>{class n{constructor(e){this.authService=e,this.email="",this.password="",this.message=""}register(){this.authService.register(this.email,this.password).then(()=>{this.message="\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="auth/email-already-in-use"===e.code?"\u3059\u3067\u306b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059":"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(G(ao))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-register"]],standalone:!0,features:[Gi],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(C(0,"div")(1,"h2"),x(2,"\u767b\u9332"),E(),C(3,"form",0),X("ngSubmit",function(){return r.register()}),C(4,"label",1),x(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),E(),C(6,"input",2),X("ngModelChange",function(o){return r.email=o}),E(),C(7,"label",3),x(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),E(),C(9,"input",4),X("ngModelChange",function(o){return r.password=o}),E(),C(10,"button",5),x(11,"\u767b\u9332"),E()(),C(12,"p"),x(13),E(),C(14,"p"),x(15,"\u65e2\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u306e\u5834\u5408\u306f\u3001"),C(16,"a",6),x(17,"\u3053\u3061\u3089"),E(),x(18,"\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),E(),C(19,"p")(20,"a",6),x(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),E()()()),2&i&&(R(6),N("ngModel",r.email),R(3),N("ngModel",r.password),R(4),Je(r.message),R(3),N("routerLink",Un(5,Ave)),R(4),N("routerLink",Un(6,xve)))},dependencies:[Ar,My,Sr,Ir,Ty,Gd,dr,Wd,mi,Mc,md]})}return n})();const Mve=function(){return["/login"]};let Pve=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.message=""}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(G(ao),G(ts))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[Gi],decls:16,vars:4,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(C(0,"div")(1,"h2"),x(2,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a"),E(),C(3,"form",0),X("ngSubmit",function(){return r.resetPassword()}),C(4,"label",1),x(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),E(),C(6,"input",2),X("ngModelChange",function(o){return r.email=o}),E(),C(7,"button",3),x(8,"\u518d\u8a2d\u5b9a\u30ea\u30f3\u30af\u3092\u9001\u4fe1"),E()(),C(9,"p"),x(10),E(),C(11,"p"),x(12,"\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u623b\u308b\u5834\u5408\u306f\u3001"),C(13,"a",4),x(14,"\u3053\u3061\u3089"),E(),x(15,"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),E()()),2&i&&(R(6),N("ngModel",r.email),R(4),Je(r.message),R(3),N("routerLink",Un(3,Mve)))},dependencies:[Ar,My,Sr,Ir,Ty,Gd,dr,Wd,mi,Mc,md]})}return n})(),Rve=(()=>{class n{constructor(e,i){this.authService=e,this.firestore=i,this.user={},this.profile={displayName:"",bio:"",email:"",company:"",position:"",team:""},this.userId="",this.message=""}ngOnInit(){this.authService.user$.subscribe(e=>{e&&(this.userId=e.uid,this.firestore.collection("users").doc(e.uid).valueChanges().subscribe(i=>{i&&"object"==typeof i?(this.user=e,this.profile={...i,displayName:e.displayName,email:e.email}):(this.user=e,this.profile={displayName:e.displayName,email:e.email,bio:"",company:"",position:"",team:""})}))})}updateProfile(){this.authService.updateProfile(this.profile.displayName,this.profile.bio,this.profile.company,this.profile.position,this.profile.team).then(()=>{this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(e=>{console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f",e),this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(G(ao),G(Pa))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-profile"]],standalone:!0,features:[Gi],decls:29,vars:8,consts:[[1,"profile-container"],[3,"ngSubmit"],["for","userId"],["type","text","name","userId","disabled","",3,"value"],["for","username"],["type","text","name","username","required","",3,"ngModel","ngModelChange"],["for","email"],["type","email","name","email","disabled","",3,"ngModel","ngModelChange"],["for","bio"],["name","bio",3,"ngModel","ngModelChange"],["for","company"],["type","text","name","company",3,"ngModel","ngModelChange"],["for","position"],["type","text","name","position",3,"ngModel","ngModelChange"],["for","team"],["type","text","name","team",3,"ngModel","ngModelChange"],["type","submit"]],template:function(i,r){1&i&&(C(0,"div",0)(1,"h2"),x(2,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),E(),C(3,"form",1),X("ngSubmit",function(){return r.updateProfile()}),C(4,"label",2),x(5,"\u30e6\u30fc\u30b6\u30fcID:"),E(),dn(6,"input",3),C(7,"label",4),x(8,"\u30e6\u30fc\u30b6\u30fc\u540d:"),E(),C(9,"input",5),X("ngModelChange",function(o){return r.profile.displayName=o}),E(),C(10,"label",6),x(11,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),E(),C(12,"input",7),X("ngModelChange",function(o){return r.profile.email=o}),E(),C(13,"label",8),x(14,"\u81ea\u5df1\u7d39\u4ecb:"),E(),C(15,"textarea",9),X("ngModelChange",function(o){return r.profile.bio=o}),E(),C(16,"label",10),x(17,"\u4f1a\u793e:"),E(),C(18,"input",11),X("ngModelChange",function(o){return r.profile.company=o}),E(),C(19,"label",12),x(20,"\u5f79\u8077:"),E(),C(21,"input",13),X("ngModelChange",function(o){return r.profile.position=o}),E(),C(22,"label",14),x(23,"\u90e8\u7f72\u307e\u305f\u306f\u30c1\u30fc\u30e0:"),E(),C(24,"input",15),X("ngModelChange",function(o){return r.profile.team=o}),E(),C(25,"button",16),x(26,"\u66f4\u65b0"),E()(),C(27,"p"),x(28),E()()),2&i&&(R(6),N("value",r.userId),R(3),N("ngModel",r.profile.displayName),R(3),N("ngModel",r.profile.email),R(3),N("ngModel",r.profile.bio),R(3),N("ngModel",r.profile.company),R(3),N("ngModel",r.profile.position),R(3),N("ngModel",r.profile.team),R(4),Je(r.message))},dependencies:[Ar,My,Sr,Ir,Ty,Gd,dr,Wd,mi,Mc],styles:[".profile-container[_ngcontent-%COMP%]{width:800px;max-width:100%;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:10px;background-color:#f9f9f9}h2[_ngcontent-%COMP%]{text-align:center;color:#333}form[_ngcontent-%COMP%]{display:block}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px;font-weight:700;color:#555}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{display:block;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#45a049}p[_ngcontent-%COMP%]{margin-top:20px;color:green;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:10px}"]})}return n})();function Ove(n,t){if(1&n){const e=We();C(0,"li"),x(1),C(2,"button",1),X("click",function(){const s=te(e).$implicit;return ne(U().selectUser(s.uid))}),x(3,"\u30bf\u30b9\u30af\u3092\u8868\u793a\u3059\u308b"),E()()}if(2&n){const e=t.$implicit;R(1),X0(" ",e.displayName," ",e.email," ")}}function Nve(n,t){if(1&n&&(C(0,"div",5),x(1),E()),2&n){const e=U();R(1),yi(" ",e.notificationMessage," ")}}function Fve(n,t){if(1&n){const e=We();C(0,"app-task-list",6),X("taskDuplicated",function(r){return te(e),ne(U().showNotificationMessage(r))}),E()}2&n&&N("userId",U().selectedUserId)("isOtherUser",!0)("isReadOnly",!0)}let Lve=(()=>{class n{constructor(e,i){this.firestore=e,this.taskService=i,this.searchTerm="",this.users=[],this.selectedUserId=null,this.notificationMessage=null,this.userSelected=new $e}searchUsers(){this.users=[],this.selectedUserId=null,this.firestore.collection("users",e=>e.where("email","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("displayName","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("uid","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})})}selectUser(e){this.selectedUserId=e}showNotificationMessage(e){this.notificationMessage=e,setTimeout(()=>{this.notificationMessage=null},3e3)}static#e=this.\u0275fac=function(i){return new(i||n)(G(Pa),G(Al))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-user-search"]],outputs:{userSelected:"userSelected"},standalone:!0,features:[Gi],decls:8,vars:4,consts:[["type","text","placeholder","\u30e6\u30fc\u30b6\u30fc\u540d\u3067\u691c\u7d22",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["class","notification",4,"ngIf"],[3,"userId","isOtherUser","isReadOnly","taskDuplicated",4,"ngIf"],[1,"notification"],[3,"userId","isOtherUser","isReadOnly","taskDuplicated"]],template:function(i,r){1&i&&(C(0,"div")(1,"input",0),X("ngModelChange",function(o){return r.searchTerm=o}),E(),C(2,"button",1),X("click",function(){return r.searchUsers()}),x(3,"\u691c\u7d22"),E(),C(4,"ul"),me(5,Ove,4,2,"li",2),E(),me(6,Nve,2,1,"div",3),me(7,Fve,1,3,"app-task-list",4),E()),2&i&&(R(1),N("ngModel",r.searchTerm),R(4),N("ngForOf",r.users),R(1),N("ngIf",r.notificationMessage),R(1),N("ngIf",r.selectedUserId))},dependencies:[Ar,Sr,Ir,dr,mi,Vi,Cr,_8],styles:[".notification[_ngcontent-%COMP%]{width:100%;background-color:#d3d3d3;color:#000;text-align:center;padding:10px;z-index:1000}"]})}return n})(),xl=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(){return this.authService.user$.pipe(Ki(1),Fe(e=>!!e||(this.router.navigate(["/login"]),!1)))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(ao),ie(ts))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ag(n){return n+.5|0}const kl=(n,t,e)=>Math.max(Math.min(n,e),t);function ev(n){return kl(ag(2.55*n),0,255)}function du(n){return kl(ag(255*n),0,255)}function Ml(n){return kl(ag(n/2.55)/100,0,1)}function y8(n){return kl(ag(100*n),0,100)}const No={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},HP=[..."0123456789ABCDEF"],Vve=n=>HP[15&n],Bve=n=>HP[(240&n)>>4]+HP[15&n],dD=n=>(240&n)>>4==(15&n);const $ve=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function v8(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Wve(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function qve(n,t,e){const i=v8(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function zP(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=function Gve(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}(e,i,r,u,s),l=60*l+.5),[0|l,c||0,a]}function $P(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(du)}function WP(n,t,e){return $P(v8,n,t,e)}function b8(n){return(n%360+360)%360}const w8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},C8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let hD;const tbe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,qP=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,lg=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function fD(n,t,e){if(n){let i=zP(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,0===t?360:1)),i=WP(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function E8(n,t){return n&&Object.assign(t||{},n)}function D8(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=du(n[3]))):(t=E8(n,{r:0,g:0,b:0,a:1})).a=du(t.a),t}function sbe(n){return"r"===n.charAt(0)?function nbe(n){const t=tbe.exec(n);let i,r,s,e=255;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?ev(o):kl(255*o,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?ev(i):kl(i,0,255)),r=255&(t[4]?ev(r):kl(r,0,255)),s=255&(t[6]?ev(s):kl(s,0,255)),{r:i,g:r,b:s,a:e}}}(n):function Yve(n){const t=$ve.exec(n);let i,e=255;if(!t)return;t[5]!==i&&(e=t[6]?ev(+t[5]):du(+t[5]));const r=b8(+t[2]),s=+t[3]/100,o=+t[4]/100;return i="hwb"===t[1]?function Zve(n,t,e){return $P(qve,n,t,e)}(r,s,o):"hsv"===t[1]?function Kve(n,t,e){return $P(Wve,n,t,e)}(r,s,o):WP(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}(n)}class cg{constructor(t){if(t instanceof cg)return t;const e=typeof t;let i;"object"===e?i=D8(t):"string"===e&&(i=function Uve(n){var e,t=n.length;return"#"===n[0]&&(4===t||5===t?e={r:255&17*No[n[1]],g:255&17*No[n[2]],b:255&17*No[n[3]],a:5===t?17*No[n[4]]:255}:(7===t||9===t)&&(e={r:No[n[1]]<<4|No[n[2]],g:No[n[3]]<<4|No[n[4]],b:No[n[5]]<<4|No[n[6]],a:9===t?No[n[7]]<<4|No[n[8]]:255})),e}(t)||function ebe(n){hD||(hD=function Jve(){const n={},t=Object.keys(C8),e=Object.keys(w8);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,w8[s]);s=parseInt(C8[o],16),n[a]=[s>>16&255,s>>8&255,255&s]}return n}(),hD.transparent=[0,0,0,0]);const t=hD[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||sbe(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=E8(this._rgb);return t&&(t.a=Ml(t.a)),t}set rgb(t){this._rgb=D8(t)}rgbString(){return this._valid?function ibe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ml(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function zve(n){var t=(n=>dD(n.r)&&dD(n.g)&&dD(n.b)&&dD(n.a))(n)?Vve:Bve;return n?"#"+t(n.r)+t(n.g)+t(n.b)+((n,t)=>n<255?t(n):"")(n.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function Xve(n){if(!n)return;const t=zP(n),e=t[0],i=y8(t[1]),r=y8(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Ml(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function rbe(n,t,e){const i=lg(Ml(n.r)),r=lg(Ml(n.g)),s=lg(Ml(n.b));return{r:du(qP(i+e*(lg(Ml(t.r))-i))),g:du(qP(r+e*(lg(Ml(t.g))-r))),b:du(qP(s+e*(lg(Ml(t.b))-s))),a:n.a+e*(t.a-n.a)}}(this._rgb,t._rgb,e)),this}clone(){return new cg(this.rgb)}alpha(t){return this._rgb.a=du(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=ag(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return fD(this._rgb,2,t),this}darken(t){return fD(this._rgb,2,-t),this}saturate(t){return fD(this._rgb,1,t),this}desaturate(t){return fD(this._rgb,1,-t),this}rotate(t){return function Qve(n,t){var e=zP(n);e[0]=b8(e[0]+t),e=WP(e),n.r=e[0],n.g=e[1],n.b=e[2]}(this._rgb,t),this}}function Pl(){}const obe=(()=>{let n=0;return()=>n++})();function on(n){return null===n||typeof n>"u"}function ei(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Kt(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function wi(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function uo(n,t){return wi(n)?n:t}function At(n,t){return typeof n>"u"?t:n}const T8=(n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*t:+n;function $n(n,t,e){if(n&&"function"==typeof n.call)return n.apply(e,t)}function Dn(n,t,e,i){let r,s,o;if(ei(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Kt(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function pD(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function gD(n){if(ei(n))return n.map(gD);if(Kt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=gD(n[e[r]]);return t}return n}function S8(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function lbe(n,t,e,i){if(!S8(n))return;const r=t[n],s=e[n];Kt(r)&&Kt(s)?tv(r,s,i):t[n]=gD(s)}function tv(n,t,e){const i=ei(t)?t:[t],r=i.length;if(!Kt(n))return n;const s=(e=e||{}).merger||lbe;let o;for(let a=0;a<r;++a){if(o=i[a],!Kt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function nv(n,t){return tv(n,t,{merger:cbe})}function cbe(n,t,e){if(!S8(n))return;const i=t[n],r=e[n];Kt(i)&&Kt(r)?nv(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=gD(r))}const I8={"":n=>n,x:n=>n.x,y:n=>n.y};function hu(n,t){return(I8[t]||(I8[t]=function dbe(n){const t=function ube(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}(n);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t)))(n)}function GP(n){return n.charAt(0).toUpperCase()+n.slice(1)}const iv=n=>typeof n<"u",fu=n=>"function"==typeof n,A8=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0},ti=Math.PI,ni=2*ti,fbe=ni+ti,mD=Number.POSITIVE_INFINITY,pbe=ti/180,Ui=ti/2,ah=ti/4,x8=2*ti/3,pu=Math.log10,ja=Math.sign;function rv(n,t,e){return Math.abs(n-t)<e}function k8(n){const t=Math.round(n);n=rv(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(pu(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function ug(n){return!isNaN(parseFloat(n))&&isFinite(n)}function M8(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function na(n){return n*(ti/180)}function ZP(n){return n*(180/ti)}function P8(n){if(!wi(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function R8(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*ti&&(s+=ni),{angle:s,distance:r}}function KP(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function _be(n,t){return(n-t+fbe)%ni-ti}function ho(n){return(n%ni+ni)%ni}function sv(n,t,e,i){const r=ho(n),s=ho(t),o=ho(e),a=ho(s-r),l=ho(o-r),c=ho(r-s),u=ho(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function xr(n,t,e){return Math.max(t,Math.min(e,n))}function Rl(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function YP(n,t,e){e=e||(o=>n[o]<t);let s,i=n.length-1,r=0;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const Ol=(n,t,e,i)=>YP(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),vbe=(n,t,e)=>YP(n,e,i=>n[i][t]>=e),O8=["push","pop","shift","splice","unshift"];function N8(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),!(i.length>0)&&(O8.forEach(s=>{delete n[s]}),delete n._chartjs)}function F8(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const L8=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function V8(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,L8.call(window,()=>{i=!1,n.apply(t,e)}))}}const QP=n=>"start"===n?"left":"end"===n?"right":"center",as=(n,t,e)=>"start"===n?t:"end"===n?e:(t+e)/2;function B8(n,t,e){const i=t.length;let r=0,s=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:f,maxDefined:m}=o.getUserBounds();f&&(r=xr(Math.min(Ol(a,l,c).lo,e?i:Ol(t,l,o.getPixelForValue(c)).lo),0,i-1)),s=m?xr(Math.max(Ol(a,o.axis,u,!0).hi+1,e?0:Ol(t,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function j8(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}const _D=n=>0===n||1===n,U8=(n,t,e)=>-Math.pow(2,10*(n-=1))*Math.sin((n-t)*ni/e),H8=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ni/e)+1,ov={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*Ui),easeOutSine:n=>Math.sin(n*Ui),easeInOutSine:n=>-.5*(Math.cos(ti*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>_D(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>_D(n)?n:U8(n,.075,.3),easeOutElastic:n=>_D(n)?n:H8(n,.075,.3),easeInOutElastic:n=>_D(n)?n:n<.5?.5*U8(2*n,.1125,.45):.5+.5*H8(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let t=1.70158;return(n/=.5)<1?n*n*((1+(t*=1.525))*n-t)*.5:.5*((n-=2)*n*((1+(t*=1.525))*n+t)+2)},easeInBounce:n=>1-ov.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*ov.easeInBounce(2*n):.5*ov.easeOutBounce(2*n-1)+.5};function XP(n){if(n&&"object"==typeof n){const t=n.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function z8(n){return XP(n)?n:new cg(n)}function JP(n){return XP(n)?n:new cg(n).saturate(.5).darken(.1).hexString()}const Dbe=["x","y","borderWidth","radius","tension"],Tbe=["color","borderColor","backgroundColor"],$8=new Map;function av(n,t,e){return function Abe(n,t){t=t||{};const e=n+JSON.stringify(t);let i=$8.get(e);return i||(i=new Intl.NumberFormat(n,t),$8.set(e,i)),i}(t,e).format(n)}const W8={values:n=>ei(n)?n:""+n,numeric(n,t,e){if(0===n)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=function xbe(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}(n,e)}const o=pu(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),av(n,i,l)},logarithmic(n,t,e){if(0===n)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(pu(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?W8.numeric.call(this,n,t,e):""}};var yD={formatters:W8};const lh=Object.create(null),eR=Object.create(null);function lv(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function tR(n,t,e){return"string"==typeof t?tv(lv(n,t),e):tv(lv(n,""),t)}class Mbe{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>JP(r.backgroundColor),this.hoverBorderColor=(i,r)=>JP(r.borderColor),this.hoverColor=(i,r)=>JP(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return tR(this,t,e)}get(t){return lv(this,t)}describe(t,e){return tR(eR,t,e)}override(t,e){return tR(lh,t,e)}route(t,e,i,r){const s=lv(this,t),o=lv(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[r];return Kt(l)?Object.assign({},c,l):At(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var Ci=new Mbe({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function Sbe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),n.set("animations",{colors:{type:"color",properties:Tbe},numbers:{type:"number",properties:Dbe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function Ibe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function kbe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:yD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function vD(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function Rbe(n,t,e,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,u,f,m;for(l=0;l<a;l++)if(f=e[l],null==f||ei(f)){if(ei(f))for(c=0,u=f.length;c<u;c++)m=f[c],null!=m&&!ei(m)&&(o=vD(n,r,s,o,m))}else o=vD(n,r,s,o,f);n.restore();const y=s.length/2;if(y>e.length){for(l=0;l<y;l++)delete r[s[l]];s.splice(0,y)}return o}function ch(n,t,e){const i=n.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function q8(n,t){!t&&!n||((t=t||n.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function nR(n,t,e,i){G8(n,t,e,i,null)}function G8(n,t,e,i,r){let s,o,a,l,c,u,f,m;const y=t.pointStyle,v=t.rotation,w=t.radius;let D=(v||0)*pbe;if(y&&"object"==typeof y&&(s=y.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(e,i),n.rotate(D),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),void n.restore();if(!(isNaN(w)||w<=0)){switch(n.beginPath(),y){default:r?n.ellipse(e,i,r/2,w,0,0,ni):n.arc(e,i,w,0,ni),n.closePath();break;case"triangle":u=r?r/2:w,n.moveTo(e+Math.sin(D)*u,i-Math.cos(D)*w),D+=x8,n.lineTo(e+Math.sin(D)*u,i-Math.cos(D)*w),D+=x8,n.lineTo(e+Math.sin(D)*u,i-Math.cos(D)*w),n.closePath();break;case"rectRounded":c=.516*w,l=w-c,o=Math.cos(D+ah)*l,f=Math.cos(D+ah)*(r?r/2-c:l),a=Math.sin(D+ah)*l,m=Math.sin(D+ah)*(r?r/2-c:l),n.arc(e-f,i-a,c,D-ti,D-Ui),n.arc(e+m,i-o,c,D-Ui,D),n.arc(e+f,i+a,c,D,D+Ui),n.arc(e-m,i+o,c,D+Ui,D+ti),n.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}D+=ah;case"rectRot":f=Math.cos(D)*(r?r/2:w),o=Math.cos(D)*w,a=Math.sin(D)*w,m=Math.sin(D)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+m,i-o),n.lineTo(e+f,i+a),n.lineTo(e-m,i+o),n.closePath();break;case"crossRot":D+=ah;case"cross":f=Math.cos(D)*(r?r/2:w),o=Math.cos(D)*w,a=Math.sin(D)*w,m=Math.sin(D)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"star":f=Math.cos(D)*(r?r/2:w),o=Math.cos(D)*w,a=Math.sin(D)*w,m=Math.sin(D)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o),D+=ah,f=Math.cos(D)*(r?r/2:w),o=Math.cos(D)*w,a=Math.sin(D)*w,m=Math.sin(D)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"line":o=r?r/2:Math.cos(D)*w,a=Math.sin(D)*w,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(D)*(r?r/2:w),i+Math.sin(D)*w);break;case!1:n.closePath()}n.fill(),t.borderWidth>0&&n.stroke()}}function Nl(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function bD(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function wD(n){n.restore()}function Obe(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else"after"===r!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Nbe(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Lbe(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(e-s.actualBoundingBoxAscent+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Vbe(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function uh(n,t,e,i,r,s={}){const o=ei(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(n.save(),n.font=r.string,function Fbe(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),on(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Vbe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),on(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),Lbe(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function cv(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*ti,ti,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ti,Ui,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ui,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Ui,!0),n.lineTo(e+o.topLeft,i)}const Bbe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,jbe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ube(n,t){const e=(""+n).match(Bbe);if(!e||"normal"===e[1])return 1.2*t;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100}return t*n}const Hbe=n=>+n||0;function iR(n,t){const e={},i=Kt(t),r=i?Object.keys(t):t,s=Kt(n)?i?o=>At(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=Hbe(s(o));return e}function Z8(n){return iR(n,{top:"y",right:"x",bottom:"y",left:"x"})}function dh(n){return iR(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ls(n){const t=Z8(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function fr(n,t){let e=At((n=n||{}).size,(t=t||Ci.font).size);"string"==typeof e&&(e=parseInt(e,10));let i=At(n.style,t.style);i&&!(""+i).match(jbe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:At(n.family,t.family),lineHeight:Ube(At(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:At(n.weight,t.weight),string:""};return r.string=function Pbe(n){return!n||on(n.size)||on(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(r),r}function uv(n,t,e,i){let s,o,a,r=!0;for(s=0,o=n.length;s<o;++s)if(a=n[s],void 0!==a&&(void 0!==t&&"function"==typeof a&&(a=a(t),r=!1),void 0!==e&&ei(a)&&(a=a[e%a.length],r=!1),void 0!==a))return i&&!r&&(i.cacheable=!1),a}function gu(n,t){return Object.assign(Object.create(n),t)}function rR(n,t=[""],e,i,r=(()=>n[0])){const s=e||n;typeof i>"u"&&(i=J8("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>rR([a,...n],t,s,i)};return new Proxy(o,{deleteProperty:(a,l)=>(delete a[l],delete a._keys,delete n[0][l],!0),get:(a,l)=>Y8(a,l,()=>function Qbe(n,t,e,i){let r;for(const s of t)if(r=J8($be(s,n),e),typeof r<"u")return sR(n,r)?oR(e,i,n,r):r}(l,t,n,a)),getOwnPropertyDescriptor:(a,l)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(a,l)=>e9(a).includes(l),ownKeys:a=>e9(a),set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function dg(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:K8(n,i),setContext:s=>dg(n,s,e,i),override:s=>dg(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,a)=>Y8(s,o,()=>function Wbe(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return fu(a)&&o.isScriptable(t)&&(a=function qbe(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),sR(n,l)&&(l=oR(r._scopes,r,n,l)),l}(t,a,n,e)),ei(a)&&a.length&&(a=function Gbe(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(Kt(t[0])){const l=t,c=r._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=oR(c,r,n,u);t.push(dg(f,s,o&&o[n],a))}}return t}(t,a,n,o.isIndexable)),sR(t,a)&&(a=dg(a,r,s&&s[t],o)),a}(s,o,a)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,a)=>(n[o]=a,delete s[o],!0)})}function K8(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:fu(e)?e:()=>e,isIndexable:fu(i)?i:()=>i}}const $be=(n,t)=>n?n+GP(t):t,sR=(n,t)=>Kt(t)&&"adapters"!==n&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Y8(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||"constructor"===t)return n[t];const i=e();return n[t]=i,i}function Q8(n,t,e){return fu(n)?n(t,e):n}const Zbe=(n,t)=>!0===n?t:"string"==typeof n?hu(t,n):void 0;function Kbe(n,t,e,i,r){for(const s of t){const o=Zbe(e,s);if(o){n.add(o);const a=Q8(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(!1===o&&typeof i<"u"&&e!==i)return null}return!1}function oR(n,t,e,i){const r=t._rootScopes,s=Q8(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=X8(a,o,e,s||e,i);return!(null===l||typeof s<"u"&&s!==e&&(l=X8(a,o,s,l,i),null===l))&&rR(Array.from(a),[""],r,s,()=>function Ybe(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return ei(r)&&Kt(e)?e:r||{}}(t,e,i))}function X8(n,t,e,i,r){for(;e;)e=Kbe(n,t,e,i,r);return e}function J8(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function e9(n){let t=n._keys;return t||(t=n._keys=function Xbe(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}(n._scopes)),t}function t9(n,t,e,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+e,u=t[c],o[a]={r:r.parse(hu(u,s),c)};return o}const Jbe=Number.EPSILON||1e-14,hg=(n,t)=>t<n.length&&!n[t].skip&&n[t],n9=n=>"x"===n?"y":"x";function e0e(n,t,e,i){const r=n.skip?t:n,s=t,o=e.skip?t:e,a=KP(s,r),l=KP(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=i*c,m=i*u;return{previous:{x:s.x-f*(o.x-r.x),y:s.y-f*(o.y-r.y)},next:{x:s.x+m*(o.x-r.x),y:s.y+m*(o.y-r.y)}}}function CD(n,t,e){return Math.max(Math.min(n,e),t)}function s0e(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),"monotone"===t.cubicInterpolationMode)!function i0e(n,t="x"){const e=n9(t),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=hg(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=hg(n,o+1),l){if(c){const u=c[t]-l[t];r[o]=0!==u?(c[e]-l[e])/u:0}s[o]=a?c?ja(r[o-1])!==ja(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function t0e(n,t,e){const i=n.length;let r,s,o,a,l,c=hg(n,0);for(let u=0;u<i-1;++u)if(l=c,c=hg(n,u+1),l&&c){if(rv(t[u],0,Jbe)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=r*o*t[u],e[u+1]=s*o*t[u])}})(n,r,s),function n0e(n,t,e="x"){const i=n9(e),r=n.length;let s,o,a,l=hg(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=hg(n,c+1),!a)continue;const u=a[e],f=a[i];o&&(s=(u-o[e])/3,a[`cp1${e}`]=u-s,a[`cp1${i}`]=f-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${i}`]=f+s*t[c])}}(n,s,t)}(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=e0e(c,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&function r0e(n,t){let e,i,r,s,o,a=Nl(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&Nl(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=CD(r.cp1x,t.left,t.right),r.cp1y=CD(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=CD(r.cp2x,t.left,t.right),r.cp2y=CD(r.cp2y,t.top,t.bottom)))}(n,e)}function aR(){return typeof window<"u"&&typeof document<"u"}function lR(n){let t=n.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function ED(n,t,e){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*t.parentNode[e])):i=n,i}const DD=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),a0e=["top","right","bottom","left"];function hh(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=a0e[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const l0e=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function fh(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=DD(e),s="border-box"===r.boxSizing,o=hh(r,"padding"),a=hh(r,"border","width"),{x:l,y:c,box:u}=function c0e(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let a,l,o=!1;if(l0e(r,s,n.target))a=r,l=s;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}(n,e),f=o.left+(u&&a.left),m=o.top+(u&&a.top);let{width:y,height:v}=t;return s&&(y-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/y*e.width/i),y:Math.round((c-m)/v*e.height/i)}}const TD=n=>Math.round(10*n)/10;function i9(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0)}const h0e=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};aR()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function r9(n,t){const e=function o0e(n,t){return DD(n).getPropertyValue(t)}(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ph(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function f0e(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:"middle"===i?e<.5?n.y:t.y:"after"===i?e<1?n.y:t.y:e>0?t.y:n.y}}function p0e(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=ph(n,r,e),a=ph(r,s,e),l=ph(s,t,e),c=ph(o,a,e),u=ph(a,l,e);return ph(c,u,e)}function fg(n,t,e){return n?function(n,t){return{x:e=>n+n+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,i)=>e-i,leftForLtr:(e,i)=>e-i}}(t,e):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,t)=>n+t,leftForLtr:(n,t)=>n}}function s9(n,t){let e,i;("ltr"===t||"rtl"===t)&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function o9(n,t){void 0!==t&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function a9(n){return"angle"===n?{between:sv,compare:_be,normalize:ho}:{between:Rl,compare:(t,e)=>t-e,normalize:t=>t}}function l9({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e==0,style:r}}function c9(n,t,e){if(!e)return[n];const{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=a9(i),{start:u,end:f,loop:m,style:y}=function _0e(n,t,e){const{property:i,start:r,end:s}=e,{between:o,normalize:a}=a9(i),l=t.length;let m,y,{start:c,end:u,loop:f}=n;if(f){for(c+=l,u+=l,m=0,y=l;m<y&&o(a(t[c%l][i]),r,s);++m)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:n.style}}(n,t,e),v=[];let P,I,O,w=!1,D=null;for(let M=u,F=u;M<=f;++M)I=t[M%o],!I.skip&&(P=c(I[i]),P!==O&&(w=l(P,r,s),null===D&&(w||l(r,O,P)&&0!==a(r,O))&&(D=0===a(P,r)?M:F),null!==D&&(!w||0===a(s,P)||l(s,O,P))&&(v.push(l9({start:D,end:M,loop:m,count:o,style:y})),D=null),F=M,O=P));return null!==D&&v.push(l9({start:D,end:f,loop:m,count:o,style:y})),v}function u9(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const s=c9(i[r],n.points,t);s.length&&e.push(...s)}return e}function h9(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function C0e(n,t){if(!t)return!1;const e=[],i=function(r,s){return XP(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}class E0e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.duration;e.listeners[r].forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=L8.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let l,o=s.length-1,a=!1;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Fl=new E0e;const f9="transparent",D0e={boolean:(n,t,e)=>e>.5?t:n,color(n,t,e){const i=z8(n||f9),r=i.valid&&z8(t||f9);return r&&r.valid?r.mix(i,e).hexString():t},number:(n,t,e)=>n+(t-n)*e};class T0e{constructor(t,e,i,r){const s=e[i];r=uv([t.to,r,s,t.from]);const o=uv([t.from,s,r]);this._active=!0,this._fn=t.fn||D0e[t.type||typeof o],this._easing=ov[t.easing]||ov.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=uv([t.to,e,r,t.from]),this._from=uv([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||e<i),!this._active)return this._target[r]=a,void this._notify(!0);e<0?this._target[r]=s:(l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class p9{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Kt(t))return;const e=Object.keys(Ci.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Kt(s))return;const o={};for(const a of e)o[a]=s[a];(ei(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=function I0e(n,t){if(!t)return;let e=n.options;if(e)return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;n.options=t}(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&function S0e(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(t,e));continue}const u=e[c];let f=s[c];const m=i.get(c);if(f){if(m&&f.active()){f.update(m,u,a);continue}f.cancel()}m&&m.duration?(s[c]=f=new T0e(m,t,c,u),r.push(f)):t[c]=u}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(Fl.add(this._chart,i),!0):void 0}}function g9(n,t){const e=n&&n.options||{},i=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:i?s:r,end:i?r:s}}function m9(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function _9(n,t,e,i={}){const r=n.keys,s="single"===i.mode;let o,a,l,c;if(null!==t){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(i.all)continue;break}c=n.values[l],wi(c)&&(s||0===t||ja(t)===ja(c))&&(t+=c)}return t}}function y9(n,t){const e=n&&n.options.stacked;return e||void 0===e&&void 0!==t.stack}function R0e(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function v9(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function b9(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function M0e(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}(s,o,i),f=t.length;let m;for(let y=0;y<f;++y){const v=t[y],{[l]:w,[c]:D}=v;m=(v._stacks||(v._stacks={}))[c]=R0e(r,u,w),m[a]=D,m._top=v9(m,o,!0,i.type),m._bottom=v9(m,o,!1,i.type),(m._visualValues||(m._visualValues={}))[a]=D}}function cR(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function dv(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[i]||void 0===s[i][e])return;delete s[i][e],void 0!==s[i]._visualValues&&void 0!==s[i]._visualValues[e]&&delete s[i]._visualValues[e]}}}const uR=n=>"reset"===n||"none"===n,w9=(n,t)=>t?n:Object.assign({},n);let mu=(()=>class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=y9(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&dv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(m,y,v,w)=>"x"===m?y:"r"===m?w:v,o=i.xAxisID=At(r.xAxisID,cR(e,"x")),a=i.yAxisID=At(r.yAxisID,cR(e,"y")),l=i.rAxisID=At(r.rAxisID,cR(e,"r")),c=i.indexAxis,u=i.iAxisID=s(c,o,a,l),f=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&N8(this._data,this),e._stacked&&dv(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(Kt(i))this._data=function k0e(n,t){const{iScale:e,vScale:i}=t,r="x"===e.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}(i,this._cachedMeta);else if(r!==i){if(r){N8(r,this);const s=this._cachedMeta;dv(s),s._parsed=[]}i&&Object.isExtensible(i)&&function wbe(n,t){n._chartjs?n._chartjs.listeners.push(t):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),O8.forEach(e=>{const i="_onData"+GP(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...s)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=y9(i.vScale,i),i.stack!==r.stack&&(s=!0,dv(i),i.stack=r.stack),this._resyncElements(e),(s||o!==i._stacked)&&b9(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis;let f,m,y,c=0===e&&i===s.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,y=s;else{y=ei(s[e])?this.parseArrayData(r,s,e,i):Kt(s[e])?this.parseObjectData(r,s,e,i):this.parsePrimitiveData(r,s,e,i);const v=()=>null===m[l]||u&&m[l]<u[l];for(f=0;f<i;++f)r._parsed[f+e]=m=y[f],c&&(v()&&(c=!1),u=m);r._sorted=c}a&&b9(this,y)}parsePrimitiveData(e,i,r,s){const{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),f=o===a,m=new Array(s);let y,v,w;for(y=0,v=s;y<v;++y)w=y+r,m[y]={[l]:f||o.parse(u[w],w),[c]:a.parse(i[w],w)};return m}parseArrayData(e,i,r,s){const{xScale:o,yScale:a}=e,l=new Array(s);let c,u,f,m;for(c=0,u=s;c<u;++c)f=c+r,m=i[f],l[c]={x:o.parse(m[0],f),y:a.parse(m[1],f)};return l}parseObjectData(e,i,r,s){const{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let f,m,y,v;for(f=0,m=s;f<m;++f)y=f+r,v=i[y],u[f]={x:o.parse(hu(v,l),y),y:a.parse(hu(v,c),y)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){const o=this._cachedMeta,a=i[e.axis];return _9({keys:m9(this.chart,!0),values:i._stacks[e.axis]._visualValues},a,o.index,{mode:r})}updateRangeFromParsed(e,i,r,s){const o=r[i.axis];let a=null===o?NaN:o;const l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=_9(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,a=s.length,l=this._getOtherScale(e),c=((n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:m9(this.chart,!0),values:null})(i,r),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=function P0e(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(l);let y,v;function w(){v=s[y];const D=v[l.axis];return!wi(v[e.axis])||f>D||m<D}for(y=0;y<a&&(w()||(this.updateRangeFromParsed(u,e,v,c),!o));++y);if(o)for(y=a-1;y>=0;--y)if(!w()){this.updateRangeFromParsed(u,e,v,c);break}return u}getAllParsedValues(e){const i=this._cachedMeta._parsed,r=[];let s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][e.axis],wi(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=function x0e(n){let t,e,i,r;return Kt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:!1===n}}(At(this.options.clip,function A0e(n,t,e){if(!1===e)return!1;const i=g9(n,e),r=g9(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,o,l,c),f=l;f<l+c;++f){const m=s[f];m.hidden||(m.active&&u?a.push(m):m.draw(e,o))}for(f=0;f<a.length;++f)a[f].draw(e,o)}getStyle(e,i){const r=i?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];o=a.$context||(a.$context=function N0e(n,t,e){return gu(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function O0e(n,t){return gu(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){const s="active"===i,o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&iv(r);if(l)return w9(l,c);const u=this.chart.config,f=u.datasetElementScopeKeys(this._type,e),m=s?[`${e}Hover`,"hover",e,""]:[e,""],y=u.getOptionScopes(this.getDataset(),f),v=Object.keys(Ci.elements[e]),D=u.resolveNamedOptions(y,v,()=>this.getContext(r,s,i),m);return D.$shared&&(D.$shared=c,o[a]=Object.freeze(w9(D,c))),D}_resolveAnimations(e,i,r){const s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==s.options.animation){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,i),y=f.getOptionScopes(this.getDataset(),m);c=f.createResolver(y,this.getContext(e,r,i))}const u=new p9(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||uR(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(e,i,r,s){uR(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!uR(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,r=!0){const s=this._cachedMeta,o=s.data,a=e+i;let l;const c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,i),r&&this.updateElements(o,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,i);r._stacked&&dv(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}})();function V0e(n){const t=n.iScale,e=function L0e(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=F8(i.sort((r,s)=>r-s))}return n._cache.$bar}(t,n.type);let r,s,o,a,i=t._length;const l=()=>{32767===o||-32768===o||(iv(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function C9(n,t,e,i){return ei(n)?function U0e(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(n,t,e,i):t[e.axis]=e.parse(n,i),t}function E9(n,t,e,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,f,m;for(c=e,u=e+i;c<u;++c)m=t[c],f={},f[r.axis]=a||r.parse(o[c],c),l.push(C9(m,f,s,c));return l}function dR(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function $0e(n,t,e,i){let r=t.borderSkipped;const s={};if(!r)return void(n.borderSkipped=s);if(!0===r)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function z0e(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}(n);"middle"===r&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[D9(u,o,a,l)]=!0,r=c)),s[D9(r,o,a,l)]=!0,n.borderSkipped=s}function D9(n,t,e,i){return i?(n=function W0e(n,t,e){return n===t?e:n===e?t:n}(n,t,e),n=T9(n,e,t)):n=T9(n,t,e),n}function T9(n,t,e){return"start"===n?t:"end"===n?e:n}function q0e(n,{inflateAmount:t},e){n.inflateAmount="auto"===t?1===e?.33:0:t}let G0e=(()=>class n extends mu{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,s){return E9(e,i,r,s)}parseArrayData(e,i,r,s){return E9(e,i,r,s)}parseObjectData(e,i,r,s){const{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u="x"===o.axis?l:c,f="x"===a.axis?l:c,m=[];let y,v,w,D;for(y=r,v=r+s;y<v;++y)D=i[y],w={},w[o.axis]=o.parse(hu(D,u),y),m.push(C9(hu(D,f),w,a,y));return m}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);const o=r._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(e),a=o._custom,l=dR(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){const o="reset"===s,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),f=this._getRuler(),{sharedOptions:m,includeOptions:y}=this._getSharedOptions(i,s);for(let v=i;v<i+r;v++){const w=this.getParsed(v),D=o||on(w[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(v),P=this._calculateBarIndexPixels(v,f),I=(w._stacks||{})[l.axis],O={horizontal:u,base:D.base,enableBorderRadius:!I||dR(w._custom)||a===I._top||a===I._bottom,x:u?D.head:P.center,y:u?P.center:D.head,height:u?P.size:Math.abs(D.size),width:u?Math.abs(D.size):P.size};y&&(O.options=m||this.resolveDataElementOptions(v,e[v].active?"active":s));const W=O.options||e[v].options;$0e(O,W,I,a),q0e(O,W,f.ratio),this.updateElement(e[v],v,O,s)}}_getStacks(e,i){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=r.options.stacked,a=[],l=c=>{const u=c.controller.getParsed(i),f=u&&u[c.vScale.axis];if(on(f)||isNaN(f))return!0};for(const c of s)if((void 0===i||!l(c))&&((!1===o||-1===a.indexOf(c.stack)||void 0===o&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,r){const s=this._getStacks(e,r),o=void 0!==i?s.indexOf(i):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,r=i.iScale,s=[];let o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const l=e.barThickness;return{min:l||V0e(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),u=c._custom,f=dR(u);let w,D,m=c[i.axis],y=0,v=r?this.applyStack(i,c,r):m;v!==m&&(y=v-m,v=m),f&&(m=u.barStart,v=u.barEnd-u.barStart,0!==m&&ja(m)!==ja(u.barEnd)&&(y=0),y+=m);const P=on(o)||f?y:o;let I=i.getPixelForValue(P);if(w=this.chart.getDataVisibility(e)?i.getPixelForValue(y+v):I,D=w-I,Math.abs(D)<a){D=function H0e(n,t,e){return 0!==n?ja(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(D,i,l)*a,m===l&&(I-=D/2);const O=i.getPixelForDecimal(0),W=i.getPixelForDecimal(1),K=Math.min(O,W),re=Math.max(O,W);I=Math.max(Math.min(I,re),K),w=I+D,r&&!f&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(w)-i.getValueForPixel(I))}if(I===i.getPixelForValue(l)){const O=ja(D)*i.getLineWidthForValue(l)/2;I+=O,D-=O}return{size:D,base:I,head:w,center:w+D/2}}_calculateBarIndexPixels(e,i){const r=i.scale,s=this.options,o=s.skipNull,a=At(s.maxBarThickness,1/0);let l,c;if(i.grouped){const u=o?this._getStackCount(e):i.stackCount,f="flex"===s.barThickness?function j0e(n,t,e,i){const r=t.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}(e,i,s,u):function B0e(n,t,e,i){const r=e.barThickness;let s,o;return on(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}(e,i,s,u),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=f.start+f.chunk*m+f.chunk/2,c=Math.min(a,f.chunk*f.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[i.axis]&&!r[o].hidden&&r[o].draw(this._ctx)}})(),Z0e=(()=>class n extends mu{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){const o=super.parsePrimitiveData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(e,i,r,s){const o=super.parseArrayData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=At(i[r+a][2],this.resolveDataElementOptions(a+r).radius);return o}parseObjectData(e,i,r,s){const o=super.parseObjectData(e,i,r,s);for(let a=0;a<o.length;a++){const l=i[r+a];o[a]._custom=At(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:r[e]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),f=a.axis,m=l.axis;for(let y=i;y<i+r;y++){const v=e[y],w=!o&&this.getParsed(y),D={},P=D[f]=o?a.getPixelForDecimal(.5):a.getPixelForValue(w[f]),I=D[m]=o?l.getBasePixel():l.getPixelForValue(w[m]);D.skip=isNaN(P)||isNaN(I),u&&(D.options=c||this.resolveDataElementOptions(y,v.active?"active":s),o&&(D.options.radius=0)),this.updateElement(v,y,D,s)}}resolveDataElementOptions(e,i){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==i&&(s.radius=0),s.radius+=At(r&&r._custom,o),s}})(),hR=(()=>class n extends mu{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let a,l,o=c=>+r[c];if(Kt(r[e])){const{key:c="value"}=this._parsing;o=u=>+hu(r[u],c)}for(a=e,l=e+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return na(this.options.rotation-90)}_getCircumference(){return na(this.options.circumference)}_getRotationExtents(){let e=ni,i=-ni;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(((n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/t)(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:y,ratioY:v,offsetX:w,offsetY:D}=function K0e(n,t,e){let i=1,r=1,s=0,o=0;if(t<ni){const a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),m=Math.sin(l),y=(O,W,K)=>sv(O,a,l,!0)?1:Math.max(W,W*e,K,K*e),v=(O,W,K)=>sv(O,a,l,!0)?-1:Math.min(W,W*e,K,K*e),w=y(0,c,f),D=y(Ui,u,m),P=v(ti,c,f),I=v(ti+Ui,u,m);i=(w-P)/2,r=(D-I)/2,s=-(w+P)/2,o=-(D+I)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(m,f,c),O=Math.max(Math.min((r.width-a)/y,(r.height-a)/v)/2,0),W=T8(this.options.radius,O),re=(W-Math.max(W*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=w*W,this.offsetY=D*W,s.total=this.calculateTotal(),this.outerRadius=W-re*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-re*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/ni)}updateElements(e,i,r,s){const o="reset"===s,a=this.chart,l=a.chartArea,f=(l.left+l.right)/2,m=(l.top+l.bottom)/2,y=o&&a.options.animation.animateScale,v=y?0:this.innerRadius,w=y?0:this.outerRadius,{sharedOptions:D,includeOptions:P}=this._getSharedOptions(i,s);let O,I=this._getRotation();for(O=0;O<i;++O)I+=this._circumference(O,o);for(O=i;O<i+r;++O){const W=this._circumference(O,o),K=e[O],re={x:f+this.offsetX,y:m+this.offsetY,startAngle:I,endAngle:I+W,circumference:W,outerRadius:w,innerRadius:v};P&&(re.options=D||this.resolveDataElementOptions(O,K.active?"active":s)),I+=W,this.updateElement(K,O,re,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let s,r=0;for(s=0;s<i.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?ni*(Math.abs(e)/i):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=av(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const r=this.chart;let s,o,a,l,c;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,l=a.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(At(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}})(),Y0e=(()=>class n extends mu{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=B8(i,s,a);this._drawStart=l,this._drawCount=c,j8(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(i,s),y=a.axis,v=l.axis,{spanGaps:w,segment:D}=this.options,P=ug(w)?w:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||o||"none"===s,O=i+r,W=e.length;let K=i>0&&this.getParsed(i-1);for(let re=0;re<W;++re){const V=e[re],M=I?V:{};if(re<i||re>=O){M.skip=!0;continue}const F=this.getParsed(re),z=on(F[v]),j=M[y]=a.getPixelForValue(F[y],re),$=M[v]=o||z?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,F,c):F[v],re);M.skip=isNaN(j)||isNaN($)||z,M.stop=re>0&&Math.abs(F[y]-K[y])>P,D&&(M.parsed=F,M.raw=u.data[re]),m&&(M.options=f||this.resolveDataElementOptions(re,V.active?"active":s)),I||this.updateElement(V,re,M,s),K=F}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}})(),S9=(()=>class n extends mu{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=av(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,r,s){return t9.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),l=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,r,s){const o="reset"===s,a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,f=u.xCenter,m=u.yCenter,y=u.getIndexAngle(0)-.5*ti;let w,v=y;const D=360/this.countVisibleElements();for(w=0;w<i;++w)v+=this._computeAngle(w,s,D);for(w=i;w<i+r;w++){const P=e[w];let I=v,O=v+this._computeAngle(w,s,D),W=a.getDataVisibility(w)?u.getDistanceFromCenterForValue(this.getParsed(w).r):0;v=O,o&&(c.animateScale&&(W=0),c.animateRotate&&(I=O=y));const K={x:f,y:m,innerRadius:0,outerRadius:W,startAngle:I,endAngle:O,options:this.resolveDataElementOptions(w,P.active?"active":s)};this.updateElement(P,w,K,s)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?na(this.resolveDataElementOptions(e,i).angle||r):0}})();var Q0e=Object.freeze({__proto__:null,BarController:G0e,BubbleController:Z0e,DoughnutController:hR,LineController:Y0e,PieController:(()=>class n extends hR{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}})(),PolarAreaController:S9,RadarController:(()=>class n extends mu{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return t9.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,"resize"!==e){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:a},e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){const o=this._cachedMeta.rScale,a="reset"===s;for(let l=i;l<i+r;l++){const c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":s),f=o.getPointPositionForValue(l,this.getParsed(l).r),m=a?o.xCenter:f.x,y=a?o.yCenter:f.y,v={x:m,y,angle:f.angle,skip:isNaN(m)||isNaN(y),options:u};this.updateElement(c,l,v,s)}}})(),ScatterController:(()=>class n extends mu{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){const i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:a}=B8(i,r,s);if(this._drawStart=o,this._drawCount=a,j8(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,f=this.resolveDataElementOptions(i,s),m=this.getSharedOptions(f),y=this.includeOptions(s,m),v=a.axis,w=l.axis,{spanGaps:D,segment:P}=this.options,I=ug(D)?D:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||o||"none"===s;let W=i>0&&this.getParsed(i-1);for(let K=i;K<i+r;++K){const re=e[K],V=this.getParsed(K),M=O?re:{},F=on(V[w]),z=M[v]=a.getPixelForValue(V[v],K),j=M[w]=o||F?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,V,c):V[w],K);M.skip=isNaN(z)||isNaN(j)||F,M.stop=K>0&&Math.abs(V[v]-W[v])>I,P&&(M.parsed=V,M.raw=u.data[K]),y&&(M.options=m||this.resolveDataElementOptions(K,re.active?"active":s)),O||this.updateElement(re,K,M,s),W=V}this.updateSharedOptions(m,s,f)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}})()});function gh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fR{static override(t){Object.assign(fR.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return gh()}parse(){return gh()}format(){return gh()}add(){return gh()}diff(){return gh()}startOf(){return gh()}endOf(){return gh()}}var X0e__date=fR;function J0e(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const l=a._reversePixels?vbe:Ol;if(!i)return l(s,t,e);if(r._sharedOptions){const c=s[0],u="function"==typeof c.getRange&&c.getRange(t);if(u){const f=l(s,t,e-u),m=l(s,t,e+u);return{lo:f.lo,hi:m.hi}}}}return{lo:0,hi:s.length-1}}function hv(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:m}=J0e(s[a],t,o,r);for(let y=f;y<=m;++y){const v=u[y];v.skip||i(v,c,y)}}}function pR(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||hv(n,e,t,function(a,l,c){!r&&!Nl(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function gR(n,t,e,i,r,s){return s||n.isPointInArea(t)?"r"!==e||i?function nwe(n,t,e,i,r,s){let o=[];const a=function ewe(n){const t=-1!==n.indexOf("x"),e=-1!==n.indexOf("y");return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let l=Number.POSITIVE_INFINITY;return hv(n,e,t,function c(u,f,m){const y=u.inRange(t.x,t.y,r);if(i&&!y)return;const v=u.getCenterPoint(r);if(!s&&!n.isPointInArea(v)&&!y)return;const D=a(t,v);D<l?(o=[{element:u,datasetIndex:f,index:m}],l=D):D===l&&o.push({element:u,datasetIndex:f,index:m})}),o}(n,t,e,i,r,s):function twe(n,t,e,i){let r=[];return hv(n,e,t,function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:f}=R8(o,{x:t.x,y:t.y});sv(f,c,u)&&r.push({element:o,datasetIndex:a,index:l})}),r}(n,t,e,r):[]}function I9(n,t,e,i,r){const s=[],o="x"===e?"inXRange":"inYRange";let a=!1;return hv(n,e,t,(l,c,u)=>{l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var iwe={evaluateInteractionItems:hv,modes:{index(n,t,e,i){const r=fh(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?pR(n,r,s,i,o):gR(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){const r=fh(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?pR(n,r,s,i,o):gR(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point:(n,t,e,i)=>pR(n,fh(t,n),e.axis||"xy",i,e.includeInvisible||!1),nearest:(n,t,e,i)=>gR(n,fh(t,n),e.axis||"xy",e.intersect,i,e.includeInvisible||!1),x:(n,t,e,i)=>I9(n,fh(t,n),"x",e.intersect,i),y:(n,t,e,i)=>I9(n,fh(t,n),"y",e.intersect,i)}};const A9=["left","top","right","bottom"];function fv(n,t){return n.filter(e=>e.pos===t)}function x9(n,t){return n.filter(e=>-1===A9.indexOf(e.pos)&&e.box.axis===t)}function pv(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function k9(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function M9(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function lwe(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!Kt(r)){e.size&&(n[r]-=e.size);const f=i[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?s.height:s.width),e.size=f.size/f.count,n[r]+=e.size}s.getPadding&&M9(o,s.getPadding());const a=Math.max(0,t.outerWidth-k9(o,n,"left","right")),l=Math.max(0,t.outerHeight-k9(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function uwe(n,t){const e=t.maxPadding;return function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(n?["left","right"]:["top","bottom"])}function gv(n,t,e,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,uwe(a.horizontal,t));const{same:f,other:m}=lwe(t,e,a,i);c|=f&&r.length,u=u||m,l.fullSize||r.push(a)}return c&&gv(r,t,e,i)||u}function SD(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function P9(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,m=c.size||l.height;iv(c.start)&&(o=c.start),l.fullSize?SD(l,r.left,o,e.outerWidth-r.right-r.left,m):SD(l,t.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*u,m=c.size||l.width;iv(c.start)&&(s=c.start),l.fullSize?SD(l,s,r.top,m,e.outerHeight-r.bottom-r.top):SD(l,s,t.top+c.placed,m,f),c.start=s,c.placed+=f,s=l.right}}t.x=s,t.y=o}var cs={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;-1!==e&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=ls(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=function awe(n){const t=function rwe(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(n),e=pv(t.filter(c=>c.box.fullSize),!0),i=pv(fv(t,"left"),!0),r=pv(fv(t,"right")),s=pv(fv(t,"top"),!0),o=pv(fv(t,"bottom")),a=x9(t,"x"),l=x9(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:fv(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(n.boxes),l=a.vertical,c=a.horizontal;Dn(n.boxes,w=>{"function"==typeof w.beforeLayout&&w.beforeLayout()});const u=l.reduce((w,D)=>D.box.options&&!1===D.box.options.display?w:w+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},r);M9(m,ls(i));const y=Object.assign({maxPadding:m,w:s,h:o,x:r.left,y:r.top},r),v=function owe(n,t){const e=function swe(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!A9.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}(l.concat(c),f);gv(a.fullSize,y,f,v),gv(l,y,f,v),gv(c,y,f,v)&&gv(l,y,f,v),function cwe(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}(y),P9(a.leftAndTop,y,f,v),y.x+=y.w,y.y+=y.h,P9(a.rightAndBottom,y,f,v),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Dn(a.chartArea,w=>{const D=w.box;Object.assign(D,n.chartArea),D.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class R9{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class dwe extends R9{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ID="$chartjs",hwe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},O9=n=>null===n||""===n,N9=!!h0e&&{passive:!0};function gwe(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,N9)}function AD(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function _we(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||AD(a.addedNodes,i),o=o&&!AD(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function ywe(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||AD(a.removedNodes,i),o=o&&!AD(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const mv=new Map;let F9=0;function L9(){const n=window.devicePixelRatio;n!==F9&&(F9=n,mv.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function wwe(n,t,e){const i=n.canvas,r=i&&lR(i);if(!r)return;const s=V8((a,l)=>{const c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;0===c&&0===u||s(c,u)});return o.observe(r),function vwe(n,t){mv.size||window.addEventListener("resize",L9),mv.set(n,t)}(n,s),o}function mR(n,t,e){e&&e.disconnect(),"resize"===t&&function bwe(n){mv.delete(n),mv.size||window.removeEventListener("resize",L9)}(n)}function Cwe(n,t,e){const i=n.canvas,r=V8(s=>{null!==n.ctx&&e(function mwe(n,t){const e=hwe[n.type]||n.type,{x:i,y:r}=fh(n,t);return{type:e,chart:t,native:n,x:void 0!==i?i:null,y:void 0!==r?r:null}}(s,n))},n);return function pwe(n,t,e){n&&n.addEventListener(t,e,N9)}(i,t,r),r}class Ewe extends R9{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function fwe(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[ID]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",O9(r)){const s=r9(n,"width");void 0!==s&&(n.width=s)}if(O9(i))if(""===n.style.height)n.height=n.width/(t||2);else{const s=r9(n,"height");void 0!==s&&(n.height=s)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[ID])return!1;const i=e[ID].initial;["height","width"].forEach(s=>{const o=i[s];on(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[ID],!0}addEventListener(t,e,i){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:_we,detach:ywe,resize:wwe}[e]||Cwe)(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];r&&(({attach:mR,detach:mR,resize:mR}[e]||gwe)(t,e,r),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return function d0e(n,t,e,i){const r=DD(n),s=hh(r,"margin"),o=ED(r.maxWidth,n,"clientWidth")||mD,a=ED(r.maxHeight,n,"clientHeight")||mD,l=function u0e(n,t,e){let i,r;if(void 0===t||void 0===e){const s=n&&lR(n);if(s){const o=s.getBoundingClientRect(),a=DD(s),l=hh(a,"border","width"),c=hh(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=ED(a.maxWidth,s,"clientWidth"),r=ED(a.maxHeight,s,"clientHeight")}else t=n.clientWidth,e=n.clientHeight}return{width:t,height:e,maxWidth:i||mD,maxHeight:r||mD}}(n,t,e);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const m=hh(r,"border","width"),y=hh(r,"padding");c-=y.width+m.width,u-=y.height+m.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=TD(Math.min(c,o,l.maxWidth)),u=TD(Math.min(u,a,l.maxHeight)),c&&!u&&(u=TD(c/2)),(void 0!==t||void 0!==e)&&i&&l.height&&u>l.height&&(u=l.height,c=TD(Math.floor(u*i))),{width:c,height:u}}(t,e,i,r)}isAttached(t){const e=t&&lR(t);return!(!e||!e.isConnected)}}class Ll{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ug(this.x)&&ug(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}function xD(n,t,e,i,r){const s=At(i,0),o=Math.min(At(r,n.length),n.length);let l,c,u,a=0;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}const V9=(n,t,e)=>"top"===t||"left"===t?n[t]+e:n[t]-e,B9=(n,t)=>Math.min(t||n,n);function j9(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function Pwe(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let c,l=n.getPixelForTick(r);if(!(e&&(c=1===i?Math.max(l-s,o-l):0===t?(n.getPixelForTick(1)-l)/2:(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function _v(n){return n.drawTicks?n.tickLength:0}function U9(n,t){if(!n.display)return 0;const e=fr(n.font,t),i=ls(n.padding);return(ei(n.text)?n.text.length:1)*e.lineHeight+i.height}function Fwe(n,t,e){let i=QP(n);return(e&&"right"!==t||!e&&"right"===t)&&(i=(n=>"left"===n?"right":"right"===n?"left":n)(i)),i}class mh extends Ll{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=uo(t,Number.POSITIVE_INFINITY),e=uo(e,Number.NEGATIVE_INFINITY),i=uo(i,Number.POSITIVE_INFINITY),r=uo(r,Number.NEGATIVE_INFINITY),{min:uo(t,i),max:uo(e,r),minDefined:wi(t),maxDefined:wi(e)}}getMinMax(t){let o,{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:uo(e,uo(i,e)),max:uo(i,uo(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$n(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function zbe(n,t,e){const{min:i,max:r}=n,s=T8(t,(r-i)/2),o=(a,l)=>e&&0===a?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?j9(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Twe(n,t){const e=n.options.ticks,i=function Swe(n){const t=n.options.offset,e=n._tickSize();return Math.floor(Math.min(n._length/e+(t?0:1),n._maxLength/e))}(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?function Awe(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function xwe(n,t,e,i){let o,r=0,s=e[0];for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}(t,c,s,o/r),c;const u=function Iwe(n,t,e){const i=function kwe(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}(n),r=t.length/e;if(!i)return Math.max(r,1);const s=function gbe(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i==0&&(t.push(i),t.push(n/i));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}(s,t,r);if(o>0){let f,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(xD(t,c,u,on(y)?0:a-y,a),f=0,m=o-1;f<m;f++)xD(t,c,u,s[f],s[f+1]);return xD(t,c,u,l,on(y)?t.length:l+y),c}return xD(t,c,u),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,i,t=this.options.reverse;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$n(this.options.afterUpdate,[this])}beforeSetDimensions(){$n(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$n(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),$n(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$n(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=$n(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){$n(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$n(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=B9(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let a,l,c,o=r;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const u=this._getLabelSizes(),f=u.widest.width,m=u.highest.height,y=xr(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/i:y/(i-1),f+6>a&&(a=y/(i-(t.offset?.5:1)),l=this.maxHeight-_v(t.grid)-e.padding-U9(t.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=ZP(Math.min(Math.asin(xr((u.highest.height+6)/a,-1,1)),Math.asin(xr(l/c,-1,1))-Math.asin(xr(m/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){$n(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$n(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=U9(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=_v(s)+l):(t.height=this.maxHeight,t.width=_v(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:m}=this._getLabelSizes(),y=2*i.padding,v=na(this.labelRotation),w=Math.cos(v),D=Math.sin(v);a?t.height=Math.min(this.maxHeight,t.height+(i.mirror?0:D*f.width+w*m.height)+y):t.width=Math.min(this.maxWidth,t.width+(i.mirror?0:w*f.width+D*m.height)+y),this._calculatePadding(c,u,D,w)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?c?(m=r*t.width,y=i*e.height):(m=i*t.height,y=r*e.width):"start"===s?y=e.width:"end"===s?m=t.width:"inner"!==s&&(m=t.width/2,y=e.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((y-f+o)*this.width/(this.width-f),0)}else{let u=e.height/2,f=t.height/2;"start"===s?(u=0,f=t.height):"end"===s&&(u=e.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$n(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)on(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=j9(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/B9(e,i));let f,m,y,v,w,D,P,I,O,W,K,c=0,u=0;for(f=0;f<e;f+=l){if(v=t[f].label,w=this._resolveTickFontOptions(f),r.font=D=w.string,P=s[D]=s[D]||{data:{},gc:[]},I=w.lineHeight,O=W=0,on(v)||ei(v)){if(ei(v))for(m=0,y=v.length;m<y;++m)K=v[m],!on(K)&&!ei(K)&&(O=vD(r,P.data,P.gc,O,K),W+=I)}else O=vD(r,P.data,P.gc,O,v),W=I;o.push(O),a.push(W),c=Math.max(O,c),u=Math.max(W,u)}!function Rwe(n,t){Dn(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}(s,e);const re=o.indexOf(c),V=a.indexOf(u),M=F=>({width:o[F]||0,height:a[F]||0});return{first:M(0),last:M(e-1),widest:M(re),highest:M(V),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function ybe(n){return xr(n,-32768,32767)}(this._alignToPixels?ch(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function Nwe(n,t,e){return gu(n,{tick:e,index:t,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=function Owe(n,t){return gu(n,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=na(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=_v(s),y=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,D=w/2,P=function(Ne){return ch(i,Ne,w)};let I,O,W,K,re,V,M,F,z,j,$,q;if("top"===o)I=P(this.bottom),V=this.bottom-m,F=I-D,j=P(t.top)+D,q=t.bottom;else if("bottom"===o)I=P(this.top),j=t.top,q=P(t.bottom)-D,V=I+D,F=this.top+m;else if("left"===o)I=P(this.right),re=this.right-m,M=I-D,z=P(t.left)+D,$=t.right;else if("right"===o)I=P(this.left),z=t.left,$=P(t.right)-D,re=I+D,M=this.left+m;else if("x"===e){if("center"===o)I=P((t.top+t.bottom)/2+.5);else if(Kt(o)){const Ne=Object.keys(o)[0];I=P(this.chart.scales[Ne].getPixelForValue(o[Ne]))}j=t.top,q=t.bottom,V=I+D,F=V+m}else if("y"===e){if("center"===o)I=P((t.left+t.right)/2);else if(Kt(o)){const Ne=Object.keys(o)[0];I=P(this.chart.scales[Ne].getPixelForValue(o[Ne]))}re=I-D,M=re-m,z=t.left,$=t.right}const ut=At(r.ticks.maxTicksLimit,f),Rt=Math.max(1,Math.ceil(f/ut));for(O=0;O<f;O+=Rt){const Ne=this.getContext(O),Le=s.setContext(Ne),qe=a.setContext(Ne),Ge=Le.lineWidth,Qt=Le.color,Tn=qe.dash||[],an=qe.dashOffset,ln=Le.tickWidth,$t=Le.tickColor,jr=Le.tickBorderDash||[],fo=Le.tickBorderDashOffset;W=Pwe(this,O,l),void 0!==W&&(K=ch(i,W,Ge),c?re=M=z=$=K:V=F=j=q=K,y.push({tx1:re,ty1:V,tx2:M,ty2:F,x1:z,y1:j,x2:$,y2:q,width:Ge,color:Qt,borderDash:Tn,borderDashOffset:an,tickWidth:ln,tickColor:$t,tickBorderDash:jr,tickBorderDashOffset:fo}))}return this._ticksLength=f,this._borderValue=I,y}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,m=_v(i.grid),y=m+u,v=f?-u:y,w=-na(this.labelRotation),D=[];let P,I,O,W,K,re,V,M,F,z,j,$,q="middle";if("top"===r)re=this.bottom-v,V=this._getXAxisLabelAlignment();else if("bottom"===r)re=this.top+v,V=this._getXAxisLabelAlignment();else if("left"===r){const Rt=this._getYAxisLabelAlignment(m);V=Rt.textAlign,K=Rt.x}else if("right"===r){const Rt=this._getYAxisLabelAlignment(m);V=Rt.textAlign,K=Rt.x}else if("x"===e){if("center"===r)re=(t.top+t.bottom)/2+y;else if(Kt(r)){const Rt=Object.keys(r)[0];re=this.chart.scales[Rt].getPixelForValue(r[Rt])+y}V=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)K=(t.left+t.right)/2-y;else if(Kt(r)){const Rt=Object.keys(r)[0];K=this.chart.scales[Rt].getPixelForValue(r[Rt])}V=this._getYAxisLabelAlignment(m).textAlign}"y"===e&&("start"===l?q="top":"end"===l&&(q="bottom"));const ut=this._getLabelSizes();for(P=0,I=a.length;P<I;++P){O=a[P],W=O.label;const Rt=s.setContext(this.getContext(P));M=this.getPixelForTick(P)+s.labelOffset,F=this._resolveTickFontOptions(P),z=F.lineHeight,j=ei(W)?W.length:1;const Ne=j/2,Le=Rt.color,qe=Rt.textStrokeColor,Ge=Rt.textStrokeWidth;let Tn,Qt=V;if(o?(K=M,"inner"===V&&(Qt=P===I-1?this.options.reverse?"left":"right":0===P?this.options.reverse?"right":"left":"center"),$="top"===r?"near"===c||0!==w?-j*z+z/2:"center"===c?-ut.highest.height/2-Ne*z+z:z/2-ut.highest.height:"near"===c||0!==w?z/2:"center"===c?ut.highest.height/2-Ne*z:ut.highest.height-j*z,f&&($*=-1),0!==w&&!Rt.showLabelBackdrop&&(K+=z/2*Math.sin(w))):(re=M,$=(1-j)*z/2),Rt.showLabelBackdrop){const an=ls(Rt.backdropPadding),ln=ut.heights[P],$t=ut.widths[P];let jr=$-an.top,fo=0-an.left;switch(q){case"middle":jr-=ln/2;break;case"bottom":jr-=ln}switch(V){case"center":fo-=$t/2;break;case"right":fo-=$t;break;case"inner":P===I-1?fo-=$t:P>0&&(fo-=$t/2)}Tn={left:fo,top:jr,width:$t+an.width,height:ln+an.height,color:Rt.backdropColor}}D.push({label:W,font:F,textOffset:$,options:{rotation:w,color:Le,strokeColor:qe,strokeWidth:Ge,textAlign:Qt,textBaseline:q,translation:[K,re],backdrop:Tn}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-na(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=t+s,l=this._getLabelSizes().widest.width;let c,u;return"left"===e?r?(u=this.right+s,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u=this.left)):"right"===e?r?(u=this.left+s,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,m;this.isHorizontal()?(c=ch(t,this.left,o)-o/2,u=ch(t,this.right,a)+a/2,f=m=l):(f=ch(t,this.top,o)-o/2,m=ch(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,f),e.lineTo(u,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&bD(i,r);const s=this.getLabelItems(t);for(const o of s)uh(i,o.label,0,o.textOffset,o.font,o.options);r&&wD(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=fr(i.font),o=ls(i.padding),a=i.align;let l=s.lineHeight/2;"bottom"===e||"center"===e||Kt(e)?(l+=o.bottom,ei(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:m}=function Lwe(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let m,y,v,f=0;const w=o-r,D=a-s;if(n.isHorizontal()){if(y=as(i,s,a),Kt(e)){const P=Object.keys(e)[0];v=u[P].getPixelForValue(e[P])+w-t}else v="center"===e?(c.bottom+c.top)/2+w-t:V9(n,e,t);m=a-s}else{if(Kt(e)){const P=Object.keys(e)[0];y=u[P].getPixelForValue(e[P])-D+t}else y="center"===e?(c.left+c.right)/2-D+t:V9(n,e,t);v=as(i,o,r),f="left"===e?-Ui:Ui}return{titleX:y,titleY:v,maxWidth:m,rotation:f}}(this,l,e,a);uh(t,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:m,textAlign:Fwe(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=At(t.grid&&t.grid.z,-1),r=At(t.border&&t.border.z,0);return this._isVisible()&&this.draw===mh.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]:[{z:e,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){return fr(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class kD{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function jwe(n){return"id"in n&&"defaults"in n})(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function Vwe(n,t,e){const i=tv(Object.create(null),[e?Ci.get(e):{},Ci.get(t),n.defaults]);Ci.set(t,i),n.defaultRoutes&&function Bwe(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");Ci.route(s,r,l,a)})}(t,n.defaultRoutes),n.descriptors&&Ci.describe(t,n.descriptors)}(t,o,i),this.override&&Ci.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in Ci[r]&&(delete Ci[r][i],this.override&&delete lh[i])}}class Uwe{constructor(){this.controllers=new kD(mu,"datasets",!0),this.elements=new kD(Ll,"elements"),this.plugins=new kD(Object,"plugins"),this.scales=new kD(mh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Dn(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=GP(t);$n(i["before"+r],[],i),e[t](i),$n(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Ua=new Uwe;class Hwe{constructor(){this._init=[]}notify(t,e,i,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===$n(o[i],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){on(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=At(i.options&&i.options.plugins,{}),s=function zwe(n){const t={},e=[],i=Object.keys(Ua.plugins.items);for(let s=0;s<i.length;s++)e.push(Ua.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(i);return!1!==r||e?function Wwe(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const l=a.id,c=$we(i[l],r);null!==c&&s.push({plugin:a,options:qwe(n.config,{plugin:a,local:e[l]},c,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function $we(n,t){return t||!1!==n?!0===n?{}:n:null}function qwe(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _R(n,t){return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||(Ci.datasets[n]||{}).indexAxis||"x"}function H9(n){if("x"===n||"y"===n||"r"===n)return n}function Kwe(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function yR(n,...t){if(H9(n))return n;for(const e of t){const i=e.axis||Kwe(e.position)||n.length>1&&H9(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function z9(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function $9(n){const t=n.options||(n.options={});t.plugins=At(t.plugins,{}),t.scales=function Qwe(n,t){const e=lh[n.type]||{scales:{}},i=t.scales||{},r=_R(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Kt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=yR(o,a,function Ywe(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return z9(n,"x",e[0])||z9(n,"y",e[0])}return{}}(o,n),Ci.scales[a.type]),c=function Zwe(n,t){return n===t?"_index_":"_value_"}(l,r),u=e.scales||{};s[o]=nv(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||_R(a,t),u=(lh[a]||{}).scales||{};Object.keys(u).forEach(f=>{const m=function Gwe(n,t){let e=n;return"_index_"===n?e=t:"_value_"===n&&(e="x"===t?"y":"x"),e}(f,l),y=o[m+"AxisID"]||m;s[y]=s[y]||Object.create(null),nv(s[y],[{axis:m},i[y],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];nv(a,[Ci.scales[a.type],Ci.scale])}),s}(n,t)}function W9(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const q9=new Map,G9=new Set;function MD(n,t){let e=q9.get(n);return e||(e=t(),q9.set(n,e),G9.add(e)),e}const yv=(n,t,e)=>{const i=hu(t,e);void 0!==i&&n.add(i)};class Jwe{constructor(t){this._config=function Xwe(n){return(n=n||{}).data=W9(n.data),$9(n),n}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=W9(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$9(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return MD(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return MD(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return MD(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return MD(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(f=>yv(l,t,f))),u.forEach(f=>yv(l,r,f)),u.forEach(f=>yv(l,lh[s]||{},f)),u.forEach(f=>yv(l,Ci,f)),u.forEach(f=>yv(l,eR,f))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),G9.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,lh[e]||{},Ci.datasets[e]||{},{type:e},Ci,eR]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Z9(this._resolverCache,t,r);let l=o;(function tCe(n,t){const{isScriptable:e,isIndexable:i}=K8(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(fu(a)||eCe(a))||o&&ei(a))return!0}return!1})(o,e)&&(s.$shared=!1,l=dg(o,i=fu(i)?i():i,this.createResolver(t,i,a)));for(const c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){const{resolver:s}=Z9(this._resolverCache,t,i);return Kt(e)?dg(s,e,void 0,r):s}}function Z9(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:rR(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const eCe=n=>Kt(n)&&Object.getOwnPropertyNames(n).some(t=>fu(n[t])),iCe=["top","bottom","left","right","chartArea"];function K9(n,t){return"top"===n||"bottom"===n||-1===iCe.indexOf(n)&&"x"===t}function Y9(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function Q9(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),$n(e&&e.onComplete,[n],t)}function rCe(n){const t=n.chart,e=t.options.animation;$n(e&&e.onProgress,[n],t)}function X9(n){return aR()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const PD={},J9=n=>{const t=X9(n);return Object.values(PD).filter(e=>e.canvas===t).pop()};function sCe(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function RD(n,t,e){return n.options.clip?n[e]:t[e]}let vR=(()=>class n{static defaults=Ci;static instances=PD;static overrides=lh;static registry=Ua;static version="4.4.3";static getChart=J9;static register(...e){Ua.add(...e),eW()}static unregister(...e){Ua.remove(...e),eW()}constructor(e,i){const r=this.config=new Jwe(i),s=X9(e),o=J9(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function Dwe(n){return!aR()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?dwe:Ewe}(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,f=c&&c.width;this.id=obe(),this.ctx=l,this.canvas=c,this.width=f,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hwe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Cbe(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}(m=>this.update(m),a.resizeDelay||0),this._dataChanges=[],PD[this.id]=this,l&&c?(Fl.listen(this,"complete",Q9),Fl.listen(this,"progress",rCe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return on(e)?i&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ua}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():i9(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return q8(this.canvas,this.ctx),this}stop(){return Fl.stop(this),this}resize(e,i){Fl.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const r=this.options,a=this.platform.getMaximumSize(this.canvas,e,i,r.maintainAspectRatio&&this.aspectRatio),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,i9(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),$n(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){Dn(this.options.scales||{},(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{});let o=[];i&&(o=o.concat(Object.keys(i).map(a=>{const l=i[a],c=yR(a,l),u="r"===c,f="x"===c;return{options:l,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),Dn(o,a=>{const l=a.options,c=l.id,u=yR(c,l),f=At(l.type,a.dtype);(void 0===l.position||K9(l.position,u)!==K9(a.dposition))&&(l.position=a.dposition),s[c]=!0;let m=null;c in r&&r[c].type===f?m=r[c]:(m=new(Ua.getScale(f))({id:c,type:f,ctx:this.ctx,chart:this}),r[m.id]=m),m.init(l,e)}),Dn(s,(a,l)=>{a||delete r[l]}),Dn(r,a=>{cs.configure(this,a,a.options),cs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(Y9("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{0===i.filter(o=>o===r._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){const o=i[r];let a=this.getDatasetMeta(r);const l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||_R(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=Ua.getController(l),{datasetElementType:u,dataElementType:f}=Ci.datasets[l];Object.assign(c,{dataElementType:Ua.getElement(f),datasetElementType:u&&Ua.getElement(u)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Dn(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,f=this.data.datasets.length;u<f;u++){const{controller:m}=this.getDatasetMeta(u),y=!s&&-1===o.indexOf(m);m.buildOrUpdateElements(y),a=Math.max(+m.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Dn(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Y9("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Dn(this.scales,e=>{cs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!A8(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:o}of i)sCe(e,s,"_removeElements"===r?-o:o)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,r=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!A8(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;cs.update(this,this.width,this.height,e);const i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Dn(this.boxes,s=>{r&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,fu(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Fl.has(this)?this.attached&&!Fl.running(this)&&Fl.start(this):(this.draw(),Q9({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,r=[];let s,o;for(s=0,o=i.length;s<o;++s){const a=i[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,r=e._clip,s=!r.disabled,o=function aCe(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:RD(e,t,"left"),right:RD(e,t,"right"),top:RD(i,t,"top"),bottom:RD(i,t,"bottom")}:t}(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(s&&bD(i,{left:!1===r.left?0:o.left-r.left,right:!1===r.right?this.width:o.right+r.right,top:!1===r.top?0:o.top-r.top,bottom:!1===r.bottom?this.height:o.bottom+r.bottom}),e.controller.draw(),s&&wD(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return Nl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){const o=iwe.modes[i];return"function"==typeof o?o(this,e,r,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],r=this._metasets;let s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=gu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!i.hidden}setDatasetVisibility(e,i){this.getDatasetMeta(e).hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){const s=r?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);iv(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Fl.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),q8(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete PD[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};Dn(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(i.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){Dn(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},Dn(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){const s=r?"set":"remove";let o,a,l,c;for("dataset"===i&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],r=e.map(({datasetIndex:o,index:a})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!pD(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(i=>i.plugin.id===e).length}_updateHoverStyles(e,i,r){const s=this.options.hover,o=(c,u)=>c.filter(f=>!u.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),a=o(i,e),l=r?e:o(e,i);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,i){const r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,s))return;const o=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,i,r){const{_active:s=[],options:o}=this,l=this._getActiveElements(e,s,r,i),c=function hbe(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),u=function oCe(n,t,e,i){return e&&"mouseout"!==n.type?i?t:n:null}(e,this._lastEvent,r,c);r&&(this._lastEvent=null,$n(o.onHover,[e,l,this],this),c&&$n(o.onClick,[e,l,this],this));const f=!pD(l,s);return(f||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=u,f}_getActiveElements(e,i,r,s){if("mouseout"===e.type)return[];if(!r)return i;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}})();function eW(){return Dn(vR.instances,n=>n._plugins.invalidate())}function pg(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function OD(n,t,e,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+i+e-c,0),m=u>0?u+i+e+c:0;let y=0;const v=r-l;if(i){const Le=((u>0?u-i:0)+(f>0?f-i:0))/2;y=(v-(0!==Le?v*Le/(Le+i):v))/2}const D=(v-Math.max(.001,v*f-e/ti)/f)/2,P=l+D+y,I=r-D-y,{outerStart:O,outerEnd:W,innerStart:K,innerEnd:re}=function uCe(n,t,e,i){const r=function cCe(n){return iR(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{const c=(e-Math.min(s,l))*i/2;return xr(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:xr(r.innerStart,0,o),innerEnd:xr(r.innerEnd,0,o)}}(t,m,f,I-P),V=f-O,M=f-W,F=P+O/V,z=I-W/M,j=m+K,$=m+re,q=P+K/j,ut=I-re/$;if(n.beginPath(),s){const Rt=(F+z)/2;if(n.arc(o,a,f,F,Rt),n.arc(o,a,f,Rt,z),W>0){const Ge=pg(M,z,o,a);n.arc(Ge.x,Ge.y,W,z,I+Ui)}const Ne=pg($,I,o,a);if(n.lineTo(Ne.x,Ne.y),re>0){const Ge=pg($,ut,o,a);n.arc(Ge.x,Ge.y,re,I+Ui,ut+Math.PI)}const Le=(I-re/m+(P+K/m))/2;if(n.arc(o,a,m,I-re/m,Le,!0),n.arc(o,a,m,Le,P+K/m,!0),K>0){const Ge=pg(j,q,o,a);n.arc(Ge.x,Ge.y,K,q+Math.PI,P-Ui)}const qe=pg(V,P,o,a);if(n.lineTo(qe.x,qe.y),O>0){const Ge=pg(V,F,o,a);n.arc(Ge.x,Ge.y,O,P-Ui,F)}}else{n.moveTo(o,a);const Rt=Math.cos(F)*f+o,Ne=Math.sin(F)*f+a;n.lineTo(Rt,Ne);const Le=Math.cos(z)*f+o,qe=Math.sin(z)*f+a;n.lineTo(Le,qe)}n.closePath()}function tW(n,t,e=t){n.lineCap=At(e.borderCapStyle,t.borderCapStyle),n.setLineDash(At(e.borderDash,t.borderDash)),n.lineDashOffset=At(e.borderDashOffset,t.borderDashOffset),n.lineJoin=At(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=At(e.borderWidth,t.borderWidth),n.strokeStyle=At(e.borderColor,t.borderColor)}function pCe(n,t,e){n.lineTo(e.x,e.y)}function nW(n,t,e={}){const i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a);return{count:i,start:l,loop:t.loop,ilen:c<l&&!(r<o&&s<o||r>a&&s>a)?i+c-l:c-l}}function mCe(n,t,e,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=nW(r,e,i),u=function gCe(n){return n.stepped?Obe:n.tension||"monotone"===n.cubicInterpolationMode?Nbe:pCe}(s);let y,v,w,{move:f=!0,reverse:m}=i||{};for(y=0;y<=c;++y)v=r[(a+(m?c-y:y))%o],!v.skip&&(f?(n.moveTo(v.x,v.y),f=!1):u(n,w,v,m,s.stepped),w=v);return l&&(v=r[(a+(m?c:0))%o],u(n,w,v,m,s.stepped)),!!l}function _Ce(n,t,e,i){const r=t.points,{count:s,start:o,ilen:a}=nW(r,e,i),{move:l=!0,reverse:c}=i||{};let m,y,v,w,D,P,u=0,f=0;const I=W=>(o+(c?a-W:W))%s,O=()=>{w!==D&&(n.lineTo(u,D),n.lineTo(u,w),n.lineTo(u,P))};for(l&&(y=r[I(0)],n.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=r[I(m)],y.skip)continue;const W=y.x,K=y.y,re=0|W;re===v?(K<w?w=K:K>D&&(D=K),u=(f*u+W)/++f):(O(),n.lineTo(W,K),v=re,f=0,w=D=K),P=K}O()}function bR(n){const t=n.options;return n._decimated||n._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?mCe:_Ce}const wCe="function"==typeof Path2D;let ND=(()=>class n extends Ll{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(s0e(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function b0e(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=function y0e(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,i);return function d9(n,t,e,i){return i&&i.setContext&&e?function w0e(n,t,e,i){const r=n._chart.getContext(),s=h9(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[];let u=s,f=t[0].start,m=f;function y(v,w,D,P){const I=a?-1:1;if(v!==w){for(v+=l;e[v%l].skip;)v-=I;for(;e[w%l].skip;)w+=I;v%l!=w%l&&(c.push({start:v%l,end:w%l,loop:D,style:P}),u=P,f=w%l)}}for(const v of t){f=a?f:v.start;let D,w=e[f%l];for(m=f+1;m<=v.end;m++){const P=e[m%l];D=h9(i.setContext(gu(r,{type:"segment",p0:w,p1:P,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),C0e(D,u)&&y(f,m-1,v.loop,u),w=P,u=D}f<m-1&&y(f,m-1,v.loop,u)}return c}(n,t,e,i):t}(n,!0===i?[{start:o,end:a,loop:s}]:function v0e(n,t,e,i){const r=n.length,s=[];let l,o=t,a=n[t];for(l=t+1;l<=e;++l){const c=n[l%r];c.skip||c.stop?a.skip||(s.push({start:t%r,end:(l-1)%r,loop:i=!1}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(e,o,a<o?a+r:a,!!n._fullLoop&&0===o&&a===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,i){const r=this.options,s=e[i],o=this.points,a=u9(this,{property:i,start:s,end:s});if(!a.length)return;const l=[],c=function yCe(n){return n.stepped?f0e:n.tension||"monotone"===n.cubicInterpolationMode?p0e:ph}(r);let u,f;for(u=0,f=a.length;u<f;++u){const{start:m,end:y}=a[u],v=o[m],w=o[y];if(v===w){l.push(v);continue}const P=c(v,w,Math.abs((s-v[i])/(w[i]-v[i])),r.stepped);P[i]=e[i],l.push(P)}return 1===l.length?l[0]:l}pathSegment(e,i,r){return bR(this)(e,this,i,r)}path(e,i,r){const s=this.segments,o=bR(this);let a=this._loop;i=i||0,r=r||this.points.length-i;for(const l of s)a&=o(e,this,l,{start:i,end:i+r-1});return!!a}draw(e,i,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function CCe(n,t,e,i){wCe&&!t.options.segment?function vCe(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),tW(n,t.options),n.stroke(r)}(n,t,e,i):function bCe(n,t,e,i){const{segments:r,options:s}=t,o=bR(t);for(const a of r)tW(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}(n,t,e,i)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}})();function iW(n,t,e,i){const r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}let ECe=(()=>class n extends Ll{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return iW(this,e,"x",i)}inYRange(e,i){return iW(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){let i=(e=e||this.options||{}).radius||0;return i=Math.max(i,i&&e.hoverRadius||0),2*(i+(i&&e.borderWidth||0))}draw(e,i){const r=this.options;this.skip||r.radius<.1||!Nl(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,nR(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}})();function rW(n,t){const{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,u,f;return n.horizontal?(f=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-f,u=i+f):(f=s/2,a=e-f,l=e+f,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function _u(n,t,e,i){return n?0:xr(t,e,i)}function wR(n,t,e,i){const r=null===t,s=null===e,a=n&&!(r&&s)&&rW(n,i);return a&&(r||Rl(t,a.left,a.right))&&(s||Rl(e,a.top,a.bottom))}function ACe(n,t){n.rect(t.x,t.y,t.w,t.h)}function CR(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0;return{x:n.x+i,y:n.y+r,w:n.w+((n.x+n.w!==e.x+e.w?t:0)-i),h:n.h+((n.y+n.h!==e.y+e.h?t:0)-r),radius:n.radius}}var kCe=Object.freeze({__proto__:null,ArcElement:class fCe extends Ll{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=R8(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,v=At(f,l-a)>=ni||sv(s,a,l),w=Rl(o,c+m,u+m);return v&&w}getCenterPoint(t){const{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(r+s)/2,f=(o+a+c+l)/2;return{x:e+Math.cos(u)*f,y:i+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>ni?Math.floor(i/ni):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);const c=r*(1-Math.sin(Math.min(ti,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function dCe(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){OD(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%ni||ni))}OD(n,t,e,i,l,r),n.fill()}(t,this,c,s,o),function hCe(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:m}=l,y="inner"===l.borderAlign;if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=m,y?(n.lineWidth=2*c,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let v=t.endAngle;if(s){OD(n,t,e,i,v,r);for(let w=0;w<s;++w)n.stroke();isNaN(a)||(v=o+(a%ni||ni))}y&&function lCe(n,t,e){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;n.beginPath(),n.arc(s,o,a,i-c,e+c),l>r?(c=r/l,n.arc(s,o,l,e+c,i-c,!0)):n.arc(s,o,r,e+Ui,i-Ui),n.closePath(),n.clip()}(n,t,v),s||(OD(n,t,e,i,v,r),n.stroke())}(t,this,c,s,o),t.restore()}},BarElement:class xCe extends Ll{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=function SCe(n){const t=rW(n),e=t.right-t.left,i=t.bottom-t.top,r=function DCe(n,t,e){const r=n.borderSkipped,s=Z8(n.options.borderWidth);return{t:_u(r.top,s.top,0,e),r:_u(r.right,s.right,0,t),b:_u(r.bottom,s.bottom,0,e),l:_u(r.left,s.left,0,t)}}(n,e/2,i/2),s=function TCe(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=dh(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Kt(r);return{topLeft:_u(!l||a.top||a.left,s.topLeft,0,o),topRight:_u(!l||a.top||a.right,s.topRight,0,o),bottomLeft:_u(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:_u(!l||a.bottom||a.right,s.bottomRight,0,o)}}(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),a=function ICe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?cv:ACe;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,CR(o,e,s)),t.clip(),a(t,CR(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,CR(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return wR(this,t,e,i)}inXRange(t,e){return wR(this,t,null,e)}inYRange(t,e){return wR(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:ND,PointElement:ECe});const ER=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],sW=ER.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function oW(n){return ER[n%ER.length]}function aW(n){return sW[n%sW.length]}function lW(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}var FCe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!e.forceOverride&&(lW(i)||function NCe(n){return n&&(n.borderColor||n.backgroundColor)}(r)||s&&lW(s)))return;const o=function OCe(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof hR?t=function PCe(n,t){return n.backgroundColor=n.data.map(()=>oW(t++)),t}(e,t):r instanceof S9?t=function RCe(n,t){return n.backgroundColor=n.data.map(()=>aW(t++)),t}(e,t):r&&(t=function MCe(n,t){return n.borderColor=oW(t),n.backgroundColor=aW(t),++t}(e,t))}}(n);i.forEach(o)}};function cW(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function uW(n){n.data.datasets.forEach(t=>{cW(t)})}var jCe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled)return void uW(n);const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if("y"===uv([a,n.options.indexAxis])||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if("linear"!==u.type&&"time"!==u.type||n.options.parsing)return;let v,{start:f,count:m}=function BCe(n,t){const e=t.length;let r,i=0;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=xr(Ol(t,s.axis,o).lo,0,e-1)),r=c?xr(Ol(t,s.axis,a).hi+1,i,e)-i:e-i,{start:i,count:r}}(l,c);if(m<=(e.threshold||4*i))cW(r);else{switch(on(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}})),e.algorithm){case"lttb":v=function LCe(n,t,e,i,r){const s=r.samples||i;if(s>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(s-2);let l=0;const c=t+e-1;let f,m,y,v,w,u=t;for(o[l++]=n[u],f=0;f<s-2;f++){let I,D=0,P=0;const O=Math.floor((f+1)*a)+1+t,W=Math.min(Math.floor((f+2)*a)+1,e)+t,K=W-O;for(I=O;I<W;I++)D+=n[I].x,P+=n[I].y;D/=K,P/=K;const re=Math.floor(f*a)+1+t,V=Math.min(Math.floor((f+1)*a)+1,e)+t,{x:M,y:F}=n[u];for(y=v=-1,I=re;I<V;I++)v=.5*Math.abs((M-D)*(n[I].y-F)-(M-n[I].x)*(P-F)),v>y&&(y=v,m=n[I],w=I);o[l++]=m,u=w}return o[l++]=n[c],o}(c,f,m,i,e);break;case"min-max":v=function VCe(n,t,e,i){let o,a,l,c,u,f,m,y,v,w,r=0,s=0;const D=[],I=n[t].x,W=n[t+e-1].x-I;for(o=t;o<t+e;++o){a=n[o],l=(a.x-I)/W*i,c=a.y;const K=0|l;if(K===u)c<v?(v=c,f=o):c>w&&(w=c,m=o),r=(s*r+a.x)/++s;else{const re=o-1;if(!on(f)&&!on(m)){const V=Math.min(f,m),M=Math.max(f,m);V!==y&&V!==re&&D.push({...n[V],x:r}),M!==y&&M!==re&&D.push({...n[M],x:r})}o>0&&re!==y&&D.push(n[re]),D.push(a),u=K,s=0,v=w=c,f=m=y=o}}return D}(c,f,m,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=v}})},destroy(n){uW(n)}};function DR(n,t,e,i){if(i)return;let r=t[n],s=e[n];return"angle"===n&&(r=ho(r),s=ho(s)),{property:n,start:r,end:s}}function TR(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function dW(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function hW(n,t){let e=[],i=!1;return ei(n)?(i=!0,e=n):e=function HCe(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=TR(o,a,r);const l=r[o],c=r[a];null!==i?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):null!==e&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}(n,t),e.length?new ND({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function fW(n){return n&&!1!==n.fill}function zCe(n,t,e){let r=n[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!wi(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function $Ce(n,t,e){const i=function ZCe(n){const t=n.options,e=t.fill;let i=At(e&&e.target,e);return void 0===i&&(i=!!t.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(Kt(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return wi(r)&&Math.floor(r)===r?function WCe(n,t,e,i){return("-"===n||"+"===n)&&(e=t+e),!(e===t||e<0||e>=i)&&e}(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function QCe(n,t,e){const i=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:a,point:l}=XCe(s,t,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(n.push(l),!a)break}n.push(...i)}function XCe(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],s=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],f=o[u.start][e],m=o[u.end][e];if(Rl(r,f,m)){a=r===f,l=r===m;break}}return{first:a,last:l,point:i}}class pW{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:ni}).end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function SR(n,t,e){const i=function JCe(n){const{chart:t,fill:e,line:i}=n;if(wi(e))return function eEe(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function KCe(n){const{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=function YCe(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);a.push(hW({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)QCe(r,o[u],a)}return new ND({points:r,options:{}})}(n);if("shape"===e)return!0;const r=function tEe(n){return(n.scale||{}).getPointPositionForValue?function iEe(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=function GCe(n,t,e){let i;return i="start"===n?e:"end"===n?t.options.reverse?t.min:t.max:Kt(n)?n.value:t.getBaseValue(),i}(e,t,s),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,s);return new pW({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}(n):function nEe(n){const{scale:t={},fill:e}=n,i=function qCe(n,t){let e=null;return"start"===n?e=t.bottom:"end"===n?e=t.top:Kt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(wi(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}(n)}(n);return r instanceof pW?r:hW(r,i)}(t),{line:r,scale:s,axis:o}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:f=c}=l||{};i&&r.points.length&&(bD(n,e),function rEe(n,t){const{line:e,target:i,above:r,below:s,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),"x"===l&&s!==r&&(gW(n,i,o.top),mW(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),gW(n,i,o.bottom)),mW(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore()}(n,{line:r,target:i,above:u,below:f,area:e,scale:s,axis:o}),wD(n))}function gW(n,t,e){const{segments:i,points:r}=t;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],f=r[TR(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(f.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function mW(n,t){const{line:e,target:i,property:r,color:s,scale:o}=t,a=function UCe(n,t,e){const i=n.segments,r=n.points,s=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=TR(l,c,r);const u=DR(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const f=u9(t,u);for(const m of f){const y=DR(e,s[m.start],s[m.end],m.loop),v=c9(a,r,y);for(const w of v)o.push({source:w,target:m,start:{[e]:dW(u,y,"start",Math.max)},end:{[e]:dW(u,y,"end",Math.min)}})}}return o}(e,i,r);for(const{source:l,target:c,start:u,end:f}of a){const{style:{backgroundColor:m=s}={}}=l,y=!0!==i;n.save(),n.fillStyle=m,sEe(n,o,y&&DR(r,u,f)),n.beginPath();const v=!!e.pathSegment(n,l);let w;if(y){v?n.closePath():_W(n,i,f,r);const D=!!i.pathSegment(n,c,{move:v,reverse:!0});w=v&&D,w||_W(n,i,u,r)}n.closePath(),n.fill(w?"evenodd":"nonzero"),n.restore()}}function sEe(n,t,e){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=e||{};"x"===s&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function _W(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var oEe={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ND&&(l={visible:n.isDatasetVisible(o),index:o,fill:$Ce(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=zCe(r,o,e.propagate))},beforeDraw(n,t,e){const i="beforeDraw"===e.drawTime,r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&SR(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;fW(s)&&SR(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!fW(i)||"beforeDatasetDraw"!==e.drawTime||SR(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const yW=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}};class vW extends Ll{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=$n(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,r=fr(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=yW(i,s);let c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let f=t;s.textAlign="left",s.textBaseline="middle";let m=-1,y=-u;return this.legendItems.forEach((v,w)=>{const D=i+e/2+s.measureText(v.text).width;(0===w||c[c.length-1]+D+2*a>o)&&(f+=u,c[c.length-(w>0?0:1)]=0,y+=u,m++),l[w]={left:0,top:y,row:m,width:D,height:r},c[c.length-1]+=D+a}),f}_fitCols(t,e,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let f=a,m=0,y=0,v=0,w=0;return this.legendItems.forEach((D,P)=>{const{itemWidth:I,itemHeight:O}=function lEe(n,t,e,i,r){const s=function cEe(n,t,e,i){let r=n.text;return r&&"string"!=typeof r&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}(i,n,t,e),o=function uEe(n,t,e){let i=n;return"string"!=typeof t.text&&(i=bW(t,e)),i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(i,e,s,D,r);P>0&&y+O+2*a>u&&(f+=m+a,c.push({width:m,height:y}),v+=m+a,w++,m=y=0),l[P]={left:v,top:y,col:w,width:I,height:O},m=Math.max(m,I),y+=O+a}),f+=m,c.push({width:m,height:y}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=fg(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=as(i,this.left+r,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=as(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=as(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=as(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;bD(t,this),this._draw(),wD(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=Ci.color,l=fg(t.rtl,this.left,this.width),c=fr(o.font),{padding:u}=o,f=c.size,m=f/2;let y;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:w,itemHeight:D}=yW(o,f),O=this.isHorizontal(),W=this._computeTitleHeight();y=O?{x:as(s,this.left+u,this.right-i[0]),y:this.top+u+W,line:0}:{x:this.left+u,y:as(s,this.top+W+u,this.bottom-e[0].height),line:0},s9(this.ctx,t.textDirection);const K=D+u;this.legendItems.forEach((re,V)=>{r.strokeStyle=re.fontColor,r.fillStyle=re.fontColor;const M=r.measureText(re.text).width,F=l.textAlign(re.textAlign||(re.textAlign=o.textAlign)),z=v+m+M;let j=y.x,$=y.y;l.setWidth(this.width),O?V>0&&j+z+u>this.right&&($=y.y+=K,y.line++,j=y.x=as(s,this.left+u,this.right-i[y.line])):V>0&&$+K>this.bottom&&(j=y.x=j+e[y.line].width+u,y.line++,$=y.y=as(s,this.top+W+u,this.bottom-e[y.line].height)),function(re,V,M){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;r.save();const F=At(M.lineWidth,1);if(r.fillStyle=At(M.fillStyle,a),r.lineCap=At(M.lineCap,"butt"),r.lineDashOffset=At(M.lineDashOffset,0),r.lineJoin=At(M.lineJoin,"miter"),r.lineWidth=F,r.strokeStyle=At(M.strokeStyle,a),r.setLineDash(At(M.lineDash,[])),o.usePointStyle){const z={radius:w*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:F},j=l.xPlus(re,v/2);G8(r,z,j,V+m,o.pointStyleWidth&&v)}else{const z=V+Math.max((f-w)/2,0),j=l.leftForLtr(re,v),$=dh(M.borderRadius);r.beginPath(),Object.values($).some(q=>0!==q)?cv(r,{x:j,y:z,w:v,h:w,radius:$}):r.rect(j,z,v,w),r.fill(),0!==F&&r.stroke()}r.restore()}(l.x(j),$,re),j=((n,t,e,i)=>n===(i?"left":"right")?e:"center"===n?(t+e)/2:t)(F,j+v+m,O?j+z:this.right,t.rtl),function(re,V,M){uh(r,M.text,re,V+D/2,c,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})}(l.x(j),$,re),O?y.x+=z+u:y.y+="string"!=typeof re.text?bW(re,c.lineHeight)+u:K}),o9(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=fr(e.font),r=ls(e.padding);if(!e.display)return;const s=fg(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=r.top+i.size/2;let u,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+c,f=as(t.align,f,this.right-m);else{const v=this.columnSizes.reduce((w,D)=>Math.max(w,D.height),0);u=c+as(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const y=as(a,f,f+m);o.textAlign=s.textAlign(QP(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,uh(o,e.text,y,u,i)}_computeTitleHeight(){const t=this.options.title,e=fr(t.font),i=ls(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(Rl(t,this.left,this.right)&&Rl(e,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Rl(t,r.left,r.left+r.width)&&Rl(e,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function dEe(n,t){return!(("mousemove"!==n&&"mouseout"!==n||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==n&&"mouseup"!==n))}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((n,t)=>null!==n&&null!==t&&n.datasetIndex===t.datasetIndex&&n.index===t.index)(r,i);r&&!s&&$n(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&$n(e.onHover,[t,i,this],this)}else i&&$n(e.onClick,[t,i,this],this)}}function bW(n,t){return t*(n.text?n.text.length:0)}var hEe={id:"legend",_element:vW,start(n,t,e){const i=n.legend=new vW({ctx:n.ctx,options:e,chart:n});cs.configure(n,i,e),cs.addBox(n,i)},stop(n){cs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;cs.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),u=ls(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class IR extends Ll{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=ei(i.text)?i.text.length:1;this._padding=ls(i.padding);const s=r*fr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align;let c,u,f,l=0;return this.isHorizontal()?(u=as(a,i,s),f=e+t,c=s-i):("left"===o.position?(u=i+t,f=as(a,r,e),l=-.5*ti):(u=s-t,f=as(a,e,r),l=.5*ti),c=r-e),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=fr(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);uh(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:QP(e.align),textBaseline:"middle",translation:[o,a]})}}var pEe={id:"title",_element:IR,start(n,t,e){!function fEe(n,t){const e=new IR({ctx:n.ctx,options:t,chart:n});cs.configure(n,e,t),cs.addBox(n,e),n.titleBlock=e}(n,e)},stop(n){cs.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;cs.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const FD=new WeakMap;var gEe={id:"subtitle",start(n,t,e){const i=new IR({ctx:n.ctx,options:e,chart:n});cs.configure(n,i,e),cs.addBox(n,i),FD.set(n,i)},stop(n){cs.removeBox(n,FD.get(n)),FD.delete(n)},beforeUpdate(n,t,e){const i=FD.get(n);cs.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vv={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let s,o,a,e=t.x,i=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const u=KP(t,l.getCenterPoint());u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function Ha(n,t){return t&&(ei(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Vl(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function mEe(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function wW(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=fr(t.bodyFont),c=fr(t.titleFont),u=fr(t.footerFont),f=s.length,m=r.length,y=i.length,v=ls(t.padding);let w=v.height,D=0,P=i.reduce((W,K)=>W+K.before.length+K.lines.length+K.after.length,0);P+=n.beforeBody.length+n.afterBody.length,f&&(w+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),P&&(w+=y*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(P-y)*l.lineHeight+(P-1)*t.bodySpacing),m&&(w+=t.footerMarginTop+m*u.lineHeight+(m-1)*t.footerSpacing);let I=0;const O=function(W){D=Math.max(D,e.measureText(W).width+I)};return e.save(),e.font=c.string,Dn(n.title,O),e.font=l.string,Dn(n.beforeBody.concat(n.afterBody),O),I=t.displayColors?o+2+t.boxPadding:0,Dn(i,W=>{Dn(W.before,O),Dn(W.lines,O),Dn(W.after,O)}),I=0,e.font=u.string,Dn(n.footer,O),e.restore(),D+=v.width,{width:D,height:w}}function vEe(n,t,e,i){const{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function yEe(n,t,e,i){const{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if("left"===n&&r+s+o>t.width||"right"===n&&r-s-o<0)return!0}(c,n,t,e)&&(c="center"),c}function CW(n,t,e){const i=e.yAlign||t.yAlign||function _Ee(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}(n,e);return{xAlign:e.xAlign||t.xAlign||vEe(n,t,e,i),yAlign:i}}function EW(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:y}=dh(o);let v=function bEe(n,t){let{x:e,width:i}=n;return"right"===t?e-=i:"center"===t&&(e-=i/2),e}(t,a);const w=function wEe(n,t,e){let{y:i,height:r}=n;return"top"===t?i+=e:i-="bottom"===t?r+e:r/2,i}(t,l,c);return"center"===l?"left"===a?v+=c:"right"===a&&(v-=c):"left"===a?v-=Math.max(u,m)+r:"right"===a&&(v+=Math.max(f,y)+r),{x:xr(v,0,i.width-t.width),y:xr(w,0,i.height-t.height)}}function LD(n,t,e){const i=ls(e.padding);return"center"===t?n.x+n.width/2:"right"===t?n.x+n.width-i.right:n.x+i.left}function DW(n){return Ha([],Vl(n))}function TW(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const SW={beforeTitle:Pl,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Pl,beforeBody:Pl,beforeLabel:Pl,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return on(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Pl,afterBody:Pl,beforeFooter:Pl,footer:Pl,afterFooter:Pl};function Ws(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?SW[t].call(e,i):r}let IW=(()=>class n extends Ll{static positioners=vv;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new p9(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function CEe(n,t,e){return gu(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:r}=i,s=Ws(r,"beforeTitle",this,e),o=Ws(r,"title",this,e),a=Ws(r,"afterTitle",this,e);let l=[];return l=Ha(l,Vl(s)),l=Ha(l,Vl(o)),l=Ha(l,Vl(a)),l}getBeforeBody(e,i){return DW(Ws(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:r}=i,s=[];return Dn(e,o=>{const a={before:[],lines:[],after:[]},l=TW(r,o);Ha(a.before,Vl(Ws(l,"beforeLabel",this,o))),Ha(a.lines,Ws(l,"label",this,o)),Ha(a.after,Vl(Ws(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,i){return DW(Ws(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:r}=i,s=Ws(r,"beforeFooter",this,e),o=Ws(r,"footer",this,e),a=Ws(r,"afterFooter",this,e);let l=[];return l=Ha(l,Vl(s)),l=Ha(l,Vl(o)),l=Ha(l,Vl(a)),l}_createItems(e){const i=this._active,r=this.chart.data,s=[],o=[],a=[];let c,u,l=[];for(c=0,u=i.length;c<u;++c)l.push(mEe(this.chart,i[c]));return e.filter&&(l=l.filter((f,m,y)=>e.filter(f,m,y,r))),e.itemSort&&(l=l.sort((f,m)=>e.itemSort(f,m,r))),Dn(l,f=>{const m=TW(e.callbacks,f);s.push(Ws(m,"labelColor",this,f)),o.push(Ws(m,"labelPointStyle",this,f)),a.push(Ws(m,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){const r=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(s.length){const l=vv[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=wW(this,r),u=Object.assign({},l,c),f=CW(this.chart,r,u),m=EW(r,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){const o=this.getCaretPosition(e,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,r){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:m}=dh(l),{x:y,y:v}=e,{width:w,height:D}=i;let P,I,O,W,K,re;return"center"===o?(K=v+D/2,"left"===s?(P=y,I=P-a,W=K+a,re=K-a):(P=y+w,I=P+a,W=K-a,re=K+a),O=P):(I="left"===s?y+Math.max(c,f)+a:"right"===s?y+w-Math.max(u,m)-a:this.caretX,"top"===o?(W=v,K=W-a,P=I-a,O=I+a):(W=v+D,K=W+a,P=I+a,O=I-a),re=W),{x1:P,x2:I,x3:O,y1:W,y2:K,y3:re}}drawTitle(e,i,r){const s=this.title,o=s.length;let a,l,c;if(o){const u=fg(r.rtl,this.x,this.width);for(e.x=LD(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=fr(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,i,r,s,o){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=o,f=fr(o.bodyFont),m=LD(this,"left",o),y=s.x(m),w=i.y+(c<f.lineHeight?(f.lineHeight-c)/2:0);if(o.usePointStyle){const D={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},P=s.leftForLtr(y,u)+u/2,I=w+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,nR(e,D,P,I),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,nR(e,D,P,I)}else{e.lineWidth=Kt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const D=s.leftForLtr(y,u),P=s.leftForLtr(s.xPlus(y,1),u-2),I=dh(a.borderRadius);Object.values(I).some(O=>0!==O)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,cv(e,{x:D,y:w,w:u,h:c,radius:I}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),cv(e,{x:P,y:w+1,w:u-2,h:c-2,radius:I}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(D,w,u,c),e.strokeRect(D,w,u,c),e.fillStyle=a.backgroundColor,e.fillRect(P,w+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:f}=r,m=fr(r.bodyFont);let y=m.lineHeight,v=0;const w=fg(r.rtl,this.x,this.width),D=function(F){i.fillText(F,w.x(e.x+v),e.y+y/2),e.y+=y+o},P=w.textAlign(a);let I,O,W,K,re,V,M;for(i.textAlign=a,i.textBaseline="middle",i.font=m.string,e.x=LD(this,P,r),i.fillStyle=r.bodyColor,Dn(this.beforeBody,D),v=l&&"right"!==P?"center"===a?u/2+f:u+2+f:0,K=0,V=s.length;K<V;++K){for(I=s[K],O=this.labelTextColors[K],i.fillStyle=O,Dn(I.before,D),W=I.lines,l&&W.length&&(this._drawColorBox(i,e,K,w,r),y=Math.max(m.lineHeight,c)),re=0,M=W.length;re<M;++re)D(W[re]),y=m.lineHeight;Dn(I.after,D)}v=0,y=m.lineHeight,Dn(this.afterBody,D),e.y-=o}drawFooter(e,i,r){const s=this.footer,o=s.length;let a,l;if(o){const c=fg(r.rtl,this.x,this.width);for(e.x=LD(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=fr(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:f}=r,{topLeft:m,topRight:y,bottomLeft:v,bottomRight:w}=dh(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+m,c),"top"===a&&this.drawCaret(e,i,r,s),i.lineTo(l+u-y,c),i.quadraticCurveTo(l+u,c,l+u,c+y),"center"===a&&"right"===o&&this.drawCaret(e,i,r,s),i.lineTo(l+u,c+f-w),i.quadraticCurveTo(l+u,c+f,l+u-w,c+f),"bottom"===a&&this.drawCaret(e,i,r,s),i.lineTo(l+v,c+f),i.quadraticCurveTo(l,c+f,l,c+f-v),"center"===a&&"left"===o&&this.drawCaret(e,i,r,s),i.lineTo(l,c+m),i.quadraticCurveTo(l,c,l+m,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const a=vv[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=wW(this,e),c=Object.assign({},a,this._size),u=CW(i,e,c),f=EW(e,c,u,i);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=ls(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,i),s9(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),o9(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const r=this._active,s=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!pD(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,r),l=this._positionChanged(a,e),c=i||!pD(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&void 0!==this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index));const a=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(e,i){const{caretX:r,caretY:s,options:o}=this,a=vv[o.position].call(this,e,i);return!1!==a&&(r!==a.x||s!==a.y)}})();var EEe={id:"tooltip",_element:IW,positioners:vv,afterInit(n,t,e){e&&(n.tooltip=new IW({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){n.tooltip&&n.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:SW},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},DEe=Object.freeze({__proto__:null,Colors:FCe,Decimation:jCe,Filler:oEe,Legend:hEe,SubTitle:gEe,Title:pEe,Tooltip:EEe});function AW(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}let AEe=(()=>class n extends mh{static id="category";static defaults={ticks:{callback:AW}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const r=this.getLabels();for(const{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(on(e))return null;const r=this.getLabels();return((n,t)=>null===n?null:xr(Math.round(n),0,t))(i=isFinite(i)&&r[i]===e?i:function SEe(n,t,e,i){const r=n.indexOf(t);return-1===r?((n,t,e,i)=>("string"==typeof t?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(n,t,e,i):r!==n.lastIndexOf(t)?e:r}(r,e,At(i,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,i=this.max,r=this.options.offset,s=[];let o=this.getLabels();o=0===e&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=i;a++)s.push({value:a});return s}getLabelForValue(e){return AW.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}})();function xW(n,t,{horizontal:e,minRotation:i}){const r=na(i),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+n).length)}class VD extends mh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return on(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){const l=ja(r),c=ja(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=0===s?1:Math.abs(.05*s);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:i}=t;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function xEe(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:m}=n,y=s||1,v=u-1,{min:w,max:D}=t,P=!on(o),I=!on(a),O=!on(c),W=(D-w)/(f+1);let re,V,M,F,K=k8((D-w)/v/y)*y;if(K<1e-14&&!P&&!I)return[{value:w},{value:D}];F=Math.ceil(D/K)-Math.floor(w/K),F>v&&(K=k8(F*K/v/y)*y),on(l)||(re=Math.pow(10,l),K=Math.ceil(K*re)/re),"ticks"===r?(V=Math.floor(w/K)*K,M=Math.ceil(D/K)*K):(V=w,M=D),P&&I&&s&&function mbe(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}((a-o)/s,K/1e3)?(F=Math.round(Math.min((a-o)/K,u)),K=(a-o)/F,V=o,M=a):O?(V=P?o:V,M=I?a:M,F=c-1,K=(M-V)/F):(F=(M-V)/K,F=rv(F,Math.round(F),K/1e3)?Math.round(F):Math.ceil(F));const z=Math.max(P8(K),P8(V));re=Math.pow(10,on(l)?z:l),V=Math.round(V*re)/re,M=Math.round(M*re)/re;let j=0;for(P&&(m&&V!==o?(e.push({value:o}),V<o&&j++,rv(Math.round((V+j*K)*re)/re,o,xW(o,W,n))&&j++):V<o&&j++);j<F;++j){const $=Math.round((V+j*K)*re)/re;if(I&&$>a)break;e.push({value:$})}return I&&m&&M!==a?e.length&&rv(e[e.length-1].value,a,xW(a,W,n))?e[e.length-1].value=a:e.push({value:a}):(!I||M===a)&&e.push({value:M}),e}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&M8(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return av(t,this.chart.options.locale,this.options.ticks.format)}}const bv=n=>Math.floor(pu(n)),_h=(n,t)=>Math.pow(10,bv(n)+t);function kW(n){return n/Math.pow(10,bv(n))==1}function MW(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function AR(n){const t=n.ticks;if(t.display&&n.display){const e=ls(t.backdropPadding);return At(t.font&&t.font.size,Ci.font.size)+e.height}return 0}function OEe(n,t,e){return e=ei(e)?e:[e],{w:Rbe(n,t.string,e),h:e.length*t.lineHeight}}function PW(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function FEe(n,t,e,i,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function LEe(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),c=Math.round(ZP(ho(l.angle+Ui))),u=function HEe(n,t,e){return 90===e||270===e?n-=t/2:(e>270||e<90)&&(n-=t),n}(l.y,a.h,c),f=function jEe(n){return 0===n||180===n?"center":n<180?"left":"right"}(c),m=function UEe(n,t,e){return"right"===e?n-=t:"center"===e&&(n-=t/2),n}(l.x,a.w,f);return{visible:!0,x:l.x,y:u,textAlign:f,left:m,top:u,right:m+a.w,bottom:u+a.h}}function VEe(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:s}=n;return!(Nl({x:e,y:i},t)||Nl({x:e,y:s},t)||Nl({x:r,y:i},t)||Nl({x:r,y:s},t))}function zEe(n,t,e){const{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!on(a)){const l=dh(t.borderRadius),c=ls(t.backdropPadding);n.fillStyle=a;const u=i-c.left,f=r-c.top,m=s-i+c.width,y=o-r+c.height;Object.values(l).some(v=>0!==v)?(n.beginPath(),cv(n,{x:u,y:f,w:m,h:y,radius:l}),n.fill()):n.fillRect(u,f,m,y)}}function RW(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,ni);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}const BD={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qs=Object.keys(BD);function OW(n,t){return n-t}function NW(n,t){if(on(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return"function"==typeof i&&(o=i(o)),wi(o)||(o="string"==typeof i?e.parse(o,i):e.parse(o)),null===o?null:(r&&(o="week"!==r||!ug(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function FW(n,t,e,i){const r=qs.length;for(let s=qs.indexOf(n);s<r-1;++s){const o=BD[qs[s]];if(o.common&&Math.ceil((e-t)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=i)return qs[s]}return qs[r-1]}function LW(n,t,e){if(e){if(e.length){const{lo:i,hi:r}=YP(e,t);n[e[i]>=t?e[i]:e[r]]=!0}}else n[t]=!0}function VW(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&e?function YEe(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}(n,i,r,e):i}let xR=(()=>class n extends mh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const r=e.time||(e.time={}),s=this._adapter=new X0e__date(e.adapters.date);s.init(i),nv(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return void 0===e?null:NW(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&c(this.getMinMax(!1))),s=wi(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=wi(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){const e=this.options,i=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,l=function bbe(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}(s,o,this.max);return this._unit=i.unit||(r.autoSkip?FW(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function ZEe(n,t,e,i,r){for(let s=qs.length-1;s>=qs.indexOf(e);s--){const o=qs[s];if(BD[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return qs[e?qs.indexOf(e):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function KEe(n){for(let t=qs.indexOf(n)+1,e=qs.length;t<e;++t)if(BD[qs[t]].common)return qs[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&l.reverse(),VW(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s,o,i=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),i=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;i=xr(i,0,a),r=xr(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||FW(o.minUnit,i,r,this._getLabelCapacity(i)),l=At(s.ticks.stepSize,1),c="week"===a&&o.isoWeekday,u=ug(c)||!0===c,f={};let y,v,m=i;if(u&&(m=+e.startOf(m,"isoWeek",c)),m=+e.startOf(m,u?"day":a),e.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);const w="data"===s.ticks.source&&this.getDataTimestamps();for(y=m,v=0;y<r;y=+e.add(y,l,a),v++)LW(f,y,w);return(y===r||"ticks"===s.bounds||1===v)&&LW(f,y,w),Object.keys(f).sort(OW).map(D=>+D)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}format(e,i){return this._adapter.format(e,i||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,i,r,s){const o=this.options,a=o.ticks.callback;if(a)return $n(a,[e,i,r],this);const l=o.time.displayFormats,c=this._unit,u=this._majorUnit,m=u&&l[u],y=r[i];return this._adapter.format(e,s||(u&&m&&y&&y.major?m:c&&l[c]))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){const i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,r=this.ctx.measureText(e).width,s=na(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(e){const i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(e,0,VW(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,r;if(e.length)return e;const s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(NW(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return F8(e.sort(OW))}})();function jD(n,t,e){let s,o,a,l,i=0,r=n.length-1;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Ol(n,"pos",t)),({pos:s,time:a}=n[i]),({pos:o,time:l}=n[r])):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Ol(n,"time",t)),({time:s,pos:a}=n[i]),({time:o,pos:l}=n[r]));const c=o-s;return c?a+(l-a)*(t-s)/c:a}var XEe=Object.freeze({__proto__:null,CategoryScale:AEe,LinearScale:class kEe extends VD{static id="linear";static defaults={ticks:{callback:yD.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=wi(t)?t:0,this.max=wi(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=na(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},LogarithmicScale:class REe extends mh{static id="logarithmic";static defaults={ticks:{callback:yD.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=VD.prototype.parse.apply(this,[t,e]);if(0!==i)return wi(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=wi(t)?Math.max(0,t):null,this.max=wi(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!wi(this._userMin)&&(this.min=t===_h(this.min,0)?_h(this.min,-1):_h(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(_h(i,-1)),o(_h(r,1)))),i<=0&&s(_h(r,-1)),r<=0&&o(_h(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,i=function PEe(n,{min:t,max:e}){t=uo(n.min,t);const i=[],r=bv(t);let s=function MEe(n,t){let i=bv(t-n);for(;MW(n,t,i)>10;)i++;for(;MW(n,t,i)<10;)i--;return Math.min(i,bv(n))}(t,e),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let f=Math.floor((c-u)/Math.pow(10,s)),m=uo(n.min,Math.round((l+u+f*Math.pow(10,s))*o)/o);for(;m<e;)i.push({value:m,major:kW(m),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),m=Math.round((l+u+f*Math.pow(10,s))*o)/o;const y=uo(n.max,m);return i.push({value:y,major:kW(y),significand:f}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&M8(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return void 0===t?"0":av(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=pu(t),this._valueRange=pu(this.max)-pu(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(pu(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}},RadialLinearScale:class GEe extends VD{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:yD.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ls(AR(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=wi(t)&&!isNaN(t)?t:0,this.max=wi(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/AR(this.options))}generateTickLabels(t){VD.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=$n(this.options.pointLabels.callback,[e,i],this);return r||0===r?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?function NEe(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?ti/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),f=fr(c.font),m=OEe(n.ctx,f,n._pointLabels[l]);i[l]=m;const y=ho(n.getIndexAngle(l)+a),v=Math.round(ZP(y));FEe(e,t,y,PW(v,u.x,m.w,0,180),PW(v,u.y,m.h,90,270))}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=function BEe(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:AR(s)/2,additionalAngle:o?ti/r:0};let c;for(let u=0;u<r;u++){l.padding=e[u],l.size=t[u];const f=LEe(n,u,l);i.push(f),"auto"===a&&(f.visible=VEe(f,c),f.visible&&(c=f))}return i}(n,i,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){return ho(t*(ni/(this._pointLabels.length||1))+na(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(on(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(on(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function qEe(n,t,e){return gu(n,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Ui+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),RW(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&function $Ee(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));zEe(e,o,s);const a=fr(o.font),{x:l,y:c,textAlign:u}=s;uh(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach((u,f)=>{if(0!==f||0===f&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const m=this.getContext(f),y=r.setContext(m),v=s.setContext(m);!function WEe(n,t,e,i,r){const s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),RW(n,e,o,i),s.closePath(),s.stroke(),s.restore())}(this,y,l,o,v)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:m}=u;!m||!f||(t.lineWidth=m,t.strokeStyle=f,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),u=fr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const f=ls(c.backdropPadding);t.fillRect(-o/2-f.left,-s-u.size/2-f.top,o+f.width,u.size+f.height)}uh(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},TimeScale:xR,TimeSeriesScale:class QEe extends xR{static id="timeseries";static defaults=xR.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=jD(e,this.min),this._tableRange=jD(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||1===i.length)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(jD(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return jD(this._table,i*this._tableRange+this._minPos,!0)}}});vR.register(Q0e,kCe,DEe,XEe);const eDe=["chartContainer"];function tDe(n,t){if(1&n&&(C(0,"div")(1,"h3"),x(2),E(),dn(3,"canvas",2,3),E()),2&n){const e=t.$implicit;R(2),Je(e.name)}}function nDe(n,t){1&n&&(C(0,"div"),x(1," \u30c1\u30e3\u30fc\u30c8\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\n"),E())}let iDe=(()=>{class n{constructor(e,i){this.projectService=e,this.taskService=i,this.projects=[],this.tasks$=we([]),this.statusCounts={},this.hasChartData=!1,console.log("ProjectProgressComponent constructor")}ngOnInit(){console.log("ProjectProgressComponent ngOnInit"),this.projectService.getProjectsByOwnerOrMember().subscribe(e=>{if(this.projects=e,console.log("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30fc\u30bf:",e),e&&e.length>0){const i=e.map(r=>r.id);console.log("Fetching tasks for projects:",i),this.tasks$=this.taskService.getTasksByProjectIds(i),this.tasks$.pipe(Fe(r=>(r.forEach(s=>{const o=s.projectId||"";this.statusCounts[o]||(this.statusCounts[o]={\u672a\u7740\u624b:0,\u9032\u884c\u4e2d:0,\u5b8c\u4e86:0}),this.statusCounts[o].hasOwnProperty(s.status)&&this.statusCounts[o][s.status]++}),r))).subscribe(r=>{console.log("\u30bf\u30b9\u30af\u30c7\u30fc\u30bf:",r),this.hasChartData=Object.values(this.statusCounts).some(s=>Object.values(s).some(o=>o>0)),this.hasChartData&&this.chartContainers.changes.subscribe(()=>{this.initializeCharts()})},r=>{console.error("\u30bf\u30b9\u30af\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f:",r)})}else console.log("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093")},e=>{console.error("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f:",e)})}ngAfterViewInit(){console.log("ngAfterViewInit called"),this.initializeCharts()}initializeCharts(){this.chartContainers.forEach((e,i)=>{const s=this.projects[i].id;if(this.statusCounts[s]){const a={labels:["\u672a\u7740\u624b","\u9032\u884c\u4e2d","\u5b8c\u4e86"],datasets:[{data:[this.statusCounts[s].\u672a\u7740\u624b,this.statusCounts[s].\u9032\u884c\u4e2d,this.statusCounts[s].\u5b8c\u4e86],backgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]};new vR(e.nativeElement,{type:"pie",data:a,options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:l=>{const c=a.datasets[0].data.reduce((m,y)=>m+y,0),f=(a.datasets[0].data[l.dataIndex]/c*100).toFixed(2)+"%";return`${a.labels[l.dataIndex]}: ${f}`}}}}}})}else console.error("statusCounts is undefined for projectId:",s)})}static#e=this.\u0275fac=function(i){return new(i||n)(G(oh),G(Al))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-project-progress"]],viewQuery:function(i,r){if(1&i&&qI(eDe,5),2&i){let s;ld(s=cd())&&(r.chartContainers=s)}},decls:4,vars:2,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["width","800","height","400",2,"width","100%","height","400px"],["chartContainer",""]],template:function(i,r){1&i&&(C(0,"h2"),x(1,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u9032\u6357"),E(),me(2,tDe,5,1,"div",0),me(3,nDe,2,0,"div",1)),2&i&&(R(2),N("ngForOf",r.projects),R(1),N("ngIf",!r.hasChartData))},styles:["canvas[_ngcontent-%COMP%]{display:block;margin:auto}"]})}return n})(),kR=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i,this.userId=null,this.authService.user$.subscribe(r=>{this.userId=r?.uid||null})}getUserTaskSetsCollection(){if(!this.userId)throw new Error("User ID is not available");return this.firestore.collection(`users/${this.userId}/taskSets`)}getTaskSets(){return this.getUserTaskSetsCollection().valueChanges({idField:"id"})}createTaskSet(e){return this.getUserTaskSetsCollection().add(e)}updateTaskSet(e){return this.getUserTaskSetsCollection().doc(e.id).update(e)}deleteTaskSet(e){return this.getUserTaskSetsCollection().doc(e.id).delete()}addTaskToTaskSet(e,i){if(!this.userId)return Promise.reject("User ID is not available");const r=this.firestore.createId();return i.id=r,this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).doc(r).set(i)}getTasksForTaskSet(e){if(!this.userId)throw new Error("User ID is not available");return this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).valueChanges({idField:"id"})}updateTaskInTaskSet(e,i){return this.userId?this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).doc(i.id).update(i):Promise.reject("User ID is not available")}duplicateTask(e,i){if(!this.userId)return Promise.reject("User ID is not available");const r={...i,id:this.firestore.createId()};return this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).doc(r.id).set(r)}waitForUserId(){return new Promise((e,i)=>{if(this.userId)e();else{const r=this.authService.user$.subscribe(s=>{s?.uid&&(this.userId=s.uid,r.unsubscribe(),e())})}})}getCurrentUserId(){return this.userId}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Pa),ie(ao))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rDe(n,t){1&n&&dn(0,"div",2)}function sDe(n,t){if(1&n&&(C(0,"option",30),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function oDe(n,t){if(1&n){const e=We();C(0,"div")(1,"label"),x(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),E(),C(3,"input",42),X("ngModelChange",function(r){return te(e),ne(U(3).editedTask.repeatSettings.daysOffsetFromEnd=r)}),E()()}if(2&n){const e=U(3);R(3),N("ngModel",e.editedTask.repeatSettings.daysOffsetFromEnd)}}function aDe(n,t){if(1&n){const e=We();C(0,"div"),x(1),C(2,"button",7),X("click",function(){const s=te(e).$implicit;return ne(U(3).removeExcludeDate(s))}),x(3,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e," ")}}function lDe(n,t){if(1&n){const e=We();C(0,"div",8)(1,"span",9),x(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),E(),C(3,"span",10)(4,"div",31)(5,"div")(6,"label"),x(7,"\u983b\u5ea6:"),E(),C(8,"select",18),X("ngModelChange",function(r){return te(e),ne(U(2).editedTask.repeatSettings.frequency=r)}),C(9,"option",32),x(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),E(),C(11,"option",33),x(12,"\u6bce\u65e5"),E(),C(13,"option",34),x(14,"\u6bce\u9031"),E(),C(15,"option",35),x(16,"\u6bce\u6708"),E(),C(17,"option",36),x(18,"\u6bce\u5e74"),E(),C(19,"option",37),x(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),E()()(),me(21,oDe,4,1,"div",38),C(22,"div")(23,"label"),x(24,"\u7d42\u4e86\u65e5:"),E(),C(25,"input",39),X("ngModelChange",function(r){return te(e),ne(U(2).editedTask.repeatSettings.endDate=r)}),E()(),C(26,"div")(27,"label"),x(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),E(),C(29,"input",40),X("ngModelChange",function(r){return te(e),ne(U(2).editedTask.repeatSettings.businessDaysOnly=r)}),E()(),C(30,"div")(31,"label"),x(32,"\u9664\u5916\u65e5:"),E(),C(33,"input",39),X("ngModelChange",function(r){return te(e),ne(U(2).excludeDate=r)}),E(),C(34,"button",7),X("click",function(){return te(e),ne(U(2).addExcludeDate())}),x(35,"\u8ffd\u52a0"),E(),me(36,aDe,4,1,"div",41),E()()()()}if(2&n){const e=U(2);R(8),N("ngModel",e.editedTask.repeatSettings.frequency),R(13),N("ngIf","monthlyFromEnd"===e.editedTask.repeatSettings.frequency),R(4),N("ngModel",e.editedTask.repeatSettings.endDate),R(4),N("ngModel",e.editedTask.repeatSettings.businessDaysOnly),R(4),N("ngModel",e.excludeDate),R(3),N("ngForOf",e.editedTask.repeatSettings.excludeDates)}}const cDe=function(n){return{selected:n}},uDe=function(n){return{"background-color":n}};function dDe(n,t){if(1&n){const e=We();C(0,"div",43),X("click",function(){const s=te(e).$implicit;return ne(U(2).selectColor(s))}),E()}if(2&n){const e=t.$implicit,i=U(2);N("ngClass",Jt(2,cDe,i.editedTask.tagColor===e))("ngStyle",Jt(4,uDe,e))}}function hDe(n,t){if(1&n){const e=We();C(0,"li",44)(1,"span",45),x(2),E(),C(3,"button",7),X("click",function(){const s=te(e).index;return ne(U(2).deleteSubtask(s))}),x(4,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit;R(2),Je(e.title)}}function fDe(n,t){if(1&n){const e=We();C(0,"div",3)(1,"div",4)(2,"h2",5),x(3),E(),C(4,"div",6)(5,"button",7),X("click",function(){return te(e),ne(U().saveTask())}),x(6,"\u4fdd\u5b58"),E(),C(7,"button",7),X("click",function(){return te(e),ne(U().duplicateTask())}),x(8,"\u8907\u88fd"),E(),C(9,"button",7),X("click",function(){return te(e),ne(U().cancel())}),x(10,"\u30ad\u30e3\u30f3\u30bb\u30eb"),E()()(),C(11,"div",8)(12,"span",9),x(13,"\u30bf\u30a4\u30c8\u30eb:"),E(),C(14,"span",10)(15,"input",11),X("ngModelChange",function(r){return te(e),ne(U().editedTask.title=r)}),E()()(),C(16,"div",8)(17,"span",9),x(18,"\u8aac\u660e:"),E(),C(19,"span",10)(20,"textarea",12),X("ngModelChange",function(r){return te(e),ne(U().editedTask.description=r)}),E()()(),C(21,"div",8)(22,"span",9),x(23,"\u958b\u59cb\u65e5\u6642:"),E(),C(24,"span",10)(25,"input",13),X("ngModelChange",function(r){return te(e),ne(U().editedTask.startDateTime=r)}),E()()(),C(26,"div",8)(27,"span",9),x(28,"\u7d42\u4e86\u65e5\u6642:"),E(),C(29,"span",10)(30,"input",13),X("ngModelChange",function(r){return te(e),ne(U().editedTask.endDateTime=r)}),E()()(),C(31,"div",8)(32,"span",9),x(33,"\u901a\u77e5"),E(),C(34,"span",10)(35,"input",14),X("ngModelChange",function(r){return te(e),ne(U().editedTask.reminderTime.value=r)}),E(),C(36,"select",15),X("ngModelChange",function(r){return te(e),ne(U().editedTask.reminderTime.unit=r)}),me(37,sDe,2,2,"option",16),E()()(),me(38,lDe,37,6,"div",17),C(39,"div",8)(40,"span",9),x(41,"\u512a\u5148\u5ea6:"),E(),C(42,"span",10)(43,"select",18),X("ngModelChange",function(r){return te(e),ne(U().editedTask.priority=r)}),C(44,"option",19),x(45,"\u4f4e"),E(),C(46,"option",20),x(47,"\u4e2d"),E(),C(48,"option",21),x(49,"\u9ad8"),E()()()(),C(50,"div",8)(51,"span",9),x(52,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),E(),C(53,"span",10)(54,"select",18),X("ngModelChange",function(r){return te(e),ne(U().editedTask.status=r)}),C(55,"option",22),x(56,"\u672a\u7740\u624b"),E(),C(57,"option",23),x(58,"\u9032\u884c\u4e2d"),E(),C(59,"option",24),x(60,"\u5b8c\u4e86"),E()()()(),C(61,"div",8)(62,"span",9),x(63,"\u30bf\u30b0:"),E(),C(64,"span",10)(65,"input",25),X("ngModelChange",function(r){return te(e),ne(U().editedTask.tag=r)}),E()()(),C(66,"div",8)(67,"span",9),x(68,"\u30bf\u30b0\u306e\u8272:"),E(),C(69,"span",10)(70,"div",26),me(71,dDe,1,6,"div",27),E()()(),C(72,"div",28)(73,"h6"),x(74,"\u30b5\u30d6\u30bf\u30b9\u30af"),E(),C(75,"button",7),X("click",function(){return te(e),ne(U().addSubtask())}),x(76,"\u30b5\u30d6\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E(),C(77,"ul"),me(78,hDe,5,1,"li",29),E()()()}if(2&n){const e=U();R(3),yi("",e.editedTask.title," \u306e\u8a73\u7d30"),R(12),N("ngModel",e.editedTask.title),R(5),N("ngModel",e.editedTask.description),R(5),N("ngModel",e.editedTask.startDateTime),R(5),N("ngModel",e.editedTask.endDateTime),R(5),N("ngModel",e.editedTask.reminderTime.value),R(1),N("ngModel",e.editedTask.reminderTime.unit),R(1),N("ngForOf",e.reminderUnits),R(1),N("ngIf",e.editedTask.repeatSettings),R(5),N("ngModel",e.editedTask.priority),R(11),N("ngModel",e.editedTask.status),R(11),N("ngModel",e.editedTask.tag),R(6),N("ngForOf",e.colors),R(7),N("ngForOf",e.editedTask.subtasks)}}let pDe=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.reminderService=i,this.taskSetService=r,this.dialogRef=s,this.data=o,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.excludeDate="",o&&o.task?(this.originalTask={...o.task},this.editedTask={...o.task,subtasks:[...o.task.subtasks]}):(this.editedTask={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:""},this.originalTask={...this.editedTask})}ngOnInit(){this.editedTask.reminderTime||(this.editedTask.reminderTime={value:null,unit:"\u5206"}),this.editedTask.subtasks||(this.editedTask.subtasks=[])}saveTask(){var e=this;return(0,pe.Z)(function*(){if(e.editedTask.reminderTime&&null!==e.editedTask.reminderTime.value){const i=e.calculateReminderTime({value:e.editedTask.reminderTime.value,unit:e.editedTask.reminderTime.unit});e.reminderService.setReminder(e.editedTask,i)}try{e.editedTask.id?yield e.taskSetService.updateTaskInTaskSet(e.data.taskSetId,e.editedTask):yield e.taskSetService.addTaskToTaskSet(e.data.taskSetId,e.editedTask),e.dialogRef.close(e.editedTask)}catch(i){console.error("Error updating task:",i)}})()}duplicateTask(){var e=this;return(0,pe.Z)(function*(){yield e.taskSetService.duplicateTask(e.data.taskSetId,e.editedTask),e.dialogRef.close()})()}addSubtask(){this.editedTask.subtasks||(this.editedTask.subtasks=[]);const e={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"};this.editedTask.subtasks.push(e)}deleteSubtask(e){this.editedTask.subtasks&&this.editedTask.subtasks.splice(e,1)}cancel(){this.dialogRef.close(this.originalTask)}selectColor(e){this.editedTask.tagColor=e}addExcludeDate(){this.editedTask.repeatSettings||(this.editedTask.repeatSettings={frequency:"none",businessDaysOnly:!1,excludeDates:[]}),this.editedTask.repeatSettings.excludeDates||(this.editedTask.repeatSettings.excludeDates=[]),this.excludeDate&&(this.editedTask.repeatSettings.excludeDates.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(e){this.editedTask.repeatSettings&&this.editedTask.repeatSettings.excludeDates&&(this.editedTask.repeatSettings.excludeDates=this.editedTask.repeatSettings.excludeDates.filter(i=>i!==e))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(i){return new(i||n)(G(Al),G(SP),G(kR),G(ou),G(Zp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-task-set-task-detail"]],standalone:!0,features:[Gi],decls:2,vars:2,consts:[["class","modal-overlay",4,"ngIf"],["class","task-detail-container",4,"ngIf"],[1,"modal-overlay"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","detail-row",4,"ngIf"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"subtask-container"],["class","subtask-item",4,"ngFor","ngForOf"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"],[1,"subtask-item"],[1,"subtask-title"]],template:function(i,r){1&i&&(me(0,rDe,1,0,"div",0),me(1,fDe,79,14,"div",1)),2&i&&(N("ngIf",r.editedTask),R(1),N("ngIf",r.editedTask))},dependencies:[mi,wr,Vi,Cr,Ao,Ar,iu,ru,Sr,Hp,Na,Fa,Ir,zp,dr],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}.read-only[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed}.read-only-select[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed;pointer-events:none}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})();function gDe(n,t){if(1&n&&(C(0,"option",23),x(1),E()),2&n){const e=t.$implicit;N("value",e),R(1),Je(e)}}function mDe(n,t){if(1&n){const e=We();C(0,"div",6)(1,"span",7),x(2,"\u901a\u77e5:"),E(),C(3,"span",8)(4,"input",20),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.reminderTime.value=r)}),E(),C(5,"select",21),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.reminderTime.unit=r)}),me(6,gDe,2,2,"option",22),E()()()}if(2&n){const e=U(2);R(4),N("ngModel",e.newTask.reminderTime.value),R(1),N("ngModel",e.newTask.reminderTime.unit),R(1),N("ngForOf",e.reminderUnits)}}function _De(n,t){if(1&n){const e=We();C(0,"div")(1,"label"),x(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),E(),C(3,"input",35),X("ngModelChange",function(r){return te(e),ne(U(3).newTask.repeatSettings.daysOffsetFromEnd=r)}),E()()}if(2&n){const e=U(3);R(3),N("ngModel",e.newTask.repeatSettings.daysOffsetFromEnd)}}function yDe(n,t){if(1&n){const e=We();C(0,"div"),x(1),C(2,"button",5),X("click",function(){const s=te(e).$implicit;return ne(U(3).removeExcludeDate(s))}),x(3,"\u524a\u9664"),E()()}if(2&n){const e=t.$implicit;R(1),yi(" ",e," ")}}function vDe(n,t){if(1&n){const e=We();C(0,"div",6)(1,"span",7),x(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),E(),C(3,"span",8)(4,"div",24)(5,"div")(6,"label"),x(7,"\u983b\u5ea6:"),E(),C(8,"select",13),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.repeatSettings.frequency=r)}),C(9,"option",25),x(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),E(),C(11,"option",26),x(12,"\u6bce\u65e5"),E(),C(13,"option",27),x(14,"\u6bce\u9031"),E(),C(15,"option",28),x(16,"\u6bce\u6708"),E(),C(17,"option",29),x(18,"\u6bce\u5e74"),E(),C(19,"option",30),x(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),E()()(),me(21,_De,4,1,"div",31),C(22,"div")(23,"label"),x(24,"\u7d42\u4e86\u65e5:"),E(),C(25,"input",32),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.repeatSettings.endDate=r)}),E()(),C(26,"div")(27,"label"),x(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),E(),C(29,"input",33),X("ngModelChange",function(r){return te(e),ne(U(2).newTask.repeatSettings.businessDaysOnly=r)}),E()(),C(30,"div")(31,"label"),x(32,"\u9664\u5916\u65e5:"),E(),C(33,"input",32),X("ngModelChange",function(r){return te(e),ne(U(2).excludeDate=r)}),E(),C(34,"button",5),X("click",function(){return te(e),ne(U(2).addExcludeDate())}),x(35,"\u8ffd\u52a0"),E(),me(36,yDe,4,1,"div",34),E()()()()}if(2&n){const e=U(2);R(8),N("ngModel",e.newTask.repeatSettings.frequency),R(13),N("ngIf","monthlyFromEnd"===e.newTask.repeatSettings.frequency),R(4),N("ngModel",e.newTask.repeatSettings.endDate),R(4),N("ngModel",e.newTask.repeatSettings.businessDaysOnly),R(4),N("ngModel",e.excludeDate),R(3),N("ngForOf",e.newTask.repeatSettings.excludeDates)}}const bDe=function(n){return{selected:n}},wDe=function(n){return{"background-color":n}};function CDe(n,t){if(1&n){const e=We();C(0,"div",36),X("click",function(){const s=te(e).$implicit;return ne(U(2).selectColor(s))}),E()}if(2&n){const e=t.$implicit,i=U(2);N("ngClass",Jt(2,bDe,i.newTask.tagColor===e))("ngStyle",Jt(4,wDe,e))}}function EDe(n,t){if(1&n){const e=We();C(0,"div",1)(1,"div",2)(2,"h2",3),x(3,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E(),C(4,"div",4)(5,"button",5),X("click",function(){return te(e),ne(U().saveTask())}),x(6,"\u4fdd\u5b58"),E(),C(7,"button",5),X("click",function(){return te(e),ne(U().cancel())}),x(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),E()()(),C(9,"div",6)(10,"span",7),x(11,"\u30bf\u30a4\u30c8\u30eb:"),E(),C(12,"span",8)(13,"input",9),X("ngModelChange",function(r){return te(e),ne(U().newTask.title=r)}),E()()(),C(14,"div",6)(15,"span",7),x(16,"\u8aac\u660e:"),E(),C(17,"span",8)(18,"textarea",10),X("ngModelChange",function(r){return te(e),ne(U().newTask.description=r)}),E()()(),C(19,"div",6)(20,"span",7),x(21,"\u958b\u59cb\u65e5\u6642:"),E(),C(22,"span",8)(23,"input",11),X("ngModelChange",function(r){return te(e),ne(U().newTask.startDateTime=r)}),E()()(),C(24,"div",6)(25,"span",7),x(26,"\u7d42\u4e86\u65e5\u6642:"),E(),C(27,"span",8)(28,"input",11),X("ngModelChange",function(r){return te(e),ne(U().newTask.endDateTime=r)}),E()()(),me(29,mDe,7,3,"div",12),me(30,vDe,37,6,"div",12),C(31,"div",6)(32,"span",7),x(33,"\u512a\u5148\u5ea6:"),E(),C(34,"span",8)(35,"select",13),X("ngModelChange",function(r){return te(e),ne(U().newTask.priority=r)}),C(36,"option",14),x(37,"\u4f4e"),E(),C(38,"option",15),x(39,"\u4e2d"),E(),C(40,"option",16),x(41,"\u9ad8"),E()()()(),C(42,"div",6)(43,"span",7),x(44,"\u30bf\u30b0:"),E(),C(45,"span",8)(46,"input",17),X("ngModelChange",function(r){return te(e),ne(U().newTask.tag=r)}),E()()(),C(47,"div",6)(48,"span",7),x(49,"\u30bf\u30b0\u306e\u8272:"),E(),C(50,"span",8)(51,"div",18),me(52,CDe,1,6,"div",19),E()()()()}if(2&n){const e=U();R(13),N("ngModel",e.newTask.title),R(5),N("ngModel",e.newTask.description),R(5),N("ngModel",e.newTask.startDateTime),R(5),N("ngModel",e.newTask.endDateTime),R(1),N("ngIf",e.newTask.reminderTime),R(1),N("ngIf",e.newTask.repeatSettings),R(5),N("ngModel",e.newTask.priority),R(11),N("ngModel",e.newTask.tag),R(6),N("ngForOf",e.colors)}}let DDe=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this.taskSetService=i,this.data=r,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.excludeDate="",this.newTask={id:"",title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",daysOffsetFromEnd:1,endDate:"",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:0,unit:"\u5206"},userId:""}}ngOnInit(){const e=this.taskSetService.getCurrentUserId();e&&(this.newTask.userId=e)}saveTask(){var e=this;return(0,pe.Z)(function*(){try{yield e.taskSetService.addTaskToTaskSet(e.data.taskSetId,e.newTask),e.dialogRef.close(e.newTask)}catch(i){console.error("Failed to save task:",i)}})()}cancel(){this.dialogRef.close()}selectColor(e){this.newTask.tagColor=e}addExcludeDate(){this.excludeDate&&(this.newTask.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(e){this.newTask.repeatSettings?.excludeDates&&(this.newTask.repeatSettings.excludeDates=this.newTask.repeatSettings.excludeDates.filter(i=>i!==e))}static#e=this.\u0275fac=function(i){return new(i||n)(G(ou),G(kR),G(Zp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-task-set-add"]],standalone:!0,features:[Gi],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"]],template:function(i,r){1&i&&me(0,EDe,53,9,"div",0),2&i&&N("ngIf",r.newTask)},dependencies:[mi,wr,Vi,Cr,Ao,Ar,iu,ru,Sr,Hp,Na,Fa,Ir,zp,dr]})}return n})(),TDe=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i,this.userId=null,this.authService.user$.subscribe(r=>{this.userId=r?.uid||null})}getUserIntervalSetsCollection(){if(!this.userId)throw new Error("User ID is not available");return this.firestore.collection(`users/${this.userId}/intervalSets`)}getIntervalSets(){return this.getUserIntervalSetsCollection().valueChanges({idField:"id"})}createIntervalSet(e){return this.getUserIntervalSetsCollection().add(e)}updateIntervalSet(e){return this.getUserIntervalSetsCollection().doc(e.id).update(e)}deleteIntervalSet(e){return this.getUserIntervalSetsCollection().doc(e.id).delete()}waitForUserId(){return new Promise((e,i)=>{if(this.userId)e();else{const r=this.authService.user$.subscribe(s=>{s?.uid&&(this.userId=s.uid,r.unsubscribe(),e())})}})}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Pa),ie(ao))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SDe(n,t){if(1&n){const e=We();C(0,"li",14)(1,"div",15)(2,"input",7),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)}),E(),C(3,"a",16),X("click",function(){const s=te(e).$implicit;return ne(U(3).openTaskDetailDialog(s))}),C(4,"div",17),x(5),E(),C(6,"div",18)(7,"span",19),x(8),E(),C(9,"span",20),x(10),E(),C(11,"span",21),x(12),qt(13,"date"),E(),C(14,"span",22),x(15),qt(16,"date"),E(),C(17,"span",23),x(18),E(),dn(19,"span",24),E()()()()}if(2&n){const e=t.$implicit,i=U(3);R(2),N("ngModel",e.selected),R(3),Je(e.title),R(3),Je(e.status),R(1),N("ngClass",e.priority),R(1),Je(i.getPriorityLabel(e.priority)),R(2),Je(Yn(13,10,e.startDateTime,"short")),R(3),Je(Yn(16,13,e.endDateTime,"short")),R(3),Je(e.tag),R(1),_s("background-color",e.tagColor)}}function IDe(n,t){if(1&n&&(C(0,"ul",9)(1,"li",10)(2,"div",11)(3,"span",12),x(4,"\u9078\u629e"),E(),C(5,"span",12),x(6,"\u30bf\u30a4\u30c8\u30eb"),E(),C(7,"span",12),x(8,"\u30b9\u30c6\u30fc\u30bf\u30b9"),E(),C(9,"span",12),x(10,"\u512a\u5148\u5ea6"),E(),C(11,"span",12),x(12,"\u958b\u59cb\u65e5\u6642"),E(),C(13,"span",12),x(14,"\u7d42\u4e86\u65e5\u6642"),E(),C(15,"span",12),x(16,"\u30bf\u30b0"),E(),C(17,"span",12),x(18,"\u30bf\u30b0\u306e\u8272"),E()()(),me(19,SDe,20,16,"li",13),E()),2&n){const e=U(2);R(19),N("ngForOf",e.tasks)}}function ADe(n,t){if(1&n){const e=We();C(0,"div")(1,"div",6)(2,"input",7),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)}),E(),C(3,"h3",3),X("click",function(){const s=te(e).$implicit;return ne(U().selectTaskSet(s))}),x(4),E(),C(5,"button",3),X("click",function(){const s=te(e).$implicit;return ne(U().openAddTaskToSetDialog(s))}),x(6,"\uff0b\u30bb\u30c3\u30c8\u306b\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),E(),C(7,"button",3),X("click",function(){const s=te(e).$implicit;return ne(U().deleteTaskSet(s))}),x(8,"\u524a\u9664"),E()(),me(9,IDe,20,1,"ul",8),E()}if(2&n){const e=t.$implicit,i=U();R(2),N("ngModel",e.selected),R(2),Je(e.name),R(5),N("ngIf",i.selectedTaskSet&&i.selectedTaskSet.id===e.id)}}function xDe(n,t){if(1&n){const e=We();C(0,"div")(1,"div",25)(2,"input",26),X("ngModelChange",function(r){return ne(te(e).$implicit.selected=r)}),E(),C(3,"h3",3),X("click",function(){const s=te(e).$implicit;return ne(U().selectIntervalSet(s))}),x(4),E(),C(5,"button",3),X("click",function(){const s=te(e).$implicit;return ne(U().deleteIntervalSet(s))}),x(6,"\u524a\u9664"),E()()()}if(2&n){const e=t.$implicit;R(2),N("ngModel",e.selected),R(2),Je(e.name)}}const kDe=[{path:"",redirectTo:"/calendar",pathMatch:"full"},{path:"calendar",component:Cye,canActivate:[xl]},{path:"projects",component:$ye,canActivate:[xl]},{path:"project/:id",component:K$,canActivate:[xl]},{path:"tasks",component:_8,canActivate:[xl]},{path:"task/:id",component:Yy,canActivate:[xl]},{path:"login",component:Ive},{path:"register",component:kve},{path:"reset-password",component:Pve},{path:"profile",component:Rve,canActivate:[xl]},{path:"user-search",component:Lve,canActivate:[xl]},{path:"project-progress",component:iDe,canActivate:[xl]},{path:"task-sets",component:(()=>{class n{constructor(e,i,r){this.taskSetService=e,this.intervalSetService=i,this.dialog=r,this.taskSets=[],this.intervalSets=[],this.newTaskSetName="",this.newIntervalSetName="",this.selectedTaskSetId=null,this.selectedTaskSet=null,this.selectedIntervalSet=null,this.tasks=[]}ngOnInit(){Promise.all([this.taskSetService.waitForUserId(),this.intervalSetService.waitForUserId()]).then(()=>{this.loadTaskSets(),this.loadIntervalSets()})}loadTaskSets(){this.taskSetService.getTaskSets().subscribe(e=>{this.taskSets=e,this.selectedTaskSetId&&(this.selectedTaskSet=this.taskSets.find(i=>i.id===this.selectedTaskSetId)||null,this.selectedTaskSet&&this.loadTasksForTaskSet(this.selectedTaskSet.id))})}loadIntervalSets(){this.intervalSetService.getIntervalSets().subscribe(e=>{this.intervalSets=e})}createTaskSet(){this.taskSetService.createTaskSet({id:"",name:this.newTaskSetName,tasks:[]}).then(()=>{this.newTaskSetName="",this.loadTaskSets()})}deleteTaskSet(e){this.taskSetService.deleteTaskSet(e).then(()=>{this.loadTaskSets()})}selectTaskSet(e){this.selectedTaskSet=e,this.loadTasksForTaskSet(e.id)}loadTasksForTaskSet(e){this.taskSetService.getTasksForTaskSet(e).subscribe(i=>{this.tasks=i})}openAddTaskToSetDialog(e){this.dialog.open(DDe,{width:"400px",data:{taskSetId:e.id}}).afterClosed().subscribe(r=>{r&&this.loadTasksForTaskSet(e.id)})}openTaskDetailDialog(e){this.dialog.open(pDe,{width:"600px",data:{task:e,taskSetId:this.selectedTaskSet?.id}}).afterClosed().subscribe(r=>{r&&this.selectedTaskSet&&this.loadTasksForTaskSet(this.selectedTaskSet.id)})}createIntervalSet(){this.intervalSetService.createIntervalSet({id:"",name:this.newIntervalSetName,intervals:[]}).then(()=>{this.newIntervalSetName="",this.loadIntervalSets()})}deleteIntervalSet(e){this.intervalSetService.deleteIntervalSet(e).then(()=>{this.loadIntervalSets()})}selectIntervalSet(e){this.selectedIntervalSet=e}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}static#e=this.\u0275fac=function(i){return new(i||n)(G(kR),G(TDe),G(Kp))};static#t=this.\u0275cmp=kt({type:n,selectors:[["app-task-set"]],standalone:!0,features:[Gi],decls:11,vars:4,consts:[[1,"task-list-container"],[1,"task-actions"],["type","text","placeholder","\u65b0\u3057\u3044\u30bf\u30b9\u30af\u30bb\u30c3\u30c8\u306e\u540d\u524d",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["type","text","placeholder","\u65b0\u3057\u3044\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30bb\u30c3\u30c8\u306e\u540d\u524d",3,"ngModel","ngModelChange"],[1,"task-set-header"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],["class","task-list",4,"ngIf"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-item"],[1,"task-item-content"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],[1,"project-header"],["type","checkbox",1,"project-checkbox",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(C(0,"div",0)(1,"div",1)(2,"input",2),X("ngModelChange",function(o){return r.newTaskSetName=o}),E(),C(3,"button",3),X("click",function(){return r.createTaskSet()}),x(4,"\u30bf\u30b9\u30af\u30bb\u30c3\u30c8\u4f5c\u6210"),E()(),me(5,ADe,10,3,"div",4),C(6,"div",1)(7,"input",5),X("ngModelChange",function(o){return r.newIntervalSetName=o}),E(),C(8,"button",3),X("click",function(){return r.createIntervalSet()}),x(9,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30bb\u30c3\u30c8\u4f5c\u6210"),E()(),me(10,xDe,7,2,"div",4),E()),2&i&&(R(2),N("ngModel",r.newTaskSetName),R(3),N("ngForOf",r.taskSets),R(2),N("ngModel",r.newIntervalSetName),R(3),N("ngForOf",r.intervalSets))},dependencies:[mi,wr,Vi,Cr,u_,Ar,Sr,Na,Ir,dr],styles:[".task-set-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}button[_ngcontent-%COMP%]{margin:10px 5px 0 0;padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#bbb}h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:10px 0}ul[_ngcontent-%COMP%]{padding-left:20px;margin:5px 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin:10px 0}.search-container[_ngcontent-%COMP%]{display:flex;gap:5px;margin:10px 0}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px;border-radius:5px;border:1px solid #ccc}.add-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin:10px 0}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-start-date[_ngcontent-%COMP%], .task-end-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%], .task-tag-color[_ngcontent-%COMP%]{text-align:center;margin-left:10px}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}"]})}return n})(),canActivate:[xl]}];(function Tte(n,t){return jX({rootComponent:n,...T3(t)})})(fce,{providers:[wN(cde,Ar,Yfe,wpe,(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Yt({imports:[Mc.forRoot(kDe),Mc]})}return n})(),P$.forRoot({provide:rh,useFactory:W$}),Pre.initializeApp({apiKey:"AIzaSyBLib--Lb3kRU1UORbEgx76QxXWLr8rFZk",authDomain:"nozuki3rd.firebaseapp.com",projectId:"nozuki3rd",storageBucket:"nozuki3rd.appspot.com",messagingSenderId:"183357457685",appId:"1:183357457685:web:01b4a530cc30b2b310d51c"}),oce)]}).catch(n=>console.error(n))},106:(Fo,Xi,wt)=>{wt.d(Xi,{Z:()=>er});var B=wt(58),ht=wt(537),Ze=wt(534),ve=wt(879);class Et{constructor(gt,Dt){this._delegate=gt,this.firebase=Dt,(0,Ze._addComponent)(gt,new ht.wA("app-compat",()=>this,"PUBLIC")),this.container=gt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this._delegate.automaticDataCollectionEnabled=gt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(gt=>{this._delegate.checkDestroyed(),gt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ze.deleteApp)(this._delegate)))}_getService(gt,Dt=Ze._DEFAULT_ENTRY_NAME){var tr;this._delegate.checkDestroyed();const nr=this._delegate.container.getProvider(gt);return!nr.isInitialized()&&"EXPLICIT"===(null===(tr=nr.getComponent())||void 0===tr?void 0:tr.instantiationMode)&&nr.initialize(),nr.getImmediate({identifier:Dt})}_removeServiceInstance(gt,Dt=Ze._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(gt).clearInstance(Dt)}_addComponent(gt){(0,Ze._addComponent)(this._delegate,gt)}_addOrOverwriteComponent(gt){(0,Ze._addOrOverwriteComponent)(this._delegate,gt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ri=new B.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),De=function Bt(){const tn=function Ji(tn){const gt={},Dt={__esModule:!0,initializeApp:function Vn(ot,di={}){const Sn=Ze.initializeApp(ot,di);if((0,B.r3)(gt,Sn.name))return gt[Sn.name];const Ae=new tn(Sn,Dt);return gt[Sn.name]=Ae,Ae},app:nr,registerVersion:Ze.registerVersion,setLogLevel:Ze.setLogLevel,onLog:Ze.onLog,apps:null,SDK_VERSION:Ze.SDK_VERSION,INTERNAL:{registerComponent:function vn(ot){const di=ot.name,Sn=di.replace("-compat","");if(Ze._registerComponent(ot)&&"PUBLIC"===ot.type){const Ae=(qn=nr())=>{if("function"!=typeof qn[Sn])throw ri.create("invalid-app-argument",{appName:di});return qn[Sn]()};void 0!==ot.serviceProps&&(0,B.ZB)(Ae,ot.serviceProps),Dt[Sn]=Ae,tn.prototype[Sn]=function(...qn){return this._getService.bind(this,di).apply(this,ot.multipleInstances?qn:[])}}return"PUBLIC"===ot.type?Dt[Sn]:null},removeApp:function tr(ot){delete gt[ot]},useAsService:function kr(ot,di){return"serverAuth"===di?null:di},modularAPIs:Ze}};function nr(ot){if(!(0,B.r3)(gt,ot=ot||Ze._DEFAULT_ENTRY_NAME))throw ri.create("no-app",{appName:ot});return gt[ot]}return Dt.default=Dt,Object.defineProperty(Dt,"apps",{get:function nn(){return Object.keys(gt).map(ot=>gt[ot])}}),nr.App=tn,Dt}(Et);return tn.INTERNAL=Object.assign(Object.assign({},tn.INTERNAL),{createFirebaseNamespace:Bt,extendNamespace:function gt(Dt){(0,B.ZB)(tn,Dt)},createSubscribe:B.ne,ErrorFactory:B.LL,deepExtend:B.ZB}),tn}(),Pe=new ve.Yd("@firebase/app-compat");if((0,B.jU)()&&void 0!==self.firebase){Pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tn=self.firebase.SDK_VERSION;tn&&tn.indexOf("LITE")>=0&&Pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const er=De;!function Xt(tn){(0,Ze.registerVersion)("@firebase/app-compat","0.2.35",tn)}()},534:(Fo,Xi,wt)=>{wt.r(Xi),wt.d(Xi,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>$r,_DEFAULT_ENTRY_NAME:()=>Zs,_addComponent:()=>Ys,_addOrOverwriteComponent:()=>In,_apps:()=>Hr,_clearComponents:()=>zr,_components:()=>Si,_getProvider:()=>Ii,_isFirebaseApp:()=>ra,_isFirebaseServerApp:()=>Wl,_registerComponent:()=>xs,_removeServiceInstance:()=>Tu,_serverApps:()=>Ks,deleteApp:()=>oa,getApp:()=>Gl,getApps:()=>Su,initializeApp:()=>sa,initializeServerApp:()=>Ch,onLog:()=>ee,registerVersion:()=>Y,setLogLevel:()=>be});var B=wt(861),ht=wt(537),Ze=wt(879),ve=wt(58);const Et=(H,ae)=>ae.some(ue=>H instanceof ue);let Wn,ri;const De=new WeakMap,Pe=new WeakMap,tt=new WeakMap,Ot=new WeakMap,Xt=new WeakMap;let gt={get(H,ae,ue){if(H instanceof IDBTransaction){if("done"===ae)return Pe.get(H);if("objectStoreNames"===ae)return H.objectStoreNames||tt.get(H);if("store"===ae)return ue.objectStoreNames[1]?void 0:ue.objectStore(ue.objectStoreNames[0])}return Vn(H[ae])},set:(H,ae,ue)=>(H[ae]=ue,!0),has:(H,ae)=>H instanceof IDBTransaction&&("done"===ae||"store"===ae)||ae in H};function nr(H){return"function"==typeof H?function tr(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Bt(){return ri||(ri=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...ae){return H.apply(nn(this),ae),Vn(De.get(this))}:function(...ae){return Vn(H.apply(nn(this),ae))}:function(ae,...ue){const xe=H.call(nn(this),ae,...ue);return tt.set(xe,ae.sort?ae.sort():[ae]),Vn(xe)}}(H):(H instanceof IDBTransaction&&function tn(H){if(Pe.has(H))return;const ae=new Promise((ue,xe)=>{const mt=()=>{H.removeEventListener("complete",yt),H.removeEventListener("error",xt),H.removeEventListener("abort",xt)},yt=()=>{ue(),mt()},xt=()=>{xe(H.error||new DOMException("AbortError","AbortError")),mt()};H.addEventListener("complete",yt),H.addEventListener("error",xt),H.addEventListener("abort",xt)});Pe.set(H,ae)}(H),Et(H,function Ji(){return Wn||(Wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,gt):H)}function Vn(H){if(H instanceof IDBRequest)return function er(H){const ae=new Promise((ue,xe)=>{const mt=()=>{H.removeEventListener("success",yt),H.removeEventListener("error",xt)},yt=()=>{ue(Vn(H.result)),mt()},xt=()=>{xe(H.error),mt()};H.addEventListener("success",yt),H.addEventListener("error",xt)});return ae.then(ue=>{ue instanceof IDBCursor&&De.set(ue,H)}).catch(()=>{}),Xt.set(ae,H),ae}(H);if(Ot.has(H))return Ot.get(H);const ae=nr(H);return ae!==H&&(Ot.set(H,ae),Xt.set(ae,H)),ae}const nn=H=>Xt.get(H),ot=["get","getKey","getAll","getAllKeys","count"],di=["put","add","delete","clear"],Sn=new Map;function Ae(H,ae){if(!(H instanceof IDBDatabase)||ae in H||"string"!=typeof ae)return;if(Sn.get(ae))return Sn.get(ae);const ue=ae.replace(/FromIndex$/,""),xe=ae!==ue,mt=di.includes(ue);if(!(ue in(xe?IDBIndex:IDBObjectStore).prototype)||!mt&&!ot.includes(ue))return;const yt=function(){var xt=(0,B.Z)(function*(An,...Nt){const ks=this.transaction(An,mt?"readwrite":"readonly");let Ga=ks.store;return xe&&(Ga=Ga.index(Nt.shift())),(yield Promise.all([Ga[ue](...Nt),mt&&ks.done]))[0]});return function(Nt){return xt.apply(this,arguments)}}();return Sn.set(ae,yt),yt}!function Dt(H){gt=H(gt)}(H=>({...H,get:(ae,ue,xe)=>Ae(ae,ue)||H.get(ae,ue,xe),has:(ae,ue)=>!!Ae(ae,ue)||H.has(ae,ue)}));class qn{constructor(ae){this.container=ae}getPlatformInfoString(){return this.container.getProviders().map(ue=>{if(function Nn(H){const ae=H.getComponent();return"VERSION"===ae?.type}(ue)){const xe=ue.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(ue=>ue).join(" ")}}const fs="@firebase/app",Is="0.10.5",pt=new Ze.Yd("@firebase/app"),Zs="[DEFAULT]",Du={[fs]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Hr=new Map,Ks=new Map,Si=new Map;function Ys(H,ae){try{H.container.addComponent(ae)}catch(ue){pt.debug(`Component ${ae.name} failed to register with FirebaseApp ${H.name}`,ue)}}function In(H,ae){H.container.addOrOverwriteComponent(ae)}function xs(H){const ae=H.name;if(Si.has(ae))return pt.debug(`There were multiple attempts to register component ${ae}.`),!1;Si.set(ae,H);for(const ue of Hr.values())Ys(ue,H);for(const ue of Ks.values())Ys(ue,H);return!0}function Ii(H,ae){const ue=H.container.getProvider("heartbeat").getImmediate({optional:!0});return ue&&ue.triggerHeartbeat(),H.container.getProvider(ae)}function Tu(H,ae,ue=Zs){Ii(H,ae).clearInstance(ue)}function ra(H){return void 0!==H.options}function Wl(H){return void 0!==H.settings}function zr(){Si.clear()}const Ai=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ql{constructor(ae,ue,xe){this._isDeleted=!1,this._options=Object.assign({},ae),this._config=Object.assign({},ue),this._name=ue.name,this._automaticDataCollectionEnabled=ue.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new ht.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ae){this._isDeleted=ae}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}class ps extends ql{constructor(ae,ue,xe,mt){const yt=void 0!==ue.automaticDataCollectionEnabled&&ue.automaticDataCollectionEnabled,xt={name:xe,automaticDataCollectionEnabled:yt};super(void 0!==ae.apiKey?ae:ae.options,xt,mt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:yt},ue),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ue.releaseOnDeref=void 0,Y(fs,Is,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(ae){this.isDeleted||(this._refCount++,void 0!==ae&&this._finalizationRegistry.register(ae,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){oa(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ai.create("server-app-deleted")}}const $r="10.12.2";function sa(H,ae={}){let ue=H;"object"!=typeof ae&&(ae={name:ae});const xe=Object.assign({name:Zs,automaticDataCollectionEnabled:!1},ae),mt=xe.name;if("string"!=typeof mt||!mt)throw Ai.create("bad-app-name",{appName:String(mt)});if(ue||(ue=(0,ve.aH)()),!ue)throw Ai.create("no-options");const yt=Hr.get(mt);if(yt){if((0,ve.vZ)(ue,yt.options)&&(0,ve.vZ)(xe,yt.config))return yt;throw Ai.create("duplicate-app",{appName:mt})}const xt=new ht.H0(mt);for(const Nt of Si.values())xt.addComponent(Nt);const An=new ql(ue,xe,xt);return Hr.set(mt,An),An}function Ch(H,ae){if((0,ve.jU)())throw Ai.create("invalid-server-app-environment");let ue;void 0===ae.automaticDataCollectionEnabled&&(ae.automaticDataCollectionEnabled=!1),ue=ra(H)?H.options:H;const xe=Object.assign(Object.assign({},ae),ue);if(void 0!==xe.releaseOnDeref&&delete xe.releaseOnDeref,void 0!==ae.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ai.create("finalization-registry-not-supported",{});const yt=""+(ks=JSON.stringify(xe),[...ks].reduce((Ga,Nv)=>Math.imul(31,Ga)+Nv.charCodeAt(0)|0,0)),xt=Ks.get(yt);var ks;if(xt)return xt.incRefCount(ae.releaseOnDeref),xt;const An=new ht.H0(yt);for(const ks of Si.values())An.addComponent(ks);const Nt=new ps(ue,ae,yt,An);return Ks.set(yt,Nt),Nt}function Gl(H=Zs){const ae=Hr.get(H);if(!ae&&H===Zs&&(0,ve.aH)())return sa();if(!ae)throw Ai.create("no-app",{appName:H});return ae}function Su(){return Array.from(Hr.values())}function oa(H){return J.apply(this,arguments)}function J(){return(J=(0,B.Z)(function*(H){let ae=!1;const ue=H.name;Hr.has(ue)?(ae=!0,Hr.delete(ue)):Ks.has(ue)&&H.decRefCount()<=0&&(Ks.delete(ue),ae=!0),ae&&(yield Promise.all(H.container.getProviders().map(xe=>xe.delete())),H.isDeleted=!0)})).apply(this,arguments)}function Y(H,ae,ue){var xe;let mt=null!==(xe=Du[H])&&void 0!==xe?xe:H;ue&&(mt+=`-${ue}`);const yt=mt.match(/\s|\//),xt=ae.match(/\s|\//);if(yt||xt){const An=[`Unable to register library "${mt}" with version "${ae}":`];return yt&&An.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),yt&&xt&&An.push("and"),xt&&An.push(`version name "${ae}" contains illegal characters (whitespace or "/")`),void pt.warn(An.join(" "))}xs(new ht.wA(`${mt}-version`,()=>({library:mt,version:ae}),"VERSION"))}function ee(H,ae){if(null!==H&&"function"!=typeof H)throw Ai.create("invalid-log-argument");(0,Ze.Am)(H,ae)}function be(H){(0,Ze.Ub)(H)}const le="firebase-heartbeat-database",we=1,et="firebase-heartbeat-store";let un=null;function lt(){return un||(un=function vn(H,ae,{blocked:ue,upgrade:xe,blocking:mt,terminated:yt}={}){const xt=indexedDB.open(H,ae),An=Vn(xt);return xe&&xt.addEventListener("upgradeneeded",Nt=>{xe(Vn(xt.result),Nt.oldVersion,Nt.newVersion,Vn(xt.transaction),Nt)}),ue&&xt.addEventListener("blocked",Nt=>ue(Nt.oldVersion,Nt.newVersion,Nt)),An.then(Nt=>{yt&&Nt.addEventListener("close",()=>yt()),mt&&Nt.addEventListener("versionchange",ks=>mt(ks.oldVersion,ks.newVersion,ks))}).catch(()=>{}),An}(le,we,{upgrade:(H,ae)=>{if(0===ae)try{H.createObjectStore(et)}catch(ue){console.warn(ue)}}}).catch(H=>{throw Ai.create("idb-open",{originalErrorMessage:H.message})})),un}function ki(){return(ki=(0,B.Z)(function*(H){try{const ue=(yield lt()).transaction(et),xe=yield ue.objectStore(et).get(bn(H));return yield ue.done,xe}catch(ae){if(ae instanceof ve.ZR)pt.warn(ae.message);else{const ue=Ai.create("idb-get",{originalErrorMessage:ae?.message});pt.warn(ue.message)}}})).apply(this,arguments)}function Qe(H,ae){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,B.Z)(function*(H,ae){try{const xe=(yield lt()).transaction(et,"readwrite");yield xe.objectStore(et).put(ae,bn(H)),yield xe.done}catch(ue){if(ue instanceof ve.ZR)pt.warn(ue.message);else{const xe=Ai.create("idb-set",{originalErrorMessage:ue?.message});pt.warn(xe.message)}}})).apply(this,arguments)}function bn(H){return`${H.name}!${H.options.appId}`}class fn{constructor(ae){this.container=ae,this._heartbeatsCache=null;const ue=this.container.getProvider("app").getImmediate();this._storage=new Zl(ue),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var ae=this;return(0,B.Z)(function*(){var ue,xe;const yt=ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=ct();if((null!=(null===(ue=ae._heartbeatsCache)||void 0===ue?void 0:ue.heartbeats)||(ae._heartbeatsCache=yield ae._heartbeatsCachePromise,null!=(null===(xe=ae._heartbeatsCache)||void 0===xe?void 0:xe.heartbeats)))&&ae._heartbeatsCache.lastSentHeartbeatDate!==xt&&!ae._heartbeatsCache.heartbeats.some(An=>An.date===xt))return ae._heartbeatsCache.heartbeats.push({date:xt,agent:yt}),ae._heartbeatsCache.heartbeats=ae._heartbeatsCache.heartbeats.filter(An=>{const Nt=new Date(An.date).valueOf();return Date.now()-Nt<=2592e6}),ae._storage.overwrite(ae._heartbeatsCache)})()}getHeartbeatsHeader(){var ae=this;return(0,B.Z)(function*(){var ue;if(null===ae._heartbeatsCache&&(yield ae._heartbeatsCachePromise),null==(null===(ue=ae._heartbeatsCache)||void 0===ue?void 0:ue.heartbeats)||0===ae._heartbeatsCache.heartbeats.length)return"";const xe=ct(),{heartbeatsToSend:mt,unsentEntries:yt}=function Lo(H,ae=1024){const ue=[];let xe=H.slice();for(const mt of H){const yt=ue.find(xt=>xt.agent===mt.agent);if(yt){if(yt.dates.push(mt.date),Eh(ue)>ae){yt.dates.pop();break}}else if(ue.push({agent:mt.agent,dates:[mt.date]}),Eh(ue)>ae){ue.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:ue,unsentEntries:xe}}(ae._heartbeatsCache.heartbeats),xt=(0,ve.L)(JSON.stringify({version:2,heartbeats:mt}));return ae._heartbeatsCache.lastSentHeartbeatDate=xe,yt.length>0?(ae._heartbeatsCache.heartbeats=yt,yield ae._storage.overwrite(ae._heartbeatsCache)):(ae._heartbeatsCache.heartbeats=[],ae._storage.overwrite(ae._heartbeatsCache)),xt})()}}function ct(){return(new Date).toISOString().substring(0,10)}class Zl{constructor(ae){this.app=ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,B.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ae=this;return(0,B.Z)(function*(){if(yield ae._canUseIndexedDBPromise){const xe=yield function xi(H){return ki.apply(this,arguments)}(ae.app);return xe?.heartbeats?xe:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ae){var ue=this;return(0,B.Z)(function*(){var xe;if(yield ue._canUseIndexedDBPromise){const yt=yield ue.read();return Qe(ue.app,{lastSentHeartbeatDate:null!==(xe=ae.lastSentHeartbeatDate)&&void 0!==xe?xe:yt.lastSentHeartbeatDate,heartbeats:ae.heartbeats})}})()}add(ae){var ue=this;return(0,B.Z)(function*(){var xe;if(yield ue._canUseIndexedDBPromise){const yt=yield ue.read();return Qe(ue.app,{lastSentHeartbeatDate:null!==(xe=ae.lastSentHeartbeatDate)&&void 0!==xe?xe:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...ae.heartbeats]})}})()}}function Eh(H){return(0,ve.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Vo(H){xs(new ht.wA("platform-logger",ae=>new qn(ae),"PRIVATE")),xs(new ht.wA("heartbeat",ae=>new fn(ae),"PRIVATE")),Y(fs,Is,H),Y(fs,Is,"esm2017"),Y("fire-js","")}("")},537:(Fo,Xi,wt)=>{wt.d(Xi,{H0:()=>Ji,wA:()=>Ze});var B=wt(861),ht=wt(58);class Ze{constructor(De,Pe,tt){this.name=De,this.instanceFactory=Pe,this.type=tt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(De){return this.instantiationMode=De,this}setMultipleInstances(De){return this.multipleInstances=De,this}setServiceProps(De){return this.serviceProps=De,this}setInstanceCreatedCallback(De){return this.onInstanceCreated=De,this}}const ve="[DEFAULT]";class Et{constructor(De,Pe){this.name=De,this.container=Pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(De){const Pe=this.normalizeInstanceIdentifier(De);if(!this.instancesDeferred.has(Pe)){const tt=new ht.BH;if(this.instancesDeferred.set(Pe,tt),this.isInitialized(Pe)||this.shouldAutoInitialize())try{const Ot=this.getOrInitializeService({instanceIdentifier:Pe});Ot&&tt.resolve(Ot)}catch{}}return this.instancesDeferred.get(Pe).promise}getImmediate(De){var Pe;const tt=this.normalizeInstanceIdentifier(De?.identifier),Ot=null!==(Pe=De?.optional)&&void 0!==Pe&&Pe;if(!this.isInitialized(tt)&&!this.shouldAutoInitialize()){if(Ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:tt})}catch(Xt){if(Ot)return null;throw Xt}}getComponent(){return this.component}setComponent(De){if(De.name!==this.name)throw Error(`Mismatching Component ${De.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=De,this.shouldAutoInitialize()){if(function ri(Bt){return"EAGER"===Bt.instantiationMode}(De))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[Pe,tt]of this.instancesDeferred.entries()){const Ot=this.normalizeInstanceIdentifier(Pe);try{const Xt=this.getOrInitializeService({instanceIdentifier:Ot});tt.resolve(Xt)}catch{}}}}clearInstance(De=ve){this.instancesDeferred.delete(De),this.instancesOptions.delete(De),this.instances.delete(De)}delete(){var De=this;return(0,B.Z)(function*(){const Pe=Array.from(De.instances.values());yield Promise.all([...Pe.filter(tt=>"INTERNAL"in tt).map(tt=>tt.INTERNAL.delete()),...Pe.filter(tt=>"_delete"in tt).map(tt=>tt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(De=ve){return this.instances.has(De)}getOptions(De=ve){return this.instancesOptions.get(De)||{}}initialize(De={}){const{options:Pe={}}=De,tt=this.normalizeInstanceIdentifier(De.instanceIdentifier);if(this.isInitialized(tt))throw Error(`${this.name}(${tt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ot=this.getOrInitializeService({instanceIdentifier:tt,options:Pe});for(const[Xt,er]of this.instancesDeferred.entries())tt===this.normalizeInstanceIdentifier(Xt)&&er.resolve(Ot);return Ot}onInit(De,Pe){var tt;const Ot=this.normalizeInstanceIdentifier(Pe),Xt=null!==(tt=this.onInitCallbacks.get(Ot))&&void 0!==tt?tt:new Set;Xt.add(De),this.onInitCallbacks.set(Ot,Xt);const er=this.instances.get(Ot);return er&&De(er,Ot),()=>{Xt.delete(De)}}invokeOnInitCallbacks(De,Pe){const tt=this.onInitCallbacks.get(Pe);if(tt)for(const Ot of tt)try{Ot(De,Pe)}catch{}}getOrInitializeService({instanceIdentifier:De,options:Pe={}}){let tt=this.instances.get(De);if(!tt&&this.component&&(tt=this.component.instanceFactory(this.container,{instanceIdentifier:(Bt=De,Bt===ve?void 0:Bt),options:Pe}),this.instances.set(De,tt),this.instancesOptions.set(De,Pe),this.invokeOnInitCallbacks(tt,De),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,De,tt)}catch{}var Bt;return tt||null}normalizeInstanceIdentifier(De=ve){return this.component?this.component.multipleInstances?De:ve:De}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ji{constructor(De){this.name=De,this.providers=new Map}addComponent(De){const Pe=this.getProvider(De.name);if(Pe.isComponentSet())throw new Error(`Component ${De.name} has already been registered with ${this.name}`);Pe.setComponent(De)}addOrOverwriteComponent(De){this.getProvider(De.name).isComponentSet()&&this.providers.delete(De.name),this.addComponent(De)}getProvider(De){if(this.providers.has(De))return this.providers.get(De);const Pe=new Et(De,this);return this.providers.set(De,Pe),Pe}getProviders(){return Array.from(this.providers.values())}}},879:(Fo,Xi,wt)=>{wt.d(Xi,{Am:()=>Bt,Ub:()=>Ji,Yd:()=>ri,in:()=>ht});const B=[];var ht=function(De){return De[De.DEBUG=0]="DEBUG",De[De.VERBOSE=1]="VERBOSE",De[De.INFO=2]="INFO",De[De.WARN=3]="WARN",De[De.ERROR=4]="ERROR",De[De.SILENT=5]="SILENT",De}(ht||{});const Ze={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},ve=ht.INFO,Et={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},Wn=(De,Pe,...tt)=>{if(Pe<De.logLevel)return;const Ot=(new Date).toISOString(),Xt=Et[Pe];if(!Xt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Pe})`);console[Xt](`[${Ot}]  ${De.name}:`,...tt)};class ri{constructor(Pe){this.name=Pe,this._logLevel=ve,this._logHandler=Wn,this._userLogHandler=null,B.push(this)}get logLevel(){return this._logLevel}set logLevel(Pe){if(!(Pe in ht))throw new TypeError(`Invalid value "${Pe}" assigned to \`logLevel\``);this._logLevel=Pe}setLogLevel(Pe){this._logLevel="string"==typeof Pe?Ze[Pe]:Pe}get logHandler(){return this._logHandler}set logHandler(Pe){if("function"!=typeof Pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(Pe){this._userLogHandler=Pe}debug(...Pe){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...Pe),this._logHandler(this,ht.DEBUG,...Pe)}log(...Pe){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...Pe),this._logHandler(this,ht.VERBOSE,...Pe)}info(...Pe){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...Pe),this._logHandler(this,ht.INFO,...Pe)}warn(...Pe){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...Pe),this._logHandler(this,ht.WARN,...Pe)}error(...Pe){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...Pe),this._logHandler(this,ht.ERROR,...Pe)}}function Ji(De){B.forEach(Pe=>{Pe.setLogLevel(De)})}function Bt(De,Pe){for(const tt of B){let Ot=null;Pe&&Pe.level&&(Ot=Ze[Pe.level]),tt.userLogHandler=null===De?null:(Xt,er,...tn)=>{const gt=tn.map(Dt=>{if(null==Dt)return null;if("string"==typeof Dt)return Dt;if("number"==typeof Dt||"boolean"==typeof Dt)return Dt.toString();if(Dt instanceof Error)return Dt.message;try{return JSON.stringify(Dt)}catch{return null}}).filter(Dt=>Dt).join(" ");er>=(Ot??Xt.logLevel)&&De({level:ht[er].toLowerCase(),message:gt,args:tn,type:Xt.name})}}}},985:(Fo,Xi,wt)=>{wt.r(Xi);var B=wt(861),ht=wt(106),Ze=wt(534),ve=wt(58),Et=wt(879),Wn=wt(582),ri=wt(537);const Bt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const er=function Ot(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},tn=function Xt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},gt=new ve.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tr=new Et.Yd("@firebase/auth");function Vn(g,...d){tr.logLevel<=Et.in.ERROR&&tr.error(`Auth (${Ze.SDK_VERSION}): ${g}`,...d)}function nn(g,...d){throw Sn(g,...d)}function vn(g,...d){return Sn(g,...d)}function kr(g,d,h){const _=Object.assign(Object.assign({},tn()),{[d]:h});return new ve.LL("auth","Firebase",_).create(d,{appName:g.name})}function ot(g){return kr(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function di(g,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&nn(g,"argument-error"),kr(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sn(g,...d){if("string"!=typeof g){const h=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(h,..._)}return gt.create(g,...d)}function Ae(g,d,...h){if(!g)throw Sn(d,...h)}function qn(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Vn(d),new Error(d)}function Nn(g,d){g||qn(d)}function fs(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Is(){return"http:"===pt()||"https:"===pt()}function pt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class he{constructor(d,h){this.shortDelay=d,this.longDelay=h,Nn(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,ve.uI)()||(0,ve.b$)()}get(){return function za(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Is()||(0,ve.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _e(g,d){Nn(g.emulator,"Emulator should always be set here");const{url:h}=g.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class se{static initialize(d,h,_){this.fetchImpl=d,h&&(this.headersImpl=h),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Oe=new he(3e4,6e4);function ge(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Re(g,d,h,_){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,B.Z)(function*(g,d,h,_,T={}){return Fe(g,T,(0,B.Z)(function*(){let k={},Q={};_&&("GET"===d?Q=_:k={body:JSON.stringify(_)});const oe=(0,ve.xO)(Object.assign({key:g.config.apiKey},Q)).slice(1),Ce=yield g._getAdditionalHeaders();return Ce["Content-Type"]="application/json",g.languageCode&&(Ce["X-Firebase-Locale"]=g.languageCode),se.fetch()(As(g,g.config.apiHost,h,oe),Object.assign({method:d,headers:Ce,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Fe(g,d,h){return st.apply(this,arguments)}function st(){return(st=(0,B.Z)(function*(g,d,h){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ee),d);try{const T=new Ti(g),k=yield Promise.race([h(),T.promise]);T.clearNetworkTimeout();const Q=yield k.json();if("needConfirmation"in Q)throw hi(g,"account-exists-with-different-credential",Q);if(k.ok&&!("errorMessage"in Q))return Q;{const oe=k.ok?Q.errorMessage:Q.error.message,[Ce,Ve]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ce)throw hi(g,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ce)throw hi(g,"email-already-in-use",Q);if("USER_DISABLED"===Ce)throw hi(g,"user-disabled",Q);const Ke=_[Ce]||Ce.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw kr(g,Ke,Ve);nn(g,Ke)}}catch(T){if(T instanceof ve.ZR)throw T;nn(g,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Tt(g,d,h,_){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,B.Z)(function*(g,d,h,_,T={}){const k=yield Re(g,d,h,_,T);return"mfaPendingCredential"in k&&nn(g,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function As(g,d,h,_){const T=`${d}${h}?${_}`;return g.config.emulator?_e(g.config,T):`${g.config.apiScheme}://${T}`}function cn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ti{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,_)=>{this.timer=setTimeout(()=>_(vn(this.auth,"network-request-failed")),Oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hi(g,d,h){const _={appName:g.name};h.email&&(_.email=h.email),h.phoneNumber&&(_.phoneNumber=h.phoneNumber);const T=vn(g,d,_);return T.customData._tokenResponse=h,T}function pr(g){return void 0!==g&&void 0!==g.getResponse}function Mr(g){return void 0!==g&&void 0!==g.enterprise}class $l{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===d)return cn(h.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function si(){return(si=(0,B.Z)(function*(g){return(yield Re(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Cu(g,d){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,B.Z)(function*(g,d){return Re(g,"GET","/v2/recaptchaConfig",ge(g,d))})).apply(this,arguments)}function Zs(){return(Zs=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Hr(){return(Hr=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ks(g,d){return Si.apply(this,arguments)}function Si(){return(Si=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Ys(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Ii(){return(Ii=(0,B.Z)(function*(g,d=!1){const h=(0,ve.m9)(g),_=yield h.getIdToken(d),T=ra(_);Ae(T&&T.exp&&T.auth_time&&T.iat,h.auth,"internal-error");const k="object"==typeof T.firebase?T.firebase:void 0,Q=k?.sign_in_provider;return{claims:T,token:_,authTime:Ys(Tu(T.auth_time)),issuedAtTime:Ys(Tu(T.iat)),expirationTime:Ys(Tu(T.exp)),signInProvider:Q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Tu(g){return 1e3*Number(g)}function ra(g){const[d,h,_]=g.split(".");if(void 0===d||void 0===h||void 0===_)return Vn("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,ve.tV)(h);return T?JSON.parse(T):(Vn("Failed to decode base64 JWT payload"),null)}catch(T){return Vn("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Wl(g){const d=ra(g);return Ae(d,"internal-error"),Ae(typeof d.exp<"u","internal-error"),Ae(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function zr(g,d){return qa.apply(this,arguments)}function qa(){return(qa=(0,B.Z)(function*(g,d,h=!1){if(h)return d;try{return yield d}catch(_){throw _ instanceof ve.ZR&&function Ai({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class ql{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,B.Z)(function*(){yield h.iteration()}),_)}iteration(){var d=this;return(0,B.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class ps{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ys(this.lastLoginAt),this.creationTime=Ys(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $r(g){return sa.apply(this,arguments)}function sa(){return(sa=(0,B.Z)(function*(g){var d;const h=g.auth,_=yield g.getIdToken(),T=yield zr(g,Ks(h,{idToken:_}));Ae(T?.users.length,h,"internal-error");const k=T.users[0];g._notifyReloadListener(k);const Q=null!==(d=k.providerUserInfo)&&void 0!==d&&d.length?oa(k.providerUserInfo):[],oe=function Su(g,d){return[...g.filter(_=>!d.some(T=>T.providerId===_.providerId)),...d]}(g.providerData,Q),Ke=!!g.isAnonymous&&!(g.email&&k.passwordHash||oe?.length),Ye={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:oe,metadata:new ps(k.createdAt,k.lastLoginAt),isAnonymous:Ke};Object.assign(g,Ye)})).apply(this,arguments)}function Gl(){return(Gl=(0,B.Z)(function*(g){const d=(0,ve.m9)(g);yield $r(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function oa(g){return g.map(d=>{var{providerId:h}=d,_=(0,Wn._T)(d,["providerId"]);return{providerId:h,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Y(){return(Y=(0,B.Z)(function*(g,d){const h=yield Fe(g,{},(0,B.Z)(function*(){const _=(0,ve.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:T,apiKey:k}=g.config,Q=As(g,T,"/v1/token",`key=${k}`),oe=yield g._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(Q,{method:"POST",headers:oe,body:_})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function be(){return(be=(0,B.Z)(function*(g,d){return Re(g,"POST","/v2/accounts:revokeToken",ge(g,d))})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ae(d.idToken,"internal-error"),Ae(typeof d.idToken<"u","internal-error"),Ae(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):Wl(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}updateFromIdToken(d){Ae(0!==d.length,"internal-error");const h=Wl(d);this.updateTokensAndExpiration(d,null,h)}getToken(d,h=!1){var _=this;return(0,B.Z)(function*(){return h||!_.accessToken||_.isExpired?(Ae(_.refreshToken,d,"user-token-expired"),_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var _=this;return(0,B.Z)(function*(){const{accessToken:T,refreshToken:k,expiresIn:Q}=yield function J(g,d){return Y.apply(this,arguments)}(d,h);_.updateTokensAndExpiration(T,k,Number(Q))})()}updateTokensAndExpiration(d,h,_){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,h){const{refreshToken:_,accessToken:T,expirationTime:k}=h,Q=new le;return _&&(Ae("string"==typeof _,"internal-error",{appName:d}),Q.refreshToken=_),T&&(Ae("string"==typeof T,"internal-error",{appName:d}),Q.accessToken=T),k&&(Ae("number"==typeof k,"internal-error",{appName:d}),Q.expirationTime=k),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return qn("not implemented")}}function we(g,d){Ae("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class et{constructor(d){var{uid:h,auth:_,stsTokenManager:T}=d,k=(0,Wn._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ql(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new ps(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,B.Z)(function*(){const _=yield zr(h,h.stsTokenManager.getToken(h.auth,d));return Ae(_,h.auth,"internal-error"),h.accessToken!==_&&(h.accessToken=_,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),_})()}getIdTokenResult(d){return function xs(g){return Ii.apply(this,arguments)}(this,d)}reload(){return function Ch(g){return Gl.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ae(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new et(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var _=this;return(0,B.Z)(function*(){let T=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),T=!0),h&&(yield $r(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,B.Z)(function*(){if((0,Ze._isFirebaseServerApp)(d.auth.app))return Promise.reject(ot(d.auth));const h=yield d.getIdToken();return yield zr(d,function Eu(g,d){return Zs.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var _,T,k,Q,oe,Ce,Ve,Ke;const Ye=null!==(_=h.displayName)&&void 0!==_?_:void 0,Pn=null!==(T=h.email)&&void 0!==T?T:void 0,Fs=null!==(k=h.phoneNumber)&&void 0!==k?k:void 0,df=null!==(Q=h.photoURL)&&void 0!==Q?Q:void 0,Em=null!==(oe=h.tenantId)&&void 0!==oe?oe:void 0,d0=null!==(Ce=h._redirectEventId)&&void 0!==Ce?Ce:void 0,Dm=null!==(Ve=h.createdAt)&&void 0!==Ve?Ve:void 0,rS=null!==(Ke=h.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:Tm,emailVerified:h0,isAnonymous:hf,providerData:f0,stsTokenManager:sS}=h;Ae(Tm&&sS,d,"internal-error");const Sm=le.fromJSON(this.name,sS);Ae("string"==typeof Tm,d,"internal-error"),we(Ye,d.name),we(Pn,d.name),Ae("boolean"==typeof h0,d,"internal-error"),Ae("boolean"==typeof hf,d,"internal-error"),we(Fs,d.name),we(df,d.name),we(Em,d.name),we(d0,d.name),we(Dm,d.name),we(rS,d.name);const p0=new et({uid:Tm,auth:d,email:Pn,emailVerified:h0,displayName:Ye,isAnonymous:hf,photoURL:df,phoneNumber:Fs,tenantId:Em,stsTokenManager:Sm,createdAt:Dm,lastLoginAt:rS});return f0&&Array.isArray(f0)&&(p0.providerData=f0.map(xO=>Object.assign({},xO))),d0&&(p0._redirectEventId=d0),p0}static _fromIdTokenResponse(d,h,_=!1){return(0,B.Z)(function*(){const T=new le;T.updateFromServerResponse(h);const k=new et({uid:h.localId,auth:d,stsTokenManager:T,isAnonymous:_});return yield $r(k),k})()}static _fromGetAccountInfoResponse(d,h,_){return(0,B.Z)(function*(){const T=h.users[0];Ae(void 0!==T.localId,"internal-error");const k=void 0!==T.providerUserInfo?oa(T.providerUserInfo):[],Q=!(T.email&&T.passwordHash||k?.length),oe=new le;oe.updateFromIdToken(_);const Ce=new et({uid:T.localId,auth:d,stsTokenManager:oe,isAnonymous:Q}),Ve={uid:T.localId,displayName:T.displayName||null,photoURL:T.photoUrl||null,email:T.email||null,emailVerified:T.emailVerified||!1,phoneNumber:T.phoneNumber||null,tenantId:T.tenantId||null,providerData:k,metadata:new ps(T.createdAt,T.lastLoginAt),isAnonymous:!(T.email&&T.passwordHash||k?.length)};return Object.assign(Ce,Ve),Ce})()}}const un=new Map;function lt(g){Nn(g instanceof Function,"Expected a class definition");let d=un.get(g);return d?(Nn(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,un.set(g,d),d)}const ki=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,B.Z)(function*(){return!0})()}_set(h,_){var T=this;return(0,B.Z)(function*(){T.storage[h]=_})()}_get(h){var _=this;return(0,B.Z)(function*(){const T=_.storage[h];return void 0===T?null:T})()}_remove(h){var _=this;return(0,B.Z)(function*(){delete _.storage[h]})()}_addListener(h,_){}_removeListener(h,_){}}return g.type="NONE",g})();function Qe(g,d,h){return`firebase:${g}:${d}:${h}`}class Gn{constructor(d,h,_){this.persistence=d,this.auth=h,this.userKey=_;const{config:T,name:k}=this.auth;this.fullUserKey=Qe(this.userKey,T.apiKey,k),this.fullPersistenceKey=Qe("persistence",T.apiKey,k),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,B.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?et._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,B.Z)(function*(){if(h.persistence===d)return;const _=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,_?h.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,_="authUser"){return(0,B.Z)(function*(){if(!h.length)return new Gn(lt(ki),d,_);const T=(yield Promise.all(h.map(function(){var Ve=(0,B.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let k=T[0]||lt(ki);const Q=Qe(_,d.config.apiKey,d.name);let oe=null;for(const Ve of h)try{const Ke=yield Ve._get(Q);if(Ke){const Ye=et._fromJSON(d,Ke);Ve!==k&&(oe=Ye),k=Ve;break}}catch{}const Ce=T.filter(Ve=>Ve._shouldAllowMigration);return k._shouldAllowMigration&&Ce.length?(k=Ce[0],oe&&(yield k._set(Q,oe.toJSON())),yield Promise.all(h.map(function(){var Ve=(0,B.Z)(function*(Ke){if(Ke!==k)try{yield Ke._remove(Q)}catch{}});return function(Ke){return Ve.apply(this,arguments)}}())),new Gn(k,d,_)):new Gn(k,d,_)})()}}function bn(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ct(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(aa(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Zl(d))return"Blackberry";if(Eh(d))return"Webos";if(Iu(d))return"Safari";if((d.includes("chrome/")||fn(d))&&!d.includes("edge/"))return"Chrome";if(Lo(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function aa(g=(0,ve.z$)()){return/firefox\//i.test(g)}function Iu(g=(0,ve.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function fn(g=(0,ve.z$)()){return/crios\//i.test(g)}function ct(g=(0,ve.z$)()){return/iemobile/i.test(g)}function Lo(g=(0,ve.z$)()){return/android/i.test(g)}function Zl(g=(0,ve.z$)()){return/blackberry/i.test(g)}function Eh(g=(0,ve.z$)()){return/webos/i.test(g)}function Vo(g=(0,ve.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function xe(g=(0,ve.z$)()){return Vo(g)||Lo(g)||Eh(g)||Zl(g)||/windows phone/i.test(g)||ct(g)}function yt(g,d=[]){let h;switch(g){case"Browser":h=bn((0,ve.z$)());break;case"Worker":h=`${bn((0,ve.z$)())}-${g}`;break;default:h=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${Ze.SDK_VERSION}/${_}`}class xt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const _=k=>new Promise((Q,oe)=>{try{Q(d(k))}catch(Ce){oe(Ce)}});_.onAbort=h,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,B.Z)(function*(){if(h.auth.currentUser===d)return;const _=[];try{for(const T of h.queue)yield T(d),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const k of _)try{k()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}function Nt(){return(Nt=(0,B.Z)(function*(g,d={}){return Re(g,"GET","/v2/passwordPolicy",ge(g,d))})).apply(this,arguments)}class Ga{constructor(d){var h,_,T,k;const Q=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=Q.minPasswordLength)&&void 0!==h?h:6,Q.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Q.maxPasswordLength),void 0!==Q.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Q.containsLowercaseCharacter),void 0!==Q.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Q.containsUppercaseCharacter),void 0!==Q.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Q.containsNumericCharacter),void 0!==Q.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Q.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(T=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==T?T:"",this.forceUpgradeOnSignin=null!==(k=d.forceUpgradeOnSignin)&&void 0!==k&&k,this.schemaVersion=d.schemaVersion}validatePassword(d){var h,_,T,k,Q,oe;const Ce={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Ce),this.validatePasswordCharacterOptions(d,Ce),Ce.isValid&&(Ce.isValid=null===(h=Ce.meetsMinPasswordLength)||void 0===h||h),Ce.isValid&&(Ce.isValid=null===(_=Ce.meetsMaxPasswordLength)||void 0===_||_),Ce.isValid&&(Ce.isValid=null===(T=Ce.containsLowercaseLetter)||void 0===T||T),Ce.isValid&&(Ce.isValid=null===(k=Ce.containsUppercaseLetter)||void 0===k||k),Ce.isValid&&(Ce.isValid=null===(Q=Ce.containsNumericCharacter)||void 0===Q||Q),Ce.isValid&&(Ce.isValid=null===(oe=Ce.containsNonAlphanumericCharacter)||void 0===oe||oe),Ce}validatePasswordLengthOptions(d,h){const _=this.customStrengthOptions.minPasswordLength,T=this.customStrengthOptions.maxPasswordLength;_&&(h.meetsMinPasswordLength=d.length>=_),T&&(h.meetsMaxPasswordLength=d.length<=T)}validatePasswordCharacterOptions(d,h){let _;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let T=0;T<d.length;T++)_=d.charAt(T),this.updatePasswordCharacterOptionsStatuses(h,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,h,_,T,k){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=T)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=k))}}class Nv{constructor(d,h,_,T){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nT(this),this.idTokenSubscription=new nT(this),this.beforeStateQueue=new xt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(d,h){var _=this;return h&&(this._popupRedirectResolver=lt(h)),this._initializationPromise=this.queue((0,B.Z)(function*(){var T,k;if(!_._deleted&&(_.persistenceManager=yield Gn.create(_,d),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(h),_.lastNotifiedUid=(null===(k=_.currentUser)||void 0===k?void 0:k.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,B.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(d){var h=this;return(0,B.Z)(function*(){try{const _=yield Ks(h,{idToken:d}),T=yield et._fromGetAccountInfoResponse(h,_,d);yield h.directlySetCurrentUser(T)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var h=this;return(0,B.Z)(function*(){var _;if((0,Ze._isFirebaseServerApp)(h.app)){const oe=h.app.settings.authIdToken;return oe?new Promise(Ce=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(oe).then(Ce,Ce))}):h.directlySetCurrentUser(null)}const T=yield h.assertedPersistence.getCurrentUser();let k=T,Q=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const oe=null===(_=h.redirectUser)||void 0===_?void 0:_._redirectEventId,Ce=k?._redirectEventId,Ve=yield h.tryRedirectSignIn(d);(!oe||oe===Ce)&&Ve?.user&&(k=Ve.user,Q=!0)}if(!k)return h.directlySetCurrentUser(null);if(!k._redirectEventId){if(Q)try{yield h.beforeStateQueue.runMiddleware(k)}catch(oe){k=T,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(oe))}return k?h.reloadAndSetCurrentUserOrClear(k):h.directlySetCurrentUser(null)}return Ae(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===k._redirectEventId?h.directlySetCurrentUser(k):h.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(d){var h=this;return(0,B.Z)(function*(){let _=null;try{_=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,B.Z)(function*(){try{yield $r(d)}catch(_){if("auth/network-request-failed"!==_?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function zl(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,B.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,B.Z)(function*(){if((0,Ze._isFirebaseServerApp)(h.app))return Promise.reject(ot(h));const _=d?(0,ve.m9)(d):null;return _&&Ae(_.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(_&&_._clone(h))})()}_updateCurrentUser(d,h=!1){var _=this;return(0,B.Z)(function*(){if(!_._deleted)return d&&Ae(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),h||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,B.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,B.Z)(function*(){return(0,Ze._isFirebaseServerApp)(d.app)?Promise.reject(ot(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var h=this;return(0,Ze._isFirebaseServerApp)(this.app)?Promise.reject(ot(this)):this.queue((0,B.Z)(function*(){yield h.assertedPersistence.setPersistence(lt(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var h=this;return(0,B.Z)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const _=h._getPasswordPolicyInternal();return _.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,B.Z)(function*(){const h=yield function An(g){return Nt.apply(this,arguments)}(d),_=new Ga(h);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new ve.LL("auth","Firebase",d())}onAuthStateChanged(d,h,_){return this.registerStateListener(this.authStateSubscription,d,h,_)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,_){return this.registerStateListener(this.idTokenSubscription,d,h,_)}authStateReady(){return new Promise((d,h)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},h)}})}revokeAccessToken(d){var h=this;return(0,B.Z)(function*(){if(h.currentUser){const _=yield h.currentUser.getIdToken(),T={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=h.tenantId&&(T.tenantId=h.tenantId),yield function ee(g,d){return be.apply(this,arguments)}(h,T)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var _=this;return(0,B.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(h);return null===d?T.removeCurrentUser():T.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,B.Z)(function*(){if(!h.redirectPersistenceManager){const _=d&&lt(d)||h._popupRedirectResolver;Ae(_,h,"argument-error"),h.redirectPersistenceManager=yield Gn.create(h,[lt(_._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,B.Z)(function*(){var _,T;return h._isInitialized&&(yield h.queue((0,B.Z)(function*(){}))),(null===(_=h._currentUser)||void 0===_?void 0:_._redirectEventId)===d?h._currentUser:(null===(T=h.redirectUser)||void 0===T?void 0:T._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,B.Z)(function*(){if(d===h.currentUser)return h.queue((0,B.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,_,T){if(this._deleted)return()=>{};const k="function"==typeof h?h:h.next.bind(h);let Q=!1;const oe=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(oe,this,"internal-error"),oe.then(()=>{Q||k(this.currentUser)}),"function"==typeof h){const Ce=d.addObserver(h,_,T);return()=>{Q=!0,Ce()}}{const Ce=d.addObserver(h);return()=>{Q=!0,Ce()}}}directlySetCurrentUser(d){var h=this;return(0,B.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=yt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,B.Z)(function*(){var h;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const T=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const k=yield d._getAppCheckToken();return k&&(_["X-Firebase-AppCheck"]=k),_})()}_getAppCheckToken(){var d=this;return(0,B.Z)(function*(){var h;const _=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return _?.error&&function nr(g,...d){tr.logLevel<=Et.in.WARN&&tr.warn(`Auth (${Ze.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function rn(g){return(0,ve.m9)(g)}class nT{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,ve.ne)(h=>this.observer=h)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dh={loadJS:()=>(0,B.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fv(g){return Dh.loadJS(g)}function sT(g){return`__${g}${Math.floor(1e6*Math.random())}`}class oT{constructor(d){this.type="recaptcha-enterprise",this.auth=rn(d)}verify(d="verify",h=!1){var _=this;return(0,B.Z)(function*(){function k(){return k=(0,B.Z)(function*(oe){if(!h){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Ce=(0,B.Z)(function*(Ve,Ke){Cu(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ye=>{if(void 0!==Ye.recaptchaKey){const Pn=new $l(Ye);return null==oe.tenantId?oe._agentRecaptchaConfig=Pn:oe._tenantRecaptchaConfigs[oe.tenantId]=Pn,Ve(Pn.siteKey)}Ke(new Error("recaptcha Enterprise site key undefined"))}).catch(Ye=>{Ke(Ye)})});return function(Ve,Ke){return Ce.apply(this,arguments)}}())}),k.apply(this,arguments)}function Q(oe,Ce,Ve){const Ke=window.grecaptcha;Mr(Ke)?Ke.enterprise.ready(()=>{Ke.enterprise.execute(oe,{action:d}).then(Ye=>{Ce(Ye)}).catch(()=>{Ce("NO_RECAPTCHA")})}):Ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Ce)=>{(function T(oe){return k.apply(this,arguments)})(_.auth).then(Ve=>{if(!h&&Mr(window.grecaptcha))Q(Ve,oe,Ce);else{if(typeof window>"u")return void Ce(new Error("RecaptchaVerifier is only supported in browser"));let Ke=function nO(){return Dh.recaptchaEnterpriseScript}();0!==Ke.length&&(Ke+=Ve),Fv(Ke).then(()=>{Q(Ve,oe,Ce)}).catch(Ye=>{Ce(Ye)})}}).catch(Ve=>{Ce(Ve)})})})()}}function aT(g,d,h){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,B.Z)(function*(g,d,h,_=!1){const T=new oT(g);let k;try{k=yield T.verify(h)}catch{k=yield T.verify(h,!0)}const Q=Object.assign({},d);return Object.assign(Q,_?{captchaResp:k}:{captchaResponse:k}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}function ke(g,d,h,_){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,B.Z)(function*(g,d,h,_){var T;if(null!==(T=g._getRecaptchaConfig())&&void 0!==T&&T.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const k=yield aT(g,d,h,"getOobCode"===h);return _(g,k)}return _(g,d).catch(function(){var k=(0,B.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const oe=yield aT(g,d,h,"getOobCode"===h);return _(g,oe)}return Promise.reject(Q)});return function(Q){return k.apply(this,arguments)}}())}),Vv.apply(this,arguments)}function Au(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Sh(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class Yl{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return qn("not implemented")}_getIdTokenResponse(d){return qn("not implemented")}_linkToIdToken(d,h){return qn("not implemented")}_getReauthenticationResolver(d){return qn("not implemented")}}function Ft(g,d){return xu.apply(this,arguments)}function xu(){return(xu=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:resetPassword",ge(g,d))})).apply(this,arguments)}function gr(){return(gr=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function zv(g,d){return $v.apply(this,arguments)}function $v(){return($v=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Wv(){return(Wv=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:update",ge(g,d))})).apply(this,arguments)}function iO(g,d){return Te.apply(this,arguments)}function Te(){return(Te=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithPassword",ge(g,d))})).apply(this,arguments)}function Ql(g,d){return ku.apply(this,arguments)}function ku(){return(ku=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:sendOobCode",ge(g,d))})).apply(this,arguments)}function Mu(){return(Mu=(0,B.Z)(function*(g,d){return Ql(g,d)})).apply(this,arguments)}function cT(g,d){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,B.Z)(function*(g,d){return Ql(g,d)})).apply(this,arguments)}function rO(g,d){return Gv.apply(this,arguments)}function Gv(){return(Gv=(0,B.Z)(function*(g,d){return Ql(g,d)})).apply(this,arguments)}function Zv(){return(Zv=(0,B.Z)(function*(g,d){return Ql(g,d)})).apply(this,arguments)}function Za(){return(Za=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithEmailLink",ge(g,d))})).apply(this,arguments)}function Xl(){return(Xl=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithEmailLink",ge(g,d))})).apply(this,arguments)}class Ru extends Yl{constructor(d,h,_,T=null){super("password",_),this._email=d,this._password=h,this._tenantId=T}static _fromEmailAndPassword(d,h){return new Ru(d,h,"password")}static _fromEmailAndCode(d,h,_=null){return new Ru(d,h,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,B.Z)(function*(){switch(h.signInMethod){case"password":return ke(d,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",iO);case"emailLink":return function oO(g,d){return Za.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:nn(d,"internal-error")}})()}_linkToIdToken(d,h){var _=this;return(0,B.Z)(function*(){switch(_.signInMethod){case"password":return ke(d,{idToken:h,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zv);case"emailLink":return function vg(g,d){return Xl.apply(this,arguments)}(d,{idToken:h,email:_._email,oobCode:_._password});default:nn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Bo(g,d){return bg.apply(this,arguments)}function bg(){return(bg=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithIdp",ge(g,d))})).apply(this,arguments)}class Pr extends Yl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new Pr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):nn("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:T}=h,k=(0,Wn._T)(h,["providerId","signInMethod"]);if(!_||!T)return null;const Q=new Pr(_,T);return Q.idToken=k.idToken||void 0,Q.accessToken=k.accessToken||void 0,Q.secret=k.secret,Q.nonce=k.nonce,Q.pendingToken=k.pendingToken||null,Q}_getIdTokenResponse(d){return Bo(d,this.buildRequest())}_linkToIdToken(d,h){const _=this.buildRequest();return _.idToken=h,Bo(d,_)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Bo(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,ve.xO)(h)}return d}}function go(){return(go=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:sendVerificationCode",ge(g,d))})).apply(this,arguments)}function ie(){return(ie=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithPhoneNumber",ge(g,d))})).apply(this,arguments)}function He(){return(He=(0,B.Z)(function*(g,d){const h=yield Tt(g,"POST","/v1/accounts:signInWithPhoneNumber",ge(g,d));if(h.temporaryProof)throw hi(g,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Ih={USER_NOT_FOUND:"user-not-found"};function Ka(){return(Ka=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithPhoneNumber",ge(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ih)})).apply(this,arguments)}class Ya extends Yl{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new Ya({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new Ya({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function dT(g,d){return ie.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function Yv(g,d){return He.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function wg(g,d){return Ka.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:_,verificationCode:T}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:_,code:T}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:_,phoneNumber:T,temporaryProof:k}=d;return _||h||T||k?new Ya({verificationId:h,verificationCode:_,phoneNumber:T,temporaryProof:k}):null}}class gs{constructor(d){var h,_,T,k,Q,oe;const Ce=(0,ve.zd)((0,ve.pd)(d)),Ve=null!==(h=Ce.apiKey)&&void 0!==h?h:null,Ke=null!==(_=Ce.oobCode)&&void 0!==_?_:null,Ye=function hT(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ce.mode)&&void 0!==T?T:null);Ae(Ve&&Ke&&Ye,"argument-error"),this.apiKey=Ve,this.operation=Ye,this.code=Ke,this.continueUrl=null!==(k=Ce.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Q=Ce.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(oe=Ce.tenantId)&&void 0!==oe?oe:null}static parseLink(d){const h=function fT(g){const d=(0,ve.zd)((0,ve.pd)(g)).link,h=d?(0,ve.zd)((0,ve.pd)(d)).deep_link_id:null,_=(0,ve.zd)((0,ve.pd)(g)).deep_link_id;return(_?(0,ve.zd)((0,ve.pd)(_)).link:null)||_||h||d||g}(d);try{return new gs(h)}catch{return null}}}let Wr=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(h,_){return Ru._fromEmailAndPassword(h,_)}static credentialWithLink(h,_){const T=gs.parseLink(_);return Ae(T,"argument-error"),Ru._fromEmailAndCode(h,T.code,T.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Hi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class jt extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class jo extends jt{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Ae("providerId"in h&&"signInMethod"in h,"argument-error"),Pr._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ae(d.idToken||d.accessToken,"argument-error"),Pr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return jo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return jo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:k,nonce:Q,providerId:oe}=d;if(!_&&!T&&!h&&!k||!oe)return null;try{return new jo(oe)._credential({idToken:h,accessToken:_,nonce:Q,pendingToken:k})}catch{return null}}}let Ah=(()=>{class g extends jt{constructor(){super("facebook.com")}static credential(h){return Pr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),xh=(()=>{class g extends jt{constructor(){super("google.com"),this.addScope("profile")}static credential(h,_){return Pr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:_})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:_,oauthAccessToken:T}=h;if(!_&&!T)return null;try{return g.credential(_,T)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Eg=(()=>{class g extends jt{constructor(){super("github.com")}static credential(h){return Pr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class mo extends Yl{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return Bo(d,this.buildRequest())}_linkToIdToken(d,h){const _=this.buildRequest();return _.idToken=h,Bo(d,_)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Bo(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:T,pendingToken:k}=h;return _&&T&&k&&_===T?new mo(_,k):null}static _create(d,h){return new mo(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ou extends Hi{constructor(d){Ae(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Ou.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Ou.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=mo.fromJSON(d);return Ae(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:_}=d;if(!h||!_)return null;try{return mo._create(_,h)}catch{return null}}}let kh=(()=>{class g extends jt{constructor(){super("twitter.com")}static credential(h,_){return Pr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:_})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=h;if(!_||!T)return null;try{return g.credential(_,T)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Dg(g,d){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signUp",ge(g,d))})).apply(this,arguments)}class mr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,_,T=!1){return(0,B.Z)(function*(){const k=yield et._fromIdTokenResponse(d,_,T),Q=Tg(_);return new mr({user:k,providerId:Q,_tokenResponse:_,operationType:h})})()}static _forOperation(d,h,_){return(0,B.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const T=Tg(_);return new mr({user:d,providerId:T,_tokenResponse:_,operationType:h})})()}}function Tg(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Sg(){return(Sg=(0,B.Z)(function*(g){var d;if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const h=rn(g);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new mr({user:h.currentUser,providerId:null,operationType:"signIn"});const _=yield Dg(h,{returnSecureToken:!0}),T=yield mr._fromIdTokenResponse(h,"signIn",_,!0);return yield h._updateCurrentUser(T.user),T})).apply(this,arguments)}class Nu extends ve.ZR{constructor(d,h,_,T){var k;super(h.code,h.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:d.name,tenantId:null!==(k=d.tenantId)&&void 0!==k?k:void 0,_serverResponse:h.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,h,_,T){return new Nu(d,h,_,T)}}function Jv(g,d,h,_){return("reauthenticate"===d?h._getReauthenticationResolver(g):h._getIdTokenResponse(g)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Nu._fromErrorAndOperation(g,k,d,_):k})}function eb(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Ig(){return Ig=(0,B.Z)(function*(g,d){const h=(0,ve.m9)(g);yield Rh(!0,h,d);const{providerUserInfo:_}=yield function Du(g,d){return Hr.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),T=eb(_||[]);return h.providerData=h.providerData.filter(k=>T.has(k.providerId)),T.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Ig.apply(this,arguments)}function Ph(g,d){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,B.Z)(function*(g,d,h=!1){const _=yield zr(g,d._linkToIdToken(g.auth,yield g.getIdToken()),h);return mr._forOperation(g,"link",_)})).apply(this,arguments)}function Rh(g,d,h){return xg.apply(this,arguments)}function xg(){return(xg=(0,B.Z)(function*(g,d,h){yield $r(d);const T=!1===g?"provider-already-linked":"no-such-provider";Ae(eb(d.providerData).has(h)===g,d.auth,T)})).apply(this,arguments)}function tb(g,d){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,B.Z)(function*(g,d,h=!1){const{auth:_}=g;if((0,Ze._isFirebaseServerApp)(_.app))return Promise.reject(ot(_));const T="reauthenticate";try{const k=yield zr(g,Jv(_,T,d,g),h);Ae(k.idToken,_,"internal-error");const Q=ra(k.idToken);Ae(Q,_,"internal-error");const{sub:oe}=Q;return Ae(g.uid===oe,_,"user-mismatch"),mr._forOperation(g,T,k)}catch(k){throw"auth/user-not-found"===k?.code&&nn(_,"user-mismatch"),k}})).apply(this,arguments)}function nb(g,d){return kg.apply(this,arguments)}function kg(){return(kg=(0,B.Z)(function*(g,d,h=!1){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const _="signIn",T=yield Jv(g,_,d),k=yield mr._fromIdTokenResponse(g,_,T);return h||(yield g._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Nh(g,d){return kt.apply(this,arguments)}function kt(){return(kt=(0,B.Z)(function*(g,d){return nb(rn(g),d)})).apply(this,arguments)}function ib(g,d){return Mg.apply(this,arguments)}function Mg(){return(Mg=(0,B.Z)(function*(g,d){const h=(0,ve.m9)(g);return yield Rh(!1,h,d.providerId),Ph(h,d)})).apply(this,arguments)}function rb(g,d){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,B.Z)(function*(g,d){return tb((0,ve.m9)(g),d)})).apply(this,arguments)}function Fh(){return(Fh=(0,B.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithCustomToken",ge(g,d))})).apply(this,arguments)}function Mi(){return Mi=(0,B.Z)(function*(g,d){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const h=rn(g),_=yield function pT(g,d){return Fh.apply(this,arguments)}(h,{token:d,returnSecureToken:!0}),T=yield mr._fromIdTokenResponse(h,"signIn",_);return yield h._updateCurrentUser(T.user),T}),Mi.apply(this,arguments)}class Lt{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?Pi._fromServerResponse(d,h):"totpInfo"in h?ir._fromServerResponse(d,h):nn(d,"internal-error")}}class Pi extends Lt{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new Pi(h)}}class ir extends Lt{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new ir(h)}}function Ho(g,d,h){var _;Ae((null===(_=h.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),Ae(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Ae(h.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Ae(h.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Rr(g){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,B.Z)(function*(g){const d=rn(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function Jl(){return(Jl=(0,B.Z)(function*(g,d,h){const _=rn(g),T={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};h&&Ho(_,T,h),yield ke(_,T,"getOobCode",cT)})).apply(this,arguments)}function Pg(){return Pg=(0,B.Z)(function*(g,d,h){yield Ft((0,ve.m9)(g),{oobCode:d,newPassword:h}).catch(function(){var _=(0,B.Z)(function*(T){throw"auth/password-does-not-meet-requirements"===T.code&&Rr(g),T});return function(T){return _.apply(this,arguments)}}())}),Pg.apply(this,arguments)}function ze(){return ze=(0,B.Z)(function*(g,d){yield function xn(g,d){return Wv.apply(this,arguments)}((0,ve.m9)(g),{oobCode:d})}),ze.apply(this,arguments)}function vt(g,d){return kn.apply(this,arguments)}function kn(){return(kn=(0,B.Z)(function*(g,d){const h=(0,ve.m9)(g),_=yield Ft(h,{oobCode:d}),T=_.requestType;switch(Ae(T,h,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(_.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(_.mfaInfo,h,"internal-error");default:Ae(_.email,h,"internal-error")}let k=null;return _.mfaInfo&&(k=Lt._fromServerResponse(rn(h),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:k},operation:T}})).apply(this,arguments)}function Qa(){return(Qa=(0,B.Z)(function*(g,d){const{data:h}=yield vt((0,ve.m9)(g),d);return h.email})).apply(this,arguments)}function la(){return(la=(0,B.Z)(function*(g,d,h){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const _=rn(g),Q=yield ke(_,{returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dg).catch(Ce=>{throw"auth/password-does-not-meet-requirements"===Ce.code&&Rr(g),Ce}),oe=yield mr._fromIdTokenResponse(_,"signIn",Q);return yield _._updateCurrentUser(oe.user),oe})).apply(this,arguments)}function ua(){return(ua=(0,B.Z)(function*(g,d,h){const _=rn(g),T={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function k(Q,oe){Ae(oe.handleCodeInApp,_,"argument-error"),oe&&Ho(_,Q,oe)})(T,h),yield ke(_,T,"getOobCode",rO)})).apply(this,arguments)}function Vh(){return(Vh=(0,B.Z)(function*(g,d,h){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const _=(0,ve.m9)(g),T=Wr.credentialWithLink(d,h||fs());return Ae(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Nh(_,T)})).apply(this,arguments)}function Zn(){return(Zn=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:createAuthUri",ge(g,d))})).apply(this,arguments)}function da(){return da=(0,B.Z)(function*(g,d){const _={identifier:d,continueUri:Is()?fs():"http://localhost"},{signinMethods:T}=yield function ec(g,d){return Zn.apply(this,arguments)}((0,ve.m9)(g),_);return T||[]}),da.apply(this,arguments)}function Xa(){return Xa=(0,B.Z)(function*(g,d){const h=(0,ve.m9)(g),T={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Ho(h.auth,T,d);const{email:k}=yield function qv(g,d){return Mu.apply(this,arguments)}(h.auth,T);k!==g.email&&(yield g.reload())}),Xa.apply(this,arguments)}function yo(){return yo=(0,B.Z)(function*(g,d,h){const _=(0,ve.m9)(g),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};h&&Ho(_.auth,k,h);const{email:Q}=yield function sO(g,d){return Zv.apply(this,arguments)}(_.auth,k);Q!==g.email&&(yield g.reload())}),yo.apply(this,arguments)}function Ja(){return(Ja=(0,B.Z)(function*(g,d){return Re(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Mt(){return Mt=(0,B.Z)(function*(g,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const _=(0,ve.m9)(g),k={idToken:yield _.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},Q=yield zr(_,function zo(g,d){return Ja.apply(this,arguments)}(_.auth,k));_.displayName=Q.displayName||null,_.photoURL=Q.photoUrl||null;const oe=_.providerData.find(({providerId:Ce})=>"password"===Ce);oe&&(oe.displayName=_.displayName,oe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Q)}),Mt.apply(this,arguments)}function Og(g,d,h){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,B.Z)(function*(g,d,h){const{auth:_}=g,k={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(k.email=d),h&&(k.password=h);const Q=yield zr(g,function Hv(g,d){return gr.apply(this,arguments)}(_,k));yield g._updateTokensIfNecessary(Q,!0)}),Ps.apply(this,arguments)}class Js{constructor(d,h,_={}){this.isNewUser=d,this.providerId=h,this.profile=_}}class tc extends Js{constructor(d,h,_,T){super(d,h,_),this.username=T}}class rr extends Js{constructor(d,h){super(d,"facebook.com",h)}}class lO extends tc{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class qr extends Js{constructor(d,h){super(d,"google.com",h)}}class Or extends tc{constructor(d,h,_){super(d,"twitter.com",h,_)}}function Ng(g){const{user:d,_tokenResponse:h}=g;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Bh(g){var d,h;if(!g)return null;const{providerId:_}=g,T=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},k=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const Q=null===(h=null===(d=ra(g.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(Q)return new Js(k,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!_)return null;switch(_){case"facebook.com":return new rr(k,T);case"github.com":return new lO(k,T);case"google.com":return new qr(k,T);case"twitter.com":return new Or(k,T,g.screenName||null);case"custom":case"anonymous":return new Js(k,null);default:return new Js(k,_,T)}}(h)}class ic{constructor(d,h,_){this.type=d,this.credential=h,this.user=_}static _fromIdtoken(d,h){return new ic("enroll",d,h)}static _fromMfaPendingCredential(d){return new ic("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,_;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return ic._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return ic._fromIdtoken(d.multiFactorSession.idToken)}return null}}class lb{constructor(d,h,_){this.session=d,this.hints=h,this.signInResolver=_}static _fromError(d,h){const _=rn(d),T=h.customData._serverResponse,k=(T.mfaInfo||[]).map(oe=>Lt._fromServerResponse(_,oe));Ae(T.mfaPendingCredential,_,"internal-error");const Q=ic._fromMfaPendingCredential(T.mfaPendingCredential);return new lb(Q,k,function(){var oe=(0,B.Z)(function*(Ce){const Ve=yield Ce._process(_,Q);delete T.mfaInfo,delete T.mfaPendingCredential;const Ke=Object.assign(Object.assign({},T),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(h.operationType){case"signIn":const Ye=yield mr._fromIdTokenResponse(_,h.operationType,Ke);return yield _._updateCurrentUser(Ye.user),Ye;case"reauthenticate":return Ae(h.user,_,"internal-error"),mr._forOperation(h.user,h.operationType,Ke);default:nn(_,"internal-error")}});return function(Ce){return oe.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,B.Z)(function*(){return h.signInResolver(d)})()}}class jh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(_=>Lt._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new jh(d)}getSession(){var d=this;return(0,B.Z)(function*(){return ic._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,h){var _=this;return(0,B.Z)(function*(){const T=d,k=yield _.getSession(),Q=yield zr(_.user,T._process(_.user.auth,k,h));return yield _.user._updateTokensIfNecessary(Q),_.user.reload()})()}unenroll(d){var h=this;return(0,B.Z)(function*(){const _="string"==typeof d?d:d.uid,T=yield h.user.getIdToken();try{const k=yield zr(h.user,function gO(g,d){return Re(g,"POST","/v2/accounts/mfaEnrollment:withdraw",ge(g,d))}(h.user.auth,{idToken:T,mfaEnrollmentId:_}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Q})=>Q!==_),yield h.user._updateTokensIfNecessary(k),yield h.user.reload()}catch(k){throw k}})()}}const Uh=new WeakMap,Lg="__sak";class yT{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Lg,"1"),this.storage.removeItem(Lg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const _i=(()=>{class g extends yT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,_)=>this.onStorageEvent(h,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function el(){const g=(0,ve.z$)();return Iu(g)||Vo(g)}()&&function mt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xe(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),k=this.localCache[_];T!==k&&h(_,k,T)}}onStorageEvent(h,_=!1){if(!h.key)return void this.forAllChangedKeys((oe,Ce,Ve)=>{this.notifyListeners(oe,Ve)});const T=h.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(T);if(h.newValue!==oe)null!==h.newValue?this.storage.setItem(T,h.newValue):this.storage.removeItem(T);else if(this.localCache[T]===h.newValue&&!_)return}const k=()=>{const oe=this.storage.getItem(T);!_&&this.localCache[T]===oe||this.notifyListeners(T,oe)},Q=this.storage.getItem(T);!function ue(){return(0,ve.w1)()&&10===document.documentMode}()||Q===h.newValue||h.newValue===h.oldValue?k():setTimeout(k,10)}notifyListeners(h,_){this.localCache[h]=_;const T=this.listeners[h];if(T)for(const k of Array.from(T))k(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(_)}_removeListener(h,_){this.listeners[h]&&(this.listeners[h].delete(_),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,_){var T=()=>super._set,k=this;return(0,B.Z)(function*(){yield T().call(k,h,_),k.localCache[h]=JSON.stringify(_)})()}_get(h){var _=()=>super._get,T=this;return(0,B.Z)(function*(){const k=yield _().call(T,h);return T.localCache[h]=JSON.stringify(k),k})()}_remove(h){var _=()=>super._remove,T=this;return(0,B.Z)(function*(){yield _().call(T,h),delete T.localCache[h]})()}}return g.type="LOCAL",g})(),Ri=(()=>{class g extends yT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,_){}_removeListener(h,_){}}return g.type="SESSION",g})();let ub=(()=>{class g{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const _=this.receivers.find(k=>k.isListeningto(h));if(_)return _;const T=new g(h);return this.receivers.push(T),T}isListeningto(h){return this.eventTarget===h}handleEvent(h){var _=this;return(0,B.Z)(function*(){const T=h,{eventId:k,eventType:Q,data:oe}=T.data,Ce=_.handlersMap[Q];if(!Ce?.size)return;T.ports[0].postMessage({status:"ack",eventId:k,eventType:Q});const Ve=Array.from(Ce).map(function(){var Ye=(0,B.Z)(function*(Pn){return Pn(T.origin,oe)});return function(Pn){return Ye.apply(this,arguments)}}()),Ke=yield function cb(g){return Promise.all(g.map(function(){var d=(0,B.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(_){return{fulfilled:!1,reason:_}}});return function(h){return d.apply(this,arguments)}}()))}(Ve);T.ports[0].postMessage({status:"done",eventId:k,eventType:Q,response:Ke})})()}_subscribe(h,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(_)}_unsubscribe(h,_){this.handlersMap[h]&&_&&this.handlersMap[h].delete(_),(!_||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function rc(g="",d=10){let h="";for(let _=0;_<d;_++)h+=Math.floor(10*Math.random());return g+h}class db{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,_=50){var T=this;return(0,B.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Q,oe;return new Promise((Ce,Ve)=>{const Ke=rc("",20);k.port1.start();const Ye=setTimeout(()=>{Ve(new Error("unsupported_event"))},_);oe={messageChannel:k,onMessage(Pn){const Fs=Pn;if(Fs.data.eventId===Ke)switch(Fs.data.status){case"ack":clearTimeout(Ye),Q=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ce(Fs.data.response);break;default:clearTimeout(Ye),clearTimeout(Q),Ve(new Error("invalid_response"))}}},T.handlers.add(oe),k.port1.addEventListener("message",oe.onMessage),T.target.postMessage({eventType:d,eventId:Ke,data:h},[k.port2])}).finally(()=>{oe&&T.removeMessageHandler(oe)})})()}}function ai(){return window}function ju(){return typeof ai().WorkerGlobalScope<"u"&&"function"==typeof ai().importScripts}function Hh(){return(Hh=(0,B.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Uu="firebaseLocalStorageDb",$o="firebaseLocalStorage",jg="fbase_key";class zh{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Ug(g,d){return g.transaction([$o],d?"readwrite":"readonly").objectStore($o)}function Hg(){const g=indexedDB.open(Uu,1);return new Promise((d,h)=>{g.addEventListener("error",()=>{h(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore($o,{keyPath:jg})}catch(T){h(T)}}),g.addEventListener("success",(0,B.Z)(function*(){const _=g.result;_.objectStoreNames.contains($o)?d(_):(_.close(),yield function yO(){const g=indexedDB.deleteDatabase(Uu);return new zh(g).toPromise()}(),d(yield Hg()))}))})}function gb(g,d,h){return mb.apply(this,arguments)}function mb(){return(mb=(0,B.Z)(function*(g,d,h){const _=Ug(g,!0).put({[jg]:d,value:h});return new zh(_).toPromise()})).apply(this,arguments)}function zu(){return(zu=(0,B.Z)(function*(g,d){const h=Ug(g,!1).get(d),_=yield new zh(h).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function yb(g,d){const h=Ug(g,!0).delete(d);return new zh(h).toPromise()}const sc=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,B.Z)(function*(){return h.db||(h.db=yield Hg()),h.db})()}_withRetries(h){var _=this;return(0,B.Z)(function*(){let T=0;for(;;)try{const k=yield _._openDb();return yield h(k)}catch(k){if(T++>3)throw k;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,B.Z)(function*(){return ju()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,B.Z)(function*(){h.receiver=ub._getInstance(function pb(){return ju()?self:null}()),h.receiver._subscribe("keyChanged",function(){var _=(0,B.Z)(function*(T,k){return{keyProcessed:(yield h._poll()).includes(k.key)}});return function(T,k){return _.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var _=(0,B.Z)(function*(T,k){return["keyChanged"]});return function(T,k){return _.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,B.Z)(function*(){var _,T;if(h.activeServiceWorker=yield function Bg(){return Hh.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new db(h.activeServiceWorker);const k=yield h.sender._send("ping",{},800);k&&null!==(_=k[0])&&void 0!==_&&_.fulfilled&&null!==(T=k[0])&&void 0!==T&&T.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var _=this;return(0,B.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function fb(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:h},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,B.Z)(function*(){try{if(!indexedDB)return!1;const h=yield Hg();return yield gb(h,Lg,"1"),yield yb(h,Lg),!0}catch{}return!1})()}_withPendingWrite(h){var _=this;return(0,B.Z)(function*(){_.pendingWrites++;try{yield h()}finally{_.pendingWrites--}})()}_set(h,_){var T=this;return(0,B.Z)(function*(){return T._withPendingWrite((0,B.Z)(function*(){return yield T._withRetries(k=>gb(k,h,_)),T.localCache[h]=_,T.notifyServiceWorker(h)}))})()}_get(h){var _=this;return(0,B.Z)(function*(){const T=yield _._withRetries(k=>function _b(g,d){return zu.apply(this,arguments)}(k,h));return _.localCache[h]=T,T})()}_remove(h){var _=this;return(0,B.Z)(function*(){return _._withPendingWrite((0,B.Z)(function*(){return yield _._withRetries(T=>yb(T,h)),delete _.localCache[h],_.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,B.Z)(function*(){const _=yield h._withRetries(Q=>{const oe=Ug(Q,!1).getAll();return new zh(oe).toPromise()});if(!_)return[];if(0!==h.pendingWrites)return[];const T=[],k=new Set;if(0!==_.length)for(const{fbase_key:Q,value:oe}of _)k.add(Q),JSON.stringify(h.localCache[Q])!==JSON.stringify(oe)&&(h.notifyListeners(Q,oe),T.push(Q));for(const Q of Object.keys(h.localCache))h.localCache[Q]&&!k.has(Q)&&(h.notifyListeners(Q,null),T.push(Q));return T})()}notifyListeners(h,_){this.localCache[h]=_;const T=this.listeners[h];if(T)for(const k of Array.from(T))k(_)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,B.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(_)}_removeListener(h,_){this.listeners[h]&&(this.listeners[h].delete(_),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),$u=1e12;class CT{constructor(d){this.auth=d,this.counter=$u,this._widgets=new Map}render(d,h){const _=this.counter;return this._widgets.set(_,new wb(d,this.auth.name,h||{})),this.counter++,_}reset(d){var h;const _=d||$u;null===(h=this._widgets.get(_))||void 0===h||h.delete(),this._widgets.delete(_)}getResponse(d){var h;return(null===(h=this._widgets.get(d||$u))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,B.Z)(function*(){var _;return null===(_=h._widgets.get(d||$u))||void 0===_||_.execute(),""})()}}class wb{constructor(d,h,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof d?document.getElementById(d):d;Ae(T,"argument-error",{appName:h}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ET(g){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(h.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cb=sT("rcb"),DT=new he(3e4,6e4);class zi{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=ai().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return Ae(function Eb(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&pr(ai().grecaptcha)?Promise.resolve(ai().grecaptcha):new Promise((_,T)=>{const k=ai().setTimeout(()=>{T(vn(d,"network-request-failed"))},DT.get());ai()[Cb]=()=>{ai().clearTimeout(k),delete ai()[Cb];const oe=ai().grecaptcha;if(!oe||!pr(oe))return void T(vn(d,"internal-error"));const Ce=oe.render;oe.render=(Ve,Ke)=>{const Ye=Ce(Ve,Ke);return this.counter++,Ye},this.hostLanguage=h,_(oe)},Fv(`${function iT(){return Dh.recaptchaV2Script}()}?${(0,ve.xO)({onload:Cb,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(k),T(vn(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=ai().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class TT{load(d){return(0,B.Z)(function*(){return new CT(d)})()}clearedOneInstance(){}}const Db="recaptcha",Tb={theme:"light",type:"image"};class Sb{constructor(d,h,_=Object.assign({},Tb)){this.parameters=_,this.type=Db,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rn(d),this.isInvisible="invisible"===this.parameters.size,Ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;Ae(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new TT:new zi,this.validateStartingState()}verify(){var d=this;return(0,B.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(h)||new Promise(k=>{const Q=oe=>{oe&&(d.tokenChangeListeners.delete(Q),k(oe))};d.tokenChangeListeners.add(Q),d.isInvisible&&_.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(_=>_(h)),"function"==typeof d)d(h);else if("string"==typeof d){const _=ai()[d];"function"==typeof _&&_(h)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,B.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const _=document.createElement("div");h.appendChild(_),h=_}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,B.Z)(function*(){Ae(Is()&&!ju(),d.auth,"internal-error"),yield function ST(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function $a(g){return si.apply(this,arguments)}(d.auth);Ae(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wu{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=Ya._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function Rs(){return(Rs=(0,B.Z)(function*(g,d,h){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const _=rn(g),T=yield tl(_,d,(0,ve.m9)(h));return new Wu(T,k=>Nh(_,k))})).apply(this,arguments)}function $h(){return($h=(0,B.Z)(function*(g,d,h){const _=(0,ve.m9)(g);yield Rh(!1,_,"phone");const T=yield tl(_.auth,d,(0,ve.m9)(h));return new Wu(T,k=>ib(_,k))})).apply(this,arguments)}function qu(){return(qu=(0,B.Z)(function*(g,d,h){const _=(0,ve.m9)(g);if((0,Ze._isFirebaseServerApp)(_.auth.app))return Promise.reject(ot(_.auth));const T=yield tl(_.auth,d,(0,ve.m9)(h));return new Wu(T,k=>rb(_,k))})).apply(this,arguments)}function tl(g,d,h){return yr.apply(this,arguments)}function yr(){return yr=(0,B.Z)(function*(g,d,h){var _;const T=yield h.verify();try{let k;if(Ae("string"==typeof T,g,"argument-error"),Ae(h.type===Db,g,"argument-error"),k="string"==typeof d?{phoneNumber:d}:d,"session"in k){const Q=k.session;if("phoneNumber"in k)return Ae("enroll"===Q.type,g,"internal-error"),(yield function hO(g,d){return Re(g,"POST","/v2/accounts/mfaEnrollment:start",ge(g,d))}(g,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Ae("signin"===Q.type,g,"internal-error");const oe=(null===(_=k.multiFactorHint)||void 0===_?void 0:_.uid)||k.multiFactorUid;return Ae(oe,g,"missing-multi-factor-info"),(yield function vb(g,d){return Re(g,"POST","/v2/accounts/mfaSignIn:start",ge(g,d))}(g,{mfaPendingCredential:Q.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function uT(g,d){return go.apply(this,arguments)}(g,{phoneNumber:k.phoneNumber,recaptchaToken:T});return Q}}finally{h._reset()}}),yr.apply(this,arguments)}function Wh(){return(Wh=(0,B.Z)(function*(g,d){const h=(0,ve.m9)(g);if((0,Ze._isFirebaseServerApp)(h.auth.app))return Promise.reject(ot(h.auth));yield Ph(h,d)})).apply(this,arguments)}let bo=(()=>{class g{constructor(h){this.providerId=g.PROVIDER_ID,this.auth=rn(h)}verifyPhoneNumber(h,_){return tl(this.auth,h,(0,ve.m9)(_))}static credential(h,_){return Ya._fromVerification(h,_)}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:_,temporaryProof:T}=h;return _&&T?Ya._fromTokenResponse(_,T):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Oi(g,d){return d?lt(d):(Ae(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class $g extends Yl{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Bo(d,this._buildIdpRequest())}_linkToIdToken(d,h){return Bo(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return Bo(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function xT(g){return nb(g.auth,new $g(g),g.bypassAuthState)}function kT(g){const{auth:d,user:h}=g;return Ae(h,d,"internal-error"),tb(h,new $g(g),g.bypassAuthState)}function fa(g){return qh.apply(this,arguments)}function qh(){return(qh=(0,B.Z)(function*(g){const{auth:d,user:h}=g;return Ae(h,d,"internal-error"),Ph(h,new $g(g),g.bypassAuthState)})).apply(this,arguments)}class Ab{constructor(d,h,_,T,k=!1){this.auth=d,this.resolver=_,this.user=T,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,B.Z)(function*(_,T){d.pendingPromise={resolve:_,reject:T};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(k){d.reject(k)}});return function(_,T){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,B.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:k,tenantId:Q,error:oe,type:Ce}=d;if(oe)return void h.reject(oe);const Ve={auth:h.auth,requestUri:_,sessionId:T,tenantId:Q||void 0,postBody:k||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Ce)(Ve))}catch(Ke){h.reject(Ke)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return xT;case"linkViaPopup":case"linkViaRedirect":return fa;case"reauthViaPopup":case"reauthViaRedirect":return kT;default:nn(this.auth,"internal-error")}}resolve(d){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xb=new he(2e3,1e4);function Gh(){return(Gh=(0,B.Z)(function*(g,d,h){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(vn(g,"operation-not-supported-in-this-environment"));const _=rn(g);di(g,d,Hi);const T=Oi(_,h);return new Wg(_,"signInViaPopup",d,T).executeNotNull()})).apply(this,arguments)}function dt(){return(dt=(0,B.Z)(function*(g,d,h){const _=(0,ve.m9)(g);if((0,Ze._isFirebaseServerApp)(_.auth.app))return Promise.reject(vn(_.auth,"operation-not-supported-in-this-environment"));di(_.auth,d,Hi);const T=Oi(_.auth,h);return new Wg(_.auth,"reauthViaPopup",d,T,_).executeNotNull()})).apply(this,arguments)}function Pb(){return(Pb=(0,B.Z)(function*(g,d,h){const _=(0,ve.m9)(g);di(_.auth,d,Hi);const T=Oi(_.auth,h);return new Wg(_.auth,"linkViaPopup",d,T,_).executeNotNull()})).apply(this,arguments)}let Wg=(()=>{class g extends Ab{constructor(h,_,T,k,Q){super(h,_,k,Q),this.provider=T,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var h=this;return(0,B.Z)(function*(){const _=yield h.execute();return Ae(_,h.auth,"internal-error"),_})()}onExecution(){var h=this;return(0,B.Z)(function*(){Nn(1===h.filter.length,"Popup operations only handle one event");const _=rc();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],_),h.authWindow.associatedEvent=_,h.resolver._originValidation(h.auth).catch(T=>{h.reject(T)}),h.resolver._isIframeWebStorageSupported(h.auth,T=>{T||h.reject(vn(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const h=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,xb.get())};h()}}return g.currentPopupAction=null,g})();const PT="pendingRedirect",Gu=new Map;class Rb extends Ab{constructor(d,h,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,B.Z)(function*(){let _=Gu.get(h.auth._key());if(!_){try{const k=(yield function oc(g,d){return qg.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;_=()=>Promise.resolve(k)}catch(T){_=()=>Promise.reject(T)}Gu.set(h.auth._key(),_)}return h.bypassAuthState||Gu.set(h.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,_=this;return(0,B.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(_,d);if("unknown"!==d.type){if(d.eventId){const T=yield _.auth._redirectUserForId(d.eventId);if(T)return _.user=T,h().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,B.Z)(function*(){})()}cleanUp(){}}function qg(){return(qg=(0,B.Z)(function*(g,d){const h=zt(d),_=Se(g);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(h));return yield _._remove(h),T})).apply(this,arguments)}function Gg(g,d){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,B.Z)(function*(g,d){return Se(g)._set(zt(d),"true")})).apply(this,arguments)}function Kg(g,d){Gu.set(g._key(),d)}function Se(g){return lt(g._redirectPersistence)}function zt(g){return Qe(PT,g.config.apiKey,g.name)}function te(g,d,h){return function ne(g,d,h){return Ni.apply(this,arguments)}(g,d,h)}function Ni(){return(Ni=(0,B.Z)(function*(g,d,h){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const _=rn(g);di(g,d,Hi),yield _._initializationPromise;const T=Oi(_,h);return yield Gg(T,_),T._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Ob(g,d,h){return function Zu(g,d,h){return Os.apply(this,arguments)}(g,d,h)}function Os(){return(Os=(0,B.Z)(function*(g,d,h){const _=(0,ve.m9)(g);if(di(_.auth,d,Hi),(0,Ze._isFirebaseServerApp)(_.auth.app))return Promise.reject(ot(_.auth));yield _.auth._initializationPromise;const T=Oi(_.auth,h);yield Gg(T,_.auth);const k=yield Jg(_);return T._openRedirect(_.auth,d,"reauthViaRedirect",k)})).apply(this,arguments)}function Yg(g,d,h){return function Qg(g,d,h){return Xg.apply(this,arguments)}(g,d,h)}function Xg(){return(Xg=(0,B.Z)(function*(g,d,h){const _=(0,ve.m9)(g);di(_.auth,d,Hi),yield _.auth._initializationPromise;const T=Oi(_.auth,h);yield Rh(!1,_,d.providerId),yield Gg(T,_.auth);const k=yield Jg(_);return T._openRedirect(_.auth,d,"linkViaRedirect",k)})).apply(this,arguments)}function Zh(){return(Zh=(0,B.Z)(function*(g,d){return yield rn(g)._initializationPromise,$i(g,d,!1)})).apply(this,arguments)}function $i(g,d){return eo.apply(this,arguments)}function eo(){return(eo=(0,B.Z)(function*(g,d,h=!1){if((0,Ze._isFirebaseServerApp)(g.app))return Promise.reject(ot(g));const _=rn(g),T=Oi(_,d),Q=yield new Rb(_,T,h).execute();return Q&&!h&&(delete Q.user._redirectEventId,yield _._persistUserIfCurrent(Q.user),yield _._setRedirectUser(null,d)),Q})).apply(this,arguments)}function Jg(g){return pa.apply(this,arguments)}function pa(){return(pa=(0,B.Z)(function*(g){const d=rc(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Nb{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(h=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function OT(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fb(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var _;if(d.error&&!Fb(d)){const T=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";h.onError(vn(this.auth,T))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const _=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(em(d))}saveEventToCache(d){this.cachedEventUids.add(em(d)),this.lastProcessedEventTime=Date.now()}}function em(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Fb({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Kh(g){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,B.Z)(function*(g,d={}){return Re(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Lb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tm=/^https?/;function Yh(){return(Yh=(0,B.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Kh(g);for(const h of d)try{if(nm(h))return}catch{}nn(g,"unauthorized-domain")})).apply(this,arguments)}function nm(g){const d=fs(),{protocol:h,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const Q=new URL(g);return""===Q.hostname&&""===_?"chrome-extension:"===h&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&Q.hostname===_}if(!tm.test(h))return!1;if(Lb.test(g))return _===g;const T=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const Vb=new he(3e4,6e4);function im(){const g=ai().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let h=0;h<g.CP.length;h++)g.CP[h]=null}let Yu=null;const FT=new he(5e3,15e3),LT="__/auth/iframe",Nr="emulator/auth/iframe",nl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VT(g){const d=g.config;Ae(d.authDomain,g,"auth-domain-config-required");const h=d.emulator?_e(d,Nr):`https://${g.config.authDomain}/${LT}`,_={apiKey:d.apiKey,appName:g.name,v:Ze.SDK_VERSION},T=Kn.get(g.config.apiHost);T&&(_.eid=T);const k=g._getFrameworks();return k.length&&(_.fw=k.join(",")),`${h}?${(0,ve.xO)(_).slice(1)}`}function sm(){return sm=(0,B.Z)(function*(g){const d=yield function rm(g){return Yu=Yu||function Bb(g){return new Promise((d,h)=>{var _,T,k;function Q(){im(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{im(),h(vn(g,"network-request-failed"))},timeout:Vb.get()})}if(null!==(T=null===(_=ai().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)d(gapi.iframes.getContext());else{if(null===(k=ai().gapi)||void 0===k||!k.load){const oe=sT("iframefcb");return ai()[oe]=()=>{gapi.load?Q():h(vn(g,"network-request-failed"))},Fv(`${function rT(){return Dh.gapiScript}()}?onload=${oe}`).catch(Ce=>h(Ce))}Q()}}).catch(d=>{throw Yu=null,d})}(g),Yu}(g),h=ai().gapi;return Ae(h,g,"internal-error"),d.open({where:document.body,url:VT(g),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nl,dontclear:!0},_=>new Promise(function(){var T=(0,B.Z)(function*(k,Q){yield _.restyle({setHideOnLeave:!1});const oe=vn(g,"network-request-failed"),Ce=ai().setTimeout(()=>{Q(oe)},FT.get());function Ve(){ai().clearTimeout(Ce),k(_)}_.ping(Ve).then(Ve,()=>{Q(oe)})});return function(k,Q){return T.apply(this,arguments)}}()))}),sm.apply(this,arguments)}const jT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hb{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ef="__/auth/handler",om="emulator/auth/handler",zb=encodeURIComponent("fac");function tf(g,d,h,_,T,k){return am.apply(this,arguments)}function am(){return(am=(0,B.Z)(function*(g,d,h,_,T,k){Ae(g.config.authDomain,g,"auth-domain-config-required"),Ae(g.config.apiKey,g,"invalid-api-key");const Q={apiKey:g.config.apiKey,appName:g.name,authType:h,redirectUrl:_,v:Ze.SDK_VERSION,eventId:T};if(d instanceof Hi){d.setDefaultLanguage(g.languageCode),Q.providerId=d.providerId||"",(0,ve.xb)(d.getCustomParameters())||(Q.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ke,Ye]of Object.entries(k||{}))Q[Ke]=Ye}if(d instanceof jt){const Ke=d.getScopes().filter(Ye=>""!==Ye);Ke.length>0&&(Q.scopes=Ke.join(","))}g.tenantId&&(Q.tid=g.tenantId);const oe=Q;for(const Ke of Object.keys(oe))void 0===oe[Ke]&&delete oe[Ke];const Ce=yield g._getAppCheckToken(),Ve=Ce?`#${zb}=${encodeURIComponent(Ce)}`:"";return`${function ac({config:g}){return g.emulator?_e(g,om):`https://${g.authDomain}/${ef}`}(g)}?${(0,ve.xO)(oe).slice(1)}${Ve}`})).apply(this,arguments)}const il="webStorageSupport",HT=class UT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ri,this._completeRedirectFn=$i,this._overrideRedirectResult=Kg}_openPopup(d,h,_,T){var k=this;return(0,B.Z)(function*(){var Q;Nn(null===(Q=k.eventManagers[d._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const oe=yield tf(d,h,_,fs(),T);return function Xh(g,d,h,_=500,T=600){const k=Math.max((window.screen.availHeight-T)/2,0).toString(),Q=Math.max((window.screen.availWidth-_)/2,0).toString();let oe="";const Ce=Object.assign(Object.assign({},jT),{width:_.toString(),height:T.toString(),top:k,left:Q}),Ve=(0,ve.z$)().toLowerCase();h&&(oe=fn(Ve)?"_blank":h),aa(Ve)&&(d=d||"http://localhost",Ce.scrollbars="yes");const Ke=Object.entries(Ce).reduce((Pn,[Fs,df])=>`${Pn}${Fs}=${df},`,"");if(function ae(g=(0,ve.z$)()){var d;return Vo(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Ve)&&"_self"!==oe)return function Jh(g,d){const h=document.createElement("a");h.href=g,h.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(_)}(d||"",oe),new Hb(null);const Ye=window.open(d||"",oe,Ke);Ae(Ye,g,"popup-blocked");try{Ye.focus()}catch{}return new Hb(Ye)}(d,oe,rc())})()}_openRedirect(d,h,_,T){var k=this;return(0,B.Z)(function*(){return yield k._originValidation(d),function hb(g){ai().location.href=g}(yield tf(d,h,_,fs(),T)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:T,promise:k}=this.eventManagers[h];return T?Promise.resolve(T):(Nn(k,"If manager is not set, promise should be"),k)}const _=this.initAndGetManager(d);return this.eventManagers[h]={promise:_},_.catch(()=>{delete this.eventManagers[h]}),_}initAndGetManager(d){var h=this;return(0,B.Z)(function*(){const _=yield function BT(g){return sm.apply(this,arguments)}(d),T=new Nb(d);return _.register("authEvent",k=>(Ae(k?.authEvent,d,"invalid-auth-event"),{status:T.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:T},h.iframes[d._key()]=_,T})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(il,{type:il},T=>{var k;const Q=null===(k=T?.[0])||void 0===k?void 0:k[il];void 0!==Q&&h(!!Q),nn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function NT(g){return Yh.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return xe()||Iu()||Vo()}};class lm{constructor(d){this.factorId=d}_process(d,h,_){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,_);case"signin":return this._finalizeSignIn(d,h.credential);default:return qn("unexpected MultiFactorSessionType")}}}class $b extends lm{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new $b(d)}_finalizeEnroll(d,h,_){return function fO(g,d){return Re(g,"POST","/v2/accounts/mfaEnrollment:finalize",ge(g,d))}(d,{idToken:h,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function bb(g,d){return Re(g,"POST","/v2/accounts/mfaSignIn:finalize",ge(g,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zT=(()=>{class g{constructor(){}static assertion(h){return $b._fromCredential(h)}}return g.FACTOR_ID="phone",g})();var cc="@firebase/auth";class Qu{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,B.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);h&&(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wo(){return window}(0,ve.Pz)("authIdTokenMaxAge"),function tO(g){Dh=g}({loadJS:g=>new Promise((d,h)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=T=>{const k=vn("internal-error");k.customData=T,h(k)},_.type="text/javascript",_.charset="UTF-8",function qT(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function nf(g){(0,Ze._registerComponent)(new ri.wA("auth",(d,{options:h})=>{const _=d.getProvider("app").getImmediate(),T=d.getProvider("heartbeat"),k=d.getProvider("app-check-internal"),{apiKey:Q,authDomain:oe}=_.options;Ae(Q&&!Q.includes(":"),"invalid-api-key",{appName:_.name});const Ce={apiKey:Q,authDomain:oe,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yt(g)},Ve=new Nv(_,T,k,Ce);return function Bv(g,d){const h=d?.persistence||[],_=(Array.isArray(h)?h:[h]).map(lt);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(Ve,h),Ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,_)=>{d.getProvider("auth-internal").initialize()})),(0,Ze._registerComponent)(new ri.wA("auth-internal",d=>{const h=rn(d.getProvider("auth").getImmediate());return new Qu(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ze.registerVersion)(cc,"1.7.4",function cm(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Ze.registerVersion)(cc,"1.7.4","esm2017")}("Browser");function uc(){return uc=(0,B.Z)(function*(g,d,h){var _;const{BuildInfo:T}=wo();Nn(d.sessionId,"AuthEvent did not contain a session ID");const k=yield function GT(g){return dc.apply(this,arguments)}(d.sessionId),Q={};return Vo()?Q.ibi=T.packageName:Lo()?Q.apn=T.packageName:nn(g,"operation-not-supported-in-this-environment"),T.displayName&&(Q.appDisplayName=T.displayName),Q.sessionId=k,tf(g,h,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,Q)}),uc.apply(this,arguments)}function fm(){return(fm=(0,B.Z)(function*(g){const{BuildInfo:d}=wo(),h={};Vo()?h.iosBundleId=d.packageName:Lo()?h.androidPackageName=d.packageName:nn(g,"operation-not-supported-in-this-environment"),yield Kh(g,h)})).apply(this,arguments)}function rf(){return(rf=(0,B.Z)(function*(g,d,h){const{cordova:_}=wo();let T=()=>{};try{yield new Promise((k,Q)=>{let oe=null;function Ce(){var Ye;k();const Pn=null===(Ye=_.plugins.browsertab)||void 0===Ye?void 0:Ye.close;"function"==typeof Pn&&Pn(),"function"==typeof h?.close&&h.close()}function Ve(){oe||(oe=window.setTimeout(()=>{Q(vn(g,"redirect-cancelled-by-user"))},2e3))}function Ke(){"visible"===document?.visibilityState&&Ve()}d.addPassiveListener(Ce),document.addEventListener("resume",Ve,!1),Lo()&&document.addEventListener("visibilitychange",Ke,!1),T=()=>{d.removePassiveListener(Ce),document.removeEventListener("resume",Ve,!1),document.removeEventListener("visibilitychange",Ke,!1),oe&&window.clearTimeout(oe)}})}finally{T()}})).apply(this,arguments)}function dc(){return(dc=(0,B.Z)(function*(g){const d=function rl(g){if(Nn(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),h=new Uint8Array(d);for(let _=0;_<g.length;_++)h[_]=g.charCodeAt(_);return h}(g),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Xb extends Nb{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,B.Z)(function*(){yield d.initPromise})()}}function e0(g){return sr.apply(this,arguments)}function sr(){return(sr=(0,B.Z)(function*(g){const d=yield Ju()._get(pm(g));return d&&(yield Ju()._remove(pm(g))),d})).apply(this,arguments)}function Wi(){const g=[];for(let h=0;h<20;h++){const _=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return g.join("")}function Ju(){return lt(_i)}function pm(g){return Qe("authEvent",g.config.apiKey,g.name)}function Go(g){if(!g?.includes("?"))return{};const[d,...h]=g.split("?");return(0,ve.zd)(h.join("?"))}const n0=class fc{constructor(){this._redirectPersistence=Ri,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$i,this._overrideRedirectResult=Kg}_initialize(d){var h=this;return(0,B.Z)(function*(){const _=d._key();let T=h.eventManagers.get(_);return T||(T=new Xb(d),h.eventManagers.set(_,T),h.attachCallbackListeners(d,T)),T})()}_openPopup(d){nn(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,_,T){var k=this;return(0,B.Z)(function*(){!function Qb(g){var d,h,_,T,k,Q,oe,Ce,Ve,Ke;const Ye=wo();Ae("function"==typeof(null===(d=Ye?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(typeof(null===(h=Ye?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(k=null===(T=null===(_=Ye?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===k?void 0:k.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Ce=null===(oe=null===(Q=Ye?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Ce?void 0:Ce.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Ke=null===(Ve=Ye?.cordova)||void 0===Ve?void 0:Ve.InAppBrowser)||void 0===Ke?void 0:Ke.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Q=yield k._initialize(d);yield Q.initialized(),Q.resetRedirect(),function RT(){Gu.clear()}(),yield k._originValidation(d);const oe=function Jb(g,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:Wi(),postBody:null,tenantId:g.tenantId,error:vn(g,"no-auth-event")}}(d,_,T);yield function Xu(g,d){return Ju()._set(pm(g),d)}(d,oe);const Ce=yield function Zb(g,d,h){return uc.apply(this,arguments)}(d,oe,h),Ve=yield function Kb(g){const{cordova:d}=wo();return new Promise(h=>{d.plugins.browsertab.isAvailable(_=>{let T=null;_?d.plugins.browsertab.openUrl(g):T=d.InAppBrowser.open(g,function H(g=(0,ve.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),h(T)})})}(Ce);return function Yb(g,d,h){return rf.apply(this,arguments)}(d,Q,Ve)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function hm(g){return fm.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:_,handleOpenURL:T,BuildInfo:k}=wo(),Q=setTimeout((0,B.Z)(function*(){yield e0(d),h.onEvent(af())}),500),oe=function(){var Ke=(0,B.Z)(function*(Ye){clearTimeout(Q);const Pn=yield e0(d);let Fs=null;Pn&&Ye?.url&&(Fs=function KT(g,d){var h,_;const T=function sf(g){const d=Go(g),h=d.link?decodeURIComponent(d.link):void 0,_=Go(h).link,T=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Go(T).link||T||_||h||g}(d);if(T.includes("/__/auth/callback")){const k=Go(T),Q=k.firebaseError?function t0(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,oe=null===(_=null===(h=Q?.code)||void 0===h?void 0:h.split("auth/"))||void 0===_?void 0:_[1],Ce=oe?vn(oe):null;return Ce?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Ce,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:T,postBody:null}}return null}(Pn,Ye.url)),h.onEvent(Fs||af())});return function(Pn){return Ke.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,oe);const Ce=T,Ve=`${k.packageName.toLowerCase()}://`;wo().handleOpenURL=function(){var Ke=(0,B.Z)(function*(Ye){if(Ye.toLowerCase().startsWith(Ve)&&oe({url:Ye}),"function"==typeof Ce)try{Ce(Ye)}catch(Pn){console.error(Pn)}});return function(Ye){return Ke.apply(this,arguments)}}()}};function af(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vn("no-auth-event")}}function lf(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function QT(g=(0,ve.z$)()){return!("file:"!==lf()&&"ionic:"!==lf()&&"capacitor:"!==lf()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function r0(){try{const g=self.localStorage,d=rc();if(g)return g.setItem(d,"1"),g.removeItem(d),!function XT(g=(0,ve.z$)()){return function IO(){return(0,ve.w1)()&&11===document?.documentMode}()||function gc(g=(0,ve.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,ve.hl)()}catch{return pi()&&(0,ve.hl)()}return!1}function pi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gm(){return(function TO(){return"http:"===lf()||"https:"===lf()}()||(0,ve.ru)()||QT())&&!function SO(){return(0,ve.b$)()||(0,ve.UG)()}()&&r0()&&!pi()}function mc(){return QT()&&typeof document<"u"}function Gr(){return(Gr=(0,B.Z)(function*(){return!!mc()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const Zr={LOCAL:"local",NONE:"none",SESSION:"session"},ma=Ae,yc="persistence";function s0(g){return mm.apply(this,arguments)}function mm(){return(mm=(0,B.Z)(function*(g){yield g._initializationPromise;const d=Kr(),h=Qe(yc,g.config.apiKey,g.name);d&&d.setItem(h,g._getPersistence())})).apply(this,arguments)}function Kr(){var g;try{return(null===(g=function _c(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const _m=Ae;class ms{constructor(){this.browserResolver=lt(HT),this.cordovaResolver=lt(n0),this.underlyingResolver=null,this._redirectPersistence=Ri,this._completeRedirectFn=$i,this._overrideRedirectResult=Kg}_initialize(d){var h=this;return(0,B.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,_,T){var k=this;return(0,B.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(d,h,_,T)})()}_openRedirect(d,h,_,T){var k=this;return(0,B.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(d,h,_,T)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return mc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _m(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,B.Z)(function*(){if(d.underlyingResolver)return;const h=yield function JT(){return Gr.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function tS(g){return g.unwrap()}function nS(g){return a0(g)}function a0(g){const{_tokenResponse:d}=g instanceof ve.ZR?g.customData:g;if(!d)return null;if(!(g instanceof ve.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return bo.credentialFromResult(g);const h=d.providerId;if(!h||h===Bt.PASSWORD)return null;let _;switch(h){case Bt.GOOGLE:_=xh;break;case Bt.FACEBOOK:_=Ah;break;case Bt.GITHUB:_=Eg;break;case Bt.TWITTER:_=kh;break;default:const{oauthIdToken:T,oauthAccessToken:k,oauthTokenSecret:Q,pendingToken:oe,nonce:Ce}=d;return k||Q||T||oe?oe?h.startsWith("saml.")?mo._create(h,oe):Pr._fromParams({providerId:h,signInMethod:h,pendingToken:oe,idToken:T,accessToken:k}):new jo(h).credential({idToken:T,accessToken:k,rawNonce:Ce}):null}return g instanceof ve.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Yr(g,d){return d.catch(h=>{throw h instanceof ve.ZR&&function iS(g,d){var h;const _=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new bm(g,function dO(g,d){var h;const _=(0,ve.m9)(g),T=d;return Ae(d.customData.operationType,_,"argument-error"),Ae(null===(h=T.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,_,"argument-error"),lb._fromError(_,T)}(g,d));else if(_){const T=a0(d),k=d;T&&(k.credential=T,k.tenantId=_.tenantId||void 0,k.email=_.email||void 0,k.phoneNumber=_.phoneNumber||void 0)}}(g,h),h}).then(h=>{const T=h.user;return{operationType:h.operationType,credential:nS(h),additionalUserInfo:Ng(h),user:Ns.getOrCreate(T)}})}function ym(g,d){return vm.apply(this,arguments)}function vm(){return(vm=(0,B.Z)(function*(g,d){const h=yield d;return{verificationId:h.verificationId,confirm:_=>Yr(g,h.confirm(_))}})).apply(this,arguments)}class bm{constructor(d,h){this.resolver=h,this.auth=function o0(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Yr(tS(this.auth),this.resolver.resolveSignIn(d))}}class Ns{constructor(d){this._delegate=d,this.multiFactor=function mO(g){const d=(0,ve.m9)(g);return Uh.has(d)||Uh.set(d,jh._fromUser(d)),Uh.get(d)}(d)}static getOrCreate(d){return Ns.USER_MAP.has(d)||Ns.USER_MAP.set(d,new Ns(d)),Ns.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,B.Z)(function*(){return Yr(h.auth,ib(h._delegate,d))})()}linkWithPhoneNumber(d,h){var _=this;return(0,B.Z)(function*(){return ym(_.auth,function Ib(g,d,h){return $h.apply(this,arguments)}(_._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,B.Z)(function*(){return Yr(h.auth,function Mb(g,d,h){return Pb.apply(this,arguments)}(h._delegate,d,ms))})()}linkWithRedirect(d){var h=this;return(0,B.Z)(function*(){return yield s0(rn(h.auth)),Yg(h._delegate,d,ms)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,B.Z)(function*(){return Yr(h.auth,rb(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return ym(this.auth,function Mn(g,d,h){return qu.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return Yr(this.auth,function MT(g,d,h){return dt.apply(this,arguments)}(this._delegate,d,ms))}reauthenticateWithRedirect(d){var h=this;return(0,B.Z)(function*(){return yield s0(rn(h.auth)),Ob(h._delegate,d,ms)})()}sendEmailVerification(d){return function _o(g,d){return Xa.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,B.Z)(function*(){return yield function Qs(g,d){return Ig.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function aO(g,d){const h=(0,ve.m9)(g);return(0,Ze._isFirebaseServerApp)(h.auth.app)?Promise.reject(ot(h.auth)):Og(h,d,null)}(this._delegate,d)}updatePassword(d){return function Rg(g,d){return Og((0,ve.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function AT(g,d){return Wh.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Vu(g,d){return Mt.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function ob(g,d,h){return yo.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ns.USER_MAP=new WeakMap;const ed=Ae;let vc=(()=>{class g{constructor(h,_){if(this.app=h,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=h.options;ed(T,"invalid-api-key",{appName:h.name}),ed(T,"invalid-api-key",{appName:h.name});const k=typeof window<"u"?ms:void 0;this._delegate=_.initialize({options:{persistence:cf(T,h.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(er),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,_){!function jv(g,d,h){const _=rn(g);Ae(_._canInitEmulator,_,"emulator-config-failed"),Ae(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const T=!!h?.disableWarnings,k=Au(d),{host:Q,port:oe}=function Th(g){const d=Au(g),h=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!h)return{host:"",port:null};const _=h[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const k=T[1];return{host:k,port:Sh(_.substr(k.length+1))}}{const[k,Q]=_.split(":");return{host:k,port:Sh(Q)}}}(d);_.config.emulator={url:`${k}//${Q}${null===oe?"":`:${oe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Q,port:oe,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Uv(){function g(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,h,_)}applyActionCode(h){return function oi(g,d){return ze.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return vt(this._delegate,h)}confirmPasswordReset(h,_){return function gT(g,d,h){return Pg.apply(this,arguments)}(this._delegate,h,_)}createUserWithEmailAndPassword(h,_){var T=this;return(0,B.Z)(function*(){return Yr(T._delegate,function _r(g,d,h){return la.apply(this,arguments)}(T._delegate,h,_))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function Lu(g,d){return da.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function _t(g,d){const h=gs.parseLink(d);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,B.Z)(function*(){ed(gm(),h._delegate,"operation-not-supported-in-this-environment");const _=yield function bO(g,d){return Zh.apply(this,arguments)}(h._delegate,ms);return _?Yr(h._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function pc(g,d){rn(g)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,_,T){const{next:k,error:Q,complete:oe}=l0(h,_,T);return this._delegate.onAuthStateChanged(k,Q,oe)}onIdTokenChanged(h,_,T){const{next:k,error:Q,complete:oe}=l0(h,_,T);return this._delegate.onIdTokenChanged(k,Q,oe)}sendSignInLinkToEmail(h,_){return function ca(g,d,h){return ua.apply(this,arguments)}(this._delegate,h,_)}sendPasswordResetEmail(h,_){return function sb(g,d,h){return Jl.apply(this,arguments)}(this._delegate,h,_||void 0)}setPersistence(h){var _=this;return(0,B.Z)(function*(){let T;switch(function eS(g,d){ma(Object.values(Zr).includes(d),g,"invalid-persistence-type"),(0,ve.b$)()?ma(d!==Zr.SESSION,g,"unsupported-persistence-type"):(0,ve.UG)()?ma(d===Zr.NONE,g,"unsupported-persistence-type"):pi()?ma(d===Zr.NONE||d===Zr.LOCAL&&(0,ve.hl)(),g,"unsupported-persistence-type"):ma(d===Zr.NONE||r0(),g,"unsupported-persistence-type")}(_._delegate,h),h){case Zr.SESSION:T=Ri;break;case Zr.LOCAL:T=(yield lt(sc)._isAvailable())?sc:_i;break;case Zr.NONE:T=ki;break;default:return nn("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Yr(this._delegate,function Xv(g){return Sg.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Yr(this._delegate,Nh(this._delegate,h))}signInWithCustomToken(h){return Yr(this._delegate,function nt(g,d){return Mi.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,_){return Yr(this._delegate,function fi(g,d,h){return(0,Ze._isFirebaseServerApp)(g.app)?Promise.reject(ot(g)):Nh((0,ve.m9)(g),Wr.credential(d,h)).catch(function(){var _=(0,B.Z)(function*(T){throw"auth/password-does-not-meet-requirements"===T.code&&Rr(g),T});return function(T){return _.apply(this,arguments)}}())}(this._delegate,h,_))}signInWithEmailLink(h,_){return Yr(this._delegate,function Fu(g,d,h){return Vh.apply(this,arguments)}(this._delegate,h,_))}signInWithPhoneNumber(h,_){return ym(this._delegate,function IT(g,d,h){return Rs.apply(this,arguments)}(this._delegate,h,_))}signInWithPopup(h){var _=this;return(0,B.Z)(function*(){return ed(gm(),_._delegate,"operation-not-supported-in-this-environment"),Yr(_._delegate,function kb(g,d,h){return Gh.apply(this,arguments)}(_._delegate,h,ms))})()}signInWithRedirect(h){var _=this;return(0,B.Z)(function*(){return ed(gm(),_._delegate,"operation-not-supported-in-this-environment"),yield s0(_._delegate),te(_._delegate,h,ms)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Xs(g,d){return Qa.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Zr,g})();function l0(g,d,h){let _=g;"function"!=typeof g&&({next:_,error:d,complete:h}=g);const T=_;return{next:Q=>T(Q&&Ns.getOrCreate(Q)),error:d,complete:h}}function cf(g,d){const h=function AO(g,d){const h=Kr();if(!h)return[];const _=Qe(yc,g,d);switch(h.getItem(_)){case Zr.NONE:return[ki];case Zr.LOCAL:return[sc,Ri];case Zr.SESSION:return[Ri];default:return[]}}(g,d);if(typeof self<"u"&&!h.includes(sc)&&h.push(sc),typeof window<"u")for(const _ of[_i,Ri])h.includes(_)||h.push(_);return h.includes(ki)||h.push(ki),h}class wm{constructor(){this.providerId="phone",this._delegate=new bo(tS(ht.Z.auth()))}static credential(d,h){return bo.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}wm.PHONE_SIGN_IN_METHOD=bo.PHONE_SIGN_IN_METHOD,wm.PROVIDER_ID=bo.PROVIDER_ID;const c0=Ae;class Cm{constructor(d,h,_=ht.Z.app()){var T;c0(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Sb(_.auth(),d,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function u0(g){g.INTERNAL.registerComponent(new ri.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new vc(h,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Wr,FacebookAuthProvider:Ah,GithubAuthProvider:Eg,GoogleAuthProvider:xh,OAuthProvider:jo,SAMLAuthProvider:Ou,PhoneAuthProvider:wm,PhoneMultiFactorGenerator:zT,RecaptchaVerifier:Cm,TwitterAuthProvider:kh,Auth:vc,AuthCredential:Yl,Error:ve.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.9")}(ht.Z)},861:(Fo,Xi,wt)=>{function B(Ze,ve,Et,Wn,ri,Ji,Bt){try{var De=Ze[Ji](Bt),Pe=De.value}catch(tt){return void Et(tt)}De.done?ve(Pe):Promise.resolve(Pe).then(Wn,ri)}function ht(Ze){return function(){var ve=this,Et=arguments;return new Promise(function(Wn,ri){var Ji=Ze.apply(ve,Et);function Bt(Pe){B(Ji,Wn,ri,Bt,De,"next",Pe)}function De(Pe){B(Ji,Wn,ri,Bt,De,"throw",Pe)}Bt(void 0)})}}wt.d(Xi,{Z:()=>ht})},582:(Fo,Xi,wt)=>{wt.d(Xi,{FC:()=>nn,KL:()=>kr,_T:()=>ve,mG:()=>tt,pi:()=>Ze,qq:()=>Vn});var Ze=function(){return Ze=Object.assign||function(_e){for(var se,Ee=1,Oe=arguments.length;Ee<Oe;Ee++)for(var ge in se=arguments[Ee])Object.prototype.hasOwnProperty.call(se,ge)&&(_e[ge]=se[ge]);return _e},Ze.apply(this,arguments)};function ve(he,_e){var se={};for(var Ee in he)Object.prototype.hasOwnProperty.call(he,Ee)&&_e.indexOf(Ee)<0&&(se[Ee]=he[Ee]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Ee=Object.getOwnPropertySymbols(he);Oe<Ee.length;Oe++)_e.indexOf(Ee[Oe])<0&&Object.prototype.propertyIsEnumerable.call(he,Ee[Oe])&&(se[Ee[Oe]]=he[Ee[Oe]])}return se}function tt(he,_e,se,Ee){return new(se||(se=Promise))(function(ge,Re){function Ht(Tt){try{st(Ee.next(Tt))}catch(Bn){Re(Bn)}}function Fe(Tt){try{st(Ee.throw(Tt))}catch(Bn){Re(Bn)}}function st(Tt){Tt.done?ge(Tt.value):function Oe(ge){return ge instanceof se?ge:new se(function(Re){Re(ge)})}(Tt.value).then(Ht,Fe)}st((Ee=Ee.apply(he,_e||[])).next())})}function Vn(he){return this instanceof Vn?(this.v=he,this):new Vn(he)}function nn(he,_e,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Ee=se.apply(he,_e||[]),ge=[];return Oe={},Ht("next"),Ht("throw"),Ht("return",function Re(cn){return function(Ti){return Promise.resolve(Ti).then(cn,Bn)}}),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Ht(cn,Ti){Ee[cn]&&(Oe[cn]=function(hi){return new Promise(function(pr,Mr){ge.push([cn,hi,pr,Mr])>1||Fe(cn,hi)})},Ti&&(Oe[cn]=Ti(Oe[cn])))}function Fe(cn,Ti){try{!function st(cn){cn.value instanceof Vn?Promise.resolve(cn.value.v).then(Tt,Bn):As(ge[0][2],cn)}(Ee[cn](Ti))}catch(hi){As(ge[0][3],hi)}}function Tt(cn){Fe("next",cn)}function Bn(cn){Fe("throw",cn)}function As(cn,Ti){cn(Ti),ge.shift(),ge.length&&Fe(ge[0][0],ge[0][1])}}function kr(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,_e=he[Symbol.asyncIterator];return _e?_e.call(he):(he=function tn(he){var _e="function"==typeof Symbol&&Symbol.iterator,se=_e&&he[_e],Ee=0;if(se)return se.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Ee>=he.length&&(he=void 0),{value:he&&he[Ee++],done:!he}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),se={},Ee("next"),Ee("throw"),Ee("return"),se[Symbol.asyncIterator]=function(){return this},se);function Ee(ge){se[ge]=he[ge]&&function(Re){return new Promise(function(Ht,Fe){!function Oe(ge,Re,Ht,Fe){Promise.resolve(Fe).then(function(st){ge({value:st,done:Ht})},Re)}(Ht,Fe,(Re=he[ge](Re)).done,Re.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},Fo=>{Fo(Fo.s=136)}]);