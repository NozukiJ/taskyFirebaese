"use strict";(self.webpackChunktasky=self.webpackChunktasky||[]).push([[179],{58:(Js,xr,yt)=>{yt.d(xr,{BH:()=>ln,G6:()=>Za,L:()=>Pt,LL:()=>ce,Pz:()=>Zt,Sg:()=>ii,UG:()=>gn,ZB:()=>Ye,ZR:()=>Pe,aH:()=>Mn,b$:()=>Tn,eu:()=>ue,hl:()=>ae,jU:()=>Ie,m9:()=>Io,ne:()=>pi,pd:()=>gs,r3:()=>er,ru:()=>Fn,tV:()=>we,uI:()=>Jn,vZ:()=>sa,w1:()=>Yi,xO:()=>oa,xb:()=>si,z$:()=>rt,zd:()=>wc});const he=function(W){const L=[];let q=0;for(let fe=0;fe<W.length;fe++){let ne=W.charCodeAt(fe);ne<128?L[q++]=ne:ne<2048?(L[q++]=ne>>6|192,L[q++]=63&ne|128):55296==(64512&ne)&&fe+1<W.length&&56320==(64512&W.charCodeAt(fe+1))?(ne=65536+((1023&ne)<<10)+(1023&W.charCodeAt(++fe)),L[q++]=ne>>18|240,L[q++]=ne>>12&63|128,L[q++]=ne>>6&63|128,L[q++]=63&ne|128):(L[q++]=ne>>12|224,L[q++]=ne>>6&63|128,L[q++]=63&ne|128)}return L},Nn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,L){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,fe=[];for(let ne=0;ne<W.length;ne+=3){const ge=W[ne],Ke=ne+1<W.length,Jt=Ke?W[ne+1]:0,ct=ne+2<W.length,pr=ct?W[ne+2]:0;let Ln=(15&Jt)<<2|pr>>6,cn=63&pr;ct||(cn=64,Ke||(Ln=64)),fe.push(q[ge>>2],q[(3&ge)<<4|Jt>>4],q[Ln],q[cn])}return fe.join("")},encodeString(W,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(W):this.encodeByteArray(he(W),L)},decodeString(W,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(W):function(W){const L=[];let q=0,fe=0;for(;q<W.length;){const ne=W[q++];if(ne<128)L[fe++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const ge=W[q++];L[fe++]=String.fromCharCode((31&ne)<<6|63&ge)}else if(ne>239&&ne<365){const ct=((7&ne)<<18|(63&W[q++])<<12|(63&W[q++])<<6|63&W[q++])-65536;L[fe++]=String.fromCharCode(55296+(ct>>10)),L[fe++]=String.fromCharCode(56320+(1023&ct))}else{const ge=W[q++],Ke=W[q++];L[fe++]=String.fromCharCode((15&ne)<<12|(63&ge)<<6|63&Ke)}}return L.join("")}(this.decodeStringToByteArray(W,L))},decodeStringToByteArray(W,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,fe=[];for(let ne=0;ne<W.length;){const ge=q[W.charAt(ne++)],Jt=ne<W.length?q[W.charAt(ne)]:0;++ne;const pr=ne<W.length?q[W.charAt(ne)]:64;++ne;const qe=ne<W.length?q[W.charAt(ne)]:64;if(++ne,null==ge||null==Jt||null==pr||null==qe)throw new zn;fe.push(ge<<2|Jt>>4),64!==pr&&(fe.push(Jt<<4&240|pr>>2),64!==qe&&fe.push(pr<<6&192|qe))}return fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class zn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pt=function(W){return function(W){const L=he(W);return Nn.encodeByteArray(L,!0)}(W).replace(/\./g,"")},we=function(W){try{return Nn.decodeString(W,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Ye(W,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!At(q)||(W[q]=Ye(W[q],L[q]));return W}function At(W){return"__proto__"!==W}const Et=()=>{try{return function zt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=W&&we(W[1]);return L&&JSON.parse(L)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},Mn=()=>{var W;return null===(W=Et())||void 0===W?void 0:W.config},Zt=W=>{var L;return null===(L=Et())||void 0===L?void 0:L[`_${W}`]};class ln{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,fe)=>{q?this.reject(q):this.resolve(fe),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,fe))}}}function ii(W,L){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const fe=L||"demo-project",ne=W.iat||0,ge=W.sub||W.user_id;if(!ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ke=Object.assign({iss:`https://securetoken.google.com/${fe}`,aud:fe,iat:ne,exp:ne+3600,auth_time:ne,sub:ge,user_id:ge,firebase:{sign_in_provider:"custom",identities:{}}},W);return[Pt(JSON.stringify({alg:"none",type:"JWT"})),Pt(JSON.stringify(Ke)),""].join(".")}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Jn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function gn(){var W;const L=null===(W=Et())||void 0===W?void 0:W.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ie(){return"object"==typeof self&&self.self===self}function Fn(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Tn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Yi(){const W=rt();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Za(){return!gn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function ue(){return new Promise((W,L)=>{try{let q=!0;const fe="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(fe);ne.onsuccess=()=>{ne.result.close(),q||self.indexedDB.deleteDatabase(fe),W(!0)},ne.onupgradeneeded=()=>{q=!1},ne.onerror=()=>{var ge;L((null===(ge=ne.error)||void 0===ge?void 0:ge.message)||"")}}catch(q){L(q)}})}class Pe extends Error{constructor(L,q,fe){super(q),this.code=L,this.customData=fe,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(L,q,fe){this.service=L,this.serviceName=q,this.errors=fe}create(L,...q){const fe=q[0]||{},ne=`${this.service}/${L}`,ge=this.errors[L],Ke=ge?function ke(W,L){return W.replace(Vt,(q,fe)=>{const ne=L[fe];return null!=ne?String(ne):`<${fe}?>`})}(ge,fe):"Error";return new Pe(ne,`${this.serviceName}: ${Ke} (${ne}).`,fe)}}const Vt=/\{\$([^}]+)}/g;function er(W,L){return Object.prototype.hasOwnProperty.call(W,L)}function si(W){for(const L in W)if(Object.prototype.hasOwnProperty.call(W,L))return!1;return!0}function sa(W,L){if(W===L)return!0;const q=Object.keys(W),fe=Object.keys(L);for(const ne of q){if(!fe.includes(ne))return!1;const ge=W[ne],Ke=L[ne];if(Wn(ge)&&Wn(Ke)){if(!sa(ge,Ke))return!1}else if(ge!==Ke)return!1}for(const ne of fe)if(!q.includes(ne))return!1;return!0}function Wn(W){return null!==W&&"object"==typeof W}function oa(W){const L=[];for(const[q,fe]of Object.entries(W))Array.isArray(fe)?fe.forEach(ne=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(ne))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(fe));return L.length?"&"+L.join("&"):""}function wc(W){const L={};return W.replace(/^\?/,"").split("&").forEach(fe=>{if(fe){const[ne,ge]=fe.split("=");L[decodeURIComponent(ne)]=decodeURIComponent(ge)}}),L}function gs(W){const L=W.indexOf("?");if(!L)return"";const q=W.indexOf("#",L);return W.substring(L,q>0?q:void 0)}function pi(W,L){const q=new ms(W,L);return q.subscribe.bind(q)}class ms{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(fe=>{this.error(fe)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,fe){let ne;if(void 0===L&&void 0===q&&void 0===fe)throw new Error("Missing Observer.");ne=function _s(W,L){if("object"!=typeof W||null===W)return!1;for(const q of L)if(q in W&&"function"==typeof W[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:fe},void 0===ne.next&&(ne.next=mn),void 0===ne.error&&(ne.error=mn),void 0===ne.complete&&(ne.complete=mn);const ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),ge}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(fe){typeof console<"u"&&console.error&&console.error(fe)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mn(){}function Io(W){return W&&W._delegate?W._delegate:W}},943:(Js,xr,yt)=>{function k(n){return"function"==typeof n}function lt(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const $e=lt(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function he(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class wt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(k(r))try{r()}catch(s){e=s instanceof $e?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Pr(s)}catch(o){e=e??[],o instanceof $e?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $e(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Pr(e);else{if(e instanceof wt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&he(t,e)}remove(e){const{_finalizers:t}=this;t&&he(t,e),e instanceof wt&&e._removeParent(this)}}wt.EMPTY=(()=>{const n=new wt;return n.closed=!0,n})();const Nn=wt.EMPTY;function zn(n){return n instanceof wt||n&&"closed"in n&&k(n.remove)&&k(n.add)&&k(n.unsubscribe)}function Pr(n){k(n)?n():n.unsubscribe()}const Pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},we={setTimeout(n,e,...t){const{delegate:r}=we;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=we;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Re(n){we.setTimeout(()=>{const{onUnhandledError:e}=Pt;if(!e)throw n;e(n)})}function Ye(){}const At=Gt("C",void 0,void 0);function Gt(n,e,t){return{kind:n,value:e,error:t}}let ht=null;function Et(n){if(Pt.useDeprecatedSynchronousErrorHandling){const e=!ht;if(e&&(ht={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ht;if(ht=null,t)throw r}}else n()}class Fr extends wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zn(e)&&e.add(this)):this.destination=Ie}static create(e,t,r){return new ii(e,t,r)}next(e){this.isStopped?gn(function Or(n){return Gt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?gn(function zt(n){return Gt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gn(At,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Mn=Function.prototype.bind;function Zt(n,e){return Mn.call(n,e)}class ln{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){rt(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){rt(r)}else rt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){rt(t)}}}class ii extends Fr{constructor(e,t,r){let i;if(super(),k(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Pt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zt(e.next,s),error:e.error&&Zt(e.error,s),complete:e.complete&&Zt(e.complete,s)}):i=e}this.destination=new ln(i)}}function rt(n){Pt.useDeprecatedSynchronousErrorHandling?function Nr(n){Pt.useDeprecatedSynchronousErrorHandling&&ht&&(ht.errorThrown=!0,ht.error=n)}(n):Re(n)}function gn(n,e){const{onStoppedNotification:t}=Pt;t&&we.setTimeout(()=>t(n,e))}const Ie={closed:!0,next:Ye,error:function Jn(n){throw n},complete:Ye},Fn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Tn(n){return n}function Yi(n){return 0===n.length?Tn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ae(n){return n&&n instanceof Fr||function Za(n){return n&&k(n.next)&&k(n.error)&&k(n.complete)}(n)&&zn(n)}(t)?t:new ii(t,r,i);return Et(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ia(r))((i,s)=>{const o=new ii({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Fn](){return this}pipe(...t){return Yi(t)(this)}toPromise(t){return new(t=ia(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ia(n){var e;return null!==(e=n??Pt.Promise)&&void 0!==e?e:Promise}const ue=lt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Y=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ve(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ue}next(t){Et(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Et(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Et(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Nn:(this.currentObservers=null,s.push(t),new wt(()=>{this.currentObservers=null,he(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return n.create=(e,t)=>new ve(e,t),n})();class ve extends Y{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Nn}}function Pe(n){return k(n?.lift)}function ce(n){return e=>{if(Pe(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(n,e,t,r,i){return new Vt(n,e,t,r,i)}class Vt extends Fr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return ce((t,r)=>{let i=0;t.subscribe(ke(r,s=>{r.next(n.call(e,s,i++))}))})}var nt=yt(582);const Ct=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Rn(n){return k(n?.then)}function Qi(n){return k(n[Fn])}function Xt(n){return Symbol.asyncIterator&&k(n?.[Symbol.asyncIterator])}function ur(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Zr=function er(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function si(n){return k(n?.[Zr])}function Ka(n){return(0,nt.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,nt.qq)(t.read());if(i)return yield(0,nt.qq)(void 0);yield yield(0,nt.qq)(r)}}finally{t.releaseLock()}})}function sa(n){return k(n?.getReader)}function Wn(n){if(n instanceof dt)return n;if(null!=n){if(Qi(n))return function vc(n){return new dt(e=>{const t=n[Fn]();if(k(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ct(n))return function oa(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Rn(n))return function wc(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Re)})}(n);if(Xt(n))return Ec(n);if(si(n))return function gs(n){return new dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(sa(n))return function pi(n){return Ec(Ka(n))}(n)}throw ur(n)}function Ec(n){return new dt(e=>{(function ms(n,e){var t,r,i,s;return(0,nt.mG)(this,void 0,void 0,function*(){try{for(t=(0,nt.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function dr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function mn(n,e,t=1/0){return k(e)?mn((r,i)=>Oe((s,o)=>e(r,s,i,o))(Wn(n(r,i))),t):("number"==typeof e&&(t=e),ce((r,i)=>function _s(n,e,t,r,i,s,o,a){const l=[];let c=0,h=0,m=!1;const _=()=>{m&&!l.length&&!c&&e.complete()},v=b=>c<r?C(b):l.push(b),C=b=>{s&&e.next(b),c++;let T=!1;Wn(t(b,h++)).subscribe(ke(e,B=>{i?.(B),s?v(B):e.next(B)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<r;){const B=l.shift();o?dr(e,o,()=>C(B)):C(B)}_()}catch(B){e.error(B)}}))};return n.subscribe(ke(e,v,()=>{m=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function Xi(n=1/0){return mn(Tn,n)}const hr=new dt(n=>n.complete());function Ya(n){return n&&k(n.schedule)}function gi(n){return n[n.length-1]}function aa(n){return k(gi(n))?n.pop():void 0}function fr(n){return Ya(gi(n))?n.pop():void 0}function Fi(n,e=0){return ce((t,r)=>{t.subscribe(ke(r,i=>dr(r,n,()=>r.next(i),e),()=>dr(r,n,()=>r.complete(),e),i=>dr(r,n,()=>r.error(i),e)))})}function mi(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Io(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{dr(t,e,()=>{const r=n[Symbol.asyncIterator]();dr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function q(n,e){return e?function L(n,e){if(null!=n){if(Qi(n))return function To(n,e){return Wn(n).pipe(mi(e),Fi(e))}(n,e);if(Ct(n))return function Xa(n,e){return new dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Rn(n))return function rd(n,e){return Wn(n).pipe(mi(e),Fi(e))}(n,e);if(Xt(n))return Io(n,e);if(si(n))return function Dc(n,e){return new dt(t=>{let r;return dr(t,e,()=>{r=n[Zr](),dr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}(n,e);if(sa(n))return function W(n,e){return Io(Ka(n),e)}(n,e)}throw ur(n)}(n,e):Wn(n)}function fe(...n){const e=fr(n),t=function Qa(n,e){return"number"==typeof gi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Wn(r[0]):Xi(t)(q(r,e)):hr}class ne extends Y{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ge(...n){return q(n,fr(n))}function Ke(n={}){const{connector:e=(()=>new Y),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,h=!1,m=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=l=void 0,h=m=!1},C=()=>{const b=o;v(),b?.unsubscribe()};return ce((b,T)=>{c++,!m&&!h&&_();const B=l=l??e();T.add(()=>{c--,0===c&&!m&&!h&&(a=Jt(C,i))}),B.subscribe(T),!o&&c>0&&(o=new ii({next:P=>B.next(P),error:P=>{m=!0,_(),a=Jt(v,t,P),B.error(P)},complete:()=>{h=!0,_(),a=Jt(v,r),B.complete()}}),Wn(b).subscribe(o))})(s)}}function Jt(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ii({next:()=>{r.unsubscribe(),n()}});return Wn(e(...t)).subscribe(r)}function ct(n,e){return ce((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ke(r,l=>{i?.unsubscribe();let c=0;const h=s++;Wn(n(l,h)).subscribe(i=ke(r,m=>r.next(e?e(l,m,h,c++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function pr(n,e=Tn){return n=n??gr,ce((t,r)=>{let i,s=!0;t.subscribe(ke(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function gr(n,e){return n===e}function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("Could not find renamed property on target object.")}function Ln(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function cn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(cn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function So(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bc=qe({__forward_ref__:qe});function tn(n){return n.__forward_ref__=tn,n.toString=function(){return cn(this())},n}function ot(n){return eo(n)?n():n}function eo(n){return"function"==typeof n&&n.hasOwnProperty(bc)&&n.__forward_ref__===tn}function Ja(n){return n&&!!n.\u0275providers}const to="https://g.co/ng/security#xss";class x extends Error{constructor(e,t){super(function J(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ie(n){return"string"==typeof n?n:null==n?"":String(n)}function _n(n,e){throw new x(-201,!1)}function es(n,e){null==n&&function ut(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Wt(n){return{providers:n.providers||[],imports:n.imports||[]}}function el(n){return Y_(n,od)||Y_(n,X_)}function Y_(n,e){return n.hasOwnProperty(e)?n[e]:null}function Tc(n){return n&&(n.hasOwnProperty(ad)||n.hasOwnProperty(tl))?n[ad]:null}const od=qe({\u0275prov:qe}),ad=qe({\u0275inj:qe}),X_=qe({ngInjectableDef:qe}),tl=qe({ngInjectorDef:qe});var Rt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Rt||{});let Ic;function Kr(n){const e=Ic;return Ic=n,e}function ey(n,e,t){const r=el(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Rt.Optional?null:void 0!==e?e:void _n(cn(n))}const yn=globalThis;class Ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ca={},qf="__NG_DI_FLAG__",rl="ngTempTokenPath",no=/\n/gm,oy="__source";let oi;function Ps(n){const e=oi;return oi=n,e}function WD(n,e=Rt.Default){if(void 0===oi)throw new x(-203,!1);return null===oi?ey(n,void 0,e):oi.get(n,e&Rt.Optional?null:void 0,e)}function Q(n,e=Rt.Default){return(function J_(){return Ic}()||WD)(ot(n),e)}function Ue(n,e=Rt.Default){return Q(n,ld(e))}function ld(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zf(n){const e=[];for(let t=0;t<n.length;t++){const r=ot(n[t]);if(Array.isArray(r)){if(0===r.length)throw new x(900,!1);let i,s=Rt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=da(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Q(i,s))}else e.push(Q(r))}return e}function ua(n,e){return n[qf]=e,n.prototype[qf]=e,n}function da(n){return n[qf]}function Li(n){return{toString:n}.toString()}var Kf=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Kf||{}),_i=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(_i||{});const br={},Ot=[],ro=qe({\u0275cmp:qe}),cd=qe({\u0275dir:qe}),ud=qe({\u0275pipe:qe}),Yf=qe({\u0275mod:qe}),io=qe({\u0275fac:qe}),Os=qe({__NG_ELEMENT_ID__:qe}),ly=qe({__NG_ENV_ID__:qe});function kc(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function dd(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];hd(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Qf(n){return 3===n||4===n||6===n}function hd(n){return 64===n.charCodeAt(0)}function Yr(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Xf(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Xf(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const cy="ng-template";function Jf(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==kc(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function xc(n){return 4===n.type&&n.value!==cy}function uy(n,e,t){return e===(4!==n.type||t?n.value:cy)}function dy(n,e,t){let r=4;const i=n.attrs||[],s=function pd(n){for(let e=0;e<n.length;e++)if(Qf(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!uy(n,l,t)||""===l&&1===e.length){if(ys(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!Jf(n.attrs,c,t)){if(ys(r))return!1;o=!0}continue}const m=ep(8&r?"class":l,i,xc(n),t);if(-1===m){if(ys(r))return!1;o=!0;continue}if(""!==c){let _;_=m>s?"":i[m+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==kc(v,c,0)||2&r&&c!==_){if(ys(r))return!1;o=!0}}}}else{if(!o&&!ys(r)&&!ys(l))return!1;if(o&&ys(l))continue;o=!1,r=l|1&r}}return ys(r)||o}function ys(n){return 0==(1&n)}function ep(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function np(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function fd(n,e,t=!1){for(let r=0;r<e.length;r++)if(dy(n,e[r],t))return!0;return!1}function gd(n,e){return n?":not("+e.trim()+")":e}function fy(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ys(o)&&(e+=gd(s,i),i=""),r=o,s=s||!ys(r);t++}return""!==i&&(e+=gd(s,i)),e}function un(n){return Li(()=>{const e=yd(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Kf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||_i.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""};my(t);const r=n.dependencies;return t.directiveDefs=il(r,!1),t.pipeDefs=il(r,!0),t.id=function sp(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function ip(n){return kt(n)||_r(n)}function gy(n){return null!==n}function Ht(n){return Li(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _d(n,e){if(null==n)return br;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Qe(n){return Li(()=>{const e=yd(n);return my(e),e})}function mr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function kt(n){return n[ro]||null}function _r(n){return n[cd]||null}function Lr(n){return n[ud]||null}function ai(n,e){const t=n[Yf]||null;if(!t&&!0===e)throw new Error(`Type ${cn(n)} does not have '\u0275mod' property.`);return t}function yd(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||br,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_d(n.inputs,e),outputs:_d(n.outputs)}}function my(n){n.features?.forEach(e=>e(n))}function il(n,e){if(!n)return null;const t=e?Lr:ip;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(gy)}const qn=0,je=1,mt=2,vn=3,vs=4,ha=5,Qr=6,Ao=7,tr=8,Mo=9,Ro=10,pt=11,Pc=12,vd=13,sl=14,Vn=15,Oc=16,ko=17,Ns=18,fa=19,_y=20,Fs=21,oo=22,pa=23,Nc=24,It=25,op=1,ap=2,ts=7,ws=9,Vr=11;function yi(n){return Array.isArray(n)&&"object"==typeof n[op]}function li(n){return Array.isArray(n)&&!0===n[op]}function lp(n){return 0!=(4&n.flags)}function al(n){return n.componentOffset>-1}function cp(n){return 1==(1&n.flags)}function Ls(n){return!!n.template}function Fc(n){return 0!=(512&n[mt])}function ga(n,e){return n.hasOwnProperty(io)?n[io]:null}let ir=null,dp=!1;function yr(n){const e=ir;return ir=n,e}const wy={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function cl(n){if(!Bc(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Dd(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Dy(n){n.dirty=!0,function Cy(n){if(void 0===n.liveConsumerNode)return;const e=dp;dp=!0;try{for(const t of n.liveConsumerNode)t.dirty||Dy(t)}finally{dp=e}}(n),n.consumerMarkedDirty?.(n)}function Lc(n){return n&&(n.nextProducerIndex=0),yr(n)}function hp(n,e){if(yr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Bc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Dd(n){ao(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(cl(t),r!==t.version))return!0}return!1}function by(n){if(ao(n),Bc(n))for(let e=0;e<n.producerNode.length;e++)Vc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Vc(n,e){if(function fp(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),ao(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Vc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ao(i),i.producerIndexOfThis[r]=e}}function Bc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ao(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Ay=null;function jc(n){const e=yr(null);try{return n()}finally{yr(e)}}const xy=()=>{},rb=(()=>({...wy,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:xy}))();class ib{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Tr(){return Oy}function Oy(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ny),sb}function sb(){const n=Ly(this),e=n?.current;if(e){const t=n.previous;if(t===br)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ny(n,e,t,r){const i=this.declaredInputs[t],s=Ly(n)||function ob(n,e){return n[Fy]=e}(n,{previous:br,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new ib(l&&l.currentValue,e,a===br),n[r]=e}Tr.ngInherit=!0;const Fy="__ngSimpleChanges__";function Ly(n){return n[Fy]||null}const ns=function(n,e,t){};function wn(n){for(;Array.isArray(n);)n=n[qn];return n}function ma(n,e){return wn(e[n])}function Xr(n,e){return wn(e[n.index])}function Id(n,e){return n.data[e]}function Vs(n,e){return n[e]}function vr(n,e){const t=e[n];return yi(t)?t:t[qn]}function Po(n,e){return null==e?null:n[e]}function Sd(n){n[ko]=0}function By(n){1024&n[mt]||(n[mt]|=1024,jy(n,1))}function Uy(n){1024&n[mt]&&(n[mt]&=-1025,jy(n,-1))}function jy(n,e){let t=n[vn];if(null===t)return;t[ha]+=e;let r=t;for(t=t[vn];null!==t&&(1===e&&1===r[ha]||-1===e&&0===r[ha]);)t[ha]+=e,r=t,t=t[vn]}const at={lFrame:Rp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function zy(){return at.bindingsEnabled}function Ce(){return at.lFrame.lView}function Bt(){return at.lFrame.tView}function De(n){return at.lFrame.contextLView=n,n[tr]}function be(n){return at.lFrame.contextLView=null,n}function wr(){let n=Wy();for(;null!==n&&64===n.type;)n=n.parent;return n}function Wy(){return at.lFrame.currentTNode}function rs(n,e){const t=at.lFrame;t.currentTNode=n,t.isParent=e}function Dp(){return at.lFrame.isParent}function bp(){at.lFrame.isParent=!1}function Ir(){const n=at.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Oo(){return at.lFrame.bindingIndex++}function lo(n){const e=at.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Gy(n,e){const t=at.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rd(e)}function Rd(n){at.lFrame.currentDirectiveIndex=n}function Zy(){return at.lFrame.currentQueryIndex}function Ap(n){at.lFrame.currentQueryIndex=n}function gb(n){const e=n[je];return 2===e.type?e.declTNode:1===e.type?n[Qr]:null}function kd(n,e,t){if(t&Rt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Rt.Host||(i=gb(s),null===i||(s=s[sl],10&i.type))););if(null===i)return!1;e=i,n=s}const r=at.lFrame=Ky();return r.currentTNode=e,r.lView=n,!0}function Mp(n){const e=Ky(),t=n[je];at.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ky(){const n=at.lFrame,e=null===n?null:n.child;return null===e?Rp(n):e}function Rp(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Yy(){const n=at.lFrame;return at.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Gc=Yy;function kp(){const n=Yy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ci(){return at.lFrame.selectedIndex}function _a(n){at.lFrame.selectedIndex=n}function Bn(){const n=at.lFrame;return Id(n.tView,n.selectedIndex)}let Xy=!0;function xd(){return Xy}function No(n){Xy=n}function Pd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function Od(n,e,t){ev(n,e,3,t)}function Nd(n,e,t,r){(3&n[mt])===t&&ev(n,e,t,r)}function Pp(n,e){let t=n[mt];(3&t)===e&&(t&=8191,t+=1,n[mt]=t)}function ev(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[ko]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[ko]+=65536),(a<s||-1==s)&&(Op(n,t,e,l),n[ko]=(4294901760&n[ko])+l+2),l++}function Fd(n,e){ns(4,n,e);const t=yr(null);try{e.call(n)}finally{yr(t),ns(5,n,e)}}function Op(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[mt]>>13<n[ko]>>16&&(3&n[mt])===e&&(n[mt]+=8192,Fd(a,s)):Fd(a,s)}const hl=-1;class ya{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function fl(n){return n!==hl}function pl(n){return 32767&n}function Zc(n,e){let t=function rv(n){return n>>16}(n),r=e;for(;t>0;)r=r[sl],t--;return r}let Fp=!0;function Ld(n){const e=Fp;return Fp=n,e}const iv=255,Lp=5;let Tb=0;const co={};function Bs(n,e){const t=sv(n,e);if(-1!==t)return t;const r=e[je];r.firstCreatePass&&(n.injectorIndex=e.length,Vp(r.data,n),Vp(e,null),Vp(r.blueprint,null));const i=gl(n,e),s=n.injectorIndex;if(fl(i)){const o=pl(i),a=Zc(i,e),l=a[je].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Vp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function sv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function gl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=hv(i),null===r)return hl;if(t++,i=i[sl],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return hl}function Bp(n,e,t){!function Ib(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Os)&&(r=t[Os]),null==r&&(r=t[Os]=Tb++);const i=r&iv;e.data[n+(i>>Lp)]|=1<<i}(n,e,t)}function ov(n,e,t){if(t&Rt.Optional||void 0!==n)return n;_n()}function av(n,e,t,r){if(t&Rt.Optional&&void 0===r&&(r=null),!(t&(Rt.Self|Rt.Host))){const i=n[Mo],s=Kr(void 0);try{return i?i.get(e,r,t&Rt.Optional):ey(e,r,t&Rt.Optional)}finally{Kr(s)}}return ov(r,0,t)}function Vd(n,e,t,r=Rt.Default,i){if(null!==n){if(2048&e[mt]&&!(r&Rt.Self)){const o=function jp(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[mt]&&!(512&o[mt]);){const a=lv(s,o,t,r|Rt.Self,co);if(a!==co)return a;let l=s.parent;if(!l){const c=o[_y];if(c){const h=c.get(t,co,r);if(h!==co)return h}l=hv(o),o=o[sl]}s=l}return i}(n,e,t,r,co);if(o!==co)return o}const s=lv(n,e,t,r,co);if(s!==co)return s}return av(e,t,r,i)}function lv(n,e,t,r,i){const s=function Ab(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Os)?n[Os]:void 0;return"number"==typeof e?e>=0?e&iv:Mb:e}(t);if("function"==typeof s){if(!kd(e,n,r))return r&Rt.Host?ov(i,0,r):av(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Rt.Optional)return o;_n()}finally{Gc()}}else if("number"==typeof s){let o=null,a=sv(n,e),l=hl,c=r&Rt.Host?e[Vn][Qr]:null;for((-1===a||r&Rt.SkipSelf)&&(l=-1===a?gl(n,e):e[a+8],l!==hl&&uv(r,!1)?(o=e[je],a=pl(l),e=Zc(l,e)):a=-1);-1!==a;){const h=e[je];if(cv(s,a,h.data)){const m=Sb(a,e,t,o,r,c);if(m!==co)return m}l=e[a+8],l!==hl&&uv(r,e[je].data[a+8]===c)&&cv(s,a,e)?(o=h,a=pl(l),e=Zc(l,e)):a=-1}}return i}function Sb(n,e,t,r,i,s){const o=e[je],a=o.data[n+8],h=ml(a,o,t,null==r?al(a)&&Fp:r!=o&&0!=(3&a.type),i&Rt.Host&&s===a);return null!==h?va(e,o,h,a):co}function ml(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,_=i?a+h:n.directiveEnd;for(let v=r?a:a+h;v<_;v++){const C=o[v];if(v<l&&t===C||v>=l&&C.type===t)return v}if(i){const v=o[l];if(v&&Ls(v)&&v.type===t)return l}return null}function va(n,e,t,r){let i=n[t];const s=e.data;if(function Eb(n){return n instanceof ya}(i)){const o=i;o.resolving&&function ft(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new x(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Se(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ie(n)}(s[t]));const a=Ld(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Kr(o.injectImpl):null;kd(n,r,Rt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Jy(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Oy(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Kr(c),Ld(a),o.resolving=!1,Gc()}}return i}function cv(n,e,t){return!!(t[e+(n>>Lp)]&1<<n)}function uv(n,e){return!(n&Rt.Self||n&Rt.Host&&e)}class Br{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Vd(this._tNode,this._lView,e,ld(r),t)}}function Mb(){return new Br(wr(),Ce())}function Sr(n){return Li(()=>{const e=n.prototype.constructor,t=e[io]||Yc(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[io]||Yc(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Yc(n){return eo(n)?()=>{const e=Yc(ot(n));return e&&e()}:ga(n)}function hv(n){const e=n[je],t=e.type;return 2===t?e.declTNode:1===t?n[Qr]:null}const _l="__parameters__";function vl(n,e,t){return Li(()=>{const r=function Ud(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,h){const m=l.hasOwnProperty(_l)?l[_l]:Object.defineProperty(l,_l,{value:[]})[_l];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Cl(n,e){n.forEach(t=>Array.isArray(t)?Cl(t,e):e(t))}function wi(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Fo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ei(n,e,t){let r=Vi(n,e);return r>=0?n[1|r]=t:(r=~r,function $p(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function zp(n,e){const t=Vi(n,e);if(t>=0)return n[1|t]}function Vi(n,e){return function mv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const bl=ua(vl("Optional"),8),Hd=ua(vl("SkipSelf"),4);function Sv(n){return 128==(128&n.flags)}var Tl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Tl||{});const g6=/^>|^->|<!--|-->|--!>|<!-$/g,m6=/(<|>)/g,_6="\u200b$1\u200b";const Ub=new Map;let y6=0;const Hb="__ngContext__";function Di(n,e){yi(e)?(n[Hb]=e[fa],function w6(n){Ub.set(n[fa],n)}(e)):n[Hb]=e}let $b;function zb(n,e){return $b(n,e)}function tg(n){const e=n[vn];return li(e)?e[vn]:e}function Rx(n){return xx(n[Pc])}function kx(n){return xx(n[vs])}function xx(n){for(;null!==n&&!li(n);)n=n[vs];return n}function Gd(n,e,t,r,i){if(null!=r){let s,o=!1;li(r)?s=r:yi(r)&&(o=!0,r=r[qn]);const a=wn(r);0===n&&null!==t?null==i?Fx(e,t,a):Xc(e,t,a,i||null,!0):1===n&&null!==t?Xc(e,t,a,i||null,!0):2===n?function Ov(n,e,t){const r=xv(n,e);r&&function B6(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function H6(n,e,t,r,i){const s=t[ts];s!==wn(t)&&Gd(e,n,r,s,i);for(let a=Vr;a<t.length;a++){const l=t[a];rg(l[je],l,n,e,r,s)}}(e,n,s,t,i)}}function Wb(n,e){return n.createComment(function Cx(n){return n.replace(g6,e=>e.replace(m6,_6))}(e))}function Rv(n,e,t){return n.createElement(e,t)}function Ox(n,e){const t=n[ws],r=t.indexOf(e);Uy(e),t.splice(r,1)}function kv(n,e){if(n.length<=Vr)return;const t=Vr+e,r=n[t];if(r){const i=r[Oc];null!==i&&i!==n&&Ox(i,r),e>0&&(n[t-1][vs]=r[vs]);const s=Fo(n,Vr+e);!function k6(n,e){rg(n,e,e[pt],2,null,null),e[qn]=null,e[Qr]=null}(r[je],r);const o=s[Ns];null!==o&&o.detachView(s[je]),r[vn]=null,r[vs]=null,r[mt]&=-129}return r}function qb(n,e){if(!(256&e[mt])){const t=e[pt];e[pa]&&by(e[pa]),e[Nc]&&by(e[Nc]),t.destroyNode&&rg(n,e,t,3,null,null),function O6(n){let e=n[Pc];if(!e)return Gb(n[je],n);for(;e;){let t=null;if(yi(e))t=e[Pc];else{const r=e[Vr];r&&(t=r)}if(!t){for(;e&&!e[vs]&&e!==n;)yi(e)&&Gb(e[je],e),e=e[vn];null===e&&(e=n),yi(e)&&Gb(e[je],e),t=e&&e[vs]}e=t}}(e)}}function Gb(n,e){if(!(256&e[mt])){e[mt]&=-129,e[mt]|=256,function V6(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ya)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];ns(4,a,l);try{l.call(a)}finally{ns(5,a,l)}}else{ns(4,i,s);try{s.call(i)}finally{ns(5,i,s)}}}}}(n,e),function L6(n,e){const t=n.cleanup,r=e[Ao];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Ao]=null);const i=e[Fs];if(null!==i){e[Fs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[je].type&&e[pt].destroy();const t=e[Oc];if(null!==t&&li(e[vn])){t!==e[vn]&&Ox(t,e);const r=e[Ns];null!==r&&r.detachView(n)}!function E6(n){Ub.delete(n[fa])}(e)}}function Zb(n,e,t){return function Nx(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[qn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===_i.None||s===_i.Emulated)return null}return Xr(r,t)}}(n,e.parent,t)}function Xc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Fx(n,e,t){n.appendChild(e,t)}function Lx(n,e,t,r,i){null!==r?Xc(n,e,t,r,i):Fx(n,e,t)}function xv(n,e){return n.parentNode(e)}let Kb,Nv,Jb,Fv,Ux=function Bx(n,e,t){return 40&n.type?Xr(n,t):null};function Pv(n,e,t,r){const i=Zb(n,r,e),s=e[pt],a=function Vx(n,e,t){return Ux(n,e,t)}(r.parent||e[Qr],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)Lx(s,i,t[l],a,!1);else Lx(s,i,t,a,!1);void 0!==Kb&&Kb(s,r,e,t,i)}function ng(n,e){if(null!==e){const t=e.type;if(3&t)return Xr(e,n);if(4&t)return Yb(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return ng(n,r);{const i=n[e.index];return li(i)?Yb(-1,i):wn(i)}}if(32&t)return zb(e,n)()||wn(n[e.index]);{const r=Hx(n,e);return null!==r?Array.isArray(r)?r[0]:ng(tg(n[Vn]),r):ng(n,e.next)}}return null}function Hx(n,e){return null!==e?n[Vn][Qr].projection[e.projection]:null}function Yb(n,e){const t=Vr+n+1;if(t<e.length){const r=e[t],i=r[je].firstChild;if(null!==i)return ng(r,i)}return e[ts]}function Qb(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Di(wn(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)Qb(n,e,t.child,r,i,s,!1),Gd(e,n,i,a,s);else if(32&l){const c=zb(t,r);let h;for(;h=c();)Gd(e,n,i,h,s);Gd(e,n,i,a,s)}else 16&l?zx(n,e,r,t,i,s):Gd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function rg(n,e,t,r,i,s){Qb(t,r,n.firstChild,e,i,s,!1)}function zx(n,e,t,r,i,s){const o=t[Vn],l=o[Qr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Gd(e,n,i,l[c],s);else{let c=l;const h=o[vn];Sv(r)&&(c.flags|=128),Qb(n,e,c,h,i,s,!0)}}function Wx(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function qx(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&dd(n,e,r),null!==i&&Wx(n,e,i),null!==s&&function z6(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Zd(n){return function Xb(){if(void 0===Nv&&(Nv=null,yn.trustedTypes))try{Nv=yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nv}()?.createHTML(n)||n}function Kd(){if(void 0!==Jb)return Jb;if(typeof document<"u")return document;throw new x(210,!1)}function Gx(n){return function e0(){if(void 0===Fv&&(Fv=null,yn.trustedTypes))try{Fv=yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Fv}()?.createHTML(n)||n}class Yx{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${to})`}}function Il(n){return n instanceof Yx?n.changingThisBreaksApplicationSecurity:n}class t5{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Zd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class n5{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Zd(e),t}}const s5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wa(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function sg(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const Xx=wa("area,br,col,hr,img,wbr"),Jx=wa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),eP=wa("rp,rt"),n0=sg(Xx,sg(Jx,wa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sg(eP,wa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sg(eP,Jx)),r0=wa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tP=sg(r0,wa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),o5=wa("script,style,template");class a5{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!n0.hasOwnProperty(t))return this.sanitizedSomething=!0,!o5.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!tP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;r0[a]&&(n=l,l=(n=String(n)).match(s5)?n:"unsafe:"+n),this.buf.push(" ",o,'="',nP(l),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();n0.hasOwnProperty(t)&&!Xx.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(nP(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const l5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c5=/([^\#-~ |!])/g;function nP(n){return n.replace(/&/g,"&amp;").replace(l5,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(c5,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Lv;function s0(n){return"content"in n&&function d5(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Yd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Yd||{});function Vv(n){const e=function og(){const n=Ce();return n&&n[Ro].sanitizer}();return e?Gx(e.sanitize(Yd.HTML,n)||""):function ig(n,e){const t=function e5(n){return n instanceof Yx&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${to})`)}return t===e}(n,"HTML")?Gx(Il(n)):function u5(n,e){let t=null;try{Lv=Lv||function Qx(n){const e=new n5(n);return function r5(){try{return!!(new window.DOMParser).parseFromString(Zd(""),"text/html")}catch{return!1}}()?new t5(e):e}(n);let r=e?String(e):"";t=Lv.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Lv.getInertBodyElement(r)}while(r!==s);return Zd((new a5).sanitizeChildren(s0(t)||t))}finally{if(t){const r=s0(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(Kd(),ie(n))}const ag=new Ee("ENVIRONMENT_INITIALIZER"),oP=new Ee("INJECTOR",-1),aP=new Ee("INJECTOR_DEF_TYPES");class o0{get(e,t=ca){if(t===ca){const r=new Error(`NullInjectorError: No provider for ${cn(e)}!`);throw r.name="NullInjectorError",r}return t}}function a0(n){return{\u0275providers:n}}function lP(...n){return{\u0275providers:cP(0,n),\u0275fromNgModule:!0}}function cP(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Cl(e,o=>{const a=o;Bv(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&uP(i,s),t}function uP(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];l0(i,s=>{e(s,r)})}}function Bv(n,e,t,r){if(!(n=ot(n)))return!1;let i=null,s=Tc(n);const o=!s&&kt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Tc(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Bv(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Cl(s.imports,h=>{Bv(h,e,t,r)&&(c||=[],c.push(h))})}finally{}void 0!==c&&uP(c,e)}if(!a){const c=ga(i)||(()=>new i);e({provide:i,useFactory:c,deps:Ot},i),e({provide:aP,useValue:i,multi:!0},i),e({provide:ag,useValue:()=>Q(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;l0(l,h=>{e(h,c)})}}}return i!==n&&void 0!==n.providers}function l0(n,e){for(let t of n)Ja(t)&&(t=t.\u0275providers),Array.isArray(t)?l0(t,e):e(t)}const _5=qe({provide:String,useValue:qe});function c0(n){return null!==n&&"object"==typeof n&&_5 in n}function Jc(n){return"function"==typeof n}const u0=new Ee("Set Injector scope."),Uv={},v5={};let d0;function jv(){return void 0===d0&&(d0=new o0),d0}class Cs{}class Qd extends Cs{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,f0(e,o=>this.processProvider(o)),this.records.set(oP,Xd(void 0,this)),i.has("environment")&&this.records.set(Cs,Xd(void 0,this));const s=this.records.get(u0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(aP.multi,Ot,Rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ps(this),r=Kr(void 0);try{return e()}finally{Ps(t),Kr(r)}}get(e,t=ca,r=Rt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ly))return e[ly](this);r=ld(r);const s=Ps(this),o=Kr(void 0);try{if(!(r&Rt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function b5(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ee}(e)&&el(e);l=c&&this.injectableDefInScope(c)?Xd(h0(e),Uv):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&Rt.Self?jv():this.parent).get(e,t=r&Rt.Optional&&t===ca?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[rl]=a[rl]||[]).unshift(cn(e)),s)throw a;return function qD(n,e,t,r){const i=n[rl];throw e[oy]&&i.unshift(e[oy]),n.message=function GD(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=cn(e);if(Array.isArray(e))i=e.map(cn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):cn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(no,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[rl]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Kr(o),Ps(s)}}resolveInjectorInitializers(){const e=Ps(this),t=Kr(void 0);try{const i=this.get(ag.multi,Ot,Rt.Self);for(const s of i)s()}finally{Ps(e),Kr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(cn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){let t=Jc(e=ot(e))?e:ot(e&&e.provide);const r=function E5(n){return c0(n)?Xd(void 0,n.useValue):Xd(fP(n),Uv)}(e);if(Jc(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Xd(void 0,Uv,!0),i.factory=()=>Zf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Uv&&(t.value=v5,t.value=t.factory()),"object"==typeof t.value&&t.value&&function D5(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ot(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function h0(n){const e=el(n),t=null!==e?e.factory:ga(n);if(null!==t)return t;if(n instanceof Ee)throw new x(204,!1);if(n instanceof Function)return function w5(n){const e=n.length;if(e>0)throw function Dl(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new x(204,!1);const t=function Q_(n){return n&&(n[od]||n[X_])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new x(204,!1)}function fP(n,e,t){let r;if(Jc(n)){const i=ot(n);return ga(i)||h0(i)}if(c0(n))r=()=>ot(n.useValue);else if(function hP(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Zf(n.deps||[]));else if(function dP(n){return!(!n||!n.useExisting)}(n))r=()=>Q(ot(n.useExisting));else{const i=ot(n&&(n.useClass||n.provide));if(!function C5(n){return!!n.deps}(n))return ga(i)||h0(i);r=()=>new i(...Zf(n.deps))}return r}function Xd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function f0(n,e){for(const t of n)Array.isArray(t)?f0(t,e):t&&Ja(t)?f0(t.\u0275providers,e):e(t)}const Hv=new Ee("AppId",{providedIn:"root",factory:()=>T5}),T5="ng",pP=new Ee("Platform Initializer"),Us=new Ee("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),lg=new Ee("AnimationModuleType"),p0=new Ee("CSP nonce",{providedIn:"root",factory:()=>Kd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let gP=(n,e,t)=>null;function C0(n,e,t=!1){return gP(n,e,t)}class N5{}class yP{}class L5{resolveComponentFactory(e){throw function F5(n){const e=Error(`No component factory found for ${cn(n)}.`);return e.ngComponent=n,e}(e)}}let eu=(()=>{class n{static#e=this.NULL=new L5}return n})();function V5(){return th(wr(),Ce())}function th(n,e){return new nn(Xr(n,e))}let nn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=V5}return n})();function B5(n){return n instanceof nn?n.nativeElement:n}class dg{}let bi=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function U5(){const n=Ce(),t=vr(wr().index,n);return(yi(t)?t:n)[pt]}()}return n})(),j5=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>null})}return n})();class Sl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const wP=new Sl("16.2.12"),T0={};function bP(n,e=null,t=null,r){const i=TP(n,e,t,r);return i.resolveInjectorInitializers(),i}function TP(n,e=null,t=null,r,i=new Set){const s=[t||Ot,lP(n)];return r=r||("object"==typeof n?void 0:cn(n)),new Qd(s,e||jv(),r||null,i)}let Ar=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=ca;static#t=this.NULL=new o0;static create(t,r){if(Array.isArray(t))return bP({name:""},r,t,"");{const i=t.name??"";return bP({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Me({token:n,providedIn:"any",factory:()=>Q(oP)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function S0(n){return n.ngOriginalError}class Ea{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&S0(e);for(;t&&S0(t);)t=S0(t);return t||null}}function M0(n){return e=>{setTimeout(n,void 0,e)}}const He=class Z5 extends Y{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=M0(s),i&&(i=M0(i)),o&&(o=M0(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof wt&&e.add(a),a}};function SP(...n){}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function K5(){const n="function"==typeof yn.requestAnimationFrame;let e=yn[n?"requestAnimationFrame":"setTimeout"],t=yn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function X5(n){const e=()=>{!function Q5(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,k0(n),n.isCheckStableRunning=!0,R0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),k0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function e8(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return AP(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),MP(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return AP(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),MP(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,k0(n),R0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Y5,SP,SP);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Y5={};function R0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function k0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function AP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function MP(n){n._nesting--,R0(n)}const RP=new Ee("",{providedIn:"root",factory:kP});function kP(){const n=Ue(it);let e=!0;return fe(new dt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{it.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Ke()))}function Ca(n){return n instanceof Function?n():n}let x0=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>new n})}return n})();function hg(n){for(;n;){n[mt]|=64;const e=tg(n);if(Fc(n)&&!e)return n;n=e}return null}const FP=new Ee("",{providedIn:"root",factory:()=>!1});let Kv=null;function UP(n,e){return n[e]??$P()}function jP(n,e){const t=$P();t.producerNode?.length&&(n[e]=Kv,t.lView=n,Kv=HP())}const u8={...wy,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{hg(n.lView)},lView:null};function HP(){return Object.create(u8)}function $P(){return Kv??=HP(),Kv}const vt={};function K(n){zP(Bt(),Ce(),ci()+n,!1)}function zP(n,e,t,r){if(!r)if(3==(3&e[mt])){const s=n.preOrderCheckHooks;null!==s&&Od(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Nd(e,s,0,t)}_a(t)}function z(n,e=Rt.Default){const t=Ce();return null===t?Q(n,e):Vd(wr(),t,ot(n),e)}function P0(){throw new Error("invalid")}function Yv(n,e,t,r,i,s,o,a,l,c,h){const m=e.blueprint.slice();return m[qn]=i,m[mt]=140|r,(null!==c||n&&2048&n[mt])&&(m[mt]|=2048),Sd(m),m[vn]=m[sl]=n,m[tr]=t,m[Ro]=o||n&&n[Ro],m[pt]=a||n&&n[pt],m[Mo]=l||n&&n[Mo]||null,m[Qr]=s,m[fa]=function v6(){return y6++}(),m[oo]=h,m[_y]=c,m[Vn]=2==e.type?n[Vn]:m,m}function ih(n,e,t,r,i){let s=n.data[e];if(null===s)s=function O0(n,e,t,r,i){const s=Wy(),o=Dp(),l=n.data[e]=function y8(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function dl(){return null!==at.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function qy(){return at.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Wc(){const n=at.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return rs(s,!0),s}function fg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function WP(n,e,t,r,i){const s=UP(e,pa),o=ci(),a=2&r;try{_a(-1),a&&e.length>It&&zP(n,e,It,!1),ns(a?2:0,i);const c=a?s:null,h=Lc(c);try{null!==c&&(c.dirty=!1),t(r,i)}finally{hp(c,h)}}finally{a&&null===e[pa]&&jP(e,pa),_a(o),ns(a?3:1,i)}}function N0(n,e,t){if(lp(e)){const r=yr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{yr(r)}}}function F0(n,e,t){zy()&&(function T8(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;al(t)&&function x8(n,e,t){const r=Xr(e,n),i=qP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Qv(n,Yv(n,i,null,o,r,e,null,n[Ro].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Bs(t,e),Di(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=va(e,n,a,t);Di(c,e),null!==o&&P8(0,a-i,c,l,0,o),Ls(l)&&(vr(t.index,e)[tr]=va(e,n,a,t))}}(n,e,t,Xr(t,e)),64==(64&t.flags)&&QP(n,e,t))}function L0(n,e,t=Xr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function qP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=V0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function V0(n,e,t,r,i,s,o,a,l,c,h){const m=It+r,_=m+i,v=function h8(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:vt);return t}(m,_),C="function"==typeof c?c():c;return v[je]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:C,incompleteFirstPass:!1,ssrId:h}}let GP=n=>null;function ZP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?KP(t,e,i,s):r.hasOwnProperty(i)&&KP(t,e,r[i],s)}return t}function KP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Ds(n,e,t,r,i,s,o,a){const l=Xr(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?($0(n,t,h,r,i),al(e)&&function E8(n,e){const t=vr(e,n);16&t[mt]||(t[mt]|=64)}(t,e.index)):3&e.type&&(r=function w8(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function B0(n,e,t,r){if(zy()){const i=null===r?null:{"":-1},s=function S8(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(fd(e,o.selectors,!1))if(r||(r=[]),Ls(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),U0(n,e,a.length)}else r.unshift(o),U0(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&YP(n,e,t,o,i,a),i&&function A8(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new x(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Yr(t.mergedAttrs,t.attrs)}function YP(n,e,t,r,i,s){for(let c=0;c<r.length;c++)Bp(Bs(t,e),n,r[c].type);!function R8(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const h=r[c];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=fg(n,e,r.length,null);for(let c=0;c<r.length;c++){const h=r[c];t.mergedAttrs=Yr(t.mergedAttrs,h.hostAttrs),k8(n,t,e,l,h),M8(l,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const m=h.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function v8(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const m=s[h],_=t?t.get(m):null,C=_?_.outputs:null;l=ZP(m.inputs,h,l,_?_.inputs:null),c=ZP(m.outputs,h,c,C);const b=null===l||null===o||xc(e)?null:O8(l,h,o);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function QP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function pb(){return at.lFrame.currentDirectiveIndex}();try{_a(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];Rd(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&I8(l,c)}}finally{_a(-1),Rd(o)}}function I8(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function U0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function M8(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ls(e)&&(t[""]=n)}}function k8(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ga(i.type)),o=new ya(s,Ls(i),z);n.blueprint[r]=o,t[r]=o,function D8(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function b8(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,fg(n,t,i.hostVars,vt),i)}function Lo(n,e,t,r,i,s){const o=Xr(n,e);!function j0(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?ie(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[pt],o,s,n.value,t,r,i)}function P8(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)XP(r,t,o[a++],o[a++],o[a++])}function XP(n,e,t,r,i){const s=yr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{yr(s)}}function O8(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function JP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function eO(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Ap(t[r]),o.contentQueries(2,e[s],s)}}}function Qv(n,e){return n[Pc]?n[vd][vs]=e:n[Pc]=e,n[vd]=e,e}function H0(n,e,t){Ap(0);const r=yr(null);try{e(n,t)}finally{yr(r)}}function tO(n){return n[Ao]||(n[Ao]=[])}function nO(n){return n.cleanup||(n.cleanup=[])}function iO(n,e){const t=n[Mo],r=t?t.get(Ea,null):null;r&&r.handleError(e)}function $0(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];XP(n.data[o],e[o],r,a,i)}}function Da(n,e,t){const r=ma(e,n);!function Px(n,e,t){n.setValue(e,t)}(n[pt],r,t)}function N8(n,e){const t=vr(e,n),r=t[je];!function F8(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[qn];null!==i&&null===t[oo]&&(t[oo]=C0(i,t[Mo])),z0(r,t,t[tr])}function z0(n,e,t){Mp(e);try{const r=n.viewQuery;null!==r&&H0(1,r,t);const i=n.template;null!==i&&WP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&eO(n,e),n.staticViewQueries&&H0(2,n.viewQuery,t);const s=n.components;null!==s&&function L8(n,e){for(let t=0;t<e.length;t++)N8(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[mt]&=-5,kp()}}let sO=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function nb(n,e,t){const r=Object.create(rb);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Dy(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Dd(r))return;r.hasRun=!0;const o=Lc(r);try{r.cleanupFn(),r.cleanupFn=xy,r.fn(i)}finally{hp(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>new n})}return n})();function Xv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=So(i,a):2==s&&(r=So(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function pg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(wn(s)),li(s)&&oO(s,r);const o=t.type;if(8&o)pg(n,e,t.child,r);else if(32&o){const a=zb(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=Hx(e,t);if(Array.isArray(a))r.push(...a);else{const l=tg(e[Vn]);pg(l[je],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function oO(n,e){for(let t=Vr;t<n.length;t++){const r=n[t],i=r[je].firstChild;null!==i&&pg(r[je],r,i,e)}n[ts]!==n[qn]&&e.push(n[ts])}function Jv(n,e,t,r=!0){const i=e[Ro],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{aO(n,e,n.template,t)}catch(l){throw r&&iO(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function aO(n,e,t,r){const i=e[mt];if(256!=(256&i)){e[Ro].effectManager?.flush(),Mp(e);try{Sd(e),function Ip(n){return at.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&WP(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Od(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Nd(e,c,0,null),Pp(e,0)}if(function U8(n){for(let e=Rx(n);null!==e;e=kx(e)){if(!e[ap])continue;const t=e[ws];for(let r=0;r<t.length;r++){By(t[r])}}}(e),lO(e,2),null!==n.contentQueries&&eO(n,e),o){const c=n.contentCheckHooks;null!==c&&Od(e,c)}else{const c=n.contentHooks;null!==c&&Nd(e,c,1),Pp(e,1)}!function d8(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=UP(e,Nc);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)_a(~s);else{const o=s,a=t[++i],l=t[++i];Gy(a,o),r.dirty=!1;const c=Lc(r);try{l(2,e[o])}finally{hp(r,c)}}}}finally{null===e[Nc]&&jP(e,Nc),_a(-1)}}(n,e);const a=n.components;null!==a&&uO(e,a,0);const l=n.viewQuery;if(null!==l&&H0(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Od(e,c)}else{const c=n.viewHooks;null!==c&&Nd(e,c,2),Pp(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[mt]&=-73,Uy(e)}finally{kp()}}}function lO(n,e){for(let t=Rx(n);null!==t;t=kx(t))for(let r=Vr;r<t.length;r++)cO(t[r],e)}function j8(n,e,t){cO(vr(e,n),t)}function cO(n,e){if(!function cb(n){return 128==(128&n[mt])}(n))return;const t=n[je],r=n[mt];if(80&r&&0===e||1024&r||2===e)aO(t,n,t.template,n[tr]);else if(n[ha]>0){lO(n,1);const i=t.components;null!==i&&uO(n,i,1)}}function uO(n,e,t){for(let r=0;r<e.length;r++)j8(n,e[r],t)}class gg{get rootNodes(){const e=this._lView,t=e[je];return pg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tr]}set context(e){this._lView[tr]=e}get destroyed(){return 256==(256&this._lView[mt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[vn];if(li(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(kv(e,r),Fo(t,r))}this._attachedToViewContainer=!1}qb(this._lView[je],this._lView)}onDestroy(e){!function Ad(n,e){if(256==(256&n[mt]))throw new x(911,!1);null===n[Fs]&&(n[Fs]=[]),n[Fs].push(e)}(this._lView,e)}markForCheck(){hg(this._cdRefInjectingView||this._lView)}detach(){this._lView[mt]&=-129}reattach(){this._lView[mt]|=128}detectChanges(){Jv(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function P6(n,e){rg(n,e,e[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e}}class H8 extends gg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Jv(e[je],e,e[tr],!1)}checkNoChanges(){}get context(){return null}}class dO extends eu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=kt(e);return new mg(t,this.ngModule)}}function hO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class z8{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ld(r);const i=this.injector.get(e,T0,r);return i!==T0||t===T0?i:this.parentInjector.get(e,t,r)}}class mg extends yP{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=hO(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return hO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function rp(n){return n.map(fy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Cs?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new z8(e,s):e,a=o.get(dg,null);if(null===a)throw new x(407,!1);const m={rendererFactory:a,sanitizer:o.get(j5,null),effectManager:o.get(sO,null),afterRenderEventManager:o.get(x0,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?function f8(n,e,t,r){const s=r.get(FP,!1)||t===_i.ShadowDom,o=n.selectRootElement(e,s);return function p8(n){GP(n)}(o),o}(_,r,this.componentDef.encapsulation,o):Rv(_,v,function $8(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),B=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let P=null;null!==C&&(P=C0(C,o,!0));const $=V0(0,null,null,1,0,null,null,null,null,null,null),ee=Yv(null,$,null,B,null,null,m,_,o,null,P);let _e,xe;Mp(ee);try{const j=this.componentDef;let R,O=null;j.findHostDirectiveDefs?(R=[],O=new Map,j.findHostDirectiveDefs(j,R,O),R.push(j)):R=[j];const H=function q8(n,e){const t=n[je],r=It;return n[r]=e,ih(t,r,2,"#host",null)}(ee,C),N=function G8(n,e,t,r,i,s,o){const a=i[je];!function Z8(n,e,t,r){for(const i of n)e.mergedAttrs=Yr(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Xv(e,e.mergedAttrs,!0),null!==t&&qx(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=C0(e,i[Mo]));const c=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const m=Yv(i,qP(t),null,h,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&U0(a,n,r.length-1),Qv(i,m),i[n.index]=m}(H,C,j,R,ee,m,_);xe=Id($,It),C&&function Y8(n,e,t,r){if(r)dd(n,t,["ng-version",wP.full]);else{const{attrs:i,classes:s}=function md(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ys(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&dd(n,t,i),s&&s.length>0&&Wx(n,t,s.join(" "))}}(_,j,C,r),void 0!==t&&function Q8(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(xe,this.ngContentSelectors,t),_e=function K8(n,e,t,r,i,s){const o=wr(),a=i[je],l=Xr(o,i);YP(a,i,o,t,null,r);for(let h=0;h<t.length;h++)Di(va(i,a,o.directiveStart+h,o),i);QP(a,i,o),l&&Di(l,i);const c=va(i,a,o.directiveStart+o.componentOffset,o);if(n[tr]=i[tr]=c,null!==s)for(const h of s)h(c,e);return N0(a,o,n),c}(N,j,R,O,ee,[X8]),z0($,ee,null)}finally{kp()}return new W8(this.componentType,_e,th(xe,ee),ee,xe)}}class W8 extends N5{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new H8(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;$0(s[je],s,i,e,t),this.previousInputValues.set(e,t),hg(vr(this._tNode.index,s))}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function X8(){const n=wr();Pd(Ce()[je],n)}function Yt(n){let e=function fO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ls(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=ew(n.inputs),o.inputTransforms=ew(n.inputTransforms),o.declaredInputs=ew(n.declaredInputs),o.outputs=ew(n.outputs);const a=i.hostBindings;a&&n9(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&e9(n,l),c&&t9(n,c),Ln(n.inputs,i.inputs),Ln(n.declaredInputs,i.declaredInputs),Ln(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Ln(o.inputTransforms,i.inputTransforms)),Ls(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Yt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function J8(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yr(i.hostAttrs,t=Yr(t,i.hostAttrs))}}(r)}function ew(n){return n===br?{}:n===Ot?[]:n}function e9(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function t9(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function n9(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function tw(n){return!!W0(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function W0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Vo(n,e,t){return n[e]=t}function _g(n,e){return n[e]}function Ti(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function tu(n,e,t,r){const i=Ti(n,e,t);return Ti(n,e+1,r)||i}function nw(n,e,t,r,i){const s=tu(n,e,t,r);return Ti(n,e+2,i)||s}function js(n,e,t,r,i,s){const o=tu(n,e,t,r);return tu(n,e+2,i,s)||o}function rr(n,e,t,r){const i=Ce();return Ti(i,Oo(),e)&&(Bt(),Lo(Bn(),i,n,e,t,r)),rr}function ah(n,e,t,r,i,s){const a=tu(n,function Es(){return at.lFrame.bindingIndex}(),t,i);return lo(2),a?e+ie(t)+r+ie(i)+s:vt}function Ne(n,e,t,r,i,s,o,a){const l=Ce(),c=Bt(),h=n+It,m=c.firstCreatePass?function S9(n,e,t,r,i,s,o,a,l){const c=e.consts,h=ih(e,n,4,o||null,Po(c,a));B0(e,t,h,Po(c,l)),Pd(e,h);const m=h.tView=V0(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,r,i,s,o):c.data[h];rs(m,!1);const _=RO(c,l,m,n);xd()&&Pv(c,l,_,m),Di(_,l),Qv(l,l[h]=JP(_,l,_,m)),cp(m)&&F0(c,l,m),null!=o&&L0(l,m,a)}let RO=function kO(n,e,t,r){return No(!0),e[pt].createComment("")};function Jr(n){return Vs(function Tp(){return at.lFrame.contextLView}(),It+n)}function te(n,e,t){const r=Ce();return Ti(r,Oo(),e)&&Ds(Bt(),Bn(),r,n,e,r[pt],t,!1),te}function Q0(n,e,t,r,i){const o=i?"class":"style";$0(n,t,e.inputs[o],o,r)}function S(n,e,t,r){const i=Ce(),s=Bt(),o=It+n,a=i[pt],l=s.firstCreatePass?function k9(n,e,t,r,i,s){const o=e.consts,l=ih(e,n,2,r,Po(o,i));return B0(e,t,l,Po(o,s)),null!==l.attrs&&Xv(l,l.attrs,!1),null!==l.mergedAttrs&&Xv(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=xO(s,i,l,a,e,n);i[o]=c;const h=cp(l);return rs(l,!0),qx(a,c,l),32!=(32&l.flags)&&xd()&&Pv(s,i,c,l),0===function yp(){return at.lFrame.elementDepthCount}()&&Di(c,i),function hb(){at.lFrame.elementDepthCount++}(),h&&(F0(s,i,l),N0(s,l,i)),null!==r&&L0(i,l),S}function M(){let n=wr();Dp()?bp():(n=n.parent,rs(n,!1));const e=n;(function vp(n){return at.skipHydrationRootTNode===n})(e)&&function Cp(){at.skipHydrationRootTNode=null}(),function zc(){at.lFrame.elementDepthCount--}();const t=Bt();return t.firstCreatePass&&(Pd(t,n),lp(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Db(n){return 0!=(8&n.flags)}(e)&&Q0(t,e,Ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lx(n){return 0!=(16&n.flags)}(e)&&Q0(t,e,Ce(),e.stylesWithoutHost,!1),M}function Zn(n,e,t,r){return S(n,e,t,r),M(),Zn}let xO=(n,e,t,r,i,s)=>(No(!0),Rv(r,i,function Qy(){return at.lFrame.currentNamespace}()));function Eg(n,e,t){const r=Ce(),i=Bt(),s=n+It,o=i.firstCreatePass?function O9(n,e,t,r,i){const s=e.consts,o=Po(s,r),a=ih(e,n,8,"ng-container",o);return null!==o&&Xv(a,o,!0),B0(e,t,a,Po(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];rs(o,!0);const a=PO(i,r,o,n);return r[s]=a,xd()&&Pv(i,r,a,o),Di(a,r),cp(o)&&(F0(i,r,o),N0(i,o,r)),null!=t&&L0(r,o),Eg}function Cg(){let n=wr();const e=Bt();return Dp()?bp():(n=n.parent,rs(n,!1)),e.firstCreatePass&&(Pd(e,n),lp(n)&&e.queries.elementEnd(n)),Cg}function X0(n,e,t){return Eg(n,e,t),Cg(),X0}let PO=(n,e,t,r)=>(No(!0),Wb(e[pt],""));function Lt(){return Ce()}function Dg(n){return!!n&&"function"==typeof n.then}function OO(n){return!!n&&"function"==typeof n.subscribe}function ye(n,e,t,r){const i=Ce(),s=Bt(),o=wr();return function FO(n,e,t,r,i,s,o){const a=cp(r),c=n.firstCreatePass&&nO(n),h=e[tr],m=tO(e);let _=!0;if(3&r.type||o){const b=Xr(r,e),T=o?o(b):b,B=m.length,P=o?ee=>o(wn(ee[r.index])):r.index;let $=null;if(!o&&a&&($=function L9(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Ao],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==$)($.__ngLastListenerFn__||$).__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,_=!1;else{s=VO(r,e,h,s,!1);const ee=t.listen(T,i,s);m.push(s,ee),c&&c.push(i,P,B,B+1)}}else s=VO(r,e,h,s,!1);const v=r.outputs;let C;if(_&&null!==v&&(C=v[i])){const b=C.length;if(b)for(let T=0;T<b;T+=2){const _e=e[C[T]][C[T+1]].subscribe(s),xe=m.length;m.push(s,_e),c&&c.push(i,r.index,xe,-(xe+1))}}}(s,i,i[pt],o,n,e,r),ye}function LO(n,e,t,r){try{return ns(6,e,t),!1!==t(r)}catch(i){return iO(n,i),!1}finally{ns(7,e,t)}}function VO(n,e,t,r,i){return function s(o){if(o===Function)return r;hg(n.componentOffset>-1?vr(n.index,e):e);let l=LO(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)l=LO(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function oe(n=1){return function mb(n){return(at.lFrame.contextLView=function _b(n,e){for(;n>0;)e=e[sl],n--;return e}(n,at.lFrame.contextLView))[tr]}(n)}function ow(n,e){return n<<17|e<<2}function Al(n){return n>>17&32767}function eT(n){return 2|n}function nu(n){return(131068&n)>>2}function tT(n,e){return-131069&n|e<<2}function nT(n){return 1|n}function ZO(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Al(s):nu(s),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];q9(n[a],e)&&(l=!0,n[a+1]=r?nT(h):eT(h)),a=r?Al(h):nu(h)}l&&(n[t+1]=r?eT(s):nT(s))}function q9(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Vi(n,e)>=0}function Hs(n,e,t){return ho(n,e,t,!1),Hs}function ei(n,e){return ho(n,e,null,!0),ei}function ho(n,e,t,r){const i=Ce(),s=Bt(),o=lo(2);s.firstUpdatePass&&function n1(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[ci()],o=function t1(n,e){return e>=n.expandoStartIndex}(n,t);(function a1(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function tW(n,e,t,r){const i=function qc(n){const e=at.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=bg(t=rT(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=rT(i,n,e,t,r),null===s){let l=function nW(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==nu(r))return n[Al(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=rT(null,n,e,l[1],r),l=bg(l,e.attrs,r),function rW(n,e,t,r){n[Al(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function iW(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=bg(r,n[s].hostAttrs,t);return bg(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function z9(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Al(o),l=nu(o);n[r]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||Vi(t,h)>0)&&(c=!0)):h=t,i)if(0!==l){const _=Al(n[a+1]);n[r+1]=ow(_,a),0!==_&&(n[_+1]=tT(n[_+1],r)),n[a+1]=function H9(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=ow(a,0),0!==a&&(n[a+1]=tT(n[a+1],r)),a=r;else n[r+1]=ow(l,0),0===a?a=r:n[l+1]=tT(n[l+1],r),l=r;c&&(n[r+1]=eT(n[r+1])),ZO(n,h,r,!0),ZO(n,h,r,!1),function W9(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Vi(s,e)>=0&&(t[r+1]=nT(t[r+1]))}(e,h,n,r,s),o=ow(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==vt&&Ti(i,o,e)&&function s1(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],h=function $9(n){return 1==(1&n)}(c)?o1(l,e,t,i,nu(c),o):void 0;aw(h)||(aw(s)||function j9(n){return 2==(2&n)}(c)&&(s=o1(l,null,t,i,a,o)),function $6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Tl.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Tl.Important),n.setStyle(t,r,i,s))}}(r,o,ma(ci(),t),i,s))}(s,s.data[ci()],i,i[pt],n,i[o+1]=function lW(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=cn(Il(n)))),n}(e,t),r,o)}function rT(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=bg(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function bg(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ei(n,o,!!t||e[++s]))}return void 0===n?null:n}function o1(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),h=c?l[1]:l,m=null===h;let _=t[i+1];_===vt&&(_=m?Ot:void 0);let v=m?zp(_,r):h===r?_:void 0;if(c&&!aw(v)&&(v=zp(l,r)),aw(v)&&(a=v,o))return a;const C=n[i+1];i=o?Al(C):nu(C)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=zp(l,r))}return a}function aw(n){return void 0!==n}function G(n,e=""){const t=Ce(),r=Bt(),i=n+It,s=r.firstCreatePass?ih(r,i,1,e,null):r.data[i],o=l1(r,t,s,e,n);t[i]=o,xd()&&Pv(r,t,o,s),rs(s,!1)}let l1=(n,e,t,r,i)=>(No(!0),function Mv(n,e){return n.createText(e)}(e[pt],r));function St(n){return jo("",n,""),St}function jo(n,e,t){const r=Ce(),i=function oh(n,e,t,r){return Ti(n,Oo(),t)?e+ie(t)+r:vt}(r,n,e,t);return i!==vt&&Da(r,ci(),i),jo}function iT(n,e,t,r,i){const s=Ce(),o=ah(s,n,e,t,r,i);return o!==vt&&Da(s,ci(),o),iT}function sT(n,e,t){const r=Ce();return Ti(r,Oo(),e)&&Ds(Bt(),Bn(),r,n,e,r[pt],t,!0),sT}const ru=void 0;var RW=["en",[["a","p"],["AM","PM"],ru],[["AM","PM"],ru,ru],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ru,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ru,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ru,"{1} 'at' {0}",ru],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MW(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let gh={};function Bi(n){const e=function kW(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=S1(e);if(t)return t;const r=e.split("-")[0];if(t=S1(r),t)return t;if("en"===r)return RW;throw new x(701,!1)}function S1(n){return n in gh||(gh[n]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[n]),gh[n]}var kn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(kn||{});const mh="en-US";let A1=mh;function lT(n,e,t,r,i){if(n=ot(n),Array.isArray(n))for(let s=0;s<n.length;s++)lT(n[s],e,t,r,i);else{const s=Bt(),o=Ce(),a=wr();let l=Jc(n)?n:ot(n.provide);const c=fP(n),h=1048575&a.providerIndexes,m=a.directiveStart,_=a.providerIndexes>>20;if(Jc(n)||!n.multi){const v=new ya(c,i,z),C=uT(l,e,i?h:h+_,m);-1===C?(Bp(Bs(a,o),s,l),cT(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[C]=v,o[C]=v)}else{const v=uT(l,e,h+_,m),C=uT(l,e,h,h+_),T=C>=0&&t[C];if(i&&!T||!i&&!(v>=0&&t[v])){Bp(Bs(a,o),s,l);const B=function Mq(n,e,t,r,i){const s=new ya(n,t,z);return s.multi=[],s.index=e,s.componentProviders=0,J1(s,i,r&&!t),s}(i?Aq:Sq,t.length,i,r,c);!i&&T&&(t[C].providerFactory=B),cT(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else cT(s,n,v>-1?v:C,J1(t[i?C:v],c,!i&&r));!i&&r&&T&&t[C].componentProviders++}}}function cT(n,e,t,r){const i=Jc(e),s=function y5(n){return!!n.useClass}(e);if(i||s){const l=(s?ot(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[r,l]):c[h+1].push(r,l)}else c.push(t,l)}}}function J1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function uT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Sq(n,e,t,r){return dT(this.multi,[])}function Aq(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=va(t,t[je],this.providerFactory.index,r);s=a.slice(0,o),dT(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],dT(i,s);return s}function dT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function rn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Iq(n,e,t){const r=Bt();if(r.firstCreatePass){const i=Ls(n);lT(t,r.data,r.blueprint,i,!0),lT(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class iu{}class eN{}class hT extends iu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dO(this);const i=ai(e);this._bootstrapComponents=Ca(i.bootstrap),this._r3Injector=TP(e,t,[{provide:iu,useValue:this},{provide:eu,useValue:this.componentFactoryResolver},...r],cn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class fT extends eN{constructor(e){super(),this.moduleType=e}create(e){return new hT(this.moduleType,e,[])}}class tN extends iu{constructor(e){super(),this.componentFactoryResolver=new dO(this),this.instance=null;const t=new Qd([...e.providers,{provide:iu,useValue:this},{provide:eu,useValue:this.componentFactoryResolver}],e.parent||jv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function pT(n,e,t=null){return new tN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let xq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=cP(0,t.type),i=r.length>0?pT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Me({token:n,providedIn:"environment",factory:()=>new n(Q(Cs))})}return n})();function Ho(n){n.getStandaloneInjector=e=>e.get(xq).getOrCreateStandaloneInjector(n)}function Ui(n,e,t){const r=Ir()+n,i=Ce();return i[r]===vt?Vo(i,r,t?e.call(t):e()):_g(i,r)}function po(n,e,t,r){return dN(Ce(),Ir(),n,e,t,r)}function jr(n,e,t,r,i){return hN(Ce(),Ir(),n,e,t,r,i)}function hw(n,e,t,r,i,s){return fN(Ce(),Ir(),n,e,t,r,i,s)}function lN(n,e,t,r,i,s,o){return function pN(n,e,t,r,i,s,o,a,l){const c=e+t;return js(n,c,i,s,o,a)?Vo(n,c+4,l?r.call(l,i,s,o,a):r(i,s,o,a)):Rg(n,c+4)}(Ce(),Ir(),n,e,t,r,i,s,o)}function mT(n,e,t,r,i,s,o,a){const l=Ir()+n,c=Ce(),h=js(c,l,t,r,i,s);return Ti(c,l+4,o)||h?Vo(c,l+5,a?e.call(a,t,r,i,s,o):e(t,r,i,s,o)):_g(c,l+5)}function _T(n,e,t,r){return function gN(n,e,t,r,i,s){let o=e+t,a=!1;for(let l=0;l<i.length;l++)Ti(n,o++,i[l])&&(a=!0);return a?Vo(n,o,r.apply(s,i)):Rg(n,o)}(Ce(),Ir(),n,e,t,r)}function Rg(n,e){const t=n[e];return t===vt?void 0:t}function dN(n,e,t,r,i,s){const o=e+t;return Ti(n,o,i)?Vo(n,o+1,s?r.call(s,i):r(i)):Rg(n,o+1)}function hN(n,e,t,r,i,s,o){const a=e+t;return tu(n,a,i,s)?Vo(n,a+2,o?r.call(o,i,s):r(i,s)):Rg(n,a+2)}function fN(n,e,t,r,i,s,o,a){const l=e+t;return nw(n,l,i,s,o)?Vo(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):Rg(n,l+3)}function Qt(n,e){const t=Bt();let r;const i=n+It;t.firstCreatePass?(r=function Hq(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=ga(r.type)),a=Kr(z);try{const l=Ld(!1),c=s();return Ld(l),function R9(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Ce(),i,c),c}finally{Kr(a)}}function yT(n,e,t){const r=n+It,i=Ce(),s=Vs(i,r);return kg(i,r)?dN(i,Ir(),e,s.transform,t,s):s.transform(t)}function sr(n,e,t,r){const i=n+It,s=Ce(),o=Vs(s,i);return kg(s,i)?hN(s,Ir(),e,o.transform,t,r,o):o.transform(t,r)}function $o(n,e,t,r,i){const s=n+It,o=Ce(),a=Vs(o,s);return kg(o,s)?fN(o,Ir(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function kg(n,e){return n[je].data[e].pure}function Wq(){return this._results[Symbol.iterator]()}class vT{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new He)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=vT.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Wq)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function vi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Pb(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Gq(n,e,t,r=!0){const i=e[je];if(function N6(n,e,t,r){const i=Vr+r,s=t.length;r>0&&(t[i-1][vs]=e),r<s-Vr?(e[vs]=t[i],wi(t,Vr+r,e)):(t.push(e),e[vs]=null),e[vn]=t;const o=e[Oc];null!==o&&t!==o&&function F6(n,e){const t=n[ws];e[Vn]!==e[vn][vn][Vn]&&(n[ap]=!0),null===t?n[ws]=[e]:t.push(e)}(o,e);const a=e[Ns];null!==a&&a.insertView(n),e[mt]|=128}(i,e,n,t),r){const s=Yb(t,n),o=e[pt],a=xv(o,n[ts]);null!==a&&function x6(n,e,t,r,i,s){r[qn]=i,r[Qr]=e,rg(n,r,t,1,i,s)}(i,n[Qr],o,e,a,s)}}let $s=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Yq}return n})();const Zq=$s,Kq=class extends Zq{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function qq(n,e,t,r){const i=e.tView,a=Yv(n,i,t,4096&n[mt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Oc]=n[e.index];const c=n[Ns];return null!==c&&(a[Ns]=c.createEmbeddedView(i)),z0(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new gg(i)}};function Yq(){return fw(wr(),Ce())}function fw(n,e){return 4&n.type?new Kq(e,n,th(n,e)):null}let ji=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=nG}return n})();function nG(){return CN(wr(),Ce())}const rG=ji,wN=class extends rG{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return th(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const e=gl(this._hostTNode,this._hostLView);if(fl(e)){const t=Zc(e,this._hostLView),r=pl(e);return new Br(t[je].data[r+8],t)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=EN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Vr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function El(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const l=o?e:new mg(kt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(Cs,null);T&&(s=T)}kt(l.componentType??{});const v=l.create(c,i,null,s);return this.insertImpl(v.hostView,a,false),v}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function ub(n){return li(n[vn])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=i[vn],h=new wN(c,c[Qr],c[vn]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Gq(a,i,o,!r),e.attachToViewContainerRef(),wi(wT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=EN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=kv(this._lContainer,t);r&&(Fo(wT(this._lContainer),t),qb(r[je],r))}detach(e){const t=this._adjustIndex(e,-1),r=kv(this._lContainer,t);return r&&null!=Fo(wT(this._lContainer),t)?new gg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function EN(n){return n[8]}function wT(n){return n[8]||(n[8]=[])}function CN(n,e){let t;const r=e[n.index];return li(r)?t=r:(t=JP(r,e,null,n),e[n.index]=t,Qv(e,t)),DN(t,e,n,r),new wN(t,n,e)}let DN=function bN(n,e,t,r){if(n[ts])return;let i;i=8&t.type?wn(r):function iG(n,e){const t=n[pt],r=t.createComment(""),i=Xr(e,n);return Xc(t,xv(t,i),r,function U6(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ts]=i};class ET{constructor(e){this.queryList=e,this.matches=null}clone(){return new ET(this.queryList)}setDirty(){this.queryList.setDirty()}}class CT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new CT(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==RN(e,t).matches&&this.queries[t].setDirty()}}class TN{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class DT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new DT(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class bT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new bT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,aG(t,s)),this.matchTNodeWithReadOption(e,t,ml(t,e,s,!1,!1))}else r===$s?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ml(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===nn||i===ji||i===$s&&4&t.type)this.addMatch(t.index,-2);else{const s=ml(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function aG(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function cG(n,e,t,r){return-1===t?function lG(n,e){return 11&n.type?th(n,e):4&n.type?fw(n,e):null}(e,n):-2===t?function uG(n,e,t){return t===nn?th(e,n):t===$s?fw(e,n):t===ji?CN(e,n):void 0}(n,e,r):va(n,n[je],t,e)}function IN(n,e,t,r){const i=e[Ns].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:cG(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function TT(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=IN(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],h=e[-l];for(let m=Vr;m<h.length;m++){const _=h[m];_[Oc]===_[vn]&&TT(_[je],_,c,r)}if(null!==h[ws]){const m=h[ws];for(let _=0;_<m.length;_++){const v=m[_];TT(v[je],v,c,r)}}}}}return r}function _h(n){const e=Ce(),t=Bt(),r=Zy();Ap(r+1);const i=RN(t,r);if(n.dirty&&function _p(n){return 4==(4&n[mt])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?TT(t,e,r,[]):IN(t,e,i,r);n.reset(s,B5),n.notifyOnChanges()}return!0}return!1}function SN(n,e,t){const r=Bt();r.firstCreatePass&&(function MN(n,e,t){null===n.queries&&(n.queries=new DT),n.queries.track(new bT(e,t))}(r,new TN(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function AN(n,e,t){const r=new vT(4==(4&t));(function _8(n,e,t,r){const i=tO(e);i.push(t),n.firstCreatePass&&nO(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Ns]&&(e[Ns]=new CT),e[Ns].queries.push(new ET(r))}(r,Ce(),e)}function RN(n,e){return n.queries.getByIndex(e)}function zs(n,e){return fw(n,e)}const kT=new Ee("Application Initializer");let xT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ue(kT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Dg(s))t.push(s);else if(OO(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const ls=new Ee("LocaleId",{providedIn:"root",factory:()=>Ue(ls,Rt.Optional|Rt.SkipSelf)||function PG(){return typeof $localize<"u"&&$localize.locale||mh}()});let mw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class FG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ZN=(()=>{class n{compileModuleSync(t){return new fT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ca(ai(t).declarations).reduce((o,a)=>{const l=kt(a);return l&&o.push(new mg(l)),o},[]);return new FG(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const XN=new Ee(""),yw=new Ee("");let LT,NT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,LT||(function i7(n){LT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(FT),Q(yw))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),FT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return LT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ml=null;const VT=new Ee("PlatformDestroyListeners"),BT=new Ee("appBootstrapListener");class tF{constructor(e,t){this.name=e,this.token=t}}function c7(n){try{const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function l7(n=[]){if(Ml)return Ml;const e=function rF(n=[],e){return Ar.create({name:e,providers:[{provide:u0,useValue:"platform"},{provide:VT,useValue:new Set([()=>Ml=null])},...n]})}(n);return Ml=e,function eF(){!function My(n){Ay=n}(()=>{throw new x(600,!1)})}(),function nF(n){n.get(pP,null)?.forEach(t=>t())}(e),e}(r),s=[p7(),...t||[]],a=new tN({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(it);return l.run(()=>{a.resolveInjectorInitializers();const c=a.get(Ea,null);let h;l.runOutsideAngular(()=>{h=l.onError.subscribe({next:v=>{c.handleError(v)}})});const m=()=>a.destroy(),_=i.get(VT);return _.add(m),a.onDestroy(()=>{h.unsubscribe(),_.delete(m)}),function oF(n,e,t){try{const r=t();return Dg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(c,l,()=>{const v=a.get(xT);return v.runInitializers(),v.donePromise.then(()=>{!function M1(n){es(n,"Expected localeId to be defined"),"string"==typeof n&&(A1=n.toLowerCase().replace(/_/g,"-"))}(a.get(ls,mh)||mh);const b=a.get(Rl);return void 0!==e&&b.bootstrap(e),b})})})}catch(e){return Promise.reject(e)}}let Rl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ue(cF),this.zoneIsStable=Ue(RP),this.componentTypes=[],this.components=[],this.isStable=Ue(mw).hasPendingTasks.pipe(ct(t=>t?ge(!1):this.zoneIsStable),pr(),Ke()),this._injector=Ue(Cs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof yP;if(!this._injector.get(xT).done)throw!i&&function so(n){const e=kt(n)||_r(n)||Lr(n);return null!==e&&e.standalone}(t),new x(405,!1);let o;o=i?t:this._injector.get(eu).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function o7(n){return n.isBoundToModule}(o)?void 0:this._injector.get(iu),c=o.create(Ar.NULL,[],r||o.selector,a),h=c.location.nativeElement,m=c.injector.get(XN,null);return m?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),vw(this.components,c),m?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;vw(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(BT,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>vw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cF=new Ee("",{providedIn:"root",factory:()=>Ue(Ea).handleError.bind(void 0)});function h7(){const n=Ue(it),e=Ue(Ea);return t=>n.runOutsideAngular(()=>e.handleError(t))}let f7=(()=>{class n{constructor(){this.zone=Ue(it),this.applicationRef=Ue(Rl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uF(n){return[{provide:it,useFactory:n},{provide:ag,multi:!0,useFactory:()=>{const e=Ue(f7,{optional:!0});return()=>e.initialize()}},{provide:cF,useFactory:h7},{provide:RP,useFactory:kP}]}function p7(n){return a0([[],uF(()=>new it(function sF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}(n)))])}let kl=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=g7}return n})();function g7(n){return function m7(n,e,t){if(al(n)&&!t){const r=vr(n.index,e);return new gg(r,r)}return 47&n.type?new gg(e[Vn],e):null}(wr(),Ce(),16==(16&n))}class gF{constructor(){}supports(e){return tw(e)}create(e){return new C7(e)}}const E7=(n,e)=>e;class C7{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||E7}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<_F(r,i,s)?t:r,a=_F(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,h=l-i;if(c!=h){for(let _=0;_<c;_++){const v=_<s.length?s[_]:s[_]=0,C=v+_;h<=C&&C<c&&(s[_]=v+1)}s[o.previousIndex]=h-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!tw(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function c9(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new D7(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new mF),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class D7{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class b7{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class mF{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new b7,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _F(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class yF{constructor(){}supports(e){return e instanceof Map||W0(e)}create(){return new T7}}class T7{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||W0(e)))throw new x(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new I7(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class I7{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vF(){return new Cw([new gF])}let Cw=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:vF});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||vF()),deps:[[n,new Hd,new bl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new x(901,!1)}}return n})();function wF(){return new Ng([new yF])}let Ng=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:wF});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wF()),deps:[[n,new Hd,new bl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new x(901,!1)}}return n})(),M7=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Rl))};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({})}return n})();let qT=null;function xl(){return qT}class $7{}const xt=new Ee("DocumentToken");let GT=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(W7)},providedIn:"platform"})}return n})();const z7=new Ee("Location Initialized");let W7=(()=>{class n extends GT{constructor(){super(),this._doc=Ue(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xl().getBaseHref(this._doc)}onPopState(t){const r=xl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=xl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function ZT(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function RF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ba(n){return n&&"?"!==n[0]?"?"+n:n}let ou=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(xF)},providedIn:"root"})}return n})();const kF=new Ee("appBaseHref");let xF=(()=>{class n extends ou{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ue(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ZT(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ba(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ba(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ba(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(GT),Q(kF,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),q7=(()=>{class n extends ou{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ZT(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ba(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ba(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(GT),Q(kF,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),Fg=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function K7(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(RF(PF(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ba(r))}normalize(t){return n.stripTrailingSlash(function Z7(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,PF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ba(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ba(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=ba;static#t=this.joinWithSlash=ZT;static#n=this.stripTrailingSlash=RF;static#r=this.\u0275fac=function(r){return new(r||n)(Q(ou))};static#i=this.\u0275prov=Me({token:n,factory:function(){return function G7(){return new Fg(Q(ou))}()},providedIn:"root"})}return n})();function PF(n){return n.replace(/\/index.html$/,"")}var Ch=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(Ch||{}),$i=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}($i||{}),In=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(In||{}),bs=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(bs||{}),Er=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Er||{});function Tw(n,e){return qs(Bi(n)[kn.DateFormat],e)}function Iw(n,e){return qs(Bi(n)[kn.TimeFormat],e)}function Sw(n,e){return qs(Bi(n)[kn.DateTimeFormat],e)}function Ws(n,e){const t=Bi(n),r=t[kn.NumberSymbols][e];if(typeof r>"u"){if(e===Er.CurrencyDecimal)return t[kn.NumberSymbols][Er.Decimal];if(e===Er.CurrencyGroup)return t[kn.NumberSymbols][Er.Group]}return r}const rZ=function I1(n){return Bi(n)[kn.PluralCase]};function NF(n){if(!n[kn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[kn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function qs(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function YT(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const cZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Lg={},uZ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ta=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Ta||{}),sn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(sn||{}),on=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(on||{});function Hr(n,e,t,r){let i=function vZ(n){if(VF(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return Aw(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(cZ))return function wZ(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,c),e}(r)}const e=new Date(n);if(!VF(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ia(t,e)||e;let a,o=[];for(;e;){if(a=uZ.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let l=i.getTimezoneOffset();r&&(l=LF(r,l),i=function yZ(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function _Z(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(LF(e,i)-i))}(i,r,!0));let c="";return o.forEach(h=>{const m=function mZ(n){if(XT[n])return XT[n];let e;switch(n){case"G":case"GG":case"GGG":e=xn(on.Eras,In.Abbreviated);break;case"GGGG":e=xn(on.Eras,In.Wide);break;case"GGGGG":e=xn(on.Eras,In.Narrow);break;case"y":e=Mr(sn.FullYear,1,0,!1,!0);break;case"yy":e=Mr(sn.FullYear,2,0,!0,!0);break;case"yyy":e=Mr(sn.FullYear,3,0,!1,!0);break;case"yyyy":e=Mr(sn.FullYear,4,0,!1,!0);break;case"Y":e=xw(1);break;case"YY":e=xw(2,!0);break;case"YYY":e=xw(3);break;case"YYYY":e=xw(4);break;case"M":case"L":e=Mr(sn.Month,1,1);break;case"MM":case"LL":e=Mr(sn.Month,2,1);break;case"MMM":e=xn(on.Months,In.Abbreviated);break;case"MMMM":e=xn(on.Months,In.Wide);break;case"MMMMM":e=xn(on.Months,In.Narrow);break;case"LLL":e=xn(on.Months,In.Abbreviated,$i.Standalone);break;case"LLLL":e=xn(on.Months,In.Wide,$i.Standalone);break;case"LLLLL":e=xn(on.Months,In.Narrow,$i.Standalone);break;case"w":e=QT(1);break;case"ww":e=QT(2);break;case"W":e=QT(1,!0);break;case"d":e=Mr(sn.Date,1);break;case"dd":e=Mr(sn.Date,2);break;case"c":case"cc":e=Mr(sn.Day,1);break;case"ccc":e=xn(on.Days,In.Abbreviated,$i.Standalone);break;case"cccc":e=xn(on.Days,In.Wide,$i.Standalone);break;case"ccccc":e=xn(on.Days,In.Narrow,$i.Standalone);break;case"cccccc":e=xn(on.Days,In.Short,$i.Standalone);break;case"E":case"EE":case"EEE":e=xn(on.Days,In.Abbreviated);break;case"EEEE":e=xn(on.Days,In.Wide);break;case"EEEEE":e=xn(on.Days,In.Narrow);break;case"EEEEEE":e=xn(on.Days,In.Short);break;case"a":case"aa":case"aaa":e=xn(on.DayPeriods,In.Abbreviated);break;case"aaaa":e=xn(on.DayPeriods,In.Wide);break;case"aaaaa":e=xn(on.DayPeriods,In.Narrow);break;case"b":case"bb":case"bbb":e=xn(on.DayPeriods,In.Abbreviated,$i.Standalone,!0);break;case"bbbb":e=xn(on.DayPeriods,In.Wide,$i.Standalone,!0);break;case"bbbbb":e=xn(on.DayPeriods,In.Narrow,$i.Standalone,!0);break;case"B":case"BB":case"BBB":e=xn(on.DayPeriods,In.Abbreviated,$i.Format,!0);break;case"BBBB":e=xn(on.DayPeriods,In.Wide,$i.Format,!0);break;case"BBBBB":e=xn(on.DayPeriods,In.Narrow,$i.Format,!0);break;case"h":e=Mr(sn.Hours,1,-12);break;case"hh":e=Mr(sn.Hours,2,-12);break;case"H":e=Mr(sn.Hours,1);break;case"HH":e=Mr(sn.Hours,2);break;case"m":e=Mr(sn.Minutes,1);break;case"mm":e=Mr(sn.Minutes,2);break;case"s":e=Mr(sn.Seconds,1);break;case"ss":e=Mr(sn.Seconds,2);break;case"S":e=Mr(sn.FractionalSeconds,1);break;case"SS":e=Mr(sn.FractionalSeconds,2);break;case"SSS":e=Mr(sn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Rw(Ta.Short);break;case"ZZZZZ":e=Rw(Ta.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Rw(Ta.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Rw(Ta.Long);break;default:return null}return XT[n]=e,e}(h);c+=m?m(i,t,l):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Aw(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ia(n,e){const t=function Q7(n){return Bi(n)[kn.LocaleId]}(n);if(Lg[t]=Lg[t]||{},Lg[t][e])return Lg[t][e];let r="";switch(e){case"shortDate":r=Tw(n,bs.Short);break;case"mediumDate":r=Tw(n,bs.Medium);break;case"longDate":r=Tw(n,bs.Long);break;case"fullDate":r=Tw(n,bs.Full);break;case"shortTime":r=Iw(n,bs.Short);break;case"mediumTime":r=Iw(n,bs.Medium);break;case"longTime":r=Iw(n,bs.Long);break;case"fullTime":r=Iw(n,bs.Full);break;case"short":const i=Ia(n,"shortTime"),s=Ia(n,"shortDate");r=Mw(Sw(n,bs.Short),[i,s]);break;case"medium":const o=Ia(n,"mediumTime"),a=Ia(n,"mediumDate");r=Mw(Sw(n,bs.Medium),[o,a]);break;case"long":const l=Ia(n,"longTime"),c=Ia(n,"longDate");r=Mw(Sw(n,bs.Long),[l,c]);break;case"full":const h=Ia(n,"fullTime"),m=Ia(n,"fullDate");r=Mw(Sw(n,bs.Full),[h,m])}return r&&(Lg[t][e]=r),r}function Mw(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function go(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Mr(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function hZ(n,e){switch(n){case sn.FullYear:return e.getFullYear();case sn.Month:return e.getMonth();case sn.Date:return e.getDate();case sn.Hours:return e.getHours();case sn.Minutes:return e.getMinutes();case sn.Seconds:return e.getSeconds();case sn.FractionalSeconds:return e.getMilliseconds();case sn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===sn.Hours)0===a&&-12===t&&(a=12);else if(n===sn.FractionalSeconds)return function dZ(n,e){return go(n,3).substring(0,e)}(a,e);const l=Ws(o,Er.MinusSign);return go(a,e,l,r,i)}}function xn(n,e,t=$i.Format,r=!1){return function(i,s){return function fZ(n,e,t,r,i,s){switch(t){case on.Months:return function eZ(n,e,t){const r=Bi(n),s=qs([r[kn.MonthsFormat],r[kn.MonthsStandalone]],e);return qs(s,t)}(e,i,r)[n.getMonth()];case on.Days:return function J7(n,e,t){const r=Bi(n),s=qs([r[kn.DaysFormat],r[kn.DaysStandalone]],e);return qs(s,t)}(e,i,r)[n.getDay()];case on.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function iZ(n){const e=Bi(n);return NF(e),(e[kn.ExtraData][2]||[]).map(r=>"string"==typeof r?YT(r):[YT(r[0]),YT(r[1])])}(e),h=function sZ(n,e,t){const r=Bi(n);NF(r);const s=qs([r[kn.ExtraData][0],r[kn.ExtraData][1]],e)||[];return qs(s,t)||[]}(e,i,r),m=c.findIndex(_=>{if(Array.isArray(_)){const[v,C]=_,b=o>=v.hours&&a>=v.minutes,T=o<C.hours||o===C.hours&&a<C.minutes;if(v.hours<C.hours){if(b&&T)return!0}else if(b||T)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==m)return h[m]}return function X7(n,e,t){const r=Bi(n),s=qs([r[kn.DayPeriodsFormat],r[kn.DayPeriodsStandalone]],e);return qs(s,t)}(e,i,r)[o<12?0:1];case on.Eras:return function tZ(n,e){return qs(Bi(n)[kn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Rw(n){return function(e,t,r){const i=-1*r,s=Ws(t,Er.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Ta.Short:return(i>=0?"+":"")+go(o,2,s)+go(Math.abs(i%60),2,s);case Ta.ShortGMT:return"GMT"+(i>=0?"+":"")+go(o,1,s);case Ta.Long:return"GMT"+(i>=0?"+":"")+go(o,2,s)+":"+go(Math.abs(i%60),2,s);case Ta.Extended:return 0===r?"Z":(i>=0?"+":"")+go(o,2,s)+":"+go(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const pZ=0,kw=4;function FF(n){return Aw(n.getFullYear(),n.getMonth(),n.getDate()+(kw-n.getDay()))}function QT(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=FF(t),o=function gZ(n){const e=Aw(n,pZ,1).getDay();return Aw(n,0,1+(e<=kw?kw:kw+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return go(i,n,Ws(r,Er.MinusSign))}}function xw(n,e=!1){return function(t,r){return go(FF(t).getFullYear(),n,Ws(r,Er.MinusSign),e)}}const XT={};function LF(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function VF(n){return n instanceof Date&&!isNaN(n.valueOf())}let rI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(r){let i=null;return r?i=new r:(s=Q(ls),i=new kZ(s)),i;var s},providedIn:"root"})}return n})();let kZ=(()=>{class n extends rI{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(rZ(r||this.locale)(t)){case Ch.Zero:return"zero";case Ch.One:return"one";case Ch.Two:return"two";case Ch.Few:return"few";case Ch.Many:return"many";default:return"other"}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(ls))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function HF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const iI=/\s+/,$F=[];let us=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=$F,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(iI):$F}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(iI):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(iI).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(z(Cw),z(Ng),z(nn),z(bi))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class PZ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new PZ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),WF(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{WF(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(z(ji),z($s),z(Cw))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function WF(n,e){n.context.$implicit=e.item}let mo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new OZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(z(ji),z($s))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class OZ{constructor(){this.$implicit=null,this.ngIf=null}}function qF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${cn(e)}'.`)}let Sa=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Tl.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static#e=this.\u0275fac=function(r){return new(r||n)(z(nn),z(Ng),z(bi))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),Gs=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(r){return new(r||n)(z(ji))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Tr]})}return n})();function _o(n,e){return new x(2100,!1)}class VZ{createSubscription(e,t){return jc(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){jc(()=>e.unsubscribe())}}class BZ{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const UZ=new BZ,jZ=new VZ;let ZF=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Dg(t))return UZ;if(OO(t))return jZ;throw _o()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(z(kl,16))};static#t=this.\u0275pipe=mr({name:"async",type:n,pure:!1,standalone:!0})}return n})();const GZ=new Ee("DATE_PIPE_DEFAULT_TIMEZONE"),ZZ=new Ee("DATE_PIPE_DEFAULT_OPTIONS");let Ow=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return Hr(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw _o()}}static#e=this.\u0275fac=function(r){return new(r||n)(z(ls,16),z(GZ,24),z(ZZ,24))};static#t=this.\u0275pipe=mr({name:"date",type:n,pure:!0,standalone:!0})}return n})();const KZ=/#/g;let aI=(()=>{class n{constructor(t){this._localization=t}transform(t,r,i){if(null==t)return"";if("object"!=typeof r||null===r)throw _o();return r[function jF(n,e,t,r){let i=`=${n}`;if(e.indexOf(i)>-1||(i=t.getPluralCategory(n,r),e.indexOf(i)>-1))return i;if(e.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(t,Object.keys(r),this._localization,i)].replace(KZ,t.toString())}static#e=this.\u0275fac=function(r){return new(r||n)(z(rI,16))};static#t=this.\u0275pipe=mr({name:"i18nPlural",type:n,pure:!0,standalone:!0})}return n})(),YF=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw _o();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=mr({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Ts=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({})}return n})();const QF="browser";function XF(n){return n===QF}function Nw(n){return"server"===n}let oK=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>new aK(Q(xt),window)})}return n})();class aK{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function lK(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class JF{}class kK extends $7{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class hI extends kK{static makeCurrent(){!function H7(n){qT||(qT=n)}(new hI)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function xK(){return Ug=Ug||document.querySelector("base"),Ug?Ug.getAttribute("href"):null}();return null==t?null:function PK(n){Vw=Vw||document.createElement("a"),Vw.setAttribute("href",n);const e=Vw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ug=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return HF(document.cookie,e)}}let Vw,Ug=null,NK=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const fI=new Ee("EventManagerPlugins");let iL=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(Q(fI),Q(it))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class sL{constructor(e){this._doc=e}}const pI="ng-app-id";let oL=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Nw(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${pI}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(pI),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(pI,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(Hv),Q(p0,8),Q(Us))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const gI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mI=/%COMP%/g,BK=new Ee("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function lL(n,e){return e.map(t=>t.replace(mI,n))}let _I=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Nw(a),this.defaultRenderer=new yI(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_i.ShadowDom&&(r={...r,encapsulation:_i.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof uL?i.applyToHost(t):i instanceof vI&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case _i.Emulated:s=new uL(l,c,r,this.appId,h,o,a,m);break;case _i.ShadowDom:return new $K(l,c,t,r,o,a,this.nonce,m);default:s=new vI(l,c,r,h,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(iL),Q(oL),Q(Hv),Q(BK),Q(xt),Q(Us),Q(it),Q(p0))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class yI{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cL(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(cL(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=gI[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Tl.DashCase|Tl.Important)?e.style.setProperty(t,r,i&Tl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Tl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=xl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function cL(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $K extends yI{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=lL(i.id,i.styles);for(const h of c){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=h,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class vI extends yI{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?lL(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class uL extends vI{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function UK(n){return"_ngcontent-%COMP%".replace(mI,n)}(c),this.hostAttr=function jK(n){return"_nghost-%COMP%".replace(mI,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let zK=(()=>{class n extends sL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const dL=["alt","control","meta","shift"],WK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let GK=(()=>{class n extends sL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),dL.forEach(c=>{const h=r.indexOf(c);h>-1&&(r.splice(h,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=WK[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),dL.forEach(o=>{o!==i&&(0,qK[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function hL(n){return{appProviders:[...pL,...n?.providers??[]],platformProviders:XK}}const XK=[{provide:Us,useValue:QF},{provide:pP,useValue:function KK(){hI.makeCurrent()},multi:!0},{provide:xt,useFactory:function QK(){return function Z6(n){Jb=n}(document),document},deps:[]}],JK=new Ee(""),fL=[{provide:yw,useClass:class OK{addToWindow(e){yn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new x(5103,!1);return s},yn.getAllAngularTestabilities=()=>e.getAllTestabilities(),yn.getAllAngularRootElements=()=>e.getAllRootElements(),yn.frameworkStabilizers||(yn.frameworkStabilizers=[]),yn.frameworkStabilizers.push(r=>{const i=yn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?xl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:XN,useClass:NT,deps:[it,FT,yw]},{provide:NT,useClass:NT,deps:[it,FT,yw]}],pL=[{provide:u0,useValue:"root"},{provide:Ea,useFactory:function YK(){return new Ea},deps:[]},{provide:fI,useClass:zK,multi:!0,deps:[xt,it,Us]},{provide:fI,useClass:GK,multi:!0,deps:[xt]},_I,oL,iL,{provide:dg,useExisting:_I},{provide:JF,useClass:NK,deps:[]},[]];let eY=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Hv,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(JK,12))};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:[...pL,...fL],imports:[Ts,M7]})}return n})(),gL=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:function(r){let i=null;return i=r?new r:function nY(){return new gL(Q(xt))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:lY}=Array,{getPrototypeOf:cY,prototype:uY,keys:dY}=Object;function vL(n){if(1===n.length){const e=n[0];if(lY(e))return{args:e,keys:null};if(function hY(n){return n&&"object"==typeof n&&cY(n)===uY}(e)){const t=dY(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:fY}=Array;function EI(n){return Oe(e=>function pY(n,e){return fY(e)?n(...e):n(e)}(n,e))}function wL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function jg(...n){const e=fr(n),t=aa(n),{args:r,keys:i}=vL(n);if(0===r.length)return q([],e);const s=new dt(function gY(n,e,t=Tn){return r=>{EL(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)EL(e,()=>{const c=q(n[l],e);let h=!1;c.subscribe(ke(r,m=>{s[l]=m,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>wL(i,o):Tn));return t?s.pipe(EI(t)):s}function EL(n,e,t){n?dr(t,n,e):e()}const Bw=lt(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Uw(...n){return function mY(){return Xi(1)}()(q(n,fr(n)))}function jw(n){return new dt(e=>{Wn(n()).subscribe(e)})}function Hg(n,e){const t=k(n)?n:()=>n,r=i=>i.error(t());return new dt(e?i=>e.schedule(r,0,i):r)}function CI(){return ce((n,e)=>{let t=null;n._refCount++;const r=ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class CL extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Pe(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wt;const t=this.getSubject();e.add(this.source.subscribe(ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wt.EMPTY)}return e}refCount(){return CI()(this)}}function $r(n){return n<=0?()=>hr:ce((e,t)=>{let r=0;e.subscribe(ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zs(...n){const e=fr(n);return ce((t,r)=>{(e?Uw(n,t,e):Uw(n,t)).subscribe(r)})}function dn(n,e){return ce((t,r)=>{let i=0;t.subscribe(ke(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Hw(n){return ce((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function DL(n=_Y){return ce((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _Y(){return new Bw}function Ol(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dn((i,s)=>n(i,s,r)):Tn,$r(1),t?Hw(e):DL(()=>new Bw))}function Dh(n,e){return k(e)?mn(n,e,1):mn(n,1)}function zr(n,e,t){const r=k(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ke(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Tn}function au(n){return ce((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ke(t,void 0,void 0,o=>{s=Wn(n(o,au(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bL(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ke(o,h=>{const m=c++;l=a?n(l,h,m):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function $w(n,e){return ce(bL(n,e,arguments.length>=2,!0))}function zw(n){return n<=0?()=>hr:ce((e,t)=>{let r=[];e.subscribe(ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $g(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ii(n){return ce((e,t)=>{Wn(n).subscribe(ke(t,()=>t.complete(),Ye)),!t.closed&&e.subscribe(t)})}const Dt="primary",zg=Symbol("RouteTitle");class wY{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bh(n){return new wY(n)}function EY(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!TL(n[i],e[i]))return!1;return!0}function TL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function IL(n){return n.length>0?n[n.length-1]:null}function Nl(n){return function aY(n){return!!n&&(n instanceof dt||k(n.lift)&&k(n.subscribe))}(n)?n:Dg(n)?q(Promise.resolve(n)):ge(n)}const DY={exact:function ML(n,e,t){if(!lu(n.segments,e.segments)||!Ww(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ML(n.children[r],e.children[r],t))return!1;return!0},subset:RL},SL={exact:function bY(n,e){return zo(n,e)},subset:function TY(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TL(n[t],e[t]))},ignored:()=>!0};function AL(n,e,t){return DY[t.paths](n.root,e.root,t.matrixParams)&&SL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function RL(n,e,t){return kL(n,e,e.segments,t)}function kL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!lu(i,t)||e.hasChildren()||!Ww(i,t,r))}if(n.segments.length===t.length){if(!lu(n.segments,t)||!Ww(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!RL(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(lu(n.segments,i)&&Ww(n.segments,i,r)&&n.children[Dt])&&kL(n.children[Dt],e,s,r)}}function Ww(n,e,t){return e.every((r,i)=>SL[t](n[i].parameters,r.parameters))}class Th{constructor(e=new hn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bh(this.queryParams)),this._queryParamMap}toString(){return AY.serialize(this)}}class hn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qw(this)}}class Wg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bh(this.parameters)),this._parameterMap}toString(){return OL(this)}}function lu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let qg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return new DI},providedIn:"root"})}return n})();class DI{parse(e){const t=new BY(e);return new Th(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gg(e.root,!0)}`,r=function kY(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Gw(t)}=${Gw(i)}`).join("&"):`${Gw(t)}=${Gw(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function MY(n){return encodeURI(n)}(e.fragment)}`:""}`}}const AY=new DI;function qw(n){return n.segments.map(e=>OL(e)).join("/")}function Gg(n,e){if(!n.hasChildren())return qw(n);if(e){const t=n.children[Dt]?Gg(n.children[Dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Dt&&r.push(`${i}:${Gg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function SY(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Dt?[Gg(n.children[Dt],!1)]:[`${i}:${Gg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${qw(n)}/${t[0]}`:`${qw(n)}/(${t.join("//")})`}}function xL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gw(n){return xL(n).replace(/%3B/gi,";")}function bI(n){return xL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zw(n){return decodeURIComponent(n)}function PL(n){return Zw(n.replace(/\+/g,"%20"))}function OL(n){return`${bI(n.path)}${function RY(n){return Object.keys(n).map(e=>`;${bI(e)}=${bI(n[e])}`).join("")}(n.parameters)}`}const xY=/^[^\/()?;#]+/;function TI(n){const e=n.match(xY);return e?e[0]:""}const PY=/^[^\/()?;=#]+/,NY=/^[^=?&#]+/,LY=/^[^&#]+/;class BY{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new hn(e,t)),r}parseSegment(){const e=TI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new Wg(Zw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function OY(n){const e=n.match(PY);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=TI(this.remaining);i&&(r=i,this.capture(r))}e[Zw(t)]=Zw(r)}parseQueryParam(e){const t=function FY(n){const e=n.match(NY);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function VY(n){const e=n.match(LY);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=PL(t),s=PL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=TI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new x(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Dt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Dt]:new hn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}}function NL(n){return n.segments.length>0?new hn([],{[Dt]:n}):n}function FL(n){const e={};for(const r of Object.keys(n.children)){const s=FL(n.children[r]);if(r===Dt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function UY(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new hn(n.segments.concat(e.segments),e.children)}return n}(new hn(n.segments,e))}function cu(n){return n instanceof Th}function LL(n){let e;const i=NL(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new hn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function VL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return II(i,i,i,t,r);const s=function HY(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new UL(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new UL(t,e,r)}(e);if(s.toRoot())return II(i,i,new hn([],{}),t,r);const o=function $Y(n,e,t){if(n.isAbsolute)return new Yw(e,!0,0);if(!t)return new Yw(e,!1,NaN);if(null===t.parent)return new Yw(t,!0,0);const r=Kw(n.commands[0])?0:1;return function zY(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new Yw(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Kg(o.segmentGroup,o.index,s.commands):jL(o.segmentGroup,o.index,s.commands);return II(i,o.segmentGroup,a,t,r)}function Kw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Zg(n){return"object"==typeof n&&null!=n&&n.outlets}function II(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),o=n===e?t:BL(n,e,t);const a=NL(FL(o));return new Th(a,s,i)}function BL(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:BL(s,e,t)}),new hn(n.segments,r)}class UL{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Kw(r[0]))throw new x(4003,!1);const i=r.find(Zg);if(i&&i!==IL(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yw{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jL(n,e,t){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return Kg(n,e,t);const r=function qY(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Zg(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!$L(l,c,o))return s;r+=2}else{if(!$L(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new hn(n.segments.slice(0,r.pathIndex),{});return s.children[Dt]=new hn(n.segments.slice(r.pathIndex),n.children),Kg(s,0,i)}return r.match&&0===i.length?new hn(n.segments,{}):r.match&&!n.hasChildren()?SI(n,e,t):r.match?Kg(n,0,i):SI(n,e,t)}function Kg(n,e,t){if(0===t.length)return new hn(n.segments,{});{const r=function WY(n){return Zg(n[0])?n[0].outlets:{[Dt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Dt)&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const s=Kg(n.children[Dt],e,t);return new hn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=jL(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new hn(n.segments,i)}}function SI(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Zg(s)){const l=GY(s.outlets);return new hn(r,l)}if(0===i&&Kw(t[0])){r.push(new Wg(n.segments[e].path,HL(t[0]))),i++;continue}const o=Zg(s)?s.outlets[Dt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Kw(a)?(r.push(new Wg(o,HL(a))),i+=2):(r.push(new Wg(o,{})),i++)}return new hn(r,{})}function GY(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=SI(new hn([],{}),0,r))}),e}function HL(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $L(n,e,t){return n==t.path&&zo(e,t.parameters)}const Yg="imperative";class Wo{constructor(e,t){this.id=e,this.url=t}}class Qw extends Wo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Aa extends Wo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qg extends Wo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ih extends Wo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Xw extends Wo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zL extends Wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZY extends Wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KY extends Wo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class YY extends Wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QY extends Wo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XY{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class JY{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class AI{}class MI{constructor(e){this.url=e}}class iQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Xg,this.attachRef=null}}let Xg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new iQ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class qL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=RI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=RI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kI(e,this._root).map(t=>t.value)}}function RI(n,e){if(n===e.value)return e;for(const t of e.children){const r=RI(n,t);if(r)return r}return null}function kI(n,e){if(n===e.value)return[e];for(const t of e.children){const r=kI(n,t);if(r.length)return r.unshift(e),r}return[]}class Ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class GL extends qL{constructor(e,t){super(e),this.snapshot=t,xI(this,e)}toString(){return this.snapshot.toString()}}function ZL(n,e){const t=function sQ(n,e){const o=new Jw([],{},{},"",{},Dt,e,null,{});return new YL("",new Ma(o,[]))}(0,e),r=new ne([new Wg("",{})]),i=new ne({}),s=new ne({}),o=new ne({}),a=new ne(""),l=new Ah(r,i,o,a,s,Dt,e,t.root);return l.snapshot=t.root,new GL(new Ma(l,[]),t)}class Ah{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Oe(c=>c[zg]))??ge(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>bh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>bh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function KL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function oQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Jw{get title(){return this.data?.[zg]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class YL extends qL{constructor(e,t){super(t),this.url=e,xI(this,t)}toString(){return QL(this._root)}}function xI(n,e){e.value._routerState=n,e.children.forEach(t=>xI(n,t))}function QL(n){const e=n.children.length>0?` { ${n.children.map(QL).join(", ")} } `:"";return`${n.value}${e}`}function PI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zo(e.params,t.params)||n.paramsSubject.next(t.params),function CY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),zo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function OI(n,e){const t=zo(n.params,e.params)&&function IY(n,e){return lu(n,e)&&n.every((t,r)=>zo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||OI(n.parent,e.parent))}let NI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=Ue(Xg),this.location=Ue(ji),this.changeDetector=Ue(kl),this.environmentInjector=Ue(Cs),this.inputBinder=Ue(eE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new aQ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tr]})}return n})();class aQ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ah?this.route:e===Xg?this.childContexts:this.parent.get(e,t)}}const eE=new Ee("");let XL=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=jg([r.queryParams,r.params,r.data]).pipe(ct(([s,o,a],l)=>(a={...s,...o,...a},0===l?ge(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function j7(n){const e=kt(n);if(!e)return null;const t=new mg(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function Jg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Jg(n,r,i);return Jg(n,r)})}(n,e,t);return new Ma(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Jg(n,a)),o}}const r=function uQ(n){return new Ah(new ne(n.url),new ne(n.params),new ne(n.queryParams),new ne(n.fragment),new ne(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Jg(n,s));return new Ma(r,i)}}const FI="ngNavigationCancelingError";function JL(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=cu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eV(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function eV(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[FI]=!0,r.cancellationCode=e,t&&(r.url=t),r}function tV(n){return n&&n[FI]}let nV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=un({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ho],decls:1,vars:0,template:function(r,i){1&r&&Zn(0,"router-outlet")},dependencies:[NI],encapsulation:2})}return n})();function LI(n){const e=n.children&&n.children.map(LI),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=nV),t}function yo(n){return n.outlet||Dt}function em(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yQ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),PI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Sh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Sh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new rQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new tQ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(PI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),PI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=em(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class rV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tE{constructor(e,t){this.component=e,this.route=t}}function vQ(n,e,t){const r=n._root;return tm(r,e?e._root:null,t,[r.value])}function Mh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function HD(n){return null!==el(n)}(n)?e.get(n):n:r}function tm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Sh(e);return n.children.forEach(o=>{(function EQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function CQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lu(n.url,e.url)||!zo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!OI(n,e)||!zo(n.queryParams,e.queryParams);default:return!OI(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new rV(r)):(s.data=o.data,s._resolvedData=o._resolvedData),tm(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new tE(a.outlet.component,o))}else o&&nm(e,a,i),i.canActivateChecks.push(new rV(r)),tm(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>nm(a,t.getContext(o),i)),i}function nm(n,e,t){const r=Sh(n),i=n.value;Object.entries(r).forEach(([s,o])=>{nm(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new tE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function rm(n){return"function"==typeof n}function iV(n){return n instanceof Bw||"EmptyError"===n?.name}const nE=Symbol("INITIAL_VALUE");function Rh(){return ct(n=>jg(n.map(e=>e.pipe($r(1),Zs(nE)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===nE)return nE;if(!1===t||t instanceof Th)return t}return!0}),dn(e=>e!==nE),$r(1)))}function sV(n){return function Ni(...n){return Yi(n)}(zr(e=>{if(cu(e))throw JL(0,e)}),Oe(e=>!0===e))}class rE{constructor(e){this.segmentGroup=e||null}}class oV{constructor(e){this.urlTree=e}}function kh(n){return Hg(new rE(n))}function aV(n){return Hg(new oV(n))}class HQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new x(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ge(r);if(i.numberOfChildren>1||!i.children[Dt])return Hg(new x(4e3,!1));i=i.children[Dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Th(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new hn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const VI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $Q(n,e,t,r,i){const s=BI(n,e,t);return s.matched?(r=function hQ(n,e){return n.providers&&!n._injector&&(n._injector=pT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function BQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ge(i.map(o=>{const a=Mh(o,n);return Nl(function AQ(n){return n&&rm(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Rh(),sV()):ge(!0)}(r,e,t).pipe(Oe(o=>!0===o?s:{...VI}))):ge(s)}function BI(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...VI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||EY)(t,n,e);if(!i)return{...VI};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function lV(n,e,t,r){return t.length>0&&function qQ(n,e,t){return t.some(r=>iE(n,e,r)&&yo(r)!==Dt)}(n,t,r)?{segmentGroup:new hn(e,WQ(r,new hn(t,n.children))),slicedSegments:[]}:0===t.length&&function GQ(n,e,t){return t.some(r=>iE(n,e,r))}(n,t,r)?{segmentGroup:new hn(n.segments,zQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new hn(n.segments,n.children),slicedSegments:t}}function zQ(n,e,t,r,i){const s={};for(const o of r)if(iE(n,t,o)&&!i[yo(o)]){const a=new hn([],{});s[yo(o)]=a}return{...i,...s}}function WQ(n,e){const t={};t[Dt]=e;for(const r of n)if(""===r.path&&yo(r)!==Dt){const i=new hn([],{});t[yo(r)]=i}return t}function iE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class QQ{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new HQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new x(4002,!1)}recognize(){const e=lV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Dt).pipe(au(t=>{if(t instanceof oV)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof rE?this.noMatchError(t):t}),Oe(t=>{const r=new Jw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,{}),i=new Ma(r,t),s=new YL("",i),o=function jY(n,e,t=null,r=null){return VL(LL(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Dt).pipe(au(r=>{throw r instanceof rE?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=KL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return q(i).pipe(Dh(s=>{const o=r.children[s],a=function mQ(n,e){const t=n.filter(r=>yo(r)===e);return t.push(...n.filter(r=>yo(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),$w((s,o)=>(s.push(...o),s)),Hw(null),function yY(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dn((i,s)=>n(i,s,r)):Tn,zw(1),t?Hw(e):DL(()=>new Bw))}(),mn(s=>{if(null===s)return kh(r);const o=cV(s);return function XQ(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),ge(o)}))}processSegment(e,t,r,i,s,o){return q(t).pipe(Dh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(au(l=>{if(l instanceof rE)return ge(null);throw l}))),Ol(a=>!!a),au(a=>{if(iV(a))return function KQ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?ge([]):kh(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function ZQ(n,e,t,r){return!!(yo(n)===r||r!==Dt&&iE(e,t,n))&&("**"===n.path||BI(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):kh(i):kh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?aV(s):this.applyRedirects.lineralizeSegments(r,s).pipe(mn(o=>{const a=new hn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=BI(t,i,s);if(!a)return kh(t);const m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,h);return i.redirectTo.startsWith("/")?aV(m):this.applyRedirects.lineralizeSegments(i,m).pipe(mn(_=>this.processSegment(e,r,t,_.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?IL(i).parameters:{};a=ge({snapshot:new Jw(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uV(r),yo(r),r.component??r._loadedComponent??null,r,dV(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=$Q(t,r,i,e).pipe(Oe(({matched:l,consumedSegments:c,remainingSegments:h,parameters:m})=>l?{snapshot:new Jw(c,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uV(r),yo(r),r.component??r._loadedComponent??null,r,dV(r)),consumedSegments:c,remainingSegments:h}:null));return a.pipe(ct(l=>null===l?kh(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ct(({routes:c})=>{const h=r._loadedInjector??e,{snapshot:m,consumedSegments:_,remainingSegments:v}=l,{segmentGroup:C,slicedSegments:b}=lV(t,_,v,c);if(0===b.length&&C.hasChildren())return this.processChildren(h,c,C).pipe(Oe(B=>null===B?null:[new Ma(m,B)]));if(0===c.length&&0===b.length)return ge([new Ma(m,[])]);const T=yo(r)===s;return this.processSegment(h,c,C,b,T?Dt:s,!0).pipe(Oe(B=>[new Ma(m,B)]))}))))}getChildConfig(e,t,r){return t.children?ge({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ge({routes:t._loadedRoutes,injector:t._loadedInjector}):function VQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ge(!0):ge(i.map(o=>{const a=Mh(o,n);return Nl(function bQ(n){return n&&rm(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Rh(),sV())}(e,t,r).pipe(mn(i=>i?this.configLoader.loadChildren(e,t).pipe(zr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function jQ(n){return Hg(eV(!1,3))}())):ge({routes:[],injector:e})}}function JQ(n){const e=n.value.routeConfig;return e&&""===e.path}function cV(n){const e=[],t=new Set;for(const r of n){if(!JQ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=cV(r.children);e.push(new Ma(r.value,i))}return e.filter(r=>!t.has(r))}function uV(n){return n.data||{}}function dV(n){return n.resolve||{}}function hV(n){return"string"==typeof n.title||null===n.title}function UI(n){return ct(e=>{const t=n(e);return t?q(t).pipe(Oe(()=>e)):ge(e)})}const xh=new Ee("ROUTES");let jI=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ue(ZN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ge(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Nl(t.loadComponent()).pipe(Oe(fV),zr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),$g(()=>{this.componentLoaders.delete(t)})),i=new CL(r,()=>new Y).pipe(CI());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ge({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function oX(n,e,t,r){return Nl(n.loadChildren()).pipe(Oe(fV),mn(i=>i instanceof eN||Array.isArray(i)?ge(i):q(e.compileModuleAsync(i))),Oe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(xh,[],{optional:!0,self:!0}).flat()),{routes:o.map(LI),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe($g(()=>{this.childrenLoaders.delete(r)})),o=new CL(s,()=>new Y).pipe(CI());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fV(n){return function aX(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Y,this.transitionAbortSubject=new Y,this.configLoader=Ue(jI),this.environmentInjector=Ue(Cs),this.urlSerializer=Ue(qg),this.rootContexts=Ue(Xg),this.inputBindingEnabled=null!==Ue(eE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ge(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new JY(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new XY(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ne({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dn(s=>0!==s.id),Oe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ct(s=>{this.currentTransition=s;let o=!1,a=!1;return ge(s).pipe(zr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ct(l=>{const c=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const _="";return this.events.next(new Ih(l.id,this.urlSerializer.serialize(l.rawUrl),_,0)),l.resolve(null),hr}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ge(l).pipe(ct(_=>{const v=this.transitions?.getValue();return this.events.next(new Qw(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),v!==this.transitions?.getValue()?hr:Promise.resolve(_)}),function eX(n,e,t,r,i,s){return mn(o=>function YQ(n,e,t,r,i,s,o="emptyOnly"){return new QQ(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Oe(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),zr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const v=new zL(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(v)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:_,extractedUrl:v,source:C,restoredState:b,extras:T}=l,B=new Qw(_,this.urlSerializer.serialize(v),C,b);this.events.next(B);const P=ZL(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:P,urlAfterRedirects:v,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},ge(s)}{const _="";return this.events.next(new Ih(l.id,this.urlSerializer.serialize(l.extractedUrl),_,1)),l.resolve(null),hr}}),zr(l=>{const c=new ZY(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Oe(l=>(this.currentTransition=s={...l,guards:vQ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function RQ(n,e){return mn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ge({...t,guardsResult:!0}):function kQ(n,e,t,r){return q(n).pipe(mn(i=>function LQ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ge(s.map(a=>{const l=em(e)??i,c=Mh(a,l);return Nl(function SQ(n){return n&&rm(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Ol())})).pipe(Rh()):ge(!0)}(i.component,i.route,t,e,r)),Ol(i=>!0!==i,!0))}(o,r,i,n).pipe(mn(a=>a&&function DQ(n){return"boolean"==typeof n}(a)?function xQ(n,e,t,r){return q(e).pipe(Dh(i=>Uw(function OQ(n,e){return null!==n&&e&&e(new eQ(n)),ge(!0)}(i.route.parent,r),function PQ(n,e){return null!==n&&e&&e(new nQ(n)),ge(!0)}(i.route,r),function FQ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function wQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>jw(()=>ge(o.guards.map(l=>{const c=em(o.node)??t,h=Mh(l,c);return Nl(function IQ(n){return n&&rm(n.canActivateChild)}(h)?h.canActivateChild(r,n):c.runInContext(()=>h(r,n))).pipe(Ol())})).pipe(Rh())));return ge(s).pipe(Rh())}(n,i.path,t),function NQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ge(!0);const i=r.map(s=>jw(()=>{const o=em(e)??t,a=Mh(s,o);return Nl(function TQ(n){return n&&rm(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ol())}));return ge(i).pipe(Rh())}(n,i.route,t))),Ol(i=>!0!==i,!0))}(r,s,n,e):ge(a)),Oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),zr(l=>{if(s.guardsResult=l.guardsResult,cu(l.guardsResult))throw JL(0,l.guardsResult);const c=new KY(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),dn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),UI(l=>{if(l.guards.canActivateChecks.length)return ge(l).pipe(zr(c=>{const h=new YY(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),ct(c=>{let h=!1;return ge(c).pipe(function tX(n,e){return mn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ge(t);let s=0;return q(i).pipe(Dh(o=>function nX(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!hV(i)&&(s[zg]=i.title),function rX(n,e,t,r){const i=function iX(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ge({});const s={};return q(i).pipe(mn(o=>function sX(n,e,t,r){const i=em(e)??r,s=Mh(n,i);return Nl(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ol(),zr(a=>{s[o]=a}))),zw(1),function vY(n){return Oe(()=>n)}(s),au(o=>iV(o)?hr:Hg(o)))}(s,n,e,r).pipe(Oe(o=>(n._resolvedData=o,n.data=KL(n,t).resolve,i&&hV(i)&&(n.data[zg]=i.title),null)))}(o.route,r,n,e)),zr(()=>s++),zw(1),mn(o=>s===i.length?ge(t):hr))})}(t.paramsInheritanceStrategy,this.environmentInjector),zr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",2)}}))}),zr(c=>{const h=new QY(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),UI(l=>{const c=h=>{const m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(zr(_=>{h.component=_}),Oe(()=>{})));for(const _ of h.children)m.push(...c(_));return m};return jg(c(l.targetSnapshot.root)).pipe(Hw(),$r(1))}),UI(()=>this.afterPreactivation()),Oe(l=>{const c=function lQ(n,e,t){const r=Jg(n,e._root,t?t._root:void 0);return new GL(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),zr(()=>{this.events.next(new AI)}),((n,e,t,r)=>Oe(i=>(new yQ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),$r(1),zr({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Aa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Ii(this.transitionAbortSubject.pipe(zr(l=>{throw l}))),$g(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),au(l=>{if(a=!0,tV(l))this.events.next(new Qg(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function dQ(n){return tV(n)&&cu(n.url)}(l)?this.events.next(new MI(l.url)):s.resolve(!1);else{this.events.next(new Xw(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return hr}))}))}cancelNavigationTransition(t,r,i){const s=new Qg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pV(n){return n!==Yg}let gV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[zg]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(lX)},providedIn:"root"})}return n})(),lX=(()=>{class n extends gV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(gL))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(dX)},providedIn:"root"})}return n})();class uX{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let dX=(()=>{class n extends uX{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Sr(n)))(i||n)}}();static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oE=new Ee("",{providedIn:"root",factory:()=>({})});let hX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(fX)},providedIn:"root"})}return n})(),fX=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var im=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(im||{});function mV(n,e){n.events.pipe(dn(t=>t instanceof Aa||t instanceof Qg||t instanceof Xw||t instanceof Ih),Oe(t=>t instanceof Aa||t instanceof Ih?im.COMPLETE:t instanceof Qg&&(0===t.code||1===t.code)?im.REDIRECTING:im.FAILED),dn(t=>t!==im.REDIRECTING),$r(1)).subscribe(()=>{e()})}function pX(n){throw n}function gX(n,e,t){return e.parse("/")}const mX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_X={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Is=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ue(GN),this.isNgZoneEnabled=!1,this._events=new Y,this.options=Ue(oE,{optional:!0})||{},this.pendingTasks=Ue(mw),this.errorHandler=this.options.errorHandler||pX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||gX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ue(hX),this.routeReuseStrategy=Ue(cX),this.titleStrategy=Ue(gV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ue(xh,{optional:!0})?.flat()??[],this.navigationTransitions=Ue(sE),this.urlSerializer=Ue(qg),this.location=Ue(Fg),this.componentInputBindingEnabled=!!Ue(eE,{optional:!0}),this.eventsSubscription=new wt,this.isNgZoneEnabled=Ue(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Th,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ZL(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(_V(r)&&this._events.next(r));if(r instanceof Qw)pV(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Ih)this.rawUrlTree=i.rawUrl;else if(r instanceof zL){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof AI)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Qg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof MI){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pV(i.source)};this.scheduleNavigation(s,Yg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Xw&&this.restoreHistory(i,!0),r instanceof Aa&&(this.navigated=!0),_V(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Yg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(LI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let m,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{m=LL(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return VL(m,t,h,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=cu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Yg,null,r)}navigate(t,r={skipLocationChange:!1}){return function yX(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new x(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...mX}:!1===r?{..._X}:r,cu(t))return AL(this.currentUrlTree,t,i);const s=this.parseUrl(t);return AL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((m,_)=>{a=m,l=_});const h=this.pendingTasks.add();return mV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _V(n){return!(n instanceof AI||n instanceof MI)}class yV{}let EX=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(dn(t=>t instanceof Aa),Dh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=pT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return q(i).pipe(Xi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ge(null);const s=i.pipe(mn(o=>null===o?ge(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?q([s,this.loader.loadComponent(r)]).pipe(Xi()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Is),Q(ZN),Q(Cs),Q(yV),Q(jI))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $I=new Ee("");let vV=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Aa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ih&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof WL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new WL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){P0()};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function Ra(n,e){return{\u0275kind:n,\u0275providers:e}}function EV(){const n=Ue(Ar);return e=>{const t=n.get(Rl);if(e!==t.components[0])return;const r=n.get(Is),i=n.get(CV);1===n.get(zI)&&r.initialNavigation(),n.get(DV,null,Rt.Optional)?.setUpPreloading(),n.get($I,null,Rt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const CV=new Ee("",{factory:()=>new Y}),zI=new Ee("",{providedIn:"root",factory:()=>1}),DV=new Ee("");function TX(n){return Ra(0,[{provide:DV,useExisting:EX},{provide:yV,useExisting:n}])}const bV=new Ee("ROUTER_FORROOT_GUARD"),SX=[Fg,{provide:qg,useClass:DI},Is,Xg,{provide:Ah,useFactory:function wV(n){return n.routerState.root},deps:[Is]},jI,[]];function AX(){return new tF("Router",Is)}let WI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[SX,[],{provide:xh,multi:!0,useValue:t},{provide:bV,useFactory:xX,deps:[[Is,new bl,new Hd]]},{provide:oE,useValue:r||{}},r?.useHash?{provide:ou,useClass:q7}:{provide:ou,useClass:xF},{provide:$I,useFactory:()=>{const n=Ue(oK),e=Ue(it),t=Ue(oE),r=Ue(sE),i=Ue(qg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new vV(i,r,n,e,t)}},r?.preloadingStrategy?TX(r.preloadingStrategy).\u0275providers:[],{provide:tF,multi:!0,useFactory:AX},r?.initialNavigation?PX(r):[],r?.bindToComponentInputs?Ra(8,[XL,{provide:eE,useExisting:XL}]).\u0275providers:[],[{provide:TV,useFactory:EV},{provide:BT,multi:!0,useExisting:TV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:xh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(bV,8))};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({})}return n})();function xX(n){return"guarded"}function PX(n){return["disabled"===n.initialNavigation?Ra(3,[{provide:kT,multi:!0,useFactory:()=>{const e=Ue(Is);return()=>{e.setUpLocationChangeListener()}}},{provide:zI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ra(2,[{provide:zI,useValue:0},{provide:kT,multi:!0,deps:[Ar],useFactory:e=>{const t=e.get(z7,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Is),s=e.get(CV);mV(i,()=>{r(!0)}),e.get(sE).afterPreactivation=()=>(r(!0),s.closed?ge(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const TV=new Ee("");let NX=(()=>{class n{constructor(t){this.router=t,this.title="todo-app",this.router.events.subscribe(r=>{r instanceof Aa&&console.log("\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u307e\u3057\u305f:",r.urlAfterRedirects)})}logClick(t,r){r.preventDefault();const i=this.getPathFromLinkName(t);console.log(`${t}\u30ea\u30f3\u30af\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u307e\u3057\u305f`),this.router.navigate([i]).then(()=>{console.log(`${t}\u30ea\u30f3\u30af\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f`)})}getPathFromLinkName(t){switch(t){case"\u30ab\u30ec\u30f3\u30c0\u30fc":return"/calendar";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8":return"/projects";case"\u30bf\u30b9\u30af\u4e00\u89a7":return"/tasks";default:return"/"}}static#e=this.\u0275fac=function(r){return new(r||n)(z(Is))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-root"]],standalone:!0,features:[Ho],decls:10,vars:0,consts:[[1,"app-container"],[1,"side-nav"],["routerLink","/calendar",1,"nav-link",3,"click"],["routerLink","/projects",1,"nav-link",3,"click"],["routerLink","/tasks",1,"nav-link",3,"click"],[1,"content"]],template:function(r,i){1&r&&(S(0,"div",0)(1,"nav",1)(2,"a",2),ye("click",function(o){return i.logClick("\u30ab\u30ec\u30f3\u30c0\u30fc",o)}),G(3,"\u30ab\u30ec\u30f3\u30c0\u30fc"),M(),S(4,"a",3),ye("click",function(o){return i.logClick("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8",o)}),G(5,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),M(),S(6,"a",4),ye("click",function(o){return i.logClick("\u30bf\u30b9\u30af\u4e00\u89a7",o)}),G(7,"\u30bf\u30b9\u30af\u4e00\u89a7"),M()(),S(8,"div",5),Zn(9,"router-outlet"),M()())},dependencies:[NI,Ts],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.side-nav[_ngcontent-%COMP%]{width:200px;background-color:#f8f9fa;display:flex;flex-direction:column;padding:10px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;padding:10px;color:#000;margin-bottom:10px;border-radius:4px}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}"]})}return n})();class IV{}class FX{}const ka="*";function aE(n,e=null){return{type:4,styles:e,timings:n}}function MV(n,e=null){return{type:2,steps:n,options:e}}function Fl(n){return{type:6,styles:n,offset:null}}function lE(n,e,t){return{type:0,name:n,styles:e,options:t}}function cE(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class sm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class xV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function PV(n){return new x(3e3,!1)}function Ll(n){switch(n.length){case 0:return new sm;case 1:return n[0];default:return new xV(n)}}function OV(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),h=c==o,m=h&&a||new Map;l.forEach((_,v)=>{let C=v,b=_;if("offset"!==v)switch(C=n.normalizePropertyName(C,i),b){case"!":b=t.get(v);break;case ka:b=r.get(v);break;default:b=n.normalizeStyleValue(v,C,b,i)}m.set(C,b)}),h||s.push(m),a=m,o=c}),i.length)throw function sJ(n){return new x(3502,!1)}();return s}function GI(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&ZI(t,"start",n)));break;case"done":n.onDone(()=>r(t&&ZI(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&ZI(t,"destroy",n)))}}function ZI(n,e,t){const s=KI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function KI(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Ss(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function NV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const _J=(()=>typeof document>"u"?null:document.documentElement)();function YI(n){const e=n.parentNode||n.host||null;return e===_J?null:e}let uu=null,FV=!1;function LV(n,e){for(;e;){if(e===n)return!0;e=YI(e)}return!1}function VV(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let BV=(()=>{class n{validateStyleProperty(t){return function vJ(n){uu||(uu=function wJ(){return typeof document<"u"?document.body:null}()||{},FV=!!uu.style&&"WebkitAppearance"in uu.style);let e=!0;return uu.style&&!function yJ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in uu.style,!e&&FV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in uu.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return LV(t,r)}getParentElement(t){return YI(t)}query(t,r,i){return VV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new sm(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),QI=(()=>{class n{static#e=this.NOOP=new BV}return n})();const EJ=1e3,XI="ng-enter",uE="ng-leave",dE="ng-trigger",hE=".ng-trigger",jV="ng-animating",JI=".ng-animating";function xa(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:eS(parseFloat(e[1]),e[2])}function eS(n,e){return"s"===e?n*EJ:n}function fE(n,e,t){return n.hasOwnProperty("duration")?n:function DJ(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(PV()),{duration:0,delay:0,easing:""};i=eS(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=eS(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function LX(){return new x(3100,!1)}()),a=!0),s<0&&(e.push(function VX(){return new x(3101,!1)}()),a=!0),a&&e.splice(l,0,PV())}return{duration:i,delay:s,easing:o}}(n,e,t)}function om(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function HV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Vl(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function qo(n,e,t){e.forEach((r,i)=>{const s=nS(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function du(n,e){e.forEach((t,r)=>{const i=nS(r);n.style[i]=""})}function am(n){return Array.isArray(n)?1==n.length?n[0]:MV(n):n}const tS=new RegExp("{{\\s*(.+?)\\s*}}","g");function zV(n){let e=[];if("string"==typeof n){let t;for(;t=tS.exec(n);)e.push(t[1]);tS.lastIndex=0}return e}function lm(n,e,t){const r=n.toString(),i=r.replace(tS,(s,o)=>{let a=e[o];return null==a&&(t.push(function UX(n){return new x(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function pE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const IJ=/-+([a-z0-9])/g;function nS(n){return n.replace(IJ,(...e)=>e[1].toUpperCase())}function As(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function jX(n){return new x(3004,!1)}()}}function WV(n,e){return window.getComputedStyle(n)[e]}const gE="*";function MJ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function RJ(n,e,t){if(":"==n[0]){const l=function kJ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function tJ(n){return new x(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function eJ(n){return new x(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(qV(i,o));"<"==s[0]&&!(i==gE&&o==gE)&&e.push(qV(o,i))}(r,t,e)):t.push(n),t}const mE=new Set(["true","1"]),_E=new Set(["false","0"]);function qV(n,e){const t=mE.has(n)||_E.has(n),r=mE.has(e)||_E.has(e);return(i,s)=>{let o=n==gE||n==i,a=e==gE||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?mE.has(n):_E.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?mE.has(e):_E.has(e)),o&&a}}const xJ=new RegExp("s*:selfs*,?","g");function rS(n,e,t,r){return new PJ(n).build(e,t,r)}class PJ{constructor(e){this._driver=e}build(e,t,r){const i=new FJ(t);return this._resetContextStyleTimingState(i),As(this,am(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function $X(){return new x(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function zX(){return new x(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{zV(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(pE(s.values()),t.errors.push(function WX(n,e){return new x(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=As(this,am(e.animation),t);return{type:1,matchers:MJ(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:hu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>As(this,r,t)),options:hu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=As(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:hu(e.options)}}visitAnimate(e,t){const r=function VJ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return iS(fE(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=iS(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=fE(t,e);return iS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Fl({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Fl(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ka?r.push(a):t.errors.push(new x(3002,!1)):r.push(HV(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let m=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(function GX(n,e,t,r,i){return new x(3010,!1)}()),m=!1),s=h.startTime),m&&c.set(l,{startTime:s,endTime:i}),t.options&&function TJ(n,e,t){const r=e.params||{},i=zV(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function BX(n){return new x(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ZX(){return new x(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const h=e.steps.map(B=>{const P=this._makeStyleAst(B,t);let $=null!=P.offset?P.offset:function LJ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(P.styles),ee=0;return null!=$&&(s++,ee=P.offset=$),l=l||ee<0||ee>1,a=a||ee<c,c=ee,o.push(ee),P});l&&t.errors.push(function KX(){return new x(3012,!1)}()),a&&t.errors.push(function YX(){return new x(3200,!1)}());const m=e.steps.length;let _=0;s>0&&s<m?t.errors.push(function QX(){return new x(3202,!1)}()):0==s&&(_=1/(m-1));const v=m-1,C=t.currentTime,b=t.currentAnimateTimings,T=b.duration;return h.forEach((B,P)=>{const $=_>0?P==v?1:_*P:o[P],ee=$*T;t.currentTime=C+b.delay+ee,b.duration=ee,this._validateStyleAst(B,t),B.offset=$,r.styles.push(B)}),r}visitReference(e,t){return{type:8,animation:As(this,am(e.animation),t),options:hu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:hu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:hu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function OJ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(xJ,"")),n=n.replace(/@\*/g,hE).replace(/@\w+/g,t=>hE+"-"+t.slice(1)).replace(/:animating/g,JI),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Ss(t.collectedStyles,t.currentQuerySelector,new Map);const a=As(this,am(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:hu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function XX(){return new x(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:fE(e.timings,t.errors,!0);return{type:12,animation:As(this,am(e.animation),t),timings:r,options:null}}}class FJ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hu(n){return n?(n=om(n)).params&&(n.params=function NJ(n){return n?om(n):null}(n.params)):n={},n}function iS(n,e,t){return{duration:n,delay:e,easing:t}}function sS(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class yE{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const jJ=new RegExp(":enter","g"),$J=new RegExp(":leave","g");function oS(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new zJ).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class zJ{buildKeyframes(e,t,r,i,s,o,a,l,c,h=[]){c=c||new yE;const m=new aS(e,t,c,i,s,h,[]);m.options=l;const _=l.delay?xa(l.delay):0;m.currentTimeline.delayNextStep(_),m.currentTimeline.setStyles([o],null,m.errors,l),As(this,r,m);const v=m.timelines.filter(C=>C.containsAnimation());if(v.length&&a.size){let C;for(let b=v.length-1;b>=0;b--){const T=v[b];if(T.element===t){C=T;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([a],null,m.errors,l)}return v.length?v.map(C=>C.buildKeyframes()):[sS(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:xa(lm(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?xa(r.duration):null,a=null!=r.delay?xa(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),As(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=vE);const o=xa(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>As(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?xa(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),As(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return fE(t.params?lm(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?xa(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vE);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const m=t.createSubContext(e.options,c);s&&m.delayNextStep(s),c===t.element&&(l=m.currentTimeline),As(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const m=h.currentTime;As(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const vE={};class aS{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new wE(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=xa(r.duration)),null!=r.delay&&(i.delay=xa(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=lm(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new aS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=vE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new WJ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(jJ,"."+this._enterClassName)).replace($J,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function JX(n){return new x(3014,!1)}()),a}}class wE{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new wE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ka),this._currentKeyframe.set(t,ka);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function qJ(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ka)}else Vl(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=lm(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ka),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=Vl(a,new Map,this._backFill);c.forEach((h,m)=>{"!"===h?e.add(m):h===ka&&t.add(m)}),r||c.set("offset",l/this.duration),i.push(c)});const s=e.size?pE(e.values()):[],o=t.size?pE(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return sS(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class WJ extends wE{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=Vl(e[0]);l.set("offset",0),s.push(l);const c=Vl(e[0]);c.set("offset",KV(a)),s.push(c);const h=e.length-1;for(let m=1;m<=h;m++){let _=Vl(e[m]);const v=_.get("offset");_.set("offset",KV((t+v*r)/o)),s.push(_)}r=o,t=0,i="",e=s}return sS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function KV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class lS{}const GJ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ZJ extends lS{normalizePropertyName(e,t){return nS(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(GJ.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function HX(n,e){return new x(3005,!1)}())}return o+s}}function YV(n,e,t,r,i,s,o,a,l,c,h,m,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:m,errors:_}}const cS={};class QV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function KJ(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,h){const m=[],_=this.ast.options&&this.ast.options.params||cS,C=this.buildStyles(r,a&&a.params||cS,m),b=l&&l.params||cS,T=this.buildStyles(i,b,m),B=new Set,P=new Map,$=new Map,ee="void"===i,_e={params:YJ(b,_),delay:this.ast.options?.delay},xe=h?[]:oS(e,t,this.ast.animation,s,o,C,T,_e,c,m);let j=0;if(xe.forEach(O=>{j=Math.max(O.duration+O.delay,j)}),m.length)return YV(t,this._triggerName,r,i,ee,C,T,[],[],P,$,j,m);xe.forEach(O=>{const H=O.element,N=Ss(P,H,new Set);O.preStyleProps.forEach(F=>N.add(F));const U=Ss($,H,new Set);O.postStyleProps.forEach(F=>U.add(F)),H!==t&&B.add(H)});const R=pE(B.values());return YV(t,this._triggerName,r,i,ee,C,T,xe,R,P,$,j)}}function YJ(n,e){const t=om(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class QJ{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=om(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=lm(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class JJ{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new QJ(i.style,i.options&&i.options.params||{},r))}),XV(this.states,"true","1"),XV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new QV(e,i,this.states))}),this.fallbackTransition=function eee(n,e,t){return new QV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function XV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const tee=new yE;class nee{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=rS(this._driver,t,r,[]);if(r.length)throw function oJ(n){return new x(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=OV(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=oS(this._driver,t,s,XI,uE,new Map,new Map,r,tee,i),o.forEach(h=>{const m=Ss(a,h.element,new Map);h.postStyleProps.forEach(_=>m.set(_,null))})):(i.push(function aJ(){return new x(3300,!1)}()),o=[]),i.length)throw function lJ(n){return new x(3504,!1)}();a.forEach((h,m)=>{h.forEach((_,v)=>{h.set(v,this._driver.computeStyle(m,v,ka))})});const c=Ll(o.map(h=>{const m=a.get(h.element);return this._buildPlayer(h,new Map,m)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function cJ(n){return new x(3301,!1)}();return t}listen(e,t,r,i){const s=KI(t,"","","");return GI(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const JV="ng-animate-queued",uS="ng-animate-disabled",aee=[],e2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lee={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vo="__ng_removed";class dS{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function hee(n){return n??null}(r?e.value:e),r){const s=om(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const cm="void",hS=new dS(cm);class cee{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ks(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function uJ(n,e){return new x(3302,!1)}();if(null==r||0==r.length)throw function dJ(n){return new x(3303,!1)}();if(!function fee(n){return"start"==n||"done"==n}(r))throw function hJ(n,e){return new x(3400,!1)}();const s=Ss(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Ss(this._engine.statesByElement,e,new Map);return a.has(t)||(Ks(e,dE),Ks(e,dE+"-"+t),a.set(t,hS)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function fJ(n){return new x(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new fS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ks(e,dE),Ks(e,dE+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new dS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=hS),c.value!==cm&&l.value===c.value){if(!function mee(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const b=[],T=s.matchStyles(l.value,l.params,b),B=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{du(e,T),qo(e,B)})}return}const _=Ss(this._engine.playersByElement,e,[]);_.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let v=s.matchTransition(l.value,c.value,e,c.params),C=!1;if(!v){if(!i)return;v=s.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:v,fromState:l,toState:c,player:o,isFallbackTransition:C}),C||(Ks(e,JV),o.onStart(()=>{Ph(e,JV)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const T=this._engine.playersByElement.get(e);if(T){let B=T.indexOf(o);B>=0&&T.splice(B,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,hE,!0);r.forEach(i=>{if(i[vo])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,cm,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ll(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||hS,h=new dS(cm),m=new fS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[vo];(!s||s===e2)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ks(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=KI(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,GI(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class uee{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new cee(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(EE(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!EE(t))return;const s=t[vo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ks(e,uS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ph(e,uS))}removeNode(e,t,r){if(EE(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[vo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return EE(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,hE,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,JI,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ll(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[vo];if(t&&t.setForRemoval){if(e[vo]=e2,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(uS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ks(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ll(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function pJ(n){return new x(3402,!1)}()}_flushAnimations(e,t){const r=new yE,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(Ze=>{h.add(Ze);const Xe=this.driver.query(Ze,".ng-animate-queued",!0);for(let tt=0;tt<Xe.length;tt++)h.add(Xe[tt])});const m=this.bodyNode,_=Array.from(this.statesByElement.keys()),v=r2(_,this.collectedEnterElements),C=new Map;let b=0;v.forEach((Ze,Xe)=>{const tt=XI+b++;C.set(Xe,tt),Ze.forEach(st=>Ks(st,tt))});const T=[],B=new Set,P=new Set;for(let Ze=0;Ze<this.collectedLeaveElements.length;Ze++){const Xe=this.collectedLeaveElements[Ze],tt=Xe[vo];tt&&tt.setForRemoval&&(T.push(Xe),B.add(Xe),tt.hasAnimation?this.driver.query(Xe,".ng-star-inserted",!0).forEach(st=>B.add(st)):P.add(Xe))}const $=new Map,ee=r2(_,Array.from(B));ee.forEach((Ze,Xe)=>{const tt=uE+b++;$.set(Xe,tt),Ze.forEach(st=>Ks(st,tt))}),e.push(()=>{v.forEach((Ze,Xe)=>{const tt=C.get(Xe);Ze.forEach(st=>Ph(st,tt))}),ee.forEach((Ze,Xe)=>{const tt=$.get(Xe);Ze.forEach(st=>Ph(st,tt))}),T.forEach(Ze=>{this.processLeaveNode(Ze)})});const _e=[],xe=[];for(let Ze=this._namespaceList.length-1;Ze>=0;Ze--)this._namespaceList[Ze].drainQueuedTransitions(t).forEach(tt=>{const st=tt.player,bn=tt.element;if(_e.push(st),this.collectedEnterElements.length){const lr=bn[vo];if(lr&&lr.setForMove){if(lr.previousTriggersValues&&lr.previousTriggersValues.has(tt.triggerName)){const za=lr.previousTriggersValues.get(tt.triggerName),ps=this.statesByElement.get(tt.element);if(ps&&ps.has(tt.triggerName)){const Wa=ps.get(tt.triggerName);Wa.value=za,ps.set(tt.triggerName,Wa)}}return void st.destroy()}}const Xn=!m||!this.driver.containsElement(m,bn),On=$.get(bn),Sn=C.get(bn),pn=this._buildInstruction(tt,r,Sn,On,Xn);if(pn.errors&&pn.errors.length)return void xe.push(pn);if(Xn)return st.onStart(()=>du(bn,pn.fromStyles)),st.onDestroy(()=>qo(bn,pn.toStyles)),void i.push(st);if(tt.isFallbackTransition)return st.onStart(()=>du(bn,pn.fromStyles)),st.onDestroy(()=>qo(bn,pn.toStyles)),void i.push(st);const Co=[];pn.timelines.forEach(lr=>{lr.stretchStartingKeyframe=!0,this.disabledNodes.has(lr.element)||Co.push(lr)}),pn.timelines=Co,r.append(bn,pn.timelines),o.push({instruction:pn,player:st,element:bn}),pn.queriedElements.forEach(lr=>Ss(a,lr,[]).push(st)),pn.preStyleProps.forEach((lr,za)=>{if(lr.size){let ps=l.get(za);ps||l.set(za,ps=new Set),lr.forEach((Wa,gc)=>ps.add(gc))}}),pn.postStyleProps.forEach((lr,za)=>{let ps=c.get(za);ps||c.set(za,ps=new Set),lr.forEach((Wa,gc)=>ps.add(gc))})});if(xe.length){const Ze=[];xe.forEach(Xe=>{Ze.push(function gJ(n,e){return new x(3505,!1)}())}),_e.forEach(Xe=>Xe.destroy()),this.reportError(Ze)}const j=new Map,R=new Map;o.forEach(Ze=>{const Xe=Ze.element;r.has(Xe)&&(R.set(Xe,Xe),this._beforeAnimationBuild(Ze.player.namespaceId,Ze.instruction,j))}),i.forEach(Ze=>{const Xe=Ze.element;this._getPreviousPlayers(Xe,!1,Ze.namespaceId,Ze.triggerName,null).forEach(st=>{Ss(j,Xe,[]).push(st),st.destroy()})});const O=T.filter(Ze=>o2(Ze,l,c)),H=new Map;n2(H,this.driver,P,c,ka).forEach(Ze=>{o2(Ze,l,c)&&O.push(Ze)});const U=new Map;v.forEach((Ze,Xe)=>{n2(U,this.driver,new Set(Ze),l,"!")}),O.forEach(Ze=>{const Xe=H.get(Ze),tt=U.get(Ze);H.set(Ze,new Map([...Xe?.entries()??[],...tt?.entries()??[]]))});const F=[],Ft=[],Xs={};o.forEach(Ze=>{const{element:Xe,player:tt,instruction:st}=Ze;if(r.has(Xe)){if(h.has(Xe))return tt.onDestroy(()=>qo(Xe,st.toStyles)),tt.disabled=!0,tt.overrideTotalTime(st.totalTime),void i.push(tt);let bn=Xs;if(R.size>1){let On=Xe;const Sn=[];for(;On=On.parentNode;){const pn=R.get(On);if(pn){bn=pn;break}Sn.push(On)}Sn.forEach(pn=>R.set(pn,bn))}const Xn=this._buildAnimation(tt.namespaceId,st,j,s,U,H);if(tt.setRealPlayer(Xn),bn===Xs)F.push(tt);else{const On=this.playersByElement.get(bn);On&&On.length&&(tt.parentPlayer=Ll(On)),i.push(tt)}}else du(Xe,st.fromStyles),tt.onDestroy(()=>qo(Xe,st.toStyles)),Ft.push(tt),h.has(Xe)&&i.push(tt)}),Ft.forEach(Ze=>{const Xe=s.get(Ze.element);if(Xe&&Xe.length){const tt=Ll(Xe);Ze.setRealPlayer(tt)}}),i.forEach(Ze=>{Ze.parentPlayer?Ze.syncPlayerEvents(Ze.parentPlayer):Ze.destroy()});for(let Ze=0;Ze<T.length;Ze++){const Xe=T[Ze],tt=Xe[vo];if(Ph(Xe,uE),tt&&tt.hasAnimation)continue;let st=[];if(a.size){let Xn=a.get(Xe);Xn&&Xn.length&&st.push(...Xn);let On=this.driver.query(Xe,JI,!0);for(let Sn=0;Sn<On.length;Sn++){let pn=a.get(On[Sn]);pn&&pn.length&&st.push(...pn)}}const bn=st.filter(Xn=>!Xn.destroyed);bn.length?pee(this,Xe,bn):this.processLeaveNode(Xe)}return T.length=0,F.forEach(Ze=>{this.players.push(Ze),Ze.onDone(()=>{Ze.destroy();const Xe=this.players.indexOf(Ze);this.players.splice(Xe,1)}),Ze.play()}),F}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==cm;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==s,m=Ss(r,c,[]);this._getPreviousPlayers(c,h,o,a,t.toState).forEach(v=>{const C=v.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),v.destroy(),m.push(v)})}du(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],h=new Set,m=new Set,_=t.timelines.map(C=>{const b=C.element;h.add(b);const T=b[vo];if(T&&T.removedBeforeQueried)return new sm(C.duration,C.delay);const B=b!==l,P=function gee(n){const e=[];return s2(n,e),e}((r.get(b)||aee).map(j=>j.getRealPlayer())).filter(j=>!!j.element&&j.element===b),$=s.get(b),ee=o.get(b),_e=OV(this._normalizer,C.keyframes,$,ee),xe=this._buildPlayer(C,_e,P);if(C.subTimeline&&i&&m.add(b),B){const j=new fS(e,a,b);j.setRealPlayer(xe),c.push(j)}return xe});c.forEach(C=>{Ss(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>function dee(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,C.element,C))}),h.forEach(C=>Ks(C,jV));const v=Ll(_);return v.onDestroy(()=>{h.forEach(C=>Ph(C,jV)),qo(l,t.toStyles)}),m.forEach(C=>{Ss(i,C,[]).push(v)}),v}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new sm(e.duration,e.delay)}}class fS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new sm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>GI(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ss(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function EE(n){return n&&1===n.nodeType}function t2(n,e){const t=n.style.display;return n.style.display=e??"none",t}function n2(n,e,t,r,i){const s=[];t.forEach(l=>s.push(t2(l)));const o=[];r.forEach((l,c)=>{const h=new Map;l.forEach(m=>{const _=e.computeStyle(c,m,i);h.set(m,_),(!_||0==_.length)&&(c[vo]=lee,o.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>t2(l,s[a++])),o}function r2(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Ks(n,e){n.classList?.add(e)}function Ph(n,e){n.classList?.remove(e)}function pee(n,e,t){Ll(t).onDone(()=>n.processLeaveNode(e))}function s2(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof xV?s2(r.players,e):e.push(r)}}function o2(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class CE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new uee(e,t,r),this._timelineEngine=new nee(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],h=rS(this._driver,s,l,[]);if(l.length)throw function iJ(n,e){return new x(3404,!1)}();a=function XJ(n,e,t){return new JJ(n,e,t)}(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=NV(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=NV(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let yee=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&qo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qo(this._element,this._initialStyles),this._endStyles&&(qo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(du(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(du(this._element,this._endStyles),this._endStyles=null),qo(this._element,this._initialStyles),this._state=3)}}return n})();function pS(n){let e=null;return n.forEach((t,r)=>{(function vee(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class a2{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:WV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class wee{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return LV(e,t)}getParentElement(e){return YI(e)}query(e,t,r){return VV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,h=o.filter(v=>v instanceof a2);(function SJ(n,e){return 0===n||0===e})(r,i)&&h.forEach(v=>{v.currentSnapshot.forEach((C,b)=>c.set(b,C))});let m=function bJ(n){return n.length?n[0]instanceof Map?n:n.map(e=>HV(e)):[]}(t).map(v=>Vl(v));m=function AJ(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,WV(n,a)))}}return e}(e,m,c);const _=function _ee(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=pS(e[0]),e.length>1&&(r=pS(e[e.length-1]))):e instanceof Map&&(t=pS(e)),t||r?new yee(n,t,r):null}(e,m);return new a2(e,m,l,_)}}let Eee=(()=>{class n extends IV{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:_i.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?MV(t):t;return l2(this._renderer,null,r,"register",[i]),new Cee(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(dg),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class Cee extends FX{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Dee(this._id,e,t||{},this._renderer)}}class Dee{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return l2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function l2(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const c2="@.disabled";let bee=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let h=this._rendererCache.get(s);return h||(h=new u2("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,h)),h}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(o,a,t,h.name,h)};return r.data.animation.forEach(l),new Tee(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(dg),Q(CE),Q(it))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class u2{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==c2?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Tee extends u2{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==c2?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Iee(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function See(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const d2=[{provide:IV,useClass:Eee},{provide:lS,useFactory:function Mee(){return new ZJ}},{provide:CE,useClass:(()=>{class n extends CE{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(QI),Q(lS),Q(Rl))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})()},{provide:dg,useFactory:function Ree(n,e,t){return new bee(n,e,t)},deps:[_I,CE,it]}],gS=[{provide:QI,useFactory:()=>new wee},{provide:lg,useValue:"BrowserAnimations"},...d2],h2=[{provide:QI,useClass:BV},{provide:lg,useValue:"NoopAnimations"},...d2];let kee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?h2:gS}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:gS,imports:[eY]})}return n})(),f2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(z(bi),z(nn))};static#t=this.\u0275dir=Qe({type:n})}return n})(),fu=(()=>{class n extends f2{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Sr(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,features:[Yt]})}return n})();const Go=new Ee("NgValueAccessor"),Pee={provide:Go,useExisting:tn(()=>Oh),multi:!0};let Oh=(()=>{class n extends fu{writeValue(t){this.setProperty("checked",t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Sr(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&ye("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[rn([Pee]),Yt]})}return n})();const Oee={provide:Go,useExisting:tn(()=>Bl),multi:!0},Fee=new Ee("CompositionEventMode");let Bl=(()=>{class n extends f2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Nee(){const n=xl()?xl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(z(bi),z(nn),z(Fee,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ye("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[rn([Oee]),Yt]})}return n})();function Ul(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Si=new Ee("NgValidators"),jl=new Ee("NgAsyncValidators");function bE(n){return null}function D2(n){return null!=n}function b2(n){return Dg(n)?q(n):n}function T2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function I2(n,e){return e.map(t=>t(n))}function S2(n){return n.map(e=>function Vee(n){return!n.validate}(e)?e:t=>e.validate(t))}function mS(n){return null!=n?function A2(n){if(!n)return null;const e=n.filter(D2);return 0==e.length?null:function(t){return T2(I2(t,e))}}(S2(n)):null}function _S(n){return null!=n?function M2(n){if(!n)return null;const e=n.filter(D2);return 0==e.length?null:function(t){return function xee(...n){const e=aa(n),{args:t,keys:r}=vL(n),i=new dt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let h=0;h<o;h++){let m=!1;Wn(t[h]).subscribe(ke(s,_=>{m||(m=!0,c--),a[h]=_},()=>l--,void 0,()=>{(!l||!m)&&(c||s.next(r?wL(r,a):a),s.complete())}))}});return e?i.pipe(EI(e)):i}(I2(t,e).map(b2)).pipe(Oe(T2))}}(S2(n)):null}function R2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yS(n){return n?Array.isArray(n)?n:[n]:[]}function TE(n,e){return Array.isArray(n)?n.includes(e):n===e}function P2(n,e){const t=yS(e);return yS(n).forEach(i=>{TE(t,i)||t.push(i)}),t}function O2(n,e){return yS(e).filter(t=>!TE(n,t))}class N2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_S(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Wi extends N2{get formDirective(){return null}get path(){return null}}class Hl extends N2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class F2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pu=(()=>{class n extends F2{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(z(Hl,2))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ei("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Yt]})}return n})();const um="VALID",SE="INVALID",Nh="PENDING",dm="DISABLED";function AE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class U2{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===um}get invalid(){return this.status===SE}get pending(){return this.status==Nh}get disabled(){return this.status===dm}get enabled(){return this.status!==dm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(P2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(P2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O2(e,this._rawAsyncValidators))}hasValidator(e){return TE(this._rawValidators,e)}hasAsyncValidator(e){return TE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Nh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=um,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===um||this.status===Nh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dm:um}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Nh,this._hasOwnPendingAsyncValidator=!0;const t=b2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?dm:this.errors?SE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nh)?Nh:this._anyControlsHaveStatus(SE)?SE:um}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function $ee(n){return Array.isArray(n)?mS(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function zee(n){return Array.isArray(n)?_S(n):n||null}(this._rawAsyncValidators)}}const Fh=new Ee("CallSetDisabledState",{providedIn:"root",factory:()=>ME}),ME="always";function hm(n,e,t=ME){(function bS(n,e){const t=function k2(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(R2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function x2(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(R2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();xE(e._rawValidators,i),xE(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Gee(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&j2(n,e)})}(n,e),function Kee(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Zee(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&j2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qee(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function j2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function z2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function W2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const q2=class extends U2{constructor(e=null,t,r){super(function ES(n){return(AE(n)?n.validators:n)||null}(t),function CS(n,e){return(AE(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),AE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=W2(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){z2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){z2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){W2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},rte={provide:Hl,useExisting:tn(()=>$l)},K2=(()=>Promise.resolve())();let $l=(()=>{class n extends Hl{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new q2,this._registered=!1,this.name="",this.update=new He,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function SS(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Bl?t=s:function Xee(n){return Object.getPrototypeOf(n.constructor)===fu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function IS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){K2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&function Eh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);K2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function RE(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(z(Wi,9),z(Si,10),z(jl,10),z(Go,10),z(kl,8),z(Fh,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rn([rte]),Yt,Tr]})}return n})();const ste={provide:Go,useExisting:tn(()=>OE),multi:!0};let OE=(()=>{class n extends fu{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Sr(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&ye("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[rn([ste]),Yt]})}return n})(),Y2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({})}return n})();const pte={provide:Go,useExisting:tn(()=>gu),multi:!0};function rB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let gu=(()=>{class n extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=rB(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function gte(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Sr(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&ye("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[rn([pte]),Yt]})}return n})(),pm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(rB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(z(nn),z(bi),z(gu,9))};static#t=this.\u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const mte={provide:Go,useExisting:tn(()=>xS),multi:!0};function iB(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let xS=(()=>{class n extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);i.push(c)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function _te(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Sr(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&ye("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[rn([mte]),Yt]})}return n})(),gm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(iB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(iB(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(z(nn),z(bi),z(xS,9))};static#t=this.\u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();let mu=(()=>{class n{constructor(){this._validator=bE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,features:[Tr]})}return n})();const vte={provide:Si,useExisting:tn(()=>NE),multi:!0};let NE=(()=>{class n extends mu{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function oB(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function g2(n){return e=>{if(Ul(e.value)||Ul(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Sr(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&rr("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[rn([vte]),Yt]})}return n})(),Ite=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({imports:[Y2]})}return n})(),_u=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Fh,useValue:t.callSetDisabledState??ME}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({imports:[Ite]})}return n})();function FE(n,e=0){return function Ate(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function mm(n){return Array.isArray(n)?n:[n]}function Rr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Wr(n){return n instanceof nn?n.nativeElement:n}const Mte=["addListener","removeListener"],Rte=["addEventListener","removeEventListener"],kte=["on","off"];function Lh(n,e,t,r){if(k(t)&&(r=t,t=void 0),r)return Lh(n,e,t).pipe(EI(r));const[i,s]=function Ote(n){return k(n.addEventListener)&&k(n.removeEventListener)}(n)?Rte.map(o=>a=>n[o](e,a,t)):function xte(n){return k(n.addListener)&&k(n.removeListener)}(n)?Mte.map(fB(n,e)):function Pte(n){return k(n.on)&&k(n.off)}(n)?kte.map(fB(n,e)):[];if(!i&&Ct(n))return mn(o=>Lh(o,e,t))(Wn(n));if(!i)throw new TypeError("Invalid event target");return new dt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function fB(n,e){return t=>r=>n[t](e,r)}class Nte extends wt{constructor(e,t){super()}schedule(e,t=0){return this}}const LE={setInterval(n,e,...t){const{delegate:r}=LE;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=LE;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class VE extends Nte{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return LE.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&LE.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,he(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const _m={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=_m;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new wt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=_m;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=_m;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},OS={now:()=>(OS.delegate||Date).now(),delegate:void 0};class ym{constructor(e,t=ym.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}ym.now=OS.now;class BE extends ym{constructor(e,t=ym.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const pB=new class Lte extends BE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Fte extends VE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=_m.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(_m.cancelAnimationFrame(t),e._scheduled=void 0)}});let NS,Vte=1;const UE={};function gB(n){return n in UE&&(delete UE[n],!0)}const Bte={setImmediate(n){const e=Vte++;return UE[e]=!0,NS||(NS=Promise.resolve()),NS.then(()=>gB(e)&&n()),e},clearImmediate(n){gB(n)}},{setImmediate:Ute,clearImmediate:jte}=Bte,jE={setImmediate(...n){const{delegate:e}=jE;return(e?.setImmediate||Ute)(...n)},clearImmediate(n){const{delegate:e}=jE;return(e?.clearImmediate||jte)(n)},delegate:void 0},Vh=(new class $te extends BE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Hte extends VE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=jE.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(jE.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}}),new BE(VE)),Wte=Vh;function FS(n=0,e,t=Wte){let r=-1;return null!=e&&(Ya(e)?t=e:r=e),new dt(i=>{let s=function Gte(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function mB(n,e=Vh){return function qte(n){return ce((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(ke(t,c=>{r=!0,i=c,s||Wn(n(c)).subscribe(s=ke(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>FS(n,e))}let LS;try{LS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{LS=!1}let vm,vu,VS,Zo=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?XF(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!LS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Us))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yu(n){return function Zte(){if(null==vm&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vm=!0}))}finally{vm=vm||!1}return vm}()?n:!!n.capture}function Kte(){if(null==vu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return vu=!1,vu;if("scrollBehavior"in document.documentElement.style)vu=!0;else{const n=Element.prototype.scrollTo;vu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return vu}function BS(n){if(function Yte(){if(null==VS){const n=typeof document<"u"?document.head:null;VS=!(!n||!n.createShadowRoot&&!n.attachShadow)}return VS}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function US(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ys(n){return n.composedPath?n.composedPath()[0]:n.target}function jS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Qte=new Ee("cdk-dir-doc",{providedIn:"root",factory:function Xte(){return Ue(xt)}}),Jte=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let wm=(()=>{class n{constructor(t){this.value="ltr",this.change=new He,t&&(this.value=function ene(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Jte.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Qte,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Em=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({})}return n})(),yB=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Y,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new dt(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(mB(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ge()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(dn(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Wr(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Lh(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(Zo),Q(xt,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HS=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Y,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(mB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Zo),Q(it),Q(xt,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$S=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({})}return n})(),vB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({imports:[Em,$S,Em,$S]})}return n})();class zS{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class WS extends zS{constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}}class wB extends zS{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class rne extends zS{constructor(e){super(),this.element=e instanceof nn?e.nativeElement:e}}class qS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof WS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof wB?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof rne?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ine extends qS{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Ar.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let GS=(()=>{class n extends qS{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new He,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=r.createComponent(s,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(r){return new(r||n)(z(eu),z(ji),z(xt))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Yt]})}return n})(),$E=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({})}return n})();const EB=Kte();class sne{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Rr(-this._previousScrollPosition.left),e.style.top=Rr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),EB&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),EB&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class one{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(dn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class CB{enable(){}disable(){}attach(){}}function ZS(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function DB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class ane{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();ZS(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let lne=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new CB,this.close=o=>new one(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new sne(this._viewportRuler,this._document),this.reposition=o=>new ane(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(r){return new(r||n)(Q(yB),Q(HS),Q(it),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class bB{constructor(e){if(this.scrollStrategy=new CB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class cne{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let TB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),une=(()=>{class n extends TB{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(it,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dne=(()=>{class n extends TB{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ys(s)},this._clickListener=s=>{const o=Ys(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const h=l[c];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(o)||h.overlayElement.contains(a))break;const m=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(Zo),Q(it,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zE=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||jS()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),jS()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(Zo))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Cm{constructor(e,t,r,i,s,o,a,l,c,h=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new Y,this._attachments=new Y,this._detachments=new Y,this._locationChanges=wt.EMPTY,this._backdropClickHandler=m=>this._backdropClick.next(m),this._backdropTransitionendHandler=m=>{this._disposeBackdrop(m.target)},this._keydownEvents=new Y,this._outsidePointerEvents=new Y,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe($r(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Rr(this._config.width),e.height=Rr(this._config.height),e.minWidth=Rr(this._config.minWidth),e.minHeight=Rr(this._config.minHeight),e.maxWidth=Rr(this._config.maxWidth),e.maxHeight=Rr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=mm(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ii(fe(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const IB="cdk-overlay-connected-position-bounding-box",hne=/([A-Za-z%]+)$/;class fne{get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Y,this._resizeSubscription=wt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(IB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),h=this._getOverlayFit(c,t,r,a);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(h,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const h=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);h>l&&(l=h,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&wu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(IB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=AB(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let _=0-a,v=a+s.height-r.height,C=this._subtractOverflows(s.width,0-o,o+s.width-r.width),b=this._subtractOverflows(s.height,_,v),T=C*b;return{visibleArea:T,isCompletelyWithinViewport:s.width*s.height===T,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=SB(this._overlayRef.getConfig().minHeight),a=SB(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=AB(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let h=0,m=0;return h=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,m=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:h,y:m},{x:e.x+h,y:e.y+m}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new cne(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,h,m,_;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const v=Math.min(r.bottom-e.y+r.top,e.y),C=this._lastBoundingBoxSize.height;s=2*v,o=e.y-v,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-C/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)_=r.width-e.x+this._viewportMargin,h=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)m=e.x,h=r.right-e.x;else{const v=Math.min(r.right-e.x+r.left,e.x),C=this._lastBoundingBoxSize.width;h=2*v,m=e.x-v,h>C&&!this._isInitialRender&&!this._growAfterOpen&&(m=e.x-C/2)}return{top:o,left:m,bottom:a,right:_,width:h,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Rr(r.height),i.top=Rr(r.top),i.bottom=Rr(r.bottom),i.width=Rr(r.width),i.left=Rr(r.left),i.right=Rr(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Rr(s)),o&&(i.maxWidth=Rr(o))}this._lastBoundingBoxSize=r,wu(this._boundingBox.style,i)}_resetBoundingBoxStyles(){wu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){wu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const h=this._viewportRuler.getViewportScrollPosition();wu(r,this._getExactOverlayY(t,e,h)),wu(r,this._getExactOverlayX(t,e,h))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Rr(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Rr(o.maxWidth):s&&(r.maxWidth="")),wu(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Rr(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Rr(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:DB(e,r),isOriginOutsideView:ZS(e,r),isOverlayClipped:DB(t,r),isOverlayOutsideView:ZS(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&mm(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof nn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function wu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function SB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(hne);return t&&"px"!==t?null:parseFloat(e)}return n||null}function AB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const MB="cdk-global-overlay-wrapper";class pne{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(MB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),h=this._xPosition,m=this._xOffset,_="rtl"===this._overlayRef.getConfig().direction;let v="",C="",b="";l?b="flex-start":"center"===h?(b="center",_?C=m:v=m):_?"left"===h||"end"===h?(b="flex-end",v=m):("right"===h||"start"===h)&&(b="flex-start",C=m):"left"===h||"start"===h?(b="flex-start",v=m):("right"===h||"end"===h)&&(b="flex-end",C=m),e.position=this._cssPosition,e.marginLeft=l?"0":v,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":C,t.justifyContent=b,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(MB),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let gne=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new pne}flexibleConnectedTo(t){return new fne(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(HS),Q(xt),Q(Zo),Q(zE))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mne=0,Uh=(()=>{class n{constructor(t,r,i,s,o,a,l,c,h,m,_,v){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=h,this._location=m,this._outsideClickDispatcher=_,this._animationsModuleType=v}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new bB(t);return o.direction=o.direction||this._directionality.value,new Cm(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+mne++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Rl)),new ine(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(lne),Q(zE),Q(eu),Q(gne),Q(une),Q(Ar),Q(it),Q(xt),Q(wm),Q(Fg),Q(dne),Q(lg,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const vne={provide:new Ee("cdk-connected-overlay-scroll-strategy"),deps:[Uh],useFactory:function yne(n){return()=>n.scrollStrategies.reposition()}};let RB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:[Uh,vne],imports:[Em,$E,vB,vB]})}return n})();function xB(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function PB(n){return dn((e,t)=>n<=t)}let Tne=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ine=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:[Tne]})}return n})();const OB=new Set;let Eu,Ane=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rne}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Mne(n,e){if(!OB.has(n))try{Eu||(Eu=document.createElement("style"),e&&(Eu.nonce=e),Eu.setAttribute("type","text/css"),document.head.appendChild(Eu)),Eu.sheet&&(Eu.sheet.insertRule(`@media ${n} {body{ }}`,0),OB.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Zo),Q(p0,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rne(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let kne=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Y}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return NB(mm(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=jg(NB(mm(t)).map(o=>this._registerQuery(o).observable));return s=Uw(s.pipe($r(1)),s.pipe(PB(1),function Sne(n,e=Vh){return ce((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,h=e.now();if(h<c)return i=this.schedule(void 0,c-h),void r.add(i);a()}t.subscribe(ke(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))),s.pipe(Oe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new dt(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Zs(r),Oe(({matches:o})=>({query:t,matches:o})),Ii(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Ane),Q(it))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NB(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let WE=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Nne(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function One(n){try{return n.frameElement}catch{return null}}(function $ne(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===BB(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=BB(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function jne(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Hne(n){return!function Lne(n){return function Bne(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Fne(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Vne(n){return function Une(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||VB(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Zo))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VB(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function BB(n){if(!VB(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class zne{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe($r(1)).subscribe(e)}}let KS=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new zne(t,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(WE),Q(it),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YS(n){return 0===n.buttons||0===n.detail}function QS(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Wne=new Ee("cdk-input-modality-detector-options"),qne={ignoreKeys:[18,17,224,91,16]},jh=yu({passive:!0,capture:!0});let Gne=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ne(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ys(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(YS(o)?"keyboard":"mouse"),this._mostRecentTarget=Ys(o))},this._onTouchstart=o=>{QS(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ys(o))},this._options={...qne,...s},this.modalityDetected=this._modality.pipe(PB(1)),this.modalityChanged=this.modalityDetected.pipe(pr()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,jh),i.addEventListener("mousedown",this._onMousedown,jh),i.addEventListener("touchstart",this._onTouchstart,jh)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,jh),document.removeEventListener("mousedown",this._onMousedown,jh),document.removeEventListener("touchstart",this._onTouchstart,jh))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Zo),Q(it),Q(xt),Q(Wne,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Kne=new Ee("cdk-focus-monitor-default-options"),qE=yu({passive:!0,capture:!0});let XS=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Y,this._rootNodeFocusAndBlurListener=a=>{for(let c=Ys(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,r=!1){const i=Wr(t);if(!this._platform.isBrowser||1!==i.nodeType)return ge();const s=BS(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new Y,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Wr(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Wr(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Ys(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,qE),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,qE)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ii(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,qE),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,qE),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(Zo),Q(Gne),Q(xt,8),Q(Kne,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jB="cdk-high-contrast-black-on-white",HB="cdk-high-contrast-white-on-black",JS="cdk-high-contrast-active";let $B=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Ue(kne).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(JS,jB,HB),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(JS,jB):2===r&&t.add(JS,HB)}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Zo),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yne=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(r){return new(r||n)(Q($B))};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({imports:[Ine]})}return n})();function Qne(n,e){}class GE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let zB=(()=>{class n extends qS{constructor(t,r,i,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const m=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),m},this._document=i,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=US(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=US();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=US())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(r){return new(r||n)(z(nn),z(KS),z(xt,8),z(GE),z(WE),z(it),z(Cm),z(XS))};static#t=this.\u0275cmp=un({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&SN(GS,7),2&r){let s;_h(s=function yh(){return function dG(n,e){return n[Ns].queries[e].queryList}(Ce(),Zy())}())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&rr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Yt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&Ne(0,Qne,0,0,"ng-template",0)},dependencies:[GS],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class eA{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Y,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!xB(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const WB=new Ee("DialogScrollStrategy"),Xne=new Ee("DialogData"),Jne=new Ee("DefaultDialogConfig"),tre={provide:WB,deps:[Uh],useFactory:function ere(n){return()=>n.scrollStrategies.block()}};let nre=0,qB=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,r,i,s,o,a){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Y,this._afterOpenedAtThisLevel=new Y,this._ariaHiddenElements=new Map,this.afterAllClosed=jw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Zs(void 0))),this._scrollStrategy=a}open(t,r){(r={...this._defaultOptions||new GE,...r}).id=r.id||"cdk-dialog-"+nre++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),o=this._overlay.create(s),a=new eA(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){tA(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){tA(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),tA(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new bB({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,o=[{provide:GE,useValue:i},{provide:eA,useValue:r},{provide:Cm,useValue:t}];let a;i.container?"function"==typeof i.container?a=i.container:(a=i.container.type,o.push(...i.container.providers(i))):a=zB;const l=new WS(a,i.viewContainerRef,Ar.create({parent:s||this._injector,providers:o}),i.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,r,i,s){if(t instanceof $s){const o=this._createInjector(s,r,i,void 0);let a={$implicit:s.data,dialogRef:r};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new wB(t,null,a,o))}else{const o=this._createInjector(s,r,i,this._injector),a=i.attachComponentPortal(new WS(t,s.viewContainerRef,o,s.componentFactoryResolver));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:Xne,useValue:t.data},{provide:eA,useValue:r}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!o||!o.get(wm,null,{optional:!0}))&&a.push({provide:wm,useValue:{value:t.direction,change:ge()}}),Ar.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Uh),Q(Ar),Q(Jne,8),Q(n,12),Q(zE),Q(WB))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function tA(n,e){let t=n.length;for(;t--;)e(n[t])}let rre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:[qB,tre],imports:[RB,$E,Yne,$E]})}return n})();const sre=new Ee("mat-sanity-checks",{providedIn:"root",factory:function ire(){return!0}});let KB=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!jS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(Q($B),Q(sre,8),Q(xt))};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({imports:[Em,Em]})}return n})();const YB=yu({passive:!0,capture:!0});class lre{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Ys(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,YB)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,YB)))}}class nA{static#e=this._eventManager=new lre;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Wr(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...QB,...r.animation},o=r.radius||function ure(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-o+"px",h.style.top=l-o+"px",h.style.height=2*o+"px",h.style.width=2*o+"px",null!=r.color&&(h.style.backgroundColor=r.color),h.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(h);const m=window.getComputedStyle(h),v=m.transitionDuration,C="none"===m.transitionProperty||"0s"===v||"0s, 0s"===v||0===i.width&&0===i.height,b=new are(this,h,r,C);h.style.transform="scale3d(1, 1, 1)",b.state=0,r.persistent||(this._mostRecentTransientRipple=b);return!C&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const B=()=>this._finishRippleTransition(b),P=()=>this._destroyRipple(b);h.addEventListener("transitionend",B),h.addEventListener("transitioncancel",P)}),this._activeRipples.set(b,null),(C||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...QB,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Wr(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,JB.forEach(r=>{nA._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{e3.forEach(t=>{this._triggerElement.addEventListener(t,this,XB)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=YS(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!QS(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(JB.forEach(t=>nA._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&e3.forEach(t=>e.removeEventListener(t,this,XB)))}}function dre(n,e){}class ZE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const rA="mdc-dialog--open",t3="mdc-dialog--opening",n3="mdc-dialog--closing";let pre=(()=>{class n extends zB{constructor(t,r,i,s,o,a,l,c){super(t,r,i,s,o,a,l,c),this._animationStateChanged=new He}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(r){return new(r||n)(z(nn),z(KS),z(xt,8),z(ZE),z(WE),z(it),z(Cm),z(XS))};static#t=this.\u0275cmp=un({type:n,selectors:[["ng-component"]],features:[Yt],decls:0,vars:0,template:function(r,i){},encapsulation:2})}return n})();const r3="--mat-dialog-transition-duration";function s3(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?FE(n.substring(0,n.length-2)):n.endsWith("s")?1e3*FE(n.substring(0,n.length-1)):"0"===n?0:null}let gre=(()=>{class n extends pre{constructor(t,r,i,s,o,a,l,c,h){super(t,r,i,s,o,a,l,h),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?s3(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?s3(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(r3,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(t3,rA)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(rA),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(rA),this._animationsEnabled?(this._hostElement.style.setProperty(r3,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(n3)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(t3,n3)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(r){return new(r||n)(z(nn),z(KS),z(xt,8),z(ZE),z(WE),z(it),z(Cm),z(lg,8),z(XS))};static#t=this.\u0275cmp=un({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,i){2&r&&(sT("id",i._config.id),rr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),ei("_mat-animation-noopable",!i._animationsEnabled))},features:[Yt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(S(0,"div",0)(1,"div",1),Ne(2,dre,0,0,"ng-template",2),M()())},dependencies:[GS],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class bm{constructor(e,t,r){this._ref=e,this._containerInstance=r,this._afterOpened=new Y,this._beforeClosed=new Y,this._state=0,this.disableClose=t.disableClose,this.id=e.id,r._animationStateChanged.pipe(dn(i=>"opened"===i.state),$r(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(dn(i=>"closed"===i.state),$r(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),fe(this.backdropClick(),this.keydownEvents().pipe(dn(i=>27===i.keyCode&&!this.disableClose&&!xB(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function mre(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(dn(t=>"closing"===t.state),$r(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const iA=new Ee("MatMdcDialogData"),_re=new Ee("mat-mdc-dialog-default-options"),o3=new Ee("mat-mdc-dialog-scroll-strategy"),vre={provide:o3,deps:[Uh],useFactory:function yre(n){return()=>n.scrollStrategies.block()}};let wre=0,Ere=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,r,i,s,o,a,l,c,h,m){this._overlay=t,this._defaultOptions=i,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Y,this._afterOpenedAtThisLevel=new Y,this._idPrefix="mat-dialog-",this.dialogConfigClass=ZE,this.afterAllClosed=jw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Zs(void 0))),this._scrollStrategy=a,this._dialog=r.get(qB)}open(t,r){let i;(r={...this._defaultOptions||new ZE,...r}).id=r.id||`${this._idPrefix}${wre++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:GE,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(o,a,l)=>(i=new this._dialogRefConstructor(o,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=s.componentRef,i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static#e=this.\u0275fac=function(r){P0()};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),Tm=(()=>{class n extends Ere{constructor(t,r,i,s,o,a,l,c){super(t,r,s,a,l,o,bm,gre,iA,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Uh),Q(Ar),Q(Fg,8),Q(_re,8),Q(o3),Q(n,12),Q(zE),Q(lg,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),Cre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:[Tm,vre],imports:[rre,RB,$E,KB,KB]})}return n})();class KE{}class YE{}class Ko{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ko?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ko;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ko?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Dre{encodeKey(e){return l3(e)}encodeValue(e){return l3(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Tre=/%(\d[a-f0-9])/gi,Ire={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function l3(n){return encodeURIComponent(n).replace(Tre,(e,t)=>Ire[t]??e)}function QE(n){return`${n}`}class Wl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Dre,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function bre(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(QE):[QE(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Wl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(QE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(QE(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Sre{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function c3(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function u3(n){return typeof Blob<"u"&&n instanceof Blob}function d3(n){return typeof FormData<"u"&&n instanceof FormData}class Im{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Are(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ko),this.context||(this.context=new Sre),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Wl,this.urlWithParams=t}serializeBody(){return null===this.body?null:c3(this.body)||u3(this.body)||d3(this.body)||function Mre(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||d3(this.body)?null:u3(this.body)?this.body.type||null:c3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((m,_)=>m.set(_,e.setHeaders[_]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((m,_)=>m.set(_,e.setParams[_]),c)),new Im(t,r,s,{params:c,headers:l,context:h,reportProgress:a,responseType:i,withCredentials:o})}}var Hh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Hh||{});class sA{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ko,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class oA extends sA{constructor(e={}){super(e),this.type=Hh.ResponseHeader}clone(e={}){return new oA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class $h extends sA{constructor(e={}){super(e),this.type=Hh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new $h({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class h3 extends sA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function aA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Rre=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Im)s=t;else{let l,c;l=i.headers instanceof Ko?i.headers:new Ko(i.headers),i.params&&(c=i.params instanceof Wl?i.params:new Wl({fromObject:i.params})),s=new Im(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=ge(s).pipe(Dh(l=>this.handler.handle(l)));if(t instanceof Im||"events"===i.observe)return o;const a=o.pipe(dn(l=>l instanceof $h));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Oe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Oe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Oe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Oe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Wl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,aA(i,r))}post(t,r,i={}){return this.request("POST",t,aA(i,r))}put(t,r,i={}){return this.request("PUT",t,aA(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(KE))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function g3(n,e){return e(n)}function xre(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Ore=new Ee(""),Sm=new Ee(""),m3=new Ee("");function Nre(){let n=null;return(e,t)=>{null===n&&(n=(Ue(Ore,{optional:!0})??[]).reduceRight(xre,g3));const r=Ue(mw),i=r.add();return n(e,t).pipe($g(()=>r.remove(i)))}}let _3=(()=>{class n extends KE{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Ue(mw)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Sm),...this.injector.get(m3,[])]));this.chain=i.reduceRight((s,o)=>function Pre(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),g3)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe($g(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(YE),Q(Cs))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const Bre=/^\)\]\}',?\n/;let v3=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new x(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?q(r.\u0275loadImpl()):ge(null)).pipe(ct(()=>new dt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((b,T)=>o.setRequestHeader(b,T.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const b=t.detectContentTypeHeader();null!==b&&o.setRequestHeader("Content-Type",b)}if(t.responseType){const b=t.responseType.toLowerCase();o.responseType="json"!==b?b:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const b=o.statusText||"OK",T=new Ko(o.getAllResponseHeaders()),B=function Ure(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new oA({headers:T,status:o.status,statusText:b,url:B}),l},h=()=>{let{headers:b,status:T,statusText:B,url:P}=c(),$=null;204!==T&&($=typeof o.response>"u"?o.responseText:o.response),0===T&&(T=$?200:0);let ee=T>=200&&T<300;if("json"===t.responseType&&"string"==typeof $){const _e=$;$=$.replace(Bre,"");try{$=""!==$?JSON.parse($):null}catch(xe){$=_e,ee&&(ee=!1,$={error:xe,text:$})}}ee?(s.next(new $h({body:$,headers:b,status:T,statusText:B,url:P||void 0})),s.complete()):s.error(new h3({error:$,headers:b,status:T,statusText:B,url:P||void 0}))},m=b=>{const{url:T}=c(),B=new h3({error:b,status:o.status||0,statusText:o.statusText||"Unknown Error",url:T||void 0});s.error(B)};let _=!1;const v=b=>{_||(s.next(c()),_=!0);let T={type:Hh.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),"text"===t.responseType&&o.responseText&&(T.partialText=o.responseText),s.next(T)},C=b=>{let T={type:Hh.UploadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),s.next(T)};return o.addEventListener("load",h),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",v),null!==a&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:Hh.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",h),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",v),null!==a&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(JF))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const lA=new Ee("XSRF_ENABLED"),w3=new Ee("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),E3=new Ee("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class C3{}let $re=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=HF(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(Us),Q(w3))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function zre(n,e){const t=n.url.toLowerCase();if(!Ue(lA)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=Ue(C3).getToken(),i=Ue(E3);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var ql=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ql||{});function Wre(...n){const e=[Rre,v3,_3,{provide:KE,useExisting:_3},{provide:YE,useExisting:v3},{provide:Sm,useValue:zre,multi:!0},{provide:lA,useValue:!0},{provide:C3,useClass:$re}];for(const t of n)e.push(...t.\u0275providers);return a0(e)}const D3=new Ee("LEGACY_INTERCEPTOR_FN");function qre(){return function Cu(n,e){return{\u0275kind:n,\u0275providers:e}}(ql.LegacyInterceptors,[{provide:D3,useFactory:Nre},{provide:Sm,useExisting:D3,multi:!0}])}let Gre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:[Wre(qre())]})}return n})();function b3(n=0,e=Vh){return n<0&&(n=0),FS(n,n,e)}function cA(n,e){return k(e)?ct(()=>n,e):ct(()=>n)}var Jre=function(){function n(){}return n.prototype.getAllStyles=function(e){return window.getComputedStyle(e)},n.prototype.getStyle=function(e,t){return this.getAllStyles(e)[t]},n.prototype.isStaticPositioned=function(e){return"static"===(this.getStyle(e,"position")||"static")},n.prototype.offsetParent=function(e){for(var t=e.offsetParent||document.documentElement;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement},n.prototype.position=function(e,t){void 0===t&&(t=!0);var r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))r={top:(r=e.getBoundingClientRect()).top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{var s=this.offsetParent(e);r=this.offset(e,!1),s!==document.documentElement&&(i=this.offset(s,!1)),i.top+=s.clientTop,i.left+=s.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,t&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r},n.prototype.offset=function(e,t){void 0===t&&(t=!0);var r=e.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft,s={height:r.height||e.offsetHeight,width:r.width||e.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return t&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(e,t,r,i){var s=r.split("-"),o=s[0],a=void 0===o?"top":o,l=s[1],c=void 0===l?"center":l,h=i?this.offset(e,!1):this.position(e,!1),m=this.getAllStyles(t),_=parseFloat(m.marginTop),v=parseFloat(m.marginBottom),C=parseFloat(m.marginLeft),b=parseFloat(m.marginRight),T=0,B=0;switch(a){case"top":T=h.top-(t.offsetHeight+_+v);break;case"bottom":T=h.top+h.height;break;case"left":B=h.left-(t.offsetWidth+C+b);break;case"right":B=h.left+h.width}switch(c){case"top":T=h.top;break;case"bottom":T=h.top+h.height-t.offsetHeight;break;case"left":B=h.left;break;case"right":B=h.left+h.width-t.offsetWidth;break;case"center":"top"===a||"bottom"===a?B=h.left+h.width/2-t.offsetWidth/2:T=h.top+h.height/2-t.offsetHeight/2}t.style.transform="translate("+Math.round(B)+"px, "+Math.round(T)+"px)";var P=t.getBoundingClientRect(),$=document.documentElement,ee=window.innerHeight||$.clientHeight,_e=window.innerWidth||$.clientWidth;return P.left>=0&&P.top>=0&&P.right<=_e&&P.bottom<=ee},n}(),eie=/\s+/,T3=new Jre,wo=function(){return wo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},wo.apply(this,arguments)},uA=function(n,e,t){if(t||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},dA=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(dA||{}),nie=[dA.SUNDAY,dA.SATURDAY],hA=7,Gl=86400;function I3(n,e){var t=e.startDate,i=e.excluded,s=e.precision;if(i.length<1)return 0;for(var a=n.getDay,l=n.addDays,c=(0,n.addSeconds)(t,e.seconds-1),h=a(t),m=a(c),_=0,v=t,C=function(){var b=a(v);i.some(function(T){return T===b})&&(_+=function rie(n,e){var r=e.day,s=e.dayEnd,o=e.startDate,a=e.endDate,l=n.differenceInSeconds,h=n.startOfDay;if("minutes"===e.precision){if(r===e.dayStart)return l((0,n.endOfDay)(o),o)+1;if(r===s)return l(a,h(a))+1}return Gl}(n,{dayStart:h,dayEnd:m,day:b,precision:s,startDate:t,endDate:c})),v=l(v,1)};v<c;)C();return _}function Am(n,e){var r=e.periodStart,i=e.periodEnd;return e.events.filter(function(s){return function oie(n,e){var t=e.event,r=e.periodStart,i=e.periodEnd,s=n.isSameSecond,o=t.start,a=t.end||t.start;return!!(o>r&&o<i||a>r&&a<i||o<r&&a>i||s(o,r)||s(o,i)||s(a,r)||s(a,i))}(n,{event:s,periodStart:r,periodEnd:i})})}function S3(n,e){var t=e.date,r=e.weekendDays,i=void 0===r?nie:r,o=n.isSameDay,a=n.getDay,l=(0,n.startOfDay)(new Date),c=a(t);return{date:t,day:c,isPast:t<l,isToday:o(t,l),isFuture:t>l,isWeekend:i.indexOf(c)>-1}}function pA(n,e){for(var i=e.excluded,s=void 0===i?[]:i,o=e.weekendDays,a=e.viewStart,l=void 0===a?n.startOfWeek(e.viewDate,{weekStartsOn:e.weekStartsOn}):a,c=e.viewEnd,h=void 0===c?n.addDays(l,hA):c,m=n.addDays,_=n.getDay,v=[],C=l;C<h;)s.some(function(b){return _(C)===b})||v.push(S3(n,{date:C,weekendDays:o})),C=m(C,1);return v}function lie(n,e){var t=e.events,r=void 0===t?[]:t,i=e.excluded,s=void 0===i?[]:i,o=e.precision,a=void 0===o?"days":o,l=e.absolutePositionedEvents,c=void 0!==l&&l,h=e.viewStart,m=e.viewEnd;h=n.startOfDay(h),m=n.endOfDay(m);var _=n.differenceInSeconds,v=n.differenceInDays,C=function aie(n,e){for(var r=e.date2,i=e.excluded,s=e.date1,o=0;s<r;)-1===i.indexOf(n.getDay(s))&&o++,s=n.addDays(s,1);return o}(n,{date1:h,date2:m,excluded:s}),b=v(m,h)+1,T=r.filter(function($){return $.allDay}).map(function($){var ee=function sie(n,e){var t=e.event,r=e.startOfWeek,i=e.excluded,s=e.precision,o=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(t.start<r)return 0;var c=0;switch(s){case"days":c=o(a(t.start),r)*Gl;break;case"minutes":c=l(t.start,r)}return c-=I3(n,{startDate:r,seconds:c,excluded:i,precision:s}),Math.abs(c/Gl)}(n,{event:$,startOfWeek:h,excluded:s,precision:a}),_e=function iie(n,e){var t=e.event,r=e.offset,s=e.excluded,o=e.precision,a=e.totalDaysInView,c=n.differenceInSeconds,h=n.addDays,m=n.endOfDay,_=n.differenceInDays,v=Gl,C=(0,n.max)([t.start,e.startOfWeekDate]);t.end&&(v="minutes"===o?c(t.end,C):_(h(m(t.end),1),C)*Gl);var b=r*Gl,B=a*Gl;return b+v>B&&(v=B-b),(v-=I3(n,{startDate:C,seconds:v,excluded:s,precision:o}))/Gl}(n,{event:$,offset:ee,startOfWeekDate:h,excluded:s,precision:a,totalDaysInView:b});return{event:$,offset:ee,span:_e}}).filter(function($){return $.offset<C}).filter(function($){return $.span>0}).map(function($){return{event:$.event,offset:$.offset,span:$.span,startsBeforeWeek:$.event.start<h,endsAfterWeek:($.event.end||$.event.start)>m}}).sort(function($,ee){var _e=_($.event.start,ee.event.start);return 0===_e?_(ee.event.end||ee.event.start,$.event.end||$.event.start):_e}),B=[],P=[];return T.forEach(function($,ee){if(-1===P.indexOf($)){P.push($);var _e=$.span+$.offset,xe=T.slice(ee+1).filter(function(O){if(O.offset>=_e&&_e+O.span<=b&&-1===P.indexOf(O)){var H=O.offset-_e;return c||(O.offset=H),_e+=O.span+H,P.push(O),!0}}),j=uA([$],xe,!0),R=j.filter(function(O){return O.event.id}).map(function(O){return O.event.id}).join("-");B.push(wo({row:j},R?{id:R}:{}))}}),B}function cie(n,e){var t=e.events,r=e.viewDate,i=e.hourSegments,s=e.hourDuration,o=e.dayStart,a=e.dayEnd,l=e.weekStartsOn,c=e.excluded,h=e.weekendDays,m=e.segmentHeight,_=e.viewStart,v=e.viewEnd,C=e.minimumEventHeight,b=function fie(n,e){var t=e.viewDate,r=e.hourSegments,i=e.hourDuration,s=e.dayStart,o=e.dayEnd,a=n.setMinutes,l=n.setHours,c=n.startOfDay,h=n.startOfMinute,m=n.endOfDay,_=n.addMinutes,v=n.addDays,C=[],b=a(l(c(t),tC(s.hour)),nC(s.minute)),T=a(l(h(m(t)),tC(o.hour)),nC(o.minute)),B=(i||60)/r,P=c(t),$=m(t),ee=function(H){return H};n.getTimezoneOffset(P)!==n.getTimezoneOffset($)&&(P=v(P,1),b=v(b,1),T=v(T,1),ee=function(H){return v(H,-1)});for(var _e=i?1440/i:60,xe=0;xe<_e;xe++){for(var j=[],R=0;R<r;R++){var O=_(_(b,xe*(i||60)),R*B);O>=b&&O<T&&j.push({date:ee(O),displayDate:O,isStart:0===R})}j.length>0&&C.push({segments:j})}return C}(n,{viewDate:r,hourSegments:i,hourDuration:s,dayStart:o,dayEnd:a}),T=pA(n,{viewDate:r,weekStartsOn:l,excluded:c,weekendDays:h,viewStart:_,viewEnd:v}),B=n.setHours,P=n.setMinutes,$=n.getHours,ee=n.getMinutes;return T.map(function(_e){var xe=function hie(n,e){var t=e.events,r=e.viewDate,i=e.hourSegments,s=e.dayStart,o=e.dayEnd,a=e.eventWidth,l=e.segmentHeight,c=e.hourDuration,h=e.minimumEventHeight,m=n.setMinutes,_=n.setHours,v=n.startOfDay,C=n.startOfMinute,b=n.endOfDay,T=n.differenceInMinutes,B=m(_(v(r),tC(s.hour)),nC(s.minute)),P=m(_(C(b(r)),tC(o.hour)),nC(o.minute));P.setSeconds(59,999);var $=[],ee=Am(n,{events:t.filter(function(R){return!R.allDay}),periodStart:B,periodEnd:P}),_e=ee.sort(function(R,O){return R.start.valueOf()-O.start.valueOf()}).map(function(R){var O=R.start,H=R.end||O,N=O<B,U=H>P,F=i*l/(c||60),Ft=0;if(O>B){var Xs=n.getTimezoneOffset(O),Xe=n.getTimezoneOffset(B)-Xs;Ft+=T(O,B)+Xe}Ft*=F,Ft=Math.floor(Ft);var tt=N?B:O,st=U?P:H,bn=n.getTimezoneOffset(tt)-n.getTimezoneOffset(st),Xn=T(st,tt)+bn;R.end?Xn*=F:Xn=l,h&&Xn<h&&(Xn=h),Xn=Math.floor(Xn);for(var Sn=eC($,Ft,Ft+Xn),pn=0;Sn.some(function(k_){return k_.left===pn});)pn+=a;var Co={event:R,height:Xn,width:a,top:Ft,left:pn,startsBeforeDay:N,endsAfterDay:U};return $.push(Co),Co}),xe=Math.max.apply(Math,_e.map(function(R){return R.left+R.width})),j=Am(n,{events:t.filter(function(R){return R.allDay}),periodStart:v(B),periodEnd:b(P)});return{events:_e,width:xe,allDayEvents:j,period:{events:ee,start:B,end:P}}}(n,{events:t,viewDate:_e.date,hourSegments:i,dayStart:o,dayEnd:a,segmentHeight:m,eventWidth:1,hourDuration:s,minimumEventHeight:C}),j=b.map(function(H){var N=H.segments.map(function(U){var F=P(B(_e.date,$(U.date)),ee(U.date));return wo(wo({},U),{date:F})});return wo(wo({},H),{segments:N})});function R(H,N){var U=Math.max.apply(Math,N.map(function(Ft){return Ft.left+1})),F=H.filter(function(Ft){return Ft.left>=U}).filter(function(Ft){return eC(N,Ft.top,Ft.top+Ft.height).length>0});return F.length>0?R(H,F):U}var O=xe.events.map(function(H){var U=100/R(xe.events,eC(xe.events,H.top,H.top+H.height));return wo(wo({},H),{left:H.left*U,width:U})});return{hours:j,date:_e.date,events:O.map(function(H){var N=eC(O.filter(function(U){return U.left>H.left}),H.top,H.top+H.height);return N.length>0?wo(wo({},H),{width:Math.min.apply(Math,N.map(function(U){return U.left}))-H.left}):H})}})}function eC(n,e,t){return n.filter(function(r){var i=r.top,s=r.top+r.height;return e<s&&s<t||e<i&&i<t||i<=e&&t<=s})}function tC(n){return Math.max(Math.min(23,n),0)}function nC(n){return Math.max(Math.min(59,n),0)}var zh=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(zh||{});class A3 extends Y{constructor(e=1/0,t=1/0,r=OS){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function Wh(){return ce((n,e)=>{let t,r=!1;n.subscribe(ke(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function gA(n,e){return n=function _ie(n,e){return typeof n>"u"?typeof e>"u"?n:e:n}(n,e),"function"==typeof n?function(){for(var r=arguments,i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=r[o];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var mA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},M3=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":mA(n))&&1===n.nodeType&&"object"===mA(n.style)&&"object"===mA(n.ownerDocument)};function R3(n,e){if(e=yA(e,!0),!M3(e))return-1;for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1}function _A(n,e){return-1!==R3(n,e)}function vie(n){for(var e=arguments,t=[],r=arguments.length-1;r-- >0;)t[r]=e[r+1];return function yie(n,e){for(var t=0;t<e.length;t++)_A(n,e[t])||n.push(e[t]);return e}(n,t=t.map(yA))}function wie(n){for(var e=arguments,t=[],r=arguments.length-1;r-- >0;)t[r]=e[r+1];return t.map(yA).reduce(function(i,s){var o=R3(n,s);return-1!==o?i.concat(n.splice(o,1)):i},[])}function yA(n,e){if("string"==typeof n)try{return document.querySelector(n)}catch(t){throw t}if(!M3(n)&&!e)throw new TypeError(n+" is not a DOM element.");return n}function k3(n){if(n===window)return function Cie(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var e={};return Object.defineProperties(e,n),e}();try{var e=n.getBoundingClientRect();return void 0===e.x&&(e.x=e.left,e.y=e.top),e}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var e,vA=void 0;"function"!=typeof Object.create?(e=function(){},vA=function(t,r){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");e.prototype=t||{};var i=new e;return e.prototype=null,void 0!==r&&Object.defineProperties(i,r),null===t&&(i.__proto__=null),i}):vA=Object.create;var bie=vA,Du=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function wA(n,e){e=e||{};for(var t=bie(n),r=0;r<Du.length;r++)void 0!==e[Du[r]]&&(t[Du[r]]=e[Du[r]]);return t}function EA(n,e){console.log("data ",e),n.data=e||{},n.dispatched="mousemove"}var Mm=["webkit","moz","ms","o"],Rm=function(){if(typeof window>"u")return function(){};for(var n=0,e=Mm.length;n<e&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[Mm[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var t=0;window.requestAnimationFrame=function(r){var i=(new Date).getTime(),s=Math.max(0,16-i-t),o=window.setTimeout(function(){return r(i+s)},s);return t=i+s,o}}return window.requestAnimationFrame.bind(window)}(),qh=function(){if(typeof window>"u")return function(){};for(var n=0,e=Mm.length;n<e&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[Mm[n]+"CancelAnimationFrame"]||window[Mm[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){window.clearTimeout(t)}),window.cancelAnimationFrame.bind(window)}();function Iie(n,e){void 0===e&&(e={});var t=this,r=4,i=!1;if("object"!=typeof e.margin){var s=e.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=e.margin;this.scrollWhenOutside=e.scrollWhenOutside||!1;var o={},a=function Eie(n,e){var t=gA((e=e||{}).allowUpdate,!0);return function(i){if(i=i||window.event,n.target=i.target||i.srcElement||i.originalTarget,n.element=this,n.type=i.type,t(i)){if(i.targetTouches)n.x=i.targetTouches[0].clientX,n.y=i.targetTouches[0].clientY,n.pageX=i.targetTouches[0].pageX,n.pageY=i.targetTouches[0].pageY,n.screenX=i.targetTouches[0].screenX,n.screenY=i.targetTouches[0].screenY;else{if(null===i.pageX&&null!==i.clientX){var s=i.target&&i.target.ownerDocument||document,o=s.documentElement,a=s.body;n.pageX=i.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=i.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else n.pageX=i.pageX,n.pageY=i.pageY;n.x=i.clientX,n.y=i.clientY,n.screenX=i.screenX,n.screenY=i.screenY}n.clientX=n.x,n.clientY=n.y}}}(o),l=function Tie(n){var e={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function t(s){for(var o=0;o<Du.length;o++)e[Du[o]]=s[Du[o]]}return void 0!==n&&n.addEventListener("mousemove",t),{destroy:function i(){n&&n.removeEventListener("mousemove",t,!1),e=null},dispatch:MouseEvent?function(o,a,l){var c=new MouseEvent("mousemove",wA(e,a));return EA(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEvent?function(o,a,l){var c=wA(e,a),h=document.createEvent("MouseEvents");return h.initMouseEvent("mousemove",!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),EA(h,l),o.dispatchEvent(h)}:"function"==typeof document.createEventObject?function(o,a,l){var c=document.createEventObject(),h=wA(e,a);for(var m in h)c[m]=h[m];return EA(c,l),o.dispatchEvent(c)}:void 0}}(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(e.maxSpeed)||(r=e.maxSpeed),"object"!=typeof r&&(r={left:r,right:r,top:r,bottom:r}),this.autoScroll=gA(e.autoScroll),this.syncMove=gA(e.syncMove,!1),this.destroy=function(N){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",b,!1),window.removeEventListener("touchstart",b,!1),window.removeEventListener("mouseup",T,!1),window.removeEventListener("touchend",T,!1),window.removeEventListener("pointerup",T,!1),window.removeEventListener("mouseleave",P,!1),window.removeEventListener("mousemove",_e,!1),window.removeEventListener("touchmove",_e,!1),window.removeEventListener("scroll",C,!0),n=[],N&&B()},this.add=function(){for(var N=[],U=arguments.length;U--;)N[U]=arguments[U];return vie.apply(void 0,[n].concat(N)),this},this.remove=function(){for(var N=[],U=arguments.length;U--;)N[U]=arguments[U];return wie.apply(void 0,[n].concat(N))};var m,N,h=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),N=n,n=[],N.forEach(function(U){U===window?h=window:t.add(U)}),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return r}},point:{get:function(){return o}},scrolling:{get:function(){return i}}});var v,_=null;function C(N){for(var U=0;U<n.length;U++)if(n[U]===N.target){i=!0;break}i&&Rm(function(){return i=!1})}function b(){c=!0}function T(){c=!1,B()}function B(){qh(v),qh(m)}function P(){c=!1}function ee(){for(var N=null,U=0;U<n.length;U++)x3(o,n[U])&&(N=n[U]);return N}function _e(N){if(t.autoScroll()&&!N.dispatched){var U=N.target,F=document.body;_&&!x3(o,_)&&(t.scrollWhenOutside||(_=null)),U&&U.parentNode===F?U=ee():(U=function $(N){if(!N)return null;if(_===N||_A(n,N))return N;for(;N=N.parentNode;)if(_A(n,N))return N;return null}(U),U||(U=ee())),U&&U!==_&&(_=U),h&&(qh(m),m=Rm(xe)),_&&(qh(v),v=Rm(j))}}function xe(){R(h),qh(m),m=Rm(xe)}function j(){_&&(R(_),qh(v),v=Rm(j))}function R(N){var F,Ft,U=k3(N);F=o.x<U.left+t.margin.left?Math.floor(Math.max(-1,(o.x-U.left)/t.margin.left-1)*t.maxSpeed.left):o.x>U.right-t.margin.right?Math.ceil(Math.min(1,(o.x-U.right)/t.margin.right+1)*t.maxSpeed.right):0,Ft=o.y<U.top+t.margin.top?Math.floor(Math.max(-1,(o.y-U.top)/t.margin.top-1)*t.maxSpeed.top):o.y>U.bottom-t.margin.bottom?Math.ceil(Math.min(1,(o.y-U.bottom)/t.margin.bottom+1)*t.maxSpeed.bottom):0,t.syncMove()&&l.dispatch(N,{pageX:o.pageX+F,pageY:o.pageY+Ft,clientX:o.x+F,clientY:o.y+Ft}),setTimeout(function(){Ft&&function O(N,U){N===window?window.scrollTo(N.pageXOffset,N.pageYOffset+U):N.scrollTop+=U}(N,Ft),F&&function H(N,U){N===window?window.scrollTo(N.pageXOffset+U,N.pageYOffset):N.scrollLeft+=U}(N,F)})}window.addEventListener("mousedown",b,!1),window.addEventListener("touchstart",b,!1),window.addEventListener("mouseup",T,!1),window.addEventListener("touchend",T,!1),window.addEventListener("pointerup",T,!1),window.addEventListener("mousemove",_e,!1),window.addEventListener("touchmove",_e,!1),window.addEventListener("mouseleave",P,!1),window.addEventListener("scroll",C,!0)}function x3(n,e,t){return t?n.y>t.top&&n.y<t.bottom&&n.x>t.left&&n.x<t.right:function Die(n,e){var t=k3(e);return n.y>t.top&&n.y<t.bottom&&n.x>t.left&&n.x<t.right}(n,e)}function CA(n,e,t){t&&t.split(" ").forEach(r=>n.addClass(e.nativeElement,r))}function rC(n,e,t){t&&t.split(" ").forEach(r=>n.removeClass(e.nativeElement,r))}let P3=(()=>{class n{constructor(){this.currentDrag=new Y}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O3=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(z(nn))},n.\u0275dir=Qe({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),DA=(()=>{class n{constructor(t,r,i,s,o,a,l){this.element=t,this.renderer=r,this.draggableHelper=i,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new He,this.dragStart=new He,this.ghostElementCreated=new He,this.dragging=new He,this.dragEnd=new He,this.pointerDown$=new Y,this.pointerMove$=new Y,this.pointerUp$=new Y,this.eventListenerSubscriptions={},this.destroy$=new Y,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const t=this.pointerDown$.pipe(dn(()=>this.canDrag()),mn(r=>{r.event.stopPropagation&&!this.scrollContainer&&r.event.stopPropagation();const i=this.renderer.createElement("style");this.renderer.setAttribute(i,"type","text/css"),this.renderer.appendChild(i,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(i)});const s=this.getScrollPosition(),o=new dt(v=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",b=>v.next(b))).pipe(Zs(s),Oe(()=>this.getScrollPosition())),a=new Y,l=new A3;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const c=fe(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(Ke()),h=jg([this.pointerMove$,o]).pipe(Oe(([v,C])=>({currentDrag$:a,transformX:v.clientX-r.clientX,transformY:v.clientY-r.clientY,clientX:v.clientX,clientY:v.clientY,scrollLeft:C.left,scrollTop:C.top,target:v.event.target})),Oe(v=>(this.dragSnapGrid.x&&(v.transformX=Math.round(v.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(v.transformY=Math.round(v.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),v)),Oe(v=>(this.dragAxis.x||(v.transformX=0),this.dragAxis.y||(v.transformY=0),v)),Oe(v=>{const C=v.scrollLeft-s.left,b=v.scrollTop-s.top;return{...v,x:v.transformX+C,y:v.transformY+b}}),dn(({x:v,y:C,transformX:b,transformY:T})=>!this.validateDrag||this.validateDrag({x:v,y:C,transform:{x:b,y:T}})),Ii(c),Ke()),m=h.pipe($r(1),Ke()),_=h.pipe(zw(1),Ke());return m.subscribe(({clientX:v,clientY:C,x:b,y:T})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function Sie(n,e){return new Iie(n,e)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),CA(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const B=this.element.nativeElement.getBoundingClientRect(),P=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(P):this.element.nativeElement.parentNode.insertBefore(P,this.element.nativeElement.nextSibling),this.ghostElement=P,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(P,{position:"fixed",top:`${B.top}px`,left:`${B.left}px`,width:`${B.width}px`,height:`${B.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const $=this.vcr.createEmbeddedView(this.ghostElementTemplate);P.innerHTML="",$.rootNodes.filter(ee=>ee instanceof Node).forEach(ee=>{P.appendChild(ee)}),_.subscribe(()=>{this.vcr.remove(this.vcr.indexOf($))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:v-b,clientY:C-T,element:P})}),_.subscribe(()=>{P.parentElement.removeChild(P),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),_.pipe(mn(v=>{const C=l.pipe(function mie(n){return function gie(n,e){return ce(bL(n,e,arguments.length>=2,!1,!0))}((e,t,r)=>!n||n(t,r)?e+1:e,0)}(),$r(1),Oe(b=>({...v,dragCancelled:b>0})));return l.complete(),C})).subscribe(({x:v,y:C,dragCancelled:b})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:v,y:C,dragCancelled:b})}),rC(this.renderer,this.element,this.dragActiveClass),a.complete()}),fe(c,_).pipe($r(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(i)})}),h}),Ke());fe(t.pipe($r(1),Oe(r=>[,r])),t.pipe(Wh())).pipe(dn(([r,i])=>!r||r.x!==i.x||r.y!==i.y),Oe(([r,i])=>i)).subscribe(({x:r,y:i,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:c,target:h})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:r,y:i})}),requestAnimationFrame(()=>{if(this.ghostElement){const m=`translate3d(${l}px, ${c}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:m,"-webkit-transform":m,"-ms-transform":m,"-moz-transform":m,"-o-transform":m})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:h})})}ngOnChanges(t){t.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const t=this.canDrag(),r=Object.keys(this.eventListenerSubscriptions).length>0;t&&!r?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",i=>{this.onMouseDown(i)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",i=>{this.onMouseUp(i)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",i=>{this.onTouchStart(i)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",i=>{this.onTouchEnd(i)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",i=>{this.onTouchEnd(i)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!t&&r&&this.unsubscribeEventListeners()}onMouseDown(t){0===t.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",r=>{this.pointerMove$.next({event:r,clientX:r.clientX,clientY:r.clientY})})),this.pointerDown$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onMouseUp(t){0===t.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onTouchStart(t){let r,i,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),i=!1,s=this.hasScrollbar(),r=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=Lh(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Lh(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!i&&s&&(i=this.shouldBeginDrag(t,l,r)),(!this.touchStartLongPress||!s||i)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:t,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY})}onTouchEnd(t){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:t,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(t){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",t)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(t=>{this.eventListenerSubscriptions[t](),delete this.eventListenerSubscriptions[t]})}setElementStyles(t,r){Object.keys(r).forEach(i=>{this.renderer.setStyle(t,i,r[i])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(t,r,i){const s=this.getScrollPosition(),o_top=Math.abs(s.top-i.top),o_left=Math.abs(s.left-i.left),a=Math.abs(r.targetTouches[0].clientX-t.touches[0].clientX)-o_left,l=Math.abs(r.targetTouches[0].clientY-t.touches[0].clientY)-o_top,h=this.touchStartLongPress;return(a+l>h.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=h.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const t=this.getScrollElement();return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(z(nn),z(bi),z(P3),z(it),z(ji),z(O3,8),z(xt))},n.\u0275dir=Qe({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Tr]}),n})();function N3(n,e,t){return n>=t.left&&n<=t.right&&e>=t.top&&e<=t.bottom}let bA=(()=>{class n{constructor(t,r,i,s,o){this.element=t,this.draggableHelper=r,this.zone=i,this.renderer=s,this.scrollContainer=o,this.dragEnter=new He,this.dragLeave=new He,this.dragOver=new He,this.drop=new He}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(t=>{CA(this.renderer,this.element,this.dragActiveClass);const r={updateCache:!0},i=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{r.updateCache=!0});let s;const o=t.pipe(Oe(({clientX:c,clientY:h,dropData:m,target:_})=>{s={clientX:c,clientY:h,dropData:m,target:_},r.updateCache&&(r.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(r.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),r.updateCache=!1);const v=N3(c,h,r.rect),C=!this.validateDrop||this.validateDrop({clientX:c,clientY:h,target:_,dropData:m});return r.scrollContainerRect?v&&C&&N3(c,h,r.scrollContainerRect):v&&C})),a=o.pipe(pr());let l;a.pipe(dn(c=>c)).subscribe(()=>{l=!0,CA(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(dn(c=>c)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(Wh(),dn(([c,h])=>c&&!h)).subscribe(()=>{l=!1,rC(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),t.subscribe({complete:()=>{i(),rC(this.renderer,this.element,this.dragActiveClass),l&&(rC(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(z(nn),z(P3),z(it),z(bi),z(O3,8))},n.\u0275dir=Qe({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),iC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Wt({}),n})();const bu=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function F3(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let Rie=0;function L3(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${Rie++}`)}function V3(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function B3(n,e,t,r){const i={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return e.top&&(i.top+=r),e.bottom&&(i.bottom+=r),e.left&&(i.left+=t),e.right&&(i.right+=t),i.height=i.bottom-i.top,i.width=i.right-i.left,i}const U3=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function j3(n,e){return n.left&&n.top?e.topLeft:n.right&&n.top?e.topRight:n.left&&n.bottom?e.bottomLeft:n.right&&n.bottom?e.bottomRight:n.left||n.right?e.leftOrRight:n.top||n.bottom?e.topOrBottom:""}function sC({edges:n,initialRectangle:e,newRectangle:t}){const r={};return Object.keys(n).forEach(i=>{r[i]=(t[i]||0)-(e[i]||0)}),r}const H3="resize-active";let $3=(()=>{class n{constructor(t,r,i,s){this.platformId=t,this.renderer=r,this.elm=i,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=U3,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new He,this.resizing=new He,this.resizeEnd=new He,this.mouseup=new Y,this.mousedown=new Y,this.mousemove=new Y,this.destroy$=new Y,this.pointerEventListeners=Gh.getInstance(r,s)}ngOnInit(){const t=fe(this.pointerEventListeners.pointerDown,this.mousedown),r=fe(this.pointerEventListeners.pointerMove,this.mousemove).pipe(zr(({event:c})=>{s&&c.cancelable&&c.preventDefault()}),Ke()),i=fe(this.pointerEventListeners.pointerUp,this.mouseup);let s;const o=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>({...U3,...this.resizeCursors});t.pipe(mn(c=>{function h(v){return{clientX:v.clientX-c.clientX,clientY:v.clientY-c.clientY}}const m=()=>{const v={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?v.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(v.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?v.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(v.y=+this.resizeSnapGrid.bottom)),v};function _(v,C){return{x:Math.ceil(v.clientX/C.x),y:Math.ceil(v.clientY/C.y)}}return fe(r.pipe($r(1)).pipe(Oe(v=>[,v])),r.pipe(Wh())).pipe(Oe(([v,C])=>[v&&h(v),h(C)])).pipe(dn(([v,C])=>{if(!v)return!0;const b=m(),T=_(v,b),B=_(C,b);return T.x!==B.x||T.y!==B.y})).pipe(Oe(([,v])=>{const C=m();return{clientX:Math.round(v.clientX/C.x)*C.x,clientY:Math.round(v.clientY/C.y)*C.y}})).pipe(Ii(fe(i,t)))})).pipe(dn(()=>!!s)).pipe(Oe(({clientX:c,clientY:h})=>B3(s.startingRect,s.edges,c,h))).pipe(dn(c=>this.allowNegativeResizes||!!(c.height&&c.width&&c.height>0&&c.width>0))).pipe(dn(c=>!this.validateResize||this.validateResize({rectangle:c,edges:sC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c})})),Ii(this.destroy$)).subscribe(c=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${c.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${c.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${c.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${c.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:sC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c}),rectangle:c})}),s.currentRect=c}),t.pipe(Oe(({edges:c})=>c||{}),dn(c=>Object.keys(c).length>0),Ii(this.destroy$)).subscribe(c=>{s&&o();const h=function kie(n,e){let t=0,r=0;const i=n.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>i[a]).find(a=>!!a);if(o&&o.includes("translate")&&(t=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),r=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===e)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-r,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-r,left:n.nativeElement.offsetLeft-t,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-t};{const a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-r,bottom:a.bottom-r,left:a.left-t,right:a.right-t,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:c,startingRect:h,currentRect:h};const m=a(),_=j3(s.edges,m);this.renderer.setStyle(document.body,"cursor",_),this.setElementClass(this.elm,H3,!0),this.enableGhostResize&&(s.clonedNode=function Mie(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();return e.removeAttribute("id"),t.forEach(i=>{i.removeAttribute("id")}),"canvas"===r?V3(n,e):("input"===r||"select"===r||"textarea"===r)&&L3(n,e),F3("canvas",n,e,V3),F3("input, textarea, select",n,e,L3),e}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",j3(s.edges,m)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:sC({edges:c,initialRectangle:h,newRectangle:h}),rectangle:B3(h,{},0,0)})})}),i.pipe(Ii(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,H3),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:sC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),o(),s=null)})}ngOnDestroy(){XF(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(t,r,i){i?this.renderer.addClass(t.nativeElement,r):this.renderer.removeClass(t.nativeElement,r)}}return n.\u0275fac=function(t){return new(t||n)(z(Us),z(bi),z(nn),z(it))},n.\u0275dir=Qe({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class Gh{constructor(e,t){this.pointerDown=new dt(r=>{let i,s;return t.runOutsideAngular(()=>{i=e.listen("document","mousedown",o=>{r.next({clientX:o.clientX,clientY:o.clientY,event:o})}),bu&&(s=e.listen("document","touchstart",o=>{r.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{i(),bu&&s()}}).pipe(Ke()),this.pointerMove=new dt(r=>{let i,s;return t.runOutsideAngular(()=>{i=e.listen("document","mousemove",o=>{r.next({clientX:o.clientX,clientY:o.clientY,event:o})}),bu&&(s=e.listen("document","touchmove",o=>{r.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{i(),bu&&s()}}).pipe(Ke()),this.pointerUp=new dt(r=>{let i,s,o;return t.runOutsideAngular(()=>{i=e.listen("document","mouseup",a=>{r.next({clientX:a.clientX,clientY:a.clientY,event:a})}),bu&&(s=e.listen("document","touchend",a=>{r.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),o=e.listen("document","touchcancel",a=>{r.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{i(),bu&&(s(),o())}}).pipe(Ke())}static getInstance(e,t){return Gh.instance||(Gh.instance=new Gh(e,t)),Gh.instance}}let Oie=(()=>{class n{constructor(t,r,i,s){this.renderer=t,this.element=r,this.zone=i,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new Y}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(t=>{this.onMousedown(t,t.clientX,t.clientY)}),this.listenOnTheHost("mouseup").subscribe(t=>{this.onMouseup(t.clientX,t.clientY)}),bu&&(this.listenOnTheHost("touchstart").subscribe(t=>{this.onMousedown(t,t.touches[0].clientX,t.touches[0].clientY)}),fe(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(t=>{this.onMouseup(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(t,r,i){t.cancelable&&t.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:r,clientY:i,edges:this.resizeEdges})}onMouseup(t,r){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:t,clientY:r,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(t,r,i){this.resizable.mousemove.next({clientX:r,clientY:i,edges:this.resizeEdges,event:t})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(t=>{this.eventListeners[t](),delete this.eventListeners[t]})}listenOnTheHost(t){return Lh(this.element.nativeElement,t).pipe(Ii(this.destroy$))}}return n.\u0275fac=function(t){return new(t||n)(z(bi),z(nn),z(it),z($3,8))},n.\u0275dir=Qe({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),z3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Wt({}),n})();const Nie=function(n){return{action:n}};function Fie(n,e){if(1&n){const t=Lt();S(0,"a",5),ye("mwlClick",function(i){const o=De(t).$implicit,a=oe(2).event;return be(o.onClick({event:a,sourceEvent:i}))})("mwlKeydownEnter",function(i){const o=De(t).$implicit,a=oe(2).event;return be(o.onClick({event:a,sourceEvent:i}))}),Qt(1,"calendarA11y"),M()}if(2&n){const t=e.$implicit;te("ngClass",t.cssClass)("innerHtml",t.label,Vv),rr("aria-label",sr(1,3,po(6,Nie,t),"actionButtonLabel"))}}function Lie(n,e){if(1&n&&(S(0,"span",3),Ne(1,Fie,2,8,"a",4),M()),2&n){const t=oe(),r=t.event,i=t.trackByActionId;K(1),te("ngForOf",r.actions)("ngForTrackBy",i)}}function Vie(n,e){1&n&&Ne(0,Lie,2,2,"span",2),2&n&&te("ngIf",e.event.actions)}function Bie(n,e){}const Uie=function(n,e){return{event:n,trackByActionId:e}},Zh=function(){return{}};function jie(n,e){if(1&n&&(Zn(0,"span",2),Qt(1,"calendarEventTitle"),Qt(2,"calendarA11y")),2&n){const t=e.event;te("innerHTML",$o(1,2,t.title,e.view,t),Vv),rr("aria-hidden",sr(2,6,Ui(9,Zh),"hideEventTitle"))}}function Hie(n,e){}const $ie=function(n,e){return{event:n,view:e}};function zie(n,e){if(1&n&&(S(0,"div",2),Zn(1,"div",3)(2,"div",4),M()),2&n){const t=e.contents;te("ngClass","cal-tooltip-"+e.placement),K(2),te("innerHtml",t,Vv)}}function Wie(n,e){}const qie=function(n,e,t){return{contents:n,placement:e,event:t}};function Gie(n,e){if(1&n&&(S(0,"span",7),G(1),M()),2&n){const t=oe().day;K(1),St(t.badgeTotal)}}const TA=function(n){return{backgroundColor:n}},Zie=function(n,e){return{event:n,draggedFrom:e}},km=function(n,e){return{x:n,y:e}},oC=function(){return{delay:300,delta:30}};function Kie(n,e){if(1&n){const t=Lt();S(0,"div",10),ye("mouseenter",function(){const s=De(t).$implicit;return be(oe(2).highlightDay.emit({event:s}))})("mouseleave",function(){const s=De(t).$implicit;return be(oe(2).unhighlightDay.emit({event:s}))})("mwlClick",function(i){const o=De(t).$implicit;return be(oe(2).eventClicked.emit({event:o,sourceEvent:i}))}),Qt(1,"calendarEventTitle"),Qt(2,"calendarA11y"),M()}if(2&n){const t=e.$implicit,r=oe(2),i=r.tooltipPlacement,s=r.tooltipTemplate,o=r.tooltipAppendToBody,a=r.tooltipDelay,l=r.day,c=r.validateDrag;ei("cal-draggable",t.draggable),te("ngStyle",po(22,TA,null==t.color?null:t.color.primary))("ngClass",null==t?null:t.cssClass)("mwlCalendarTooltip",$o(1,15,t.title,"monthTooltip",t))("tooltipPlacement",i)("tooltipEvent",t)("tooltipTemplate",s)("tooltipAppendToBody",o)("tooltipDelay",a)("dropData",jr(24,Zie,t,l))("dragAxis",jr(27,km,t.draggable,t.draggable))("validateDrag",c)("touchStartLongPress",Ui(30,oC)),rr("aria-hidden",sr(2,19,Ui(31,Zh),"hideMonthCellEvents"))}}function Yie(n,e){if(1&n&&(S(0,"div",8),Ne(1,Kie,3,32,"div",9),M()),2&n){const t=oe(),r=t.day,i=t.trackByEventId;K(1),te("ngForOf",r.events)("ngForTrackBy",i)}}const Qie=function(n,e){return{day:n,locale:e}};function Xie(n,e){if(1&n&&(S(0,"div",2),Qt(1,"calendarA11y"),S(2,"span",3),Ne(3,Gie,2,1,"span",4),S(4,"span",5),G(5),Qt(6,"calendarDate"),M()()(),Ne(7,Yie,2,2,"div",6)),2&n){const t=e.day,r=e.locale;rr("aria-label",sr(1,4,jr(11,Qie,t,r),"monthCell")),K(3),te("ngIf",t.badgeTotal>0),K(2),St($o(6,7,t.date,"monthViewDayNumber",r)),K(2),te("ngIf",t.events.length>0)}}function Jie(n,e){}const ese=function(n,e,t,r,i,s,o,a,l,c,h,m){return{day:n,openDay:e,locale:t,tooltipPlacement:r,highlightDay:i,unhighlightDay:s,eventClicked:o,tooltipTemplate:a,tooltipAppendToBody:l,tooltipDelay:c,trackByEventId:h,validateDrag:m}},tse=function(n){return{event:n}},W3=function(n,e){return{event:n,locale:e}};function nse(n,e){if(1&n){const t=Lt();S(0,"div",7),Zn(1,"span",8),G(2," "),S(3,"mwl-calendar-event-title",9),ye("mwlClick",function(i){const o=De(t).$implicit;return be(oe(2).eventClicked.emit({event:o,sourceEvent:i}))})("mwlKeydownEnter",function(i){const o=De(t).$implicit;return be(oe(2).eventClicked.emit({event:o,sourceEvent:i}))}),Qt(4,"calendarA11y"),M(),G(5," "),Zn(6,"mwl-calendar-event-actions",10),M()}if(2&n){const t=e.$implicit,r=oe(2).validateDrag,i=oe();ei("cal-draggable",t.draggable),te("ngClass",null==t?null:t.cssClass)("dropData",po(16,tse,t))("dragAxis",jr(18,km,t.draggable,t.draggable))("validateDrag",r)("touchStartLongPress",Ui(21,oC)),K(1),te("ngStyle",po(22,TA,null==t.color?null:t.color.primary)),K(2),te("event",t)("customTemplate",i.eventTitleTemplate),rr("aria-label",sr(4,13,jr(24,W3,t,i.locale),"eventDescription")),K(3),te("event",t)("customTemplate",i.eventActionsTemplate)}}const q3=function(n,e){return{date:n,locale:e}};function rse(n,e){if(1&n&&(S(0,"div",3),Zn(1,"span",4),Qt(2,"calendarA11y"),Zn(3,"span",5),Qt(4,"calendarA11y"),Ne(5,nse,7,27,"div",6),M()),2&n){const t=oe(),r=t.events,i=t.trackByEventId,s=oe();te("@collapse",void 0),K(1),rr("aria-label",sr(2,5,jr(11,q3,s.date,s.locale),"openDayEventsAlert")),K(2),rr("aria-label",sr(4,8,jr(14,q3,s.date,s.locale),"openDayEventsLandmark")),K(2),te("ngForOf",r)("ngForTrackBy",i)}}function ise(n,e){1&n&&Ne(0,rse,6,17,"div",2),2&n&&te("ngIf",e.isOpen)}function sse(n,e){}const ose=function(n,e,t,r,i){return{events:n,eventClicked:e,isOpen:t,trackByEventId:r,validateDrag:i}};function ase(n,e){if(1&n){const t=Lt();S(0,"div",4),ye("click",function(i){const o=De(t).$implicit;return be(oe(2).columnHeaderClicked.emit({isoDayNumber:o.day,sourceEvent:i}))}),G(1),Qt(2,"calendarDate"),M()}if(2&n){const t=e.$implicit,r=oe().locale;ei("cal-past",t.isPast)("cal-today",t.isToday)("cal-future",t.isFuture)("cal-weekend",t.isWeekend),te("ngClass",t.cssClass),K(1),jo(" ",$o(2,10,t.date,"monthViewColumnHeader",r)," ")}}function lse(n,e){if(1&n&&(S(0,"div",2),Ne(1,ase,3,14,"div",3),M()),2&n){const t=e.days,r=e.trackByWeekDayHeaderDate;K(1),te("ngForOf",t)("ngForTrackBy",r)}}function cse(n,e){}const use=function(n,e,t){return{days:n,locale:e,trackByWeekDayHeaderDate:t}};function dse(n,e){if(1&n){const t=Lt();S(0,"mwl-calendar-month-cell",7),ye("mwlClick",function(i){const o=De(t).$implicit;return be(oe(2).dayClicked.emit({day:o,sourceEvent:i}))})("mwlKeydownEnter",function(i){const o=De(t).$implicit;return be(oe(2).dayClicked.emit({day:o,sourceEvent:i}))})("highlightDay",function(i){return De(t),be(oe(2).toggleDayHighlight(i.event,!0))})("unhighlightDay",function(i){return De(t),be(oe(2).toggleDayHighlight(i.event,!1))})("drop",function(i){const o=De(t).$implicit;return be(oe(2).eventDropped(o,i.dropData.event,i.dropData.draggedFrom))})("eventClicked",function(i){return De(t),be(oe(2).eventClicked.emit({event:i.event,sourceEvent:i.sourceEvent}))}),Qt(1,"calendarA11y"),M()}if(2&n){const t=e.$implicit,r=oe(2);te("ngClass",null==t?null:t.cssClass)("day",t)("openDay",r.openDay)("locale",r.locale)("tooltipPlacement",r.tooltipPlacement)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipTemplate",r.tooltipTemplate)("tooltipDelay",r.tooltipDelay)("customTemplate",r.cellTemplate)("ngStyle",po(15,TA,t.backgroundColor))("clickListenerDisabled",0===r.dayClicked.observers.length),rr("tabindex",sr(1,12,Ui(17,Zh),"monthCellTabIndex"))}}function hse(n,e){if(1&n){const t=Lt();S(0,"div")(1,"div",4),Ne(2,dse,2,18,"mwl-calendar-month-cell",5),Qt(3,"slice"),M(),S(4,"mwl-calendar-open-day-events",6),ye("eventClicked",function(i){return De(t),be(oe().eventClicked.emit({event:i.event,sourceEvent:i.sourceEvent}))})("drop",function(i){De(t);const s=oe();return be(s.eventDropped(s.openDay,i.dropData.event,i.dropData.draggedFrom))}),M()()}if(2&n){const t=e.$implicit,r=oe();K(2),te("ngForOf",$o(3,9,r.view.days,t,t+r.view.totalDaysVisibleInWeek))("ngForTrackBy",r.trackByDate),K(2),te("locale",r.locale)("isOpen",r.openRowIndex===t)("events",null==r.openDay?null:r.openDay.events)("date",null==r.openDay?null:r.openDay.date)("customTemplate",r.openDayEventsTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)}}function fse(n,e){if(1&n){const t=Lt();S(0,"div",4),ye("mwlClick",function(i){const o=De(t).$implicit;return be(oe().dayHeaderClicked.emit({day:o,sourceEvent:i}))})("drop",function(i){const o=De(t).$implicit;return be(oe().eventDropped.emit({event:i.dropData.event,newStart:o.date}))})("dragEnter",function(){const s=De(t).$implicit;return be(oe().dragEnter.emit({date:s.date}))}),S(1,"b"),G(2),Qt(3,"calendarDate"),M(),Zn(4,"br"),S(5,"span"),G(6),Qt(7,"calendarDate"),M()()}if(2&n){const t=e.$implicit,r=oe().locale;ei("cal-past",t.isPast)("cal-today",t.isToday)("cal-future",t.isFuture)("cal-weekend",t.isWeekend),te("ngClass",t.cssClass),K(2),St($o(3,11,t.date,"weekViewColumnHeader",r)),K(4),St($o(7,15,t.date,"weekViewColumnSubHeader",r))}}function pse(n,e){if(1&n&&(S(0,"div",2),Ne(1,fse,8,19,"div",3),M()),2&n){const t=e.days,r=e.trackByWeekDayHeaderDate;K(1),te("ngForOf",t)("ngForTrackBy",r)}}function gse(n,e){}const mse=function(n,e,t,r,i,s){return{days:n,locale:e,dayHeaderClicked:t,eventDropped:r,dragEnter:i,trackByWeekDayHeaderDate:s}},_se=function(n,e,t){return{color:n,backgroundColor:e,borderColor:t}};function yse(n,e){if(1&n){const t=Lt();S(0,"div",2),ye("mwlClick",function(i){return be(De(t).eventClicked.emit({sourceEvent:i}))})("mwlKeydownEnter",function(i){return be(De(t).eventClicked.emit({sourceEvent:i}))}),Qt(1,"calendarEventTitle"),Qt(2,"calendarA11y"),Zn(3,"mwl-calendar-event-actions",3),G(4," "),Zn(5,"mwl-calendar-event-title",4),M()}if(2&n){const t=e.weekEvent,r=e.tooltipPlacement,i=e.tooltipTemplate,s=e.tooltipAppendToBody,o=e.tooltipDisabled,a=e.tooltipDelay,l=e.daysInWeek,c=oe();te("ngStyle",hw(20,_se,null==t.event.color?null:t.event.color.secondaryText,null==t.event.color?null:t.event.color.secondary,null==t.event.color?null:t.event.color.primary))("mwlCalendarTooltip",o?"":$o(1,13,t.event.title,1===l?"dayTooltip":"weekTooltip",t.tempEvent||t.event))("tooltipPlacement",r)("tooltipEvent",t.tempEvent||t.event)("tooltipTemplate",i)("tooltipAppendToBody",s)("tooltipDelay",a),rr("aria-label",sr(2,17,jr(24,W3,t.tempEvent||t.event,c.locale),"eventDescription")),K(3),te("event",t.tempEvent||t.event)("customTemplate",c.eventActionsTemplate),K(2),te("event",t.tempEvent||t.event)("customTemplate",c.eventTitleTemplate)("view",1===l?"day":"week")}}function vse(n,e){}const wse=function(n,e,t,r,i,s,o,a,l){return{weekEvent:n,tooltipPlacement:e,eventClicked:t,tooltipTemplate:r,tooltipAppendToBody:i,tooltipDisabled:s,tooltipDelay:o,column:a,daysInWeek:l}};function Ese(n,e){if(1&n&&(S(0,"div",4),G(1),Qt(2,"calendarDate"),M()),2&n){const t=oe(),r=t.segment,i=t.daysInWeek,s=t.locale;K(1),jo(" ",$o(2,1,r.displayDate,1===i?"dayViewHour":"weekViewHour",s)," ")}}function Cse(n,e){if(1&n&&(S(0,"div",2),Qt(1,"calendarA11y"),Ne(2,Ese,3,5,"div",3),M()),2&n){const t=e.segment,i=e.isTimeLabel,s=e.daysInWeek;Hs("height",e.segmentHeight,"px"),ei("cal-hour-start",t.isStart)("cal-after-hour-start",!t.isStart),te("ngClass",t.cssClass),rr("aria-hidden",sr(1,9,Ui(12,Zh),1===s?"hideDayHourSegment":"hideWeekHourSegment")),K(2),te("ngIf",i)}}function Dse(n,e){}const bse=function(n,e,t,r,i){return{segment:n,locale:e,segmentHeight:t,isTimeLabel:r,daysInWeek:i}};function Tse(n,e){1&n&&Zn(0,"div",3),2&n&&Hs("top",oe().topPx,"px")}function Ise(n,e){1&n&&Ne(0,Tse,1,2,"div",2),2&n&&te("ngIf",e.isVisible)}function Sse(n,e){}const Ase=function(n,e,t,r,i,s,o){return{columnDate:n,dayStartHour:e,dayStartMinute:t,dayEndHour:r,dayEndMinute:i,isVisible:s,topPx:o}};function Mse(n,e){1&n&&X0(0)}function Rse(n,e){if(1&n){const t=Lt();S(0,"div",14),ye("drop",function(i){const o=De(t).$implicit;return be(oe(2).eventDropped(i,o.date,!0))})("dragEnter",function(){const s=De(t).$implicit;return be(oe(2).dateDragEnter(s.date))}),M()}}const kse=function(){return{left:!0}};function xse(n,e){1&n&&Zn(0,"div",23),2&n&&te("resizeEdges",Ui(1,kse))}const Pse=function(){return{right:!0}};function Ose(n,e){1&n&&Zn(0,"div",24),2&n&&te("resizeEdges",Ui(1,Pse))}const Nse=function(n,e){return{left:n,right:e}},G3=function(n,e){return{event:n,calendarId:e}},Fse=function(n){return{x:n}};function Lse(n,e){if(1&n){const t=Lt();S(0,"div",18,19),ye("resizeStart",function(i){const o=De(t).$implicit;oe();const a=Jr(1);return be(oe(2).allDayEventResizeStarted(a,o,i))})("resizing",function(i){const o=De(t).$implicit,a=oe(3);return be(a.allDayEventResizing(o,i,a.dayColumnWidth))})("resizeEnd",function(){const s=De(t).$implicit;return be(oe(3).allDayEventResizeEnded(s))})("dragStart",function(){const s=De(t).$implicit,o=Jr(1);oe();const a=Jr(1);return be(oe(2).dragStarted(a,o,s,!1))})("dragging",function(){return De(t),be(oe(3).allDayEventDragMove())})("dragEnd",function(i){const o=De(t).$implicit,a=oe(3);return be(a.dragEnded(o,i,a.dayColumnWidth))}),Ne(2,xse,1,2,"div",20),S(3,"mwl-calendar-week-view-event",21),ye("eventClicked",function(i){const o=De(t).$implicit;return be(oe(3).eventClicked.emit({event:o.event,sourceEvent:i.sourceEvent}))}),M(),Ne(4,Ose,1,2,"div",22),M()}if(2&n){const t=e.$implicit,r=oe(3);Hs("width",100/r.days.length*t.span,"%")("margin-left",r.rtl?null:100/r.days.length*t.offset,"%")("margin-right",r.rtl?100/r.days.length*t.offset:null,"%"),ei("cal-draggable",t.event.draggable&&0===r.allDayEventResizes.size)("cal-starts-within-week",!t.startsBeforeWeek)("cal-ends-within-week",!t.endsAfterWeek),te("ngClass",null==t.event?null:t.event.cssClass)("resizeCursors",r.resizeCursors)("resizeSnapGrid",jr(33,Nse,r.dayColumnWidth,r.dayColumnWidth))("validateResize",r.validateResize)("dropData",jr(36,G3,t.event,r.calendarId))("dragAxis",jr(39,km,t.event.draggable&&0===r.allDayEventResizes.size,!r.snapDraggedEvents&&t.event.draggable&&0===r.allDayEventResizes.size))("dragSnapGrid",r.snapDraggedEvents?po(42,Fse,r.dayColumnWidth):Ui(44,Zh))("validateDrag",r.validateDrag)("touchStartLongPress",Ui(45,oC)),K(2),te("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.beforeStart)&&!t.startsBeforeWeek),K(1),te("locale",r.locale)("weekEvent",t)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("daysInWeek",r.daysInWeek),K(1),te("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.afterEnd)&&!t.endsAfterWeek)}}function Vse(n,e){if(1&n&&(S(0,"div",15,16),Ne(2,Lse,5,46,"div",17),M()),2&n){const t=e.$implicit,r=oe(2);K(2),te("ngForOf",t.row)("ngForTrackBy",r.trackByWeekAllDayEvent)}}function Bse(n,e){if(1&n){const t=Lt();S(0,"div",8,9),ye("dragEnter",function(){return De(t),be(oe().dragEnter("allDay"))})("dragLeave",function(){return De(t),be(oe().dragLeave("allDay"))}),S(2,"div",5)(3,"div",10),Ne(4,Mse,1,0,"ng-container",11),M(),Ne(5,Rse,1,0,"div",12),M(),Ne(6,Vse,3,2,"div",13),M()}if(2&n){const t=oe();K(4),te("ngTemplateOutlet",t.allDayEventsLabelTemplate),K(1),te("ngForOf",t.days)("ngForTrackBy",t.trackByWeekDayHeaderDate),K(1),te("ngForOf",t.view.allDayEventRows)("ngForTrackBy",t.trackById)}}function Use(n,e){if(1&n&&Zn(0,"mwl-calendar-week-view-hour-segment",28),2&n){const t=e.$implicit,r=oe(3);Hs("height",r.hourSegmentHeight,"px"),te("segment",t)("segmentHeight",r.hourSegmentHeight)("locale",r.locale)("customTemplate",r.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",r.daysInWeek)}}function jse(n,e){if(1&n&&(S(0,"div",26),Ne(1,Use,1,8,"mwl-calendar-week-view-hour-segment",27),M()),2&n){const t=e.$implicit,r=e.odd,i=oe(2);ei("cal-hour-odd",r),K(1),te("ngForOf",t.segments)("ngForTrackBy",i.trackByHourSegment)}}function Hse(n,e){if(1&n&&(S(0,"div",10),Ne(1,jse,2,4,"div",25),M()),2&n){const t=oe();K(1),te("ngForOf",t.view.hourColumns[0].hours)("ngForTrackBy",t.trackByHour)}}const $se=function(){return{left:!0,top:!0}};function zse(n,e){1&n&&Zn(0,"div",23),2&n&&te("resizeEdges",Ui(1,$se))}function Wse(n,e){}function qse(n,e){if(1&n){const t=Lt();S(0,"mwl-calendar-week-view-event",36),ye("eventClicked",function(i){De(t);const s=oe().$implicit;return be(oe(2).eventClicked.emit({event:s.event,sourceEvent:i.sourceEvent}))}),M()}if(2&n){const t=oe().$implicit,r=oe().$implicit,i=oe();te("locale",i.locale)("weekEvent",t)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDisabled",i.dragActive||i.timeEventResizes.size>0)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("column",r)("daysInWeek",i.daysInWeek)}}const Gse=function(){return{right:!0,bottom:!0}};function Zse(n,e){1&n&&Zn(0,"div",24),2&n&&te("resizeEdges",Ui(1,Gse))}const Kse=function(n,e,t,r){return{left:n,right:e,top:t,bottom:r}};function Yse(n,e){if(1&n){const t=Lt();S(0,"div",33,19),ye("resizeStart",function(i){const o=De(t).$implicit,a=oe(2),l=Jr(6);return be(a.timeEventResizeStarted(l,o,i))})("resizing",function(i){const o=De(t).$implicit;return be(oe(2).timeEventResizing(o,i))})("resizeEnd",function(){const s=De(t).$implicit;return be(oe(2).timeEventResizeEnded(s))})("dragStart",function(){const s=De(t).$implicit,o=Jr(1),a=oe(2),l=Jr(6);return be(a.dragStarted(l,o,s,!0))})("dragging",function(i){const o=De(t).$implicit;return be(oe(2).dragMove(o,i))})("dragEnd",function(i){const o=De(t).$implicit,a=oe(2);return be(a.dragEnded(o,i,a.dayColumnWidth,!0))}),Ne(2,zse,1,2,"div",20),Ne(3,Wse,0,0,"ng-template",34),Ne(4,qse,1,12,"ng-template",null,35,zs),Ne(6,Zse,1,2,"div",22),M()}if(2&n){const t=e.$implicit,r=Jr(5),i=oe(2);Hs("top",t.top,"px")("height",t.height,"px")("left",t.left,"%")("width",t.width,"%"),ei("cal-draggable",t.event.draggable&&0===i.timeEventResizes.size)("cal-starts-within-day",!t.startsBeforeDay)("cal-ends-within-day",!t.endsAfterDay),te("ngClass",t.event.cssClass)("hidden",0===t.height&&0===t.width)("resizeCursors",i.resizeCursors)("resizeSnapGrid",lN(30,Kse,i.dayColumnWidth,i.dayColumnWidth,i.eventSnapSize||i.hourSegmentHeight,i.eventSnapSize||i.hourSegmentHeight))("validateResize",i.validateResize)("allowNegativeResizes",!0)("dropData",jr(35,G3,t.event,i.calendarId))("dragAxis",jr(38,km,t.event.draggable&&0===i.timeEventResizes.size,t.event.draggable&&0===i.timeEventResizes.size))("dragSnapGrid",i.snapDraggedEvents?jr(41,km,i.dayColumnWidth,i.eventSnapSize||i.hourSegmentHeight):Ui(44,Zh))("touchStartLongPress",Ui(45,oC))("ghostDragEnabled",!i.snapDraggedEvents)("ghostElementTemplate",r)("validateDrag",i.validateDrag),K(2),te("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.beforeStart)&&!t.startsBeforeDay),K(1),te("ngTemplateOutlet",r),K(3),te("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.afterEnd)&&!t.endsAfterDay)}}function Qse(n,e){if(1&n){const t=Lt();S(0,"mwl-calendar-week-view-hour-segment",38),ye("mwlClick",function(i){const o=De(t).$implicit;return be(oe(3).hourSegmentClicked.emit({date:o.date,sourceEvent:i}))})("drop",function(i){const o=De(t).$implicit;return be(oe(3).eventDropped(i,o.date,!1))})("dragEnter",function(){const s=De(t).$implicit;return be(oe(3).dateDragEnter(s.date))}),M()}if(2&n){const t=e.$implicit,r=oe(3);Hs("height",r.hourSegmentHeight,"px"),te("segment",t)("segmentHeight",r.hourSegmentHeight)("locale",r.locale)("customTemplate",r.hourSegmentTemplate)("daysInWeek",r.daysInWeek)("clickListenerDisabled",0===r.hourSegmentClicked.observers.length)("dragOverClass",r.dragActive&&r.snapDraggedEvents?null:"cal-drag-over")("isTimeLabel",1===r.daysInWeek)}}function Xse(n,e){if(1&n&&(S(0,"div",26),Ne(1,Qse,1,10,"mwl-calendar-week-view-hour-segment",37),M()),2&n){const t=e.$implicit,r=e.odd,i=oe(2);ei("cal-hour-odd",r),K(1),te("ngForOf",t.segments)("ngForTrackBy",i.trackByHourSegment)}}function Jse(n,e){if(1&n&&(S(0,"div",29),Zn(1,"mwl-calendar-week-view-current-time-marker",30),S(2,"div",31),Ne(3,Yse,7,46,"div",32),M(),Ne(4,Xse,2,4,"div",25),M()),2&n){const t=e.$implicit,r=oe();K(1),te("columnDate",t.date)("dayStartHour",r.dayStartHour)("dayStartMinute",r.dayStartMinute)("dayEndHour",r.dayEndHour)("dayEndMinute",r.dayEndMinute)("hourSegments",r.hourSegments)("hourDuration",r.hourDuration)("hourSegmentHeight",r.hourSegmentHeight)("customTemplate",r.currentTimeMarkerTemplate),K(2),te("ngForOf",t.events)("ngForTrackBy",r.trackByWeekTimeEvent),K(1),te("ngForOf",t.hours)("ngForTrackBy",r.trackByHour)}}let Tu=(()=>{class n{constructor(t,r,i){this.renderer=t,this.elm=r,this.document=i,this.clickListenerDisabled=!1,this.click=new He,this.destroy$=new Y}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(Ii(this.destroy$)).subscribe(t=>{t.stopPropagation(),this.click.emit(t)})}ngOnDestroy(){this.destroy$.next()}listen(){return new dt(t=>this.renderer.listen(this.elm.nativeElement,"click",r=>{t.next(r)}))}}return n.\u0275fac=function(t){return new(t||n)(z(bi),z(nn),z(xt))},n.\u0275dir=Qe({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),aC=(()=>{class n{constructor(t,r,i){this.host=t,this.ngZone=r,this.renderer=i,this.keydown=new He,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",t=>{(13===t.keyCode||13===t.which||"Enter"===t.key)&&(t.preventDefault(),t.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(t)}))})})}ngOnDestroy(){null!==this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(t){return new(t||n)(z(nn),z(it),z(bi))},n.\u0275dir=Qe({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),xm=(()=>{class n{constructor(t){this.i18nPlural=t}monthCell({day:t,locale:r}){return t.badgeTotal>0?`\n        ${Hr(t.date,"EEEE MMMM d",r)},\n        ${this.i18nPlural.transform(t.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${Hr(t.date,"EEEE MMMM d",r)}`}openDayEventsLandmark({date:t,locale:r}){return`\n      Beginning of expanded view for ${Hr(t,"EEEE MMMM dd",r)}\n    `}openDayEventsAlert({date:t,locale:r}){return`${Hr(t,"EEEE MMMM dd",r)} expanded`}eventDescription({event:t,locale:r}){if(!0===t.allDay)return this.allDayEventDescription({event:t,locale:r});const i=`\n      ${Hr(t.start,"EEEE MMMM dd",r)},\n      ${t.title}, from ${Hr(t.start,"hh:mm a",r)}\n    `;return t.end?i+` to ${Hr(t.end,"hh:mm a",r)}`:i}allDayEventDescription({event:t,locale:r}){const i=`\n      ${t.title}, event spans multiple days:\n      start time ${Hr(t.start,"MMMM dd hh:mm a",r)}\n    `;return t.end?i+`, stop time ${Hr(t.end,"MMMM d hh:mm a",r)}`:i+", no stop time"}actionButtonLabel({action:t}){return t.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(t){return new(t||n)(Q(aI))},n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})(),Iu=(()=>{class n{constructor(t,r){this.calendarA11y=t,this.locale=r}transform(t,r){if(t.locale=t.locale||this.locale,typeof this.calendarA11y[r]>"u"){const i=Object.getOwnPropertyNames(Object.getPrototypeOf(xm.prototype)).filter(s=>"constructor"!==s);throw new Error(`${r} is not a valid a11y method. Can only be one of ${i.join(", ")}`)}return this.calendarA11y[r](t)}}return n.\u0275fac=function(t){return new(t||n)(z(xm,16),z(ls,16))},n.\u0275pipe=mr({name:"calendarA11y",type:n,pure:!0}),n})(),Z3=(()=>{class n{constructor(){this.trackByActionId=(t,r)=>r.id?r.id:r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter"]],template:function(t,r){if(1&t&&(Ne(0,Vie,1,1,"ng-template",null,0,zs),Ne(2,Bie,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",jr(2,Uie,r.event,r.trackByActionId))}},dependencies:[us,zi,mo,Gs,Tu,aC,Iu],encapsulation:2}),n})();class lC{month(e,t){return e.title}monthTooltip(e,t){return e.title}week(e,t){return e.title}weekTooltip(e,t){return e.title}day(e,t){return e.title}dayTooltip(e,t){return e.title}}let IA=(()=>{class n{constructor(t){this.calendarEventTitle=t}transform(t,r,i){return this.calendarEventTitle[r](i,t)}}return n.\u0275fac=function(t){return new(t||n)(z(lC,16))},n.\u0275pipe=mr({name:"calendarEventTitle",type:n,pure:!0}),n})(),K3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(t,r){if(1&t&&(Ne(0,jie,3,10,"ng-template",null,0,zs),Ne(2,Hie,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",jr(2,$ie,r.event,r.view))}},dependencies:[Gs,IA,Iu],encapsulation:2}),n})(),eoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(t,r){if(1&t&&(Ne(0,zie,3,2,"ng-template",null,0,zs),Ne(2,Wie,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",hw(2,qie,r.contents,r.placement,r.event))}},dependencies:[us,Gs],encapsulation:2}),n})(),Y3=(()=>{class n{constructor(t,r,i,s,o,a){this.elementRef=t,this.injector=r,this.renderer=i,this.viewContainerRef=o,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new Y,this.tooltipFactory=s.resolveComponentFactory(eoe)}ngOnChanges(t){this.tooltipRef&&(t.contents||t.customTemplate||t.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(null===this.delay?ge("now"):FS(this.delay)).pipe(Ii(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(t=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=function tie(n,e,t,r,i){var s=Array.isArray(t)?t:t.split(eie),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=e.classList,l=function(T){var B=T.split("-"),P=B[0],$=B[1],ee=[];return i&&(ee.push(i+"-"+P),$&&ee.push(i+"-"+P+"-"+$),ee.forEach(function(_e){a.add(_e)})),ee};i&&o.forEach(function(T){a.remove(i+"-"+T)});var c=s.findIndex(function(T){return"auto"===T});c>=0&&o.forEach(function(T){null==s.find(function(B){return-1!==B.search("^"+T)})&&s.splice(c++,1,T)});var h=e.style;h.position="absolute",h.top="0",h.left="0",h["will-change"]="transform";for(var m,_=!1,v=0,C=s;v<C.length;v++){var b=l(m=C[v]);if(T3.positionElements(n,e,m,r)){_=!0;break}i&&b.forEach(function(T){a.remove(T)})}return _||(l(m=s[0]),T3.positionElements(n,e,m,r)),m}(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===t.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip([...t,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(t){return new(t||n)(z(nn),z(Ar),z(bi),z(eu),z(ji),z(xt))},n.\u0275dir=Qe({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(t,r){1&t&&ye("mouseenter",function(){return r.onMouseOver()})("mouseleave",function(){return r.onMouseOut()})},inputs:{contents:["mwlCalendarTooltip","contents"],placement:["tooltipPlacement","placement"],customTemplate:["tooltipTemplate","customTemplate"],event:["tooltipEvent","event"],appendToBody:["tooltipAppendToBody","appendToBody"],delay:["tooltipDelay","delay"]},features:[Tr]}),n})();var Pa=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(Pa||{});const Q3=n=>function pie(n,e){var t=!0;function r(i,s){e(i,s),t=!1}return Array.isArray(n)?(n.forEach(function(i){i.start?i.start instanceof Date||r(zh.StartPropertyNotDate,i):r(zh.StartPropertyMissing,i),i.end&&(i.end instanceof Date||r(zh.EndPropertyNotDate,i),i.start>i.end&&r(zh.EndsBeforeStart,i))}),t):(e(zh.NotArray,n),!1)}(n,(...t)=>console.warn("angular-calendar",...t));function X3(n,e){return Math.floor(n.left)<=Math.ceil(e.left)&&Math.floor(e.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(e.right)&&Math.floor(e.right)<=Math.ceil(n.right)}function J3(n,e){return Math.round(n/e)*e}const eU=(n,e)=>e.id?e.id:e,SA=(n,e)=>e.date.toISOString(),roe=(n,e)=>e.date.toISOString(),ioe=(n,e)=>e.segments[0].date.toISOString(),soe=(n,e)=>e.event.id?e.event.id:e.event,ooe=(n,e)=>e.event.id?e.event.id:e.event;function AA(n,e,t,r,i){const s=J3(n,r||t),o=function loe(n,e,t){return(t||60)/(n*e)}(e,t,i);return s*o}function tU(n,e,t){return e.end?e.end:n.addMinutes(e.start,t)}function Su(n,e,t,r){let i=0,s=0;const o=t<0?n.subDays:n.addDays;let a=e;for(;s<=Math.abs(t);){a=o(e,i);const l=n.getDay(a);-1===r.indexOf(l)&&s++,i++}return a}function MA(n,e,t,r=[],i){let s=i?n.startOfDay(e):n.startOfWeek(e,{weekStartsOn:t});const o=n.endOfWeek(e,{weekStartsOn:t});for(;r.indexOf(n.getDay(s))>-1&&s<o;)s=n.addDays(s,1);if(i)return{viewStart:s,viewEnd:n.endOfDay(Su(n,s,i-1,r))};{let a=o;for(;r.indexOf(n.getDay(a))>-1&&a>s;)a=n.subDays(a,1);return{viewStart:s,viewEnd:a}}}function RA({x:n,y:e}){return Math.abs(n)>1||Math.abs(e)>1}class Au{}let doe=(()=>{class n{constructor(t){this.dateAdapter=t}monthViewColumnHeader({date:t,locale:r}){return Hr(t,"EEEE",r)}monthViewDayNumber({date:t,locale:r}){return Hr(t,"d",r)}monthViewTitle({date:t,locale:r}){return Hr(t,"LLLL y",r)}weekViewColumnHeader({date:t,locale:r}){return Hr(t,"EEEE",r)}weekViewColumnSubHeader({date:t,locale:r}){return Hr(t,"MMM d",r)}weekViewTitle({date:t,locale:r,weekStartsOn:i,excludeDays:s,daysInWeek:o}){const{viewStart:a,viewEnd:l}=MA(this.dateAdapter,t,i,s,o),c=(h,m)=>Hr(h,"MMM d"+(m?", yyyy":""),r);return`${c(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${c(l,!0)}`}weekViewHour({date:t,locale:r}){return Hr(t,"h a",r)}dayViewHour({date:t,locale:r}){return Hr(t,"h a",r)}dayViewTitle({date:t,locale:r}){return Hr(t,"EEEE, MMMM d, y",r)}}return n.\u0275fac=function(t){return new(t||n)(Q(Au))},n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})(),Pm=(()=>{class n extends doe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sr(n)))(r||n)}}(),n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})(),cC=(()=>{class n{constructor(t,r){this.dateFormatter=t,this.locale=r}transform(t,r,i=this.locale,s=0,o=[],a){if(typeof this.dateFormatter[r]>"u"){const l=Object.getOwnPropertyNames(Object.getPrototypeOf(Pm.prototype)).filter(c=>"constructor"!==c);throw new Error(`${r} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[r]({date:t,locale:i,weekStartsOn:s,excludeDays:o,daysInWeek:a})}}return n.\u0275fac=function(t){return new(t||n)(z(Pm,16),z(ls,16))},n.\u0275pipe=mr({name:"calendarDate",type:n,pure:!0}),n})(),Om=(()=>{class n{constructor(t){this.dateAdapter=t}getMonthView(t){return function die(n,e){var t=e.events,r=void 0===t?[]:t,i=e.viewDate,s=e.weekStartsOn,o=e.excluded,a=void 0===o?[]:o,l=e.viewStart,c=void 0===l?n.startOfMonth(i):l,h=e.viewEnd,m=void 0===h?n.endOfMonth(i):h,_=e.weekendDays;r||(r=[]);for(var O,C=n.endOfWeek,b=n.differenceInDays,T=n.startOfDay,B=n.addHours,P=n.endOfDay,$=n.isSameMonth,ee=n.getDay,_e=(0,n.startOfWeek)(c,{weekStartsOn:s}),xe=C(m,{weekStartsOn:s}),j=Am(n,{events:r,periodStart:_e,periodEnd:xe}),R=[],H=function(tt){var st;if(O?(st=T(B(O,24)),O.getTime()===st.getTime()&&(st=T(B(O,25))),O=st):st=O=_e,!a.some(function(On){return ee(st)===On})){var bn=S3(n,{date:st,weekendDays:_}),Xn=Am(n,{events:j,periodStart:T(st),periodEnd:P(st)});bn.inMonth=$(st,i),bn.events=Xn,bn.badgeTotal=Xn.length,R.push(bn)}},N=0;N<b(xe,_e)+1;N++)H();var U=[],F=hA-a.length;if(F<hA)for(N=0;N<R.length;N+=F){var Ft=R.slice(N,N+F);Ft.some(function(st){return c<=st.date&&st.date<m})&&(U=uA(uA([],U,!0),Ft,!0))}else U=R;var Ze=Math.floor(U.length/F),Xe=[];for(N=0;N<Ze;N++)Xe.push(N*F);return{rowOffsets:Xe,totalDaysVisibleInWeek:F,days:U,period:{start:U[0].date,end:P(U[U.length-1].date),events:j}}}(this.dateAdapter,t)}getWeekViewHeader(t){return pA(this.dateAdapter,t)}getWeekView(t){return function uie(n,e){var t=e.events,r=void 0===t?[]:t,i=e.viewDate,s=e.weekStartsOn,o=e.excluded,a=void 0===o?[]:o,l=e.precision,c=void 0===l?"days":l,h=e.absolutePositionedEvents,m=void 0!==h&&h,_=e.hourSegments,v=e.hourDuration,C=e.dayStart,b=e.dayEnd,T=e.weekendDays,B=e.segmentHeight,P=e.minimumEventHeight,$=e.viewStart,ee=void 0===$?n.startOfWeek(i,{weekStartsOn:s}):$,_e=e.viewEnd,xe=void 0===_e?n.endOfWeek(i,{weekStartsOn:s}):_e;r||(r=[]);var R=n.endOfDay,O=Am(n,{events:r,periodStart:ee=(0,n.startOfDay)(ee),periodEnd:xe=R(xe)}),H=pA(n,{viewDate:i,weekStartsOn:s,excluded:a,weekendDays:T,viewStart:ee,viewEnd:xe});return{allDayEventRows:lie(n,{events:O,excluded:a,precision:c,absolutePositionedEvents:m,viewStart:ee,viewEnd:xe}),period:{events:O,start:H[0].date,end:R(H[H.length-1].date)},hourColumns:cie(n,{events:r,viewDate:i,hourSegments:_,hourDuration:v,dayStart:C,dayEnd:b,weekStartsOn:s,excluded:a,weekendDays:T,segmentHeight:B,viewStart:ee,viewEnd:xe,minimumEventHeight:P})}}(this.dateAdapter,t)}}return n.\u0275fac=function(t){return new(t||n)(Q(Au))},n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})();new Ee("Moment");var Zl=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(Zl||{});let Kh=(()=>{class n{static forRoot(t,r={}){return{ngModule:n,providers:[t,r.eventTitleFormatter||lC,r.dateFormatter||Pm,r.utils||Om,r.a11y||xm]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Wt({providers:[aI],imports:[Ts]}),n})(),hoe=(()=>{class n{constructor(){this.highlightDay=new He,this.unhighlightDay=new He,this.eventClicked=new He,this.trackByEventId=eU,this.validateDrag=RA}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(t,r){2&t&&ei("cal-past",r.day.isPast)("cal-today",r.day.isToday)("cal-future",r.day.isFuture)("cal-weekend",r.day.isWeekend)("cal-in-month",r.day.inMonth)("cal-out-month",!r.day.inMonth)("cal-has-events",r.day.events.length>0)("cal-open",r.day===r.openDay)("cal-event-highlight",!!r.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:15,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"]],template:function(t,r){if(1&t&&(Ne(0,Xie,8,14,"ng-template",null,0,zs),Ne(2,Jie,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",_T(2,ese,[r.day,r.openDay,r.locale,r.tooltipPlacement,r.highlightDay,r.unhighlightDay,r.eventClicked,r.tooltipTemplate,r.tooltipAppendToBody,r.tooltipDelay,r.trackByEventId,r.validateDrag]))}},dependencies:[us,zi,mo,Gs,Sa,DA,Y3,Tu,cC,IA,Iu],encapsulation:2}),n})();const foe=function SV(n,e){return{type:7,name:n,definitions:e,options:{}}}("collapse",[lE("void",Fl({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),lE("*",Fl({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),cE("* => void",aE("150ms ease-out")),cE("void => *",aE("150ms ease-in"))]);let poe=(()=>{class n{constructor(){this.isOpen=!1,this.eventClicked=new He,this.trackByEventId=eU,this.validateDrag=RA}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-open-day-events","role","application",4,"ngIf"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"event","customTemplate","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"]],template:function(t,r){if(1&t&&(Ne(0,ise,1,1,"ng-template",null,0,zs),Ne(2,sse,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",mT(2,ose,r.events,r.eventClicked,r.isOpen,r.trackByEventId,r.validateDrag))}},dependencies:[us,zi,mo,Gs,Sa,DA,Z3,K3,Tu,aC,Iu],encapsulation:2,data:{animation:[foe]}}),n})(),goe=(()=>{class n{constructor(){this.columnHeaderClicked=new He,this.trackByWeekDayHeaderDate=SA}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass","click"]],template:function(t,r){if(1&t&&(Ne(0,lse,2,2,"ng-template",null,0,zs),Ne(2,cse,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",hw(2,use,r.days,r.locale,r.trackByWeekDayHeaderDate))}},dependencies:[us,zi,Gs,cC],encapsulation:2}),n})(),moe=(()=>{class n{constructor(t,r,i,s){this.cdr=t,this.utils=r,this.dateAdapter=s,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new He,this.dayClicked=new He,this.eventClicked=new He,this.columnHeaderClicked=new He,this.eventTimesChanged=new He,this.trackByRowOffset=(o,a)=>this.view.days.slice(a,this.view.totalDaysVisibleInWeek).map(l=>l.date.toISOString()).join("-"),this.trackByDate=(o,a)=>a.date.toISOString(),this.locale=i}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(t){const r=t.viewDate||t.excludeDays||t.weekendDays,i=t.viewDate||t.events||t.excludeDays||t.weekendDays;r&&this.refreshHeader(),t.events&&Q3(this.events),i&&this.refreshBody(),(r||i)&&this.emitBeforeViewRender(),(t.activeDayIsOpen||t.viewDate||t.events||t.excludeDays||t.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(t,r){this.view.days.forEach(i=>{r&&i.events.indexOf(t)>-1?i.backgroundColor=t.color&&t.color.secondary||"#D1E8FF":delete i.backgroundColor})}eventDropped(t,r,i){if(t!==i){const s=this.dateAdapter.getYear(t.date),o=this.dateAdapter.getMonth(t.date),a=this.dateAdapter.getDate(t.date),l=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(r.start,s),o),a);let c;if(r.end){const h=this.dateAdapter.differenceInSeconds(l,r.start);c=this.dateAdapter.addSeconds(r.end,h)}this.eventTimesChanged.emit({event:r,newStart:l,newEnd:c,day:t,type:Zl.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(!0===this.activeDayIsOpen){const t=this.activeDay||this.viewDate;this.openDay=this.view.days.find(i=>this.dateAdapter.isSameDay(i.date,t));const r=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(r/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}}return n.\u0275fac=function(t){return new(t||n)(z(kl),z(Om),z(ls),z(Au))},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[Tr],decls:4,vars:5,consts:[["role","grid",1,"cal-month-view"],[3,"days","locale","customTemplate","columnHeaderClicked"],[1,"cal-days"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate","eventClicked","drop"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked"]],template:function(t,r){1&t&&(S(0,"div",0)(1,"mwl-calendar-month-view-header",1),ye("columnHeaderClicked",function(s){return r.columnHeaderClicked.emit(s)}),M(),S(2,"div",2),Ne(3,hse,5,13,"div",3),M()()),2&t&&(K(1),te("days",r.columnHeaders)("locale",r.locale)("customTemplate",r.headerTemplate),K(2),te("ngForOf",r.view.rowOffsets)("ngForTrackBy",r.trackByRowOffset))},dependencies:[us,zi,Sa,bA,Tu,aC,hoe,poe,goe,YF,Iu],encapsulation:2}),n})(),kA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Wt({imports:[Ts,iC,Kh,iC]}),n})();class _oe{constructor(e,t){this.dragContainerElement=e,this.startPosition=t.getBoundingClientRect()}validateDrag({x:e,y:t,snapDraggedEvents:r,dragAlreadyMoved:i,transform:s}){const o=RA({x:e,y:t})||i;if(r){const a=Object.assign({},this.startPosition,{left:this.startPosition.left+s.x,right:this.startPosition.right+s.x,top:this.startPosition.top+s.y,bottom:this.startPosition.bottom+s.y});if(o){const l=this.dragContainerElement.getBoundingClientRect(),c=l.top<a.top&&a.top<l.bottom,h=l.top<a.bottom&&a.bottom<l.bottom;return X3(l,a)&&(c||h)}return!1}return o}}class yoe{constructor(e,t,r){this.resizeContainerElement=e,this.minWidth=t,this.rtl=r}validateResize({rectangle:e,edges:t}){return this.rtl&&(typeof t.left<"u"?(e.left-=t.left,e.right+=t.left):typeof t.right<"u"&&(e.left+=t.right,e.right-=t.right),e.width=e.right-e.left),!(this.minWidth&&Math.ceil(e.width)<Math.ceil(this.minWidth))&&function noe(n,e){return X3(n,e)&&function toe(n,e){return Math.floor(n.top)<=Math.ceil(e.top)&&Math.floor(e.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(e.bottom)&&Math.floor(e.bottom)<=Math.ceil(n.bottom)}(n,e)}(this.resizeContainerElement.getBoundingClientRect(),e)}}let voe=(()=>{class n{constructor(){this.dayHeaderClicked=new He,this.eventDropped=new He,this.dragEnter=new He,this.trackByWeekDayHeaderDate=SA}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"ngClass","mwlClick","drop","dragEnter"]],template:function(t,r){if(1&t&&(Ne(0,pse,2,2,"ng-template",null,0,zs),Ne(2,gse,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",function cN(n,e,t,r,i,s,o,a,l){const c=Ir()+n,h=Ce(),m=js(h,c,t,r,i,s);return tu(h,c+4,o,a)||m?Vo(h,c+6,l?e.call(l,t,r,i,s,o,a):e(t,r,i,s,o,a)):_g(h,c+6)}(2,mse,r.days,r.locale,r.dayHeaderClicked,r.eventDropped,r.dragEnter,r.trackByWeekDayHeaderDate))}},dependencies:[us,zi,Gs,bA,Tu,cC],encapsulation:2}),n})(),woe=(()=>{class n{constructor(){this.eventClicked=new He}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(t,r){if(1&t&&(Ne(0,yse,6,27,"ng-template",null,0,zs),Ne(2,vse,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",_T(2,wse,[r.weekEvent,r.tooltipPlacement,r.eventClicked,r.tooltipTemplate,r.tooltipAppendToBody,r.tooltipDisabled,r.tooltipDelay,r.column,r.daysInWeek]))}},dependencies:[Gs,Sa,Z3,K3,Y3,Tu,aC,IA,Iu],encapsulation:2}),n})(),Eoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(t,r){if(1&t&&(Ne(0,Cse,3,13,"ng-template",null,0,zs),Ne(2,Dse,0,0,"ng-template",1)),2&t){const i=Jr(1);K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",mT(2,bse,r.segment,r.locale,r.segmentHeight,r.isTimeLabel,r.daysInWeek))}},dependencies:[us,mo,Gs,cC,Iu],encapsulation:2}),n})(),Coe=(()=>{class n{constructor(t,r){this.dateAdapter=t,this.zone=r,this.columnDate$=new ne(void 0),this.marker$=this.zone.onStable.pipe(ct(()=>b3(6e4)),Zs(0),cA(this.columnDate$),Oe(i=>{const s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(i,this.dayStartHour),this.dayStartMinute),o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(i,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(i,l)&&l>=s&&l<=o,top:this.dateAdapter.differenceInMinutes(l,s)*a}}))}ngOnChanges(t){t.columnDate&&this.columnDate$.next(t.columnDate.currentValue)}}return n.\u0275fac=function(t){return new(t||n)(z(Au),z(it))},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[Tr],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(t,r){if(1&t&&(Ne(0,Ise,1,1,"ng-template",null,0,zs),Ne(2,Sse,0,0,"ng-template",1),Qt(3,"async"),Qt(4,"async")),2&t){const i=Jr(1);let s;K(2),te("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",function uN(n,e,t,r,i,s,o,a,l,c){const h=Ir()+n,m=Ce();let _=js(m,h,t,r,i,s);return nw(m,h+4,o,a,l)||_?Vo(m,h+7,c?e.call(c,t,r,i,s,o,a,l):e(t,r,i,s,o,a,l)):_g(m,h+7)}(6,Ase,r.columnDate,r.dayStartHour,r.dayStartMinute,r.dayEndHour,r.dayEndMinute,null==(s=yT(3,2,r.marker$))?null:s.isVisible,null==(s=yT(4,4,r.marker$))?null:s.top))}},dependencies:[mo,Gs,ZF],encapsulation:2}),n})(),nU=(()=>{class n{constructor(t,r,i,s,o){this.cdr=t,this.utils=r,this.dateAdapter=s,this.element=o,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new He,this.eventClicked=new He,this.eventTimesChanged=new He,this.beforeViewRender=new He,this.hourSegmentClicked=new He,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=SA,this.trackByHourSegment=roe,this.trackByHour=ioe,this.trackByWeekAllDayEvent=soe,this.trackByWeekTimeEvent=ooe,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=i}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(t){const r=t.viewDate||t.excludeDays||t.weekendDays||t.daysInWeek||t.weekStartsOn,i=t.viewDate||t.dayStartHour||t.dayStartMinute||t.dayEndHour||t.dayEndMinute||t.hourSegments||t.hourDuration||t.weekStartsOn||t.weekendDays||t.excludeDays||t.hourSegmentHeight||t.events||t.daysInWeek||t.minimumEventHeight;r&&this.refreshHeader(),t.events&&Q3(this.events),i&&this.refreshBody(),(r||i)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&"rtl"===getComputedStyle(this.element.nativeElement).direction,this.cdr.detectChanges()}timeEventResizeStarted(t,r,i){this.timeEventResizes.set(r.event,i),this.resizeStarted(t,r)}timeEventResizing(t,r){this.timeEventResizes.set(t.event,r);const i=new Map,s=[...this.events];this.timeEventResizes.forEach((o,a)=>{const l=this.getTimeEventResizedDates(a,o),c={...a,...l};i.set(c,a);const h=s.indexOf(a);s[h]=c}),this.restoreOriginalEvents(s,i,!0)}timeEventResizeEnded(t){this.view=this.getWeekView(this.events);const r=this.timeEventResizes.get(t.event);if(r){this.timeEventResizes.delete(t.event);const i=this.getTimeEventResizedDates(t.event,r);this.eventTimesChanged.emit({newStart:i.start,newEnd:i.end,event:t.event,type:Zl.Resize})}}allDayEventResizeStarted(t,r,i){this.allDayEventResizes.set(r,{originalOffset:r.offset,originalSpan:r.span,edge:typeof i.edges.left<"u"?"left":"right"}),this.resizeStarted(t,r,this.getDayColumnWidth(t))}allDayEventResizing(t,r,i){const s=this.allDayEventResizes.get(t),o=this.rtl?-1:1;if(typeof r.edges.left<"u"){const a=Math.round(+r.edges.left/i)*o;t.offset=s.originalOffset+a,t.span=s.originalSpan-a}else if(typeof r.edges.right<"u"){const a=Math.round(+r.edges.right/i)*o;t.span=s.originalSpan+a}}allDayEventResizeEnded(t){const r=this.allDayEventResizes.get(t);if(r){const i="left"===r.edge;let s;s=i?t.offset-r.originalOffset:t.span-r.originalSpan,t.offset=r.originalOffset,t.span=r.originalSpan;const o=this.getAllDayEventResizedDates(t.event,s,i);this.eventTimesChanged.emit({newStart:o.start,newEnd:o.end,event:t.event,type:Zl.Resize}),this.allDayEventResizes.delete(t)}}getDayColumnWidth(t){return Math.floor(t.offsetWidth/this.days.length)}dateDragEnter(t){this.lastDragEnterDate=t}eventDropped(t,r,i){(function uoe(n,e,t,r){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==r||n.dropData.event.allDay&&!t||!n.dropData.event.allDay&&t)})(t,0,i,this.calendarId)&&this.lastDragEnterDate.getTime()===r.getTime()&&(!this.snapDraggedEvents||t.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:Zl.Drop,event:t.dropData.event,newStart:r,allDay:i}),this.lastDraggedEvent=null}dragEnter(t){this.eventDragEnterByType[t]++}dragLeave(t){this.eventDragEnterByType[t]--}dragStarted(t,r,i,s){this.dayColumnWidth=this.getDayColumnWidth(t);const o=new _oe(t,r);this.validateDrag=({x:a,y:l,transform:c})=>{const h=0===this.allDayEventResizes.size&&0===this.timeEventResizes.size&&o.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:c});if(h&&this.validateEventTimesChanged){const m=this.getDragMovedEventTimes(i,{x:a,y:l},this.dayColumnWidth,s);return this.validateEventTimesChanged({type:Zl.Drag,event:i.event,newStart:m.start,newEnd:m.end})}return h},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&s&&this.view.hourColumns.forEach(a=>{const l=a.events.find(c=>c.event===i.event&&c!==i);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(t,r){const i=this.getDragMovedEventTimes(t,r,this.dayColumnWidth,!0),s=t.event,o={...s,...i},a=this.events.map(l=>l===s?o:l);this.restoreOriginalEvents(a,new Map([[o,s]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(t,r,i,s=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;const{start:o,end:a}=this.getDragMovedEventTimes(t,r,i,s);(this.snapDraggedEvents||this.eventDragEnterByType[s?"time":"allDay"]>0)&&function coe(n,e,t){const r=e||n;return t.start<=n&&n<=t.end||t.start<=r&&r<=t.end}(o,a,this.view.period)&&(this.lastDraggedEvent=t.event,this.eventTimesChanged.emit({newStart:o,newEnd:a,event:t.event,type:Zl.Drag,allDay:!s}))}refreshHeader(){this.days=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays,...MA(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit({header:this.days,...this.view})}getWeekView(t){return this.utils.getWeekView({events:t,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight,...MA(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}getDragMovedEventTimes(t,r,i,s){const o=J3(r.x,i)/i*(this.rtl?-1:1),a=s?AA(r.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(Su(this.dateAdapter,t.event.start,o,this.excludeDays),a);let c;return t.event.end&&(c=this.dateAdapter.addMinutes(Su(this.dateAdapter,t.event.end,o,this.excludeDays),a)),{start:l,end:c}}restoreOriginalEvents(t,r,i=!0){const s=this.view;i&&(this.view=this.getWeekView(t));const o=t.filter(a=>r.has(a));this.view.hourColumns.forEach((a,l)=>{s.hourColumns[l].hours.forEach((c,h)=>{c.segments.forEach((m,_)=>{a.hours[h].segments[_].cssClass=m.cssClass})}),o.forEach(c=>{const h=r.get(c),m=a.events.find(_=>_.event===(i?c:h));m?(m.event=h,m.tempEvent=c,i||(m.height=0,m.width=0)):a.events.push({event:h,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:c})})}),r.clear()}getTimeEventResizedDates(t,r){const i={start:t.start,end:tU(this.dateAdapter,t,this.minimumEventHeight)},{end:s,...o}=t,a={start:this.dateAdapter.addMinutes(i.end,-1*this.minimumEventHeight),end:tU(this.dateAdapter,o,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof r.edges.left<"u"){const c=Math.round(+r.edges.left/this.dayColumnWidth)*l,h=Su(this.dateAdapter,i.start,c,this.excludeDays);i.start=h<a.start?h:a.start}else if(typeof r.edges.right<"u"){const c=Math.round(+r.edges.right/this.dayColumnWidth)*l,h=Su(this.dateAdapter,i.end,c,this.excludeDays);i.end=h>a.end?h:a.end}if(typeof r.edges.top<"u"){const c=AA(r.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(i.start,c);i.start=h<a.start?h:a.start}else if(typeof r.edges.bottom<"u"){const c=AA(r.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(i.end,c);i.end=h>a.end?h:a.end}return i}resizeStarted(t,r,i){this.dayColumnWidth=this.getDayColumnWidth(t);const s=new yoe(t,i,this.rtl);this.validateResize=({rectangle:o,edges:a})=>{const l=s.validateResize({rectangle:{...o},edges:a});if(l&&this.validateEventTimesChanged){let c;if(i){const h=this.rtl?-1:1;if(typeof a.left<"u"){const m=Math.round(+a.left/i)*h;c=this.getAllDayEventResizedDates(r.event,m,!this.rtl)}else{const m=Math.round(+a.right/i)*h;c=this.getAllDayEventResizedDates(r.event,m,this.rtl)}}else c=this.getTimeEventResizedDates(r.event,{rectangle:o,edges:a});return this.validateEventTimesChanged({type:Zl.Resize,event:r.event,newStart:c.start,newEnd:c.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(t,r,i){let s=t.start,o=t.end||t.start;return i?s=Su(this.dateAdapter,s,r,this.excludeDays):o=Su(this.dateAdapter,o,r,this.excludeDays),{start:s,end:o}}}return n.\u0275fac=function(t){return new(t||n)(z(kl),z(Om),z(ls),z(Au),z(nn))},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[Tr],decls:8,vars:9,consts:[["role","grid",1,"cal-week-view"],[3,"days","locale","customTemplate","dayHeaderClicked","eventDropped","dragEnter"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["dayColumns",""],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],["allDayEventsContainer",""],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["eventRowContainer",""],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],["event",""],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek","eventClicked"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],[3,"ngTemplateOutlet"],["weekEventTemplate",""],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek","eventClicked"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter"]],template:function(t,r){1&t&&(S(0,"div",0)(1,"mwl-calendar-week-view-header",1),ye("dayHeaderClicked",function(s){return r.dayHeaderClicked.emit(s)})("eventDropped",function(s){return r.eventDropped({dropData:s},s.newStart,!0)})("dragEnter",function(s){return r.dateDragEnter(s.date)}),M(),Ne(2,Bse,7,5,"div",2),S(3,"div",3),ye("dragEnter",function(){return r.dragEnter("time")})("dragLeave",function(){return r.dragLeave("time")}),Ne(4,Hse,2,2,"div",4),S(5,"div",5,6),Ne(7,Jse,5,13,"div",7),M()()()),2&t&&(K(1),te("days",r.days)("locale",r.locale)("customTemplate",r.headerTemplate),K(1),te("ngIf",r.view.allDayEventRows.length>0),K(2),te("ngIf",r.view.hourColumns.length>0&&1!==r.daysInWeek),K(1),ei("cal-resize-active",r.timeEventResizes.size>0),K(2),te("ngForOf",r.view.hourColumns)("ngForTrackBy",r.trackByHourColumn))},dependencies:[us,zi,mo,Gs,$3,Oie,DA,bA,Tu,voe,woe,Eoe,Coe],encapsulation:2}),n})(),uC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Wt({imports:[Ts,z3,iC,Kh,z3,iC]}),n})(),Doe=(()=>{class n{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new He,this.hourSegmentClicked=new He,this.eventTimesChanged=new He,this.beforeViewRender=new He}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=un({type:n,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender"]],template:function(t,r){1&t&&(S(0,"mwl-calendar-week-view",0),ye("eventClicked",function(s){return r.eventClicked.emit(s)})("hourSegmentClicked",function(s){return r.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return r.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return r.beforeViewRender.emit(s)}),M()),2&t&&te("daysInWeek",1)("viewDate",r.viewDate)("events",r.events)("hourSegments",r.hourSegments)("hourDuration",r.hourDuration)("hourSegmentHeight",r.hourSegmentHeight)("minimumEventHeight",r.minimumEventHeight)("dayStartHour",r.dayStartHour)("dayStartMinute",r.dayStartMinute)("dayEndHour",r.dayEndHour)("dayEndMinute",r.dayEndMinute)("refresh",r.refresh)("locale",r.locale)("eventSnapSize",r.eventSnapSize)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDelay",r.tooltipDelay)("resizeCursors",r.resizeCursors)("hourSegmentTemplate",r.hourSegmentTemplate)("eventTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("snapDraggedEvents",r.snapDraggedEvents)("allDayEventsLabelTemplate",r.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",r.currentTimeMarkerTemplate)("validateEventTimesChanged",r.validateEventTimesChanged)},dependencies:[nU],encapsulation:2}),n})(),xA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Wt({imports:[Ts,Kh,uC]}),n})(),rU=(()=>{class n{static forRoot(t,r={}){return{ngModule:n,providers:[t,r.eventTitleFormatter||lC,r.dateFormatter||Pm,r.utils||Om,r.a11y||xm]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=Wt({imports:[Kh,kA,uC,xA,Kh,kA,uC,xA]}),n})();var pe=yt(861);let iU=(()=>{class n{constructor(){this.apiUrl="https://holidays-jp.github.io/api/v1/date.json"}getHolidays(){var t=this;return(0,pe.Z)(function*(){try{const r=yield fetch(t.apiUrl);if(!r.ok)throw new Error("Network response was not ok");return yield r.json()}catch(r){throw console.error("There was an error fetching the holidays:",r),r}})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $t(n){const e=Object.prototype.toString.call(n);return n instanceof Date||"object"==typeof n&&"[object Date]"===e?new n.constructor(+n):"number"==typeof n||"[object Number]"===e||"string"==typeof n||"[object String]"===e?new Date(n):new Date(NaN)}function Eo(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Yh(n,e){const t=$t(n);return isNaN(e)?Eo(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function PA(n,e){return Eo(n,+$t(n)+e)}Math.pow(10,8);const Toe=6048e5,Ioe=864e5,sU=6e4,Soe=36e5;function Moe(n,e){return PA(n,e*Soe)}function Roe(n,e){return PA(n,e*sU)}function koe(n,e){return PA(n,1e3*e)}function Nm(n){const e=$t(n);return e.setHours(0,0,0,0),e}function aU(n){const e=$t(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Poe(n,e){const t=$t(n),r=$t(e),i=lU(t,r),s=Math.abs(function xoe(n,e){const t=Nm(n),r=Nm(e),i=+t-aU(t),s=+r-aU(r);return Math.round((i-s)/Ioe)}(t,r));t.setDate(t.getDate()-i*s);const a=i*(s-+(lU(t,r)===-i));return 0===a?0:a}function lU(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function cU(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return 0===r?0:r}}function uU(n,e){return+$t(n)-+$t(e)}function Ooe(n,e,t){const r=uU(n,e)/sU;return cU(t?.roundingMethod)(r)}function Noe(n,e,t){const r=uU(n,e)/1e3;return cU(t?.roundingMethod)(r)}function Foe(n){const e=$t(n);return e.setHours(23,59,59,999),e}function dU(n){const e=$t(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}let hU={};function fU(){return hU}function pU(n,e){const t=fU(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=$t(n),s=i.getDay(),o=6+(s<r?-7:0)-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Loe(n){return $t(n).getDay()}function Voe(n){return $t(n).getMonth()}function gU(n,e){return+Nm(n)==+Nm(e)}function Boe(n,e){const t=$t(n),r=$t(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function mU(n){const e=$t(n);return e.setMilliseconds(0),e}function Uoe(n,e){return+mU(n)==+mU(e)}function joe(n){let e;return n.forEach(function(t){const r=$t(t);(void 0===e||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Hoe(n,e){const t=$t(n);return t.setHours(e),t}function $oe(n,e){const t=$t(n);return t.setMinutes(e),t}function zoe(n){const e=$t(n);return e.setSeconds(0,0),e}function Woe(n){const e=$t(n);return e.setDate(1),e.setHours(0,0,0,0),e}function Fm(n,e){const t=fU(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=$t(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function qoe(n){return $t(n).getHours()}function Goe(n){return $t(n).getMinutes()}function Zoe(n){return new Date(n).getTimezoneOffset()}function dC(n,e){return Yh(n,7*e)}function Mu(n,e){const t=$t(n);if(isNaN(e))return Eo(n,NaN);if(!e)return t;const r=t.getDate(),i=Eo(n,t.getTime());return i.setMonth(t.getMonth()+e+1,0),r>=i.getDate()?i:(t.setFullYear(i.getFullYear(),i.getMonth(),r),t)}function Qh(n,e){return Yh(n,-e)}function Yoe(n,e){return dC(n,-e)}function Qoe(n,e){return Mu(n,-e)}function hC(n){return Fm(n,{weekStartsOn:1})}function eae(n){const e=$t(n),t=+hC(e)-+function Joe(n){const e=function Xoe(n){const e=$t(n),t=e.getFullYear(),r=Eo(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=hC(r),s=Eo(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=hC(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}(n),t=Eo(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),hC(t)}(e);return Math.round(t/Toe)+1}function tae(n,e){const t=$t(n);return t.setDate(e),t}function _U(n,e){const t=$t(n),r=t.getFullYear(),i=t.getDate(),s=Eo(n,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const o=function nae(n){const e=$t(n),t=e.getFullYear(),r=e.getMonth(),i=Eo(n,0);return i.setFullYear(t,r+1,0),i.setHours(0,0,0,0),i.getDate()}(s);return t.setMonth(e,Math.min(i,o)),t}function rae(n,e){const t=$t(n);return isNaN(+t)?Eo(n,NaN):(t.setFullYear(e),t)}function iae(n){return $t(n).getDate()}function sae(n){return $t(n).getFullYear()}function yU(){return(0,nt.pi)((0,nt.pi)({},function Koe(){return{addDays:Yh,addHours:Moe,addMinutes:Roe,addSeconds:koe,differenceInDays:Poe,differenceInMinutes:Ooe,differenceInSeconds:Noe,endOfDay:Foe,endOfMonth:dU,endOfWeek:pU,getDay:Loe,getMonth:Voe,isSameDay:gU,isSameMonth:Boe,isSameSecond:Uoe,max:joe,setHours:Hoe,setMinutes:$oe,startOfDay:Nm,startOfMinute:zoe,startOfMonth:Woe,startOfWeek:Fm,getHours:qoe,getMinutes:Goe,getTimezoneOffset:Zoe}}()),{addWeeks:dC,addMonths:Mu,subDays:Qh,subWeeks:Yoe,subMonths:Qoe,getISOWeek:eae,setDate:tae,setMonth:_U,setYear:rae,getDate:iae,getYear:sae})}let vU=(()=>{class n{constructor(){this.reminders={},this.subtaskReminders={}}setReminder(t,r){const i=new Date(t.startDateTime).getTime(),s=i-r,o=Date.now();if(s>o){const a=window.setTimeout(()=>{const l=this.calculateTimeRemaining(i-Date.now());alert(`\u30bf\u30b9\u30af "${t.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${l}`),delete this.reminders[t.id]},s-o);this.reminders[t.id]=a}}clearReminder(t){this.reminders[t.id]&&(clearTimeout(this.reminders[t.id]),delete this.reminders[t.id])}setSubtaskReminder(t,r,i){const s=new Date(i).getTime(),o=s-r,a=Date.now();if(o>a){const l=window.setTimeout(()=>{const c=this.calculateTimeRemaining(s-Date.now());alert(`\u30b5\u30d6\u30bf\u30b9\u30af "${t.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${c}`),delete this.subtaskReminders[t.id]},o-a);this.subtaskReminders[t.id]=l}}clearSubtaskReminder(t){this.subtaskReminders[t.id]&&(clearTimeout(this.subtaskReminders[t.id]),delete this.subtaskReminders[t.id])}calculateTimeRemaining(t){const r=Math.floor(t/1e3),i=Math.floor(r/60),s=Math.floor(i/60),o=Math.floor(s/24);return o>0?`${o}\u65e5`:s>0?`${s}\u6642\u9593`:i>0?`${i}\u5206`:`${r}\u79d2`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xh=yt(534);(0,Xh.registerVersion)("firebase","10.12.2","app");const uae=new class cae extends BE{}(class lae extends VE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),OA=new Sl("ANGULARFIRE2_VERSION");class wU{constructor(){return((n,e)=>{const t=(0,Xh.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(hae)}}const hae="app-check";function Jh(){}class EU{zone;delegate;constructor(e,t=uae){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class fae{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jh,{},Jh,Jh)),t.pipe(zr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let CU=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new EU(Zone.current)),this.insideAngular=t.run(()=>new EU(Zone.current,Vh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Q(it))};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ms(n){return function gae(n){return function(t){return(t=t.lift(new fae(n.ngZone))).pipe(mi(n.outsideAngular),Fi(n.insideAngular))}}(function ef(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Kl=yt(106);Kl.Z.registerVersion("firebase","10.12.2","app-compat");const vae=["ngOnDestroy"];class DU{constructor(e){return e}}const fC=new Ee("angularfire2.app.options"),pC=new Ee("angularfire2.app.name");function NA(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Kl.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Kl.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Cae("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new DU(o)}const Cae=(n,...e)=>{},Dae={provide:DU,useFactory:NA,deps:[fC,it,[new bl,pC]]};let bae=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:fC,useValue:t},{provide:pC,useValue:r}]}}constructor(t){Kl.Z.registerVersion("angularfire",OA.full,"core"),Kl.Z.registerVersion("angularfire",OA.full,"app-compat"),Kl.Z.registerVersion("angular",wP.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Q(Us))};static \u0275mod=Ht({type:n});static \u0275inj=Wt({providers:[Dae]})}return n})();function bU(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Tae(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(TU("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Iae?" You may need to reload as Firebase is not HMR aware.":""}`),TU("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Iae=typeof module<"u"&&!!module.hot,TU=(n,...e)=>{};function IU(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,Ke({connector:()=>new A3(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}globalThis.\u0275AngularfireInstanceCache||=[],yt(985);const SU=new Ee("angularfire2.auth.use-emulator"),AU=new Ee("angularfire2.auth.settings"),MU=new Ee("angularfire2.auth.tenant-id"),RU=new Ee("angularfire2.auth.langugage-code"),kU=new Ee("angularfire2.auth.use-device-language"),xU=new Ee("angularfire.auth.persistence"),PU=(n,e,t,r,i,s,o,a)=>bU(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,h]of Object.entries(o))l.settings[c]=h;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let OU=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,h,m,_,v){const C=new Y,b=ge(void 0).pipe(Fi(o.outsideAngular),ct(()=>s.runOutsideAngular(()=>Promise.resolve().then(yt.bind(yt,985)))),Oe(()=>NA(t,s,r)),Oe(T=>PU(T,s,a,c,h,m,l,_)),IU({bufferSize:1,refCount:!1}));if(Nw(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ge(null);else{b.pipe(Ol()).subscribe();const T=b.pipe(ct($=>$.getRedirectResult().then(ee=>ee,()=>null)),Ms,IU({bufferSize:1,refCount:!1})),B=b.pipe(ct($=>new dt(ee=>({unsubscribe:s.runOutsideAngular(()=>$.onAuthStateChanged(_e=>ee.next(_e),_e=>ee.error(_e),()=>ee.complete()))})))),P=b.pipe(ct($=>new dt(ee=>({unsubscribe:s.runOutsideAngular(()=>$.onIdTokenChanged(_e=>ee.next(_e),_e=>ee.error(_e),()=>ee.complete()))}))));this.authState=T.pipe(cA(B),mi(o.outsideAngular),Fi(o.insideAngular)),this.user=T.pipe(cA(P),mi(o.outsideAngular),Fi(o.insideAngular)),this.idToken=this.user.pipe(ct($=>$?q($.getIdToken()):ge(null))),this.idTokenResult=this.user.pipe(ct($=>$?q($.getIdTokenResult()):ge(null))),this.credential=fe(T,C,this.authState.pipe(dn($=>!$))).pipe(Oe($=>$?.user?$:null),mi(o.outsideAngular),Fi(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(vae.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(h=>{const m=h?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,m),m})})})}))(this,b,s,{spy:{apply:(T,B,P)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&P.then($=>C.next($))}}})}static \u0275fac=function(r){return new(r||n)(Q(fC),Q(pC,8),Q(Us),Q(it),Q(CU),Q(SU,8),Q(AU,8),Q(MU,8),Q(RU,8),Q(kU,8),Q(xU,8),Q(wU,8))};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var ku,VU,NU=yt(537),Yo=yt(879),an=yt(58),FU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},LU={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(j,R,O){O||(O=0);var H=Array(16);if("string"==typeof R)for(var N=0;16>N;++N)H[N]=R.charCodeAt(O++)|R.charCodeAt(O++)<<8|R.charCodeAt(O++)<<16|R.charCodeAt(O++)<<24;else for(N=0;16>N;++N)H[N]=R[O++]|R[O++]<<8|R[O++]<<16|R[O++]<<24;var U=j.g[3],F=(R=j.g[0])+(U^(O=j.g[1])&((N=j.g[2])^U))+H[0]+3614090360&4294967295;F=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=(O=(N=(U=(R=O+(F<<7&4294967295|F>>>25))+((F=U+(N^R&(O^N))+H[1]+3905402710&4294967295)<<12&4294967295|F>>>20))+((F=N+(O^U&(R^O))+H[2]+606105819&4294967295)<<17&4294967295|F>>>15))+((F=O+(R^N&(U^R))+H[3]+3250441966&4294967295)<<22&4294967295|F>>>10))+((F=R+(U^O&(N^U))+H[4]+4118548399&4294967295)<<7&4294967295|F>>>25))+((F=U+(N^R&(O^N))+H[5]+1200080426&4294967295)<<12&4294967295|F>>>20))+((F=N+(O^U&(R^O))+H[6]+2821735955&4294967295)<<17&4294967295|F>>>15))+((F=O+(R^N&(U^R))+H[7]+4249261313&4294967295)<<22&4294967295|F>>>10))+((F=R+(U^O&(N^U))+H[8]+1770035416&4294967295)<<7&4294967295|F>>>25))+((F=U+(N^R&(O^N))+H[9]+2336552879&4294967295)<<12&4294967295|F>>>20))+((F=N+(O^U&(R^O))+H[10]+4294925233&4294967295)<<17&4294967295|F>>>15))+((F=O+(R^N&(U^R))+H[11]+2304563134&4294967295)<<22&4294967295|F>>>10))+((F=R+(U^O&(N^U))+H[12]+1804603682&4294967295)<<7&4294967295|F>>>25))+((F=U+(N^R&(O^N))+H[13]+4254626195&4294967295)<<12&4294967295|F>>>20))+((F=N+(O^U&(R^O))+H[14]+2792965006&4294967295)<<17&4294967295|F>>>15))+((F=O+(R^N&(U^R))+H[15]+1236535329&4294967295)<<22&4294967295|F>>>10))+((F=R+(N^U&(O^N))+H[1]+4129170786&4294967295)<<5&4294967295|F>>>27))+((F=U+(O^N&(R^O))+H[6]+3225465664&4294967295)<<9&4294967295|F>>>23))+((F=N+(R^O&(U^R))+H[11]+643717713&4294967295)<<14&4294967295|F>>>18))+((F=O+(U^R&(N^U))+H[0]+3921069994&4294967295)<<20&4294967295|F>>>12))+((F=R+(N^U&(O^N))+H[5]+3593408605&4294967295)<<5&4294967295|F>>>27))+((F=U+(O^N&(R^O))+H[10]+38016083&4294967295)<<9&4294967295|F>>>23))+((F=N+(R^O&(U^R))+H[15]+3634488961&4294967295)<<14&4294967295|F>>>18))+((F=O+(U^R&(N^U))+H[4]+3889429448&4294967295)<<20&4294967295|F>>>12))+((F=R+(N^U&(O^N))+H[9]+568446438&4294967295)<<5&4294967295|F>>>27))+((F=U+(O^N&(R^O))+H[14]+3275163606&4294967295)<<9&4294967295|F>>>23))+((F=N+(R^O&(U^R))+H[3]+4107603335&4294967295)<<14&4294967295|F>>>18))+((F=O+(U^R&(N^U))+H[8]+1163531501&4294967295)<<20&4294967295|F>>>12))+((F=R+(N^U&(O^N))+H[13]+2850285829&4294967295)<<5&4294967295|F>>>27))+((F=U+(O^N&(R^O))+H[2]+4243563512&4294967295)<<9&4294967295|F>>>23))+((F=N+(R^O&(U^R))+H[7]+1735328473&4294967295)<<14&4294967295|F>>>18))+((F=O+(U^R&(N^U))+H[12]+2368359562&4294967295)<<20&4294967295|F>>>12))+((F=R+(O^N^U)+H[5]+4294588738&4294967295)<<4&4294967295|F>>>28))+((F=U+(R^O^N)+H[8]+2272392833&4294967295)<<11&4294967295|F>>>21))+((F=N+(U^R^O)+H[11]+1839030562&4294967295)<<16&4294967295|F>>>16))+((F=O+(N^U^R)+H[14]+4259657740&4294967295)<<23&4294967295|F>>>9))+((F=R+(O^N^U)+H[1]+2763975236&4294967295)<<4&4294967295|F>>>28))+((F=U+(R^O^N)+H[4]+1272893353&4294967295)<<11&4294967295|F>>>21))+((F=N+(U^R^O)+H[7]+4139469664&4294967295)<<16&4294967295|F>>>16))+((F=O+(N^U^R)+H[10]+3200236656&4294967295)<<23&4294967295|F>>>9))+((F=R+(O^N^U)+H[13]+681279174&4294967295)<<4&4294967295|F>>>28))+((F=U+(R^O^N)+H[0]+3936430074&4294967295)<<11&4294967295|F>>>21))+((F=N+(U^R^O)+H[3]+3572445317&4294967295)<<16&4294967295|F>>>16))+((F=O+(N^U^R)+H[6]+76029189&4294967295)<<23&4294967295|F>>>9))+((F=R+(O^N^U)+H[9]+3654602809&4294967295)<<4&4294967295|F>>>28))+((F=U+(R^O^N)+H[12]+3873151461&4294967295)<<11&4294967295|F>>>21))+((F=N+(U^R^O)+H[15]+530742520&4294967295)<<16&4294967295|F>>>16))+((F=O+(N^U^R)+H[2]+3299628645&4294967295)<<23&4294967295|F>>>9))+((F=R+(N^(O|~U))+H[0]+4096336452&4294967295)<<6&4294967295|F>>>26))+((F=U+(O^(R|~N))+H[7]+1126891415&4294967295)<<10&4294967295|F>>>22))+((F=N+(R^(U|~O))+H[14]+2878612391&4294967295)<<15&4294967295|F>>>17))+((F=O+(U^(N|~R))+H[5]+4237533241&4294967295)<<21&4294967295|F>>>11))+((F=R+(N^(O|~U))+H[12]+1700485571&4294967295)<<6&4294967295|F>>>26))+((F=U+(O^(R|~N))+H[3]+2399980690&4294967295)<<10&4294967295|F>>>22))+((F=N+(R^(U|~O))+H[10]+4293915773&4294967295)<<15&4294967295|F>>>17))+((F=O+(U^(N|~R))+H[1]+2240044497&4294967295)<<21&4294967295|F>>>11))+((F=R+(N^(O|~U))+H[8]+1873313359&4294967295)<<6&4294967295|F>>>26))+((F=U+(O^(R|~N))+H[15]+4264355552&4294967295)<<10&4294967295|F>>>22))+((F=N+(R^(U|~O))+H[6]+2734768916&4294967295)<<15&4294967295|F>>>17))+((F=O+(U^(N|~R))+H[13]+1309151649&4294967295)<<21&4294967295|F>>>11))+((U=(R=O+((F=R+(N^(O|~U))+H[4]+4149444226&4294967295)<<6&4294967295|F>>>26))+((F=U+(O^(R|~N))+H[11]+3174756917&4294967295)<<10&4294967295|F>>>22))^((N=U+((F=N+(R^(U|~O))+H[2]+718787259&4294967295)<<15&4294967295|F>>>17))|~R))+H[9]+3951481745&4294967295,j.g[0]=j.g[0]+R&4294967295,j.g[1]=j.g[1]+(N+(F<<21&4294967295|F>>>11))&4294967295,j.g[2]=j.g[2]+N&4294967295,j.g[3]=j.g[3]+U&4294967295}function o(j,R){this.h=R;for(var O=[],H=!0,N=j.length-1;0<=N;N--){var U=0|j[N];H&&U==R||(O[N]=U,H=!1)}this.g=O}(function e(j,R){function O(){}O.prototype=R.prototype,j.D=R.prototype,j.prototype=new O,j.prototype.constructor=j,j.C=function(H,N,U){for(var F=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)F[Ft-2]=arguments[Ft];return R.prototype[N].apply(H,F)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(j,R){void 0===R&&(R=j.length);for(var O=R-this.blockSize,H=this.B,N=this.h,U=0;U<R;){if(0==N)for(;U<=O;)i(this,j,U),U+=this.blockSize;if("string"==typeof j){for(;U<R;)if(H[N++]=j.charCodeAt(U++),N==this.blockSize){i(this,H),N=0;break}}else for(;U<R;)if(H[N++]=j[U++],N==this.blockSize){i(this,H),N=0;break}}this.h=N,this.o+=R},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var R=1;R<j.length-8;++R)j[R]=0;var O=8*this.o;for(R=j.length-8;R<j.length;++R)j[R]=255&O,O/=256;for(this.u(j),j=Array(16),R=O=0;4>R;++R)for(var H=0;32>H;H+=8)j[O++]=this.g[R]>>>H&255;return j};var a={};function l(j){return-128<=j&&128>j?function s(j,R){var O=a;return Object.prototype.hasOwnProperty.call(O,j)?O[j]:O[j]=R(j)}(j,function(R){return new o([0|R],0>R?-1:0)}):new o([0|j],0>j?-1:0)}function c(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return T(c(-j));for(var R=[],O=1,H=0;j>=O;H++)R[H]=j/O|0,O*=4294967296;return new o(R,0)}var m=l(0),_=l(1),v=l(16777216);function C(j){if(0!=j.h)return!1;for(var R=0;R<j.g.length;R++)if(0!=j.g[R])return!1;return!0}function b(j){return-1==j.h}function T(j){for(var R=j.g.length,O=[],H=0;H<R;H++)O[H]=~j.g[H];return new o(O,~j.h).add(_)}function B(j,R){return j.add(T(R))}function P(j,R){for(;(65535&j[R])!=j[R];)j[R+1]+=j[R]>>>16,j[R]&=65535,R++}function $(j,R){this.g=j,this.h=R}function ee(j,R){if(C(R))throw Error("division by zero");if(C(j))return new $(m,m);if(b(j))return R=ee(T(j),R),new $(T(R.g),T(R.h));if(b(R))return R=ee(j,T(R)),new $(T(R.g),R.h);if(30<j.g.length){if(b(j)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var O=_,H=R;0>=H.l(j);)O=_e(O),H=_e(H);var N=xe(O,1),U=xe(H,1);for(H=xe(H,2),O=xe(O,2);!C(H);){var F=U.add(H);0>=F.l(j)&&(N=N.add(O),U=F),H=xe(H,1),O=xe(O,1)}return R=B(j,N.j(R)),new $(N,R)}for(N=m;0<=j.l(R);){for(O=Math.max(1,Math.floor(j.m()/R.m())),H=48>=(H=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,H-48),F=(U=c(O)).j(R);b(F)||0<F.l(j);)F=(U=c(O-=H)).j(R);C(U)&&(U=_),N=N.add(U),j=B(j,F)}return new $(N,j)}function _e(j){for(var R=j.g.length+1,O=[],H=0;H<R;H++)O[H]=j.i(H)<<1|j.i(H-1)>>>31;return new o(O,j.h)}function xe(j,R){var O=R>>5;R%=32;for(var H=j.g.length-O,N=[],U=0;U<H;U++)N[U]=0<R?j.i(U+O)>>>R|j.i(U+O+1)<<32-R:j.i(U+O);return new o(N,j.h)}(n=o.prototype).m=function(){if(b(this))return-T(this).m();for(var j=0,R=1,O=0;O<this.g.length;O++){var H=this.i(O);j+=(0<=H?H:4294967296+H)*R,R*=4294967296}return j},n.toString=function(j){if(2>(j=j||10)||36<j)throw Error("radix out of range: "+j);if(C(this))return"0";if(b(this))return"-"+T(this).toString(j);for(var R=c(Math.pow(j,6)),O=this,H="";;){var N=ee(O,R).g,U=((0<(O=B(O,N.j(R))).g.length?O.g[0]:O.h)>>>0).toString(j);if(C(O=N))return U+H;for(;6>U.length;)U="0"+U;H=U+H}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h},n.l=function(j){return b(j=B(this,j))?-1:C(j)?0:1},n.abs=function(){return b(this)?T(this):this},n.add=function(j){for(var R=Math.max(this.g.length,j.g.length),O=[],H=0,N=0;N<=R;N++){var U=H+(65535&this.i(N))+(65535&j.i(N)),F=(U>>>16)+(this.i(N)>>>16)+(j.i(N)>>>16);H=F>>>16,O[N]=(F&=65535)<<16|(U&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(j){if(C(this)||C(j))return m;if(b(this))return b(j)?T(this).j(T(j)):T(T(this).j(j));if(b(j))return T(this.j(T(j)));if(0>this.l(v)&&0>j.l(v))return c(this.m()*j.m());for(var R=this.g.length+j.g.length,O=[],H=0;H<2*R;H++)O[H]=0;for(H=0;H<this.g.length;H++)for(var N=0;N<j.g.length;N++){var U=this.i(H)>>>16,F=65535&this.i(H),Ft=j.i(N)>>>16,Xs=65535&j.i(N);O[2*H+2*N]+=F*Xs,P(O,2*H+2*N),O[2*H+2*N+1]+=U*Xs,P(O,2*H+2*N+1),O[2*H+2*N+1]+=F*Ft,P(O,2*H+2*N+1),O[2*H+2*N+2]+=U*Ft,P(O,2*H+2*N+2)}for(H=0;H<R;H++)O[H]=O[2*H+1]<<16|O[2*H];for(H=R;H<2*R;H++)O[H]=0;return new o(O,0)},n.A=function(j){return ee(this,j).h},n.and=function(j){for(var R=Math.max(this.g.length,j.g.length),O=[],H=0;H<R;H++)O[H]=this.i(H)&j.i(H);return new o(O,this.h&j.h)},n.or=function(j){for(var R=Math.max(this.g.length,j.g.length),O=[],H=0;H<R;H++)O[H]=this.i(H)|j.i(H);return new o(O,this.h|j.h)},n.xor=function(j){for(var R=Math.max(this.g.length,j.g.length),O=[],H=0;H<R;H++)O[H]=this.i(H)^j.i(H);return new o(O,this.h^j.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VU=LU.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function h(j,R){if(0==j.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==j.charAt(0))return T(h(j.substring(1),R));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=c(Math.pow(R,8)),H=m,N=0;N<j.length;N+=8){var U=Math.min(8,j.length-N),F=parseInt(j.substring(N,N+U),R);8>U?(U=c(Math.pow(R,U)),H=H.j(U).add(c(F))):H=(H=H.j(O)).add(c(F))}return H},ku=LU.Integer=o}).apply(typeof FU<"u"?FU:typeof self<"u"?self:typeof window<"u"?window:{});var BU,UU,Lm,jU,mC,FA,HU,$U,zU,gC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oa={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,E){return f==Array.prototype||f==Object.prototype||(f[y]=E.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof gC&&gC];for(var y=0;y<f.length;++y){var E=f[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var E=r;f=f.split(".");for(var I=0;I<f.length-1;I++){var re=f[I];if(!(re in E))break e;E=E[re]}(y=y(I=E[f=f[f.length-1]]))!=I&&null!=y&&e(E,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function s(f,y){f instanceof String&&(f+="");var E=0,I=!1,re={next:function(){if(!I&&E<f.length){var de=E++;return{value:y(de,f[de]),done:!1}}return I=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}(this,function(y,E){return E})}});var o=o||{},a=this||self;function l(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function c(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function h(f,y,E){return f.call.apply(f.bind,arguments)}function m(f,y,E){if(!f)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,I),f.apply(y,re)}}return function(){return f.apply(y,arguments)}}function _(f,y,E){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:m).apply(null,arguments)}function v(f,y){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),f.apply(this,I)}}function C(f,y){function E(){}E.prototype=y.prototype,f.aa=y.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(I,re,de){for(var Ve=Array(arguments.length-2),An=2;An<arguments.length;An++)Ve[An-2]=arguments[An];return y.prototype[re].apply(I,Ve)}}function b(f){const y=f.length;if(0<y){const E=Array(y);for(let I=0;I<y;I++)E[I]=f[I];return E}return[]}function T(f,y){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(l(I)){const re=f.length||0,de=I.length||0;f.length=re+de;for(let Ve=0;Ve<de;Ve++)f[re+Ve]=I[Ve]}else f.push(I)}}function P(f){return/^[\s\xa0]*$/.test(f)}function $(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function ee(f){return ee[" "](f),f}ee[" "]=function(){};var _e=!(-1==$().indexOf("Gecko")||-1!=$().toLowerCase().indexOf("webkit")&&-1==$().indexOf("Edge")||-1!=$().indexOf("Trident")||-1!=$().indexOf("MSIE")||-1!=$().indexOf("Edge"));function xe(f,y,E){for(const I in f)y.call(E,f[I],I,f)}function R(f){const y={};for(const E in f)y[E]=f[E];return y}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(f,y){let E,I;for(let re=1;re<arguments.length;re++){for(E in I=arguments[re],I)f[E]=I[E];for(let de=0;de<O.length;de++)E=O[de],Object.prototype.hasOwnProperty.call(I,E)&&(f[E]=I[E])}}function N(f){var y=1;f=f.split(":");const E=[];for(;0<y&&f.length;)E.push(f.shift()),y--;return f.length&&E.push(f.join(":")),E}function U(f){a.setTimeout(()=>{throw f},0)}function F(){var f=st;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var Xs=new class B{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new Ze,f=>f.reset());class Ze{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,tt=!1,st=new class Ft{constructor(){this.h=this.g=null}add(y,E){const I=Xs.get();I.set(y,E),this.h?this.h.next=I:this.g=I,this.h=I}},bn=()=>{const f=a.Promise.resolve(void 0);Xe=()=>{f.then(Xn)}};var Xn=()=>{for(var f;f=F();){try{f.h.call(f.g)}catch(E){U(E)}var y=Xs;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}tt=!1};function On(){this.s=this.s,this.C=this.C}function Sn(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}On.prototype.s=!1,On.prototype.ma=function(){this.s||(this.s=!0,this.N())},On.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Sn.prototype.h=function(){this.defaultPrevented=!0};var pn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return f}();function Co(f,y){if(Sn.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,I=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(_e){e:{try{ee(y.nodeName);var re=!0;break e}catch{}re=!1}re||(y=null)}}else"mouseover"==E?y=f.fromElement:"mouseout"==E&&(y=f.toElement);this.relatedTarget=y,I?(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:k_[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Co.aa.h.call(this)}}C(Co,Sn);var k_={2:"touch",3:"pen",4:"mouse"};Co.prototype.h=function(){Co.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var lr="closure_listenable_"+(1e6*Math.random()|0),za=0;function ps(f,y,E,I,re){this.listener=f,this.proxy=null,this.src=y,this.type=E,this.capture=!!I,this.ha=re,this.key=++za,this.da=this.fa=!1}function Wa(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function gc(f){this.src=f,this.g={},this.h=0}function yk(f,y){var E=y.type;if(E in f.g){var de,I=f.g[E],re=Array.prototype.indexOf.call(I,y,void 0);(de=0<=re)&&Array.prototype.splice.call(I,re,1),de&&(Wa(y),0==f.g[E].length&&(delete f.g[E],f.h--))}}function vk(f,y,E,I){for(var re=0;re<f.length;++re){var de=f[re];if(!de.da&&de.listener==y&&de.capture==!!E&&de.ha==I)return re}return-1}gc.prototype.add=function(f,y,E,I,re){var de=f.toString();(f=this.g[de])||(f=this.g[de]=[],this.h++);var Ve=vk(f,y,I,re);return-1<Ve?(y=f[Ve],E||(y.fa=!1)):((y=new ps(y,this.src,de,!!I,re)).fa=E,f.push(y)),y};var wk="closure_lm_"+(1e6*Math.random()|0),Ek={};function az(f,y,E,I,re){if(I&&I.once)return cz(f,y,E,I,re);if(Array.isArray(y)){for(var de=0;de<y.length;de++)az(f,y[de],E,I,re);return null}return E=Tk(E),f&&f[lr]?f.K(y,E,c(I)?!!I.capture:!!I,re):lz(f,y,E,!1,I,re)}function lz(f,y,E,I,re,de){if(!y)throw Error("Invalid event type");var Ve=c(re)?!!re.capture:!!re,An=Dk(f);if(An||(f[wk]=An=new gc(f)),(E=An.add(y,E,I,Ve,de)).proxy)return E;if(I=function ofe(){const y=afe;return function f(E){return y.call(f.src,f.listener,E)}}(),E.proxy=I,I.src=f,I.listener=E,f.addEventListener)pn||(re=Ve),void 0===re&&(re=!1),f.addEventListener(y.toString(),I,re);else if(f.attachEvent)f.attachEvent(dz(y.toString()),I);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(I)}return E}function cz(f,y,E,I,re){if(Array.isArray(y)){for(var de=0;de<y.length;de++)cz(f,y[de],E,I,re);return null}return E=Tk(E),f&&f[lr]?f.L(y,E,c(I)?!!I.capture:!!I,re):lz(f,y,E,!0,I,re)}function uz(f,y,E,I,re){if(Array.isArray(y))for(var de=0;de<y.length;de++)uz(f,y[de],E,I,re);else I=c(I)?!!I.capture:!!I,E=Tk(E),f&&f[lr]?(f=f.i,(y=String(y).toString())in f.g&&-1<(E=vk(de=f.g[y],E,I,re))&&(Wa(de[E]),Array.prototype.splice.call(de,E,1),0==de.length&&(delete f.g[y],f.h--))):f&&(f=Dk(f))&&(y=f.g[y.toString()],f=-1,y&&(f=vk(y,E,I,re)),(E=-1<f?y[f]:null)&&Ck(E))}function Ck(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[lr])yk(y.i,f);else{var E=f.type,I=f.proxy;y.removeEventListener?y.removeEventListener(E,I,f.capture):y.detachEvent?y.detachEvent(dz(E),I):y.addListener&&y.removeListener&&y.removeListener(I),(E=Dk(y))?(yk(E,f),0==E.h&&(E.src=null,y[wk]=null)):Wa(f)}}}function dz(f){return f in Ek?Ek[f]:Ek[f]="on"+f}function afe(f,y){if(f.da)f=!0;else{y=new Co(y,this);var E=f.listener,I=f.ha||f.src;f.fa&&Ck(f),f=E.call(I,y)}return f}function Dk(f){return(f=f[wk])instanceof gc?f:null}var bk="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tk(f){return"function"==typeof f?f:(f[bk]||(f[bk]=function(y){return f.handleEvent(y)}),f[bk])}function xi(){On.call(this),this.i=new gc(this),this.M=this,this.F=null}function Zi(f,y){var E,I=f.F;if(I)for(E=[];I;I=I.F)E.push(I);if(f=f.M,I=y.type||y,"string"==typeof y)y=new Sn(y,f);else if(y instanceof Sn)y.target=y.target||f;else{var re=y;H(y=new Sn(I,f),re)}if(re=!0,E)for(var de=E.length-1;0<=de;de--){var Ve=y.g=E[de];re=ED(Ve,I,!0,y)&&re}if(re=ED(Ve=y.g=f,I,!0,y)&&re,re=ED(Ve,I,!1,y)&&re,E)for(de=0;de<E.length;de++)re=ED(Ve=y.g=E[de],I,!1,y)&&re}function ED(f,y,E,I){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var re=!0,de=0;de<y.length;++de){var Ve=y[de];if(Ve&&!Ve.da&&Ve.capture==E){var An=Ve.listener,fi=Ve.ha||Ve.src;Ve.fa&&yk(f.i,Ve),re=!1!==An.call(fi,I)&&re}}return re&&!I.defaultPrevented}function hz(f,y,E){if("function"==typeof f)E&&(f=_(f,E));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function fz(f){f.g=hz(()=>{f.g=null,f.i&&(f.i=!1,fz(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}C(xi,On),xi.prototype[lr]=!0,xi.prototype.removeEventListener=function(f,y,E,I){uz(this,f,y,E,I)},xi.prototype.N=function(){if(xi.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var E=f.g[y],I=0;I<E.length;I++)Wa(E[I]);delete f.g[y],f.h--}}this.F=null},xi.prototype.K=function(f,y,E,I){return this.i.add(String(f),y,!1,E,I)},xi.prototype.L=function(f,y,E,I){return this.i.add(String(f),y,!0,E,I)};class lfe extends On{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:fz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function x_(f){On.call(this),this.h=f,this.g={}}C(x_,On);var pz=[];function gz(f){xe(f.g,function(y,E){this.g.hasOwnProperty(E)&&Ck(y)},f),f.g={}}x_.prototype.N=function(){x_.aa.N.call(this),gz(this)},x_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ik=a.JSON.stringify,cfe=a.JSON.parse,ufe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Sk(){}function _z(){}Sk.prototype.h=null;var P_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ak(){Sn.call(this,"d")}function Mk(){Sn.call(this,"c")}C(Ak,Sn),C(Mk,Sn);var Ju={},yz=null;function CD(){return yz=yz||new xi}function vz(f){Sn.call(this,Ju.La,f)}function O_(f){const y=CD();Zi(y,new vz(y))}function wz(f,y){Sn.call(this,Ju.STAT_EVENT,f),this.stat=y}function Ki(f){const y=CD();Zi(y,new wz(y,f))}function Ez(f,y){Sn.call(this,Ju.Ma,f),this.size=y}function N_(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function F_(){this.g=!0}function Hf(f,y,E,I){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function pfe(f,y){if(!f.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E)for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var I=E[f];if(!(2>I.length)){var re=I[1];if(Array.isArray(re)&&!(1>re.length)){var de=re[0];if("noop"!=de&&"stop"!=de&&"close"!=de)for(var Ve=1;Ve<re.length;Ve++)re[Ve]=""}}}return Ik(E)}catch{return y}}(f,E)+(I?" "+I:"")})}Ju.La="serverreachability",C(vz,Sn),Ju.STAT_EVENT="statevent",C(wz,Sn),Ju.Ma="timingevent",C(Ez,Sn),F_.prototype.xa=function(){this.g=!1},F_.prototype.info=function(){};var Rk,DD={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function bD(){}function mc(f,y,E,I){this.j=f,this.i=y,this.l=E,this.R=I||1,this.U=new x_(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dz}function Dz(){this.i=null,this.g="",this.h=!1}C(bD,Sk),bD.prototype.g=function(){return new XMLHttpRequest},bD.prototype.i=function(){return{}},Rk=new bD;var bz={},kk={};function xk(f,y,E){f.L=1,f.v=AD(qa(y)),f.m=E,f.P=!0,Tz(f,null)}function Tz(f,y){f.F=Date.now(),TD(f),f.A=qa(f.v);var E=f.A,I=f.R;Array.isArray(I)||(I=[String(I)]),Bz(E.i,"t",I),f.C=0,E=f.j.J,f.h=new Dz,f.g=r6(f.j,E?y:null,!f.m),0<f.O&&(f.M=new lfe(_(f.Y,f,f.g),f.O)),y=f.U,E=f.g,I=f.ca;var re="readystatechange";Array.isArray(re)||(re&&(pz[0]=re.toString()),re=pz);for(var de=0;de<re.length;de++){var Ve=az(E,re[de],I||y.handleEvent,!1,y.h||y);if(!Ve)break;y.g[Ve.key]=Ve}y=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),O_(),function dfe(f,y,E,I,re,de){f.info(function(){if(f.g)if(de)for(var Ve="",An=de.split("&"),fi=0;fi<An.length;fi++){var en=An[fi].split("=");if(1<en.length){var Pi=en[0];en=en[1];var Oi=Pi.split("_");Ve=2<=Oi.length&&"type"==Oi[1]?Ve+(Pi+"=")+en+"&":Ve+(Pi+"=redacted&")}}else Ve=null;else Ve=de;return"XMLHTTP REQ ("+I+") [attempt "+re+"]: "+y+"\n"+E+"\n"+Ve})}(f.i,f.u,f.A,f.l,f.R,f.m)}function Iz(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function gfe(f,y){var E=f.C,I=y.indexOf("\n",E);return-1==I?kk:(E=Number(y.substring(E,I)),isNaN(E)?bz:(I+=1)+E>y.length?kk:(y=y.slice(I,I+E),f.C=I+E,y))}function TD(f){f.S=Date.now()+f.I,Sz(f,f.I)}function Sz(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=N_(_(f.ba,f),y)}function Pk(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function L_(f){0==f.j.G||f.J||Jz(f.j,f)}function ed(f){Pk(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,gz(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Ok(f,y){try{var E=f.j;if(0!=E.G&&(E.g==f||Nk(E.h,f)))if(!f.K&&Nk(E.h,f)&&3==E.G){try{var I=E.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&3==I.length){var re=I;if(0==re[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<f.F))break e;PD(E),kD(E)}Bk(E),Ki(18)}}else E.za=re[1],0<E.za-E.T&&37500>re[2]&&E.F&&0==E.v&&!E.C&&(E.C=N_(_(E.Za,E),6e3));if(1>=Rz(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else nd(E,11)}else if((f.K||E.g==f)&&PD(E),!P(y))for(re=E.Da.g.parse(y),y=0;y<re.length;y++){let en=re[y];if(E.T=en[0],en=en[1],2==E.G)if("c"==en[0]){E.K=en[1],E.ia=en[2];const Pi=en[3];null!=Pi&&(E.la=Pi,E.j.info("VER="+E.la));const Oi=en[4];null!=Oi&&(E.Aa=Oi,E.j.info("SVER="+E.Aa));const Wf=en[5];null!=Wf&&"number"==typeof Wf&&0<Wf&&(E.L=I=1.5*Wf,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const Do=f.g;if(Do){const ND=Do.g?Do.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ND){var de=I.h;de.g||-1==ND.indexOf("spdy")&&-1==ND.indexOf("quic")&&-1==ND.indexOf("h2")||(de.j=de.l,de.g=new Set,de.h&&(Fk(de,de.h),de.h=null))}if(I.D){const jk=Do.g?Do.g.getResponseHeader("X-HTTP-Session-Id"):null;jk&&(I.ya=jk,$n(I.I,I.D,jk))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ve=f;if((I=E).qa=n6(I,I.J?I.ia:null,I.W),Ve.K){kz(I.h,Ve);var An=Ve,fi=I.L;fi&&(An.I=fi),An.B&&(Pk(An),TD(An)),I.g=Ve}else Qz(I);0<E.i.length&&xD(E)}else"stop"!=en[0]&&"close"!=en[0]||nd(E,7);else 3==E.G&&("stop"==en[0]||"close"==en[0]?"stop"==en[0]?nd(E,7):Vk(E):"noop"!=en[0]&&E.l&&E.l.ta(en),E.v=0)}O_()}catch{}}function Az(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mz(f){return!!f.h||!!f.g&&f.g.size>=f.j}function Rz(f){return f.h?1:f.g?f.g.size:0}function Nk(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function Fk(f,y){f.g?f.g.add(y):f.h=y}function kz(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function xz(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const E of f.g.values())y=y.concat(E.D);return y}return b(f.i)}function Pz(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(l(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var E=function yfe(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||"string"==typeof f){var y=[];f=f.length;for(var E=0;E<f;E++)y.push(E);return y}y=[],E=0;for(const I in f)y[E++]=I;return y}}}(f),I=function _fe(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(l(f)){for(var y=[],E=f.length,I=0;I<E;I++)y.push(f[I]);return y}for(I in y=[],E=0,f)y[E++]=f[I];return y}(f),re=I.length,de=0;de<re;de++)y.call(void 0,I[de],E&&E[de],f)}mc.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==Ga(f)?y.j():this.Y(f)},mc.prototype.Y=function(f){try{if(f==this.g)e:{const Oi=Ga(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>Oi)&&(3!=Oi||this.g&&(this.h.h||this.g.oa()||qz(this.g)))){this.J||4!=Oi||7==y||O_(),Pk(this);var E=this.g.Z();this.X=E;t:if(Iz(this)){var I=qz(this.g);f="";var re=I.length,de=4==Ga(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ed(this),L_(this);var Ve="";break t}this.h.i=new a.TextDecoder}for(y=0;y<re;y++)this.h.h=!0,f+=this.h.i.decode(I[y],{stream:!(de&&y==re-1)});I.length=0,this.h.g+=f,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=200==E,function hfe(f,y,E,I,re,de,Ve){f.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+re+"]: "+y+"\n"+E+"\n"+de+" "+Ve})}(this.i,this.u,this.A,this.l,this.R,Oi,E),this.o){if(this.T&&!this.K){t:{if(this.g){var An,fi=this.g;if((An=fi.g?fi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(An)){var en=An;break t}}en=null}if(!(E=en)){this.o=!1,this.s=3,Ki(12),ed(this),L_(this);break e}Hf(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ok(this,E)}if(this.P){let Do;for(E=!0;!this.J&&this.C<Ve.length;){if(Do=gfe(this,Ve),Do==kk){4==Oi&&(this.s=4,Ki(14),E=!1),Hf(this.i,this.l,null,"[Incomplete Response]");break}if(Do==bz){this.s=4,Ki(15),Hf(this.i,this.l,Ve,"[Invalid Chunk]"),E=!1;break}Hf(this.i,this.l,Do,null),Ok(this,Do)}if(Iz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Oi||0!=Ve.length||this.h.h||(this.s=1,Ki(16),E=!1),this.o=this.o&&E,E){if(0<Ve.length&&!this.W){this.W=!0;var Pi=this.j;Pi.g==this&&Pi.ba&&!Pi.M&&(Pi.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),Uk(Pi),Pi.M=!0,Ki(11))}}else Hf(this.i,this.l,Ve,"[Invalid Chunked Response]"),ed(this),L_(this)}else Hf(this.i,this.l,Ve,null),Ok(this,Ve);4==Oi&&ed(this),this.o&&!this.J&&(4==Oi?Jz(this.j,this):(this.o=!1,TD(this)))}else(function xfe(f){const y={};f=(f.g&&2<=Ga(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let I=0;I<f.length;I++){if(P(f[I]))continue;var E=N(f[I]);const re=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const de=y[re]||[];y[re]=de,de.push(E)}!function j(f,y){for(const E in f)y.call(void 0,f[E],E,f)}(y,function(I){return I.join(", ")})})(this.g),400==E&&0<Ve.indexOf("Unknown SID")?(this.s=3,Ki(12)):(this.s=0,Ki(13)),ed(this),L_(this)}}}catch{}},mc.prototype.cancel=function(){this.J=!0,ed(this)},mc.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function ffe(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(O_(),Ki(17)),ed(this),this.s=2,L_(this)):Sz(this,this.S-f)},Az.prototype.cancel=function(){if(this.i=xz(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var Oz=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function td(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof td){this.h=f.h,ID(this,f.j),this.o=f.o,this.g=f.g,SD(this,f.s),this.l=f.l;var y=f.i,E=new U_;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Nz(this,E),this.m=f.m}else f&&(y=String(f).match(Oz))?(this.h=!1,ID(this,y[1]||"",!0),this.o=V_(y[2]||""),this.g=V_(y[3]||"",!0),SD(this,y[4]),this.l=V_(y[5]||"",!0),Nz(this,y[6]||"",!0),this.m=V_(y[7]||"")):(this.h=!1,this.i=new U_(null,this.h))}function qa(f){return new td(f)}function ID(f,y,E){f.j=E?V_(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function SD(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Nz(f,y,E){y instanceof U_?(f.i=y,function Tfe(f,y){y&&!f.j&&(_c(f),f.i=null,f.g.forEach(function(E,I){var re=I.toLowerCase();I!=re&&(Lz(this,I),Bz(this,re,E))},f)),f.j=y}(f.i,f.h)):(E||(y=B_(y,Dfe)),f.i=new U_(y,f.h))}function $n(f,y,E){f.i.set(y,E)}function AD(f){return $n(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function V_(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function B_(f,y,E){return"string"==typeof f?(f=encodeURI(f).replace(y,wfe),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function wfe(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}td.prototype.toString=function(){var f=[],y=this.j;y&&f.push(B_(y,Fz,!0),":");var E=this.g;return(E||"file"==y)&&(f.push("//"),(y=this.o)&&f.push(B_(y,Fz,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&f.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&f.push("/"),f.push(B_(E,"/"==E.charAt(0)?Cfe:Efe,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",B_(E,bfe)),f.join("")};var f,Fz=/[#\/\?@]/g,Efe=/[#\?:]/g,Cfe=/[#\?]/g,Dfe=/[#\?@]/g,bfe=/#/g;function U_(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function _c(f){f.g||(f.g=new Map,f.h=0,f.i&&function vfe(f,y){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var I=f[E].indexOf("="),re=null;if(0<=I){var de=f[E].substring(0,I);re=f[E].substring(I+1)}else de=f[E];y(de,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}(f.i,function(y,E){f.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}function Lz(f,y){_c(f),y=$f(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Vz(f,y){return _c(f),y=$f(f,y),f.g.has(y)}function Bz(f,y,E){Lz(f,y),0<E.length&&(f.i=null,f.g.set($f(f,y),b(E)),f.h+=E.length)}function $f(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function yc(f,y,E,I,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),I(E)}catch{}}function Afe(){this.g=new ufe}function Mfe(f,y,E){const I=E||"";try{Pz(f,function(re,de){let Ve=re;c(re)&&(Ve=Ik(re)),y.push(I+de+"="+encodeURIComponent(Ve))})}catch(re){throw y.push(I+"type="+encodeURIComponent("_badmap")),re}}function j_(f){this.l=f.Ub||null,this.j=f.eb||!1}function MD(f,y){xi.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Uz(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function H_(f){f.readyState=4,f.l=null,f.j=null,f.v=null,$_(f)}function $_(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function jz(f){let y="";return xe(f,function(E,I){y+=I,y+=":",y+=E,y+="\r\n"}),y}function Lk(f,y,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=jz(E),"string"==typeof f?null!=E&&encodeURIComponent(String(E)):$n(f,y,E))}function cr(f){xi.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=U_.prototype).add=function(f,y){_c(this),this.i=null,f=$f(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(y),this.h+=1,this},n.forEach=function(f,y){_c(this),this.g.forEach(function(E,I){E.forEach(function(re){f.call(y,re,I,this)},this)},this)},n.na=function(){_c(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let I=0;I<y.length;I++){const re=f[I];for(let de=0;de<re.length;de++)E.push(y[I])}return E},n.V=function(f){_c(this);let y=[];if("string"==typeof f)Vz(this,f)&&(y=y.concat(this.g.get($f(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)y=y.concat(f[E])}return y},n.set=function(f,y){return _c(this),this.i=null,Vz(this,f=$f(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var I=y[E];const de=encodeURIComponent(String(I)),Ve=this.V(I);for(I=0;I<Ve.length;I++){var re=de;""!==Ve[I]&&(re+="="+encodeURIComponent(String(Ve[I]))),f.push(re)}}return this.i=f.join("&")},C(j_,Sk),j_.prototype.g=function(){return new MD(this.l,this.j)},j_.prototype.i=(f={},function(){return f}),C(MD,xi),(n=MD.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,$_(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,H_(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,$_(this)),this.g&&(this.readyState=3,$_(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uz(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?H_(this):$_(this),3==this.readyState&&Uz(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,H_(this))},n.Qa=function(f){this.g&&(this.response=f,H_(this))},n.ga=function(){this.g&&H_(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var E=y.next();!E.done;)f.push((E=E.value)[0]+": "+E[1]),E=y.next();return f.join("\r\n")},Object.defineProperty(MD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),C(cr,xi);var Rfe=/^https?$/i,kfe=["POST","PUT"];function Hz(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,$z(f),RD(f)}function $z(f){f.A||(f.A=!0,Zi(f,"complete"),Zi(f,"error"))}function zz(f){if(f.h&&typeof o<"u"&&(!f.v[1]||4!=Ga(f)||2!=f.Z()))if(f.u&&4==Ga(f))hz(f.Ea,0,f);else if(Zi(f,"readystatechange"),4==Ga(f)){f.h=!1;try{const Ve=f.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var I;if(I=0===Ve){var re=String(f.D).match(Oz)[1]||null;!re&&a.self&&a.self.location&&(re=a.self.location.protocol.slice(0,-1)),I=!Rfe.test(re?re.toLowerCase():"")}E=I}if(E)Zi(f,"complete"),Zi(f,"success");else{f.m=6;try{var de=2<Ga(f)?f.g.statusText:""}catch{de=""}f.l=de+" ["+f.Z()+"]",$z(f)}}finally{RD(f)}}}function RD(f,y){if(f.g){Wz(f);const E=f.g,I=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Zi(f,"ready");try{E.onreadystatechange=I}catch{}}}function Wz(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function Ga(f){return f.g?f.g.readyState:0}function qz(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function z_(f,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||y}function Gz(f){this.Aa=0,this.i=[],this.j=new F_,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=z_("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=z_("baseRetryDelayMs",5e3,f),this.cb=z_("retryDelaySeedMs",1e4,f),this.Wa=z_("forwardChannelMaxRetries",2,f),this.wa=z_("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Az(f&&f.concurrentRequestLimit),this.Da=new Afe,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Vk(f){if(Zz(f),3==f.G){var y=f.U++,E=qa(f.I);if($n(E,"SID",f.K),$n(E,"RID",y),$n(E,"TYPE","terminate"),W_(f,E),(y=new mc(f,f.j,y)).L=2,y.v=AD(qa(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=y.v,E=!0),E||(y.g=r6(y.j,null),y.g.ea(y.v)),y.F=Date.now(),TD(y)}t6(f)}function kD(f){f.g&&(Uk(f),f.g.cancel(),f.g=null)}function Zz(f){kD(f),f.u&&(a.clearTimeout(f.u),f.u=null),PD(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function xD(f){if(!Mz(f.h)&&!f.s){f.s=!0;var y=f.Ga;Xe||bn(),tt||(Xe(),tt=!0),st.add(y,f),f.B=0}}function Kz(f,y){var E;E=y?y.l:f.U++;const I=qa(f.I);$n(I,"SID",f.K),$n(I,"RID",E),$n(I,"AID",f.T),W_(f,I),f.m&&f.o&&Lk(I,f.m,f.o),E=new mc(f,f.j,E,f.B+1),null===f.m&&(E.H=f.o),y&&(f.i=y.D.concat(f.i)),y=Yz(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Fk(f.h,E),xk(E,I,y)}function W_(f,y){f.H&&xe(f.H,function(E,I){$n(y,I,E)}),f.l&&Pz({},function(E,I){$n(y,I,E)})}function Yz(f,y,E){E=Math.min(f.i.length,E);var I=f.l?_(f.l.Na,f.l,f):null;e:{var re=f.i;let de=-1;for(;;){const Ve=["count="+E];-1==de?0<E?(de=re[0].g,Ve.push("ofs="+de)):de=0:Ve.push("ofs="+de);let An=!0;for(let fi=0;fi<E;fi++){let en=re[fi].g;const Pi=re[fi].map;if(en-=de,0>en)de=Math.max(0,re[fi].g-100),An=!1;else try{Mfe(Pi,Ve,"req"+en+"_")}catch{I&&I(Pi)}}if(An){I=Ve.join("&");break e}}}return f=f.i.splice(0,E),y.D=f,I}function Qz(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Xe||bn(),tt||(Xe(),tt=!0),st.add(y,f),f.v=0}}function Bk(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=N_(_(f.Fa,f),e6(f,f.v)),f.v++,0))}function Uk(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function Xz(f){f.g=new mc(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=qa(f.qa);$n(y,"RID","rpc"),$n(y,"SID",f.K),$n(y,"AID",f.T),$n(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&$n(y,"TO",f.ja),$n(y,"TYPE","xmlhttp"),W_(f,y),f.m&&f.o&&Lk(y,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=AD(qa(y)),E.m=null,E.P=!0,Tz(E,f)}function PD(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function Jz(f,y){var E=null;if(f.g==y){PD(f),Uk(f),f.g=null;var I=2}else{if(!Nk(f.h,y))return;E=y.D,kz(f.h,y),I=1}if(0!=f.G)if(y.o)if(1==I){E=y.m?y.m.length:0,y=Date.now()-y.F;var re=f.B;Zi(I=CD(),new Ez(I,E)),xD(f)}else Qz(f);else if(3==(re=y.s)||0==re&&0<y.X||!(1==I&&function Pfe(f,y){return!(Rz(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=N_(_(f.Ga,f,y),e6(f,f.B)),f.B++,0)))}(f,y)||2==I&&Bk(f)))switch(E&&0<E.length&&(y=f.h,y.i=y.i.concat(E)),re){case 1:nd(f,5);break;case 4:nd(f,10);break;case 3:nd(f,6);break;default:nd(f,2)}}function e6(f,y){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*y}function nd(f,y){if(f.j.info("Error code "+y),2==y){var E=_(f.fb,f),I=f.Xa;const re=!I;I=new td(I||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||ID(I,"https"),AD(I),re?function Ife(f,y){const E=new F_;if(a.Image){const I=new Image;I.onload=v(yc,E,"TestLoadImage: loaded",!0,y,I),I.onerror=v(yc,E,"TestLoadImage: error",!1,y,I),I.onabort=v(yc,E,"TestLoadImage: abort",!1,y,I),I.ontimeout=v(yc,E,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=f}else y(!1)}(I.toString(),E):function Sfe(f,y){new F_;const I=new AbortController,re=setTimeout(()=>{I.abort(),yc(0,0,!1,y)},1e4);fetch(f,{signal:I.signal}).then(de=>{clearTimeout(re),yc(0,0,!!de.ok,y)}).catch(()=>{clearTimeout(re),yc(0,0,!1,y)})}(I.toString(),E)}else Ki(2);f.G=0,f.l&&f.l.sa(y),t6(f),Zz(f)}function t6(f){if(f.G=0,f.ka=[],f.l){const y=xz(f.h);(0!=y.length||0!=f.i.length)&&(T(f.ka,y),T(f.ka,f.i),f.h.i.length=0,b(f.i),f.i.length=0),f.l.ra()}}function n6(f,y,E){var I=E instanceof td?qa(E):new td(E);if(""!=I.g)y&&(I.g=y+"."+I.g),SD(I,I.s);else{var re=a.location;I=re.protocol,y=y?y+"."+re.hostname:re.hostname,re=+re.port;var de=new td(null);I&&ID(de,I),y&&(de.g=y),re&&SD(de,re),E&&(de.l=E),I=de}return y=f.ya,(E=f.D)&&y&&$n(I,E,y),$n(I,"VER",f.la),W_(f,I),I}function r6(f,y,E){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new cr(f.Ca&&!f.pa?new j_({eb:E}):f.pa)).Ha(f.J),y}function i6(){}function OD(){}function xs(f,y){xi.call(this),this.g=new Gz(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!P(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new zf(this)}function s6(f){Ak.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const E in y){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function o6(){Mk.call(this),this.status=1}function zf(f){this.g=f}(n=cr.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rk.g(),this.v=function mz(f){return f.h||(f.h=f.i())}(this.o?this.o:Rk),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(de){return void Hz(this,de)}if(f=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var re in I)E.set(re,I[re]);else{if("function"!=typeof I.keys||"function"!=typeof I.get)throw Error("Unknown input type for opt_headers: "+String(I));for(const de of I.keys())E.set(de,I.get(de))}I=Array.from(E.keys()).find(de=>"content-type"==de.toLowerCase()),re=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kfe,y,void 0))||I||re||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Ve]of E)this.g.setRequestHeader(de,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wz(this),this.u=!0,this.g.send(f),this.u=!1}catch(de){Hz(this,de)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Zi(this,"complete"),Zi(this,"abort"),RD(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),RD(this,!0)),cr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zz(this):this.bb())},n.bb=function(){zz(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ga(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),cfe(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Gz.prototype).la=8,n.G=1,n.connect=function(f,y,E,I){Ki(0),this.W=f,this.H=y||{},E&&void 0!==I&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=n6(this,null,this.W),xD(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const re=new mc(this,this.j,f);let de=this.o;if(this.S&&(de?(de=R(de),H(de,this.S)):de=this.S),null!==this.m||this.O||(re.H=de,de=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){var I=this.i[E];if(void 0===(I="__data__"in I.map&&"string"==typeof(I=I.map.__data__)?I.length:void 0))break;if(4096<(y+=I)){y=E;break e}if(4096===y||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Yz(this,re,y),$n(E=qa(this.I),"RID",f),$n(E,"CVER",22),this.D&&$n(E,"X-HTTP-Session-Id",this.D),W_(this,E),de&&(this.O?y="headers="+encodeURIComponent(String(jz(de)))+"&"+y:this.m&&Lk(E,this.m,de)),Fk(this.h,re),this.Ua&&$n(E,"TYPE","init"),this.P?($n(E,"$req",y),$n(E,"SID","null"),re.T=!0,xk(re,E,null)):xk(re,E,y),this.G=2}}else 3==this.G&&(f?Kz(this,f):0==this.i.length||Mz(this.h)||Kz(this))},n.Fa=function(){if(this.u=null,Xz(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=N_(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ki(10),kD(this),Xz(this))},n.Za=function(){null!=this.C&&(this.C=null,kD(this),Bk(this),Ki(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ki(2)):(this.j.info("Failed to ping google.com"),Ki(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=i6.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},OD.prototype.g=function(f,y){return new xs(f,y)},C(xs,xi),xs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xs.prototype.close=function(){Vk(this.g)},xs.prototype.o=function(f){var y=this.g;if("string"==typeof f){var E={};E.__data__=f,f=E}else this.u&&((E={}).__data__=Ik(f),f=E);y.i.push(new class{constructor(f,y){this.g=f,this.map=y}}(y.Ya++,f)),3==y.G&&xD(y)},xs.prototype.N=function(){this.g.l=null,delete this.j,Vk(this.g),delete this.g,xs.aa.N.call(this)},C(s6,Ak),C(o6,Mk),C(zf,i6),zf.prototype.ua=function(){Zi(this.g,"a")},zf.prototype.ta=function(f){Zi(this.g,new s6(f))},zf.prototype.sa=function(f){Zi(this.g,new o6)},zf.prototype.ra=function(){Zi(this.g,"b")},OD.prototype.createWebChannel=OD.prototype.g,xs.prototype.send=xs.prototype.o,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,zU=Oa.createWebChannelTransport=function(){return new OD},$U=Oa.getStatEventTarget=function(){return CD()},HU=Oa.Event=Ju,FA=Oa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},DD.NO_ERROR=0,DD.TIMEOUT=8,DD.HTTP_ERROR=6,mC=Oa.ErrorCode=DD,Cz.COMPLETE="complete",jU=Oa.EventType=Cz,_z.EventType=P_,P_.OPEN="a",P_.CLOSE="b",P_.ERROR="c",P_.MESSAGE="d",xi.prototype.listen=xi.prototype.K,Lm=Oa.WebChannel=_z,UU=Oa.FetchXmlHttpFactory=j_,cr.prototype.listenOnce=cr.prototype.L,cr.prototype.getLastError=cr.prototype.Ka,cr.prototype.getLastErrorCode=cr.prototype.Ba,cr.prototype.getStatus=cr.prototype.Z,cr.prototype.getResponseJson=cr.prototype.Oa,cr.prototype.getResponseText=cr.prototype.oa,cr.prototype.send=cr.prototype.ea,cr.prototype.setWithCredentials=cr.prototype.Ha,BU=Oa.XhrIo=cr}).apply(typeof gC<"u"?gC:typeof self<"u"?self:typeof window<"u"?window:{});const WU="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let tf="10.12.1";const Yl=new Yo.Yd("@firebase/firestore");function nf(){return Yl.logLevel}function Ae(n,...e){if(Yl.logLevel<=Yo.in.DEBUG){const t=e.map(LA);Yl.debug(`Firestore (${tf}): ${n}`,...t)}}function Cr(n,...e){if(Yl.logLevel<=Yo.in.ERROR){const t=e.map(LA);Yl.error(`Firestore (${tf}): ${n}`,...t)}}function ds(n,...e){if(Yl.logLevel<=Yo.in.WARN){const t=e.map(LA);Yl.warn(`Firestore (${tf}): ${n}`,...t)}}function LA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ge(n="Unexpected state"){const e=`FIRESTORE (${tf}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function Je(n,e){n||Ge()}function Le(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class kae{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xae{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,pe.Z)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je("string"==typeof r.accessToken),new qU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Je(null===e||"string"==typeof e),new ti(e)}}class Pae{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Oae{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Pae(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nae{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je("string"==typeof t.token),this.R=t.token,new GU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Fae(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ZU{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Fae(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function _t(n,e){return n<e?-1:n>e?1:0}function rf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function KU(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new et(e)}static min(){return new et(new Kn(0,0))}static max(){return new et(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vm{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ge(),void 0===r?r=e.length-t:r>e.length-t&&Ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ut extends Vm{construct(e,t,r){return new Ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ut(t)}static emptyPath(){return new Ut([])}}const Lae=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Vm{construct(e,t,r){return new Un(e,t,r)}static isValidIdentifier(e){return Lae.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Un(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Te(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Te(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Te(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Te(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ut.fromString(e))}static fromName(e){return new Be(Ut.fromString(e).popFirst(5))}static empty(){return new Be(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ut.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ut(e.slice()))}}class sf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function VA(n){return n.fields.find(e=>2===e.kind)}function xu(n){return n.fields.filter(e=>2!==e.kind)}sf.UNKNOWN_ID=-1;class Pu{constructor(e,t){this.fieldPath=e,this.kind=t}}class af{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new af(0,Rs.min())}}function YU(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=et.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new Rs(i,Be.empty(),e)}function QU(n){return new Rs(n.readTime,n.key,-1)}class Rs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Rs(et.min(),Be.empty(),-1)}static max(){return new Rs(et.max(),Be.empty(),-1)}}function BA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:_t(n.largestBatchId,e.largestBatchId))}const XU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ql(n){return UA.apply(this,arguments)}function UA(){return(UA=(0,pe.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==XU)throw n;Ae("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new se((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class _C{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new qr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Bm(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=jA(r.target.error);this.V.reject(new Bm(e,i))}}static open(e,t,r,i){try{return new _C(t,e.transaction(i,r))}catch(s){throw new Bm(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jae(t)}}class Qo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Qo.S((0,an.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),Ou(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,an.hl)())return!1;if(Qo.C())return!0;const e=(0,an.z$)(),t=Qo.S(e),r=0<t&&t<10,i=ej(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Bm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Te(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Te(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Bm(e,a))},s.onupgradeneeded=o=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,pe.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=_C.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),se.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(Ae("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function ej(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Uae{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ou(this.B.delete())}}class Bm extends Te{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xl(n){return"IndexedDbTransactionError"===n.name}class jae{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ou(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),Ou(this.store.add(e))}get(e){return Ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),Ou(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),Ou(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new se((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=s=>{const o=jA(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new se((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Uae(a),c=t(a.primaryKey,a.value,l);if(c instanceof se){const h=c.catch(m=>(l.done(),se.reject(m)));r.push(h)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ou(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=jA(r.target.error);t(i)}})}let tj=!1;function jA(n){const e=Qo.S((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tj||(tj=!0,setTimeout(()=>{throw r},0)),r}}return n}class Hae{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Ae("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Xl(r)?Ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Ql(r)}yield t.X(6e4)}))}}class $ae{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return se.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ae("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ae("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=QU(s);BA(o,r)>0&&(r=o)}),new Rs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ks=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Um(n){return null==n}function jm(n){return 0===n&&1/n==-1/0}function nj(n){return"number"==typeof n&&Number.isInteger(n)&&!jm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rj(e)),e=zae(n.get(t),e);return rj(e)}function zae(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function rj(n){return n+"\x01\x01"}function Xo(n){const e=n.length;if(Je(e>=2),2===e)return Je("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ut.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ge(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ge()}s=o+2}return new Ut(r)}const ij=["userId","batchId"];function yC(n,e){return[n,Ai(e)]}function sj(n,e,t){return[n,Ai(e),t]}const Wae={},qae=["prefixPath","collectionGroup","readTime","documentId"],Gae=["prefixPath","collectionGroup","documentId"],Zae=["collectionGroup","readTime","prefixPath","documentId"],Kae=["canonicalId","targetId"],Yae=["targetId","path"],Qae=["path","targetId"],Xae=["collectionId","parent"],Jae=["indexId","uid"],ele=["uid","sequenceNumber"],tle=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nle=["indexId","uid","orderedDocumentKey"],rle=["userId","collectionPath","documentId"],ile=["userId","collectionPath","largestBatchId"],sle=["userId","collectionGroup","largestBatchId"],oj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ole=[...oj,"documentOverlays"],aj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lj=aj,cj=[...lj,"indexConfiguration","indexState","indexEntries"],ale=cj;class HA extends JU{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ni(n,e){const t=Le(n);return Qo.F(t._e,e)}function uj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vC(this.root,e,this.comparator,!1)}getReverseIterator(){return new vC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vC(this.root,e,this.comparator,!0)}}class vC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ui.RED,this.left=i??ui.EMPTY,this.right=s??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ui(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ge();const e=this.left.check();if(e!==this.right.check())throw Ge();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge()}get value(){throw Ge()}get color(){throw Ge()}get left(){throw Ge()}get right(){throw Ge()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ui(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fj(this.data.getIterator())}getIteratorFrom(e){return new fj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class fj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lf(n){return n.hasNext()?n.getNext():void 0}class hs{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new hs([])}unionWith(e){let t=new Cn(Un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pj("Invalid base64 string: "+s):s}}(e);return new Gr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const cle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(n){if(Je(!!n),"string"==typeof n){let e=0;const t=cle.exec(n);if(Je(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fa(n){return"string"==typeof n?Gr.fromBase64String(n):Gr.fromUint8Array(n)}function wC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function EC(n){const e=n.mapValue.fields.__previous_value__;return wC(e)?EC(e):e}function Hm(n){const e=Na(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class ule{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ec{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ec("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}const tc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CC={nullValue:"NULL_VALUE"};function nc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wC(n)?4:yj(n)?9007199254740991:10:Ge()}function Jo(n,e){if(n===e)return!0;const t=nc(n);if(t!==nc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hm(n).isEqual(Hm(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Na(i.timestampValue),a=Na(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Fa(n.bytesValue).isEqual(Fa(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ar(i.geoPointValue.latitude)===ar(s.geoPointValue.latitude)&&ar(i.geoPointValue.longitude)===ar(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ar(i.integerValue)===ar(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ar(i.doubleValue),a=ar(s.doubleValue);return o===a?jm(o)===jm(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return rf(n.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uj(o)!==uj(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Jo(o[l],a[l])))return!1;return!0}(n,e);default:return Ge()}var s}function $m(n,e){return void 0!==(n.values||[]).find(t=>Jo(t,e))}function rc(n,e){if(n===e)return 0;const t=nc(n),r=nc(e);if(t!==r)return _t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _t(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ar(s.integerValue||s.doubleValue),l=ar(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return gj(n.timestampValue,e.timestampValue);case 4:return gj(Hm(n),Hm(e));case 5:return _t(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Fa(s),l=Fa(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=_t(a[c],l[c]);if(0!==h)return h}return _t(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=_t(ar(s.latitude),ar(o.latitude));return 0!==a?a:_t(ar(s.longitude),ar(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=rc(a[c],l[c]);if(h)return h}return _t(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===tc.mapValue&&o===tc.mapValue)return 0;if(s===tc.mapValue)return 1;if(o===tc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const _=_t(l[m],h[m]);if(0!==_)return _;const v=rc(a[l[m]],c[h[m]]);if(0!==v)return v}return _t(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Ge()}}function gj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return _t(n,e);const t=Na(n),r=Na(e),i=_t(t.seconds,r.seconds);return 0!==i?i:_t(t.nanos,r.nanos)}function cf(n){return $A(n)}function $A(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Na(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fa(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=$A(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$A(t.fields[o])}`;return i+"}"}(n.mapValue):Ge()}function Nu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zA(n){return!!n&&"integerValue"in n}function zm(n){return!!n&&"arrayValue"in n}function mj(n){return!!n&&"nullValue"in n}function _j(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bC(n){return!!n&&"mapValue"in n}function Wm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dle(n){return"nullValue"in n?CC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nu(ec.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ge()}function hle(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nu(ec.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tc:Ge()}function vj(n,e){const t=rc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function wj(n,e){const t=rc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wm(t)}setAll(e){let t=Un.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Wm(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());bC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new di(Wm(this.value))}}function Ej(n){const e=[];return Jl(n.fields,(t,r)=>{const i=new Un([t]);if(bC(r)){const s=Ej(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hs(e)}class jn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jn(e,0,et.min(),et.min(),et.min(),di.empty(),0)}static newFoundDocument(e,t,r,i){return new jn(e,1,t,et.min(),r,i,0)}static newNoDocument(e,t){return new jn(e,2,t,et.min(),et.min(),di.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,et.min(),et.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ic{constructor(e,t){this.position=e,this.inclusive=t}}function Cj(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Be.comparator(Be.fromName(o.referenceValue),t.key):rc(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Dj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jo(n.position[t],e.position[t]))return!1;return!0}class qm{constructor(e,t="asc"){this.field=e,this.dir=t}}function fle(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class bj{}class jt extends bj{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ple(e,t,r):"array-contains"===t?new _le(e,r):"in"===t?new Rj(e,r):"not-in"===t?new yle(e,r):"array-contains-any"===t?new vle(e,r):new jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new gle(e,r):new mle(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(rc(t,this.value)):null!==t&&nc(this.value)===nc(t)&&this.matchesComparison(rc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends bj{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fn(e,t)}matches(e){return uf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uf(n){return"and"===n.op}function WA(n){return"or"===n.op}function qA(n){return Tj(n)&&uf(n)}function Tj(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function GA(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+cf(n.value);if(qA(n))return n.filters.map(e=>GA(e)).join(",");{const e=n.filters.map(t=>GA(t)).join(",");return`${n.op}(${e})`}}function Ij(n,e){return n instanceof jt?(r=n,(i=e)instanceof jt&&r.op===i.op&&r.field.isEqual(i.field)&&Jo(r.value,i.value)):n instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Ij(o,i.filters[a]),!0)}(n,e):void Ge();var r,i}function Sj(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function Aj(n){return n instanceof jt?`${(t=n).field.canonicalString()} ${t.op} ${cf(t.value)}`:n instanceof fn?function(t){return t.op.toString()+" {"+t.getFilters().map(Aj).join(" ,")+"}"}(n):"Filter";var t}class ple extends jt{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class gle extends jt{constructor(e,t){super(e,"in",t),this.keys=Mj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mle extends jt{constructor(e,t){super(e,"not-in",t),this.keys=Mj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class _le extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zm(t)&&$m(t.arrayValue,this.value)}}class Rj extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$m(this.value.arrayValue,t)}}class yle extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if($m(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$m(this.value.arrayValue,t)}}class vle extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$m(this.value.arrayValue,r))}}class wle{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ZA(n,e=null,t=[],r=[],i=null,s=null,o=null){return new wle(n,e,t,r,i,s,o)}function Fu(n){const e=Le(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>GA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Um(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cf(r)).join(",")),e.ue=t}return e.ue}function Gm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fle(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ij(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dj(n.startAt,e.startAt)&&Dj(n.endAt,e.endAt)}function TC(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function IC(n,e){return n.filters.filter(t=>t instanceof jt&&t.field.isEqual(e))}function kj(n,e,t){let r=CC,i=!0;for(const s of IC(n,e)){let o=CC,a=!0;switch(s.op){case"<":case"<=":o=dle(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=CC}vj({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];vj({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function xj(n,e,t){let r=tc,i=!0;for(const s of IC(n,e)){let o=tc,a=!0;switch(s.op){case">=":case">":o=hle(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=tc}wj({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];wj({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class La{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function Pj(n,e,t,r,i,s,o,a){return new La(n,e,t,r,i,s,o,a)}function df(n){return new La(n)}function Oj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function KA(n){return null!==n.collectionGroup}function hf(n){const e=Le(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Cn(Un.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new qm(s,r))}),t.has(Un.keyField().canonicalString())||e.ce.push(new qm(Un.keyField(),r))}return e.ce}function Mi(n){const e=Le(n);return e.le||(e.le=function Fj(n,e){if("F"===n.limitType)return ZA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new qm(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ic(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ic(n.startAt.position,n.startAt.inclusive):null;return ZA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,hf(n))),e.le}function YA(n,e){const t=n.filters.concat([e]);return new La(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function SC(n,e,t){return new La(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zm(n,e){return Gm(Mi(n),Mi(e))&&n.limitType===e.limitType}function Lj(n){return`${Fu(Mi(n))}|lt:${n.limitType}`}function ff(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Aj(i)).join(", ")}]`),Um(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cf(i)).join(",")),`Target(${r})`}(Mi(n))}; limitType=${n.limitType})`}function Km(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of hf(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=Cj(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hf(r),i)||r.endAt&&!function(o,a,l){const c=Cj(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hf(r),i)));var r,i}function Vj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Bj(n){return(e,t)=>{let r=!1;for(const i of hf(n)){const s=Ele(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Ele(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?rc(l,c):Ge()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ge()}}class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return hj(this.inner)}size(){return this.innerSize}}const Cle=new Pn(Be.comparator);function fs(){return Cle}const Uj=new Pn(Be.comparator);function Ym(...n){let e=Uj;for(const t of n)e=e.insert(t.key,t);return e}function jj(n){let e=Uj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ea(){return Qm()}function Hj(){return Qm()}function Qm(){return new Va(n=>n.toString(),(n,e)=>n.isEqual(e))}const Dle=new Pn(Be.comparator),ble=new Cn(Be.comparator);function bt(...n){let e=ble;for(const t of n)e=e.add(t);return e}const Tle=new Cn(_t);function QA(){return Tle}function $j(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jm(e)?"-0":e}}function zj(n){return{integerValue:""+n}}function Wj(n,e){return nj(e)?zj(e):$j(n,e)}class AC{constructor(){this._=void 0}}function Ile(n,e,t){return n instanceof pf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wC(s)&&(s=EC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Lu?Gj(n,e):n instanceof Vu?Zj(n,e):function(i,s){const o=qj(i,s),a=Kj(o)+Kj(i.Pe);return zA(o)&&zA(i.Pe)?zj(a):$j(i.serializer,a)}(n,e)}function Sle(n,e,t){return n instanceof Lu?Gj(n,e):n instanceof Vu?Zj(n,e):t}function qj(n,e){return n instanceof gf?zA(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class pf extends AC{}class Lu extends AC{constructor(e){super(),this.elements=e}}function Gj(n,e){const t=Yj(e);for(const r of n.elements)t.some(i=>Jo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Vu extends AC{constructor(e){super(),this.elements=e}}function Zj(n,e){let t=Yj(e);for(const r of n.elements)t=t.filter(i=>!Jo(i,r));return{arrayValue:{values:t}}}class gf extends AC{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Kj(n){return ar(n.integerValue||n.doubleValue)}function Yj(n){return zm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xm{constructor(e,t){this.field=e,this.transform=t}}class Mle{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function MC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class RC{}function Qj(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new _f(n.key,Yn.none()):new mf(n.key,n.data,Yn.none());{const t=n.data,r=di.empty();let i=new Cn(Un.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ba(n.key,r,new hs(i.toArray()),Yn.none())}}function Rle(n,e,t){n instanceof mf?function(i,s,o){const a=i.value.clone(),l=eH(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ba?function(i,s,o){if(!MC(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=eH(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Jj(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jm(n,e,t,r){return n instanceof mf?function(s,o,a,l){if(!MC(s.precondition,o))return a;const c=s.value.clone(),h=tH(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ba?function(s,o,a,l){if(!MC(s.precondition,o))return a;const c=tH(s.fieldTransforms,l,o),h=o.data;return h.setAll(Jj(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,MC(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function kle(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=qj(r.transform,i||null);null!=s&&(null===t&&(t=di.empty()),t.set(r.field,s))}return t||null}function Xj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&rf(r,i,(s,o)=>function Ale(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Lu&&i instanceof Lu||r instanceof Vu&&i instanceof Vu?rf(r.elements,i.elements,Jo):r instanceof gf&&i instanceof gf?Jo(r.Pe,i.Pe):r instanceof pf&&i instanceof pf);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class mf extends RC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ba extends RC{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Jj(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function eH(n,e,t){const r=new Map;Je(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Sle(o,a,t[i]))}return r}function tH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Ile(s,o,e))}return r}class _f extends RC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XA extends RC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Rle(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Jm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Hj();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=Qj(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bt())}isEqual(e){return this.batchId===e.batchId&&rf(this.mutations,e.mutations,(t,r)=>Xj(t,r))&&rf(this.baseMutations,e.baseMutations,(t,r)=>Xj(t,r))}}class eM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Je(e.mutations.length===r.length);let i=Dle;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new eM(e,t,r,i)}}class tM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xle{constructor(e,t){this.count=e,this.unchangedNames=t}}var kr,qt;function rH(n){switch(n){default:return Ge();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function iH(n){if(void 0===n)return Cr("GRPC error has no .code"),le.UNKNOWN;switch(n){case kr.OK:return le.OK;case kr.CANCELLED:return le.CANCELLED;case kr.UNKNOWN:return le.UNKNOWN;case kr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case kr.INTERNAL:return le.INTERNAL;case kr.UNAVAILABLE:return le.UNAVAILABLE;case kr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case kr.NOT_FOUND:return le.NOT_FOUND;case kr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case kr.ABORTED:return le.ABORTED;case kr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case kr.DATA_LOSS:return le.DATA_LOSS;default:return Ge()}}(qt=kr||(kr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";function sH(){return new TextEncoder}const Ple=new ku([4294967295,4294967295],0);function oH(n){const e=sH().encode(n),t=new VU;return t.update(e),new Uint8Array(t.digest())}function aH(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ku([t,r],0),new ku([i,s],0)]}class nM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new e_(`Invalid padding: ${t}`);if(r<0)throw new e_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new e_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new e_(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ku.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ku.fromNumber(r)));return 1===i.compare(Ple)&&(i=new ku([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=oH(e),[r,i]=aH(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new nM(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=oH(e),[r,i]=aH(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class e_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class t_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,n_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new t_(et.min(),i,new Pn(_t),fs(),bt())}}class n_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n_(r,t,bt(),bt(),bt())}}class xC{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class lH{constructor(e,t){this.targetId=e,this.me=t}}class cH{constructor(e,t,r=Gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uH{constructor(){this.fe=0,this.ge=hH(),this.pe=Gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=bt(),t=bt(),r=bt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ge()}}),new n_(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=hH()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ole{constructor(e){this.Le=e,this.Be=new Map,this.ke=fs(),this.qe=dH(),this.Qe=new Pn(_t)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(TC(s))if(0===r){const o=new Be(s.path);this.Ue(t,o,jn.newNoDocument(o,et.min()))}else Je(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Fa(r).toUint8Array()}catch(l){if(l instanceof pj)return ds("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new nM(o,i,s)}catch(l){return ds(l instanceof e_?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&TC(a.target)){const l=new Be(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,jn.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=bt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new t_(e,t,this.Qe,this.ke,r);return this.ke=fs(),this.qe=dH(),this.Qe=new Pn(_t),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new uH,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Cn(_t),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uH),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function dH(){return new Pn(Be.comparator)}function hH(){return new Pn(Be.comparator)}const Nle={asc:"ASCENDING",desc:"DESCENDING"},Fle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lle={and:"AND",or:"OR"};class Vle{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rM(n,e){return n.useProto3Json||Um(e)?e:{value:e}}function yf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ble(n,e){return yf(n,e.toTimestamp())}function Dr(n){return Je(!!n),et.fromTimestamp(function(t){const r=Na(t);return new Kn(r.seconds,r.nanos)}(n))}function iM(n,e){return sM(n,e).canonicalString()}function sM(n,e){const t=(i=n,new Ut(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function pH(n){const e=Ut.fromString(n);return Je(TH(e)),e}function r_(n,e){return iM(n.databaseId,e.path)}function ta(n,e){const t=pH(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(_H(t))}function gH(n,e){return iM(n.databaseId,e)}function mH(n){const e=pH(n);return 4===e.length?Ut.emptyPath():_H(e)}function oM(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _H(n){return Je(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yH(n,e,t){return{name:r_(n,e),fields:t.value.mapValue.fields}}function vH(n,e,t){const r=ta(n,e.name),i=Dr(e.updateTime),s=e.createTime?Dr(e.createTime):et.min(),o=new di({mapValue:{fields:e.fields}}),a=jn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function i_(n,e){let t;if(e instanceof mf)t={update:yH(n,e.key,e.value)};else if(e instanceof _f)t={delete:r_(n,e.key)};else if(e instanceof Ba)t={update:yH(n,e.key,e.data),updateMask:Gle(e.fieldMask)};else{if(!(e instanceof XA))return Ge();t={verify:r_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof pf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ge()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Ble(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ge()),t;var s}function aM(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Yn.updateTime(Dr(s.updateTime)):void 0!==s.exists?Yn.exists(s.exists):Yn.none():Yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(Je("REQUEST_TIME"===a.setToServerValue),l=new pf):"appendMissingElements"in a?l=new Lu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Vu(a.removeAllFromArray.values||[]):"increment"in a?l=new gf(o,a.increment):Ge();const c=Un.fromServerFormat(a.fieldPath);return new Xm(c,l)}(n,i)):[];var s;if(e.update){const i=ta(n,e.update.name),s=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new hs((e.updateMask.fieldPaths||[]).map(h=>Un.fromServerFormat(h)));return new Ba(i,s,o,t,r)}return new mf(i,s,t,r)}if(e.delete){const i=ta(n,e.delete);return new _f(i,t)}if(e.verify){const i=ta(n,e.verify);return new XA(i,t)}return Ge()}function wH(n,e){return{documents:[gH(n,e.path)]}}function PC(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gH(n,i);const s=function(c){if(0!==c.length)return bH(fn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(h=>{return{field:sc((_=h).field),direction:zle(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=rM(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function CH(n){let e=mH(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Je(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(m){const _=DH(m);return _ instanceof fn&&qA(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new qm(vf((C=_).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;t.limit&&(a=function(m){let _;return _="object"==typeof m?m.value:m,Um(_)?null:_}(t.limit));let l=null;var m;t.startAt&&(l=new ic((m=t.startAt).values||[],!!m.before));let c=null;return t.endAt&&(c=function(m){return new ic(m.values||[],!m.before)}(t.endAt)),Pj(e,i,o,s,a,"F",l,c)}function DH(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vf(t.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vf(t.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vf(t.unaryFilter.field);return jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vf(t.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ge()}}(n):void 0!==n.fieldFilter?jt.create(vf((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ge()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return fn.create(t.compositeFilter.filters.map(r=>DH(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge()}}(t.compositeFilter.op))}(n):Ge();var t}function zle(n){return Nle[n]}function Wle(n){return Fle[n]}function qle(n){return Lle[n]}function sc(n){return{fieldPath:n.canonicalString()}}function vf(n){return Un.fromServerFormat(n.fieldPath)}function bH(n){return n instanceof jt?function(t){if("=="===t.op){if(_j(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NAN"}};if(mj(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(_j(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NOT_NAN"}};if(mj(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sc(t.field),op:Wle(t.op),value:t.value}}}(n):n instanceof fn?function(t){const r=t.getFilters().map(i=>bH(i));return 1===r.length?r[0]:{compositeFilter:{op:qle(t.op),filters:r}}}(n):Ge()}function Gle(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ua{constructor(e,t,r,i,s=et.min(),o=et.min(),a=Gr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IH{constructor(e){this.ct=e}}function SH(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:r_(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:yf(s,o.version.toTimestamp()),createTime:yf(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bu(e.version)};else{if(!e.isUnknownDocument())return Ge();r.unknownDocument={path:t.path.toArray(),version:Bu(e.version)}}var s,o;return r}function OC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uu(n){const e=new Kn(n.seconds,n.nanoseconds);return et.fromTimestamp(e)}function ju(n,e){const t=(e.baseMutations||[]).map(s=>aM(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>aM(n.ct,s)),i=Kn.fromMillis(e.localWriteTimeMs);return new JA(e.batchId,i,t,r)}function s_(n){const e=Uu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Uu(n.lastLimboFreeSnapshotVersion):et.min();let r;return r=void 0!==n.query.documents?(Je(1===(s=n.query).documents.length),Mi(df(mH(s.documents[0])))):function(s){return Mi(CH(s))}(n.query),new Ua(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Gr.fromBase64String(n.resumeToken));var s}function AH(n,e){const t=Bu(e.snapshotVersion),r=Bu(e.lastLimboFreeSnapshotVersion);let i;i=TC(e.target)?wH(n.ct,e.target):PC(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lM(n){const e=CH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?SC(e,e.limit,"L"):e}function cM(n,e){return new tM(e.largestBatchId,aM(n.ct,e.overlayMutation))}function MH(n,e){const t=e.path.lastSegment();return[n,Ai(e.path.popLast()),t]}function RH(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bu(r.readTime),documentKey:Ai(r.documentKey.path),largestBatchId:r.largestBatchId}}class Kle{getBundleMetadata(e,t){return kH(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Uu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return kH(e).put({bundleId:(i=t).id,createTime:Bu(Dr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return xH(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:lM(s.bundledQuery),readTime:Uu(s.readTime)};var s})}saveNamedQuery(e,t){return xH(e).put({name:(i=t).name,readTime:Bu(Dr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function kH(n){return ni(n,"bundles")}function xH(n){return ni(n,"namedQueries")}class NC{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new NC(e,t.uid||"")}getOverlay(e,t){return o_(e).get(MH(this.userId,t)).next(r=>r?cM(this.serializer,r):null)}getOverlays(e,t){const r=ea();return se.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new tM(t,o);i.push(this.ht(e,a))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ai(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(o_(e).j("collectionPathOverlayIndex",a))}),se.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ea(),s=Ai(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return o_(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=cM(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ea();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return o_(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const m=cM(this.serializer,c);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return o_(e).put(function(i,s,o){const[a,l,c]=MH(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:i_(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function o_(n){return ni(n,"documentOverlays")}class Hu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),jm(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Na(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Fa(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?yj(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ge()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Be.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Yle(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function PH(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Yle(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Hu.bt=new Hu;class Qle{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=PH(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=PH(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Xle{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Jle{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class a_{constructor(){this.Gt=new Qle,this.zt=new Xle(this.Gt),this.jt=new Jle(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class $u{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $u(this.indexId,this.documentKey,this.arrayValue,r)}}function oc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=OH(n.arrayValue,e.arrayValue),0!==t?t:(t=OH(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function OH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class NH{constructor(e){this.Yt=new Cn((t,r)=>Un.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Je(e.collectionGroup===this.collectionId),this.en)return!1;const t=VA(e);if(void 0!==t&&!this.nn(t))return!1;const r=xu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Cn(Un.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Pu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Pu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Pu(r.field,"asc"===r.dir?0:1)));return new sf(sf.UNKNOWN_ID,this.collectionId,t,af.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function FH(n){var e,t;if(Je(n instanceof jt||n instanceof fn),n instanceof jt){if(n instanceof Rj){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>jt.create(n.field,"==",s)))||[];return fn.create(i,"or")}return n}const r=n.filters.map(i=>FH(i));return fn.create(r,n.op)}function ece(n){if(0===n.getFilters().length)return[];const e=hM(FH(n));return Je(LH(e)),uM(e)||dM(e)?[e]:e.getFilters()}function uM(n){return n instanceof jt}function dM(n){return n instanceof fn&&qA(n)}function LH(n){return uM(n)||dM(n)||function(t){if(t instanceof fn&&WA(t)){for(const r of t.getFilters())if(!uM(r)&&!dM(r))return!1;return!0}return!1}(n)}function hM(n){if(Je(n instanceof jt||n instanceof fn),n instanceof jt)return n;if(1===n.filters.length)return hM(n.filters[0]);const e=n.filters.map(r=>hM(r));let t=fn.create(e,n.op);return t=FC(t),LH(t)?t:(Je(t instanceof fn),Je(uf(t)),Je(t.filters.length>1),t.filters.reduce((r,i)=>fM(r,i)))}function fM(n,e){let t;return Je(n instanceof jt||n instanceof fn),Je(e instanceof jt||e instanceof fn),t=n instanceof jt?e instanceof jt?fn.create([n,e],"and"):VH(n,e):e instanceof jt?VH(e,n):function(i,s){if(Je(i.filters.length>0&&s.filters.length>0),uf(i)&&uf(s))return Sj(i,s.getFilters());const o=WA(i)?i:s,a=WA(i)?s:i,l=o.filters.map(c=>fM(c,a));return fn.create(l,"or")}(n,e),FC(t)}function VH(n,e){if(uf(e))return Sj(e,n.getFilters());{const t=e.filters.map(r=>fM(n,r));return fn.create(t,"or")}}function FC(n){if(Je(n instanceof jt||n instanceof fn),n instanceof jt)return n;const e=n.getFilters();if(1===e.length)return FC(e[0]);if(Tj(n))return n;const t=e.map(i=>FC(i)),r=[];return t.forEach(i=>{i instanceof jt?r.push(i):i instanceof fn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:fn.create(r,n.op)}class tce{constructor(){this._n=new pM}addToCollectionParentIndex(e,t){return this._n.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Rs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class pM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Cn(Ut.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Cn(Ut.comparator)).toArray()}}const LC=new Uint8Array(0);class nce{constructor(e,t){this.databaseId=t,this.an=new pM,this.un=new Va(r=>Fu(r),(r,i)=>Gm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Ai(i)};return BH(e).put(s)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[KU(t),""],!1,!0);return BH(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Xo(o.parent))}return r})}addFieldIndex(e,t){const r=l_(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Ef(e);return s.next(a=>{o.put(RH(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=l_(e),i=Ef(e),s=wf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=l_(e),r=wf(e),i=Ef(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return se.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new NH(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=wf(e);let i=!0;const s=new Map;return se.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=bt();const a=[];return se.forEach(s,(l,c)=>{var $;Ae("IndexedDbIndexManager",`Using index ${$=l,`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`} to execute ${Fu(t)}`);const h=function($,ee){const _e=VA(ee);if(void 0===_e)return null;for(const xe of IC($,_e.fieldPath))switch(xe.op){case"array-contains-any":return xe.value.arrayValue.values||[];case"array-contains":return[xe.value]}return null}(c,l),m=function($,ee){const _e=new Map;for(const xe of xu(ee))for(const j of IC($,xe.fieldPath))switch(j.op){case"==":case"in":_e.set(xe.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return _e.set(xe.fieldPath.canonicalString(),j.value),Array.from(_e.values())}return null}(c,l),_=function($,ee){const _e=[];let xe=!0;for(const j of xu(ee)){const R=0===j.kind?kj($,j.fieldPath,$.startAt):xj($,j.fieldPath,$.startAt);_e.push(R.value),xe&&(xe=R.inclusive)}return new ic(_e,xe)}(c,l),v=function($,ee){const _e=[];let xe=!0;for(const j of xu(ee)){const R=0===j.kind?xj($,j.fieldPath,$.endAt):kj($,j.fieldPath,$.endAt);_e.push(R.value),xe&&(xe=R.inclusive)}return new ic(_e,xe)}(c,l),C=this.hn(l,c,_),b=this.hn(l,c,v),T=this.Pn(l,c,m),B=this.In(l.indexId,h,C,_.inclusive,b,v.inclusive,T);return se.forEach(B,P=>r.G(P,t.limit).next($=>{$.forEach(ee=>{const _e=Be.fromSegments(ee.documentKey);o.has(_e)||(o=o.add(_e),a.push(_e))})}))}).next(()=>a)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:ece(fn.create(e.filters,"and")).map(r=>ZA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),h=[];for(let m=0;m<l;++m){const _=t?this.Tn(t[m/c]):LC,v=this.En(e,_,r[m%c],i),C=this.dn(e,_,s[m%c],o),b=a.map(T=>this.En(e,_,T,!0));h.push(...this.createRange(v,C,b))}return h}En(e,t,r,i){const s=new $u(e,Be.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new $u(e,Be.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new NH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return se.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new Cn(Un.comparator),h=!1;for(const m of l.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:c=c.add(_.field));for(const m of l.orderBy)m.field.isKeyField()||(c=c.add(m.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new a_;for(const i of xu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Hu.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new a_;return Hu.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new a_;return Hu.bt.Pt(Nu(this.databaseId,t),r.Ht(function(s){const o=xu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new a_);let s=0;for(const o of xu(e)){const a=r[s++];for(const l of i)if(this.Vn(t,o.fieldPath)&&zm(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);Hu.bt.Pt(a,c)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new a_;l.seed(a.Wt()),Hu.bt.Pt(o,l.Ht(t.kind)),s.push(l)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=l_(e),i=Ef(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return se.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,m){const _=m?new af(m.sequenceNumber,new Rs(Uu(m.readTime),new Be(Xo(m.documentKey)),m.largestBatchId)):af.empty(),v=h.fields.map(([C,b])=>new Pu(Un.fromServerFormat(C),b));return new sf(h.indexId,h.collectionGroup,v,_)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:_t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=l_(e),s=Ef(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>se.forEach(a,l=>s.put(RH(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?se.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),se.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(s,l);return c.isEqual(h)?se.resolve():this.wn(e,s,l,c,h)}))))})}Sn(e,t,r,i){return wf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return wf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=wf(e);let s=new Cn(oc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new $u(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Cn(oc);const i=this.An(t,e);if(null==i)return r;const s=VA(t);if(null!=s){const o=e.data.field(s.fieldPath);if(zm(o))for(const a of o.arrayValue.values||[])r=r.add(new $u(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new $u(t.indexId,e.key,LC,i));return r}wn(e,t,r,i,s){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,h,m,_){const v=l.getIterator(),C=c.getIterator();let b=lf(v),T=lf(C);for(;b||T;){let B=!1,P=!1;if(b&&T){const $=h(b,T);$<0?P=!0:$>0&&(B=!0)}else null!=b?P=!0:B=!0;B?(m(T),T=lf(C)):P?(_(b),b=lf(v)):(b=lf(v),T=lf(C))}}(i,s,oc,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),se.waitFor(o)}gn(e){let t=1;return Ef(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>oc(o,a)).filter((o,a,l)=>!a||0!==oc(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=oc(o,e),l=oc(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,LC,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,LC,[]]))}return s}Dn(e,t){return oc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(UH)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ge())).next(UH)}}function BH(n){return ni(n,"collectionParents")}function wf(n){return ni(n,"indexEntries")}function l_(n){return ni(n,"indexConfiguration")}function Ef(n){return ni(n,"indexState")}function UH(n){Je(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;BA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Rs(e.readTime,e.documentKey,t)}const jH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(h,m,_)=>(a++,_.delete()));s.push(l.next(()=>{Je(1===a)}));const c=[];for(const h of t.mutations){const m=sj(e,h.key.path,t.batchId);s.push(i.delete(m)),c.push(h.key)}return se.waitFor(s).next(()=>c)}function VC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ge();e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(41943040,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class BC{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Je(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new BC(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ac(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Cf(e),o=ac(e);return o.add({}).next(a=>{Je("number"==typeof a);const l=new JA(a,t,r,i),c=function(v,C,b){const T=b.baseMutations.map(P=>i_(v.ct,P)),B=b.mutations.map(P=>i_(v.ct,P));return{userId:C,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:T,mutations:B}}(this.serializer,this.userId,l),h=[];let m=new Cn((_,v)=>_t(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=sj(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),h.push(o.put(c)),h.push(s.put(v,Wae))}return m.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),se.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return ac(e).get(t).next(r=>r?(Je(r.userId===this.userId),ju(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?se.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ac(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Je(a.batchId>=r),s=ju(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ac(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ac(e).U("userMutationsIndex",t).next(r=>r.map(i=>ju(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Cf(e).J({range:i},(o,a,l)=>{const[c,h,m]=o,_=Xo(h);if(c===this.userId&&t.path.isEqual(_))return ac(e).get(m).next(v=>{if(!v)throw Ge();Je(v.userId===this.userId),s.push(ju(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(_t);const i=[];return t.forEach(s=>{const o=yC(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Cf(e).J({range:a},(c,h,m)=>{const[_,v,C]=c,b=Xo(v);_===this.userId&&s.path.isEqual(b)?r=r.add(C):m.done()});i.push(l)}),se.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=yC(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Cn(_t);return Cf(e).J({range:o},(l,c,h)=>{const[m,_,v]=l,C=Xo(_);m===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(v)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ac(e).get(s).next(o=>{if(null===o)throw Ge();Je(o.userId===this.userId),r.push(ju(this.serializer,o))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return HH(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Cf(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Xo(s[1]);i.push(l)}else a.done()}).next(()=>{Je(0===i.length)})})}containsKey(e,t){return $H(e,this.userId,t)}xn(e){return zH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $H(n,e,t){const r=yC(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Cf(n).J({range:s,H:!0},(a,l,c)=>{const[h,m,_]=a;h===e&&m===i&&(o=!0),c.done()}).next(()=>o)}function ac(n){return ni(n,"mutations")}function Cf(n){return ni(n,"documentMutations")}function zH(n){return ni(n,"mutationQueues")}class zu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new zu(0)}static Ln(){return new zu(-1)}}class rce{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new zu(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>et.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Df(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Je(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Df(e).J((o,a)=>{const l=s_(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Df(e).J((r,i)=>{const s=s_(i);t(s)})}Bn(e){return WH(e).get("targetGlobalKey").next(t=>(Je(null!==t),t))}kn(e,t){return WH(e).put("targetGlobalKey",t)}qn(e,t){return Df(e).put(AH(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Df(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=s_(a);Gm(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=lc(e);return t.forEach(o=>{const a=Ai(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=lc(e);return se.forEach(t,s=>{const o=Ai(s.path);return se.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=lc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=lc(e);let s=bt();return i.J({range:r,H:!0},(o,a,l)=>{const c=Xo(o[1]),h=new Be(c);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=Ai(t.path),i=IDBKeyRange.bound([r],[KU(r)],!1,!0);let s=0;return lc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Df(e).get(t).next(r=>r?s_(r):null)}}function Df(n){return ni(n,"targets")}function WH(n){return ni(n,"targetGlobal")}function lc(n){return ni(n,"targetDocuments")}function qH([n,e],[t,r]){const i=_t(n,t);return 0===i?_t(e,r):i}class ice{constructor(e){this.Kn=e,this.buffer=new Cn(qH),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xl(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ql(r)}yield t.zn(3e5)}))}}class sce{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(ks.oe);const r=new ice(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(jH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jH):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),nf()<=Yo.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${m} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class oce{constructor(e,t){this.db=e,this.garbageCollector=function ZH(n,e){return new sce(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return UC(e,r)}removeReference(e,t,r){return UC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return UC(e,t)}er(e,t){return function(i,s){let o=!1;return zH(i).Y(a=>$H(i,a,s).next(l=>(l&&(o=!0),se.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,et.min()),lc(e).delete([0,Ai(o.path)])))});i.push(l)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return UC(e,t)}Xn(e,t){const r=lc(e);let i,s=ks.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==ks.oe&&t(new Be(Xo(i)),s),s=c,i=l):s=ks.oe}).next(()=>{s!==ks.oe&&t(new Be(Xo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function UC(n,e){return lc(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ai(e.path),sequenceNumber:i}));var i}class KH{constructor(){this.changes=new Va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ace{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wu(e).put(r)}removeEntry(e,t,r){return Wu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],OC(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return Wu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(c_(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return Wu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(c_(t))},(i,s)=>{r={document:this.nr(t,s),size:VC(s)}}).next(()=>r)}getEntries(e,t){let r=fs();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=fs(),i=new Pn(Be.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,VC(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return se.resolve();let i=new Cn(JH);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(c_(i.first()),c_(i.last())),o=i.getIterator();let a=o.getNext();return Wu(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const m=Be.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&JH(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(c_(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),OC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wu(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let h=fs();for(const m of c){const _=this.nr(Be.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(Km(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=fs();const o=XH(t,r),a=XH(t,Rs.max());return Wu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const m=this.nr(Be.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(m.key,m),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new lce(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QH(e).get("remoteDocumentGlobalKey").next(t=>(Je(!!t),t))}tr(e,t){return QH(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function Zle(n,e){let t;if(e.document)t=vH(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=Uu(e.noDocument.readTime);t=jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ge();{const r=Be.fromSegments(e.unknownDocument.path),i=Uu(e.unknownDocument.version);t=jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Kn(i[0],i[1]);return et.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(et.min()))return r}return jn.newInvalidDocument(e)}}function YH(n){return new ace(n)}class lce extends KH{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Va(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Cn((s,o)=>_t(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=SH(this.ar.serializer,o);i=i.add(s.path.popLast());const c=VC(l);r+=c-a.size,t.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=SH(this.ar.serializer,o.convertToNoDocument(et.min()));t.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function QH(n){return ni(n,"remoteDocumentGlobal")}function Wu(n){return ni(n,"remoteDocumentsV14")}function c_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XH(n,e){const t=e.documentKey.path.toArray();return[n,OC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function JH(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=_t(t[s],r[s]),i)return i;return i=_t(t.length,r.length),i||(i=_t(t[t.length-2],r[r.length-2]),i||_t(t[t.length-1],r[r.length-1]))}class cce{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class e4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Jm(r.mutation,i,hs.empty(),Kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=bt()){const i=ea();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ym();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,bt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=fs();const o=Qm(),a=Qm();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof Ba)?s=s.insert(c.key,c):void 0!==h?(o.set(c.key,h.mutation.getFieldMask()),Jm(h.mutation,c,h.mutation.getFieldMask(),Kn.now())):o.set(c.key,hs.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var m;return a.set(c,new cce(h,null!==(m=o.get(c))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Qm();let i=new Pn((o,a)=>o-a),s=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let h=r.get(l)||hs.empty();h=a.applyToLocalView(c,h),r.set(l,h);const m=(i.get(a.batchId)||bt()).add(l);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,m=Hj();h.forEach(_=>{if(!s.has(_)){const v=Qj(t.get(_),r.get(_));null!==v&&m.set(_,v),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):KA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):se.resolve(ea());let a=-1,l=s;return o.next(c=>se.forEach(c,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(h)?se.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,bt())).next(h=>({batchId:a,changes:jj(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let i=Ym();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Ym();return this.indexManager.getCollectionParents(e,s).next(a=>se.forEach(a,l=>{const c=(m=t,_=l.child(s),new La(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();null===o.get(h)&&(o=o.insert(h,jn.newInvalidDocument(h)))});let a=Ym();return o.forEach((l,c)=>{const h=s.get(l);void 0!==h&&Jm(h.mutation,c,hs.empty(),Kn.now()),Km(t,c)&&(a=a.insert(l,c))}),a})}}class uce{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return se.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Dr(i.createTime)}),se.resolve();var i}getNamedQuery(e,t){return se.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:lM(i.bundledQuery),readTime:Dr(i.readTime)}),se.resolve();var i}}class dce{constructor(){this.overlays=new Pn(Be.comparator),this.hr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ea();return se.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=ea(),s=t.length+1,o=new Be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Pn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);null===h&&(h=ea(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ea(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return se.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tM(t,r));let s=this.hr.get(t);void 0===s&&(s=bt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class gM{constructor(){this.Pr=new Cn(ri.Ir),this.Tr=new Cn(ri.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new ri(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new ri(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Be(new Ut([])),r=new ri(t,e),i=new ri(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Be(new Ut([])),r=new ri(t,e),i=new ri(t,e+1);let s=bt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ri(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ri{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Be.comparator(e.key,t.key)||_t(e.pr,t.pr)}static Er(e,t){return _t(e.pr,t.pr)||Be.comparator(e.key,t.key)}}class hce{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Cn(ri.Ir)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new JA(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ri(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return se.resolve(o)}lookupMutationBatch(e,t){return se.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ri(t,0),i=new ri(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(_t);return t.forEach(i=>{const s=new ri(i,0),o=new ri(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),se.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const o=new ri(new Be(s),0);let a=new Cn(_t);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),se.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Je(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return se.forEach(t.mutations,i=>{const s=new ri(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new ri(t,0),i=this.wr.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fce{constructor(e){this.vr=e,this.docs=new Pn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=fs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jn.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=fs();const o=t.path,a=new Be(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||BA(QU(h),r)<=0||(i.has(h.key)||Km(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ge()}Fr(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pce(this)}getSize(e){return se.resolve(this.size)}}class pce extends KH{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class gce{constructor(e){this.persistence=e,this.Mr=new Va(t=>Fu(t),Gm),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.Or=0,this.Nr=new gM,this.targetCount=0,this.Lr=zu.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),se.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new zu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.qn(t),se.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),se.waitFor(s).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Nr.containsKey(t))}}class mM{constructor(e,t){this.Br={},this.overlays={},this.kr=new ks(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gce(this),this.indexManager=new tce,this.remoteDocumentCache=new fce(r=>this.referenceDelegate.Kr(r)),this.serializer=new IH(t),this.$r=new uce(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dce,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new hce(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new mce(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return se.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class mce extends JU{constructor(e){super(),this.currentSequenceNumber=e}}class jC{constructor(e){this.persistence=e,this.zr=new gM,this.jr=null}static Hr(e){return new jC(e)}get Jr(){if(this.jr)return this.jr;throw Ge()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),se.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Jr,r=>{const i=Be.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,et.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return se.or([()=>se.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class _ce{constructor(e){this.serializer=e}O(e,t,r,i){const s=new _C("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ij,{unique:!0}),l.createObjectStore("documentMutations"),t4(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=se.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),t4(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ij,{unique:!0});const m=c.store("mutations"),_=h.map(v=>m.put(v));return se.waitFor(_)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:rle});c.createIndex("collectionPathOverlayIndex",ile,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",sle,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:qae});c.createIndex("documentKeyIndex",Gae),c.createIndex("collectionGroupIndex",Zae)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Jae}).createIndex("sequenceNumberIndex",ele,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:tle}).createIndex("documentKeyIndex",nle,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=VC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>se.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>se.forEach(a,l=>{Je(l.userId===s.userId);const c=ju(this.serializer,l);return HH(e,s.userId,c).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ut(o),c=[0,Ai(l)];s.push(t.get(c).next(h=>h?se.resolve():t.put({targetId:0,path:Ai(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Xae});const r=t.store("collectionParents"),i=new pM,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ai(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ut(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=Xo(a);return s(h.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=s_(i),o=AH(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(m=o,m.document?new Be(Ut.fromString(m.document.name).popFirst(5)):m.noDocument?Be.fromSegments(m.noDocument.path):m.unknownDocument?Be.fromSegments(m.unknownDocument.path):Ge()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(c))}).next(()=>se.waitFor(i))}si(e,t){const r=t.store("mutations"),i=YH(this.serializer),s=new mM(jC.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:bt();ju(this.serializer,l).keys().forEach(m=>h=h.add(m)),a.set(l.userId,h)}),se.forEach(a,(l,c)=>{const h=new ti(c),m=NC.lt(this.serializer,h),_=s.getIndexManager(h),v=BC.lt(h,this.serializer,_,s.referenceDelegate);return new e4(i,v,m,_).recalculateAndSaveOverlaysForDocumentKeys(new HA(t,ks.oe),l).next()})})}}function t4(n){n.createObjectStore("targetDocuments",{keyPath:Yae}).createIndex("documentTargetsIndex",Qae,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kae,{unique:!0}),n.createObjectStore("targetGlobal")}const _M="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yM{constructor(e,t,r,i,s,o,a,l,c,h,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=h,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!yM.D())throw new Te(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oce(this,i),this.Ti=t+"main",this.serializer=new IH(l),this.Ei=new Qo(this.Ti,this.ui,new _ce(this.serializer)),this.Qr=new rce(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YH(this.serializer),this.$r=new Kle,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(le.FAILED_PRECONDITION,_M);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ks(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,pe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$C(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Xl(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return u_(e).get("owner").next(t=>se.resolve(this.Si(t)))}bi(e){return $C(e).delete(this.clientId)}Di(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ni(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return se.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?se.resolve(!0):u_(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Te(le.FAILED_PRECONDITION,_M);return!1}}return!(!this.networkEnabled||!this.inForeground)||$C(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new HA(t,ks.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>$C(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return BC.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nce(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return NC.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(l=this.ui)?ale:15===l?cj:14===l?lj:13===l?aj:12===l?ole:11===l?oj:void Ge();var l;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new HA(a,this.kr?this.kr.next():ks.oe),"readwrite-primary"===t?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Te(le.FAILED_PRECONDITION,XU);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return u_(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(le.FAILED_PRECONDITION,_M)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return u_(e).put("owner",t)}static D(){return Qo.D()}yi(e){const t=u_(e);return t.get("owner").next(r=>this.Si(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(Cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,an.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function u_(n){return ni(n,"owner")}function $C(n){return ni(n,"clientMetadata")}function vM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class wM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=bt(),i=bt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wM(e,t.fromCache,r,i)}}class yce{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class n4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,an.G6)()?8:ej((0,an.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yce;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(nf()<=Yo.in.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",ff(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),se.resolve()):(nf()<=Yo.in.DEBUG&&Ae("QueryEngine","Query:",ff(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(nf()<=Yo.in.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",ff(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):se.resolve())}ji(e,t){if(Oj(t))return se.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=SC(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=bt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,SC(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,i){return Oj(t)||i.isEqual(et.min())?se.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?se.resolve(null):(nf()<=Yo.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ff(t)),this.es(e,o,t,YU(i,-1)).next(a=>a))})}Zi(e,t){let r=new Cn(Bj(e));return t.forEach((i,s)=>{Km(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return nf()<=Yo.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",ff(t)),this.zi.getDocumentsMatchingQuery(e,t,Rs.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class vce{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Pn(_t),this.rs=new Va(s=>Fu(s),Gm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function r4(n,e,t,r){return new vce(n,e,t,r)}function i4(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,pe.Z)(function*(n,e){const t=Le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=bt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}),EM.apply(this,arguments)}function s4(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function o4(n,e,t){let r=bt(),i=bt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=fs();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(et.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function Cce(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bf(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,se.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Ua(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Tf(n,e,t){return CM.apply(this,arguments)}function CM(){return CM=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xl(o))throw o;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),CM.apply(this,arguments)}function zC(n,e,t){const r=Le(n);let i=et.min(),s=bt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const m=Le(l),_=m.rs.get(h);return void 0!==_?se.resolve(m.ns.get(_)):m.Qr.getTargetData(c,h)}(r,o,Mi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:et.min(),t?s:bt())).next(a=>(c4(r,Vj(e),a),{documents:a,hs:s})))}function a4(n,e){const t=Le(n),r=Le(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function l4(n,e){const t=Le(n),r=t.ss.get(e)||et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,YU(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(c4(t,e,i),i))}function c4(n,e,t){let r=n.ss.get(e)||et.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function DM(){return DM=(0,pe.Z)(function*(n,e,t,r){const i=Le(n);let s=bt(),o=fs();for(const c of t){const h=e.Ps(c.metadata.name);c.document&&(s=s.add(h));const m=e.Is(c);m.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(h,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield bf(i,(h=r,Mi(df(Ut.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>o4(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}),DM.apply(this,arguments)}function bce(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,pe.Z)(function*(n,e,t=bt()){const r=yield bf(n,Mi(lM(e.bundledQuery))),i=Le(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Dr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Gr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),bM.apply(this,arguments)}function u4(n,e){return`firestore_clients_${n}_${e}`}function d4(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function TM(n,e){return`firestore_targets_${n}_${e}`}class WC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Te(i.error.code,i.error.message))),o?new WC(e,t,i.state,s):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class d_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Te(r.error.code,r.error.message))),s?new d_(e,r.state,i):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=QA();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=nj(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new qC(e,s):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class IM{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new IM(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class SM{constructor(){this.activeTargetIds=QA()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AM{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Pn(_t),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=u4(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new SM),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(u4(e.persistenceKey,i));if(s){const o=qC.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(TM(this.persistenceKey,e));if(r){const i=d_.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(TM(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=ks.oe;if(null!=o)try{const l=JSON.parse(o);Je("number"==typeof l),a=l}catch(l){Cr("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==ks.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new WC(this.currentUser,e,t,r),s=d4(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=d4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=TM(this.persistenceKey,e),s=new d_(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return qC.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return WC.Es(new ti(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return d_.Es(i,t)}xs(e){return IM.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=QA();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class h4{constructor(){this.no=new SM,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new SM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tce{io(e){}shutdown(){}}class f4{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let GC=null;function MM(){return null===GC?GC=268435456+Math.round(2147483648*Math.random()):GC++,"0x"+GC.toString(16)}const Ice={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sce{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ki="WebChannelConnection";class Ace extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=MM(),l=this.vo(t,r.toUriEncodedString());Ae("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(t,l,c,i).then(h=>(Ae("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ds("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+tf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${Ice[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=MM();return new Promise((o,a)=>{const l=new BU;l.setWithCredentials(!0),l.listenOnce(jU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case mC.NO_ERROR:const h=l.getResponseJson();Ae(ki,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case mC.TIMEOUT:Ae(ki,`RPC '${e}' ${s} timed out`),a(new Te(le.DEADLINE_EXCEEDED,"Request time out"));break;case mC.HTTP_ERROR:const m=l.getStatus();if(Ae(ki,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const C=function(T){const B=T.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(B)>=0?B:le.UNKNOWN}(v.status);a(new Te(C,v.message))}else a(new Te(le.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Te(le.UNAVAILABLE,"Connection failed."));break;default:Ge()}}finally{Ae(ki,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Ae(ki,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Oo(e,t,r){const i=MM(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zU(),a=$U(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new UU({})),this.Fo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Ae(ki,`Creating RPC '${e}' stream ${i}: ${h}`,l);const m=o.createWebChannel(h,l);let _=!1,v=!1;const C=new Sce({lo:T=>{v?Ae(ki,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(_||(Ae(ki,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),Ae(ki,`RPC '${e}' stream ${i} sending:`,T),m.send(T))},ho:()=>m.close()}),b=(T,B,P)=>{T.listen(B,$=>{try{P($)}catch(ee){setTimeout(()=>{throw ee},0)}})};return b(m,Lm.EventType.OPEN,()=>{v||(Ae(ki,`RPC '${e}' stream ${i} transport opened.`),C.mo())}),b(m,Lm.EventType.CLOSE,()=>{v||(v=!0,Ae(ki,`RPC '${e}' stream ${i} transport closed`),C.po())}),b(m,Lm.EventType.ERROR,T=>{v||(v=!0,ds(ki,`RPC '${e}' stream ${i} transport errored:`,T),C.po(new Te(le.UNAVAILABLE,"The operation could not be completed")))}),b(m,Lm.EventType.MESSAGE,T=>{var B;if(!v){const P=T.data[0];Je(!!P);const ee=P.error||(null===(B=P[0])||void 0===B?void 0:B.error);if(ee){Ae(ki,`RPC '${e}' stream ${i} received error:`,ee);const _e=ee.status;let xe=function(O){const H=kr[O];if(void 0!==H)return iH(H)}(_e),j=ee.message;void 0===xe&&(xe=le.INTERNAL,j="Unknown error status: "+_e+" with message "+ee.message),v=!0,C.po(new Te(xe,j)),m.close()}else Ae(ki,`RPC '${e}' stream ${i} received:`,P),C.yo(P)}}),b(a,HU.STAT_EVENT,T=>{T.stat===FA.PROXY?Ae(ki,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===FA.NOPROXY&&Ae(ki,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}}function p4(){return typeof window<"u"?window:null}function ZC(){return typeof document<"u"?document:null}function h_(n){return new Vle(n,!0)}class RM{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class g4{constructor(e,t,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new RM(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,pe.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,pe.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new Te(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,pe.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mce extends g4{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function jle(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Ge(),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Je(void 0===h||"string"==typeof h),Gr.fromBase64String(h||"")):(Je(void 0===h||h instanceof Buffer||h instanceof Uint8Array),Gr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=void 0===c.code?le.UNKNOWN:iH(c.code);return new Te(h,c.message||"")}(o);t=new cH(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ta(n,r.document.name),s=Dr(r.document.updateTime),o=r.document.createTime?Dr(r.document.createTime):et.min(),a=new di({mapValue:{fields:r.document.fields}}),l=jn.newFoundDocument(i,s,o,a);t=new xC(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=ta(n,r.document),s=r.readTime?Dr(r.readTime):et.min(),o=jn.newNoDocument(i,s);t=new xC([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ta(n,r.document);t=new xC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ge();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new xle(i,s);t=new lH(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return et.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?et.min():o.readTime?Dr(o.readTime):et.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=oM(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=TC(l)?{documents:wH(s,l)}:{query:PC(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fH(s,o.resumeToken);const c=rM(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(et.min())>0){a.readTime=yf(s,o.snapshotVersion.toTimestamp());const c=rM(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function $le(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=oM(this.serializer),t.removeTarget=e,this.i_(t)}}class Rce extends g4{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function Hle(n,e){return n&&n.length>0?(Je(void 0!==e),n.map(t=>function(i,s){let o=Dr(i.updateTime?i.updateTime:s);return o.isEqual(et.min())&&(o=Dr(s)),new Mle(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.A_(r,t)}return Je(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=oM(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>i_(this.serializer,r))};this.i_(t)}}class kce extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,sM(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(le.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,sM(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(le.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class xce{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Cr(t),this.y_=!1):Ae("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Pce{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,pe.Z)(function*(){var l;cc(o)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,pe.Z)(function*(h){const m=Le(h);m.M_.add(4),yield If(m),m.N_.set("Unknown"),m.M_.delete(4),yield f_(m)}),function c(h){return l.apply(this,arguments)})(o))}))}),this.N_=new xce(r,i)}}function f_(n){return kM.apply(this,arguments)}function kM(){return kM=(0,pe.Z)(function*(n){if(cc(n))for(const e of n.x_)yield e(!0)}),kM.apply(this,arguments)}function If(n){return xM.apply(this,arguments)}function xM(){return xM=(0,pe.Z)(function*(n){for(const e of n.x_)yield e(!1)}),xM.apply(this,arguments)}function KC(n,e){const t=Le(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),NM(t)?OM(t):Mf(t).Xo()&&PM(t,e))}function Sf(n,e){const t=Le(n),r=Mf(t);t.F_.delete(e),r.Xo()&&m4(t,e),0===t.F_.size&&(r.Xo()?r.n_():cc(t)&&t.N_.set("Unknown"))}function PM(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mf(n).P_(e)}function m4(n,e){n.L_.xe(e),Mf(n).I_(e)}function OM(n){n.L_=new Ole({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Mf(n).start(),n.N_.w_()}function NM(n){return cc(n)&&!Mf(n).Zo()&&n.F_.size>0}function cc(n){return 0===Le(n).M_.size}function _4(n){n.L_=void 0}function Oce(n){return FM.apply(this,arguments)}function FM(){return(FM=(0,pe.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function Nce(n){return LM.apply(this,arguments)}function LM(){return LM=(0,pe.Z)(function*(n){n.F_.forEach((e,t)=>{PM(n,e)})}),LM.apply(this,arguments)}function Fce(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,pe.Z)(function*(n,e){_4(n),NM(n)?(n.N_.D_(e),OM(n)):n.N_.set("Unknown")}),VM.apply(this,arguments)}function Lce(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,pe.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof cH&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.F_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.F_.delete(l),s.L_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield YC(n,r)}else if(e instanceof xC?n.L_.Ke(e):e instanceof lH?n.L_.He(e):n.L_.We(e),!t.isEqual(et.min()))try{const r=yield s4(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Gr.EMPTY_BYTE_STRING,h.snapshotVersion)),m4(s,l);const m=new Ua(h.target,l,c,h.sequenceNumber);PM(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield YC(n,r)}var r}),BM.apply(this,arguments)}function YC(n,e,t){return UM.apply(this,arguments)}function UM(){return UM=(0,pe.Z)(function*(n,e,t){if(!Xl(e))throw e;n.M_.add(1),yield If(n),n.N_.set("Offline"),t||(t=()=>s4(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield f_(n)}))}),UM.apply(this,arguments)}function y4(n,e){return e().catch(t=>YC(n,t,e))}function Af(n){return jM.apply(this,arguments)}function jM(){return jM=(0,pe.Z)(function*(n){const e=Le(n),t=uc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Vce(e);)try{const i=yield Cce(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,Bce(e,i)}catch(i){yield YC(e,i)}v4(e)&&w4(e)}),jM.apply(this,arguments)}function Vce(n){return cc(n)&&n.v_.length<10}function Bce(n,e){n.v_.push(e);const t=uc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function v4(n){return cc(n)&&!uc(n).Zo()&&n.v_.length>0}function w4(n){uc(n).start()}function Uce(n){return HM.apply(this,arguments)}function HM(){return(HM=(0,pe.Z)(function*(n){uc(n).V_()})).apply(this,arguments)}function jce(n){return $M.apply(this,arguments)}function $M(){return $M=(0,pe.Z)(function*(n){const e=uc(n);for(const t of n.v_)e.d_(t.mutations)}),$M.apply(this,arguments)}function Hce(n,e,t){return zM.apply(this,arguments)}function zM(){return zM=(0,pe.Z)(function*(n,e,t){const r=n.v_.shift(),i=eM.from(r,e,t);yield y4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Af(n)}),zM.apply(this,arguments)}function $ce(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,pe.Z)(function*(n,e){var t;e&&uc(n).E_&&(yield(t=(0,pe.Z)(function*(i,s){if(rH(a=s.code)&&a!==le.ABORTED){const o=i.v_.shift();uc(i).t_(),yield y4(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Af(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),v4(n)&&w4(n)}),WM.apply(this,arguments)}function E4(n,e){return qM.apply(this,arguments)}function qM(){return qM=(0,pe.Z)(function*(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=cc(t);t.M_.add(3),yield If(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield f_(t)}),qM.apply(this,arguments)}function GM(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,pe.Z)(function*(n,e){const t=Le(n);e?(t.M_.delete(2),yield f_(t)):e||(t.M_.add(2),yield If(t),t.N_.set("Unknown"))}),ZM.apply(this,arguments)}function Mf(n){return n.B_||(n.B_=function(t,r,i){const s=Le(t);return s.f_(),new Mce(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:Oce.bind(null,n),To:Nce.bind(null,n),Ao:Fce.bind(null,n),h_:Lce.bind(null,n)}),n.x_.push(function(){var e=(0,pe.Z)(function*(t){t?(n.B_.t_(),NM(n)?OM(n):n.N_.set("Unknown")):(yield n.B_.stop(),_4(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function uc(n){return n.k_||(n.k_=function(t,r,i){const s=Le(t);return s.f_(),new Rce(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:Uce.bind(null,n),Ao:$ce.bind(null,n),R_:jce.bind(null,n),A_:Hce.bind(null,n)}),n.x_.push(function(){var e=(0,pe.Z)(function*(t){t?(n.k_.t_(),yield Af(n)):(yield n.k_.stop(),n.v_.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class KM{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new KM(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rf(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),Xl(n))return new Te(le.UNAVAILABLE,`${e}: ${n}`);throw n}class kf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=Ym(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new kf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new kf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class C4{constructor(){this.q_=new Pn(Be.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ge():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class xf{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new xf(e,t,kf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zce{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Wce{constructor(){this.queries=new Va(e=>Lj(e),Zm),this.onlineState="Unknown",this.z_=new Set}}function YM(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,pe.Z)(function*(n,e){const t=Le(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new zce,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Rf(o,`Initialization of query '${ff(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&eR(t)}),QM.apply(this,arguments)}function XM(n,e){return JM.apply(this,arguments)}function JM(){return JM=(0,pe.Z)(function*(n,e){const t=Le(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}),JM.apply(this,arguments)}function qce(n,e){const t=Le(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&eR(t)}function Gce(n,e,t){const r=Le(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function eR(n){n.z_.forEach(e=>{e.next()})}var tR,D4;(D4=tR||(tR={})).J_="default",D4.Cache="cache";class nR{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new xf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=xf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==tR.Cache}}class Zce{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class b4{constructor(e){this.serializer=e}Ps(e){return ta(this.serializer,e)}Is(e){return e.metadata.exists?vH(this.serializer,e.document,!1):jn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Dr(e)}}class Kce{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=T4(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Ut.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new b4(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||bt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function Dce(n,e,t,r){return DM.apply(this,arguments)}(e.localStore,new b4(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield bce(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function T4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class I4{constructor(e){this.key=e}}class S4{constructor(e){this.key=e}}class A4{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=bt(),this.mutatedKeys=bt(),this.Ia=Bj(e),this.Ta=new kf(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new C4,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const _=i.get(h),v=Km(this.query,m)?m:null,C=!!_&&this.mutatedKeys.has(_.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let T=!1;_&&v?_.data.isEqual(v.data)?C!==b&&(r.track({type:3,doc:v}),T=!0):this.Ra(_,v)||(r.track({type:2,doc:v}),T=!0,(l&&this.Ia(v,l)>0||c&&this.Ia(v,c)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),T=!0):_&&!v&&(r.track({type:1,doc:_}),T=!0,(l||c)&&(a=!0)),T&&(v?(o=o.add(v),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,m)=>function(v,C){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge()}};return b(v)-b(C)}(h.type,m.type)||this.Ia(h.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],l=0===this.Pa.size&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,0!==o.length||c?{snapshot:new xf(this.query,e.Ta,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new C4,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=bt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new S4(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new I4(r))}),t}pa(e){this.la=e.hs,this.Pa=bt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return xf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Yce{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Qce{constructor(e){this.key=e,this.wa=!1}}class Xce{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Va(a=>Lj(a),Zm),this.Da=new Map,this.Ca=new Set,this.va=new Pn(Be.comparator),this.Fa=new Map,this.Ma=new gM,this.xa={},this.Oa=new Map,this.Na=zu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Jce(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,pe.Z)(function*(n,e,t=!0){const r=QC(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield M4(r,e,t,!0),i}),rR.apply(this,arguments)}function eue(n,e){return iR.apply(this,arguments)}function iR(){return iR=(0,pe.Z)(function*(n,e){const t=QC(n);yield M4(t,e,!0,!1)}),iR.apply(this,arguments)}function M4(n,e,t,r){return sR.apply(this,arguments)}function sR(){return sR=(0,pe.Z)(function*(n,e,t,r){const i=yield bf(n.localStore,Mi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield oR(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&KC(n.remoteStore,i),a}),sR.apply(this,arguments)}function oR(n,e,t,r,i){return aR.apply(this,arguments)}function aR(){return aR=(0,pe.Z)(function*(n,e,t,r,i){n.Ba=(m,_,v)=>{return(C=(0,pe.Z)(function*(T,B,P,$){let ee=B.view.da(P);ee.Xi&&(ee=yield zC(T.localStore,B.query,!1).then(({documents:R})=>B.view.da(R,ee)));const _e=$&&$.targetChanges.get(B.targetId),xe=$&&null!=$.targetMismatches.get(B.targetId),j=B.view.applyChanges(ee,T.isPrimaryClient,_e,xe);return yR(T,B.targetId,j.fa),j.snapshot}),function b(T,B,P,$){return C.apply(this,arguments)})(n,m,_,v);var C};const s=yield zC(n.localStore,e,!0),o=new A4(e,s.hs),a=o.da(s.documents),l=n_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);yR(n,t,c.fa);const h=new Yce(e,t,o);return n.ba.set(e,h),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),c.snapshot}),aR.apply(this,arguments)}function tue(n,e,t){return lR.apply(this,arguments)}function lR(){return lR=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Zm(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Tf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Sf(r.remoteStore,i.targetId),Pf(r,i.targetId)}).catch(Ql))):(Pf(r,i.targetId),yield Tf(r.localStore,i.targetId,!0))}),lR.apply(this,arguments)}function nue(n,e){return cR.apply(this,arguments)}function cR(){return cR=(0,pe.Z)(function*(n,e){const t=Le(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sf(t.remoteStore,r.targetId))}),cR.apply(this,arguments)}function uR(){return uR=(0,pe.Z)(function*(n,e,t){const r=MR(n);try{const i=yield function(o,a){const l=Le(o),c=Kn.now(),h=a.reduce((v,C)=>v.add(C.key),bt());let m,_;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=fs(),b=bt();return l.os.getEntries(v,h).next(T=>{C=T,C.forEach((B,P)=>{P.isValidDocument()||(b=b.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,C)).next(T=>{m=T;const B=[];for(const P of a){const $=kle(P,m.get(P.key).overlayedDocument);null!=$&&B.push(new Ba(P.key,$,Ej($.value.mapValue),Yn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,B,a)}).next(T=>{_=T;const B=T.applyToLocalDocumentSet(m,b);return l.documentOverlayCache.saveOverlays(v,T.batchId,B)})}).then(()=>({batchId:_.batchId,changes:jj(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Pn(_t)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,t),yield ja(r,i.changes),yield Af(r.remoteStore)}catch(i){const s=Rf(i,"Failed to persist write");t.reject(s)}}),uR.apply(this,arguments)}function R4(n,e){return dR.apply(this,arguments)}function dR(){return dR=(0,pe.Z)(function*(n,e){const t=Le(n);try{const r=yield function Ece(n,e){const t=Le(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((h,m)=>{const _=i.get(m);if(!_)return;a.push(t.Qr.removeMatchingKeys(s,h.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,h.addedDocuments,m)));let v=_.withSequenceNumber(s.currentSequenceNumber);var b,T,B;null!==e.targetMismatches.get(m)?v=v.withResumeToken(Gr.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(m,v),T=v,B=h,(0===(b=_).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,v))});let l=fs(),c=bt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(o4(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(et.min())){const h=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return se.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Je(o.wa):i.removedDocuments.size>0&&(Je(o.wa),o.wa=!1))}),yield ja(t,r,e)}catch(r){yield Ql(r)}}),dR.apply(this,arguments)}function k4(n,e,t){const r=Le(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Le(o);l.onlineState=a;let c=!1;l.queries.forEach((h,m)=>{for(const _ of m.U_)_.j_(a)&&(c=!0)}),c&&eR(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iue(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,pe.Z)(function*(n,e,t){const r=Le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Pn(Be.comparator);o=o.insert(s,jn.newNoDocument(s,et.min()));const a=bt().add(s),l=new t_(et.min(),new Map,new Pn(_t),o,a);yield R4(r,l),r.va=r.va.remove(s),r.Fa.delete(e),vR(r)}else yield Tf(r.localStore,e,!1).then(()=>Pf(r,e,t)).catch(Ql)}),hR.apply(this,arguments)}function sue(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,pe.Z)(function*(n,e){const t=Le(n),r=e.batch.batchId;try{const i=yield function wce(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const m=c.batch,_=m.keys();let v=se.resolve();return _.forEach(C=>{v=v.next(()=>h.getEntry(l,C)).next(b=>{const T=c.docVersions.get(C);Je(null!==T),b.version.compareTo(T)<0&&(m.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=bt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);_R(t,r,null),mR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ja(t,i)}catch(i){yield Ql(i)}}),fR.apply(this,arguments)}function oue(n,e,t){return pR.apply(this,arguments)}function pR(){return pR=(0,pe.Z)(function*(n,e,t){const r=Le(n);try{const i=yield function(o,a){const l=Le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(Je(null!==m),h=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);_R(r,e,t),mR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ja(r,i)}catch(i){yield Ql(i)}}),pR.apply(this,arguments)}function gR(){return gR=(0,pe.Z)(function*(n,e){const t=Le(n);cc(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Le(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Rf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),gR.apply(this,arguments)}function mR(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function _R(n,e,t){const r=Le(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Pf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||x4(n,r)})}function x4(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Sf(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),vR(n))}function yR(n,e,t){for(const r of t)r instanceof I4?(n.Ma.addReference(r.key,e),lue(n,r)):r instanceof S4?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||x4(n,r.key)):Ge()}function lue(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.Ca.add(r),vR(n))}function vR(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Be(Ut.fromString(e)),r=n.Na.next();n.Fa.set(r,new Qce(t)),n.va=n.va.insert(t,r),KC(n.remoteStore,new Ua(Mi(df(t.path)),r,"TargetPurposeLimboResolution",ks.oe))}}function ja(n,e,t){return wR.apply(this,arguments)}function wR(){return wR=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c&&!c.fromCache?"current":"not-current"),c){i.push(c);const h=wM.Ki(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,pe.Z)(function*(c,h){const m=Le(c);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>se.forEach(h,v=>se.forEach(v.qi,C=>m.persistence.referenceDelegate.addReference(_,v.targetId,C)).next(()=>se.forEach(v.Qi,C=>m.persistence.referenceDelegate.removeReference(_,v.targetId,C)))))}catch(_){if(!Xl(_))throw _;Ae("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of h){const v=_.targetId;if(!_.fromCache){const C=m.ns.get(v),T=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);m.ns=m.ns.insert(v,T)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,s))}),wR.apply(this,arguments)}function cue(n,e){return ER.apply(this,arguments)}function ER(){return ER=(0,pe.Z)(function*(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield i4(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(l=>{l.reject(new Te(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ja(t,r.us)}var s}),ER.apply(this,arguments)}function uue(n,e){const t=Le(n),r=t.Fa.get(e);if(r&&r.wa)return bt().add(r.key);{let i=bt();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function due(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,pe.Z)(function*(n,e){const t=Le(n),r=yield zC(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&yR(t,e.targetId,i.fa),i}),CR.apply(this,arguments)}function hue(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,pe.Z)(function*(n,e){const t=Le(n);return l4(t.localStore,e).then(r=>ja(t,r))}),DR.apply(this,arguments)}function fue(n,e,t,r){return bR.apply(this,arguments)}function bR(){return bR=(0,pe.Z)(function*(n,e,t,r){const i=Le(n),s=yield function(a,l){const c=Le(a),h=Le(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.vn(m,l).next(_=>_?c.localDocuments.getDocuments(m,_):se.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield Af(i.remoteStore):"acknowledged"===t||"rejected"===t?(_R(i,e,r||null),mR(i,e),l=e,Le(Le(i.localStore).mutationQueue).Mn(l)):Ge(),yield ja(i,s)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),bR.apply(this,arguments)}function TR(){return TR=(0,pe.Z)(function*(n,e){const t=Le(n);if(QC(t),MR(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield P4(t,r.toArray());t.La=!0,yield GM(t.remoteStore,!0);for(const s of i)KC(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Pf(t,o),Tf(t.localStore,o,!0))),Sf(t.remoteStore,o)}),yield i,yield P4(t,r),function(o){const a=Le(o);a.Fa.forEach((l,c)=>{Sf(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new Pn(Be.comparator)}(t),t.La=!1,yield GM(t.remoteStore,!1)}}),TR.apply(this,arguments)}function P4(n,e,t){return IR.apply(this,arguments)}function IR(){return IR=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=[],s=[];for(const o of e){let a;const l=r.Da.get(o);if(l&&0!==l.length){a=yield bf(r.localStore,Mi(l[0]));for(const c of l){const h=r.ba.get(c),m=yield due(r,h);m.snapshot&&s.push(m.snapshot)}}else{const c=yield a4(r.localStore,o);a=yield bf(r.localStore,c),yield oR(r,O4(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i}),IR.apply(this,arguments)}function O4(n){return Pj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gue(n){return t=Le(n).localStore,Le(Le(t).persistence).Bi();var t}function mue(n,e,t,r){return SR.apply(this,arguments)}function SR(){return SR=(0,pe.Z)(function*(n,e,t,r){const i=Le(n);if(i.La)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield l4(i.localStore,Vj(s[0])),a=t_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Gr.EMPTY_BYTE_STRING);yield ja(i,o,a);break}case"rejected":yield Tf(i.localStore,e,!0),Pf(i,e,r);break;default:Ge()}}),SR.apply(this,arguments)}function _ue(n,e,t){return AR.apply(this,arguments)}function AR(){return AR=(0,pe.Z)(function*(n,e,t){const r=QC(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ae("SyncEngine","Adding an already active target "+i);continue}const s=yield a4(r.localStore,i),o=yield bf(r.localStore,s);yield oR(r,O4(s),o.targetId,!1,o.resumeToken),KC(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield Tf(r.localStore,i,!1).then(()=>{Sf(r.remoteStore,i),Pf(r,i)}).catch(Ql))}}),AR.apply(this,arguments)}function QC(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=R4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iue.bind(null,e),e.Sa.h_=qce.bind(null,e.eventManager),e.Sa.ka=Gce.bind(null,e.eventManager),e}function MR(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oue.bind(null,e),e}class p_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.serializer=h_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return r4(this.persistence,new n4,e.initialUser,this.serializer)}createPersistence(e){return new mM(jC.Hr,this.serializer)}createSharedClientState(e){return new h4}terminate(){var e=this;return(0,pe.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class RR extends p_{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield MR(r.Qa.syncEngine),yield Af(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return r4(this.persistence,new n4,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new GH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new $ae(t,this.persistence);return new Hae(e.asyncQueue,r)}createPersistence(e){const t=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new yM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,p4(),ZC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new h4}}class N4 extends RR{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof AM&&(r.sharedClientState.syncEngine={Zs:fue.bind(null,i),Xs:mue.bind(null,i),eo:_ue.bind(null,i),Bi:gue.bind(null,i),Ys:hue.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,pe.Z)(function*(o){yield function pue(n,e){return TR.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=p4();if(!AM.D(t))throw new Te(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new AM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Of{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>k4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=cue.bind(null,r.syncEngine),yield GM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Wce}createDatastore(e){const t=h_(e.databaseInfo.databaseId),r=new Ace(e.databaseInfo);return new kce(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>k4(this.syncEngine,t,0),a=f4.D()?new f4:new Tce,new Pce(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const m=new Xce(i,s,o,a,l,c);return h&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,pe.Z)(function*(){var t,r;yield(r=(0,pe.Z)(function*(s){const o=Le(s);Ae("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield If(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function F4(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class XC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wue{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new qr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,pe.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new Zce(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,pe.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Eue{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Te(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,pe.Z)(function*(o,a){const l=Le(o),c={documents:a.map(v=>r_(l.serializer,v))},h=yield l.xo("BatchGetDocuments",l.serializer.databaseId,Ut.emptyPath(),c,a.length),m=new Map;h.forEach(v=>{const C=function Ule(n,e){return"found"in e?function(r,i){Je(!!i.found);const s=ta(r,i.found.name),o=Dr(i.found.updateTime),a=i.found.createTime?Dr(i.found.createTime):et.min(),l=new di({mapValue:{fields:i.found.fields}});return jn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Je(!!i.missing),Je(!!i.readTime);const s=ta(r,i.missing),o=Dr(i.readTime);return jn.newNoDocument(s,o)}(n,e):Ge()}(l.serializer,v);m.set(C.key.toString(),C)});const _=[];return a.forEach(v=>{const C=m.get(v.toString());Je(!!C),_.push(C)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _f(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Be.fromPath(i);e.mutations.push(new XA(s,e.precondition(s)))}),yield(r=(0,pe.Z)(function*(s,o){const a=Le(s),l={writes:o.map(c=>i_(a.serializer,c))};yield a.Co("Commit",a.serializer.databaseId,Ut.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ge();t=et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(et.min())?Yn.exists(!1):Yn.updateTime(t):Yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(et.min()))throw new Te(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Cue{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new RM(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,pe.Z)(function*(){const t=new Eue(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Um(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rH(t)}return!1}}class Due{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=ZU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,pe.Z)(function*(a){Ae("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Rf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function JC(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,pe.Z)(function*(s){r.isEqual(s)||(yield i4(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),kR.apply(this,arguments)}function xR(n,e){return PR.apply(this,arguments)}function PR(){return PR=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OR(n);Ae("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>E4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>E4(e.remoteStore,i)),n._onlineComponents=e}),PR.apply(this,arguments)}function L4(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function OR(n){return NR.apply(this,arguments)}function NR(){return NR=(0,pe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield JC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!L4(t))throw t;ds("Error using user provided cache. Falling back to memory cache: "+t),yield JC(n,new p_)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield JC(n,new p_);return n._offlineComponents}),NR.apply(this,arguments)}function eD(n){return FR.apply(this,arguments)}function FR(){return(FR=(0,pe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield xR(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield xR(n,new Of))),n._onlineComponents})).apply(this,arguments)}function V4(n){return OR(n).then(e=>e.persistence)}function Nf(n){return OR(n).then(e=>e.localStore)}function B4(n){return eD(n).then(e=>e.remoteStore)}function LR(n){return eD(n).then(e=>e.syncEngine)}function Ff(n){return VR.apply(this,arguments)}function VR(){return VR=(0,pe.Z)(function*(n){const e=yield eD(n),t=e.eventManager;return t.onListen=Jce.bind(null,e.syncEngine),t.onUnlisten=tue.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eue.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nue.bind(null,e.syncEngine),t}),VR.apply(this,arguments)}function j4(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,o,a,l,c){const h=new XC({next:_=>{o.enqueueAndForget(()=>XM(s,m));const v=_.docs.has(a);!v&&_.fromCache?c.reject(new Te(le.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&l&&"server"===l.source?c.reject(new Te(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(_)},error:_=>c.reject(_)}),m=new nR(df(a.path),h,{includeMetadataChanges:!0,ra:!0});return YM(s,m)}(yield Ff(n),n.asyncQueue,e,t,r)})),r.promise}function H4(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,o,a,l,c){const h=new XC({next:_=>{o.enqueueAndForget(()=>XM(s,m)),_.fromCache&&"server"===l.source?c.reject(new Te(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(_)},error:_=>c.reject(_)}),m=new nR(a,h,{includeMetadataChanges:!0,ra:!0});return YM(s,m)}(yield Ff(n),n.asyncQueue,e,t,r)})),r.promise}function $4(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const z4=new Map;function BR(n,e,t){if(!t)throw new Te(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W4(n,e,t,r){if(!0===e&&!0===r)throw new Te(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function q4(n){if(!Be.isDocumentKey(n))throw new Te(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function G4(n){if(Be.isDocumentKey(n))throw new Te(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ge()}function Nt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tD(n);throw new Te(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Z4(n,e){if(e<=0)throw new Te(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class K4{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=$4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K4(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Rae;switch(r.type){case"firstParty":return new Oae(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=z4.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),z4.delete(t),r.terminate())}(this),Promise.resolve()}}class hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class Hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class na extends hi{constructor(e,t,r){super(e,t,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new Be(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function Q4(n,e,...t){if(n=(0,an.m9)(n),BR("collection","path",e),n instanceof g_){const r=Ut.fromString(e,...t);return G4(r),new na(n,null,r)}{if(!(n instanceof Hn||n instanceof na))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return G4(r),new na(n.firestore,null,r)}}function nD(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=ZU.newId()),BR("doc","path",e),n instanceof g_){const r=Ut.fromString(e,...t);return q4(r),new Hn(n,null,new Be(r))}{if(!(n instanceof Hn||n instanceof na))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return q4(r),new Hn(n.firestore,n instanceof na?n.converter:null,new Be(r))}}function X4(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof Hn||n instanceof na)&&(e instanceof Hn||e instanceof na)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function UR(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof hi&&e instanceof hi&&n.firestore===e.firestore&&Zm(n._query,e._query)&&n.converter===e.converter}class Fue{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new RM(this,"async_queue_retry"),this.hu=()=>{const t=ZC();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=ZC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=ZC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new qr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,pe.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Xl(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=KM.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ge()}verifyOperationInProgress(){}du(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function jR(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Lue{constructor(){this._progressObserver={},this._taskCompletionResolver=new qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Dn extends g_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fue,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||J4(this),this._firestoreClient.terminate()}}function Qn(n){return n._firestoreClient||J4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function J4(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ule(n._databaseId,l,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$4(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new Due(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function e$(n,e,t){const r=new qr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield JC(n,t),yield xR(n,e),r.resolve()}catch(i){const s=i;if(!L4(s))throw s;ds("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function t$(n){if(n._initialized||n._terminated)throw new Te(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(Gr.fromBase64String(e))}catch(t){throw new Te(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ra(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ha{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qu{constructor(e){this._methodName=e}}class rD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}}const Zue=/^__.*__$/;class Kue{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ba(e,this.data,this.fieldMask,t,this.fieldTransforms):new mf(e,this.data,t,this.fieldTransforms)}}class n${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ba(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function r$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge()}}class iD{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new iD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return aD(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(r$(this.fu)&&Zue.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Yue{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||h_(e)}Fu(e,t,r,i=!1){return new iD({fu:e,methodName:t,vu:r,path:Un.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(n){const e=n._freezeSettings(),t=h_(n._databaseId);return new Yue(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sD(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);ZR("Data must be an object, but it was:",o,r);const a=o$(r,o);let l,c;if(s.merge)l=new hs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const _=y_(e,m,t);if(!o.contains(_))throw new Te(le.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);l$(h,_)||h.push(_)}l=new hs(h),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new Kue(new di(a),l,c)}class __ extends qu{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __}}function i$(n,e,t){return new iD({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class HR extends qu{_toFieldTransform(e){return new Xm(e.path,new pf)}isEqual(e){return e instanceof HR}}class $R extends qu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=i$(this,e,!0),r=this.Mu.map(s=>Zu(s,t)),i=new Lu(r);return new Xm(e.path,i)}isEqual(e){return e instanceof $R&&(0,an.vZ)(this.Mu,e.Mu)}}class zR extends qu{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=i$(this,e,!0),r=this.Mu.map(s=>Zu(s,t)),i=new Vu(r);return new Xm(e.path,i)}isEqual(e){return e instanceof zR&&(0,an.vZ)(this.Mu,e.Mu)}}class WR extends qu{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new gf(e.serializer,Wj(e.serializer,this.xu));return new Xm(e.path,t)}isEqual(e){return e instanceof WR&&this.xu===e.xu}}function qR(n,e,t,r){const i=n.Fu(1,e,t);ZR("Data must be an object, but it was:",i,r);const s=[],o=di.empty();Jl(r,(l,c)=>{const h=oD(e,l,t);c=(0,an.m9)(c);const m=i.Su(h);if(c instanceof __)s.push(h);else{const _=Zu(c,m);null!=_&&(s.push(h),o.set(h,_))}});const a=new hs(s);return new n$(o,a,i.fieldTransforms)}function GR(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[y_(e,r,t)],l=[i];if(s.length%2!=0)throw new Te(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(y_(e,s[_])),l.push(s[_+1]);const c=[],h=di.empty();for(let _=a.length-1;_>=0;--_)if(!l$(c,a[_])){const v=a[_];let C=l[_];C=(0,an.m9)(C);const b=o.Su(v);if(C instanceof __)c.push(v);else{const T=Zu(C,b);null!=T&&(c.push(v),h.set(v,T))}}const m=new hs(c);return new n$(h,m,o.fieldTransforms)}function s$(n,e,t,r=!1){return Zu(t,n.Fu(r?4:3,e))}function Zu(n,e){if(a$(n=(0,an.m9)(n)))return ZR("Unsupported field value:",e,n),o$(n,e);if(n instanceof qu)return function(r,i){if(!r$(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Zu(a,i.bu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,an.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Wj(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Kn.fromDate(r);return{timestampValue:yf(i.serializer,s)}}if(r instanceof Kn){const s=new Kn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yf(i.serializer,s)}}if(r instanceof rD)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ra)return{bytesValue:fH(i.serializer,r._byteString)};if(r instanceof Hn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iM(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${tD(r)}`)}(n,e)}function o$(n,e){const t={};return hj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jl(n,(r,i)=>{const s=Zu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function a$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof rD||n instanceof ra||n instanceof Hn||n instanceof qu)}function ZR(n,e,t){if(!a$(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=tD(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function y_(n,e,t){if((e=(0,an.m9)(e))instanceof Ha)return e._internalPath;if("string"==typeof e)return oD(n,e);throw aD("Field path arguments must be of type string or ",n,!1,void 0,t)}const Que=new RegExp("[~\\*/\\[\\]]");function oD(n,e,t){if(e.search(Que)>=0)throw aD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ha(...e.split("."))._internalPath}catch{throw aD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aD(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Te(le.INVALID_ARGUMENT,a+n+l)}function l$(n,e){return n.some(t=>t.isEqual(e))}class v_{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Xue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Xue extends v_{data(){return super.data()}}function lD(n,e){return"string"==typeof e?oD(n,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}function c$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KR{}class w_ extends KR{}function dc(n,e,...t){let r=[];e instanceof KR&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Lf).length,a=s.filter(l=>l instanceof E_).length;if(o>1||o>0&&a>0)throw new Te(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class E_ extends w_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new E_(e,t,r)}_apply(e){const t=this._parse(e);return f$(e._query,t),new hi(e.firestore,e.converter,YA(e._query,t))}_parse(e){const t=Gu(e.firestore);return function(s,o,a,l,c,h,m){let _;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Te(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){h$(m,h);const v=[];for(const C of m)v.push(d$(l,s,C));_={arrayValue:{values:v}}}else _=d$(l,s,m)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||h$(m,h),_=s$(a,"where",m,"in"===h||"not-in"===h);return jt.create(c,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Lf extends KR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)f$(o,l),o=YA(o,l)}(e._query,t),new hi(e.firestore,e.converter,YA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class YR extends w_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new YR(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qm(s,o)}(e._query,this._field,this._direction);return new hi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new La(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class cD extends w_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new cD(e,t,r)}_apply(e){return new hi(e.firestore,e.converter,SC(e._query,this._limit,this._limitType))}}class uD extends w_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uD(e,t,r)}_apply(e){const t=u$(e,this.type,this._docOrFields,this._inclusive);return new hi(e.firestore,e.converter,(s=t,new La((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class dD extends w_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dD(e,t,r)}_apply(e){const t=u$(e,this.type,this._docOrFields,this._inclusive);return new hi(e.firestore,e.converter,(s=t,new La((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function u$(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof v_)return function(s,o,a,l,c){if(!l)throw new Te(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const m of hf(s))if(m.field.isKeyField())h.push(Nu(o,l.key));else{const _=l.data.field(m.field);if(wC(_))throw new Te(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=m.field.canonicalString();throw new Te(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(_)}return new ic(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Gu(n.firestore);return function(o,a,l,c,h,m){const _=o.explicitOrderBy;if(h.length>_.length)throw new Te(le.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let C=0;C<h.length;C++){const b=h[C];if(_[C].field.isKeyField()){if("string"!=typeof b)throw new Te(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof b}`);if(!KA(o)&&-1!==b.indexOf("/"))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${b}' contains a slash.`);const T=o.path.child(Ut.fromString(b));if(!Be.isDocumentKey(T))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const B=new Be(T);v.push(Nu(a,B))}else{const T=s$(l,c,b);v.push(T)}}return new ic(v,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function d$(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new Te(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KA(e)&&-1!==t.indexOf("/"))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ut.fromString(t));if(!Be.isDocumentKey(r))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nu(n,new Be(r))}if(t instanceof Hn)return Nu(n,t._key);throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tD(t)}.`)}function h$(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f$(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Te(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class QR{convertValue(e,t="none"){switch(nc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new rD(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=EC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hm(e));default:return null}}convertTimestamp(e){const t=Na(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ut.fromString(e);Je(TH(r));const i=new ec(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(t)||Cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function hD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ade extends QR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}class Ku{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends v_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new C_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class C_ extends $a{data(e={}){return super.data(e)}}class hc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ku(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new C_(this._firestore,this._userDataWriter,r.key,r,new Ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new C_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ku(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new C_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ku(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:cde(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cde(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge()}}function g$(n,e){return n instanceof $a&&e instanceof $a?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hc&&e instanceof hc&&n._firestore===e._firestore&&UR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class fc extends QR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function m$(n,e,t){n=Nt(n,Hn);const r=Nt(n.firestore,Dn),i=hD(n.converter,e,t);return Vf(r,[sD(Gu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yn.none())])}function _$(n,e,t,...r){n=Nt(n,Hn);const i=Nt(n.firestore,Dn),s=Gu(i);let o;return o="string"==typeof(e=(0,an.m9)(e))||e instanceof Ha?GR(s,"updateDoc",n._key,e,t,r):qR(s,"updateDoc",n._key,e),Vf(i,[o.toMutation(n._key,Yn.exists(!0))])}function y$(n,...e){var t,r,i;n=(0,an.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||jR(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(jR(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let l,c,h;if(n instanceof Hn)c=Nt(n.firestore,Dn),h=df(n._key.path),l={next:m=>{e[o]&&e[o](XR(c,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Nt(n,hi);c=Nt(m.firestore,Dn),h=m._query;const _=new fc(c);l={next:v=>{e[o]&&e[o](new hc(c,_,m,v))},error:e[o+1],complete:e[o+2]},c$(n._query)}return function(_,v,C,b){const T=new XC(b),B=new nR(v,T,C);return _.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return YM(yield Ff(_),B)})),()=>{T.$a(),_.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return XM(yield Ff(_),B)}))}}(Qn(c),h,a,l)}function Vf(n,e){return function(r,i){const s=new qr;return r.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function rue(n,e,t){return uR.apply(this,arguments)}(yield LR(r),i,s)})),s.promise}(Qn(n),e)}function XR(n,e,t){const r=t.docs.get(e._key),i=new fc(n);return new $a(n,i,e._key,r,new Ku(t.hasPendingWrites,t.fromCache),e.converter)}const Sde={maxAttempts:5};class v${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gu(e)}set(e,t,r){this._verifyNotCommitted();const i=pc(e,this._firestore),s=hD(i.converter,t,r),o=sD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=pc(e,this._firestore);let o;return o="string"==typeof(t=(0,an.m9)(t))||t instanceof Ha?GR(this._dataReader,"WriteBatch.update",s._key,t,r,i):qR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pc(e,this._firestore);return this._mutations=this._mutations.concat(new _f(t._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pc(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new Te(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ade extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Gu(t)}get(t){const r=pc(t,this._firestore),i=new ade(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ge();const o=s[0];if(o.isFoundDocument())return new v_(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new v_(this._firestore,i,r._key,null,r.converter);throw Ge()})}set(t,r,i){const s=pc(t,this._firestore),o=hD(s.converter,r,i),a=sD(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=pc(t,this._firestore);let a;return a="string"==typeof(r=(0,an.m9)(r))||r instanceof Ha?GR(this._dataReader,"Transaction.update",o._key,r,i,s):qR(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=pc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pc(e,this._firestore),r=new fc(this._firestore);return super.get(e).then(i=>new $a(this._firestore,r,t._key,i._document,new Ku(!1,!1),t.converter))}}function ek(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function D$(){if(typeof Uint8Array>"u")throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function b$(){if(!function lle(){return typeof atob<"u"}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){tf=Xh.SDK_VERSION,(0,Xh._registerComponent)(new NU.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Dn(new xae(r.getProvider("auth-internal")),new Nae(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Te(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Xh.registerVersion)(WU,"4.6.3",e),(0,Xh.registerVersion)(WU,"4.6.3","esm2017")}();class D_{constructor(e){this._delegate=e}static fromBase64String(e){return b$(),new D_(ra.fromBase64String(e))}static fromUint8Array(e){return D$(),new D_(ra.fromUint8Array(e))}toBase64(){return b$(),this._delegate.toBase64()}toUint8Array(){return D$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tk(n){return function Vde(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Bde{enableIndexedDbPersistence(e,t){return function Bue(n,e){t$(n=Nt(n,Dn));const t=Qn(n);if(t._uninitializedComponentsProvider)throw new Te(le.FAILED_PRECONDITION,"SDK cache is already specified.");ds("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Of;return e$(t,i,new RR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Uue(n){t$(n=Nt(n,Dn));const e=Qn(n);if(e._uninitializedComponentsProvider)throw new Te(le.FAILED_PRECONDITION,"SDK cache is already specified.");ds("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Of;return e$(e,r,new N4(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jue(n){if(n._initialized&&!n._terminated)throw new Te(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(i){if(!Qo.D())return Promise.resolve();const s=i+"main";yield Qo.delete(s)}),function r(i){return t.apply(this,arguments)})(vM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class T${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ec||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ds("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Y4(n,e,t,r={}){var i;const s=(n=Nt(n,g_))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=ti.MOCK_USER;else{a=(0,an.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Te(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ti(c)}n._authCredentials=new kae(new qU(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function $ue(n){return function bue(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield V4(n),t=yield B4(n);return e.setNetworkEnabled(!0),function(i){const s=Le(i);return s.M_.delete(0),f_(s)}(t)}))}(Qn(n=Nt(n,Dn)))}(this._delegate)}disableNetwork(){return function zue(n){return function Tue(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield V4(n),t=yield B4(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(s){const o=Le(s);o.M_.add(0),yield If(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Qn(n=Nt(n,Dn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,W4("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hue(n){return function(t){const r=new qr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function aue(n,e){return gR.apply(this,arguments)}(yield LR(t),r)})),r.promise}(Qn(n=Nt(n,Dn)))}(this._delegate)}onSnapshotsInSync(e){return function yde(n,e){return function Mue(n,e){const t=new XC(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield Ff(n),s=t,Le(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield Ff(n),s=t,void Le(i).z_.delete(s);var i,s}))}}(Qn(n=Nt(n,Dn)),jR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bf(this,Q4(this._delegate,e))}catch(t){throw qi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qs(this,nD(this._delegate,e))}catch(t){throw qi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gi(this,function Nue(n,e){if(n=Nt(n,g_),BR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hi(n,null,(r=e,new La(Ut.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw qi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Mde(n,e,t){n=Nt(n,Dn);const r=Object.assign(Object.assign({},Sde),t);return function(s){if(s.maxAttempts<1)throw new Te(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new qr;return s.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const c=yield function U4(n){return eD(n).then(e=>e.datastore)}(s);new Cue(s.asyncQueue,c,a,o,l).Xa()})),l.promise}(Qn(n),i=>e(new Ade(n,i)),r)}(this._delegate,t=>e(new I$(this,t)))}batch(){return Qn(this._delegate),new S$(new v$(this._delegate,e=>Vf(this._delegate,e)))}loadBundle(e){return function Wue(n,e){const t=Qn(n=Nt(n,Dn)),r=new Lue;return function Rue(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?sH().encode(o):o,h=function(h,m){if(h instanceof Uint8Array)return F4(h,m);if(h instanceof ArrayBuffer)return F4(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new wue(h,a);var h}(t,h_(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function yue(n,e,t){const r=Le(n);var i;(i=(0,pe.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(C,b){const T=Le(C),B=Dr(b.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",P=>T.$r.getBundleMetadata(P,b.id)).then(P=>!!P&&P.createTime.compareTo(B)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(C=c).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);l._updateProgress(T4(c));const h=new Kce(c,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const v=yield h._a(m);v&&l._updateProgress(v),m=yield a.qa()}const _=yield h.complete();return yield ja(o,_.ca,void 0),yield function(C,b){const T=Le(C);return T.persistence.runTransaction("Save bundle","readwrite",B=>T.$r.saveBundleMetadata(B,b))}(o.localStore,c),l._completeWith(_.progress),Promise.resolve(_.ua)}catch(c){return ds("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var C}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield LR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function que(n,e){return function kue(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(r,i){const s=Le(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Nf(n),e)}))}(Qn(n=Nt(n,Dn)),e).then(t=>t?new hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Gi(this,t):null)}}class pD extends QR{constructor(e){super(),this.firestore=e}convertBytes(e){return new D_(new ra(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qs.forKey(t,this.firestore,null)}}class I${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pD(e)}get(e){const t=Qu(e);return this._delegate.get(t).then(r=>new b_(this._firestore,new $a(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Qu(e);return r?(ek("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Qu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Qu(e);return this._delegate.delete(t),this}}class S${constructor(e){this._delegate=e}set(e,t,r){const i=Qu(e);return r?(ek("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Qu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Qu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new C_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Yu(e,new pD(e),t),i.set(t,s)),s}}Yu.INSTANCES=new WeakMap;class Qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qs(t,new Hn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new Qs(t,new Hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Bf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bf(this.firestore,Q4(this._delegate,e))}catch(t){throw qi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof Hn&&X4(this._delegate,e)}set(e,t){t=ek("DocumentReference.set",t);try{return t?m$(this._delegate,e,t):m$(this._delegate,e)}catch(r){throw qi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_$(this._delegate,e):_$(this._delegate,e,t,...r)}catch(i){throw qi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function mde(n){return Vf(Nt(n.firestore,Dn),[new _f(n._key,Yn.none())])}(this._delegate)}onSnapshot(...e){const t=A$(e),r=M$(e,i=>new b_(this.firestore,new $a(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return y$(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function dde(n){n=Nt(n,Hn);const e=Nt(n.firestore,Dn),t=Qn(e),r=new fc(e);return function Iue(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,o,a){try{const l=yield function(h,m){const _=Le(h);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,m))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Te(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Rf(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Nf(n),e,t);var r})),t.promise}(t,n._key).then(i=>new $a(e,r,n._key,i,new Ku(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function hde(n){n=Nt(n,Hn);const e=Nt(n.firestore,Dn);return j4(Qn(e),n._key,{source:"server"}).then(t=>XR(e,n,t))}(this._delegate):function ude(n){n=Nt(n,Hn);const e=Nt(n.firestore,Dn);return j4(Qn(e),n._key).then(t=>XR(e,n,t))}(this._delegate),t.then(r=>new b_(this.firestore,new $a(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?Yu.getInstance(this.firestore,e):null))}}function qi(n,e,t){return n.message=n.message.replace(e,t),n}function A$(n){for(const e of n)if("object"==typeof e&&!tk(e))return e;return{}}function M$(n,e){var t,r;let i;return i=tk(n[0])?n[0]:tk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class b_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return g$(this._delegate,e._delegate)}}class T_ extends b_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Mae(n,e){n||Ge()}(void 0!==t),t}}class Gi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pD(e)}where(e,t,r){try{return new Gi(this.firestore,dc(this._delegate,function Jue(n,e,t){const r=e,i=lD("where",n);return E_._create(i,r,t)}(e,t,r)))}catch(i){throw qi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gi(this.firestore,dc(this._delegate,function ede(n,e="asc"){const t=e,r=lD("orderBy",n);return YR._create(r,t)}(e,t)))}catch(r){throw qi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gi(this.firestore,dc(this._delegate,function tde(n){return Z4("limit",n),cD._create("limit",n,"F")}(e)))}catch(t){throw qi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gi(this.firestore,dc(this._delegate,function nde(n){return Z4("limitToLast",n),cD._create("limitToLast",n,"L")}(e)))}catch(t){throw qi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gi(this.firestore,dc(this._delegate,function rde(...n){return uD._create("startAt",n,!0)}(...e)))}catch(t){throw qi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gi(this.firestore,dc(this._delegate,function ide(...n){return uD._create("startAfter",n,!1)}(...e)))}catch(t){throw qi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gi(this.firestore,dc(this._delegate,function sde(...n){return dD._create("endBefore",n,!1)}(...e)))}catch(t){throw qi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gi(this.firestore,dc(this._delegate,function ode(...n){return dD._create("endAt",n,!0)}(...e)))}catch(t){throw qi(t,"endAt()","Query.endAt()")}}isEqual(e){return UR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function pde(n){n=Nt(n,hi);const e=Nt(n.firestore,Dn),t=Qn(e),r=new fc(e);return function Sue(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,o,a){try{const l=yield zC(s,o,!0),c=new A4(o,l.hs),h=c.da(l.documents),m=c.applyChanges(h,!1);a.resolve(m.snapshot)}catch(l){const c=Rf(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Nf(n),e,t);var r})),t.promise}(t,n._query).then(i=>new hc(e,r,n,i))}(this._delegate):"server"===e?.source?function gde(n){n=Nt(n,hi);const e=Nt(n.firestore,Dn),t=Qn(e),r=new fc(e);return H4(t,n._query,{source:"server"}).then(i=>new hc(e,r,n,i))}(this._delegate):function fde(n){n=Nt(n,hi);const e=Nt(n.firestore,Dn),t=Qn(e),r=new fc(e);return c$(n._query),H4(t,n._query).then(i=>new hc(e,r,n,i))}(this._delegate),t.then(r=>new nk(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=A$(e),r=M$(e,i=>new nk(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return y$(this._delegate,t,r)}withConverter(e){return new Gi(this.firestore,this._delegate.withConverter(e?Yu.getInstance(this.firestore,e):null))}}class jde{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new jde(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new T_(this._firestore,r))})}isEqual(e){return g$(this._delegate,e._delegate)}}class Bf extends Gi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qs(this.firestore,e):null}doc(e){try{return new Qs(this.firestore,void 0===e?nD(this._delegate):nD(this._delegate,e))}catch(t){throw qi(t,"doc()","CollectionReference.doc()")}}add(e){return function _de(n,e){const t=Nt(n.firestore,Dn),r=nD(n),i=hD(n.converter,e);return Vf(t,[sD(Gu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Qs(this.firestore,t))}isEqual(e){return X4(this._delegate,e._delegate)}withConverter(e){return new Bf(this.firestore,this._delegate.withConverter(e?Yu.getInstance(this.firestore,e):null))}}function Qu(n){return Nt(n,Hn)}class rk{constructor(...e){this._delegate=new Ha(...e)}static documentId(){return new rk(Un.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Ha&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function kde(){return new HR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xu(e)}static delete(){const e=function Rde(){return new __("deleteField")}();return e._methodName="FieldValue.delete",new Xu(e)}static arrayUnion(...e){const t=function xde(...n){return new $R("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xu(t)}static arrayRemove(...e){const t=function Pde(...n){return new zR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xu(t)}static increment(e){const t=function Ode(n){return new WR("increment",n)}(e);return t._methodName="FieldValue.increment",new Xu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Hde={Firestore:T$,GeoPoint:rD,Timestamp:Kn,Blob:D_,Transaction:I$,WriteBatch:S$,DocumentReference:Qs,DocumentSnapshot:b_,Query:Gi,QueryDocumentSnapshot:T_,QuerySnapshot:nk,CollectionReference:Bf,FieldPath:rk,FieldValue:Xu,setLogLevel:function Ude(n){!function Aae(n){Yl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function R$(n,e){return function Wde(n,e=Vh){return new dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ik(n,e){return R$(n,e).pipe(Oe(t=>({payload:t,type:"query"})))}!function zde(n){(function $de(n,e){n.INTERNAL.registerComponent(new NU.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Hde)))})(n,(e,t)=>new T$(e,t,new Bde)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Kl.Z);class k${ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=L$(r,t);return new O$(i,s,this.afs)}snapshotChanges(){return function qde(n,e){return R$(n,e).pipe(Zs(void 0),Wh(),Oe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ms)}valueChanges(e={}){return this.snapshotChanges().pipe(Oe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return q(this.ref.get(e)).pipe(Ms)}}function gD(n,e){return ik(n,e).pipe(Zs(void 0),Wh(),Oe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(m=>m.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function x$(n,e,t){return gD(n,t).pipe($w((r,i)=>function Gde(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Zde(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return sk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return sk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),pr(),Oe(r=>r.map(i=>({type:i.type,payload:i}))))}function sk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function P$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class O${ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Zs(void 0),Wh(),dn(([r,i])=>i.length>0||!r),Oe(([,r])=>r),Ms)}auditTrail(e){return this.stateChanges(e).pipe($w((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=P$(e);return x$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ms)}valueChanges(e={}){return ik(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ms)}get(e){return q(this.query.get(e)).pipe(Ms)}add(e){return this.ref.add(e)}doc(e){return new k$(this.ref.doc(e),this.afs)}}class Kde{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gD(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),dn(t=>t.length>0),Ms):gD(this.query,this.afs.schedulers.outsideAngular).pipe(Ms)}auditTrail(e){return this.stateChanges(e).pipe($w((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=P$(e);return x$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ms)}valueChanges(e={}){return ik(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ms)}get(e){return q(this.query.get(e)).pipe(Ms)}}const N$=new Ee("angularfire2.enableFirestorePersistence"),F$=new Ee("angularfire2.firestore.persistenceSettings"),Yde=new Ee("angularfire2.firestore.settings"),Qde=new Ee("angularfire2.firestore.use-emulator");function L$(n,e=(t=>t)){return{query:e(n),ref:n}}let ok=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,h,m,_,v,C,b,T,B,P){this.schedulers=l;const $=NA(t,a,r),ee=h;m&&PU($,a,_,C,b,T,v,B),[this.firestore,this.persistenceEnabled$]=bU(`${$.name}.firestore`,"AngularFirestore",$.name,()=>{const _e=a.runOutsideAngular(()=>$.firestore());if(s&&_e.settings(s),ee&&_e.useEmulator(...ee),i&&!Nw(o)){const xe=()=>{try{return q(_e.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),ge(!1)}};return[_e,a.runOutsideAngular(xe)]}return[_e,ge(!1)]},[s,ee,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=L$(i,r),a=this.schedulers.ngZone.run(()=>s);return new O$(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Kde(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new k$(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Q(fC),Q(pC,8),Q(N$,8),Q(Yde,8),Q(Us),Q(it),Q(CU),Q(F$,8),Q(Qde,8),Q(OU,8),Q(SU,8),Q(AU,8),Q(MU,8),Q(RU,8),Q(kU,8),Q(xU,8),Q(wU,8))};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Xde=(()=>{class n{constructor(){Kl.Z.registerVersion("angularfire",OA.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:N$,useValue:!0},{provide:F$,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ht({type:n});static \u0275inj=Wt({providers:[ok]})}return n})(),I_=(()=>{class n{constructor(t){this.firestore=t}getProjects(){return this.firestore.collection("projects").valueChanges()}addProject(t){const r=this.firestore.createId();return this.firestore.collection("projects").doc(r).set({...t,id:r})}updateProject(t){return t.id?this.firestore.collection("projects").doc(t.id).set(t):Promise.reject("Project ID is missing")}deleteProject(t){return t.id?this.firestore.collection("projects").doc(t.id).delete():Promise.reject("Project ID is missing")}static#e=this.\u0275fac=function(r){return new(r||n)(Q(ok))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jde(n,e){if(1&n&&(S(0,"option",29),G(1),M()),2&n){const t=e.$implicit;te("value",t.id),K(1),St(t.name)}}function ehe(n,e){if(1&n&&(S(0,"option",29),G(1),M()),2&n){const t=e.$implicit;te("value",t),K(1),St(t)}}function the(n,e){if(1&n){const t=Lt();S(0,"div")(1,"label"),G(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),M(),S(3,"input",41),ye("ngModelChange",function(i){return De(t),be(oe(3).task.repeatSettings.daysOffsetFromEnd=i)}),M()()}if(2&n){const t=oe(3);K(3),te("ngModel",t.task.repeatSettings.daysOffsetFromEnd)}}function nhe(n,e){if(1&n){const t=Lt();S(0,"div"),G(1),S(2,"button",5),ye("click",function(){const s=De(t).$implicit;return be(oe(3).removeExcludeDate(s))}),G(3,"\u524a\u9664"),M()()}if(2&n){const t=e.$implicit;K(1),jo(" ",t," ")}}function rhe(n,e){if(1&n){const t=Lt();S(0,"div",6)(1,"span",7),G(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),M(),S(3,"span",8)(4,"div",30)(5,"div")(6,"label"),G(7,"\u983b\u5ea6:"),M(),S(8,"select",10),ye("ngModelChange",function(i){return De(t),be(oe(2).task.repeatSettings.frequency=i)}),S(9,"option",31),G(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),M(),S(11,"option",32),G(12,"\u6bce\u65e5"),M(),S(13,"option",33),G(14,"\u6bce\u9031"),M(),S(15,"option",34),G(16,"\u6bce\u6708"),M(),S(17,"option",35),G(18,"\u6bce\u5e74"),M(),S(19,"option",36),G(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),M()()(),Ne(21,the,4,1,"div",37),S(22,"div")(23,"label"),G(24,"\u7d42\u4e86\u65e5:"),M(),S(25,"input",38),ye("ngModelChange",function(i){return De(t),be(oe(2).task.repeatSettings.endDate=i)}),M()(),S(26,"div")(27,"label"),G(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),M(),S(29,"input",39),ye("ngModelChange",function(i){return De(t),be(oe(2).task.repeatSettings.businessDaysOnly=i)}),M()(),S(30,"div")(31,"label"),G(32,"\u9664\u5916\u65e5:"),M(),S(33,"input",38),ye("ngModelChange",function(i){return De(t),be(oe(2).excludeDate=i)}),M(),S(34,"button",5),ye("click",function(){return De(t),be(oe(2).addExcludeDate())}),G(35,"\u8ffd\u52a0"),M(),Ne(36,nhe,4,1,"div",40),M()()()()}if(2&n){const t=oe(2);K(8),te("ngModel",t.task.repeatSettings.frequency),K(13),te("ngIf","monthlyFromEnd"===t.task.repeatSettings.frequency),K(4),te("ngModel",t.task.repeatSettings.endDate),K(4),te("ngModel",t.task.repeatSettings.businessDaysOnly),K(4),te("ngModel",t.excludeDate),K(3),te("ngForOf",t.task.repeatSettings.excludeDates)}}const ihe=function(n){return{selected:n}},she=function(n){return{"background-color":n}};function ohe(n,e){if(1&n){const t=Lt();S(0,"div",42),ye("click",function(){const s=De(t).$implicit;return be(oe(2).selectColor(s))}),M()}if(2&n){const t=e.$implicit,r=oe(2);te("ngClass",po(2,ihe,r.task.tagColor===t))("ngStyle",po(4,she,t))}}function ahe(n,e){if(1&n){const t=Lt();S(0,"li",43)(1,"span",44),G(2),M(),S(3,"button",5),ye("click",function(){const s=De(t).index;return be(oe(2).deleteSubtask(s))}),G(4,"\u524a\u9664"),M()()}if(2&n){const t=e.$implicit;K(2),St(t.title)}}function lhe(n,e){if(1&n){const t=Lt();S(0,"div",1)(1,"div",2)(2,"h2",3),G(3),M(),S(4,"div",4)(5,"button",5),ye("click",function(){return De(t),be(oe().saveTask())}),G(6,"\u4fdd\u5b58"),M(),S(7,"button",5),ye("click",function(){return De(t),be(oe().duplicateTask())}),G(8,"\u8907\u88fd"),M(),S(9,"button",5),ye("click",function(){return De(t),be(oe().cancel())}),G(10,"\u30ad\u30e3\u30f3\u30bb\u30eb"),M()()(),S(11,"div",6)(12,"span",7),G(13,"\u30bf\u30a4\u30c8\u30eb:"),M(),S(14,"span",8)(15,"input",9),ye("ngModelChange",function(i){return De(t),be(oe().task.title=i)}),M()()(),S(16,"div",6)(17,"span",7),G(18,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),M(),S(19,"span",8)(20,"select",10),ye("ngModelChange",function(i){return De(t),be(oe().task.projectId=i)}),S(21,"option",11),G(22,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),M(),Ne(23,Jde,2,2,"option",12),M()()(),S(24,"div",6)(25,"span",7),G(26,"\u8aac\u660e:"),M(),S(27,"span",8)(28,"textarea",13),ye("ngModelChange",function(i){return De(t),be(oe().task.description=i)}),M()()(),S(29,"div",6)(30,"span",7),G(31,"\u958b\u59cb\u65e5\u6642:"),M(),S(32,"span",8)(33,"input",14),ye("ngModelChange",function(i){return De(t),be(oe().task.startDateTime=i)}),M()()(),S(34,"div",6)(35,"span",7),G(36,"\u7d42\u4e86\u65e5\u6642:"),M(),S(37,"span",8)(38,"input",14),ye("ngModelChange",function(i){return De(t),be(oe().task.endDateTime=i)}),M()()(),S(39,"div",6)(40,"span",7),G(41,"\u901a\u77e5:"),M(),S(42,"span",8)(43,"input",15),ye("ngModelChange",function(i){return De(t),be(oe().task.reminderTime.value=i)}),M(),S(44,"select",16),ye("ngModelChange",function(i){return De(t),be(oe().task.reminderTime.unit=i)}),Ne(45,ehe,2,2,"option",12),M()()(),Ne(46,rhe,37,6,"div",17),S(47,"div",6)(48,"span",7),G(49,"\u512a\u5148\u5ea6:"),M(),S(50,"span",8)(51,"select",10),ye("ngModelChange",function(i){return De(t),be(oe().task.priority=i)}),S(52,"option",18),G(53,"\u4f4e"),M(),S(54,"option",19),G(55,"\u4e2d"),M(),S(56,"option",20),G(57,"\u9ad8"),M()()()(),S(58,"div",6)(59,"span",7),G(60,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),M(),S(61,"span",8)(62,"select",10),ye("ngModelChange",function(i){return De(t),be(oe().task.status=i)}),S(63,"option",21),G(64,"\u672a\u7740\u624b"),M(),S(65,"option",22),G(66,"\u9032\u884c\u4e2d"),M(),S(67,"option",23),G(68,"\u5b8c\u4e86"),M()()()(),S(69,"div",6)(70,"span",7),G(71,"\u30bf\u30b0:"),M(),S(72,"span",8)(73,"input",24),ye("ngModelChange",function(i){return De(t),be(oe().task.tag=i)}),M()()(),S(74,"div",6)(75,"span",7),G(76,"\u30bf\u30b0\u306e\u8272:"),M(),S(77,"span",8)(78,"div",25),Ne(79,ohe,1,6,"div",26),M()()(),S(80,"div",27)(81,"h6"),G(82,"\u30b5\u30d6\u30bf\u30b9\u30af"),M(),S(83,"button",5),ye("click",function(){return De(t),be(oe().addSubtask())}),G(84,"\u30b5\u30d6\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),M(),S(85,"ul"),Ne(86,ahe,5,1,"li",28),M()()()}if(2&n){const t=oe();K(3),jo("",t.task.title," \u306e\u8a73\u7d30"),K(12),te("ngModel",t.task.title),K(5),te("ngModel",t.task.projectId),K(3),te("ngForOf",t.projects),K(5),te("ngModel",t.task.description),K(5),te("ngModel",t.task.startDateTime),K(5),te("ngModel",t.task.endDateTime),K(5),te("ngModel",t.task.reminderTime.value),K(1),te("ngModel",t.task.reminderTime.unit),K(1),te("ngForOf",t.reminderUnits),K(1),te("ngIf",t.task.repeatSettings),K(5),te("ngModel",t.task.priority),K(11),te("ngModel",t.task.status),K(11),te("ngModel",t.task.tag),K(6),te("ngForOf",t.colors),K(7),te("ngForOf",t.task.subtasks)}}let S_=(()=>{class n{constructor(t,r,i,s,o){this.taskService=t,this.reminderService=r,this.projectService=i,this.dialogRef=s,this.data=o,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",console.log("TaskDetailComponent constructor called"),o&&o.task&&(this.task={...o.task},this.originalTask={...o.task},console.log("TaskDetailComponent received task data:",this.task))}ngOnInit(){console.log("TaskDetailComponent ngOnInit called"),this.projects$=this.projectService.getProjects(),this.projects$.subscribe(t=>{this.projects=t,console.log("Projects loaded:",this.projects)}),this.task?(this.task.reminderTime||(this.task.reminderTime={value:null,unit:"\u5206"}),console.log("Loaded existing task:",this.task)):(this.task={id:"",title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"}},console.log("Initialized empty task"))}saveTask(){var t=this;return(0,pe.Z)(function*(){if(console.log("saveTask called"),t.task.reminderTime&&null!==t.task.reminderTime.value){const r=t.calculateReminderTime({value:t.task.reminderTime.value,unit:t.task.reminderTime.unit});t.reminderService.setReminder(t.task,r)}t.task.id?(yield t.taskService.updateTask(t.task),console.log("Task updated:",t.task)):(yield t.taskService.addTask(t.task),console.log("New task added:",t.task)),t.dialogRef.close(t.task),console.log("Dialog closed with task:",t.task)})()}duplicateTask(){var t=this;return(0,pe.Z)(function*(){console.log("duplicateTask called"),yield t.taskService.duplicateTask(t.task),t.dialogRef.close(),console.log("Dialog closed after duplicating task")})()}addSubtask(){console.log("addSubtask called"),this.task.subtasks||(this.task.subtasks=[]);const t={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"};this.task.subtasks.push(t),this.saveTask(),console.log("New subtask added:",t)}deleteSubtask(t){console.log("deleteSubtask called"),this.task.subtasks&&(this.task.subtasks.splice(t,1),this.saveTask(),console.log("Subtask deleted at index:",t))}cancel(){console.log("cancel called"),this.dialogRef.close(this.originalTask),console.log("Dialog closed with original task:",this.originalTask)}selectColor(t){this.task.tagColor=t,console.log("Color selected:",t)}addExcludeDate(){console.log("addExcludeDate called"),this.excludeDate&&(this.task.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="",console.log("Exclude date added:",this.excludeDate))}removeExcludeDate(t){console.log("removeExcludeDate called"),this.task.repeatSettings?.excludeDates&&(this.task.repeatSettings.excludeDates=this.task.repeatSettings.excludeDates.filter(r=>r!==t),console.log("Exclude date removed:",t))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(t){const{value:r,unit:i}=t;switch(i){case"\u5206":return 60*r*1e3;case"\u6642\u9593":return 60*r*60*1e3;case"\u65e5":return 24*r*60*60*1e3;case"\u9031":return 7*r*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(r){return new(r||n)(z(Uf),z(vU),z(I_),z(bm),z(iA))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-task-detail"]],inputs:{task:"task"},standalone:!0,features:[Ho],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"subtask-container"],["class","subtask-item",4,"ngFor","ngForOf"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"],[1,"subtask-item"],[1,"subtask-title"]],template:function(r,i){1&r&&Ne(0,lhe,87,16,"div",0),2&r&&te("ngIf",i.task)},dependencies:[Ts,us,zi,mo,Sa,_u,pm,gm,Bl,OE,Oh,gu,pu,NE,$l],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})(),Uf=(()=>{class n{constructor(t,r,i){this.firestore=t,this.holidayService=r,this.dialog=i,this.currentDialogRefs={}}getTasks(){return this.firestore.collection("tasks").valueChanges()}addTask(t){const r=this.firestore.createId();return this.firestore.collection("tasks").doc(r).set({...t,id:r})}updateTask(t){return this.firestore.collection("tasks").doc(t.id).set(t)}duplicateTask(t){const r={...t,id:this.generateId()};return this.firestore.collection("tasks").doc(r.id).set(r)}deleteTask(t){return this.firestore.collection("tasks").doc(t.id).delete()}openTaskDetail(t){if(console.log("openTaskDetail called"),this.currentDialogRefs[t.id])return void console.log("Task detail is already open for this task:",t.id);const r=this.dialog.open(S_,{data:{task:t}});this.currentDialogRefs[t.id]=r,r.afterClosed().subscribe(()=>{console.log("Dialog closed for task:",t.id),delete this.currentDialogRefs[t.id]})}generateRecurringTasks(){var t=this;return(0,pe.Z)(function*(){const r=(new Date).toISOString().split("T")[0];try{const i=yield t.holidayService.getHolidays(),s=yield t.firestore.collection("tasks").get().toPromise();s&&s.forEach(o=>{const a=o.data();a.repeatSettings&&"monthlyFromEnd"===a.repeatSettings.frequency&&t.generateMonthlyFromEndTasks(a,r,i)})}catch(i){console.error("Failed to generate recurring tasks:",i)}})()}generateMonthlyFromEndTasks(t,r,i){let s=new Date(t.startDateTime);const o=t.repeatSettings.endDate?new Date(t.repeatSettings.endDate):null;for(;s.toISOString().split("T")[0]<=r&&(!o||s<=o);){let l=Qh(dU(s),t.repeatSettings.daysOffsetFromEnd);t.repeatSettings.businessDaysOnly&&(l=this.adjustForHolidaysAndWeekends(l,i)),l.toISOString().split("T")[0]<=r&&this.createTaskInstance(t,l.toISOString()),s.setMonth(s.getMonth()+1)}}adjustForHolidaysAndWeekends(t,r){for(;r.includes(t.toISOString().split("T")[0])||0===t.getDay()||6===t.getDay();)t.setDate(t.getDate()-1);return t}createTaskInstance(t,r){const i={...t,startDateTime:r,id:this.generateId()};this.firestore.collection("tasks").doc(i.id).set(i)}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(ok),Q(iU),Q(Tm))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function che(n,e){if(1&n&&(S(0,"option",22),G(1),M()),2&n){const t=e.$implicit;te("value",t.id),K(1),St(t.name)}}function uhe(n,e){if(1&n&&(S(0,"option",22),G(1),M()),2&n){const t=e.$implicit;te("value",t),K(1),St(t)}}function dhe(n,e){if(1&n){const t=Lt();S(0,"div",6)(1,"span",7),G(2,"\u901a\u77e5:"),M(),S(3,"span",8)(4,"input",23),ye("ngModelChange",function(i){return De(t),be(oe(2).newTask.reminderTime.value=i)}),M(),S(5,"select",24),ye("ngModelChange",function(i){return De(t),be(oe(2).newTask.reminderTime.unit=i)}),Ne(6,uhe,2,2,"option",12),M()()()}if(2&n){const t=oe(2);K(4),te("ngModel",t.newTask.reminderTime.value),K(1),te("ngModel",t.newTask.reminderTime.unit),K(1),te("ngForOf",t.reminderUnits)}}function hhe(n,e){if(1&n){const t=Lt();S(0,"div")(1,"label"),G(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),M(),S(3,"input",36),ye("ngModelChange",function(i){return De(t),be(oe(3).newTask.repeatSettings.daysOffsetFromEnd=i)}),M()()}if(2&n){const t=oe(3);K(3),te("ngModel",t.newTask.repeatSettings.daysOffsetFromEnd)}}function fhe(n,e){if(1&n){const t=Lt();S(0,"div"),G(1),S(2,"button",5),ye("click",function(){const s=De(t).$implicit;return be(oe(3).removeExcludeDate(s))}),G(3,"\u524a\u9664"),M()()}if(2&n){const t=e.$implicit;K(1),jo(" ",t," ")}}function phe(n,e){if(1&n){const t=Lt();S(0,"div",6)(1,"span",7),G(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),M(),S(3,"span",8)(4,"div",25)(5,"div")(6,"label"),G(7,"\u983b\u5ea6:"),M(),S(8,"select",10),ye("ngModelChange",function(i){return De(t),be(oe(2).newTask.repeatSettings.frequency=i)}),S(9,"option",26),G(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),M(),S(11,"option",27),G(12,"\u6bce\u65e5"),M(),S(13,"option",28),G(14,"\u6bce\u9031"),M(),S(15,"option",29),G(16,"\u6bce\u6708"),M(),S(17,"option",30),G(18,"\u6bce\u5e74"),M(),S(19,"option",31),G(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),M()()(),Ne(21,hhe,4,1,"div",32),S(22,"div")(23,"label"),G(24,"\u7d42\u4e86\u65e5:"),M(),S(25,"input",33),ye("ngModelChange",function(i){return De(t),be(oe(2).newTask.repeatSettings.endDate=i)}),M()(),S(26,"div")(27,"label"),G(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),M(),S(29,"input",34),ye("ngModelChange",function(i){return De(t),be(oe(2).newTask.repeatSettings.businessDaysOnly=i)}),M()(),S(30,"div")(31,"label"),G(32,"\u9664\u5916\u65e5:"),M(),S(33,"input",33),ye("ngModelChange",function(i){return De(t),be(oe(2).excludeDate=i)}),M(),S(34,"button",5),ye("click",function(){return De(t),be(oe(2).addExcludeDate())}),G(35,"\u8ffd\u52a0"),M(),Ne(36,fhe,4,1,"div",35),M()()()()}if(2&n){const t=oe(2);K(8),te("ngModel",t.newTask.repeatSettings.frequency),K(13),te("ngIf","monthlyFromEnd"===t.newTask.repeatSettings.frequency),K(4),te("ngModel",t.newTask.repeatSettings.endDate),K(4),te("ngModel",t.newTask.repeatSettings.businessDaysOnly),K(4),te("ngModel",t.excludeDate),K(3),te("ngForOf",t.newTask.repeatSettings.excludeDates)}}const ghe=function(n){return{selected:n}},mhe=function(n){return{"background-color":n}};function _he(n,e){if(1&n){const t=Lt();S(0,"div",37),ye("click",function(){const s=De(t).$implicit;return be(oe(2).selectColor(s))}),M()}if(2&n){const t=e.$implicit,r=oe(2);te("ngClass",po(2,ghe,r.newTask.tagColor===t))("ngStyle",po(4,mhe,t))}}function yhe(n,e){if(1&n){const t=Lt();S(0,"div",1)(1,"div",2)(2,"h2",3),G(3,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),M(),S(4,"div",4)(5,"button",5),ye("click",function(){return De(t),be(oe().saveTask())}),G(6,"\u4fdd\u5b58"),M(),S(7,"button",5),ye("click",function(){return De(t),be(oe().cancel())}),G(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),M()()(),S(9,"div",6)(10,"span",7),G(11,"\u30bf\u30a4\u30c8\u30eb:"),M(),S(12,"span",8)(13,"input",9),ye("ngModelChange",function(i){return De(t),be(oe().newTask.title=i)}),M()()(),S(14,"div",6)(15,"span",7),G(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),M(),S(17,"span",8)(18,"select",10),ye("ngModelChange",function(i){return De(t),be(oe().newTask.projectId=i)}),S(19,"option",11),G(20,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),M(),Ne(21,che,2,2,"option",12),M()()(),S(22,"div",6)(23,"span",7),G(24,"\u8aac\u660e:"),M(),S(25,"span",8)(26,"textarea",13),ye("ngModelChange",function(i){return De(t),be(oe().newTask.description=i)}),M()()(),S(27,"div",6)(28,"span",7),G(29,"\u958b\u59cb\u65e5\u6642:"),M(),S(30,"span",8)(31,"input",14),ye("ngModelChange",function(i){return De(t),be(oe().newTask.startDateTime=i)}),M()()(),S(32,"div",6)(33,"span",7),G(34,"\u7d42\u4e86\u65e5\u6642:"),M(),S(35,"span",8)(36,"input",14),ye("ngModelChange",function(i){return De(t),be(oe().newTask.endDateTime=i)}),M()()(),Ne(37,dhe,7,3,"div",15),Ne(38,phe,37,6,"div",15),S(39,"div",6)(40,"span",7),G(41,"\u512a\u5148\u5ea6:"),M(),S(42,"span",8)(43,"select",10),ye("ngModelChange",function(i){return De(t),be(oe().newTask.priority=i)}),S(44,"option",16),G(45,"\u4f4e"),M(),S(46,"option",17),G(47,"\u4e2d"),M(),S(48,"option",18),G(49,"\u9ad8"),M()()()(),S(50,"div",6)(51,"span",7),G(52,"\u30bf\u30b0:"),M(),S(53,"span",8)(54,"input",19),ye("ngModelChange",function(i){return De(t),be(oe().newTask.tag=i)}),M()()(),S(55,"div",6)(56,"span",7),G(57,"\u30bf\u30b0\u306e\u8272:"),M(),S(58,"span",8)(59,"div",20),Ne(60,_he,1,6,"div",21),M()()()()}if(2&n){const t=oe();K(13),te("ngModel",t.newTask.title),K(5),te("ngModel",t.newTask.projectId),K(3),te("ngForOf",t.projects),K(5),te("ngModel",t.newTask.description),K(5),te("ngModel",t.newTask.startDateTime),K(5),te("ngModel",t.newTask.endDateTime),K(1),te("ngIf",t.newTask.reminderTime),K(1),te("ngIf",t.newTask.repeatSettings),K(5),te("ngModel",t.newTask.priority),K(11),te("ngModel",t.newTask.tag),K(6),te("ngForOf",t.colors)}}let ak=(()=>{class n{constructor(t,r,i,s){this.dialogRef=t,this.reminderService=r,this.projectService=i,this.taskService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",this.newTask={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",daysOffsetFromEnd:1,endDate:"",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:0,unit:"\u5206"}}}ngOnInit(){this.projects$=this.projectService.getProjects(),this.projects$.subscribe(t=>{this.projects=t})}saveTask(){var t=this;return(0,pe.Z)(function*(){try{if(t.newTask.startDateTime&&t.newTask.reminderTime&&null!==t.newTask.reminderTime.value){const r=t.calculateReminderTime({value:t.newTask.reminderTime.value,unit:t.newTask.reminderTime.unit});t.reminderService.setReminder(t.newTask,r)}yield t.taskService.addTask(t.newTask),t.dialogRef.close(t.newTask)}catch(r){console.error("Failed to save task:",r)}})()}cancel(){this.dialogRef.close()}selectColor(t){this.newTask.tagColor=t}addExcludeDate(){this.excludeDate&&(this.newTask.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(t){this.newTask.repeatSettings?.excludeDates&&(this.newTask.repeatSettings.excludeDates=this.newTask.repeatSettings.excludeDates.filter(r=>r!==t))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(t){const{value:r,unit:i}=t;switch(i){case"\u5206":return 60*r*1e3;case"\u6642\u9593":return 60*r*60*1e3;case"\u65e5":return 24*r*60*60*1e3;case"\u9031":return 7*r*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(r){return new(r||n)(z(bm),z(vU),z(I_),z(Uf))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-task-add"]],standalone:!0,features:[Ho],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"]],template:function(r,i){1&r&&Ne(0,yhe,61,11,"div",0),2&r&&te("ngIf",i.newTask)},dependencies:[Ts,us,zi,mo,Sa,_u,pm,gm,Bl,OE,Oh,gu,pu,NE,$l],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})();function mD(n,e){let t=$t(n);return isNaN(+t)?Eo(n,NaN):(null!=e.year&&t.setFullYear(e.year),null!=e.month&&(t=_U(t,e.month)),null!=e.date&&t.setDate(e.date),null!=e.hours&&t.setHours(e.hours),null!=e.minutes&&t.setMinutes(e.minutes),null!=e.seconds&&t.setSeconds(e.seconds),null!=e.milliseconds&&t.setMilliseconds(e.milliseconds),t)}function V$(n,e){return Mu(n,12*e)}function lk(n){const e=$t(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function whe(n,e){if(1&n){const t=Lt();S(0,"div")(1,"h3"),G(2),Qt(3,"date"),M(),S(4,"mwl-calendar-month-view",5),ye("eventClicked",function(i){return De(t),be(oe().handleEvent("Clicked",i.event))}),M()()}if(2&n){const t=oe();K(2),St(sr(3,3,t.viewDate,"yyyy\u5e74MM\u6708")),K(2),te("viewDate",t.viewDate)("events",t.allEvents)}}function Ehe(n,e){if(1&n&&(S(0,"div")(1,"div",8),G(2),Qt(3,"date"),M()()),2&n){const t=oe().$implicit;K(2),iT(" ",sr(3,2,t.start,"EEEE, MMM d")," - ",t.title," ")}}function Che(n,e){if(1&n&&(Eg(0),Ne(1,Ehe,4,5,"div",4),Cg()),2&n){const t=e.$implicit,r=oe(2);K(1),te("ngIf",r.isSameWeek(t.start,r.viewDate))}}function Dhe(n,e){if(1&n){const t=Lt();S(0,"div")(1,"h3"),G(2),M(),S(3,"div",6),Ne(4,Che,2,1,"ng-container",7),M(),S(5,"mwl-calendar-week-view",5),ye("eventClicked",function(i){return De(t),be(oe().handleEvent("Clicked",i.event))}),M()()}if(2&n){const t=oe();K(2),St(t.getWeekRange()),K(2),te("ngForOf",t.holidayEvents),K(1),te("viewDate",t.viewDate)("events",t.getNonHolidayEvents())}}function bhe(n,e){if(1&n&&(S(0,"div")(1,"div",10),G(2),M()()),2&n){const t=oe().$implicit;K(2),jo(" ",t.title," ")}}function The(n,e){if(1&n&&(Eg(0),Ne(1,bhe,3,1,"div",4),Cg()),2&n){const t=e.$implicit,r=oe(2);K(1),te("ngIf",r.isSameDay(t.start,r.viewDate))}}function Ihe(n,e){if(1&n){const t=Lt();S(0,"div")(1,"h3"),G(2),Qt(3,"date"),M(),S(4,"div",9),Ne(5,The,2,1,"ng-container",7),M(),S(6,"mwl-calendar-day-view",5),ye("eventClicked",function(i){return De(t),be(oe().handleEvent("Clicked",i.event))}),M()()}if(2&n){const t=oe();K(2),St(sr(3,4,t.viewDate,"yyyy\u5e74MM\u6708dd\u65e5")),K(3),te("ngForOf",t.holidayEvents),K(1),te("viewDate",t.viewDate)("events",t.getNonHolidayEvents())}}let She=(()=>{class n{constructor(t,r,i){this.taskService=t,this.holidayService=r,this.dialog=i,this.view=Pa.Week,this.viewDate=new Date,this.events=[],this.holidayEvents=[],this.allEvents=[],this.holidays=[],this.CalendarView=Pa}ngOnInit(){console.log("Initializing CalendarComponent..."),this.loadHolidays()}loadHolidays(){console.log("Loading holidays..."),q(this.holidayService.getHolidays()).subscribe(t=>{this.holidays=Object.keys(t).map(r=>new Date(r)),this.holidayEvents=this.holidays.map(r=>({start:r,title:t[r.toISOString().split("T")[0]],color:{primary:"#e3bc08",secondary:"#FDF1BA"}})),console.log("Holidays loaded:",this.holidayEvents),this.loadEvents(),this.updateAllEvents()},t=>{console.error("Failed to load holidays:",t)})}loadEvents(){console.log("Loading events..."),this.taskService.getTasks().subscribe(t=>{this.events=this.generateEventsFromTasks(t),console.log("Events loaded:",this.events),this.updateAllEvents()})}generateEventsFromTasks(t){console.log("Generating events from tasks...");const r=[];return t.forEach(i=>{if(i.repeatSettings)r.push(...this.generateRecurringEvents(i));else{const s=new Date(i.startDateTime),o=new Date(i.endDateTime);if(isNaN(s.getTime())||isNaN(o.getTime()))return void console.error(`Invalid date for task: ${i.title}`);if(s>o)return void console.warn(`Start date is after end date for task: ${i.title}`);r.push({start:s,end:o,title:i.title,color:i.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:i})}}),console.log("Events generated:",r),r}generateRecurringEvents(t){console.log("Generating recurring events for task:",t.title);const r=[],i=new Date(t.startDateTime),s=new Date(t.endDateTime),o=t.repeatSettings;if(isNaN(i.getTime())||isNaN(s.getTime())||!o)return console.error(`Invalid date or repeat settings for task: ${t.title}`),r;if("none"===o.frequency)return r.push({start:i,end:s,title:t.title,color:t.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:t}),r;let a=i,l=s;const c=o.endDate?new Date(o.endDate):null,h=1e3;let m=0;for(;(!c||a<=c)&&m<h;){if("monthlyFromEnd"===o.frequency&&void 0!==o.daysOffsetFromEnd&&(a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd),a=mD(a,{hours:i.getHours(),minutes:i.getMinutes()}),l=mD(a,{hours:s.getHours(),minutes:s.getMinutes()})),a>l)return console.warn(`Start date is after end date for recurring task: ${t.title}`),r;!this.isExcludedDate(a,o.excludeDates)&&(!o.businessDaysOnly||!this.isHolidayOrWeekend(a))&&r.push({start:a,end:l,title:t.title,color:t.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:t});let _=!1;for(;!_;){switch(o.frequency){case"daily":a=Yh(a,1),l=Yh(l,1),_=!0;break;case"weekly":a=dC(a,1),l=dC(l,1),_=!0;break;case"monthly":a=Mu(a,1),l=Mu(l,1),_=!0;break;case"yearly":a=V$(a,1),l=V$(l,1),_=!0;break;case"monthlyFromEnd":a=Mu(a,1),l=Mu(l,1),a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd??0),a=mD(a,{hours:i.getHours(),minutes:i.getMinutes()}),l=mD(a,{hours:s.getHours(),minutes:s.getMinutes()}),_=!0;break;default:console.warn(`Unknown repeat frequency: ${o.frequency}`),m=h,_=!0}o.businessDaysOnly&&this.isHolidayOrWeekend(a)&&(_=!1)}m++}return m===h&&console.warn(`Max iterations reached for task: ${t.title}`),console.log("Recurring events generated:",r),r}isExcludedDate(t,r){return!!r&&r.some(i=>{const s=new Date(i);return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()})}calculateMonthlyFromEndDate(t,r){let i=Qh(lk(t),r),s=0;for(let o=Qh(lk(t),r);o<=lk(t);o=Yh(o,1))this.isHolidayOrWeekend(o)&&s++;for(i=Qh(i,s);this.isHolidayOrWeekend(i);)i=Qh(i,1);return console.log(`Final target date: ${i}`),i}isHolidayOrWeekend(t){const r=t.getDay(),i=0===r||6===r,s=this.holidays.some(o=>o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate());return console.log(`Date: ${t}, isWeekend: ${i}, isHoliday: ${s}`),i||s}updateAllEvents(){this.allEvents=[...this.events,...this.holidayEvents],console.log("All events updated:",this.allEvents)}getNonHolidayEvents(){return this.allEvents.filter(t=>!this.holidayEvents.some(r=>r.start.getTime()===t.start.getTime()))}handleEvent(t,r){console.log(`Event ${t} - ${r.title}`),r.meta&&(this.dialog.closeAll(),this.dialog.open(S_,{width:"600px",data:{task:r.meta}}).afterClosed().subscribe(s=>{s&&(console.log("Event details updated:",s),this.taskService.updateTask(s).then(()=>{this.loadEvents()}))}))}setView(t){console.log(`View changed to ${t}`),this.view=t}addTask(){console.log("Adding new task..."),this.dialog.open(ak,{width:"600px",maxHeight:"80vh",panelClass:"custom-dialog-container"}).afterClosed().subscribe(r=>{r&&(console.log("New task added:",r),this.loadEvents())})}previousPeriod(){switch(console.log("Moving to previous period..."),this.view){case Pa.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()-1));break;case Pa.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-7));break;case Pa.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-1))}console.log("New view date:",this.viewDate)}nextPeriod(){switch(console.log("Moving to next period..."),this.view){case Pa.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()+1));break;case Pa.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+7));break;case Pa.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+1))}console.log("New view date:",this.viewDate)}getWeekRange(){const t=Fm(this.viewDate),r=pU(this.viewDate);return`${t.getFullYear()}\u5e74${("0"+(t.getMonth()+1)).slice(-2)}\u6708${("0"+t.getDate()).slice(-2)}\u65e5\uff5e${r.getFullYear()}\u5e74${("0"+(r.getMonth()+1)).slice(-2)}\u6708${("0"+r.getDate()).slice(-2)}\u65e5`}isSameWeek(t,r){return function vhe(n,e,t){return+Fm(n,t)==+Fm(e,t)}(t,r)}isSameDay(t,r){return gU(t,r)}static#e=this.\u0275fac=function(r){return new(r||n)(z(Uf),z(iU),z(Tm))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-calendar"]],standalone:!0,features:[rn([Om,xm,Pm,lC,{provide:Au,useFactory:yU}]),Ho],decls:19,vars:3,consts:[[1,"container"],[1,"button-container"],[3,"click"],[1,"add-task-button",3,"click"],[4,"ngIf"],[3,"viewDate","events","eventClicked"],[1,"holiday-week-container"],[4,"ngFor","ngForOf"],[1,"holiday-week-item","holiday-item"],[1,"holiday-day-container"],[1,"holiday-day-item","holiday-item"]],template:function(r,i){1&r&&(S(0,"div",0)(1,"h2"),G(2,"\u30ab\u30ec\u30f3\u30c0\u30fc"),M(),S(3,"div",1)(4,"button",2),ye("click",function(){return i.setView(i.CalendarView.Month)}),G(5,"\u6708\u30d3\u30e5\u30fc"),M(),S(6,"button",2),ye("click",function(){return i.setView(i.CalendarView.Week)}),G(7,"\u9031\u30d3\u30e5\u30fc"),M(),S(8,"button",2),ye("click",function(){return i.setView(i.CalendarView.Day)}),G(9,"\u65e5\u30d3\u30e5\u30fc"),M(),S(10,"button",2),ye("click",function(){return i.previousPeriod()}),G(11,"\u524d\u306e\u671f\u9593"),M(),S(12,"button",2),ye("click",function(){return i.nextPeriod()}),G(13,"\u6b21\u306e\u671f\u9593"),M(),S(14,"button",3),ye("click",function(){return i.addTask()}),G(15,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),M()(),Ne(16,whe,5,6,"div",4),Ne(17,Dhe,6,4,"div",4),Ne(18,Ihe,7,7,"div",4),M()),2&r&&(K(16),te("ngIf",i.view===i.CalendarView.Month),K(1),te("ngIf",i.view===i.CalendarView.Week),K(1),te("ngIf",i.view===i.CalendarView.Day))},dependencies:[Ts,zi,mo,Ow,rU,moe,nU,Doe,Kh,kA,xA,uC],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:8px;overflow-y:auto;height:calc(100vh - 40px)}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}h2[_ngcontent-%COMP%]{font-size:1.5em;color:#777}h3[_ngcontent-%COMP%]{font-size:1.2em;color:#777}.holiday-week-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:10px}.holiday-week-item[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;color:#e3bc08}.holiday-day-container[_ngcontent-%COMP%]{margin-top:10px}.holiday-day-item[_ngcontent-%COMP%], .holiday-item[_ngcontent-%COMP%]{font-weight:700;color:#e3bc08}.mwl-calendar-month-view[_ngcontent-%COMP%], .mwl-calendar-week-view[_ngcontent-%COMP%], .mwl-calendar-day-view[_ngcontent-%COMP%]{height:calc(100vh - 160px)}"]})}return n})();const Ahe=function(n,e){return{"background-color":n,border:e}};function Mhe(n,e){if(1&n){const t=Lt();S(0,"div",6),ye("click",function(){const s=De(t).$implicit;return be(oe().newProject.color=s)}),M()}if(2&n){const t=e.$implicit,r=oe();te("ngStyle",jr(1,Ahe,t,r.newProject.color===t?"3px solid black":"1px solid #000"))}}let B$=(()=>{class n{constructor(t,r){this.dialogRef=t,this.projectService=r,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.newProject={id:this.generateId(),name:"",description:"",startDate:"",endDate:"",color:"white",tasks:[]}}saveProject(){var t=this;return(0,pe.Z)(function*(){try{yield t.projectService.addProject(t.newProject),t.dialogRef.close(t.newProject)}catch(r){console.error("Error saving project:",r)}})()}cancel(){this.dialogRef.close()}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(r){return new(r||n)(z(bm),z(I_))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-project-add"]],standalone:!0,features:[Ho],decls:28,vars:5,consts:[["placeholder","\u540d\u524d",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],[3,"click"],[1,"color-option",3,"ngStyle","click"]],template:function(r,i){1&r&&(S(0,"div")(1,"h2"),G(2,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),M(),S(3,"div")(4,"label"),G(5,"\u540d\u524d: "),S(6,"input",0),ye("ngModelChange",function(o){return i.newProject.name=o}),M()()(),S(7,"div")(8,"label"),G(9,"\u8aac\u660e: "),S(10,"textarea",1),ye("ngModelChange",function(o){return i.newProject.description=o}),M()()(),S(11,"div")(12,"label"),G(13,"\u958b\u59cb\u65e5: "),S(14,"input",2),ye("ngModelChange",function(o){return i.newProject.startDate=o}),M()()(),S(15,"div")(16,"label"),G(17,"\u7d42\u4e86\u65e5: "),S(18,"input",2),ye("ngModelChange",function(o){return i.newProject.endDate=o}),M()()(),S(19,"div")(20,"label"),G(21,"\u8272:"),M(),S(22,"div",3),Ne(23,Mhe,1,4,"div",4),M()(),S(24,"button",5),ye("click",function(){return i.saveProject()}),G(25,"\u4fdd\u5b58"),M(),S(26,"button",5),ye("click",function(){return i.cancel()}),G(27,"\u30ad\u30e3\u30f3\u30bb\u30eb"),M()()),2&r&&(K(6),te("ngModel",i.newProject.name),K(4),te("ngModel",i.newProject.description),K(4),te("ngModel",i.newProject.startDate),K(4),te("ngModel",i.newProject.endDate),K(5),te("ngForOf",i.colors))},dependencies:[Ts,zi,Sa,_u,Bl,pu,$l],styles:[".color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer;border-radius:4px}"]})}return n})();function Rhe(n,e){if(1&n){const t=Lt();S(0,"li",14)(1,"div",15)(2,"input",16),ye("ngModelChange",function(i){return be(De(t).$implicit.selected=i)}),M(),S(3,"a",17),ye("click",function(){const s=De(t).$implicit;return be(oe(2).openTaskDetailDialog(s))}),S(4,"div",18),G(5),M(),S(6,"div",19)(7,"span",20),G(8),M(),S(9,"span",21),G(10),M(),S(11,"span",22),G(12),Qt(13,"date"),M(),S(14,"span",23),G(15),Qt(16,"date"),M(),S(17,"span",24),G(18),M(),Zn(19,"span",25),M()()()()}if(2&n){const t=e.$implicit,r=oe(2);K(2),te("ngModel",t.selected),K(3),St(t.title),K(3),St(t.status),K(1),te("ngClass",t.priority),K(1),St(r.getPriorityLabel(t.priority)),K(2),St(sr(13,10,t.startDateTime,"short")),K(3),St(sr(16,13,t.endDateTime,"short")),K(3),St(t.tag),K(1),Hs("background-color",t.tagColor)}}function khe(n,e){if(1&n){const t=Lt();S(0,"li")(1,"div",6)(2,"input",12),ye("ngModelChange",function(i){return be(De(t).$implicit.selected=i)}),M(),S(3,"h3",13),ye("blur",function(i){const o=De(t).$implicit;return be(oe().updateProjectName(o,i))}),G(4),M()(),S(5,"ul",7)(6,"li",8)(7,"div",9)(8,"span",10),G(9,"\u9078\u629e"),M(),S(10,"span",10),G(11,"\u30bf\u30a4\u30c8\u30eb"),M(),S(12,"span",10),G(13,"\u30b9\u30c6\u30fc\u30bf\u30b9"),M(),S(14,"span",10),G(15,"\u512a\u5148\u5ea6"),M(),S(16,"span",10),G(17,"\u958b\u59cb\u65e5\u6642"),M(),S(18,"span",10),G(19,"\u7d42\u4e86\u65e5\u6642"),M(),S(20,"span",10),G(21,"\u30bf\u30b0"),M(),S(22,"span",10),G(23,"\u30bf\u30b0\u306e\u8272"),M()()(),Ne(24,Rhe,20,16,"li",11),M()()}if(2&n){const t=e.$implicit,r=oe();K(2),te("ngModel",t.selected),K(2),St(t.name),K(20),te("ngForOf",r.getTasksForProject(t.id))}}function xhe(n,e){if(1&n){const t=Lt();S(0,"li",14)(1,"div",15)(2,"input",16),ye("ngModelChange",function(i){return be(De(t).$implicit.selected=i)}),M(),S(3,"a",17),ye("click",function(){const s=De(t).$implicit;return be(oe().openTaskDetailDialog(s))}),S(4,"div",18),G(5),M(),S(6,"div",19)(7,"span",20),G(8),M(),S(9,"span",21),G(10),M(),S(11,"span",22),G(12),Qt(13,"date"),M(),S(14,"span",23),G(15),Qt(16,"date"),M(),S(17,"span",24),G(18),M(),Zn(19,"span",25),M()()()()}if(2&n){const t=e.$implicit,r=oe();K(2),te("ngModel",t.selected),K(3),St(t.title),K(3),St(t.status),K(1),te("ngClass",t.priority),K(1),St(r.getPriorityLabel(t.priority)),K(2),St(sr(13,10,t.startDateTime,"short")),K(3),St(sr(16,13,t.endDateTime,"short")),K(3),St(t.tag),K(1),Hs("background-color",t.tagColor)}}let Phe=(()=>{class n{constructor(t,r,i){this.taskService=t,this.projectService=r,this.dialog=i,this.projects=[],this.tasks=[],this.noProjectSelected=!1}ngOnInit(){this.loadProjects(),this.loadTasks()}loadProjects(){this.projectService.getProjects().subscribe(t=>{this.projects=t})}loadTasks(){this.taskService.getTasks().subscribe(t=>{this.tasks=t})}openAddTaskDialog(){this.dialog.open(ak,{width:"400px"}).afterClosed().subscribe(r=>{r&&this.loadTasks()})}openAddProjectDialog(){this.dialog.open(B$,{width:"400px"}).afterClosed().subscribe(r=>{r&&this.loadProjects()})}deleteSelectedTasks(){this.tasks.filter(r=>r.selected).forEach(r=>{this.taskService.deleteTask(r).then(()=>{this.loadTasks()})})}deleteSelectedProjects(){this.projects.filter(r=>r.selected).forEach(r=>{this.getTasksForProject(r.id).forEach(s=>{this.taskService.deleteTask(s).then(()=>{this.loadTasks()})}),this.projectService.deleteProject(r).then(()=>{this.loadProjects()})})}updateProjectName(t,r){t.name=r.target.innerText,this.projectService.updateProject(t)}getTasksForProject(t){return this.tasks.filter(r=>r.projectId===t)}openTaskDetailDialog(t){this.dialog.closeAll(),this.dialog.open(S_,{width:"600px",data:{task:t}}).afterClosed().subscribe(i=>{i&&this.loadTasks()})}getPriorityLabel(t){switch(t){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return t}}static#e=this.\u0275fac=function(r){return new(r||n)(z(Uf),z(I_),z(Tm))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-project-list"]],standalone:!0,features:[Ho],decls:37,vars:2,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"project-task-list-container"],[4,"ngFor","ngForOf"],[1,"project-header"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],["type","checkbox",1,"project-checkbox",3,"ngModel","ngModelChange"],["contenteditable","true",3,"blur"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"]],template:function(r,i){1&r&&(S(0,"div",0)(1,"div",1)(2,"button",2),ye("click",function(){return i.openAddTaskDialog()}),G(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),M(),S(4,"button",3),ye("click",function(){return i.openAddProjectDialog()}),G(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),M(),S(6,"button",3),ye("click",function(){return i.deleteSelectedTasks()}),G(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),M(),S(8,"button",3),ye("click",function(){return i.deleteSelectedProjects()}),G(9,"\u9078\u629e\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664"),M()(),S(10,"div",4)(11,"ul"),Ne(12,khe,25,3,"li",5),S(13,"li")(14,"div",6)(15,"h3"),G(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7121\u6240\u5c5e"),M()(),S(17,"ul",7)(18,"li",8)(19,"div",9)(20,"span",10),G(21,"\u9078\u629e"),M(),S(22,"span",10),G(23,"\u30bf\u30a4\u30c8\u30eb"),M(),S(24,"span",10),G(25,"\u30b9\u30c6\u30fc\u30bf\u30b9"),M(),S(26,"span",10),G(27,"\u512a\u5148\u5ea6"),M(),S(28,"span",10),G(29,"\u958b\u59cb\u65e5\u6642"),M(),S(30,"span",10),G(31,"\u7d42\u4e86\u65e5\u6642"),M(),S(32,"span",10),G(33,"\u30bf\u30b0"),M(),S(34,"span",10),G(35,"\u30bf\u30b0\u306e\u8272"),M()()(),Ne(36,xhe,20,16,"li",11),M()()()()()),2&r&&(K(12),te("ngForOf",i.projects),K(24),te("ngForOf",i.getTasksForProject("")))},dependencies:[Ts,us,zi,Ow,_u,Oh,pu,$l],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;max-width:1000px;margin:0 auto}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.project-task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;margin:10px auto}.project-header[_ngcontent-%COMP%]{display:flex;align-items:center}.project-checkbox[_ngcontent-%COMP%]{margin-right:10px}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-start-date[_ngcontent-%COMP%], .task-end-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%], .task-tag-color[_ngcontent-%COMP%]{text-align:center;margin-left:10px}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}"]})}return n})();function ck(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function jf(n,e){const t=e?"":"none";ck(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function U$(n,e,t){ck(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function _D(n,e){return e&&"none"!=e?n+" "+e:n}function j$(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function uk(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function dk(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function hk(n,e,t){const{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function A_(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function H$(n,e,t,r){const{top:i,right:s,bottom:o,left:a,width:l,height:c}=n,h=l*e,m=c*e;return r>i-m&&r<o+m&&t>a-h&&t<s+h}class $${constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:dk(t)})})}handleScroll(e){const t=Ys(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let s,o;if(t===this._document){const c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=t.scrollTop,o=t.scrollLeft;const a=i.top-s,l=i.left-o;return this.positions.forEach((c,h)=>{c.clientRect&&t!==h&&t.contains(h)&&A_(c.clientRect,a,l)}),i.top=s,i.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function z$(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?G$(n,e):("input"===r||"select"===r||"textarea"===r)&&q$(n,e),W$("canvas",n,e,G$),W$("input, textarea, select",n,e,q$),e}function W$(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let Nhe=0;function q$(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${Nhe++}`)}function G$(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const Z$=yu({passive:!0}),yD=yu({passive:!1}),fk=new Set(["position"]);class Lhe{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=function zl(n){return null!=n&&"false"!=`${n}`}(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>jf(r,t)))}constructor(e,t,r,i,s,o){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Y,this._pointerMoveSubscription=wt.EMPTY,this._pointerUpSubscription=wt.EMPTY,this._scrollSubscription=wt.EMPTY,this._resizeSubscription=wt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Y,this.started=new Y,this.released=new Y,this.ended=new Y,this.entered=new Y,this.exited=new Y,this.dropped=new Y,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const v=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),C=this._dropContainer;if(!v)return void this._endDragSequence(a);(!C||!C.isDragging()&&!C.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const h=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,m=this._activeTransform;m.x=c.x-h.x+this._passiveTransform.x,m.y=c.y-h.y+this._passiveTransform.y,this._applyRootElementTransform(m.x,m.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new $$(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Wr(r)),this._handles.forEach(r=>jf(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Wr(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,yD),t.addEventListener("touchstart",this._pointerDown,Z$),t.addEventListener("dragstart",this._nativeDragStart,yD)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Wr(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),jf(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),jf(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){M_(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(o,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),U$(r,!1,fk),this._document.body.appendChild(i.replaceChild(s,r)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=M_(t),s=!i&&0!==t.button,o=this._rootElement,a=Ys(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=i?QS(t):YS(t);if(a&&a.draggable&&"mousedown"===t.type&&t.preventDefault(),r||s||l||c)return;if(this._handles.length){const _=o.style;this._rootElementTapHighlight=_.webkitTapHighlightColor||"",_.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(_=>this._updateOnScroll(_)),this._boundaryElement&&(this._boundaryRect=dk(this._boundaryElement));const h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const m=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:m.x,y:m.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){U$(this._rootElement,!0,fk),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const s=e.matchSize?this._initialClientRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=Y$(o,this._document),this._previewRef=o,e.matchSize?Q$(i,s):i.style.transform=vD(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=z$(this._rootElement),Q$(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return ck(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},fk),jf(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function Ohe(n){const e=getComputedStyle(n),t=uk(e,"transition-property"),r=t.find(a=>"transform"===a||"all"===a);if(!r)return 0;const i=t.indexOf(r),s=uk(e,"transition-duration"),o=uk(e,"transition-delay");return j$(s[i])+j$(o[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=o=>{(!o||Ys(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(s))},s=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=Y$(this._placeholderRef,this._document)):r=z$(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=M_(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition();return{x:s.left-e.left+(o.pageX-s.left-a.left),y:s.top-e.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=M_(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),h=a.top+o,m=a.bottom-(c-o);r=K$(r,a.left+s,a.right-(l-s)),i=K$(i,h,m)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,jf(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,yD),e.removeEventListener("touchstart",this._pointerDown,Z$),e.removeEventListener("dragstart",this._nativeDragStart,yD)}_applyRootElementTransform(e,t){const r=vD(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=_D(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=vD(e,t);this._preview.style.transform=_D(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:M_(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=Ys(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&A_(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=BS(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Wr(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function vD(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function K$(n,e,t){return Math.max(e,Math.min(t,n))}function M_(n){return"t"===n.type[0]}function Y$(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function Q$(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=vD(e.left,e.top)}function X$(n,e,t){const r=R_(e,n.length-1),i=R_(t,n.length-1);if(r===i)return;const s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function R_(n,e){return Math.max(0,Math.min(e,n))}class Vhe{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,l=s.findIndex(T=>T.drag===e),c=s[o],m=c.clientRect,_=l>o?1:-1,v=this._getItemOffsetPx(s[l].clientRect,m,_),C=this._getSiblingOffsetPx(l,s,_),b=s.slice();return X$(s,l,o),s.forEach((T,B)=>{if(b[B]===T)return;const P=T.drag===e,$=P?v:C,ee=P?e.getPlaceholderElement():T.drag.getRootElement();T.offset+=$,a?(ee.style.transform=_D(`translate3d(${Math.round(T.offset)}px, 0, 0)`,T.initialTransform),A_(T.clientRect,0,$)):(ee.style.transform=_D(`translate3d(0, ${Math.round(T.offset)}px, 0)`,T.initialTransform),A_(T.clientRect,$,0))}),this._previousSwap.overlaps=hk(m,t,r),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:o}}enter(e,t,r,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),l=e.getPlaceholderElement();let c=o[s];if(c===e&&(c=o[s+1]),!c&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const h=c.getRootElement();h.parentElement.insertBefore(l,h),o.splice(s,0,e)}else Wr(this._element).appendChild(l),o.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{A_(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:dk(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let s=i?t.left-e.left:t.top-e.top;return-1===r&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,s=t[e].clientRect,o=t[e+-1*r];let a=s[i?"width":"height"]*r;if(o){const l=i?"left":"top",c=i?"right":"bottom";-1===r?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}{const o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>a!==e&&((!i||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?i.x:i.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom))));return-1!==o&&this._sortPredicate(o,e)?o:-1}}class Bhe{constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Y,this.entered=new Y,this.exited=new Y,this.dropped=new Y,this.sorted=new Y,this.receivingStarted=new Y,this.receivingStopped=new Y,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=wt.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Y,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),b3(0,pB).pipe(Ii(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=Wr(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new $$(r),this._sortStrategy=new Vhe(this.element,t),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:l})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=Wr(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!H$(this._clientRect,.05,t,r))return;const s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||H$(o.clientRect,.05,e,t)&&([i,s]=function Uhe(n,e,t,r){const i=tz(e,r),s=nz(e,t);let o=0,a=0;if(i){const l=n.scrollTop;1===i?l>0&&(o=1):n.scrollHeight-l>n.clientHeight&&(o=2)}if(s){const l=n.scrollLeft;1===s?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,e,t),(i||s)&&(r=a))}),!i&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};i=tz(l,t),s=nz(l,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Wr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Wr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Wr(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&hk(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!hk(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const s=Wr(this.element);return i===s||s.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=BS(Wr(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function tz(n,e){const{top:t,bottom:r,height:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}function nz(n,e){const{left:t,right:r,width:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}const wD=yu({passive:!1,capture:!0});let jhe=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new Y,this.pointerUp=new Y,this.scroll=new Y,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,wD)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,wD)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:wD}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:wD}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new dt(i=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&i.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),fe(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Hhe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let pk=(()=>{class n{constructor(t,r,i,s){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,r=Hhe){return new Lhe(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Bhe(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(it),Q(HS),Q(jhe))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yhe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({providers:[pk],imports:[$S]})}return n})();const Qhe=function(n,e){return{"background-color":n,border:e}};function Xhe(n,e){if(1&n){const t=Lt();S(0,"div",22),ye("click",function(){const s=De(t).$implicit;return be(oe(2).selectColor(s))}),M()}if(2&n){const t=e.$implicit,r=oe(2);te("ngStyle",jr(1,Qhe,t,r.subtask.tagColor===t?"3px solid black":"1px solid #000"))}}function Jhe(n,e){if(1&n){const t=Lt();S(0,"div",1)(1,"div",2)(2,"h2",3),G(3),M(),S(4,"div",4)(5,"button",5),ye("click",function(){return De(t),be(oe().saveSubtask())}),G(6,"\u4fdd\u5b58"),M(),S(7,"button",5),ye("click",function(){return De(t),be(oe().cancel())}),G(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),M()()(),S(9,"div",6)(10,"span",7),G(11,"\u30bf\u30a4\u30c8\u30eb:"),M(),S(12,"span",8)(13,"input",9),ye("ngModelChange",function(i){return De(t),be(oe().subtask.title=i)}),M()()(),S(14,"div",6)(15,"span",7),G(16,"\u8aac\u660e:"),M(),S(17,"span",8)(18,"textarea",10),ye("ngModelChange",function(i){return De(t),be(oe().subtask.description=i)}),M()()(),S(19,"div",6)(20,"span",7),G(21,"\u958b\u59cb\u65e5\u6642:"),M(),S(22,"span",8)(23,"input",11),ye("ngModelChange",function(i){return De(t),be(oe().subtask.startDateTime=i)}),M()()(),S(24,"div",6)(25,"span",7),G(26,"\u7d42\u4e86\u65e5\u6642:"),M(),S(27,"span",8)(28,"input",11),ye("ngModelChange",function(i){return De(t),be(oe().subtask.endDateTime=i)}),M()()(),S(29,"div",6)(30,"span",7),G(31,"\u512a\u5148\u5ea6:"),M(),S(32,"span",8)(33,"select",12),ye("ngModelChange",function(i){return De(t),be(oe().subtask.priority=i)}),S(34,"option",13),G(35,"\u4f4e"),M(),S(36,"option",14),G(37,"\u4e2d"),M(),S(38,"option",15),G(39,"\u9ad8"),M()()()(),S(40,"div",6)(41,"span",7),G(42,"\u30bf\u30b0:"),M(),S(43,"span",8)(44,"input",16),ye("ngModelChange",function(i){return De(t),be(oe().subtask.tag=i)}),M()()(),S(45,"div",6)(46,"span",7),G(47,"\u30bf\u30b0\u306e\u8272:"),M(),S(48,"span",8)(49,"div",17),Ne(50,Xhe,1,4,"div",18),M()()(),S(51,"div",6)(52,"span",7),G(53,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),M(),S(54,"span",8)(55,"select",12),ye("ngModelChange",function(i){return De(t),be(oe().subtask.status=i)}),S(56,"option",19),G(57,"\u672a\u7740\u624b"),M(),S(58,"option",20),G(59,"\u9032\u884c\u4e2d"),M(),S(60,"option",21),G(61,"\u5b8c\u4e86"),M()()()()()}if(2&n){const t=oe();K(3),jo("",t.subtask.title," \u306e\u8a73\u7d30"),K(10),te("ngModel",t.subtask.title),K(5),te("ngModel",t.subtask.description),K(5),te("ngModel",t.subtask.startDateTime),K(5),te("ngModel",t.subtask.endDateTime),K(5),te("ngModel",t.subtask.priority),K(11),te("ngModel",t.subtask.tag),K(6),te("ngForOf",t.colors),K(5),te("ngModel",t.subtask.status)}}let efe=(()=>{class n{constructor(t,r,i){this.taskService=t,this.dialogRef=r,this.data=i,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],i&&i.subtask&&i.task&&(this.subtask=i.subtask,this.task=i.task)}ngOnInit(){this.subtask||(this.subtask={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"})}saveSubtask(){var t=this;return(0,pe.Z)(function*(){t.task.subtasks||(t.task.subtasks=[]);const r=t.task.subtasks.findIndex(i=>i.id===t.subtask.id);-1!==r?t.task.subtasks[r]=t.subtask:t.task.subtasks.push(t.subtask),yield t.taskService.updateTask(t.task),t.dialogRef.close(t.subtask)})()}cancel(){this.dialogRef.close()}selectColor(t){this.subtask.tagColor=t}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(r){return new(r||n)(z(Uf),z(bm),z(iA))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-subtask-detail"]],inputs:{subtask:"subtask"},standalone:!0,features:[Ho],decls:1,vars:1,consts:[["class","subtask-detail-container",4,"ngIf"],[1,"subtask-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"color-option",3,"ngStyle","click"]],template:function(r,i){1&r&&Ne(0,Jhe,62,9,"div",0),2&r&&te("ngIf",i.subtask)},dependencies:[Ts,zi,mo,Sa,_u,pm,gm,Bl,gu,pu,$l],styles:[".subtask-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;text-align:center}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ddd}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0}"]})}return n})();function tfe(n,e){if(1&n&&(S(0,"option"),G(1),M()),2&n){const t=e.$implicit;K(1),St(t)}}function nfe(n,e){if(1&n){const t=Lt();S(0,"li",52)(1,"div",53),ye("click",function(){const s=De(t).$implicit;return be(oe(2).openSubtaskDetailDialog(s))}),S(2,"input",54),ye("ngModelChange",function(i){return be(De(t).$implicit.selected=i)})("click",function(i){return i.stopPropagation()}),M(),S(3,"span",55),G(4),M(),S(5,"span",56),G(6),M(),S(7,"span",57),G(8),M(),S(9,"span",58),G(10),Qt(11,"date"),M(),S(12,"span",59),G(13),Qt(14,"date"),M(),S(15,"span",60),G(16),M(),Zn(17,"span",61),M()()}if(2&n){const t=e.$implicit,r=oe(2);K(2),te("ngModel",t.selected),K(2),St(t.title),K(2),St(t.status),K(1),te("ngClass",t.priority),K(1),St(r.getPriorityLabel(t.priority)),K(2),St(sr(11,10,t.startDateTime,"short")),K(3),St(sr(14,13,t.endDateTime,"short")),K(3),St(t.tag),K(1),Hs("background-color",t.tagColor)}}function rfe(n,e){if(1&n){const t=Lt();S(0,"li",37)(1,"div",38)(2,"input",39),ye("ngModelChange",function(i){return be(De(t).$implicit.selected=i)}),M(),S(3,"a",40),ye("click",function(){const s=De(t).$implicit;return be(oe().openTaskDetailDialog(s))}),S(4,"div",41),G(5),M(),S(6,"div",42)(7,"span",43),G(8),M(),S(9,"span",44),G(10),M(),S(11,"span",45),G(12),M(),S(13,"span",46),G(14),Qt(15,"date"),M(),S(16,"span",47),G(17),Qt(18,"date"),M(),S(19,"span",48),G(20),M(),Zn(21,"span",49),M()()(),S(22,"ul",50),Ne(23,nfe,18,16,"li",51),M()()}if(2&n){const t=e.$implicit,r=oe();K(2),te("ngModel",t.selected),K(3),St(t.title),K(3),St(r.getProjectName(t.projectId||"")),K(2),St(t.status),K(1),te("ngClass",t.priority),K(1),St(r.getPriorityLabel(t.priority)),K(2),St(sr(15,12,t.startDateTime,"short")),K(3),St(sr(18,15,t.endDateTime,"short")),K(3),St(t.tag),K(1),Hs("background-color",t.tagColor),K(2),te("ngForOf",t.subtasks)}}const ife=[{path:"",redirectTo:"/calendar",pathMatch:"full"},{path:"calendar",component:She},{path:"projects",component:Phe},{path:"tasks",component:(()=>{class n{constructor(t,r,i){this.taskService=t,this.projectService=r,this.dialog=i,this.tasks$=null,this.projects$=null,this.tasks=[],this.projects=[],this.tags=[],this.selectedTag="",this.selectedPriority="",this.selectedStatus="\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9",this.searchText="",this.sortOrder="startDateAsc"}ngOnInit(){this.tasks$=this.taskService.getTasks(),this.projects$=this.projectService.getProjects(),this.tasks$?.subscribe(t=>{t&&(this.tasks=t,this.tags=this.getTags())}),this.projects$?.subscribe(t=>{t&&(this.projects=t)})}filteredTasks(){const t=this.searchText.toLowerCase();return this.tasks.filter(r=>("\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"===this.selectedStatus||"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"===this.selectedStatus&&("\u672a\u7740\u624b"===r.status||"\u9032\u884c\u4e2d"===r.status)||this.selectedStatus===r.status)&&(r.title.toLowerCase().includes(t)||r.tag.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))&&(""===this.selectedTag||r.tag===this.selectedTag)&&(""===this.selectedPriority||r.priority===this.selectedPriority)).sort((r,i)=>this.compareTasks(r,i))}sortTasks(t){t&&(this.sortOrder=t),this.tasks.sort((r,i)=>this.compareTasks(r,i))}compareTasks(t,r){const i={high:1,medium:2,low:3,"":4};switch(this.sortOrder){case"startDateAsc":return new Date(t.startDateTime).getTime()-new Date(r.startDateTime).getTime();case"startDateDesc":return new Date(r.startDateTime).getTime()-new Date(t.startDateTime).getTime();case"endDateAsc":return new Date(t.endDateTime).getTime()-new Date(r.endDateTime).getTime();case"endDateDesc":return new Date(r.endDateTime).getTime()-new Date(t.endDateTime).getTime();case"priority":return t.priority!==r.priority?i[t.priority]-i[r.priority]:new Date(t.endDateTime).getTime()-new Date(r.endDateTime).getTime();default:return 0}}drop(t){X$(this.tasks,t.previousIndex,t.currentIndex),this.saveTasks()}getTags(){const t=this.tasks.map(r=>r.tag);return Array.from(new Set(t)).filter(r=>""!==r)}deleteSelectedTasks(){this.tasks=this.tasks.filter(t=>t.selected?(this.taskService.deleteTask(t),!1):(t.subtasks=t.subtasks.filter(r=>!r.selected),!0)),this.saveTasks()}getPriorityLabel(t){switch(t){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return t}}getProjectName(t){const r=this.projects.find(i=>i.id===t);return r?r.name:""}openAddTaskDialog(){this.dialog.open(ak,{width:"400px"}).afterClosed().subscribe(r=>{r&&(this.tasks$=this.taskService.getTasks(),this.tasks$?.subscribe(i=>{i&&(this.tasks=i)}))})}openAddProjectDialog(){this.dialog.open(B$,{width:"600px"}).afterClosed().subscribe(r=>{r&&(this.projects$=this.projectService.getProjects(),this.projects$?.subscribe(i=>{i&&(this.projects=i)}))})}openTaskDetailDialog(t){this.dialog.closeAll(),this.dialog.open(S_,{width:"600px",data:{task:t}}).afterClosed().subscribe(i=>{i&&(this.tasks=this.tasks.map(s=>s.id===i.id?i:s),this.saveTasks())})}openSubtaskDetailDialog(t){this.dialog.closeAll(),this.dialog.open(efe,{width:"400px",data:{subtask:t}}).afterClosed().subscribe(i=>{i&&this.saveTasks()})}saveTasks(){console.log("Tasks saved")}static#e=this.\u0275fac=function(r){return new(r||n)(z(Uf),z(I_),z(Tm))};static#t=this.\u0275cmp=un({type:n,selectors:[["app-task-list"]],standalone:!0,features:[Ho],decls:85,vars:7,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"task-filters"],[1,"filter-group"],["for","searchText"],["type","text","id","searchText","placeholder","\u30bf\u30b9\u30af\u3092\u691c\u7d22",1,"search-input",3,"ngModel","ngModelChange"],["for","sortPriority"],["id","sortPriority",1,"filter-btn",3,"click"],["for","sortDate"],["id","sortDate",1,"filter-select",3,"ngModel","ngModelChange","change"],["value","startDateAsc"],["value","startDateDesc"],["value","endDateAsc"],["value","endDateDesc"],["for","tagSelect"],["id","tagSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["for","prioritySelect"],["id","prioritySelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["for","statusSelect"],["id","statusSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-project"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],[1,"subtask-list"],["class","subtask-item",4,"ngFor","ngForOf"],[1,"subtask-item"],[1,"subtask-item-content",3,"click"],["type","checkbox",1,"subtask-checkbox",3,"ngModel","ngModelChange","click"],[1,"subtask-title"],[1,"subtask-status"],[1,"subtask-priority",3,"ngClass"],[1,"subtask-start-date"],[1,"subtask-end-date"],[1,"subtask-tag"],[1,"subtask-tag-color"]],template:function(r,i){1&r&&(S(0,"div",0)(1,"div",1)(2,"button",2),ye("click",function(){return i.openAddTaskDialog()}),G(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),M(),S(4,"button",3),ye("click",function(){return i.openAddProjectDialog()}),G(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),M(),S(6,"button",3),ye("click",function(){return i.deleteSelectedTasks()}),G(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),M()(),S(8,"div",4)(9,"div",5)(10,"label",6),G(11,"\u691c\u7d22:"),M(),S(12,"input",7),ye("ngModelChange",function(o){return i.searchText=o}),M()(),S(13,"div",5)(14,"label",8),G(15,"\u512a\u5148\u5ea6\u3067\u30bd\u30fc\u30c8:"),M(),S(16,"button",9),ye("click",function(){return i.sortTasks("priority")}),G(17,"\u512a\u5148\u5ea6"),M()(),S(18,"div",5)(19,"label",10),G(20,"\u65e5\u6642\u3067\u30bd\u30fc\u30c8:"),M(),S(21,"select",11),ye("ngModelChange",function(o){return i.sortOrder=o})("change",function(){return i.sortTasks()}),S(22,"option",12),G(23,"\u958b\u59cb\u65e5\u6642\u306e\u65e9\u3044\u9806"),M(),S(24,"option",13),G(25,"\u958b\u59cb\u65e5\u6642\u306e\u9045\u3044\u9806"),M(),S(26,"option",14),G(27,"\u7d42\u4e86\u65e5\u6642\u306e\u65e9\u3044\u9806"),M(),S(28,"option",15),G(29,"\u7d42\u4e86\u65e5\u6642\u306e\u9045\u3044\u9806"),M()()(),S(30,"div",5)(31,"label",16),G(32,"\u30bf\u30b0:"),M(),S(33,"select",17),ye("ngModelChange",function(o){return i.selectedTag=o}),S(34,"option",18),G(35,"\u3059\u3079\u3066\u306e\u30bf\u30b0"),M(),Ne(36,tfe,2,1,"option",19),M()(),S(37,"div",5)(38,"label",20),G(39,"\u512a\u5148\u5ea6:"),M(),S(40,"select",21),ye("ngModelChange",function(o){return i.selectedPriority=o}),S(41,"option",18),G(42,"\u3059\u3079\u3066\u306e\u512a\u5148\u5ea6"),M(),S(43,"option",22),G(44,"\u4f4e"),M(),S(45,"option",23),G(46,"\u4e2d"),M(),S(47,"option",24),G(48,"\u9ad8"),M()()(),S(49,"div",5)(50,"label",25),G(51,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),M(),S(52,"select",26),ye("ngModelChange",function(o){return i.selectedStatus=o}),S(53,"option",27),G(54,"\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"),M(),S(55,"option",28),G(56,"\u672a\u7740\u624b"),M(),S(57,"option",29),G(58,"\u9032\u884c\u4e2d"),M(),S(59,"option",30),G(60,"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"),M(),S(61,"option",31),G(62,"\u5b8c\u4e86"),M()()()(),S(63,"ul",32)(64,"li",33)(65,"div",34)(66,"span",35),G(67,"\u9078\u629e"),M(),S(68,"span",35),G(69,"\u30bf\u30a4\u30c8\u30eb"),M(),S(70,"span",35),G(71,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),M(),S(72,"span",35),G(73,"\u30b9\u30c6\u30fc\u30bf\u30b9"),M(),S(74,"span",35),G(75,"\u512a\u5148\u5ea6"),M(),S(76,"span",35),G(77,"\u958b\u59cb\u65e5\u6642"),M(),S(78,"span",35),G(79,"\u7d42\u4e86\u65e5\u6642"),M(),S(80,"span",35),G(81,"\u30bf\u30b0"),M(),S(82,"span",35),G(83,"\u30bf\u30b0\u306e\u8272"),M()()(),Ne(84,rfe,24,18,"li",36),M()()),2&r&&(K(12),te("ngModel",i.searchText),K(9),te("ngModel",i.sortOrder),K(12),te("ngModel",i.selectedTag),K(3),te("ngForOf",i.tags),K(4),te("ngModel",i.selectedPriority),K(12),te("ngModel",i.selectedStatus),K(32),te("ngForOf",i.filteredTasks()))},dependencies:[Ts,us,zi,Ow,_u,pm,gm,Bl,Oh,gu,pu,$l,WI,Yhe],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%], .show-completed[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-due-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%]{font-size:.9em;color:#555}.task-tag[_ngcontent-%COMP%]{display:inline-block;padding:2px 4px;border-radius:3px;background-color:transparent}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:10px 0 0 20px}.subtask-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:5px;padding:10px;display:flex;align-items:center}.subtask-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 15% 15% 15% 15%;width:100%;align-items:center}.subtask-title[_ngcontent-%COMP%], .subtask-status[_ngcontent-%COMP%], .subtask-priority[_ngcontent-%COMP%], .subtask-start-date[_ngcontent-%COMP%], .subtask-end-date[_ngcontent-%COMP%], .subtask-tag[_ngcontent-%COMP%], .subtask-tag-color[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.subtask-title[_ngcontent-%COMP%]{padding-right:10px}.subtask-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-item-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}"]})}return n})()},{path:"task/:id",component:S_}];(function ZK(n,e){return c7({rootComponent:n,...hL(e)})})(NX,{providers:[lP(kee,_u,Cre,Gre,(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Ht({type:n});static#n=this.\u0275inj=Wt({imports:[WI.forRoot(ife),WI]})}return n})(),rU.forRoot({provide:Au,useFactory:yU}),bae.initializeApp({apiKey:"AIzaSyBLib--Lb3kRU1UORbEgx76QxXWLr8rFZk",authDomain:"nozuki3rd.firebaseapp.com",projectId:"nozuki3rd",storageBucket:"nozuki3rd.appspot.com",messagingSenderId:"183357457685",appId:"1:183357457685:web:01b4a530cc30b2b310d51c"}),Xde)]}).catch(n=>console.error(n))},106:(Js,xr,yt)=>{yt.d(xr,{Z:()=>Or});var k=yt(58),lt=yt(537),$e=yt(534),he=yt(879);class wt{constructor(ht,Et){this._delegate=ht,this.firebase=Et,(0,$e._addComponent)(ht,new lt.wA("app-compat",()=>this,"PUBLIC")),this.container=ht.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ht){this._delegate.automaticDataCollectionEnabled=ht}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ht=>{this._delegate.checkDestroyed(),ht()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$e.deleteApp)(this._delegate)))}_getService(ht,Et=$e._DEFAULT_ENTRY_NAME){var Nr;this._delegate.checkDestroyed();const Fr=this._delegate.container.getProvider(ht);return!Fr.isInitialized()&&"EXPLICIT"===(null===(Nr=Fr.getComponent())||void 0===Nr?void 0:Nr.instantiationMode)&&Fr.initialize(),Fr.getImmediate({identifier:Et})}_removeServiceInstance(ht,Et=$e._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ht).clearInstance(Et)}_addComponent(ht){(0,$e._addComponent)(this._delegate,ht)}_addOrOverwriteComponent(ht){(0,$e._addOrOverwriteComponent)(this._delegate,ht)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const zn=new k.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),we=function Pt(){const Gt=function Pr(Gt){const ht={},Et={__esModule:!0,initializeApp:function Mn(rt,Jn={}){const gn=$e.initializeApp(rt,Jn);if((0,k.r3)(ht,gn.name))return ht[gn.name];const Ie=new Gt(gn,Et);return ht[gn.name]=Ie,Ie},app:Fr,registerVersion:$e.registerVersion,setLogLevel:$e.setLogLevel,onLog:$e.onLog,apps:null,SDK_VERSION:$e.SDK_VERSION,INTERNAL:{registerComponent:function ln(rt){const Jn=rt.name,gn=Jn.replace("-compat","");if($e._registerComponent(rt)&&"PUBLIC"===rt.type){const Ie=(Fn=Fr())=>{if("function"!=typeof Fn[gn])throw zn.create("invalid-app-argument",{appName:Jn});return Fn[gn]()};void 0!==rt.serviceProps&&(0,k.ZB)(Ie,rt.serviceProps),Et[gn]=Ie,Gt.prototype[gn]=function(...Fn){return this._getService.bind(this,Jn).apply(this,rt.multipleInstances?Fn:[])}}return"PUBLIC"===rt.type?Et[gn]:null},removeApp:function Nr(rt){delete ht[rt]},useAsService:function ii(rt,Jn){return"serverAuth"===Jn?null:Jn},modularAPIs:$e}};function Fr(rt){if(!(0,k.r3)(ht,rt=rt||$e._DEFAULT_ENTRY_NAME))throw zn.create("no-app",{appName:rt});return ht[rt]}return Et.default=Et,Object.defineProperty(Et,"apps",{get:function Zt(){return Object.keys(ht).map(rt=>ht[rt])}}),Fr.App=Gt,Et}(wt);return Gt.INTERNAL=Object.assign(Object.assign({},Gt.INTERNAL),{createFirebaseNamespace:Pt,extendNamespace:function ht(Et){(0,k.ZB)(Gt,Et)},createSubscribe:k.ne,ErrorFactory:k.LL,deepExtend:k.ZB}),Gt}(),Re=new he.Yd("@firebase/app-compat");if((0,k.jU)()&&void 0!==self.firebase){Re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Gt=self.firebase.SDK_VERSION;Gt&&Gt.indexOf("LITE")>=0&&Re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Or=we;!function zt(Gt){(0,$e.registerVersion)("@firebase/app-compat","0.2.35",Gt)}()},534:(Js,xr,yt)=>{yt.r(xr),yt.d(xr,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>mi,_DEFAULT_ENTRY_NAME:()=>gs,_addComponent:()=>_s,_addOrOverwriteComponent:()=>mn,_apps:()=>pi,_clearComponents:()=>gi,_components:()=>dr,_getProvider:()=>hr,_isFirebaseApp:()=>bo,_isFirebaseServerApp:()=>Ya,_registerComponent:()=>Xi,_removeServiceInstance:()=>Cc,_serverApps:()=>ms,deleteApp:()=>Io,getApp:()=>Xa,getApps:()=>Dc,initializeApp:()=>To,initializeServerApp:()=>rd,onLog:()=>q,registerVersion:()=>L,setLogLevel:()=>fe});var k=yt(861),lt=yt(537),$e=yt(879),he=yt(58);const wt=(x,J)=>J.some(ie=>x instanceof ie);let Nn,zn;const we=new WeakMap,Re=new WeakMap,Ye=new WeakMap,At=new WeakMap,zt=new WeakMap;let ht={get(x,J,ie){if(x instanceof IDBTransaction){if("done"===J)return Re.get(x);if("objectStoreNames"===J)return x.objectStoreNames||Ye.get(x);if("store"===J)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return Mn(x[J])},set:(x,J,ie)=>(x[J]=ie,!0),has:(x,J)=>x instanceof IDBTransaction&&("done"===J||"store"===J)||J in x};function Fr(x){return"function"==typeof x?function Nr(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pt(){return zn||(zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...J){return x.apply(Zt(this),J),Mn(we.get(this))}:function(...J){return Mn(x.apply(Zt(this),J))}:function(J,...ie){const Se=x.call(Zt(this),J,...ie);return Ye.set(Se,J.sort?J.sort():[J]),Mn(Se)}}(x):(x instanceof IDBTransaction&&function Gt(x){if(Re.has(x))return;const J=new Promise((ie,Se)=>{const ft=()=>{x.removeEventListener("complete",gt),x.removeEventListener("error",Tt),x.removeEventListener("abort",Tt)},gt=()=>{ie(),ft()},Tt=()=>{Se(x.error||new DOMException("AbortError","AbortError")),ft()};x.addEventListener("complete",gt),x.addEventListener("error",Tt),x.addEventListener("abort",Tt)});Re.set(x,J)}(x),wt(x,function Pr(){return Nn||(Nn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,ht):x)}function Mn(x){if(x instanceof IDBRequest)return function Or(x){const J=new Promise((ie,Se)=>{const ft=()=>{x.removeEventListener("success",gt),x.removeEventListener("error",Tt)},gt=()=>{ie(Mn(x.result)),ft()},Tt=()=>{Se(x.error),ft()};x.addEventListener("success",gt),x.addEventListener("error",Tt)});return J.then(ie=>{ie instanceof IDBCursor&&we.set(ie,x)}).catch(()=>{}),zt.set(J,x),J}(x);if(At.has(x))return At.get(x);const J=Fr(x);return J!==x&&(At.set(x,J),zt.set(J,x)),J}const Zt=x=>zt.get(x),rt=["get","getKey","getAll","getAllKeys","count"],Jn=["put","add","delete","clear"],gn=new Map;function Ie(x,J){if(!(x instanceof IDBDatabase)||J in x||"string"!=typeof J)return;if(gn.get(J))return gn.get(J);const ie=J.replace(/FromIndex$/,""),Se=J!==ie,ft=Jn.includes(ie);if(!(ie in(Se?IDBIndex:IDBObjectStore).prototype)||!ft&&!rt.includes(ie))return;const gt=function(){var Tt=(0,k.Z)(function*(_n,...Mt){const Ji=this.transaction(_n,ft?"readwrite":"readonly");let la=Ji.store;return Se&&(la=la.index(Mt.shift())),(yield Promise.all([la[ie](...Mt),ft&&Ji.done]))[0]});return function(Mt){return Tt.apply(this,arguments)}}();return gn.set(J,gt),gt}!function Et(x){ht=x(ht)}(x=>({...x,get:(J,ie,Se)=>Ie(J,ie)||x.get(J,ie,Se),has:(J,ie)=>!!Ie(J,ie)||x.has(J,ie)}));class Fn{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(ie=>{if(function Tn(x){const J=x.getComponent();return"VERSION"===J?.type}(ie)){const Se=ie.getImmediate();return`${Se.library}/${Se.version}`}return null}).filter(ie=>ie).join(" ")}}const Ni="@firebase/app",Yi="0.10.5",dt=new $e.Yd("@firebase/app"),gs="[DEFAULT]",Ec={[Ni]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},pi=new Map,ms=new Map,dr=new Map;function _s(x,J){try{x.container.addComponent(J)}catch(ie){dt.debug(`Component ${J.name} failed to register with FirebaseApp ${x.name}`,ie)}}function mn(x,J){x.container.addOrOverwriteComponent(J)}function Xi(x){const J=x.name;if(dr.has(J))return dt.debug(`There were multiple attempts to register component ${J}.`),!1;dr.set(J,x);for(const ie of pi.values())_s(ie,x);for(const ie of ms.values())_s(ie,x);return!0}function hr(x,J){const ie=x.container.getProvider("heartbeat").getImmediate({optional:!0});return ie&&ie.triggerHeartbeat(),x.container.getProvider(J)}function Cc(x,J,ie=gs){hr(x,J).clearInstance(ie)}function bo(x){return void 0!==x.options}function Ya(x){return void 0!==x.settings}function gi(){dr.clear()}const fr=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Qa{constructor(J,ie,Se){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},ie),this._name=ie.name,this._automaticDataCollectionEnabled=ie.automaticDataCollectionEnabled,this._container=Se,this.container.addComponent(new lt.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}class Fi extends Qa{constructor(J,ie,Se,ft){const gt=void 0!==ie.automaticDataCollectionEnabled&&ie.automaticDataCollectionEnabled,Tt={name:Se,automaticDataCollectionEnabled:gt};super(void 0!==J.apiKey?J:J.options,Tt,ft),this._serverConfig=Object.assign({automaticDataCollectionEnabled:gt},ie),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ie.releaseOnDeref=void 0,L(Ni,Yi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(J){this.isDeleted||(this._refCount++,void 0!==J&&this._finalizationRegistry.register(J,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Io(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw fr.create("server-app-deleted")}}const mi="10.12.2";function To(x,J={}){let ie=x;"object"!=typeof J&&(J={name:J});const Se=Object.assign({name:gs,automaticDataCollectionEnabled:!1},J),ft=Se.name;if("string"!=typeof ft||!ft)throw fr.create("bad-app-name",{appName:String(ft)});if(ie||(ie=(0,he.aH)()),!ie)throw fr.create("no-options");const gt=pi.get(ft);if(gt){if((0,he.vZ)(ie,gt.options)&&(0,he.vZ)(Se,gt.config))return gt;throw fr.create("duplicate-app",{appName:ft})}const Tt=new lt.H0(ft);for(const Mt of dr.values())Tt.addComponent(Mt);const _n=new Qa(ie,Se,Tt);return pi.set(ft,_n),_n}function rd(x,J){if((0,he.jU)())throw fr.create("invalid-server-app-environment");let ie;void 0===J.automaticDataCollectionEnabled&&(J.automaticDataCollectionEnabled=!1),ie=bo(x)?x.options:x;const Se=Object.assign(Object.assign({},J),ie);if(void 0!==Se.releaseOnDeref&&delete Se.releaseOnDeref,void 0!==J.releaseOnDeref&&typeof FinalizationRegistry>"u")throw fr.create("finalization-registry-not-supported",{});const gt=""+(Ji=JSON.stringify(Se),[...Ji].reduce((la,q_)=>Math.imul(31,la)+q_.charCodeAt(0)|0,0)),Tt=ms.get(gt);var Ji;if(Tt)return Tt.incRefCount(J.releaseOnDeref),Tt;const _n=new lt.H0(gt);for(const Ji of dr.values())_n.addComponent(Ji);const Mt=new Fi(ie,J,gt,_n);return ms.set(gt,Mt),Mt}function Xa(x=gs){const J=pi.get(x);if(!J&&x===gs&&(0,he.aH)())return To();if(!J)throw fr.create("no-app",{appName:x});return J}function Dc(){return Array.from(pi.values())}function Io(x){return W.apply(this,arguments)}function W(){return(W=(0,k.Z)(function*(x){let J=!1;const ie=x.name;pi.has(ie)?(J=!0,pi.delete(ie)):ms.has(ie)&&x.decRefCount()<=0&&(ms.delete(ie),J=!0),J&&(yield Promise.all(x.container.getProviders().map(Se=>Se.delete())),x.isDeleted=!0)})).apply(this,arguments)}function L(x,J,ie){var Se;let ft=null!==(Se=Ec[x])&&void 0!==Se?Se:x;ie&&(ft+=`-${ie}`);const gt=ft.match(/\s|\//),Tt=J.match(/\s|\//);if(gt||Tt){const _n=[`Unable to register library "${ft}" with version "${J}":`];return gt&&_n.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),gt&&Tt&&_n.push("and"),Tt&&_n.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void dt.warn(_n.join(" "))}Xi(new lt.wA(`${ft}-version`,()=>({library:ft,version:J}),"VERSION"))}function q(x,J){if(null!==x&&"function"!=typeof x)throw fr.create("invalid-log-argument");(0,$e.Am)(x,J)}function fe(x){(0,$e.Ub)(x)}const ne="firebase-heartbeat-database",ge=1,Ke="firebase-heartbeat-store";let Jt=null;function ct(){return Jt||(Jt=function ln(x,J,{blocked:ie,upgrade:Se,blocking:ft,terminated:gt}={}){const Tt=indexedDB.open(x,J),_n=Mn(Tt);return Se&&Tt.addEventListener("upgradeneeded",Mt=>{Se(Mn(Tt.result),Mt.oldVersion,Mt.newVersion,Mn(Tt.transaction),Mt)}),ie&&Tt.addEventListener("blocked",Mt=>ie(Mt.oldVersion,Mt.newVersion,Mt)),_n.then(Mt=>{gt&&Mt.addEventListener("close",()=>gt()),ft&&Mt.addEventListener("versionchange",Ji=>ft(Ji.oldVersion,Ji.newVersion,Ji))}).catch(()=>{}),_n}(ne,ge,{upgrade:(x,J)=>{if(0===J)try{x.createObjectStore(Ke)}catch(ie){console.warn(ie)}}}).catch(x=>{throw fr.create("idb-open",{originalErrorMessage:x.message})})),Jt}function gr(){return(gr=(0,k.Z)(function*(x){try{const ie=(yield ct()).transaction(Ke),Se=yield ie.objectStore(Ke).get(cn(x));return yield ie.done,Se}catch(J){if(J instanceof he.ZR)dt.warn(J.message);else{const ie=fr.create("idb-get",{originalErrorMessage:J?.message});dt.warn(ie.message)}}})).apply(this,arguments)}function qe(x,J){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,k.Z)(function*(x,J){try{const Se=(yield ct()).transaction(Ke,"readwrite");yield Se.objectStore(Ke).put(J,cn(x)),yield Se.done}catch(ie){if(ie instanceof he.ZR)dt.warn(ie.message);else{const Se=fr.create("idb-set",{originalErrorMessage:ie?.message});dt.warn(Se.message)}}})).apply(this,arguments)}function cn(x){return`${x.name}!${x.options.appId}`}class tn{constructor(J){this.container=J,this._heartbeatsCache=null;const ie=this.container.getProvider("app").getImmediate();this._storage=new Ja(ie),this._heartbeatsCachePromise=this._storage.read().then(Se=>(this._heartbeatsCache=Se,Se))}triggerHeartbeat(){var J=this;return(0,k.Z)(function*(){var ie,Se;const gt=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=ot();if((null!=(null===(ie=J._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||(J._heartbeatsCache=yield J._heartbeatsCachePromise,null!=(null===(Se=J._heartbeatsCache)||void 0===Se?void 0:Se.heartbeats)))&&J._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!J._heartbeatsCache.heartbeats.some(_n=>_n.date===Tt))return J._heartbeatsCache.heartbeats.push({date:Tt,agent:gt}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(_n=>{const Mt=new Date(_n.date).valueOf();return Date.now()-Mt<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,k.Z)(function*(){var ie;if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null==(null===(ie=J._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||0===J._heartbeatsCache.heartbeats.length)return"";const Se=ot(),{heartbeatsToSend:ft,unsentEntries:gt}=function eo(x,J=1024){const ie=[];let Se=x.slice();for(const ft of x){const gt=ie.find(Tt=>Tt.agent===ft.agent);if(gt){if(gt.dates.push(ft.date),id(ie)>J){gt.dates.pop();break}}else if(ie.push({agent:ft.agent,dates:[ft.date]}),id(ie)>J){ie.pop();break}Se=Se.slice(1)}return{heartbeatsToSend:ie,unsentEntries:Se}}(J._heartbeatsCache.heartbeats),Tt=(0,he.L)(JSON.stringify({version:2,heartbeats:ft}));return J._heartbeatsCache.lastSentHeartbeatDate=Se,gt.length>0?(J._heartbeatsCache.heartbeats=gt,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Tt})()}}function ot(){return(new Date).toISOString().substring(0,10)}class Ja{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,k.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,k.Z)(function*(){if(yield J._canUseIndexedDBPromise){const Se=yield function pr(x){return gr.apply(this,arguments)}(J.app);return Se?.heartbeats?Se:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(J){var ie=this;return(0,k.Z)(function*(){var Se;if(yield ie._canUseIndexedDBPromise){const gt=yield ie.read();return qe(ie.app,{lastSentHeartbeatDate:null!==(Se=J.lastSentHeartbeatDate)&&void 0!==Se?Se:gt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var ie=this;return(0,k.Z)(function*(){var Se;if(yield ie._canUseIndexedDBPromise){const gt=yield ie.read();return qe(ie.app,{lastSentHeartbeatDate:null!==(Se=J.lastSentHeartbeatDate)&&void 0!==Se?Se:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...J.heartbeats]})}})()}}function id(x){return(0,he.L)(JSON.stringify({version:2,heartbeats:x})).length}!function to(x){Xi(new lt.wA("platform-logger",J=>new Fn(J),"PRIVATE")),Xi(new lt.wA("heartbeat",J=>new tn(J),"PRIVATE")),L(Ni,Yi,x),L(Ni,Yi,"esm2017"),L("fire-js","")}("")},537:(Js,xr,yt)=>{yt.d(xr,{H0:()=>Pr,wA:()=>$e});var k=yt(861),lt=yt(58);class $e{constructor(we,Re,Ye){this.name=we,this.instanceFactory=Re,this.type=Ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(we){return this.instantiationMode=we,this}setMultipleInstances(we){return this.multipleInstances=we,this}setServiceProps(we){return this.serviceProps=we,this}setInstanceCreatedCallback(we){return this.onInstanceCreated=we,this}}const he="[DEFAULT]";class wt{constructor(we,Re){this.name=we,this.container=Re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(we){const Re=this.normalizeInstanceIdentifier(we);if(!this.instancesDeferred.has(Re)){const Ye=new lt.BH;if(this.instancesDeferred.set(Re,Ye),this.isInitialized(Re)||this.shouldAutoInitialize())try{const At=this.getOrInitializeService({instanceIdentifier:Re});At&&Ye.resolve(At)}catch{}}return this.instancesDeferred.get(Re).promise}getImmediate(we){var Re;const Ye=this.normalizeInstanceIdentifier(we?.identifier),At=null!==(Re=we?.optional)&&void 0!==Re&&Re;if(!this.isInitialized(Ye)&&!this.shouldAutoInitialize()){if(At)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ye})}catch(zt){if(At)return null;throw zt}}getComponent(){return this.component}setComponent(we){if(we.name!==this.name)throw Error(`Mismatching Component ${we.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=we,this.shouldAutoInitialize()){if(function zn(Pt){return"EAGER"===Pt.instantiationMode}(we))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[Re,Ye]of this.instancesDeferred.entries()){const At=this.normalizeInstanceIdentifier(Re);try{const zt=this.getOrInitializeService({instanceIdentifier:At});Ye.resolve(zt)}catch{}}}}clearInstance(we=he){this.instancesDeferred.delete(we),this.instancesOptions.delete(we),this.instances.delete(we)}delete(){var we=this;return(0,k.Z)(function*(){const Re=Array.from(we.instances.values());yield Promise.all([...Re.filter(Ye=>"INTERNAL"in Ye).map(Ye=>Ye.INTERNAL.delete()),...Re.filter(Ye=>"_delete"in Ye).map(Ye=>Ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(we=he){return this.instances.has(we)}getOptions(we=he){return this.instancesOptions.get(we)||{}}initialize(we={}){const{options:Re={}}=we,Ye=this.normalizeInstanceIdentifier(we.instanceIdentifier);if(this.isInitialized(Ye))throw Error(`${this.name}(${Ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const At=this.getOrInitializeService({instanceIdentifier:Ye,options:Re});for(const[zt,Or]of this.instancesDeferred.entries())Ye===this.normalizeInstanceIdentifier(zt)&&Or.resolve(At);return At}onInit(we,Re){var Ye;const At=this.normalizeInstanceIdentifier(Re),zt=null!==(Ye=this.onInitCallbacks.get(At))&&void 0!==Ye?Ye:new Set;zt.add(we),this.onInitCallbacks.set(At,zt);const Or=this.instances.get(At);return Or&&we(Or,At),()=>{zt.delete(we)}}invokeOnInitCallbacks(we,Re){const Ye=this.onInitCallbacks.get(Re);if(Ye)for(const At of Ye)try{At(we,Re)}catch{}}getOrInitializeService({instanceIdentifier:we,options:Re={}}){let Ye=this.instances.get(we);if(!Ye&&this.component&&(Ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Pt=we,Pt===he?void 0:Pt),options:Re}),this.instances.set(we,Ye),this.instancesOptions.set(we,Re),this.invokeOnInitCallbacks(Ye,we),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,we,Ye)}catch{}var Pt;return Ye||null}normalizeInstanceIdentifier(we=he){return this.component?this.component.multipleInstances?we:he:we}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pr{constructor(we){this.name=we,this.providers=new Map}addComponent(we){const Re=this.getProvider(we.name);if(Re.isComponentSet())throw new Error(`Component ${we.name} has already been registered with ${this.name}`);Re.setComponent(we)}addOrOverwriteComponent(we){this.getProvider(we.name).isComponentSet()&&this.providers.delete(we.name),this.addComponent(we)}getProvider(we){if(this.providers.has(we))return this.providers.get(we);const Re=new wt(we,this);return this.providers.set(we,Re),Re}getProviders(){return Array.from(this.providers.values())}}},879:(Js,xr,yt)=>{yt.d(xr,{Am:()=>Pt,Ub:()=>Pr,Yd:()=>zn,in:()=>lt});const k=[];var lt=function(we){return we[we.DEBUG=0]="DEBUG",we[we.VERBOSE=1]="VERBOSE",we[we.INFO=2]="INFO",we[we.WARN=3]="WARN",we[we.ERROR=4]="ERROR",we[we.SILENT=5]="SILENT",we}(lt||{});const $e={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},he=lt.INFO,wt={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},Nn=(we,Re,...Ye)=>{if(Re<we.logLevel)return;const At=(new Date).toISOString(),zt=wt[Re];if(!zt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Re})`);console[zt](`[${At}]  ${we.name}:`,...Ye)};class zn{constructor(Re){this.name=Re,this._logLevel=he,this._logHandler=Nn,this._userLogHandler=null,k.push(this)}get logLevel(){return this._logLevel}set logLevel(Re){if(!(Re in lt))throw new TypeError(`Invalid value "${Re}" assigned to \`logLevel\``);this._logLevel=Re}setLogLevel(Re){this._logLevel="string"==typeof Re?$e[Re]:Re}get logHandler(){return this._logHandler}set logHandler(Re){if("function"!=typeof Re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Re}get userLogHandler(){return this._userLogHandler}set userLogHandler(Re){this._userLogHandler=Re}debug(...Re){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...Re),this._logHandler(this,lt.DEBUG,...Re)}log(...Re){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...Re),this._logHandler(this,lt.VERBOSE,...Re)}info(...Re){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...Re),this._logHandler(this,lt.INFO,...Re)}warn(...Re){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...Re),this._logHandler(this,lt.WARN,...Re)}error(...Re){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...Re),this._logHandler(this,lt.ERROR,...Re)}}function Pr(we){k.forEach(Re=>{Re.setLogLevel(we)})}function Pt(we,Re){for(const Ye of k){let At=null;Re&&Re.level&&(At=$e[Re.level]),Ye.userLogHandler=null===we?null:(zt,Or,...Gt)=>{const ht=Gt.map(Et=>{if(null==Et)return null;if("string"==typeof Et)return Et;if("number"==typeof Et||"boolean"==typeof Et)return Et.toString();if(Et instanceof Error)return Et.message;try{return JSON.stringify(Et)}catch{return null}}).filter(Et=>Et).join(" ");Or>=(At??zt.logLevel)&&we({level:lt[Or].toLowerCase(),message:ht,args:Gt,type:zt.name})}}}},985:(Js,xr,yt)=>{yt.r(xr);var k=yt(861),lt=yt(106),$e=yt(534),he=yt(58),wt=yt(879),Nn=yt(582),zn=yt(537);const Pt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Or=function At(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Gt=function zt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new he.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nr=new wt.Yd("@firebase/auth");function Mn(p,...u){Nr.logLevel<=wt.in.ERROR&&Nr.error(`Auth (${$e.SDK_VERSION}): ${p}`,...u)}function Zt(p,...u){throw gn(p,...u)}function ln(p,...u){return gn(p,...u)}function ii(p,u,d){const g=Object.assign(Object.assign({},Gt()),{[u]:d});return new he.LL("auth","Firebase",g).create(u,{appName:p.name})}function rt(p){return ii(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jn(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Zt(p,"argument-error"),ii(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gn(p,...u){if("string"!=typeof p){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return ht.create(p,...u)}function Ie(p,u,...d){if(!p)throw gn(u,...d)}function Fn(p){const u="INTERNAL ASSERTION FAILED: "+p;throw Mn(u),new Error(u)}function Tn(p,u){p||Fn(u)}function Ni(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function Yi(){return"http:"===dt()||"https:"===dt()}function dt(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class ae{constructor(u,d){this.shortDelay=u,this.longDelay=d,Tn(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,he.uI)()||(0,he.b$)()}get(){return function ia(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Yi()||(0,he.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ue(p,u){Tn(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class Y{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Pe=new ae(3e4,6e4);function ce(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function ke(p,u,d,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,k.Z)(function*(p,u,d,g,w={}){return Oe(p,w,(0,k.Z)(function*(){let D={},V={};g&&("GET"===u?V=g:D={body:JSON.stringify(g)});const X=(0,he.xO)(Object.assign({key:p.config.apiKey},V)).slice(1),me=yield p._getAdditionalHeaders();return me["Content-Type"]="application/json",p.languageCode&&(me["X-Firebase-Locale"]=p.languageCode),Y.fetch()(Qi(p,p.config.apiHost,d,X),Object.assign({method:u,headers:me,referrerPolicy:"no-referrer"},D))}))})).apply(this,arguments)}function Oe(p,u,d){return nt.apply(this,arguments)}function nt(){return(nt=(0,k.Z)(function*(p,u,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},ve),u);try{const w=new ur(p),D=yield Promise.race([d(),w.promise]);w.clearNetworkTimeout();const V=yield D.json();if("needConfirmation"in V)throw er(p,"account-exists-with-different-credential",V);if(D.ok&&!("errorMessage"in V))return V;{const X=D.ok?V.errorMessage:V.error.message,[me,Fe]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===me)throw er(p,"credential-already-in-use",V);if("EMAIL_EXISTS"===me)throw er(p,"email-already-in-use",V);if("USER_DISABLED"===me)throw er(p,"user-disabled",V);const ze=g[me]||me.toLowerCase().replace(/[_\s]+/g,"-");if(Fe)throw ii(p,ze,Fe);Zt(p,ze)}}catch(w){if(w instanceof he.ZR)throw w;Zt(p,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function Ct(p,u,d,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,k.Z)(function*(p,u,d,g,w={}){const D=yield ke(p,u,d,g,w);return"mfaPendingCredential"in D&&Zt(p,"multi-factor-auth-required",{_serverResponse:D}),D})).apply(this,arguments)}function Qi(p,u,d,g){const w=`${u}${d}?${g}`;return p.config.emulator?ue(p.config,w):`${p.config.apiScheme}://${w}`}function Xt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ur{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(ln(this.auth,"network-request-failed")),Pe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function er(p,u,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const w=ln(p,u,g);return w.customData._tokenResponse=d,w}function Zr(p){return void 0!==p&&void 0!==p.getResponse}function si(p){return void 0!==p&&void 0!==p.enterprise}class Ka{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return Xt(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Wn(){return(Wn=(0,k.Z)(function*(p){return(yield ke(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vc(p,u){return oa.apply(this,arguments)}function oa(){return(oa=(0,k.Z)(function*(p,u){return ke(p,"GET","/v2/recaptchaConfig",ce(p,u))})).apply(this,arguments)}function gs(){return(gs=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function pi(){return(pi=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ms(p,u){return dr.apply(this,arguments)}function dr(){return(dr=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function _s(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function hr(){return(hr=(0,k.Z)(function*(p,u=!1){const d=(0,he.m9)(p),g=yield d.getIdToken(u),w=bo(g);Ie(w&&w.exp&&w.auth_time&&w.iat,d.auth,"internal-error");const D="object"==typeof w.firebase?w.firebase:void 0,V=D?.sign_in_provider;return{claims:w,token:g,authTime:_s(Cc(w.auth_time)),issuedAtTime:_s(Cc(w.iat)),expirationTime:_s(Cc(w.exp)),signInProvider:V||null,signInSecondFactor:D?.sign_in_second_factor||null}})).apply(this,arguments)}function Cc(p){return 1e3*Number(p)}function bo(p){const[u,d,g]=p.split(".");if(void 0===u||void 0===d||void 0===g)return Mn("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,he.tV)(d);return w?JSON.parse(w):(Mn("Failed to decode base64 JWT payload"),null)}catch(w){return Mn("Caught error parsing JWT payload as JSON",w?.toString()),null}}function Ya(p){const u=bo(p);return Ie(u,"internal-error"),Ie(typeof u.exp<"u","internal-error"),Ie(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function gi(p,u){return aa.apply(this,arguments)}function aa(){return(aa=(0,k.Z)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof he.ZR&&function fr({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Qa{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const w=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,k.Z)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,k.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class Fi{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=_s(this.lastLoginAt),this.creationTime=_s(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mi(p){return To.apply(this,arguments)}function To(){return(To=(0,k.Z)(function*(p){var u;const d=p.auth,g=yield p.getIdToken(),w=yield gi(p,ms(d,{idToken:g}));Ie(w?.users.length,d,"internal-error");const D=w.users[0];p._notifyReloadListener(D);const V=null!==(u=D.providerUserInfo)&&void 0!==u&&u.length?Io(D.providerUserInfo):[],X=function Dc(p,u){return[...p.filter(g=>!u.some(w=>w.providerId===g.providerId)),...u]}(p.providerData,V),ze=!!p.isAnonymous&&!(p.email&&D.passwordHash||X?.length),We={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:X,metadata:new Fi(D.createdAt,D.lastLoginAt),isAnonymous:ze};Object.assign(p,We)})).apply(this,arguments)}function Xa(){return(Xa=(0,k.Z)(function*(p){const u=(0,he.m9)(p);yield mi(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Io(p){return p.map(u=>{var{providerId:d}=u,g=(0,Nn._T)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function L(){return(L=(0,k.Z)(function*(p,u){const d=yield Oe(p,{},(0,k.Z)(function*(){const g=(0,he.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:w,apiKey:D}=p.config,V=Qi(p,w,"/v1/token",`key=${D}`),X=yield p._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",Y.fetch()(V,{method:"POST",headers:X,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function fe(){return(fe=(0,k.Z)(function*(p,u){return ke(p,"POST","/v2/accounts:revokeToken",ce(p,u))})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){Ie(u.idToken,"internal-error"),Ie(typeof u.idToken<"u","internal-error"),Ie(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):Ya(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){Ie(0!==u.length,"internal-error");const d=Ya(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var g=this;return(0,k.Z)(function*(){return d||!g.accessToken||g.isExpired?(Ie(g.refreshToken,u,"user-token-expired"),g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,k.Z)(function*(){const{accessToken:w,refreshToken:D,expiresIn:V}=yield function W(p,u){return L.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(w,D,Number(V))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:w,expirationTime:D}=d,V=new ne;return g&&(Ie("string"==typeof g,"internal-error",{appName:u}),V.refreshToken=g),w&&(Ie("string"==typeof w,"internal-error",{appName:u}),V.accessToken=w),D&&(Ie("number"==typeof D,"internal-error",{appName:u}),V.expirationTime=D),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return Fn("not implemented")}}function ge(p,u){Ie("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class Ke{constructor(u){var{uid:d,auth:g,stsTokenManager:w}=u,D=(0,Nn._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=D.displayName||null,this.email=D.email||null,this.emailVerified=D.emailVerified||!1,this.phoneNumber=D.phoneNumber||null,this.photoURL=D.photoURL||null,this.isAnonymous=D.isAnonymous||!1,this.tenantId=D.tenantId||null,this.providerData=D.providerData?[...D.providerData]:[],this.metadata=new Fi(D.createdAt||void 0,D.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,k.Z)(function*(){const g=yield gi(d,d.stsTokenManager.getToken(d.auth,u));return Ie(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function Xi(p){return hr.apply(this,arguments)}(this,u)}reload(){return function rd(p){return Xa.apply(this,arguments)}(this)}_assign(u){this!==u&&(Ie(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new Ke(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,k.Z)(function*(){let w=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),w=!0),d&&(yield mi(g)),yield g.auth._persistUserIfCurrent(g),w&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,k.Z)(function*(){if((0,$e._isFirebaseServerApp)(u.auth.app))return Promise.reject(rt(u.auth));const d=yield u.getIdToken();return yield gi(u,function wc(p,u){return gs.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,w,D,V,X,me,Fe,ze;const We=null!==(g=d.displayName)&&void 0!==g?g:void 0,En=null!==(w=d.email)&&void 0!==w?w:void 0,ss=null!==(D=d.phoneNumber)&&void 0!==D?D:void 0,zd=null!==(V=d.photoURL)&&void 0!==V?V:void 0,Yp=null!==(X=d.tenantId)&&void 0!==X?X:void 0,Ev=null!==(me=d._redirectEventId)&&void 0!==me?me:void 0,Qp=null!==(Fe=d.createdAt)&&void 0!==Fe?Fe:void 0,Vb=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:Xp,emailVerified:Cv,isAnonymous:Wd,providerData:Dv,stsTokenManager:Bb}=d;Ie(Xp&&Bb,u,"internal-error");const Jp=ne.fromJSON(this.name,Bb);Ie("string"==typeof Xp,u,"internal-error"),ge(We,u.name),ge(En,u.name),Ie("boolean"==typeof Cv,u,"internal-error"),Ie("boolean"==typeof Wd,u,"internal-error"),ge(ss,u.name),ge(zd,u.name),ge(Yp,u.name),ge(Ev,u.name),ge(Qp,u.name),ge(Vb,u.name);const bv=new Ke({uid:Xp,auth:u,email:En,emailVerified:Cv,displayName:We,isAnonymous:Wd,photoURL:zd,phoneNumber:ss,tenantId:Yp,stsTokenManager:Jp,createdAt:Qp,lastLoginAt:Vb});return Dv&&Array.isArray(Dv)&&(bv.providerData=Dv.map(mx=>Object.assign({},mx))),Ev&&(bv._redirectEventId=Ev),bv}static _fromIdTokenResponse(u,d,g=!1){return(0,k.Z)(function*(){const w=new ne;w.updateFromServerResponse(d);const D=new Ke({uid:d.localId,auth:u,stsTokenManager:w,isAnonymous:g});return yield mi(D),D})()}static _fromGetAccountInfoResponse(u,d,g){return(0,k.Z)(function*(){const w=d.users[0];Ie(void 0!==w.localId,"internal-error");const D=void 0!==w.providerUserInfo?Io(w.providerUserInfo):[],V=!(w.email&&w.passwordHash||D?.length),X=new ne;X.updateFromIdToken(g);const me=new Ke({uid:w.localId,auth:u,stsTokenManager:X,isAnonymous:V}),Fe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:D,metadata:new Fi(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||D?.length)};return Object.assign(me,Fe),me})()}}const Jt=new Map;function ct(p){Tn(p instanceof Function,"Expected a class definition");let u=Jt.get(p);return u?(Tn(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,Jt.set(p,u),u)}const gr=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,k.Z)(function*(){return!0})()}_set(d,g){var w=this;return(0,k.Z)(function*(){w.storage[d]=g})()}_get(d){var g=this;return(0,k.Z)(function*(){const w=g.storage[d];return void 0===w?null:w})()}_remove(d){var g=this;return(0,k.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function qe(p,u,d){return`firebase:${p}:${u}:${d}`}class Ln{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:w,name:D}=this.auth;this.fullUserKey=qe(this.userKey,w.apiKey,D),this.fullPersistenceKey=qe("persistence",w.apiKey,D),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,k.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?Ke._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,k.Z)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,k.Z)(function*(){if(!d.length)return new Ln(ct(gr),u,g);const w=(yield Promise.all(d.map(function(){var Fe=(0,k.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Fe.apply(this,arguments)}}()))).filter(Fe=>Fe);let D=w[0]||ct(gr);const V=qe(g,u.config.apiKey,u.name);let X=null;for(const Fe of d)try{const ze=yield Fe._get(V);if(ze){const We=Ke._fromJSON(u,ze);Fe!==D&&(X=We),D=Fe;break}}catch{}const me=w.filter(Fe=>Fe._shouldAllowMigration);return D._shouldAllowMigration&&me.length?(D=me[0],X&&(yield D._set(V,X.toJSON())),yield Promise.all(d.map(function(){var Fe=(0,k.Z)(function*(ze){if(ze!==D)try{yield ze._remove(V)}catch{}});return function(ze){return Fe.apply(this,arguments)}}())),new Ln(D,u,g)):new Ln(D,u,g)})()}}function cn(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(ot(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(So(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Ja(u))return"Blackberry";if(id(u))return"Webos";if(bc(u))return"Safari";if((u.includes("chrome/")||tn(u))&&!u.includes("edge/"))return"Chrome";if(eo(u))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function So(p=(0,he.z$)()){return/firefox\//i.test(p)}function bc(p=(0,he.z$)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function tn(p=(0,he.z$)()){return/crios\//i.test(p)}function ot(p=(0,he.z$)()){return/iemobile/i.test(p)}function eo(p=(0,he.z$)()){return/android/i.test(p)}function Ja(p=(0,he.z$)()){return/blackberry/i.test(p)}function id(p=(0,he.z$)()){return/webos/i.test(p)}function to(p=(0,he.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Se(p=(0,he.z$)()){return to(p)||eo(p)||id(p)||Ja(p)||/windows phone/i.test(p)||ot(p)}function gt(p,u=[]){let d;switch(p){case"Browser":d=cn((0,he.z$)());break;case"Worker":d=`${cn((0,he.z$)())}-${p}`;break;default:d=p}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${$e.SDK_VERSION}/${g}`}class Tt{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=D=>new Promise((V,X)=>{try{V(u(D))}catch(me){X(me)}});g.onAbort=d,this.queue.push(g);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,k.Z)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const w of d.queue)yield w(u),w.onAbort&&g.push(w.onAbort)}catch(w){g.reverse();for(const D of g)try{D()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Mt(){return(Mt=(0,k.Z)(function*(p,u={}){return ke(p,"GET","/v2/passwordPolicy",ce(p,u))})).apply(this,arguments)}class la{constructor(u){var d,g,w,D;const V=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=V.minPasswordLength)&&void 0!==d?d:6,V.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=V.maxPasswordLength),void 0!==V.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=V.containsLowercaseCharacter),void 0!==V.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=V.containsUppercaseCharacter),void 0!==V.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=V.containsNumericCharacter),void 0!==V.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=V.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(D=u.forceUpgradeOnSignin)&&void 0!==D&&D,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,w,D,V,X;const me={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,me),this.validatePasswordCharacterOptions(u,me),me.isValid&&(me.isValid=null===(d=me.meetsMinPasswordLength)||void 0===d||d),me.isValid&&(me.isValid=null===(g=me.meetsMaxPasswordLength)||void 0===g||g),me.isValid&&(me.isValid=null===(w=me.containsLowercaseLetter)||void 0===w||w),me.isValid&&(me.isValid=null===(D=me.containsUppercaseLetter)||void 0===D||D),me.isValid&&(me.isValid=null===(V=me.containsNumericCharacter)||void 0===V||V),me.isValid&&(me.isValid=null===(X=me.containsNonAlphanumericCharacter)||void 0===X||X),me}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),w&&(d.meetsMaxPasswordLength=u.length<=w)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let w=0;w<u.length;w++)g=u.charAt(w),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,w,D){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=D))}}class q_{constructor(u,d,g,w){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FD(this),this.idTokenSubscription=new FD(this),this.beforeStateQueue=new Tt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=ct(d)),this._initializationPromise=this.queue((0,k.Z)(function*(){var w,D;if(!g._deleted&&(g.persistenceManager=yield Ln.create(g,u),!g._deleted)){if(null!==(w=g._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(D=g.currentUser)||void 0===D?void 0:D.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,k.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,k.Z)(function*(){try{const g=yield ms(d,{idToken:u}),w=yield Ke._fromGetAccountInfoResponse(d,g,u);yield d.directlySetCurrentUser(w)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,k.Z)(function*(){var g;if((0,$e._isFirebaseServerApp)(d.app)){const X=d.app.settings.authIdToken;return X?new Promise(me=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(X).then(me,me))}):d.directlySetCurrentUser(null)}const w=yield d.assertedPersistence.getCurrentUser();let D=w,V=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const X=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,me=D?._redirectEventId,Fe=yield d.tryRedirectSignIn(u);(!X||X===me)&&Fe?.user&&(D=Fe.user,V=!0)}if(!D)return d.directlySetCurrentUser(null);if(!D._redirectEventId){if(V)try{yield d.beforeStateQueue.runMiddleware(D)}catch(X){D=w,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(X))}return D?d.reloadAndSetCurrentUserOrClear(D):d.directlySetCurrentUser(null)}return Ie(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===D._redirectEventId?d.directlySetCurrentUser(D):d.reloadAndSetCurrentUserOrClear(D)})()}tryRedirectSignIn(u){var d=this;return(0,k.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,k.Z)(function*(){try{yield mi(u)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Za(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,k.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,k.Z)(function*(){if((0,$e._isFirebaseServerApp)(d.app))return Promise.reject(rt(d));const g=u?(0,he.m9)(u):null;return g&&Ie(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,k.Z)(function*(){if(!g._deleted)return u&&Ie(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,k.Z)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,k.Z)(function*(){return(0,$e._isFirebaseServerApp)(u.app)?Promise.reject(rt(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,$e._isFirebaseServerApp)(this.app)?Promise.reject(rt(this)):this.queue((0,k.Z)(function*(){yield d.assertedPersistence.setPersistence(ct(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,k.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,k.Z)(function*(){const d=yield function _n(p){return Mt.apply(this,arguments)}(u),g=new la(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new he.LL("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,k.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(w.tenantId=d.tenantId),yield function q(p,u){return fe.apply(this,arguments)}(d,w)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,k.Z)(function*(){const w=yield g.getOrInitRedirectPersistenceManager(d);return null===u?w.removeCurrentUser():w.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,k.Z)(function*(){if(!d.redirectPersistenceManager){const g=u&&ct(u)||d._popupRedirectResolver;Ie(g,d,"argument-error"),d.redirectPersistenceManager=yield Ln.create(d,[ct(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,k.Z)(function*(){var g,w;return d._isInitialized&&(yield d.queue((0,k.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(w=d.redirectUser)||void 0===w?void 0:w._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,k.Z)(function*(){if(u===d.currentUser)return d.queue((0,k.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,w){if(this._deleted)return()=>{};const D="function"==typeof d?d:d.next.bind(d);let V=!1;const X=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(X,this,"internal-error"),X.then(()=>{V||D(this.currentUser)}),"function"==typeof d){const me=u.addObserver(d,g,w);return()=>{V=!0,me()}}{const me=u.addObserver(d);return()=>{V=!0,me()}}}directlySetCurrentUser(u){var d=this;return(0,k.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=gt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,k.Z)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const w=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();w&&(g["X-Firebase-Client"]=w);const D=yield u._getAppCheckToken();return D&&(g["X-Firebase-AppCheck"]=D),g})()}_getAppCheckToken(){var u=this;return(0,k.Z)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Fr(p,...u){Nr.logLevel<=wt.in.WARN&&Nr.warn(`Auth (${$e.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Kt(p){return(0,he.m9)(p)}class FD{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,he.ne)(d=>this.observer=d)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sd={loadJS:()=>(0,k.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G_(p){return sd.loadJS(p)}function BD(p){return`__${p}${Math.floor(1e6*Math.random())}`}class UD{constructor(u){this.type="recaptcha-enterprise",this.auth=Kt(u)}verify(u="verify",d=!1){var g=this;return(0,k.Z)(function*(){function D(){return D=(0,k.Z)(function*(X){if(!d){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var me=(0,k.Z)(function*(Fe,ze){vc(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(We=>{if(void 0!==We.recaptchaKey){const En=new Ka(We);return null==X.tenantId?X._agentRecaptchaConfig=En:X._tenantRecaptchaConfigs[X.tenantId]=En,Fe(En.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(We=>{ze(We)})});return function(Fe,ze){return me.apply(this,arguments)}}())}),D.apply(this,arguments)}function V(X,me,Fe){const ze=window.grecaptcha;si(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(X,{action:u}).then(We=>{me(We)}).catch(()=>{me("NO_RECAPTCHA")})}):Fe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,me)=>{(function w(X){return D.apply(this,arguments)})(g.auth).then(Fe=>{if(!d&&si(window.grecaptcha))V(Fe,X,me);else{if(typeof window>"u")return void me(new Error("RecaptchaVerifier is only supported in browser"));let ze=function $k(){return sd.recaptchaEnterpriseScript}();0!==ze.length&&(ze+=Fe),G_(ze).then(()=>{V(Fe,X,me)}).catch(We=>{me(We)})}}).catch(Fe=>{me(Fe)})})})()}}function jD(p,u,d){return Z_.apply(this,arguments)}function Z_(){return(Z_=(0,k.Z)(function*(p,u,d,g=!1){const w=new UD(p);let D;try{D=yield w.verify(d)}catch{D=yield w.verify(d,!0)}const V=Object.assign({},u);return Object.assign(V,g?{captchaResp:D}:{captchaResponse:D}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V})).apply(this,arguments)}function Me(p,u,d,g){return K_.apply(this,arguments)}function K_(){return K_=(0,k.Z)(function*(p,u,d,g){var w;if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const D=yield jD(p,u,d,"getOobCode"===d);return g(p,D)}return g(p,u).catch(function(){var D=(0,k.Z)(function*(V){if("auth/missing-recaptcha-token"===V.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const X=yield jD(p,u,d,"getOobCode"===d);return g(p,X)}return Promise.reject(V)});return function(V){return D.apply(this,arguments)}}())}),K_.apply(this,arguments)}function Tc(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function ad(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class tl{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return Fn("not implemented")}_getIdTokenResponse(u){return Fn("not implemented")}_linkToIdToken(u,d){return Fn("not implemented")}_getReauthenticationResolver(u){return Fn("not implemented")}}function Rt(p,u){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:resetPassword",ce(p,u))})).apply(this,arguments)}function Kr(){return(Kr=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ey(p,u){return ty.apply(this,arguments)}function ty(){return(ty=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function ny(){return(ny=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",ce(p,u))})).apply(this,arguments)}function zk(p,u){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signInWithPassword",ce(p,u))})).apply(this,arguments)}function nl(p,u){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:sendOobCode",ce(p,u))})).apply(this,arguments)}function Ac(){return(Ac=(0,k.Z)(function*(p,u){return nl(p,u)})).apply(this,arguments)}function $D(p,u){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(p,u){return nl(p,u)})).apply(this,arguments)}function Wk(p,u){return iy.apply(this,arguments)}function iy(){return(iy=(0,k.Z)(function*(p,u){return nl(p,u)})).apply(this,arguments)}function sy(){return(sy=(0,k.Z)(function*(p,u){return nl(p,u)})).apply(this,arguments)}function ca(){return(ca=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signInWithEmailLink",ce(p,u))})).apply(this,arguments)}function rl(){return(rl=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signInWithEmailLink",ce(p,u))})).apply(this,arguments)}class Rc extends tl{constructor(u,d,g,w=null){super("password",g),this._email=u,this._password=d,this._tenantId=w}static _fromEmailAndPassword(u,d){return new Rc(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new Rc(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,k.Z)(function*(){switch(d.signInMethod){case"password":return Me(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",zk);case"emailLink":return function Gk(p,u){return ca.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Zt(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,k.Z)(function*(){switch(g.signInMethod){case"password":return Me(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ey);case"emailLink":return function qf(p,u){return rl.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:Zt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function no(p,u){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signInWithIdp",ce(p,u))})).apply(this,arguments)}class oi extends tl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new oi(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Zt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:w}=d,D=(0,Nn._T)(d,["providerId","signInMethod"]);if(!g||!w)return null;const V=new oi(g,w);return V.idToken=D.idToken||void 0,V.accessToken=D.accessToken||void 0,V.secret=D.secret,V.nonce=D.nonce,V.pendingToken=D.pendingToken||null,V}_getIdTokenResponse(u){return no(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,no(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,no(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,he.xO)(d)}return u}}function Ps(){return(Ps=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:sendVerificationCode",ce(p,u))})).apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,u))})).apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(p,u){const d=yield Ct(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,u));if(d.temporaryProof)throw er(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const ld={USER_NOT_FOUND:"user-not-found"};function ua(){return(ua=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),ld)})).apply(this,arguments)}class da extends tl{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new da({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new da({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function WD(p,u){return Q.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function ay(p,u){return Ue.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function Zf(p,u){return ua.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:w}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:w}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:w,temporaryProof:D}=u;return g||d||w||D?new da({verificationId:d,verificationCode:g,phoneNumber:w,temporaryProof:D}):null}}class Li{constructor(u){var d,g,w,D,V,X;const me=(0,he.zd)((0,he.pd)(u)),Fe=null!==(d=me.apiKey)&&void 0!==d?d:null,ze=null!==(g=me.oobCode)&&void 0!==g?g:null,We=function qD(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=me.mode)&&void 0!==w?w:null);Ie(Fe&&ze&&We,"argument-error"),this.apiKey=Fe,this.operation=We,this.code=ze,this.continueUrl=null!==(D=me.continueUrl)&&void 0!==D?D:null,this.languageCode=null!==(V=me.languageCode)&&void 0!==V?V:null,this.tenantId=null!==(X=me.tenantId)&&void 0!==X?X:null}static parseLink(u){const d=function GD(p){const u=(0,he.zd)((0,he.pd)(p)).link,d=u?(0,he.zd)((0,he.pd)(u)).deep_link_id:null,g=(0,he.zd)((0,he.pd)(p)).deep_link_id;return(g?(0,he.zd)((0,he.pd)(g)).link:null)||g||d||u||p}(u);try{return new Li(d)}catch{return null}}}let _i=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Rc._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const w=Li.parseLink(g);return Ie(w,"argument-error"),Rc._fromEmailAndCode(d,w.code,w.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class br{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Ot extends br{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class ro extends Ot{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return Ie("providerId"in d&&"signInMethod"in d,"argument-error"),oi._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return Ie(u.idToken||u.accessToken,"argument-error"),oi._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return ro.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return ro.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:w,pendingToken:D,nonce:V,providerId:X}=u;if(!g&&!w&&!d&&!D||!X)return null;try{return new ro(X)._credential({idToken:d,accessToken:g,nonce:V,pendingToken:D})}catch{return null}}}let cd=(()=>{class p extends Ot{constructor(){super("facebook.com")}static credential(d){return oi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),ud=(()=>{class p extends Ot{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return oi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:w}=d;if(!g&&!w)return null;try{return p.credential(g,w)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Yf=(()=>{class p extends Ot{constructor(){super("github.com")}static credential(d){return oi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Os extends tl{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return no(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,no(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,no(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:w,pendingToken:D}=d;return g&&w&&D&&g===w?new Os(g,D):null}static _create(u,d){return new Os(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kc extends br{constructor(u){Ie(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return kc.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return kc.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=Os.fromJSON(u);return Ie(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return Os._create(g,d)}catch{return null}}}let dd=(()=>{class p extends Ot{constructor(){super("twitter.com")}static credential(d,g){return oi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:w}=d;if(!g||!w)return null;try{return p.credential(g,w)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Qf(p,u){return hd.apply(this,arguments)}function hd(){return(hd=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signUp",ce(p,u))})).apply(this,arguments)}class Yr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,w=!1){return(0,k.Z)(function*(){const D=yield Ke._fromIdTokenResponse(u,g,w),V=Xf(g);return new Yr({user:D,providerId:V,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,k.Z)(function*(){yield u._updateTokensIfNecessary(g,!0);const w=Xf(g);return new Yr({user:u,providerId:w,_tokenResponse:g,operationType:d})})()}}function Xf(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Jf(){return(Jf=(0,k.Z)(function*(p){var u;if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const d=Kt(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Yr({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Qf(d,{returnSecureToken:!0}),w=yield Yr._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(w.user),w})).apply(this,arguments)}class xc extends he.ZR{constructor(u,d,g,w){var D;super(d.code,d.message),this.operationType=g,this.user=w,Object.setPrototypeOf(this,xc.prototype),this.customData={appName:u.name,tenantId:null!==(D=u.tenantId)&&void 0!==D?D:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,w){return new xc(u,d,g,w)}}function uy(p,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(D=>{throw"auth/multi-factor-auth-required"===D.code?xc._fromErrorAndOperation(p,D,u,g):D})}function dy(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function ep(){return ep=(0,k.Z)(function*(p,u){const d=(0,he.m9)(p);yield pd(!0,d,u);const{providerUserInfo:g}=yield function Ec(p,u){return pi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),w=dy(g||[]);return d.providerData=d.providerData.filter(D=>w.has(D.providerId)),w.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),ep.apply(this,arguments)}function fd(p,u){return tp.apply(this,arguments)}function tp(){return(tp=(0,k.Z)(function*(p,u,d=!1){const g=yield gi(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return Yr._forOperation(p,"link",g)})).apply(this,arguments)}function pd(p,u,d){return np.apply(this,arguments)}function np(){return(np=(0,k.Z)(function*(p,u,d){yield mi(u);const w=!1===p?"provider-already-linked":"no-such-provider";Ie(dy(u.providerData).has(d)===p,u.auth,w)})).apply(this,arguments)}function hy(p,u){return gd.apply(this,arguments)}function gd(){return(gd=(0,k.Z)(function*(p,u,d=!1){const{auth:g}=p;if((0,$e._isFirebaseServerApp)(g.app))return Promise.reject(rt(g));const w="reauthenticate";try{const D=yield gi(p,uy(g,w,u,p),d);Ie(D.idToken,g,"internal-error");const V=bo(D.idToken);Ie(V,g,"internal-error");const{sub:X}=V;return Ie(p.uid===X,g,"user-mismatch"),Yr._forOperation(p,w,D)}catch(D){throw"auth/user-not-found"===D?.code&&Zt(g,"user-mismatch"),D}})).apply(this,arguments)}function fy(p,u){return rp.apply(this,arguments)}function rp(){return(rp=(0,k.Z)(function*(p,u,d=!1){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g="signIn",w=yield uy(p,g,u),D=yield Yr._fromIdTokenResponse(p,g,w);return d||(yield p._updateCurrentUser(D.user)),D})).apply(this,arguments)}function md(p,u){return un.apply(this,arguments)}function un(){return(un=(0,k.Z)(function*(p,u){return fy(Kt(p),u)})).apply(this,arguments)}function py(p,u){return ip.apply(this,arguments)}function ip(){return(ip=(0,k.Z)(function*(p,u){const d=(0,he.m9)(p);return yield pd(!1,d,u.providerId),fd(d,u)})).apply(this,arguments)}function gy(p,u){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,k.Z)(function*(p,u){return hy((0,he.m9)(p),u)})).apply(this,arguments)}function _d(){return(_d=(0,k.Z)(function*(p,u){return Ct(p,"POST","/v1/accounts:signInWithCustomToken",ce(p,u))})).apply(this,arguments)}function mr(){return mr=(0,k.Z)(function*(p,u){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const d=Kt(p),g=yield function ZD(p,u){return _d.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),w=yield Yr._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(w.user),w}),mr.apply(this,arguments)}class kt{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?_r._fromServerResponse(u,d):"totpInfo"in d?Lr._fromServerResponse(u,d):Zt(u,"internal-error")}}class _r extends kt{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new _r(d)}}class Lr extends kt{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Lr(d)}}function so(p,u,d){var g;Ie((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),Ie(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(Ie(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(Ie(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function ai(p){return yd.apply(this,arguments)}function yd(){return(yd=(0,k.Z)(function*(p){const u=Kt(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function il(){return(il=(0,k.Z)(function*(p,u,d){const g=Kt(p),w={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&so(g,w,d),yield Me(g,w,"getOobCode",$D)})).apply(this,arguments)}function sp(){return sp=(0,k.Z)(function*(p,u,d){yield Rt((0,he.m9)(p),{oobCode:u,newPassword:d}).catch(function(){var g=(0,k.Z)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&ai(p),w});return function(w){return g.apply(this,arguments)}}())}),sp.apply(this,arguments)}function je(){return je=(0,k.Z)(function*(p,u){yield function yn(p,u){return ny.apply(this,arguments)}((0,he.m9)(p),{oobCode:u})}),je.apply(this,arguments)}function mt(p,u){return vn.apply(this,arguments)}function vn(){return(vn=(0,k.Z)(function*(p,u){const d=(0,he.m9)(p),g=yield Rt(d,{oobCode:u}),w=g.requestType;switch(Ie(w,d,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(g.mfaInfo,d,"internal-error");default:Ie(g.email,d,"internal-error")}let D=null;return g.mfaInfo&&(D=kt._fromServerResponse(Kt(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:D},operation:w}})).apply(this,arguments)}function ha(){return(ha=(0,k.Z)(function*(p,u){const{data:d}=yield mt((0,he.m9)(p),u);return d.email})).apply(this,arguments)}function Ao(){return(Ao=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Kt(p),V=yield Me(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qf).catch(me=>{throw"auth/password-does-not-meet-requirements"===me.code&&ai(p),me}),X=yield Yr._fromIdTokenResponse(g,"signIn",V);return yield g._updateCurrentUser(X.user),X})).apply(this,arguments)}function Ro(){return(Ro=(0,k.Z)(function*(p,u,d){const g=Kt(p),w={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function D(V,X){Ie(X.handleCodeInApp,g,"argument-error"),X&&so(g,V,X)})(w,d),yield Me(g,w,"getOobCode",Wk)})).apply(this,arguments)}function vd(){return(vd=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=(0,he.m9)(p),w=_i.credentialWithLink(u,d||Ni());return Ie(w._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),md(g,w)})).apply(this,arguments)}function Vn(){return(Vn=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:createAuthUri",ce(p,u))})).apply(this,arguments)}function ko(){return ko=(0,k.Z)(function*(p,u){const g={identifier:u,continueUri:Yi()?Ni():"http://localhost"},{signinMethods:w}=yield function sl(p,u){return Vn.apply(this,arguments)}((0,he.m9)(p),g);return w||[]}),ko.apply(this,arguments)}function fa(){return fa=(0,k.Z)(function*(p,u){const d=(0,he.m9)(p),w={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&so(d.auth,w,u);const{email:D}=yield function ry(p,u){return Ac.apply(this,arguments)}(d.auth,w);D!==p.email&&(yield p.reload())}),fa.apply(this,arguments)}function Fs(){return Fs=(0,k.Z)(function*(p,u,d){const g=(0,he.m9)(p),D={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&so(g.auth,D,d);const{email:V}=yield function qk(p,u){return sy.apply(this,arguments)}(g.auth,D);V!==p.email&&(yield p.reload())}),Fs.apply(this,arguments)}function pa(){return(pa=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function It(){return It=(0,k.Z)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,he.m9)(p),D={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},V=yield gi(g,function oo(p,u){return pa.apply(this,arguments)}(g.auth,D));g.displayName=V.displayName||null,g.photoURL=V.photoUrl||null;const X=g.providerData.find(({providerId:me})=>"password"===me);X&&(X.displayName=g.displayName,X.photoURL=g.photoURL),yield g._updateTokensIfNecessary(V)}),It.apply(this,arguments)}function ap(p,u,d){return ts.apply(this,arguments)}function ts(){return ts=(0,k.Z)(function*(p,u,d){const{auth:g}=p,D={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(D.email=u),d&&(D.password=d);const V=yield gi(p,function J_(p,u){return Kr.apply(this,arguments)}(g,D));yield p._updateTokensIfNecessary(V,!0)}),ts.apply(this,arguments)}class ws{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class ol extends ws{constructor(u,d,g,w){super(u,d,g),this.username=w}}class Vr extends ws{constructor(u,d){super(u,"facebook.com",d)}}class Kk extends ol{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class yi extends ws{constructor(u,d){super(u,"google.com",d)}}class li extends ol{constructor(u,d,g){super(u,"twitter.com",d,g)}}function lp(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function wd(p){var u,d;if(!p)return null;const{providerId:g}=p,w=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},D=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const V=null===(d=null===(u=bo(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(V)return new ws(D,"anonymous"!==V&&"custom"!==V?V:null)}if(!g)return null;switch(g){case"facebook.com":return new Vr(D,w);case"github.com":return new Kk(D,w);case"google.com":return new yi(D,w);case"twitter.com":return new li(D,w,p.screenName||null);case"custom":case"anonymous":return new ws(D,null);default:return new ws(D,g,w)}}(d)}class ll{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new ll("enroll",u,d)}static _fromMfaPendingCredential(u){return new ll("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ll._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return ll._fromIdtoken(u.multiFactorSession.idToken)}return null}}class vy{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Kt(u),w=d.customData._serverResponse,D=(w.mfaInfo||[]).map(X=>kt._fromServerResponse(g,X));Ie(w.mfaPendingCredential,g,"internal-error");const V=ll._fromMfaPendingCredential(w.mfaPendingCredential);return new vy(V,D,function(){var X=(0,k.Z)(function*(me){const Fe=yield me._process(g,V);delete w.mfaInfo,delete w.mfaPendingCredential;const ze=Object.assign(Object.assign({},w),{idToken:Fe.idToken,refreshToken:Fe.refreshToken});switch(d.operationType){case"signIn":const We=yield Yr._fromIdTokenResponse(g,d.operationType,ze);return yield g._updateCurrentUser(We.user),We;case"reauthenticate":return Ie(d.user,g,"internal-error"),Yr._forOperation(d.user,d.operationType,ze);default:Zt(g,"internal-error")}});return function(me){return X.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,k.Z)(function*(){return d.signInResolver(u)})()}}class Ed{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>kt._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new Ed(u)}getSession(){var u=this;return(0,k.Z)(function*(){return ll._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,k.Z)(function*(){const w=u,D=yield g.getSession(),V=yield gi(g.user,w._process(g.user.auth,D,d));return yield g.user._updateTokensIfNecessary(V),g.user.reload()})()}unenroll(u){var d=this;return(0,k.Z)(function*(){const g="string"==typeof u?u:u.uid,w=yield d.user.getIdToken();try{const D=yield gi(d.user,function nx(p,u){return ke(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ce(p,u))}(d.user.auth,{idToken:w,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:V})=>V!==g),yield d.user._updateTokensIfNecessary(D),yield d.user.reload()}catch(D){throw D}})()}}const Cd=new WeakMap,up="__sak";class XD{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(up,"1"),this.storage.removeItem(up),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const ir=(()=>{class p extends XD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ga(){const p=(0,he.z$)();return bc(p)||to(p)}()&&function ft(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Se(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const w=this.storage.getItem(g),D=this.localCache[g];w!==D&&d(g,D,w)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((X,me,Fe)=>{this.notifyListeners(X,Fe)});const w=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(w);if(d.newValue!==X)null!==d.newValue?this.storage.setItem(w,d.newValue):this.storage.removeItem(w);else if(this.localCache[w]===d.newValue&&!g)return}const D=()=>{const X=this.storage.getItem(w);!g&&this.localCache[w]===X||this.notifyListeners(w,X)},V=this.storage.getItem(w);!function ie(){return(0,he.w1)()&&10===document.documentMode}()||V===d.newValue||d.newValue===d.oldValue?D():setTimeout(D,10)}notifyListeners(d,g){this.localCache[d]=g;const w=this.listeners[d];if(w)for(const D of Array.from(w))D(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var w=()=>super._set,D=this;return(0,k.Z)(function*(){yield w().call(D,d,g),D.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,w=this;return(0,k.Z)(function*(){const D=yield g().call(w,d);return w.localCache[d]=JSON.stringify(D),D})()}_remove(d){var g=()=>super._remove,w=this;return(0,k.Z)(function*(){yield g().call(w,d),delete w.localCache[d]})()}}return p.type="LOCAL",p})(),yr=(()=>{class p extends XD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Ey=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(D=>D.isListeningto(d));if(g)return g;const w=new p(d);return this.receivers.push(w),w}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,k.Z)(function*(){const w=d,{eventId:D,eventType:V,data:X}=w.data,me=g.handlersMap[V];if(!me?.size)return;w.ports[0].postMessage({status:"ack",eventId:D,eventType:V});const Fe=Array.from(me).map(function(){var We=(0,k.Z)(function*(En){return En(w.origin,X)});return function(En){return We.apply(this,arguments)}}()),ze=yield function wy(p){return Promise.all(p.map(function(){var u=(0,k.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(Fe);w.ports[0].postMessage({status:"done",eventId:D,eventType:V,response:ze})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function cl(p="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return p+d}class Cy{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var w=this;return(0,k.Z)(function*(){const D=typeof MessageChannel<"u"?new MessageChannel:null;if(!D)throw new Error("connection_unavailable");let V,X;return new Promise((me,Fe)=>{const ze=cl("",20);D.port1.start();const We=setTimeout(()=>{Fe(new Error("unsupported_event"))},g);X={messageChannel:D,onMessage(En){const ss=En;if(ss.data.eventId===ze)switch(ss.data.status){case"ack":clearTimeout(We),V=setTimeout(()=>{Fe(new Error("timeout"))},3e3);break;case"done":clearTimeout(V),me(ss.data.response);break;default:clearTimeout(We),clearTimeout(V),Fe(new Error("invalid_response"))}}},w.handlers.add(X),D.port1.addEventListener("message",X.onMessage),w.target.postMessage({eventType:u,eventId:ze,data:d},[D.port2])}).finally(()=>{X&&w.removeMessageHandler(X)})})()}}function Gn(){return window}function Lc(){return typeof Gn().WorkerGlobalScope<"u"&&"function"==typeof Gn().importScripts}function Dd(){return(Dd=(0,k.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Vc="firebaseLocalStorageDb",ao="firebaseLocalStorage",fp="fbase_key";class bd{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function pp(p,u){return p.transaction([ao],u?"readwrite":"readonly").objectStore(ao)}function gp(){const p=indexedDB.open(Vc,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(ao,{keyPath:fp})}catch(w){d(w)}}),p.addEventListener("success",(0,k.Z)(function*(){const g=p.result;g.objectStoreNames.contains(ao)?u(g):(g.close(),yield function sx(){const p=indexedDB.deleteDatabase(Vc);return new bd(p).toPromise()}(),u(yield gp()))}))})}function Iy(p,u,d){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,k.Z)(function*(p,u,d){const g=pp(p,!0).put({[fp]:u,value:d});return new bd(g).toPromise()})).apply(this,arguments)}function Uc(){return(Uc=(0,k.Z)(function*(p,u){const d=pp(p,!1).get(u),g=yield new bd(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function My(p,u){const d=pp(p,!0).delete(u);return new bd(d).toPromise()}const ul=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,k.Z)(function*(){return d.db||(d.db=yield gp()),d.db})()}_withRetries(d){var g=this;return(0,k.Z)(function*(){let w=0;for(;;)try{const D=yield g._openDb();return yield d(D)}catch(D){if(w++>3)throw D;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,k.Z)(function*(){return Lc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,k.Z)(function*(){d.receiver=Ey._getInstance(function Ty(){return Lc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,k.Z)(function*(w,D){return{keyProcessed:(yield d._poll()).includes(D.key)}});return function(w,D){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,k.Z)(function*(w,D){return["keyChanged"]});return function(w,D){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,k.Z)(function*(){var g,w;if(d.activeServiceWorker=yield function hp(){return Dd.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Cy(d.activeServiceWorker);const D=yield d.sender._send("ping",{},800);D&&null!==(g=D[0])&&void 0!==g&&g.fulfilled&&null!==(w=D[0])&&void 0!==w&&w.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,k.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function by(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,k.Z)(function*(){try{if(!indexedDB)return!1;const d=yield gp();return yield Iy(d,up,"1"),yield My(d,up),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,k.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var w=this;return(0,k.Z)(function*(){return w._withPendingWrite((0,k.Z)(function*(){return yield w._withRetries(D=>Iy(D,d,g)),w.localCache[d]=g,w.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,k.Z)(function*(){const w=yield g._withRetries(D=>function Ay(p,u){return Uc.apply(this,arguments)}(D,d));return g.localCache[d]=w,w})()}_remove(d){var g=this;return(0,k.Z)(function*(){return g._withPendingWrite((0,k.Z)(function*(){return yield g._withRetries(w=>My(w,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,k.Z)(function*(){const g=yield d._withRetries(V=>{const X=pp(V,!1).getAll();return new bd(X).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const w=[],D=new Set;if(0!==g.length)for(const{fbase_key:V,value:X}of g)D.add(V),JSON.stringify(d.localCache[V])!==JSON.stringify(X)&&(d.notifyListeners(V,X),w.push(V));for(const V of Object.keys(d.localCache))d.localCache[V]&&!D.has(V)&&(d.notifyListeners(V,null),w.push(V));return w})()}notifyListeners(d,g){this.localCache[d]=g;const w=this.listeners[d];if(w)for(const D of Array.from(w))D(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,k.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),jc=1e12;class nb{constructor(u){this.auth=u,this.counter=jc,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new xy(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||jc;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||jc))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,k.Z)(function*(){var g;return null===(g=d._widgets.get(u||jc))||void 0===g||g.execute(),""})()}}class xy{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof u?document.getElementById(u):u;Ie(w,"argument-error",{appName:d}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rb(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Py=BD("rcb"),ib=new ae(3e4,6e4);class Tr{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Gn().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return Ie(function Oy(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Zr(Gn().grecaptcha)?Promise.resolve(Gn().grecaptcha):new Promise((g,w)=>{const D=Gn().setTimeout(()=>{w(ln(u,"network-request-failed"))},ib.get());Gn()[Py]=()=>{Gn().clearTimeout(D),delete Gn()[Py];const X=Gn().grecaptcha;if(!X||!Zr(X))return void w(ln(u,"internal-error"));const me=X.render;X.render=(Fe,ze)=>{const We=me(Fe,ze);return this.counter++,We},this.hostLanguage=d,g(X)},G_(`${function LD(){return sd.recaptchaV2Script}()}?${(0,he.xO)({onload:Py,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(D),w(ln(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Gn().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sb{load(u){return(0,k.Z)(function*(){return new nb(u)})()}clearedOneInstance(){}}const Ny="recaptcha",Fy={theme:"light",type:"image"};class Ly{constructor(u,d,g=Object.assign({},Fy)){this.parameters=g,this.type=Ny,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kt(u),this.isInvisible="invisible"===this.parameters.size,Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof d?document.getElementById(d):d;Ie(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sb:new Tr,this.validateStartingState()}verify(){var u=this;return(0,k.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(D=>{const V=X=>{X&&(u.tokenChangeListeners.delete(V),D(X))};u.tokenChangeListeners.add(V),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=Gn()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,k.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,k.Z)(function*(){Ie(Yi()&&!Lc(),u.auth,"internal-error"),yield function ob(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function sa(p){return Wn.apply(this,arguments)}(u.auth);Ie(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hc{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=da._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function ns(){return(ns=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Kt(p),w=yield ma(g,u,(0,he.m9)(d));return new Hc(w,D=>md(g,D))})).apply(this,arguments)}function Td(){return(Td=(0,k.Z)(function*(p,u,d){const g=(0,he.m9)(p);yield pd(!1,g,"phone");const w=yield ma(g.auth,u,(0,he.m9)(d));return new Hc(w,D=>py(g,D))})).apply(this,arguments)}function $c(){return($c=(0,k.Z)(function*(p,u,d){const g=(0,he.m9)(p);if((0,$e._isFirebaseServerApp)(g.auth.app))return Promise.reject(rt(g.auth));const w=yield ma(g.auth,u,(0,he.m9)(d));return new Hc(w,D=>gy(g,D))})).apply(this,arguments)}function ma(p,u,d){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,k.Z)(function*(p,u,d){var g;const w=yield d.verify();try{let D;if(Ie("string"==typeof w,p,"argument-error"),Ie(d.type===Ny,p,"argument-error"),D="string"==typeof u?{phoneNumber:u}:u,"session"in D){const V=D.session;if("phoneNumber"in D)return Ie("enroll"===V.type,p,"internal-error"),(yield function Jk(p,u){return ke(p,"POST","/v2/accounts/mfaEnrollment:start",ce(p,u))}(p,{idToken:V.credential,phoneEnrollmentInfo:{phoneNumber:D.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{Ie("signin"===V.type,p,"internal-error");const X=(null===(g=D.multiFactorHint)||void 0===g?void 0:g.uid)||D.multiFactorUid;return Ie(X,p,"missing-multi-factor-info"),(yield function Ry(p,u){return ke(p,"POST","/v2/accounts/mfaSignIn:start",ce(p,u))}(p,{mfaPendingCredential:V.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:V}=yield function zD(p,u){return Ps.apply(this,arguments)}(p,{phoneNumber:D.phoneNumber,recaptchaToken:w});return V}}finally{d._reset()}}),Xr.apply(this,arguments)}function Id(){return(Id=(0,k.Z)(function*(p,u){const d=(0,he.m9)(p);if((0,$e._isFirebaseServerApp)(d.auth.app))return Promise.reject(rt(d.auth));yield fd(d,u)})).apply(this,arguments)}let Vs=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Kt(d)}verifyPhoneNumber(d,g){return ma(this.auth,d,(0,he.m9)(g))}static credential(d,g){return da._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:w}=d;return g&&w?da._fromTokenResponse(g,w):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function vr(p,u){return u?ct(u):(Ie(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class _p extends tl{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return no(u,this._buildIdpRequest())}_linkToIdToken(u,d){return no(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return no(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function cb(p){return fy(p.auth,new _p(p),p.bypassAuthState)}function ub(p){const{auth:u,user:d}=p;return Ie(d,u,"internal-error"),hy(d,new _p(p),p.bypassAuthState)}function Po(p){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,k.Z)(function*(p){const{auth:u,user:d}=p;return Ie(d,u,"internal-error"),fd(d,new _p(p),p.bypassAuthState)})).apply(this,arguments)}class By{constructor(u,d,g,w,D=!1){this.auth=u,this.resolver=g,this.user=w,this.bypassAuthState=D,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,k.Z)(function*(g,w){u.pendingPromise={resolve:g,reject:w};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(D){u.reject(D)}});return function(g,w){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,k.Z)(function*(){const{urlResponse:g,sessionId:w,postBody:D,tenantId:V,error:X,type:me}=u;if(X)return void d.reject(X);const Fe={auth:d.auth,requestUri:g,sessionId:w,tenantId:V||void 0,postBody:D||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(me)(Fe))}catch(ze){d.reject(ze)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return cb;case"linkViaPopup":case"linkViaRedirect":return Po;case"reauthViaPopup":case"reauthViaRedirect":return ub;default:Zt(this.auth,"internal-error")}}resolve(u){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Uy=new ae(2e3,1e4);function Ad(){return(Ad=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(ln(p,"operation-not-supported-in-this-environment"));const g=Kt(p);Jn(p,u,br);const w=vr(g,d);return new yp(g,"signInViaPopup",u,w).executeNotNull()})).apply(this,arguments)}function at(){return(at=(0,k.Z)(function*(p,u,d){const g=(0,he.m9)(p);if((0,$e._isFirebaseServerApp)(g.auth.app))return Promise.reject(ln(g.auth,"operation-not-supported-in-this-environment"));Jn(g.auth,u,br);const w=vr(g.auth,d);return new yp(g.auth,"reauthViaPopup",u,w,g).executeNotNull()})).apply(this,arguments)}function $y(){return($y=(0,k.Z)(function*(p,u,d){const g=(0,he.m9)(p);Jn(g.auth,u,br);const w=vr(g.auth,d);return new yp(g.auth,"linkViaPopup",u,w,g).executeNotNull()})).apply(this,arguments)}let yp=(()=>{class p extends By{constructor(d,g,w,D,V){super(d,g,D,V),this.provider=w,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,k.Z)(function*(){const g=yield d.execute();return Ie(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,k.Z)(function*(){Tn(1===d.filter.length,"Popup operations only handle one event");const g=cl();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(w=>{d.reject(w)}),d.resolver._isIframeWebStorageSupported(d.auth,w=>{w||d.reject(ln(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,w;this.pollId=null!==(w=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Uy.get())};d()}}return p.currentPopupAction=null,p})();const hb="pendingRedirect",zc=new Map;class zy extends By{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,k.Z)(function*(){let g=zc.get(d.auth._key());if(!g){try{const D=(yield function dl(p,u){return vp.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(D)}catch(w){g=()=>Promise.reject(w)}zc.set(d.auth._key(),g)}return d.bypassAuthState||zc.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,k.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const w=yield g.auth._redirectUserForId(u.eventId);if(w)return g.user=w,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,k.Z)(function*(){})()}cleanUp(){}}function vp(){return(vp=(0,k.Z)(function*(p,u){const d=Bt(u),g=Ce(p);if(!(yield g._isAvailable()))return!1;const w="true"===(yield g._get(d));return yield g._remove(d),w})).apply(this,arguments)}function wp(p,u){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,k.Z)(function*(p,u){return Ce(p)._set(Bt(u),"true")})).apply(this,arguments)}function Cp(p,u){zc.set(p._key(),u)}function Ce(p){return ct(p._redirectPersistence)}function Bt(p){return qe(hb,p.config.apiKey,p.name)}function De(p,u,d){return function be(p,u,d){return wr.apply(this,arguments)}(p,u,d)}function wr(){return(wr=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Kt(p);Jn(p,u,br),yield g._initializationPromise;const w=vr(g,d);return yield wp(w,g),w._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function Wy(p,u,d){return function Wc(p,u,d){return rs.apply(this,arguments)}(p,u,d)}function rs(){return(rs=(0,k.Z)(function*(p,u,d){const g=(0,he.m9)(p);if(Jn(g.auth,u,br),(0,$e._isFirebaseServerApp)(g.auth.app))return Promise.reject(rt(g.auth));yield g.auth._initializationPromise;const w=vr(g.auth,d);yield wp(w,g.auth);const D=yield Ip(g);return w._openRedirect(g.auth,u,"reauthViaRedirect",D)})).apply(this,arguments)}function Dp(p,u,d){return function bp(p,u,d){return Tp.apply(this,arguments)}(p,u,d)}function Tp(){return(Tp=(0,k.Z)(function*(p,u,d){const g=(0,he.m9)(p);Jn(g.auth,u,br),yield g.auth._initializationPromise;const w=vr(g.auth,d);yield pd(!1,g,u.providerId),yield wp(w,g.auth);const D=yield Ip(g);return w._openRedirect(g.auth,u,"linkViaRedirect",D)})).apply(this,arguments)}function Md(){return(Md=(0,k.Z)(function*(p,u){return yield Kt(p)._initializationPromise,Ir(p,u,!1)})).apply(this,arguments)}function Ir(p,u){return Es.apply(this,arguments)}function Es(){return(Es=(0,k.Z)(function*(p,u,d=!1){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Kt(p),w=vr(g,u),V=yield new zy(g,w,d).execute();return V&&!d&&(delete V.user._redirectEventId,yield g._persistUserIfCurrent(V.user),yield g._setRedirectUser(null,u)),V})).apply(this,arguments)}function Ip(p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,k.Z)(function*(p){const u=cl(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class qy{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function pb(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gy(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!Gy(u)){const w=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(ln(this.auth,w))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sp(u))}saveEventToCache(u){this.cachedEventUids.add(Sp(u)),this.lastProcessedEventTime=Date.now()}}function Sp(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function Gy({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function Rd(p){return qc.apply(this,arguments)}function qc(){return(qc=(0,k.Z)(function*(p,u={}){return ke(p,"GET","/v1/projects",u)})).apply(this,arguments)}const Zy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ap=/^https?/;function kd(){return(kd=(0,k.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield Rd(p);for(const d of u)try{if(Mp(d))return}catch{}Zt(p,"unauthorized-domain")})).apply(this,arguments)}function Mp(p){const u=Ni(),{protocol:d,hostname:g}=new URL(u);if(p.startsWith("chrome-extension://")){const V=new URL(p);return""===V.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&V.hostname===g}if(!Ap.test(d))return!1;if(Zy.test(p))return g===p;const w=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(g)}const Ky=new ae(3e4,6e4);function Rp(){const p=Gn().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Gc=null;const mb=new ae(5e3,15e3),_b="__/auth/iframe",ci="emulator/auth/iframe",_a={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yb(p){const u=p.config;Ie(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?ue(u,ci):`https://${p.config.authDomain}/${_b}`,g={apiKey:u.apiKey,appName:p.name,v:$e.SDK_VERSION},w=Bn.get(p.config.apiHost);w&&(g.eid=w);const D=p._getFrameworks();return D.length&&(g.fw=D.join(",")),`${d}?${(0,he.xO)(g).slice(1)}`}function xp(){return xp=(0,k.Z)(function*(p){const u=yield function kp(p){return Gc=Gc||function Yy(p){return new Promise((u,d)=>{var g,w,D;function V(){Rp(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Rp(),d(ln(p,"network-request-failed"))},timeout:Ky.get()})}if(null!==(w=null===(g=Gn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==w&&w.Iframe)u(gapi.iframes.getContext());else{if(null===(D=Gn().gapi)||void 0===D||!D.load){const X=BD("iframefcb");return Gn()[X]=()=>{gapi.load?V():d(ln(p,"network-request-failed"))},G_(`${function VD(){return sd.gapiScript}()}?onload=${X}`).catch(me=>d(me))}V()}}).catch(u=>{throw Gc=null,u})}(p),Gc}(p),d=Gn().gapi;return Ie(d,p,"internal-error"),u.open({where:document.body,url:yb(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_a,dontclear:!0},g=>new Promise(function(){var w=(0,k.Z)(function*(D,V){yield g.restyle({setHideOnLeave:!1});const X=ln(p,"network-request-failed"),me=Gn().setTimeout(()=>{V(X)},mb.get());function Fe(){Gn().clearTimeout(me),D(g)}g.ping(Fe).then(Fe,()=>{V(X)})});return function(D,V){return w.apply(this,arguments)}}()))}),xp.apply(this,arguments)}const wb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jy{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Nd="__/auth/handler",Pp="emulator/auth/handler",ev=encodeURIComponent("fac");function Fd(p,u,d,g,w,D){return Op.apply(this,arguments)}function Op(){return(Op=(0,k.Z)(function*(p,u,d,g,w,D){Ie(p.config.authDomain,p,"auth-domain-config-required"),Ie(p.config.apiKey,p,"invalid-api-key");const V={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:$e.SDK_VERSION,eventId:w};if(u instanceof br){u.setDefaultLanguage(p.languageCode),V.providerId=u.providerId||"",(0,he.xb)(u.getCustomParameters())||(V.customParameters=JSON.stringify(u.getCustomParameters()));for(const[ze,We]of Object.entries(D||{}))V[ze]=We}if(u instanceof Ot){const ze=u.getScopes().filter(We=>""!==We);ze.length>0&&(V.scopes=ze.join(","))}p.tenantId&&(V.tid=p.tenantId);const X=V;for(const ze of Object.keys(X))void 0===X[ze]&&delete X[ze];const me=yield p._getAppCheckToken(),Fe=me?`#${ev}=${encodeURIComponent(me)}`:"";return`${function hl({config:p}){return p.emulator?ue(p,Pp):`https://${p.authDomain}/${Nd}`}(p)}?${(0,he.xO)(X).slice(1)}${Fe}`})).apply(this,arguments)}const ya="webStorageSupport",Cb=class Eb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yr,this._completeRedirectFn=Ir,this._overrideRedirectResult=Cp}_openPopup(u,d,g,w){var D=this;return(0,k.Z)(function*(){var V;Tn(null===(V=D.eventManagers[u._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const X=yield Fd(u,d,g,Ni(),w);return function Pd(p,u,d,g=500,w=600){const D=Math.max((window.screen.availHeight-w)/2,0).toString(),V=Math.max((window.screen.availWidth-g)/2,0).toString();let X="";const me=Object.assign(Object.assign({},wb),{width:g.toString(),height:w.toString(),top:D,left:V}),Fe=(0,he.z$)().toLowerCase();d&&(X=tn(Fe)?"_blank":d),So(Fe)&&(u=u||"http://localhost",me.scrollbars="yes");const ze=Object.entries(me).reduce((En,[ss,zd])=>`${En}${ss}=${zd},`,"");if(function J(p=(0,he.z$)()){var u;return to(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Fe)&&"_self"!==X)return function Od(p,u){const d=document.createElement("a");d.href=p,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",X),new Jy(null);const We=window.open(u||"",X,ze);Ie(We,p,"popup-blocked");try{We.focus()}catch{}return new Jy(We)}(u,X,cl())})()}_openRedirect(u,d,g,w){var D=this;return(0,k.Z)(function*(){return yield D._originValidation(u),function Dy(p){Gn().location.href=p}(yield Fd(u,d,g,Ni(),w)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:w,promise:D}=this.eventManagers[d];return w?Promise.resolve(w):(Tn(D,"If manager is not set, promise should be"),D)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,k.Z)(function*(){const g=yield function vb(p){return xp.apply(this,arguments)}(u),w=new qy(u);return g.register("authEvent",D=>(Ie(D?.authEvent,u,"invalid-auth-event"),{status:w.onEvent(D.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:w},d.iframes[u._key()]=g,w})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(ya,{type:ya},w=>{var D;const V=null===(D=w?.[0])||void 0===D?void 0:D[ya];void 0!==V&&d(!!V),Zt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function gb(p){return kd.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Se()||bc()||to()}};class Np{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return Fn("unexpected MultiFactorSessionType")}}}class tv extends Np{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new tv(u)}_finalizeEnroll(u,d,g){return function ex(p,u){return ke(p,"POST","/v2/accounts/mfaEnrollment:finalize",ce(p,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function ky(p,u){return ke(p,"POST","/v2/accounts/mfaSignIn:finalize",ce(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Db=(()=>{class p{constructor(){}static assertion(d){return tv._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var pl="@firebase/auth";class Zc{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,k.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bs(){return window}(0,he.Pz)("authIdTokenMaxAge"),function Hk(p){sd=p}({loadJS:p=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=u,g.onerror=w=>{const D=ln("internal-error");D.customData=w,d(D)},g.type="text/javascript",g.charset="UTF-8",function Ib(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ld(p){(0,$e._registerComponent)(new zn.wA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),w=u.getProvider("heartbeat"),D=u.getProvider("app-check-internal"),{apiKey:V,authDomain:X}=g.options;Ie(V&&!V.includes(":"),"invalid-api-key",{appName:g.name});const me={apiKey:V,authDomain:X,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gt(p)},Fe=new q_(g,w,D,me);return function Y_(p,u){const d=u?.persistence||[],g=(Array.isArray(d)?d:[d]).map(ct);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(g,u?.popupRedirectResolver)}(Fe,d),Fe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,$e._registerComponent)(new zn.wA("auth-internal",u=>{const d=Kt(u.getProvider("auth").getImmediate());return new Zc(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$e.registerVersion)(pl,"1.7.4",function Fp(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,$e.registerVersion)(pl,"1.7.4","esm2017")}("Browser");function gl(){return gl=(0,k.Z)(function*(p,u,d){var g;const{BuildInfo:w}=Bs();Tn(u.sessionId,"AuthEvent did not contain a session ID");const D=yield function Sb(p){return ml.apply(this,arguments)}(u.sessionId),V={};return to()?V.ibi=w.packageName:eo()?V.apn=w.packageName:Zt(p,"operation-not-supported-in-this-environment"),w.displayName&&(V.appDisplayName=w.displayName),V.sessionId=D,Fd(p,d,u.type,void 0,null!==(g=u.eventId)&&void 0!==g?g:void 0,V)}),gl.apply(this,arguments)}function Up(){return(Up=(0,k.Z)(function*(p){const{BuildInfo:u}=Bs(),d={};to()?d.iosBundleId=u.packageName:eo()?d.androidPackageName=u.packageName:Zt(p,"operation-not-supported-in-this-environment"),yield Rd(p,d)})).apply(this,arguments)}function Vd(){return(Vd=(0,k.Z)(function*(p,u,d){const{cordova:g}=Bs();let w=()=>{};try{yield new Promise((D,V)=>{let X=null;function me(){var We;D();const En=null===(We=g.plugins.browsertab)||void 0===We?void 0:We.close;"function"==typeof En&&En(),"function"==typeof d?.close&&d.close()}function Fe(){X||(X=window.setTimeout(()=>{V(ln(p,"redirect-cancelled-by-user"))},2e3))}function ze(){"visible"===document?.visibilityState&&Fe()}u.addPassiveListener(me),document.addEventListener("resume",Fe,!1),eo()&&document.addEventListener("visibilitychange",ze,!1),w=()=>{u.removePassiveListener(me),document.removeEventListener("resume",Fe,!1),document.removeEventListener("visibilitychange",ze,!1),X&&window.clearTimeout(X)}})}finally{w()}})).apply(this,arguments)}function ml(){return(ml=(0,k.Z)(function*(p){const u=function va(p){if(Tn(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(w=>w.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class cv extends qy{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,k.Z)(function*(){yield u.initPromise})()}}function dv(p){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*(p){const u=yield Yc()._get(jp(p));return u&&(yield Yc()._remove(jp(p))),u})).apply(this,arguments)}function Sr(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function Yc(){return ct(ir)}function jp(p){return qe("authEvent",p.config.apiKey,p.name)}function uo(p){if(!p?.includes("?"))return{};const[u,...d]=p.split("?");return(0,he.zd)(d.join("?"))}const fv=class yl{constructor(){this._redirectPersistence=yr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ir,this._overrideRedirectResult=Cp}_initialize(u){var d=this;return(0,k.Z)(function*(){const g=u._key();let w=d.eventManagers.get(g);return w||(w=new cv(u),d.eventManagers.set(g,w),d.attachCallbackListeners(u,w)),w})()}_openPopup(u){Zt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,g,w){var D=this;return(0,k.Z)(function*(){!function lv(p){var u,d,g,w,D,V,X,me,Fe,ze;const We=Bs();Ie("function"==typeof(null===(u=We?.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ie(typeof(null===(d=We?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ie("function"==typeof(null===(D=null===(w=null===(g=We?.cordova)||void 0===g?void 0:g.plugins)||void 0===w?void 0:w.browsertab)||void 0===D?void 0:D.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(me=null===(X=null===(V=We?.cordova)||void 0===V?void 0:V.plugins)||void 0===X?void 0:X.browsertab)||void 0===me?void 0:me.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(ze=null===(Fe=We?.cordova)||void 0===Fe?void 0:Fe.InAppBrowser)||void 0===ze?void 0:ze.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const V=yield D._initialize(u);yield V.initialized(),V.resetRedirect(),function fb(){zc.clear()}(),yield D._originValidation(u);const X=function uv(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:Sr(),postBody:null,tenantId:p.tenantId,error:ln(p,"no-auth-event")}}(u,g,w);yield function Kc(p,u){return Yc()._set(jp(p),u)}(u,X);const me=yield function sv(p,u,d){return gl.apply(this,arguments)}(u,X,d),Fe=yield function ov(p){const{cordova:u}=Bs();return new Promise(d=>{u.plugins.browsertab.isAvailable(g=>{let w=null;g?u.plugins.browsertab.openUrl(p):w=u.InAppBrowser.open(p,function x(p=(0,he.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(w)})})}(me);return function av(p,u,d){return Vd.apply(this,arguments)}(u,V,Fe)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Bp(p){return Up.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:g,handleOpenURL:w,BuildInfo:D}=Bs(),V=setTimeout((0,k.Z)(function*(){yield dv(u),d.onEvent(Ud())}),500),X=function(){var ze=(0,k.Z)(function*(We){clearTimeout(V);const En=yield dv(u);let ss=null;En&&We?.url&&(ss=function Mb(p,u){var d,g;const w=function Bd(p){const u=uo(p),d=u.link?decodeURIComponent(u.link):void 0,g=uo(d).link,w=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return uo(w).link||w||g||d||p}(u);if(w.includes("/__/auth/callback")){const D=uo(w),V=D.firebaseError?function hv(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(D.firebaseError)):null,X=null===(g=null===(d=V?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],me=X?ln(X):null;return me?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:me,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:w,postBody:null}}return null}(En,We.url)),d.onEvent(ss||Ud())});return function(En){return ze.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,X);const me=w,Fe=`${D.packageName.toLowerCase()}://`;Bs().handleOpenURL=function(){var ze=(0,k.Z)(function*(We){if(We.toLowerCase().startsWith(Fe)&&X({url:We}),"function"==typeof me)try{me(We)}catch(En){console.error(En)}});return function(We){return ze.apply(this,arguments)}}()}};function Ud(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ln("no-auth-event")}}function jd(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function kb(p=(0,he.z$)()){return!("file:"!==jd()&&"ionic:"!==jd()&&"capacitor:"!==jd()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function pv(){try{const p=self.localStorage,u=cl();if(p)return p.setItem(u,"1"),p.removeItem(u),!function xb(p=(0,he.z$)()){return function px(){return(0,he.w1)()&&11===document?.documentMode}()||function wl(p=(0,he.z$)()){return/Edge\/\d+/.test(p)}(p)}()||(0,he.hl)()}catch{return nr()&&(0,he.hl)()}return!1}function nr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hp(){return(function hx(){return"http:"===jd()||"https:"===jd()}()||(0,he.ru)()||kb())&&!function fx(){return(0,he.b$)()||(0,he.UG)()}()&&pv()&&!nr()}function El(){return kb()&&typeof document<"u"}function vi(){return(vi=(0,k.Z)(function*(){return!!El()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const wi={LOCAL:"local",NONE:"none",SESSION:"session"},Fo=Ie,Dl="persistence";function gv(p){return $p.apply(this,arguments)}function $p(){return($p=(0,k.Z)(function*(p){yield p._initializationPromise;const u=Ei(),d=qe(Dl,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function Ei(){var p;try{return(null===(p=function Cl(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const zp=Ie;class Vi{constructor(){this.browserResolver=ct(Cb),this.cordovaResolver=ct(fv),this.underlyingResolver=null,this._redirectPersistence=yr,this._completeRedirectFn=Ir,this._overrideRedirectResult=Cp}_initialize(u){var d=this;return(0,k.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,g,w){var D=this;return(0,k.Z)(function*(){return yield D.selectUnderlyingResolver(),D.assertedUnderlyingResolver._openPopup(u,d,g,w)})()}_openRedirect(u,d,g,w){var D=this;return(0,k.Z)(function*(){return yield D.selectUnderlyingResolver(),D.assertedUnderlyingResolver._openRedirect(u,d,g,w)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return El()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,k.Z)(function*(){if(u.underlyingResolver)return;const d=yield function Pb(){return vi.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function Nb(p){return p.unwrap()}function Fb(p){return _v(p)}function _v(p){const{_tokenResponse:u}=p instanceof he.ZR?p.customData:p;if(!u)return null;if(!(p instanceof he.ZR)&&"temporaryProof"in u&&"phoneNumber"in u)return Vs.credentialFromResult(p);const d=u.providerId;if(!d||d===Pt.PASSWORD)return null;let g;switch(d){case Pt.GOOGLE:g=ud;break;case Pt.FACEBOOK:g=cd;break;case Pt.GITHUB:g=Yf;break;case Pt.TWITTER:g=dd;break;default:const{oauthIdToken:w,oauthAccessToken:D,oauthTokenSecret:V,pendingToken:X,nonce:me}=u;return D||V||w||X?X?d.startsWith("saml.")?Os._create(d,X):oi._fromParams({providerId:d,signInMethod:d,pendingToken:X,idToken:w,accessToken:D}):new ro(d).credential({idToken:w,accessToken:D,rawNonce:me}):null}return p instanceof he.ZR?g.credentialFromError(p):g.credentialFromResult(p)}function Ci(p,u){return u.catch(d=>{throw d instanceof he.ZR&&function Lb(p,u){var d;const g=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new Gp(p,function Xk(p,u){var d;const g=(0,he.m9)(p),w=u;return Ie(u.customData.operationType,g,"argument-error"),Ie(null===(d=w.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),vy._fromError(g,w)}(p,u));else if(g){const w=_v(u),D=u;w&&(D.credential=w,D.tenantId=g.tenantId||void 0,D.email=g.email||void 0,D.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const w=d.user;return{operationType:d.operationType,credential:Fb(d),additionalUserInfo:lp(d),user:is.getOrCreate(w)}})}function Wp(p,u){return qp.apply(this,arguments)}function qp(){return(qp=(0,k.Z)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:g=>Ci(p,d.confirm(g))}})).apply(this,arguments)}class Gp{constructor(u,d){this.resolver=d,this.auth=function mv(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Ci(Nb(this.auth),this.resolver.resolveSignIn(u))}}class is{constructor(u){this._delegate=u,this.multiFactor=function rx(p){const u=(0,he.m9)(p);return Cd.has(u)||Cd.set(u,Ed._fromUser(u)),Cd.get(u)}(u)}static getOrCreate(u){return is.USER_MAP.has(u)||is.USER_MAP.set(u,new is(u)),is.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,k.Z)(function*(){return Ci(d.auth,py(d._delegate,u))})()}linkWithPhoneNumber(u,d){var g=this;return(0,k.Z)(function*(){return Wp(g.auth,function Vy(p,u,d){return Td.apply(this,arguments)}(g._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,k.Z)(function*(){return Ci(d.auth,function Hy(p,u,d){return $y.apply(this,arguments)}(d._delegate,u,Vi))})()}linkWithRedirect(u){var d=this;return(0,k.Z)(function*(){return yield gv(Kt(d.auth)),Dp(d._delegate,u,Vi)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,k.Z)(function*(){return Ci(d.auth,gy(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return Wp(this.auth,function wn(p,u,d){return $c.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return Ci(this.auth,function db(p,u,d){return at.apply(this,arguments)}(this._delegate,u,Vi))}reauthenticateWithRedirect(u){var d=this;return(0,k.Z)(function*(){return yield gv(Kt(d.auth)),Wy(d._delegate,u,Vi)})()}sendEmailVerification(u){return function Ns(p,u){return fa.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,k.Z)(function*(){return yield function ys(p,u){return ep.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function Zk(p,u){const d=(0,he.m9)(p);return(0,$e._isFirebaseServerApp)(d.auth.app)?Promise.reject(rt(d.auth)):ap(d,u,null)}(this._delegate,u)}updatePassword(u){return function op(p,u){return ap((0,he.m9)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function lb(p,u){return Id.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Nc(p,u){return It.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function _y(p,u,d){return Fs.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}is.USER_MAP=new WeakMap;const Qc=Ie;let bl=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:w}=d.options;Qc(w,"invalid-api-key",{appName:d.name}),Qc(w,"invalid-api-key",{appName:d.name});const D=typeof window<"u"?Vi:void 0;this._delegate=g.initialize({options:{persistence:Hd(w,d.name),popupRedirectResolver:D}}),this._delegate._updateErrorMap(Or),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?is.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function Q_(p,u,d){const g=Kt(p);Ie(g._canInitEmulator,g,"emulator-config-failed"),Ie(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const w=!!d?.disableWarnings,D=Tc(u),{host:V,port:X}=function od(p){const u=Tc(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(g);if(w){const D=w[1];return{host:D,port:ad(g.substr(D.length+1))}}{const[D,V]=g.split(":");return{host:D,port:ad(V)}}}(u);g.config.emulator={url:`${D}//${V}${null===X?"":`:${X}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:V,port:X,protocol:D.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function X_(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,g)}applyActionCode(d){return function qn(p,u){return je.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return mt(this._delegate,d)}confirmPasswordReset(d,g){return function KD(p,u,d){return sp.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var w=this;return(0,k.Z)(function*(){return Ci(w._delegate,function Qr(p,u,d){return Ao.apply(this,arguments)}(w._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Oc(p,u){return ko.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function pt(p,u){const d=Li.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,k.Z)(function*(){Qc(Hp(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function ax(p,u){return Md.apply(this,arguments)}(d._delegate,Vi);return g?Ci(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function vl(p,u){Kt(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,g,w){const{next:D,error:V,complete:X}=yv(d,g,w);return this._delegate.onAuthStateChanged(D,V,X)}onIdTokenChanged(d,g,w){const{next:D,error:V,complete:X}=yv(d,g,w);return this._delegate.onIdTokenChanged(D,V,X)}sendSignInLinkToEmail(d,g){return function Mo(p,u,d){return Ro.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function my(p,u,d){return il.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,k.Z)(function*(){let w;switch(function Ob(p,u){Fo(Object.values(wi).includes(u),p,"invalid-persistence-type"),(0,he.b$)()?Fo(u!==wi.SESSION,p,"unsupported-persistence-type"):(0,he.UG)()?Fo(u===wi.NONE,p,"unsupported-persistence-type"):nr()?Fo(u===wi.NONE||u===wi.LOCAL&&(0,he.hl)(),p,"unsupported-persistence-type"):Fo(u===wi.NONE||pv(),p,"unsupported-persistence-type")}(g._delegate,d),d){case wi.SESSION:w=yr;break;case wi.LOCAL:w=(yield ct(ul)._isAvailable())?ul:ir;break;case wi.NONE:w=gr;break;default:return Zt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(w)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Ci(this._delegate,function cy(p){return Jf.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Ci(this._delegate,md(this._delegate,d))}signInWithCustomToken(d){return Ci(this._delegate,function Qe(p,u){return mr.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return Ci(this._delegate,function tr(p,u,d){return(0,$e._isFirebaseServerApp)(p.app)?Promise.reject(rt(p)):md((0,he.m9)(p),_i.credential(u,d)).catch(function(){var g=(0,k.Z)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&ai(p),w});return function(w){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return Ci(this._delegate,function Pc(p,u,d){return vd.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return Wp(this._delegate,function ab(p,u,d){return ns.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,k.Z)(function*(){return Qc(Hp(),g._delegate,"operation-not-supported-in-this-environment"),Ci(g._delegate,function jy(p,u,d){return Ad.apply(this,arguments)}(g._delegate,d,Vi))})()}signInWithRedirect(d){var g=this;return(0,k.Z)(function*(){return Qc(Hp(),g._delegate,"operation-not-supported-in-this-environment"),yield gv(g._delegate),De(g._delegate,d,Vi)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function vs(p,u){return ha.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=wi,p})();function yv(p,u,d){let g=p;"function"!=typeof p&&({next:g,error:u,complete:d}=p);const w=g;return{next:V=>w(V&&is.getOrCreate(V)),error:u,complete:d}}function Hd(p,u){const d=function gx(p,u){const d=Ei();if(!d)return[];const g=qe(Dl,p,u);switch(d.getItem(g)){case wi.NONE:return[gr];case wi.LOCAL:return[ul,yr];case wi.SESSION:return[yr];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(ul)&&d.push(ul),typeof window<"u")for(const g of[ir,yr])d.includes(g)||d.push(g);return d.includes(gr)||d.push(gr),d}class Zp{constructor(){this.providerId="phone",this._delegate=new Vs(Nb(lt.Z.auth()))}static credential(u,d){return Vs.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}Zp.PHONE_SIGN_IN_METHOD=Vs.PHONE_SIGN_IN_METHOD,Zp.PROVIDER_ID=Vs.PROVIDER_ID;const vv=Ie;class Kp{constructor(u,d,g=lt.Z.app()){var w;vv(null===(w=g.options)||void 0===w?void 0:w.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new Ly(g.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wv(p){p.INTERNAL.registerComponent(new zn.wA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),g=u.getProvider("auth");return new bl(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_i,FacebookAuthProvider:cd,GithubAuthProvider:Yf,GoogleAuthProvider:ud,OAuthProvider:ro,SAMLAuthProvider:kc,PhoneAuthProvider:Zp,PhoneMultiFactorGenerator:Db,RecaptchaVerifier:Kp,TwitterAuthProvider:dd,Auth:bl,AuthCredential:tl,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.9")}(lt.Z)},861:(Js,xr,yt)=>{function k($e,he,wt,Nn,zn,Pr,Pt){try{var we=$e[Pr](Pt),Re=we.value}catch(Ye){return void wt(Ye)}we.done?he(Re):Promise.resolve(Re).then(Nn,zn)}function lt($e){return function(){var he=this,wt=arguments;return new Promise(function(Nn,zn){var Pr=$e.apply(he,wt);function Pt(Re){k(Pr,Nn,zn,Pt,we,"next",Re)}function we(Re){k(Pr,Nn,zn,Pt,we,"throw",Re)}Pt(void 0)})}}yt.d(xr,{Z:()=>lt})},582:(Js,xr,yt)=>{yt.d(xr,{FC:()=>Zt,KL:()=>ii,_T:()=>he,mG:()=>Ye,pi:()=>$e,qq:()=>Mn});var $e=function(){return $e=Object.assign||function(ue){for(var Y,ve=1,Pe=arguments.length;ve<Pe;ve++)for(var ce in Y=arguments[ve])Object.prototype.hasOwnProperty.call(Y,ce)&&(ue[ce]=Y[ce]);return ue},$e.apply(this,arguments)};function he(ae,ue){var Y={};for(var ve in ae)Object.prototype.hasOwnProperty.call(ae,ve)&&ue.indexOf(ve)<0&&(Y[ve]=ae[ve]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ve=Object.getOwnPropertySymbols(ae);Pe<ve.length;Pe++)ue.indexOf(ve[Pe])<0&&Object.prototype.propertyIsEnumerable.call(ae,ve[Pe])&&(Y[ve[Pe]]=ae[ve[Pe]])}return Y}function Ye(ae,ue,Y,ve){return new(Y||(Y=Promise))(function(ce,ke){function Vt(Ct){try{nt(ve.next(Ct))}catch(Rn){ke(Rn)}}function Oe(Ct){try{nt(ve.throw(Ct))}catch(Rn){ke(Rn)}}function nt(Ct){Ct.done?ce(Ct.value):function Pe(ce){return ce instanceof Y?ce:new Y(function(ke){ke(ce)})}(Ct.value).then(Vt,Oe)}nt((ve=ve.apply(ae,ue||[])).next())})}function Mn(ae){return this instanceof Mn?(this.v=ae,this):new Mn(ae)}function Zt(ae,ue,Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ve=Y.apply(ae,ue||[]),ce=[];return Pe={},Vt("next"),Vt("throw"),Vt("return",function ke(Xt){return function(ur){return Promise.resolve(ur).then(Xt,Rn)}}),Pe[Symbol.asyncIterator]=function(){return this},Pe;function Vt(Xt,ur){ve[Xt]&&(Pe[Xt]=function(er){return new Promise(function(Zr,si){ce.push([Xt,er,Zr,si])>1||Oe(Xt,er)})},ur&&(Pe[Xt]=ur(Pe[Xt])))}function Oe(Xt,ur){try{!function nt(Xt){Xt.value instanceof Mn?Promise.resolve(Xt.value.v).then(Ct,Rn):Qi(ce[0][2],Xt)}(ve[Xt](ur))}catch(er){Qi(ce[0][3],er)}}function Ct(Xt){Oe("next",Xt)}function Rn(Xt){Oe("throw",Xt)}function Qi(Xt,ur){Xt(ur),ce.shift(),ce.length&&Oe(ce[0][0],ce[0][1])}}function ii(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,ue=ae[Symbol.asyncIterator];return ue?ue.call(ae):(ae=function Gt(ae){var ue="function"==typeof Symbol&&Symbol.iterator,Y=ue&&ae[ue],ve=0;if(Y)return Y.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&ve>=ae.length&&(ae=void 0),{value:ae&&ae[ve++],done:!ae}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),Y={},ve("next"),ve("throw"),ve("return"),Y[Symbol.asyncIterator]=function(){return this},Y);function ve(ce){Y[ce]=ae[ce]&&function(ke){return new Promise(function(Vt,Oe){!function Pe(ce,ke,Vt,Oe){Promise.resolve(Oe).then(function(nt){ce({value:nt,done:Vt})},ke)}(Vt,Oe,(ke=ae[ce](ke)).done,ke.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},Js=>{Js(Js.s=943)}]);