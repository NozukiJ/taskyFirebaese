"use strict";(self.webpackChunktasky=self.webpackChunktasky||[]).push([[179],{58:(ao,Or,vt)=>{vt.d(Or,{BH:()=>cn,G6:()=>el,L:()=>Ot,LL:()=>ue,Pz:()=>Kt,Sg:()=>oi,UG:()=>gn,ZB:()=>Ye,ZR:()=>Oe,aH:()=>Mn,b$:()=>Tn,eu:()=>de,hl:()=>le,jU:()=>Ie,m9:()=>xo,ne:()=>_i,pd:()=>ws,r3:()=>tr,ru:()=>Ln,tV:()=>Ce,uI:()=>er,vZ:()=>da,w1:()=>es,xO:()=>ha,xb:()=>ai,z$:()=>rt,zd:()=>Dc});const fe=function(G){const V=[];let K=0;for(let ge=0;ge<G.length;ge++){let ne=G.charCodeAt(ge);ne<128?V[K++]=ne:ne<2048?(V[K++]=ne>>6|192,V[K++]=63&ne|128):55296==(64512&ne)&&ge+1<G.length&&56320==(64512&G.charCodeAt(ge+1))?(ne=65536+((1023&ne)<<10)+(1023&G.charCodeAt(++ge)),V[K++]=ne>>18|240,V[K++]=ne>>12&63|128,V[K++]=ne>>6&63|128,V[K++]=63&ne|128):(V[K++]=ne>>12|224,V[K++]=ne>>6&63|128,V[K++]=63&ne|128)}return V},Fn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,V){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let ne=0;ne<G.length;ne+=3){const me=G[ne],Ke=ne+1<G.length,en=Ke?G[ne+1]:0,ct=ne+2<G.length,gr=ct?G[ne+2]:0;let Vn=(15&en)<<2|gr>>6,un=63&gr;ct||(un=64,Ke||(Vn=64)),ge.push(K[me>>2],K[(3&me)<<4|en>>4],K[Vn],K[un])}return ge.join("")},encodeString(G,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(G):this.encodeByteArray(fe(G),V)},decodeString(G,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(G):function(G){const V=[];let K=0,ge=0;for(;K<G.length;){const ne=G[K++];if(ne<128)V[ge++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const me=G[K++];V[ge++]=String.fromCharCode((31&ne)<<6|63&me)}else if(ne>239&&ne<365){const ct=((7&ne)<<18|(63&G[K++])<<12|(63&G[K++])<<6|63&G[K++])-65536;V[ge++]=String.fromCharCode(55296+(ct>>10)),V[ge++]=String.fromCharCode(56320+(1023&ct))}else{const me=G[K++],Ke=G[K++];V[ge++]=String.fromCharCode((15&ne)<<12|(63&me)<<6|63&Ke)}}return V.join("")}(this.decodeStringToByteArray(G,V))},decodeStringToByteArray(G,V){this.init_();const K=V?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let ne=0;ne<G.length;){const me=K[G.charAt(ne++)],en=ne<G.length?K[G.charAt(ne)]:0;++ne;const gr=ne<G.length?K[G.charAt(ne)]:64;++ne;const qe=ne<G.length?K[G.charAt(ne)]:64;if(++ne,null==me||null==en||null==gr||null==qe)throw new qn;ge.push(me<<2|en>>4),64!==gr&&(ge.push(en<<4&240|gr>>2),64!==qe&&ge.push(gr<<6&192|qe))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class qn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ot=function(G){return function(G){const V=fe(G);return Fn.encodeByteArray(V,!0)}(G).replace(/\./g,"")},Ce=function(G){try{return Fn.decodeString(G,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function Ye(G,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return V}for(const K in V)!V.hasOwnProperty(K)||!Mt(K)||(G[K]=Ye(G[K],V[K]));return G}function Mt(G){return"__proto__"!==G}const bt=()=>{try{return function Wt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=G&&Ce(G[1]);return V&&JSON.parse(V)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},Mn=()=>{var G;return null===(G=bt())||void 0===G?void 0:G.config},Kt=G=>{var V;return null===(V=bt())||void 0===V?void 0:V[`_${G}`]};class cn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,K)=>{this.resolve=V,this.reject=K})}wrapCallback(V){return(K,ge)=>{K?this.reject(K):this.resolve(ge),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(K):V(K,ge))}}}function oi(G,V){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=V||"demo-project",ne=G.iat||0,me=G.sub||G.user_id;if(!me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ke=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:ne,exp:ne+3600,auth_time:ne,sub:me,user_id:me,firebase:{sign_in_provider:"custom",identities:{}}},G);return[Ot(JSON.stringify({alg:"none",type:"JWT"})),Ot(JSON.stringify(Ke)),""].join(".")}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function er(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function gn(){var G;const V=null===(G=bt())||void 0===G?void 0:G.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ie(){return"object"==typeof self&&self.self===self}function Ln(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Tn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function es(){const G=rt();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function el(){return!gn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((G,V)=>{try{let K=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(ge);ne.onsuccess=()=>{ne.result.close(),K||self.indexedDB.deleteDatabase(ge),G(!0)},ne.onupgradeneeded=()=>{K=!1},ne.onerror=()=>{var me;V((null===(me=ne.error)||void 0===me?void 0:me.message)||"")}}catch(K){V(K)}})}class Oe extends Error{constructor(V,K,ge){super(K),this.code=V,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(V,K,ge){this.service=V,this.serviceName=K,this.errors=ge}create(V,...K){const ge=K[0]||{},ne=`${this.service}/${V}`,me=this.errors[V],Ke=me?function ke(G,V){return G.replace(Vt,(K,ge)=>{const ne=V[ge];return null!=ne?String(ne):`<${ge}?>`})}(me,ge):"Error";return new Oe(ne,`${this.serviceName}: ${Ke} (${ne}).`,ge)}}const Vt=/\{\$([^}]+)}/g;function tr(G,V){return Object.prototype.hasOwnProperty.call(G,V)}function ai(G){for(const V in G)if(Object.prototype.hasOwnProperty.call(G,V))return!1;return!0}function da(G,V){if(G===V)return!0;const K=Object.keys(G),ge=Object.keys(V);for(const ne of K){if(!ge.includes(ne))return!1;const me=G[ne],Ke=V[ne];if(Gn(me)&&Gn(Ke)){if(!da(me,Ke))return!1}else if(me!==Ke)return!1}for(const ne of ge)if(!K.includes(ne))return!1;return!0}function Gn(G){return null!==G&&"object"==typeof G}function ha(G){const V=[];for(const[K,ge]of Object.entries(G))Array.isArray(ge)?ge.forEach(ne=>{V.push(encodeURIComponent(K)+"="+encodeURIComponent(ne))}):V.push(encodeURIComponent(K)+"="+encodeURIComponent(ge));return V.length?"&"+V.join("&"):""}function Dc(G){const V={};return G.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[ne,me]=ge.split("=");V[decodeURIComponent(ne)]=decodeURIComponent(me)}}),V}function ws(G){const V=G.indexOf("?");if(!V)return"";const K=G.indexOf("#",V);return G.substring(V,K>0?K:void 0)}function _i(G,V){const K=new Es(G,V);return K.subscribe.bind(K)}class Es{constructor(V,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{V(this)}).catch(ge=>{this.error(ge)})}next(V){this.forEachObserver(K=>{K.next(V)})}error(V){this.forEachObserver(K=>{K.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,K,ge){let ne;if(void 0===V&&void 0===K&&void 0===ge)throw new Error("Missing Observer.");ne=function Cs(G,V){if("object"!=typeof G||null===G)return!1;for(const K of V)if(K in G&&"function"==typeof G[K])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:K,complete:ge},void 0===ne.next&&(ne.next=mn),void 0===ne.error&&(ne.error=mn),void 0===ne.complete&&(ne.complete=mn);const me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),me}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,V)}sendOne(V,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{K(this.observers[V])}catch(ge){typeof console<"u"&&console.error&&console.error(ge)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mn(){}function xo(G){return G&&G._delegate?G._delegate:G}},533:(ao,Or,vt)=>{function k(n){return"function"==typeof n}function lt(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const $e=lt(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function fe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(k(r))try{r()}catch(s){e=s instanceof $e?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nr(s)}catch(o){e=e??[],o instanceof $e?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $e(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Nr(e);else{if(e instanceof Ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fe(t,e)}remove(e){const{_finalizers:t}=this;t&&fe(t,e),e instanceof Ct&&e._removeParent(this)}}Ct.EMPTY=(()=>{const n=new Ct;return n.closed=!0,n})();const Fn=Ct.EMPTY;function qn(n){return n instanceof Ct||n&&"closed"in n&&k(n.remove)&&k(n.add)&&k(n.unsubscribe)}function Nr(n){k(n)?n():n.unsubscribe()}const Ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ce={setTimeout(n,e,...t){const{delegate:r}=Ce;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ce;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Re(n){Ce.setTimeout(()=>{const{onUnhandledError:e}=Ot;if(!e)throw n;e(n)})}function Ye(){}const Mt=Zt("C",void 0,void 0);function Zt(n,e,t){return{kind:n,value:e,error:t}}let ht=null;function bt(n){if(Ot.useDeprecatedSynchronousErrorHandling){const e=!ht;if(e&&(ht={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ht;if(ht=null,t)throw r}}else n()}class Vr extends Ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qn(e)&&e.add(this)):this.destination=Ie}static create(e,t,r){return new oi(e,t,r)}next(e){this.isStopped?gn(function Fr(n){return Zt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?gn(function Wt(n){return Zt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gn(Mt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Mn=Function.prototype.bind;function Kt(n,e){return Mn.call(n,e)}class cn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){rt(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){rt(r)}else rt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){rt(t)}}}class oi extends Vr{constructor(e,t,r){let i;if(super(),k(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ot.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kt(e.next,s),error:e.error&&Kt(e.error,s),complete:e.complete&&Kt(e.complete,s)}):i=e}this.destination=new cn(i)}}function rt(n){Ot.useDeprecatedSynchronousErrorHandling?function Lr(n){Ot.useDeprecatedSynchronousErrorHandling&&ht&&(ht.errorThrown=!0,ht.error=n)}(n):Re(n)}function gn(n,e){const{onStoppedNotification:t}=Ot;t&&Ce.setTimeout(()=>t(n,e))}const Ie={closed:!0,next:Ye,error:function er(n){throw n},complete:Ye},Ln="function"==typeof Symbol&&Symbol.observable||"@@observable";function Tn(n){return n}function es(n){return 0===n.length?Tn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function le(n){return n&&n instanceof Vr||function el(n){return n&&k(n.next)&&k(n.error)&&k(n.complete)}(n)&&qn(n)}(t)?t:new oi(t,r,i);return bt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ua(r))((i,s)=>{const o=new oi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ln](){return this}pipe(...t){return es(t)(this)}toPromise(t){return new(t=ua(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ua(n){var e;return null!==(e=n??Ot.Promise)&&void 0!==e?e:Promise}const de=lt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let X=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ve(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new de}next(t){bt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){bt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){bt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Fn:(this.currentObservers=null,s.push(t),new Ct(()=>{this.currentObservers=null,fe(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return n.create=(e,t)=>new ve(e,t),n})();class ve extends X{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Fn}}function Oe(n){return k(n?.lift)}function ue(n){return e=>{if(Oe(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(n,e,t,r,i){return new Vt(n,e,t,r,i)}class Vt extends Vr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ne(n,e){return ue((t,r)=>{let i=0;t.subscribe(ke(r,s=>{r.next(n.call(e,s,i++))}))})}var nt=vt(582);const Dt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Rn(n){return k(n?.then)}function ts(n){return k(n[Ln])}function Jt(n){return Symbol.asyncIterator&&k(n?.[Symbol.asyncIterator])}function dr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yr=function tr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ai(n){return k(n?.[Yr])}function tl(n){return(0,nt.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,nt.qq)(t.read());if(i)return yield(0,nt.qq)(void 0);yield yield(0,nt.qq)(r)}}finally{t.releaseLock()}})}function da(n){return k(n?.getReader)}function Gn(n){if(n instanceof dt)return n;if(null!=n){if(ts(n))return function bc(n){return new dt(e=>{const t=n[Ln]();if(k(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Dt(n))return function ha(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Rn(n))return function Dc(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Re)})}(n);if(Jt(n))return Tc(n);if(ai(n))return function ws(n){return new dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(da(n))return function _i(n){return Tc(tl(n))}(n)}throw dr(n)}function Tc(n){return new dt(e=>{(function Es(n,e){var t,r,i,s;return(0,nt.mG)(this,void 0,void 0,function*(){try{for(t=(0,nt.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function hr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function mn(n,e,t=1/0){return k(e)?mn((r,i)=>Ne((s,o)=>e(r,s,i,o))(Gn(n(r,i))),t):("number"==typeof e&&(t=e),ue((r,i)=>function Cs(n,e,t,r,i,s,o,a){const l=[];let c=0,h=0,m=!1;const _=()=>{m&&!l.length&&!c&&e.complete()},v=I=>c<r?C(I):l.push(I),C=I=>{s&&e.next(I),c++;let S=!1;Gn(t(I,h++)).subscribe(ke(e,j=>{i?.(j),s?v(j):e.next(j)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<r;){const j=l.shift();o?hr(e,o,()=>C(j)):C(j)}_()}catch(j){e.error(j)}}))};return n.subscribe(ke(e,v,()=>{m=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function ns(n=1/0){return mn(Tn,n)}const fr=new dt(n=>n.complete());function nl(n){return n&&k(n.schedule)}function yi(n){return n[n.length-1]}function fa(n){return k(yi(n))?n.pop():void 0}function pr(n){return nl(yi(n))?n.pop():void 0}function Hi(n,e=0){return ue((t,r)=>{t.subscribe(ke(r,i=>hr(r,n,()=>r.next(i),e),()=>hr(r,n,()=>r.complete(),e),i=>hr(r,n,()=>r.error(i),e)))})}function vi(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xo(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{hr(t,e,()=>{const r=n[Symbol.asyncIterator]();hr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function K(n,e){return e?function V(n,e){if(null!=n){if(ts(n))return function Po(n,e){return Gn(n).pipe(vi(e),Hi(e))}(n,e);if(Dt(n))return function il(n,e){return new dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Rn(n))return function dd(n,e){return Gn(n).pipe(vi(e),Hi(e))}(n,e);if(Jt(n))return xo(n,e);if(ai(n))return function Sc(n,e){return new dt(t=>{let r;return hr(t,e,()=>{r=n[Yr](),hr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}(n,e);if(da(n))return function G(n,e){return xo(tl(n),e)}(n,e)}throw dr(n)}(n,e):Gn(n)}function ge(...n){const e=pr(n),t=function rl(n,e){return"number"==typeof yi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Gn(r[0]):ns(t)(K(r,e)):fr}class ne extends X{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function me(...n){return K(n,pr(n))}function Ke(n={}){const{connector:e=(()=>new X),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,h=!1,m=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=l=void 0,h=m=!1},C=()=>{const I=o;v(),I?.unsubscribe()};return ue((I,S)=>{c++,!m&&!h&&_();const j=l=l??e();S.add(()=>{c--,0===c&&!m&&!h&&(a=en(C,i))}),j.subscribe(S),!o&&c>0&&(o=new oi({next:O=>j.next(O),error:O=>{m=!0,_(),a=en(v,t,O),j.error(O)},complete:()=>{h=!0,_(),a=en(v,r),j.complete()}}),Gn(I).subscribe(o))})(s)}}function en(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new oi({next:()=>{r.unsubscribe(),n()}});return Gn(e(...t)).subscribe(r)}function ct(n,e){return ue((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ke(r,l=>{i?.unsubscribe();let c=0;const h=s++;Gn(n(l,h)).subscribe(i=ke(r,m=>r.next(e?e(l,m,h,c++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function gr(n,e=Tn){return n=n??mr,ue((t,r)=>{let i,s=!0;t.subscribe(ke(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function mr(n,e){return n===e}function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("Could not find renamed property on target object.")}function Vn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function un(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(un).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Oo(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Ac=qe({__forward_ref__:qe});function nn(n){return n.__forward_ref__=nn,n.toString=function(){return un(this())},n}function ot(n){return lo(n)?n():n}function lo(n){return"function"==typeof n&&n.hasOwnProperty(Ac)&&n.__forward_ref__===nn}function sl(n){return n&&!!n.\u0275providers}const co="https://g.co/ng/security#xss";class P extends Error{constructor(e,t){super(function ee(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function se(n){return"string"==typeof n?n:null==n?"":String(n)}function _n(n,e){throw new P(-201,!1)}function is(n,e){null==n&&function ut(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ol(n){return sy(n,pd)||sy(n,ay)}function sy(n,e){return n.hasOwnProperty(e)?n[e]:null}function Mc(n){return n&&(n.hasOwnProperty(gd)||n.hasOwnProperty(al))?n[gd]:null}const pd=qe({\u0275prov:qe}),gd=qe({\u0275inj:qe}),ay=qe({ngInjectableDef:qe}),al=qe({ngInjectorDef:qe});var kt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(kt||{});let Rc;function Qr(n){const e=Rc;return Rc=n,e}function cy(n,e,t){const r=ol(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&kt.Optional?null:void 0!==e?e:void _n(un(n))}const yn=globalThis;class be{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ga={},tp="__NG_DI_FLAG__",cl="ngTempTokenPath",uo=/\n/gm,gy="__source";let li;function Us(n){const e=li;return li=n,e}function nD(n,e=kt.Default){if(void 0===li)throw new P(-203,!1);return null===li?cy(n,void 0,e):li.get(n,e&kt.Optional?null:void 0,e)}function Q(n,e=kt.Default){return(function ly(){return Rc}()||nD)(ot(n),e)}function Ue(n,e=kt.Default){return Q(n,md(e))}function md(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function rp(n){const e=[];for(let t=0;t<n.length;t++){const r=ot(n[t]);if(Array.isArray(r)){if(0===r.length)throw new P(900,!1);let i,s=kt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=_a(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Q(i,s))}else e.push(Q(r))}return e}function ma(n,e){return n[tp]=e,n.prototype[tp]=e,n}function _a(n){return n[tp]}function $i(n){return{toString:n}.toString()}var ip=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ip||{}),wi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(wi||{});const Tr={},Nt=[],ho=qe({\u0275cmp:qe}),_d=qe({\u0275dir:qe}),yd=qe({\u0275pipe:qe}),sp=qe({\u0275mod:qe}),fo=qe({\u0275fac:qe}),js=qe({__NG_ELEMENT_ID__:qe}),_y=qe({__NG_ENV_ID__:qe});function Nc(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function vd(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];wd(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function op(n){return 3===n||4===n||6===n}function wd(n){return 64===n.charCodeAt(0)}function Xr(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||ap(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function ap(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const yy="ng-template";function lp(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Nc(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Fc(n){return 4===n.type&&n.value!==yy}function vy(n,e,t){return e===(4!==n.type||t?n.value:yy)}function wy(n,e,t){let r=4;const i=n.attrs||[],s=function Cd(n){for(let e=0;e<n.length;e++)if(op(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!vy(n,l,t)||""===l&&1===e.length){if(bs(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!lp(n.attrs,c,t)){if(bs(r))return!1;o=!0}continue}const m=cp(8&r?"class":l,i,Fc(n),t);if(-1===m){if(bs(r))return!1;o=!0;continue}if(""!==c){let _;_=m>s?"":i[m+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==Nc(v,c,0)||2&r&&c!==_){if(bs(r))return!1;o=!0}}}}else{if(!o&&!bs(r)&&!bs(l))return!1;if(o&&bs(l))continue;o=!1,r=l|1&r}}return bs(r)||o}function bs(n){return 0==(1&n)}function cp(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function dp(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Ed(n,e,t=!1){for(let r=0;r<e.length;r++)if(wy(n,e[r],t))return!0;return!1}function bd(n,e){return n?":not("+e.trim()+")":e}function Cy(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!bs(o)&&(e+=bd(s,i),i=""),r=o,s=s||!bs(r);t++}return""!==i&&(e+=bd(s,i)),e}function Ut(n){return $i(()=>{const e=Id(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ip.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wi.Emulated,styles:n.styles||Nt,_:null,schemas:n.schemas||null,tView:null,id:""};Ty(t);const r=n.dependencies;return t.directiveDefs=ul(r,!1),t.pipeDefs=ul(r,!0),t.id=function pp(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function fp(n){return Pt(n)||yr(n)}function Dy(n){return null!==n}function $t(n){return $i(()=>({type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Td(n,e){if(null==n)return Tr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Qe(n){return $i(()=>{const e=Id(n);return Ty(e),e})}function _r(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Pt(n){return n[ho]||null}function yr(n){return n[_d]||null}function Br(n){return n[yd]||null}function ci(n,e){const t=n[sp]||null;if(!t&&!0===e)throw new Error(`Type ${un(n)} does not have '\u0275mod' property.`);return t}function Id(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Tr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Td(n.inputs,e),outputs:Td(n.outputs)}}function Ty(n){n.features?.forEach(e=>e(n))}function ul(n,e){if(!n)return null;const t=e?Br:fp;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Dy)}const Zn=0,je=1,_t=2,vn=3,Ds=4,ya=5,Jr=6,No=7,nr=8,Fo=9,Lo=10,pt=11,Lc=12,Sd=13,dl=14,Bn=15,Vc=16,Vo=17,Hs=18,va=19,Iy=20,$s=21,go=22,wa=23,Bc=24,At=25,gp=1,mp=2,ss=7,Ts=9,Ur=11;function Ei(n){return Array.isArray(n)&&"object"==typeof n[gp]}function ui(n){return Array.isArray(n)&&!0===n[gp]}function _p(n){return 0!=(4&n.flags)}function fl(n){return n.componentOffset>-1}function yp(n){return 1==(1&n.flags)}function zs(n){return!!n.template}function Uc(n){return 0!=(512&n[_t])}function Ea(n,e){return n.hasOwnProperty(fo)?n[fo]:null}let sr=null,wp=!1;function vr(n){const e=sr;return sr=n,e}const My={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function gl(n){if(!$c(n)||n.dirty){if(!n.producerMustRecompute(n)&&!kd(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Py(n){n.dirty=!0,function ky(n){if(void 0===n.liveConsumerNode)return;const e=wp;wp=!0;try{for(const t of n.liveConsumerNode)t.dirty||Py(t)}finally{wp=e}}(n),n.consumerMarkedDirty?.(n)}function jc(n){return n&&(n.nextProducerIndex=0),vr(n)}function Ep(n,e){if(vr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if($c(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Hc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function kd(n){mo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(gl(t),r!==t.version))return!0}return!1}function xy(n){if(mo(n),$c(n))for(let e=0;e<n.producerNode.length;e++)Hc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Hc(n,e){if(function Cp(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),mo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Hc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];mo(i),i.producerIndexOfThis[r]=e}}function $c(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Ly=null;function Wc(n){const e=vr(null);try{return n()}finally{vr(e)}}const jy=()=>{},pD=(()=>({...My,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:jy}))();class gD{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ir(){return $y}function $y(n){return n.type.prototype.ngOnChanges&&(n.setInput=zy),mD}function mD(){const n=qy(this),e=n?.current;if(e){const t=n.previous;if(t===Tr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function zy(n,e,t,r){const i=this.declaredInputs[t],s=qy(n)||function _D(n,e){return n[Wy]=e}(n,{previous:Tr,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new gD(l&&l.currentValue,e,a===Tr),n[r]=e}Ir.ngInherit=!0;const Wy="__ngSimpleChanges__";function qy(n){return n[Wy]||null}const os=function(n,e,t){};function wn(n){for(;Array.isArray(n);)n=n[Zn];return n}function Ca(n,e){return wn(e[n])}function ei(n,e){return wn(e[n.index])}function Od(n,e){return n.data[e]}function Ws(n,e){return n[e]}function wr(n,e){const t=e[n];return Ei(t)?t:t[Zn]}function Uo(n,e){return null==e?null:n[e]}function Nd(n){n[Vo]=0}function Zy(n){1024&n[_t]||(n[_t]|=1024,Yy(n,1))}function Ky(n){1024&n[_t]&&(n[_t]&=-1025,Yy(n,-1))}function Yy(n,e){let t=n[vn];if(null===t)return;t[ya]+=e;let r=t;for(t=t[vn];null!==t&&(1===e&&1===r[ya]||-1===e&&0===r[ya]);)t[ya]+=e,r=t,t=t[vn]}const at={lFrame:Bp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Jy(){return at.bindingsEnabled}function De(){return at.lFrame.lView}function Bt(){return at.lFrame.tView}function we(n){return at.lFrame.contextLView=n,n[nr]}function Ee(n){return at.lFrame.contextLView=null,n}function Er(){let n=ev();for(;null!==n&&64===n.type;)n=n.parent;return n}function ev(){return at.lFrame.currentTNode}function as(n,e){const t=at.lFrame;t.currentTNode=n,t.isParent=e}function Pp(){return at.lFrame.isParent}function xp(){at.lFrame.isParent=!1}function Sr(){const n=at.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jo(){return at.lFrame.bindingIndex++}function _o(n){const e=at.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nv(n,e){const t=at.lFrame;t.bindingIndex=t.bindingRootIndex=n,Vd(e)}function Vd(n){at.lFrame.currentDirectiveIndex=n}function rv(){return at.lFrame.currentQueryIndex}function Lp(n){at.lFrame.currentQueryIndex=n}function ID(n){const e=n[je];return 2===e.type?e.declTNode:1===e.type?n[Jr]:null}function Bd(n,e,t){if(t&kt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&kt.Host||(i=ID(s),null===i||(s=s[dl],10&i.type))););if(null===i)return!1;e=i,n=s}const r=at.lFrame=iv();return r.currentTNode=e,r.lView=n,!0}function Vp(n){const e=iv(),t=n[je];at.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iv(){const n=at.lFrame,e=null===n?null:n.child;return null===e?Bp(n):e}function Bp(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function sv(){const n=at.lFrame;return at.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Qc=sv;function Up(){const n=sv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function di(){return at.lFrame.selectedIndex}function ba(n){at.lFrame.selectedIndex=n}function Un(){const n=at.lFrame;return Od(n.tView,n.selectedIndex)}let av=!0;function Ud(){return av}function Ho(n){av=n}function jd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function Hd(n,e,t){cv(n,e,3,t)}function $d(n,e,t,r){(3&n[_t])===t&&cv(n,e,t,r)}function Hp(n,e){let t=n[_t];(3&t)===e&&(t&=8191,t+=1,n[_t]=t)}function cv(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Vo]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Vo]+=65536),(a<s||-1==s)&&($p(n,t,e,l),n[Vo]=(4294901760&n[Vo])+l+2),l++}function zd(n,e){os(4,n,e);const t=vr(null);try{e.call(n)}finally{vr(t),os(5,n,e)}}function $p(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[_t]>>13<n[Vo]>>16&&(3&n[_t])===e&&(n[_t]+=8192,zd(a,s)):zd(a,s)}const yl=-1;class Da{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function vl(n){return n!==yl}function wl(n){return 32767&n}function Xc(n,e){let t=function hv(n){return n>>16}(n),r=e;for(;t>0;)r=r[dl],t--;return r}let Wp=!0;function Wd(n){const e=Wp;return Wp=n,e}const fv=255,qp=5;let FD=0;const yo={};function qs(n,e){const t=pv(n,e);if(-1!==t)return t;const r=e[je];r.firstCreatePass&&(n.injectorIndex=e.length,Gp(r.data,n),Gp(e,null),Gp(r.blueprint,null));const i=El(n,e),s=n.injectorIndex;if(vl(i)){const o=wl(i),a=Xc(i,e),l=a[je].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Gp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function El(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Ev(i),null===r)return yl;if(t++,i=i[dl],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return yl}function Zp(n,e,t){!function LD(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(js)&&(r=t[js]),null==r&&(r=t[js]=FD++);const i=r&fv;e.data[n+(i>>qp)]|=1<<i}(n,e,t)}function gv(n,e,t){if(t&kt.Optional||void 0!==n)return n;_n()}function mv(n,e,t,r){if(t&kt.Optional&&void 0===r&&(r=null),!(t&(kt.Self|kt.Host))){const i=n[Fo],s=Qr(void 0);try{return i?i.get(e,r,t&kt.Optional):cy(e,r,t&kt.Optional)}finally{Qr(s)}}return gv(r,0,t)}function qd(n,e,t,r=kt.Default,i){if(null!==n){if(2048&e[_t]&&!(r&kt.Self)){const o=function Yp(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[_t]&&!(512&o[_t]);){const a=_v(s,o,t,r|kt.Self,yo);if(a!==yo)return a;let l=s.parent;if(!l){const c=o[Iy];if(c){const h=c.get(t,yo,r);if(h!==yo)return h}l=Ev(o),o=o[dl]}s=l}return i}(n,e,t,r,yo);if(o!==yo)return o}const s=_v(n,e,t,r,yo);if(s!==yo)return s}return mv(e,t,r,i)}function _v(n,e,t,r,i){const s=function BD(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(js)?n[js]:void 0;return"number"==typeof e?e>=0?e&fv:UD:e}(t);if("function"==typeof s){if(!Bd(e,n,r))return r&kt.Host?gv(i,0,r):mv(e,t,r,i);try{let o;if(o=s(r),null!=o||r&kt.Optional)return o;_n()}finally{Qc()}}else if("number"==typeof s){let o=null,a=pv(n,e),l=yl,c=r&kt.Host?e[Bn][Jr]:null;for((-1===a||r&kt.SkipSelf)&&(l=-1===a?El(n,e):e[a+8],l!==yl&&vv(r,!1)?(o=e[je],a=wl(l),e=Xc(l,e)):a=-1);-1!==a;){const h=e[je];if(yv(s,a,h.data)){const m=VD(a,e,t,o,r,c);if(m!==yo)return m}l=e[a+8],l!==yl&&vv(r,e[je].data[a+8]===c)&&yv(s,a,e)?(o=h,a=wl(l),e=Xc(l,e)):a=-1}}return i}function VD(n,e,t,r,i,s){const o=e[je],a=o.data[n+8],h=Cl(a,o,t,null==r?fl(a)&&Wp:r!=o&&0!=(3&a.type),i&kt.Host&&s===a);return null!==h?Ta(e,o,h,a):yo}function Cl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,_=i?a+h:n.directiveEnd;for(let v=r?a:a+h;v<_;v++){const C=o[v];if(v<l&&t===C||v>=l&&C.type===t)return v}if(i){const v=o[l];if(v&&zs(v)&&v.type===t)return l}return null}function Ta(n,e,t,r){let i=n[t];const s=e.data;if(function PD(n){return n instanceof Da}(i)){const o=i;o.resolving&&function ft(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new P(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Se(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():se(n)}(s[t]));const a=Wd(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Qr(o.injectImpl):null;Bd(n,r,kt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function lv(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=$y(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Qr(c),Wd(a),o.resolving=!1,Qc()}}return i}function yv(n,e,t){return!!(t[e+(n>>qp)]&1<<n)}function vv(n,e){return!(n&kt.Self||n&kt.Host&&e)}class jr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return qd(this._tNode,this._lView,e,md(r),t)}}function UD(){return new jr(Er(),De())}function Ar(n){return $i(()=>{const e=n.prototype.constructor,t=e[fo]||eu(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[fo]||eu(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function eu(n){return lo(n)?()=>{const e=eu(ot(n));return e&&e()}:Ea(n)}function Ev(n){const e=n[je],t=e.type;return 2===t?e.declTNode:1===t?n[Jr]:null}const bl="__parameters__";function Tl(n,e,t){return $i(()=>{const r=function Zd(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,h){const m=l.hasOwnProperty(bl)?l[bl]:Object.defineProperty(l,bl,{value:[]})[bl];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Al(n,e){n.forEach(t=>Array.isArray(t)?Al(t,e):e(t))}function bi(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $o(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Di(n,e,t){let r=zi(n,e);return r>=0?n[1|r]=t:(r=~r,function Xp(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Jp(n,e){const t=zi(n,e);if(t>=0)return n[1|t]}function zi(n,e){return function Tv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Rl=ma(Tl("Optional"),8),Yd=ma(Tl("SkipSelf"),4);function Fv(n){return 128==(128&n.flags)}var kl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(kl||{});const C6=/^>|^->|<!--|-->|--!>|<!-$/g,b6=/(<|>)/g,D6="\u200b$1\u200b";const QD=new Map;let T6=0;const JD="__ngContext__";function Ii(n,e){Ei(e)?(n[JD]=e[va],function S6(n){QD.set(n[va],n)}(e)):n[JD]=e}let e0;function t0(n,e){return e0(n,e)}function ug(n){const e=n[vn];return ui(e)?e[vn]:e}function LP(n){return BP(n[Lc])}function VP(n){return BP(n[Ds])}function BP(n){for(;null!==n&&!ui(n);)n=n[Ds];return n}function th(n,e,t,r,i){if(null!=r){let s,o=!1;ui(r)?s=r:Ei(r)&&(o=!0,r=r[Zn]);const a=wn(r);0===n&&null!==t?null==i?$P(e,t,a):nu(e,t,a,i||null,!0):1===n&&null!==t?nu(e,t,a,i||null,!0):2===n?function $v(n,e,t){const r=jv(n,e);r&&function q6(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function K6(n,e,t,r,i){const s=t[ss];s!==wn(t)&&th(e,n,r,s,i);for(let a=Ur;a<t.length;a++){const l=t[a];hg(l[je],l,n,e,r,s)}}(e,n,s,t,i)}}function n0(n,e){return n.createComment(function MP(n){return n.replace(C6,e=>e.replace(b6,D6))}(e))}function Bv(n,e,t){return n.createElement(e,t)}function jP(n,e){const t=n[Ts],r=t.indexOf(e);Ky(e),t.splice(r,1)}function Uv(n,e){if(n.length<=Ur)return;const t=Ur+e,r=n[t];if(r){const i=r[Vc];null!==i&&i!==n&&jP(i,r),e>0&&(n[t-1][Ds]=r[Ds]);const s=$o(n,Ur+e);!function V6(n,e){hg(n,e,e[pt],2,null,null),e[Zn]=null,e[Jr]=null}(r[je],r);const o=s[Hs];null!==o&&o.detachView(s[je]),r[vn]=null,r[Ds]=null,r[_t]&=-129}return r}function r0(n,e){if(!(256&e[_t])){const t=e[pt];e[wa]&&xy(e[wa]),e[Bc]&&xy(e[Bc]),t.destroyNode&&hg(n,e,t,3,null,null),function j6(n){let e=n[Lc];if(!e)return s0(n[je],n);for(;e;){let t=null;if(Ei(e))t=e[Lc];else{const r=e[Ur];r&&(t=r)}if(!t){for(;e&&!e[Ds]&&e!==n;)Ei(e)&&s0(e[je],e),e=e[vn];null===e&&(e=n),Ei(e)&&s0(e[je],e),t=e&&e[Ds]}e=t}}(e)}}function s0(n,e){if(!(256&e[_t])){e[_t]&=-129,e[_t]|=256,function W6(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Da)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];os(4,a,l);try{l.call(a)}finally{os(5,a,l)}}else{os(4,i,s);try{s.call(i)}finally{os(5,i,s)}}}}}(n,e),function z6(n,e){const t=n.cleanup,r=e[No];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[No]=null);const i=e[$s];if(null!==i){e[$s]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[je].type&&e[pt].destroy();const t=e[Vc];if(null!==t&&ui(e[vn])){t!==e[vn]&&jP(t,e);const r=e[Hs];null!==r&&r.detachView(n)}!function A6(n){QD.delete(n[va])}(e)}}function o0(n,e,t){return function HP(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Zn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===wi.None||s===wi.Emulated)return null}return ei(r,t)}}(n,e.parent,t)}function nu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $P(n,e,t){n.appendChild(e,t)}function zP(n,e,t,r,i){null!==r?nu(n,e,t,r,i):$P(n,e,t)}function jv(n,e){return n.parentNode(e)}let a0,zv,d0,Wv,GP=function qP(n,e,t){return 40&n.type?ei(n,t):null};function Hv(n,e,t,r){const i=o0(n,r,e),s=e[pt],a=function WP(n,e,t){return GP(n,e,t)}(r.parent||e[Jr],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)zP(s,i,t[l],a,!1);else zP(s,i,t,a,!1);void 0!==a0&&a0(s,r,e,t,i)}function dg(n,e){if(null!==e){const t=e.type;if(3&t)return ei(e,n);if(4&t)return l0(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return dg(n,r);{const i=n[e.index];return ui(i)?l0(-1,i):wn(i)}}if(32&t)return t0(e,n)()||wn(n[e.index]);{const r=KP(n,e);return null!==r?Array.isArray(r)?r[0]:dg(ug(n[Bn]),r):dg(n,e.next)}}return null}function KP(n,e){return null!==e?n[Bn][Jr].projection[e.projection]:null}function l0(n,e){const t=Ur+n+1;if(t<e.length){const r=e[t],i=r[je].firstChild;if(null!==i)return dg(r,i)}return e[ss]}function c0(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Ii(wn(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)c0(n,e,t.child,r,i,s,!1),th(e,n,i,a,s);else if(32&l){const c=t0(t,r);let h;for(;h=c();)th(e,n,i,h,s);th(e,n,i,a,s)}else 16&l?QP(n,e,r,t,i,s):th(e,n,i,a,s);t=o?t.projectionNext:t.next}}function hg(n,e,t,r,i,s){c0(t,r,n.firstChild,e,i,s,!1)}function QP(n,e,t,r,i,s){const o=t[Bn],l=o[Jr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)th(e,n,i,l[c],s);else{let c=l;const h=o[vn];Fv(r)&&(c.flags|=128),c0(n,e,c,h,i,s,!0)}}function XP(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function JP(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&vd(n,e,r),null!==i&&XP(n,e,i),null!==s&&function Q6(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function nh(n){return function u0(){if(void 0===zv&&(zv=null,yn.trustedTypes))try{zv=yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zv}()?.createHTML(n)||n}function rh(){if(void 0!==d0)return d0;if(typeof document<"u")return document;throw new P(210,!1)}function h0(){if(void 0===Wv&&(Wv=null,yn.trustedTypes))try{Wv=yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wv}function ex(n){return h0()?.createHTML(n)||n}function nx(n){return h0()?.createScriptURL(n)||n}class rx{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${co})`}}function Pl(n){return n instanceof rx?n.changingThisBreaksApplicationSecurity:n}function fg(n,e){const t=function l5(n){return n instanceof rx&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${co})`)}return t===e}class c5{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(nh(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class u5{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=nh(e),t}}const h5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function f0(n){return(n=String(n)).match(h5)?n:"unsafe:"+n}function Ia(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function pg(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const sx=Ia("area,br,col,hr,img,wbr"),ox=Ia("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ax=Ia("rp,rt"),p0=pg(sx,pg(ox,Ia("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pg(ax,Ia("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pg(ax,ox)),g0=Ia("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lx=pg(g0,Ia("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ia("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),f5=Ia("script,style,template");class p5{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!p0.hasOwnProperty(t))return this.sanitizedSomething=!0,!f5.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!lx.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;g0[a]&&(l=f0(l)),this.buf.push(" ",o,'="',cx(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();p0.hasOwnProperty(t)&&!sx.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(cx(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const g5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m5=/([^\#-~ |!])/g;function cx(n){return n.replace(/&/g,"&amp;").replace(g5,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(m5,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qv;function m0(n){return"content"in n&&function y5(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ih=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ih||{});function Gv(n){const e=gg();return e?ex(e.sanitize(ih.HTML,n)||""):fg(n,"HTML")?ex(Pl(n)):function _5(n,e){let t=null;try{qv=qv||function ix(n){const e=new u5(n);return function d5(){try{return!!(new window.DOMParser).parseFromString(nh(""),"text/html")}catch{return!1}}()?new c5(e):e}(n);let r=e?String(e):"";t=qv.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=qv.getInertBodyElement(r)}while(r!==s);return nh((new p5).sanitizeChildren(m0(t)||t))}finally{if(t){const r=m0(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(rh(),se(n))}function ux(n){const e=gg();return e?e.sanitize(ih.URL,n)||"":fg(n,"URL")?Pl(n):f0(se(n))}function dx(n){const e=gg();if(e)return nx(e.sanitize(ih.RESOURCE_URL,n)||"");if(fg(n,"ResourceURL"))return nx(Pl(n));throw new P(904,!1)}function gg(){const n=De();return n&&n[Lo].sanitizer}const mg=new be("ENVIRONMENT_INITIALIZER"),fx=new be("INJECTOR",-1),px=new be("INJECTOR_DEF_TYPES");class _0{get(e,t=ga){if(t===ga){const r=new Error(`NullInjectorError: No provider for ${un(e)}!`);throw r.name="NullInjectorError",r}return t}}function y0(n){return{\u0275providers:n}}function gx(...n){return{\u0275providers:mx(0,n),\u0275fromNgModule:!0}}function mx(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Al(e,o=>{const a=o;Zv(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&_x(i,s),t}function _x(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];v0(i,s=>{e(s,r)})}}function Zv(n,e,t,r){if(!(n=ot(n)))return!1;let i=null,s=Mc(n);const o=!s&&Pt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Mc(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Zv(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Al(s.imports,h=>{Zv(h,e,t,r)&&(c||=[],c.push(h))})}finally{}void 0!==c&&_x(c,e)}if(!a){const c=Ea(i)||(()=>new i);e({provide:i,useFactory:c,deps:Nt},i),e({provide:px,useValue:i,multi:!0},i),e({provide:mg,useValue:()=>Q(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;v0(l,h=>{e(h,c)})}}}return i!==n&&void 0!==n.providers}function v0(n,e){for(let t of n)sl(t)&&(t=t.\u0275providers),Array.isArray(t)?v0(t,e):e(t)}const D5=qe({provide:String,useValue:qe});function w0(n){return null!==n&&"object"==typeof n&&D5 in n}function ru(n){return"function"==typeof n}const E0=new be("Set Injector scope."),Kv={},I5={};let C0;function Yv(){return void 0===C0&&(C0=new _0),C0}class Ss{}class sh extends Ss{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,D0(e,o=>this.processProvider(o)),this.records.set(fx,oh(void 0,this)),i.has("environment")&&this.records.set(Ss,oh(void 0,this));const s=this.records.get(E0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(px.multi,Nt,kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Us(this),r=Qr(void 0);try{return e()}finally{Us(t),Qr(r)}}get(e,t=ga,r=kt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_y))return e[_y](this);r=md(r);const s=Us(this),o=Qr(void 0);try{if(!(r&kt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function k5(n){return"function"==typeof n||"object"==typeof n&&n instanceof be}(e)&&ol(e);l=c&&this.injectableDefInScope(c)?oh(b0(e),Kv):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&kt.Self?Yv():this.parent).get(e,t=r&kt.Optional&&t===ga?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[cl]=a[cl]||[]).unshift(un(e)),s)throw a;return function rD(n,e,t,r){const i=n[cl];throw e[gy]&&i.unshift(e[gy]),n.message=function iD(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=un(e);if(Array.isArray(e))i=e.map(un).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):un(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(uo,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[cl]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Qr(o),Us(s)}}resolveInjectorInitializers(){const e=Us(this),t=Qr(void 0);try{const i=this.get(mg.multi,Nt,kt.Self);for(const s of i)s()}finally{Us(e),Qr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(un(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(e){let t=ru(e=ot(e))?e:ot(e&&e.provide);const r=function A5(n){return w0(n)?oh(void 0,n.useValue):oh(wx(n),Kv)}(e);if(ru(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=oh(void 0,Kv,!0),i.factory=()=>rp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Kv&&(t.value=I5,t.value=t.factory()),"object"==typeof t.value&&t.value&&function R5(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ot(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function b0(n){const e=ol(n),t=null!==e?e.factory:Ea(n);if(null!==t)return t;if(n instanceof be)throw new P(204,!1);if(n instanceof Function)return function S5(n){const e=n.length;if(e>0)throw function Ml(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new P(204,!1);const t=function oy(n){return n&&(n[pd]||n[ay])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new P(204,!1)}function wx(n,e,t){let r;if(ru(n)){const i=ot(n);return Ea(i)||b0(i)}if(w0(n))r=()=>ot(n.useValue);else if(function vx(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...rp(n.deps||[]));else if(function yx(n){return!(!n||!n.useExisting)}(n))r=()=>Q(ot(n.useExisting));else{const i=ot(n&&(n.useClass||n.provide));if(!function M5(n){return!!n.deps}(n))return Ea(i)||b0(i);r=()=>new i(...rp(n.deps))}return r}function oh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function D0(n,e){for(const t of n)Array.isArray(t)?D0(t,e):t&&sl(t)?D0(t.\u0275providers,e):e(t)}const Qv=new be("AppId",{providedIn:"root",factory:()=>P5}),P5="ng",Ex=new be("Platform Initializer"),Gs=new be("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_g=new be("AnimationModuleType"),T0=new be("CSP nonce",{providedIn:"root",factory:()=>rh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Cx=(n,e,t)=>null;function x0(n,e,t=!1){return Cx(n,e,t)}class H5{}class Tx{}class z5{resolveComponentFactory(e){throw function $5(n){const e=Error(`No component factory found for ${un(n)}.`);return e.ngComponent=n,e}(e)}}let iu=(()=>{class n{static#e=this.NULL=new z5}return n})();function W5(){return ch(Er(),De())}function ch(n,e){return new rn(ei(n,e))}let rn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=W5}return n})();function q5(n){return n instanceof rn?n.nativeElement:n}class wg{}let Si=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function G5(){const n=De(),t=wr(Er().index,n);return(Ei(t)?t:n)[pt]}()}return n})(),Z5=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>null})}return n})();class xl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Sx=new xl("16.2.12"),F0={};function kx(n,e=null,t=null,r){const i=Px(n,e,t,r);return i.resolveInjectorInitializers(),i}function Px(n,e=null,t=null,r,i=new Set){const s=[t||Nt,gx(n)];return r=r||("object"==typeof n?void 0:un(n)),new sh(s,e||Yv(),r||null,i)}let Mr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=ga;static#t=this.NULL=new _0;static create(t,r){if(Array.isArray(t))return kx({name:""},r,t,"");{const i=t.name??"";return kx({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Me({token:n,providedIn:"any",factory:()=>Q(fx)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function V0(n){return n.ngOriginalError}class Sa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&V0(e);for(;t&&V0(t);)t=V0(t);return t||null}}function U0(n){return e=>{setTimeout(n,void 0,e)}}const He=class t9 extends X{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=U0(s),i&&(i=U0(i)),o&&(o=U0(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ct&&e.add(a),a}};function Ox(...n){}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1),typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function n9(){const n="function"==typeof yn.requestAnimationFrame;let e=yn[n?"requestAnimationFrame":"setTimeout"],t=yn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function s9(n){const e=()=>{!function i9(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,H0(n),n.isCheckStableRunning=!0,j0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),H0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function a9(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return Nx(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Fx(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return Nx(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Fx(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,H0(n),j0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new P(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,r9,Ox,Ox);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const r9={};function j0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function H0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Nx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Fx(n){n._nesting--,j0(n)}const Lx=new be("",{providedIn:"root",factory:Vx});function Vx(){const n=Ue(it);let e=!0;return ge(new dt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{it.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Ke()))}function Aa(n){return n instanceof Function?n():n}let $0=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>new n})}return n})();function Eg(n){for(;n;){n[_t]|=64;const e=ug(n);if(Uc(n)&&!e)return n;n=e}return null}const $x=new be("",{providedIn:"root",factory:()=>!1});let iw=null;function Gx(n,e){return n[e]??Yx()}function Zx(n,e){const t=Yx();t.producerNode?.length&&(n[e]=iw,t.lView=n,iw=Kx())}const _9={...My,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Eg(n.lView)},lView:null};function Kx(){return Object.create(_9)}function Yx(){return iw??=Kx(),iw}const wt={};function H(n){Qx(Bt(),De(),di()+n,!1)}function Qx(n,e,t,r){if(!r)if(3==(3&e[_t])){const s=n.preOrderCheckHooks;null!==s&&Hd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&$d(e,s,0,t)}ba(t)}function U(n,e=kt.Default){const t=De();return null===t?Q(n,e):qd(Er(),t,ot(n),e)}function z0(){throw new Error("invalid")}function sw(n,e,t,r,i,s,o,a,l,c,h){const m=e.blueprint.slice();return m[Zn]=i,m[_t]=140|r,(null!==c||n&&2048&n[_t])&&(m[_t]|=2048),Nd(m),m[vn]=m[dl]=n,m[nr]=t,m[Lo]=o||n&&n[Lo],m[pt]=a||n&&n[pt],m[Fo]=l||n&&n[Fo]||null,m[Jr]=s,m[va]=function I6(){return T6++}(),m[go]=h,m[Iy]=c,m[Bn]=2==e.type?n[Bn]:m,m}function hh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function W0(n,e,t,r,i){const s=ev(),o=Pp(),l=n.data[e]=function T9(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function _l(){return null!==at.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function tv(){return at.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Kc(){const n=at.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return as(s,!0),s}function Cg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Xx(n,e,t,r,i){const s=Gx(e,wa),o=di(),a=2&r;try{ba(-1),a&&e.length>At&&Qx(n,e,At,!1),os(a?2:0,i);const c=a?s:null,h=jc(c);try{null!==c&&(c.dirty=!1),t(r,i)}finally{Ep(c,h)}}finally{a&&null===e[wa]&&Zx(e,wa),ba(o),os(a?3:1,i)}}function q0(n,e,t){if(_p(e)){const r=vr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{vr(r)}}}function G0(n,e,t){Jy()&&(function P9(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;fl(t)&&function B9(n,e,t){const r=ei(e,n),i=Jx(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=ow(n,sw(n,i,null,o,r,e,null,n[Lo].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||qs(t,e),Ii(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Ta(e,n,a,t);Ii(c,e),null!==o&&U9(0,a-i,c,l,0,o),zs(l)&&(wr(t.index,e)[nr]=Ta(e,n,a,t))}}(n,e,t,ei(t,e)),64==(64&t.flags)&&s1(n,e,t))}function Z0(n,e,t=ei){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function Jx(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=K0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function K0(n,e,t,r,i,s,o,a,l,c,h){const m=At+r,_=m+i,v=function v9(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:wt);return t}(m,_),C="function"==typeof c?c():c;return v[je]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:C,incompleteFirstPass:!1,ssrId:h}}let e1=n=>null;function t1(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?n1(t,e,i,s):r.hasOwnProperty(i)&&n1(t,e,r[i],s)}return t}function n1(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function As(n,e,t,r,i,s,o,a){const l=ei(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?(eT(n,t,h,r,i),fl(e)&&function A9(n,e){const t=wr(e,n);16&t[_t]||(t[_t]|=64)}(t,e.index)):3&e.type&&(r=function S9(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function Y0(n,e,t,r){if(Jy()){const i=null===r?null:{"":-1},s=function O9(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Ed(e,o.selectors,!1))if(r||(r=[]),zs(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Q0(n,e,a.length)}else r.unshift(o),Q0(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&r1(n,e,t,o,i,a),i&&function N9(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new P(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Xr(t.mergedAttrs,t.attrs)}function r1(n,e,t,r,i,s){for(let c=0;c<r.length;c++)Zp(qs(t,e),n,r[c].type);!function L9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const h=r[c];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=Cg(n,e,r.length,null);for(let c=0;c<r.length;c++){const h=r[c];t.mergedAttrs=Xr(t.mergedAttrs,h.hostAttrs),V9(n,t,e,l,h),F9(l,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const m=h.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function I9(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const m=s[h],_=t?t.get(m):null,C=_?_.outputs:null;l=t1(m.inputs,h,l,_?_.inputs:null),c=t1(m.outputs,h,c,C);const I=null===l||null===o||Fc(e)?null:j9(l,h,o);a.push(I)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function s1(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function TD(){return at.lFrame.currentDirectiveIndex}();try{ba(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];Vd(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&x9(l,c)}}finally{ba(-1),Vd(o)}}function x9(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Q0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function F9(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zs(e)&&(t[""]=n)}}function V9(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ea(i.type)),o=new Da(s,zs(i),U);n.blueprint[r]=o,t[r]=o,function R9(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function k9(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Cg(n,t,i.hostVars,wt),i)}function zo(n,e,t,r,i,s){const o=ei(n,e);!function X0(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?se(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[pt],o,s,n.value,t,r,i)}function U9(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)o1(r,t,o[a++],o[a++],o[a++])}function o1(n,e,t,r,i){const s=vr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{vr(s)}}function j9(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function a1(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function l1(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Lp(t[r]),o.contentQueries(2,e[s],s)}}}function ow(n,e){return n[Lc]?n[Sd][Ds]=e:n[Lc]=e,n[Sd]=e,e}function J0(n,e,t){Lp(0);const r=vr(null);try{e(n,t)}finally{vr(r)}}function c1(n){return n[No]||(n[No]=[])}function u1(n){return n.cleanup||(n.cleanup=[])}function h1(n,e){const t=n[Fo],r=t?t.get(Sa,null):null;r&&r.handleError(e)}function eT(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];o1(n.data[o],e[o],r,a,i)}}function Ma(n,e,t){const r=Ca(e,n);!function UP(n,e,t){n.setValue(e,t)}(n[pt],r,t)}function H9(n,e){const t=wr(e,n),r=t[je];!function $9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Zn];null!==i&&null===t[go]&&(t[go]=x0(i,t[Fo])),tT(r,t,t[nr])}function tT(n,e,t){Vp(e);try{const r=n.viewQuery;null!==r&&J0(1,r,t);const i=n.template;null!==i&&Xx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&l1(n,e),n.staticViewQueries&&J0(2,n.viewQuery,t);const s=n.components;null!==s&&function z9(n,e){for(let t=0;t<e.length;t++)H9(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[_t]&=-5,Up()}}let f1=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function fD(n,e,t){const r=Object.create(pD);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Py(r),run:()=>{if(r.dirty=!1,r.hasRun&&!kd(r))return;r.hasRun=!0;const o=jc(r);try{r.cleanupFn(),r.cleanupFn=jy,r.fn(i)}finally{Ep(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>new n})}return n})();function aw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Oo(i,a):2==s&&(r=Oo(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function bg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(wn(s)),ui(s)&&p1(s,r);const o=t.type;if(8&o)bg(n,e,t.child,r);else if(32&o){const a=t0(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=KP(e,t);if(Array.isArray(a))r.push(...a);else{const l=ug(e[Bn]);bg(l[je],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function p1(n,e){for(let t=Ur;t<n.length;t++){const r=n[t],i=r[je].firstChild;null!==i&&bg(r[je],r,i,e)}n[ss]!==n[Zn]&&e.push(n[ss])}function lw(n,e,t,r=!0){const i=e[Lo],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{g1(n,e,n.template,t)}catch(l){throw r&&h1(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function g1(n,e,t,r){const i=e[_t];if(256!=(256&i)){e[Lo].effectManager?.flush(),Vp(e);try{Nd(e),function Np(n){return at.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Xx(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Hd(e,c,null)}else{const c=n.preOrderHooks;null!==c&&$d(e,c,0,null),Hp(e,0)}if(function G9(n){for(let e=LP(n);null!==e;e=VP(e)){if(!e[mp])continue;const t=e[Ts];for(let r=0;r<t.length;r++){Zy(t[r])}}}(e),m1(e,2),null!==n.contentQueries&&l1(n,e),o){const c=n.contentCheckHooks;null!==c&&Hd(e,c)}else{const c=n.contentHooks;null!==c&&$d(e,c,1),Hp(e,1)}!function y9(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=Gx(e,Bc);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)ba(~s);else{const o=s,a=t[++i],l=t[++i];nv(a,o),r.dirty=!1;const c=jc(r);try{l(2,e[o])}finally{Ep(r,c)}}}}finally{null===e[Bc]&&Zx(e,Bc),ba(-1)}}(n,e);const a=n.components;null!==a&&y1(e,a,0);const l=n.viewQuery;if(null!==l&&J0(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Hd(e,c)}else{const c=n.viewHooks;null!==c&&$d(e,c,2),Hp(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[_t]&=-73,Ky(e)}finally{Up()}}}function m1(n,e){for(let t=LP(n);null!==t;t=VP(t))for(let r=Ur;r<t.length;r++)_1(t[r],e)}function Z9(n,e,t){_1(wr(e,n),t)}function _1(n,e){if(!function wD(n){return 128==(128&n[_t])}(n))return;const t=n[je],r=n[_t];if(80&r&&0===e||1024&r||2===e)g1(t,n,t.template,n[nr]);else if(n[ya]>0){m1(n,1);const i=t.components;null!==i&&y1(n,i,1)}}function y1(n,e,t){for(let r=0;r<e.length;r++)Z9(n,e[r],t)}class Dg{get rootNodes(){const e=this._lView,t=e[je];return bg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nr]}set context(e){this._lView[nr]=e}get destroyed(){return 256==(256&this._lView[_t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[vn];if(ui(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Uv(e,r),$o(t,r))}this._attachedToViewContainer=!1}r0(this._lView[je],this._lView)}onDestroy(e){!function Fd(n,e){if(256==(256&n[_t]))throw new P(911,!1);null===n[$s]&&(n[$s]=[]),n[$s].push(e)}(this._lView,e)}markForCheck(){Eg(this._cdRefInjectingView||this._lView)}detach(){this._lView[_t]&=-129}reattach(){this._lView[_t]|=128}detectChanges(){lw(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function U6(n,e){hg(n,e,e[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e}}class K9 extends Dg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;lw(e[je],e,e[nr],!1)}checkNoChanges(){}get context(){return null}}class v1 extends iu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Pt(e);return new Tg(t,this.ngModule)}}function w1(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Q9{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=md(r);const i=this.injector.get(e,F0,r);return i!==F0||t===F0?i:this.parentInjector.get(e,t,r)}}class Tg extends Tx{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=w1(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return w1(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function hp(n){return n.map(Cy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ss?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Q9(e,s):e,a=o.get(wg,null);if(null===a)throw new P(407,!1);const m={rendererFactory:a,sanitizer:o.get(Z5,null),effectManager:o.get(f1,null),afterRenderEventManager:o.get($0,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?function w9(n,e,t,r){const s=r.get($x,!1)||t===wi.ShadowDom,o=n.selectRootElement(e,s);return function E9(n){e1(n)}(o),o}(_,r,this.componentDef.encapsulation,o):Bv(_,v,function Y9(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),j=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let O=null;null!==C&&(O=x0(C,o,!0));const q=K0(0,null,null,1,0,null,null,null,null,null,null),te=sw(null,q,null,j,null,null,m,_,o,null,O);let ye,Pe;Vp(te);try{const z=this.componentDef;let R,N=null;z.findHostDirectiveDefs?(R=[],N=new Map,z.findHostDirectiveDefs(z,R,N),R.push(z)):R=[z];const W=function J9(n,e){const t=n[je],r=At;return n[r]=e,hh(t,r,2,"#host",null)}(te,C),F=function e8(n,e,t,r,i,s,o){const a=i[je];!function t8(n,e,t,r){for(const i of n)e.mergedAttrs=Xr(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(aw(e,e.mergedAttrs,!0),null!==t&&JP(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=x0(e,i[Fo]));const c=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const m=sw(i,Jx(t),null,h,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&Q0(a,n,r.length-1),ow(i,m),i[n.index]=m}(W,C,z,R,te,m,_);Pe=Od(q,At),C&&function r8(n,e,t,r){if(r)vd(n,t,["ng-version",Sx.full]);else{const{attrs:i,classes:s}=function Dd(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!bs(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&vd(n,t,i),s&&s.length>0&&XP(n,t,s.join(" "))}}(_,z,C,r),void 0!==t&&function i8(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Pe,this.ngContentSelectors,t),ye=function n8(n,e,t,r,i,s){const o=Er(),a=i[je],l=ei(o,i);r1(a,i,o,t,null,r);for(let h=0;h<t.length;h++)Ii(Ta(i,a,o.directiveStart+h,o),i);s1(a,i,o),l&&Ii(l,i);const c=Ta(i,a,o.directiveStart+o.componentOffset,o);if(n[nr]=i[nr]=c,null!==s)for(const h of s)h(c,e);return q0(a,o,n),c}(F,z,R,N,te,[s8]),tT(q,te,null)}finally{Up()}return new X9(this.componentType,ye,ch(Pe,te),te,Pe)}}class X9 extends H5{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new K9(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;eT(s[je],s,i,e,t),this.previousInputValues.set(e,t),Eg(wr(this._tNode.index,s))}}get injector(){return new jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function s8(){const n=Er();jd(De()[je],n)}function Qt(n){let e=function E1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(zs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new P(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=cw(n.inputs),o.inputTransforms=cw(n.inputTransforms),o.declaredInputs=cw(n.declaredInputs),o.outputs=cw(n.outputs);const a=i.hostBindings;a&&c8(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&a8(n,l),c&&l8(n,c),Vn(n.inputs,i.inputs),Vn(n.declaredInputs,i.declaredInputs),Vn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Vn(o.inputTransforms,i.inputTransforms)),zs(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function o8(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xr(i.hostAttrs,t=Xr(t,i.hostAttrs))}}(r)}function cw(n){return n===Tr?{}:n===Nt?[]:n}function a8(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function l8(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function c8(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function T1(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function uw(n){return!!nT(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function nT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Wo(n,e,t){return n[e]=t}function Ig(n,e){return n[e]}function Ai(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function su(n,e,t,r){const i=Ai(n,e,t);return Ai(n,e+1,r)||i}function dw(n,e,t,r,i){const s=su(n,e,t,r);return Ai(n,e+2,i)||s}function Zs(n,e,t,r,i,s){const o=su(n,e,t,r);return su(n,e+2,i,s)||o}function ir(n,e,t,r){const i=De();return Ai(i,jo(),e)&&(Bt(),zo(Un(),i,n,e,t,r)),ir}function gh(n,e,t,r,i,s){const a=su(n,function Is(){return at.lFrame.bindingIndex}(),t,i);return _o(2),a?e+se(t)+r+se(i)+s:wt}function xe(n,e,t,r,i,s,o,a){const l=De(),c=Bt(),h=n+At,m=c.firstCreatePass?function O8(n,e,t,r,i,s,o,a,l){const c=e.consts,h=hh(e,n,4,o||null,Uo(c,a));Y0(e,t,h,Uo(c,l)),jd(e,h);const m=h.tView=K0(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,r,i,s,o):c.data[h];as(m,!1);const _=V1(c,l,m,n);Ud()&&Hv(c,l,_,m),Ii(_,l),ow(l,l[h]=a1(_,l,_,m)),yp(m)&&G0(c,l,m),null!=o&&Z0(l,m,a)}let V1=function B1(n,e,t,r){return Ho(!0),e[pt].createComment("")};function ti(n){return Ws(function Op(){return at.lFrame.contextLView}(),At+n)}function Y(n,e,t){const r=De();return Ai(r,jo(),e)&&As(Bt(),Un(),r,n,e,r[pt],t,!1),Y}function lT(n,e,t,r,i){const o=i?"class":"style";eT(n,t,e.inputs[o],o,r)}function b(n,e,t,r){const i=De(),s=Bt(),o=At+n,a=i[pt],l=s.firstCreatePass?function V8(n,e,t,r,i,s){const o=e.consts,l=hh(e,n,2,r,Uo(o,i));return Y0(e,t,l,Uo(o,s)),null!==l.attrs&&aw(l,l.attrs,!1),null!==l.mergedAttrs&&aw(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=U1(s,i,l,a,e,n);i[o]=c;const h=yp(l);return as(l,!0),JP(a,c,l),32!=(32&l.flags)&&Ud()&&Hv(s,i,c,l),0===function Sp(){return at.lFrame.elementDepthCount}()&&Ii(c,i),function bD(){at.lFrame.elementDepthCount++}(),h&&(G0(s,i,l),q0(s,l,i)),null!==r&&Z0(i,l),b}function T(){let n=Er();Pp()?xp():(n=n.parent,as(n,!1));const e=n;(function Ap(n){return at.skipHydrationRootTNode===n})(e)&&function kp(){at.skipHydrationRootTNode=null}(),function Zc(){at.lFrame.elementDepthCount--}();const t=Bt();return t.firstCreatePass&&(jd(t,n),_p(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function OD(n){return 0!=(8&n.flags)}(e)&&lT(t,e,De(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gP(n){return 0!=(16&n.flags)}(e)&&lT(t,e,De(),e.stylesWithoutHost,!1),T}function kn(n,e,t,r){return b(n,e,t,r),T(),kn}let U1=(n,e,t,r,i,s)=>(Ho(!0),Bv(r,i,function ov(){return at.lFrame.currentNamespace}()));function Rg(n,e,t){const r=De(),i=Bt(),s=n+At,o=i.firstCreatePass?function j8(n,e,t,r,i){const s=e.consts,o=Uo(s,r),a=hh(e,n,8,"ng-container",o);return null!==o&&aw(a,o,!0),Y0(e,t,a,Uo(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];as(o,!0);const a=j1(i,r,o,n);return r[s]=a,Ud()&&Hv(i,r,a,o),Ii(a,r),yp(o)&&(G0(i,r,o),q0(i,o,r)),null!=t&&Z0(r,o),Rg}function kg(){let n=Er();const e=Bt();return Pp()?xp():(n=n.parent,as(n,!1)),e.firstCreatePass&&(jd(e,n),_p(n)&&e.queries.elementEnd(n)),kg}function cT(n,e,t){return Rg(n,e,t),kg(),cT}let j1=(n,e,t,r)=>(Ho(!0),n0(e[pt],""));function Et(){return De()}function Pg(n){return!!n&&"function"==typeof n.then}function H1(n){return!!n&&"function"==typeof n.subscribe}function ae(n,e,t,r){const i=De(),s=Bt(),o=Er();return function z1(n,e,t,r,i,s,o){const a=yp(r),c=n.firstCreatePass&&u1(n),h=e[nr],m=c1(e);let _=!0;if(3&r.type||o){const I=ei(r,e),S=o?o(I):I,j=m.length,O=o?te=>o(wn(te[r.index])):r.index;let q=null;if(!o&&a&&(q=function z8(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[No],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==q)(q.__ngLastListenerFn__||q).__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,_=!1;else{s=q1(r,e,h,s,!1);const te=t.listen(S,i,s);m.push(s,te),c&&c.push(i,O,j,j+1)}}else s=q1(r,e,h,s,!1);const v=r.outputs;let C;if(_&&null!==v&&(C=v[i])){const I=C.length;if(I)for(let S=0;S<I;S+=2){const ye=e[C[S]][C[S+1]].subscribe(s),Pe=m.length;m.push(s,ye),c&&c.push(i,r.index,Pe,-(Pe+1))}}}(s,i,i[pt],o,n,e,r),ae}function W1(n,e,t,r){try{return os(6,e,t),!1!==t(r)}catch(i){return h1(n,i),!1}finally{os(7,e,t)}}function q1(n,e,t,r,i){return function s(o){if(o===Function)return r;Eg(n.componentOffset>-1?wr(n.index,e):e);let l=W1(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)l=W1(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function re(n=1){return function SD(n){return(at.lFrame.contextLView=function AD(n,e){for(;n>0;)e=e[dl],n--;return e}(n,at.lFrame.contextLView))[nr]}(n)}function gw(n,e){return n<<17|e<<2}function Ol(n){return n>>17&32767}function dT(n){return 2|n}function ou(n){return(131068&n)>>2}function hT(n,e){return-131069&n|e<<2}function fT(n){return 1|n}function nO(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ol(s):ou(s),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];J8(n[a],e)&&(l=!0,n[a+1]=r?fT(h):dT(h)),a=r?Ol(h):ou(h)}l&&(n[t+1]=r?dT(s):fT(s))}function J8(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&zi(n,e)>=0}function Ks(n,e,t){return wo(n,e,t,!1),Ks}function ni(n,e){return wo(n,e,null,!0),ni}function wo(n,e,t,r){const i=De(),s=Bt(),o=_o(2);s.firstUpdatePass&&function uO(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[di()],o=function cO(n,e){return e>=n.expandoStartIndex}(n,t);(function pO(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function lW(n,e,t,r){const i=function Yc(n){const e=at.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=xg(t=pT(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=pT(i,n,e,t,r),null===s){let l=function cW(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==ou(r))return n[Ol(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=pT(null,n,e,l[1],r),l=xg(l,e.attrs,r),function uW(n,e,t,r){n[Ol(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function dW(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=xg(r,n[s].hostAttrs,t);return xg(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Q8(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ol(o),l=ou(o);n[r]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||zi(t,h)>0)&&(c=!0)):h=t,i)if(0!==l){const _=Ol(n[a+1]);n[r+1]=gw(_,a),0!==_&&(n[_+1]=hT(n[_+1],r)),n[a+1]=function K8(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=gw(a,0),0!==a&&(n[a+1]=hT(n[a+1],r)),a=r;else n[r+1]=gw(l,0),0===a?a=r:n[l+1]=hT(n[l+1],r),l=r;c&&(n[r+1]=dT(n[r+1])),nO(n,h,r,!0),nO(n,h,r,!1),function X8(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&zi(s,e)>=0&&(t[r+1]=fT(t[r+1]))}(e,h,n,r,s),o=gw(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==wt&&Ai(i,o,e)&&function hO(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],h=function Y8(n){return 1==(1&n)}(c)?fO(l,e,t,i,ou(c),o):void 0;mw(h)||(mw(s)||function Z8(n){return 2==(2&n)}(c)&&(s=fO(l,null,t,i,a,o)),function Y6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:kl.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=kl.Important),n.setStyle(t,r,i,s))}}(r,o,Ca(di(),t),i,s))}(s,s.data[di()],i,i[pt],n,i[o+1]=function gW(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=un(Pl(n)))),n}(e,t),r,o)}function pT(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=xg(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function xg(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Di(n,o,!!t||e[++s]))}return void 0===n?null:n}function fO(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),h=c?l[1]:l,m=null===h;let _=t[i+1];_===wt&&(_=m?Nt:void 0);let v=m?Jp(_,r):h===r?_:void 0;if(c&&!mw(v)&&(v=Jp(l,r)),mw(v)&&(a=v,o))return a;const C=n[i+1];i=o?Ol(C):ou(C)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Jp(l,r))}return a}function mw(n){return void 0!==n}function x(n,e=""){const t=De(),r=Bt(),i=n+At,s=r.firstCreatePass?hh(r,i,1,e,null):r.data[i],o=gO(r,t,s,e,n);t[i]=o,Ud()&&Hv(r,t,o,s),as(s,!1)}let gO=(n,e,t,r,i)=>(Ho(!0),function Vv(n,e){return n.createText(e)}(e[pt],r));function gt(n){return Mi("",n,""),gt}function Mi(n,e,t){const r=De(),i=function ph(n,e,t,r){return Ai(n,jo(),t)?e+se(t)+r:wt}(r,n,e,t);return i!==wt&&Ma(r,di(),i),Mi}function _w(n,e,t,r,i){const s=De(),o=gh(s,n,e,t,r,i);return o!==wt&&Ma(s,di(),o),_w}function gT(n,e,t){const r=De();return Ai(r,jo(),e)&&As(Bt(),Un(),r,n,e,r[pt],t,!0),gT}const au=void 0;var LW=["en",[["a","p"],["AM","PM"],au],[["AM","PM"],au,au],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],au,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],au,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",au,"{1} 'at' {0}",au],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function FW(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let bh={};function Wi(n){const e=function VW(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=OO(e);if(t)return t;const r=e.split("-")[0];if(t=OO(r),t)return t;if("en"===r)return LW;throw new P(701,!1)}function OO(n){return n in bh||(bh[n]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[n]),bh[n]}var Pn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Pn||{});const Dh="en-US";let NO=Dh;function yT(n,e,t,r,i){if(n=ot(n),Array.isArray(n))for(let s=0;s<n.length;s++)yT(n[s],e,t,r,i);else{const s=Bt(),o=De(),a=Er();let l=ru(n)?n:ot(n.provide);const c=wx(n),h=1048575&a.providerIndexes,m=a.directiveStart,_=a.providerIndexes>>20;if(ru(n)||!n.multi){const v=new Da(c,i,U),C=wT(l,e,i?h:h+_,m);-1===C?(Zp(qs(a,o),s,l),vT(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[C]=v,o[C]=v)}else{const v=wT(l,e,h+_,m),C=wT(l,e,h,h+_),S=C>=0&&t[C];if(i&&!S||!i&&!(v>=0&&t[v])){Zp(qs(a,o),s,l);const j=function Fq(n,e,t,r,i){const s=new Da(n,t,U);return s.multi=[],s.index=e,s.componentProviders=0,oN(s,i,r&&!t),s}(i?Nq:Oq,t.length,i,r,c);!i&&S&&(t[C].providerFactory=j),vT(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),o.push(j)}else vT(s,n,v>-1?v:C,oN(t[i?C:v],c,!i&&r));!i&&r&&S&&t[C].componentProviders++}}}function vT(n,e,t,r){const i=ru(e),s=function T5(n){return!!n.useClass}(e);if(i||s){const l=(s?ot(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[r,l]):c[h+1].push(r,l)}else c.push(t,l)}}}function oN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Oq(n,e,t,r){return ET(this.multi,[])}function Nq(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ta(t,t[je],this.providerFactory.index,r);s=a.slice(0,o),ET(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],ET(i,s);return s}function ET(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function sn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function xq(n,e,t){const r=Bt();if(r.firstCreatePass){const i=zs(n);yT(t,r.data,r.blueprint,i,!0),yT(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class lu{}class aN{}class CT extends lu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new v1(this);const i=ci(e);this._bootstrapComponents=Aa(i.bootstrap),this._r3Injector=Px(e,t,[{provide:lu,useValue:this},{provide:iu,useValue:this.componentFactoryResolver},...r],un(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class bT extends aN{constructor(e){super(),this.moduleType=e}create(e){return new CT(this.moduleType,e,[])}}class lN extends lu{constructor(e){super(),this.componentFactoryResolver=new v1(this),this.instance=null;const t=new sh([...e.providers,{provide:lu,useValue:this},{provide:iu,useValue:this.componentFactoryResolver}],e.parent||Yv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function DT(n,e,t=null){return new lN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Bq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=mx(0,t.type),i=r.length>0?DT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Me({token:n,providedIn:"environment",factory:()=>new n(Q(Ss))})}return n})();function Ri(n){n.getStandaloneInjector=e=>e.get(Bq).getOrCreateStandaloneInjector(n)}function jn(n,e,t){const r=Sr()+n,i=De();return i[r]===wt?Wo(i,r,t?e.call(t):e()):Ig(i,r)}function Co(n,e,t,r){return yN(De(),Sr(),n,e,t,r)}function $r(n,e,t,r,i){return vN(De(),Sr(),n,e,t,r,i)}function Cw(n,e,t,r,i,s){return wN(De(),Sr(),n,e,t,r,i,s)}function gN(n,e,t,r,i,s,o){return function EN(n,e,t,r,i,s,o,a,l){const c=e+t;return Zs(n,c,i,s,o,a)?Wo(n,c+4,l?r.call(l,i,s,o,a):r(i,s,o,a)):Bg(n,c+4)}(De(),Sr(),n,e,t,r,i,s,o)}function IT(n,e,t,r,i,s,o,a){const l=Sr()+n,c=De(),h=Zs(c,l,t,r,i,s);return Ai(c,l+4,o)||h?Wo(c,l+5,a?e.call(a,t,r,i,s,o):e(t,r,i,s,o)):Ig(c,l+5)}function ST(n,e,t,r){return function CN(n,e,t,r,i,s){let o=e+t,a=!1;for(let l=0;l<i.length;l++)Ai(n,o++,i[l])&&(a=!0);return a?Wo(n,o,r.apply(s,i)):Bg(n,o)}(De(),Sr(),n,e,t,r)}function Bg(n,e){const t=n[e];return t===wt?void 0:t}function yN(n,e,t,r,i,s){const o=e+t;return Ai(n,o,i)?Wo(n,o+1,s?r.call(s,i):r(i)):Bg(n,o+1)}function vN(n,e,t,r,i,s,o){const a=e+t;return su(n,a,i,s)?Wo(n,a+2,o?r.call(o,i,s):r(i,s)):Bg(n,a+2)}function wN(n,e,t,r,i,s,o,a){const l=e+t;return dw(n,l,i,s,o)?Wo(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):Bg(n,l+3)}function Xt(n,e){const t=Bt();let r;const i=n+At;t.firstCreatePass?(r=function Kq(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ea(r.type)),a=Qr(U);try{const l=Wd(!1),c=s();return Wd(l),function L8(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,De(),i,c),c}finally{Qr(a)}}function AT(n,e,t){const r=n+At,i=De(),s=Ws(i,r);return Ug(i,r)?yN(i,Sr(),e,s.transform,t,s):s.transform(t)}function or(n,e,t,r){const i=n+At,s=De(),o=Ws(s,i);return Ug(s,i)?vN(s,Sr(),e,o.transform,t,r,o):o.transform(t,r)}function Zo(n,e,t,r,i){const s=n+At,o=De(),a=Ws(o,s);return Ug(o,s)?wN(o,Sr(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function Ug(n,e){return n[je].data[e].pure}function Xq(){return this._results[Symbol.iterator]()}class MT{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new He)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=MT.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Xq)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function Ci(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function zD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function eG(n,e,t,r=!0){const i=e[je];if(function H6(n,e,t,r){const i=Ur+r,s=t.length;r>0&&(t[i-1][Ds]=e),r<s-Ur?(e[Ds]=t[i],bi(t,Ur+r,e)):(t.push(e),e[Ds]=null),e[vn]=t;const o=e[Vc];null!==o&&t!==o&&function $6(n,e){const t=n[Ts];e[Bn]!==e[vn][vn][Bn]&&(n[mp]=!0),null===t?n[Ts]=[e]:t.push(e)}(o,e);const a=e[Hs];null!==a&&a.insertView(n),e[_t]|=128}(i,e,n,t),r){const s=l0(t,n),o=e[pt],a=jv(o,n[ss]);null!==a&&function B6(n,e,t,r,i,s){r[Zn]=i,r[Jr]=e,hg(n,r,t,1,i,s)}(i,n[Jr],o,e,a,s)}}let Ys=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=rG}return n})();const tG=Ys,nG=class extends tG{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Jq(n,e,t,r){const i=e.tView,a=sw(n,i,t,4096&n[_t]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Vc]=n[e.index];const c=n[Hs];return null!==c&&(a[Hs]=c.createEmbeddedView(i)),tT(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Dg(i)}};function rG(){return bw(Er(),De())}function bw(n,e){return 4&n.type?new nG(e,n,ch(n,e)):null}let qi=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=cG}return n})();function cG(){return MN(Er(),De())}const uG=qi,SN=class extends uG{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ch(this._hostTNode,this._hostLView)}get injector(){return new jr(this._hostTNode,this._hostLView)}get parentInjector(){const e=El(this._hostTNode,this._hostLView);if(vl(e)){const t=Xc(e,this._hostLView),r=wl(e);return new jr(t[je].data[r+8],t)}return new jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=AN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Ur}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Sl(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}const l=o?e:new Tg(Pt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const S=(o?c:this.parentInjector).get(Ss,null);S&&(s=S)}Pt(l.componentType??{});const v=l.create(c,i,null,s);return this.insertImpl(v.hostView,a,false),v}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function ED(n){return ui(n[vn])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=i[vn],h=new SN(c,c[Jr],c[vn]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return eG(a,i,o,!r),e.attachToViewContainerRef(),bi(RT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=AN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Uv(this._lContainer,t);r&&($o(RT(this._lContainer),t),r0(r[je],r))}detach(e){const t=this._adjustIndex(e,-1),r=Uv(this._lContainer,t);return r&&null!=$o(RT(this._lContainer),t)?new Dg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function AN(n){return n[8]}function RT(n){return n[8]||(n[8]=[])}function MN(n,e){let t;const r=e[n.index];return ui(r)?t=r:(t=a1(r,e,null,n),e[n.index]=t,ow(e,t)),RN(t,e,n,r),new SN(t,n,e)}let RN=function kN(n,e,t,r){if(n[ss])return;let i;i=8&t.type?wn(r):function dG(n,e){const t=n[pt],r=t.createComment(""),i=ei(e,n);return nu(t,jv(t,i),r,function G6(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ss]=i};class kT{constructor(e){this.queryList=e,this.matches=null}clone(){return new kT(this.queryList)}setDirty(){this.queryList.setDirty()}}class PT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new PT(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==LN(e,t).matches&&this.queries[t].setDirty()}}class PN{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class xT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new xT(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class OT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new OT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,pG(t,s)),this.matchTNodeWithReadOption(e,t,Cl(t,e,s,!1,!1))}else r===Ys?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Cl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===rn||i===qi||i===Ys&&4&t.type)this.addMatch(t.index,-2);else{const s=Cl(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function pG(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function mG(n,e,t,r){return-1===t?function gG(n,e){return 11&n.type?ch(n,e):4&n.type?bw(n,e):null}(e,n):-2===t?function _G(n,e,t){return t===rn?ch(e,n):t===Ys?bw(e,n):t===qi?MN(e,n):void 0}(n,e,r):Ta(n,n[je],t,e)}function xN(n,e,t,r){const i=e[Hs].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:mG(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function NT(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=xN(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],h=e[-l];for(let m=Ur;m<h.length;m++){const _=h[m];_[Vc]===_[vn]&&NT(_[je],_,c,r)}if(null!==h[Ts]){const m=h[Ts];for(let _=0;_<m.length;_++){const v=m[_];NT(v[je],v,c,r)}}}}}return r}function Th(n){const e=De(),t=Bt(),r=rv();Lp(r+1);const i=LN(t,r);if(n.dirty&&function Ip(n){return 4==(4&n[_t])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?NT(t,e,r,[]):xN(t,e,i,r);n.reset(s,q5),n.notifyOnChanges()}return!0}return!1}function ON(n,e,t){const r=Bt();r.firstCreatePass&&(function FN(n,e,t){null===n.queries&&(n.queries=new xT),n.queries.track(new OT(e,t))}(r,new PN(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function NN(n,e,t){const r=new MT(4==(4&t));(function D9(n,e,t,r){const i=c1(e);i.push(t),n.firstCreatePass&&u1(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Hs]&&(e[Hs]=new PT),e[Hs].queries.push(new kT(r))}(r,De(),e)}function LN(n,e){return n.queries.getByIndex(e)}function Qs(n,e){return bw(n,e)}const jT=new be("Application Initializer");let HT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ue(jT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Pg(s))t.push(s);else if(H1(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eF=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const hs=new be("LocaleId",{providedIn:"root",factory:()=>Ue(hs,kt.Optional|kt.SkipSelf)||function UG(){return typeof $localize<"u"&&$localize.locale||Dh}()});let Iw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $G{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let tF=(()=>{class n{compileModuleSync(t){return new bT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Aa(ci(t).declarations).reduce((o,a)=>{const l=Pt(a);return l&&o.push(new Tg(l)),o},[]);return new $G(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const sF=new be(""),Aw=new be("");let GT,WT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,GT||(function d7(n){GT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(qT),Q(Aw))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),qT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return GT?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Nl=null;const ZT=new be("PlatformDestroyListeners"),KT=new be("appBootstrapListener");class lF{constructor(e,t){this.name=e,this.token=t}}function m7(n){try{const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function g7(n=[]){if(Nl)return Nl;const e=function uF(n=[],e){return Mr.create({name:e,providers:[{provide:E0,useValue:"platform"},{provide:ZT,useValue:new Set([()=>Nl=null])},...n]})}(n);return Nl=e,function aF(){!function Vy(n){Ly=n}(()=>{throw new P(600,!1)})}(),function cF(n){n.get(Ex,null)?.forEach(t=>t())}(e),e}(r),s=[E7(),...t||[]],a=new lN({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(it);return l.run(()=>{a.resolveInjectorInitializers();const c=a.get(Sa,null);let h;l.runOutsideAngular(()=>{h=l.onError.subscribe({next:v=>{c.handleError(v)}})});const m=()=>a.destroy(),_=i.get(ZT);return _.add(m),a.onDestroy(()=>{h.unsubscribe(),_.delete(m)}),function fF(n,e,t){try{const r=t();return Pg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(c,l,()=>{const v=a.get(HT);return v.runInitializers(),v.donePromise.then(()=>{!function FO(n){is(n,"Expected localeId to be defined"),"string"==typeof n&&(NO=n.toLowerCase().replace(/_/g,"-"))}(a.get(hs,Dh)||Dh);const I=a.get(Fl);return void 0!==e&&I.bootstrap(e),I})})})}catch(e){return Promise.reject(e)}}let Fl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ue(mF),this.zoneIsStable=Ue(Lx),this.componentTypes=[],this.components=[],this.isStable=Ue(Iw).hasPendingTasks.pipe(ct(t=>t?me(!1):this.zoneIsStable),gr(),Ke()),this._injector=Ue(Ss)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof Tx;if(!this._injector.get(HT).done)throw!i&&function po(n){const e=Pt(n)||yr(n)||Br(n);return null!==e&&e.standalone}(t),new P(405,!1);let o;o=i?t:this._injector.get(iu).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function f7(n){return n.isBoundToModule}(o)?void 0:this._injector.get(lu),c=o.create(Mr.NULL,[],r||o.selector,a),h=c.location.nativeElement,m=c.injector.get(sF,null);return m?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),Mw(this.components,c),m?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new P(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Mw(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(KT,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Mw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new P(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const mF=new be("",{providedIn:"root",factory:()=>Ue(Sa).handleError.bind(void 0)});function v7(){const n=Ue(it),e=Ue(Sa);return t=>n.runOutsideAngular(()=>e.handleError(t))}let w7=(()=>{class n{constructor(){this.zone=Ue(it),this.applicationRef=Ue(Fl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _F(n){return[{provide:it,useFactory:n},{provide:mg,multi:!0,useFactory:()=>{const e=Ue(w7,{optional:!0});return()=>e.initialize()}},{provide:mF,useFactory:v7},{provide:Lx,useFactory:Vx}]}function E7(n){return y0([[],_F(()=>new it(function hF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}(n)))])}let Ll=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=C7}return n})();function C7(n){return function b7(n,e,t){if(fl(n)&&!t){const r=wr(n.index,e);return new Dg(r,r)}return 47&n.type?new Dg(e[Bn],e):null}(Er(),De(),16==(16&n))}class CF{constructor(){}supports(e){return uw(e)}create(e){return new M7(e)}}const A7=(n,e)=>e;class M7{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||A7}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<DF(r,i,s)?t:r,a=DF(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,h=l-i;if(c!=h){for(let _=0;_<c;_++){const v=_<s.length?s[_]:s[_]=0,C=v+_;h<=C&&C<c&&(s[_]=v+1)}s[o.previousIndex]=h-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!uw(e))throw new P(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function m8(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new R7(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new bF),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class R7{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class k7{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class bF{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new k7,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function DF(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class TF{constructor(){}supports(e){return e instanceof Map||nT(e)}create(){return new P7}}class P7{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||nT(e)))throw new P(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new x7(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class x7{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IF(){return new Pw([new CF])}let Pw=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:IF});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||IF()),deps:[[n,new Yd,new Rl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new P(901,!1)}}return n})();function SF(){return new zg([new TF])}let zg=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:SF});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||SF()),deps:[[n,new Yd,new Rl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new P(901,!1)}}return n})(),F7=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Fl))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({})}return n})();function Mh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let nI=null;function Vl(){return nI}class Y7{}const xt=new be("DocumentToken");let rI=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(X7)},providedIn:"platform"})}return n})();const Q7=new be("Location Initialized");let X7=(()=>{class n extends rI{constructor(){super(),this._doc=Ue(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vl().getBaseHref(this._doc)}onPopState(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function iI(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function LF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ra(n){return n&&"?"!==n[0]?"?"+n:n}let uu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(BF)},providedIn:"root"})}return n})();const VF=new be("appBaseHref");let BF=(()=>{class n extends uu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ue(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return iI(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ra(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ra(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ra(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(rI),Q(VF,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J7=(()=>{class n extends uu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=iI(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ra(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ra(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(rI),Q(VF,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),Wg=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function nZ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(LF(UF(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ra(r))}normalize(t){return n.stripTrailingSlash(function tZ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,UF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ra(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ra(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Ra;static#t=this.joinWithSlash=iI;static#n=this.stripTrailingSlash=LF;static#r=this.\u0275fac=function(r){return new(r||n)(Q(uu))};static#i=this.\u0275prov=Me({token:n,factory:function(){return function eZ(){return new Wg(Q(uu))}()},providedIn:"root"})}return n})();function UF(n){return n.replace(/\/index.html$/,"")}var Rh=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(Rh||{}),Zi=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Zi||{}),In=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(In||{}),Ms=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ms||{}),Cr=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Cr||{});function Nw(n,e){return Js(Wi(n)[Pn.DateFormat],e)}function Fw(n,e){return Js(Wi(n)[Pn.TimeFormat],e)}function Lw(n,e){return Js(Wi(n)[Pn.DateTimeFormat],e)}function Xs(n,e){const t=Wi(n),r=t[Pn.NumberSymbols][e];if(typeof r>"u"){if(e===Cr.CurrencyDecimal)return t[Pn.NumberSymbols][Cr.Decimal];if(e===Cr.CurrencyGroup)return t[Pn.NumberSymbols][Cr.Group]}return r}const uZ=function xO(n){return Wi(n)[Pn.PluralCase]};function HF(n){if(!n[Pn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Pn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Js(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function oI(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const mZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qg={},_Z=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ka=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ka||{}),on=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(on||{}),an=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(an||{});function zr(n,e,t,r){let i=function IZ(n){if(WF(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return Vw(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(mZ))return function SZ(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,c),e}(r)}const e=new Date(n);if(!WF(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Pa(t,e)||e;let a,o=[];for(;e;){if(a=_Z.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let l=i.getTimezoneOffset();r&&(l=zF(r,l),i=function TZ(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function DZ(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(zF(e,i)-i))}(i,r,!0));let c="";return o.forEach(h=>{const m=function bZ(n){if(lI[n])return lI[n];let e;switch(n){case"G":case"GG":case"GGG":e=xn(an.Eras,In.Abbreviated);break;case"GGGG":e=xn(an.Eras,In.Wide);break;case"GGGGG":e=xn(an.Eras,In.Narrow);break;case"y":e=Rr(on.FullYear,1,0,!1,!0);break;case"yy":e=Rr(on.FullYear,2,0,!0,!0);break;case"yyy":e=Rr(on.FullYear,3,0,!1,!0);break;case"yyyy":e=Rr(on.FullYear,4,0,!1,!0);break;case"Y":e=Hw(1);break;case"YY":e=Hw(2,!0);break;case"YYY":e=Hw(3);break;case"YYYY":e=Hw(4);break;case"M":case"L":e=Rr(on.Month,1,1);break;case"MM":case"LL":e=Rr(on.Month,2,1);break;case"MMM":e=xn(an.Months,In.Abbreviated);break;case"MMMM":e=xn(an.Months,In.Wide);break;case"MMMMM":e=xn(an.Months,In.Narrow);break;case"LLL":e=xn(an.Months,In.Abbreviated,Zi.Standalone);break;case"LLLL":e=xn(an.Months,In.Wide,Zi.Standalone);break;case"LLLLL":e=xn(an.Months,In.Narrow,Zi.Standalone);break;case"w":e=aI(1);break;case"ww":e=aI(2);break;case"W":e=aI(1,!0);break;case"d":e=Rr(on.Date,1);break;case"dd":e=Rr(on.Date,2);break;case"c":case"cc":e=Rr(on.Day,1);break;case"ccc":e=xn(an.Days,In.Abbreviated,Zi.Standalone);break;case"cccc":e=xn(an.Days,In.Wide,Zi.Standalone);break;case"ccccc":e=xn(an.Days,In.Narrow,Zi.Standalone);break;case"cccccc":e=xn(an.Days,In.Short,Zi.Standalone);break;case"E":case"EE":case"EEE":e=xn(an.Days,In.Abbreviated);break;case"EEEE":e=xn(an.Days,In.Wide);break;case"EEEEE":e=xn(an.Days,In.Narrow);break;case"EEEEEE":e=xn(an.Days,In.Short);break;case"a":case"aa":case"aaa":e=xn(an.DayPeriods,In.Abbreviated);break;case"aaaa":e=xn(an.DayPeriods,In.Wide);break;case"aaaaa":e=xn(an.DayPeriods,In.Narrow);break;case"b":case"bb":case"bbb":e=xn(an.DayPeriods,In.Abbreviated,Zi.Standalone,!0);break;case"bbbb":e=xn(an.DayPeriods,In.Wide,Zi.Standalone,!0);break;case"bbbbb":e=xn(an.DayPeriods,In.Narrow,Zi.Standalone,!0);break;case"B":case"BB":case"BBB":e=xn(an.DayPeriods,In.Abbreviated,Zi.Format,!0);break;case"BBBB":e=xn(an.DayPeriods,In.Wide,Zi.Format,!0);break;case"BBBBB":e=xn(an.DayPeriods,In.Narrow,Zi.Format,!0);break;case"h":e=Rr(on.Hours,1,-12);break;case"hh":e=Rr(on.Hours,2,-12);break;case"H":e=Rr(on.Hours,1);break;case"HH":e=Rr(on.Hours,2);break;case"m":e=Rr(on.Minutes,1);break;case"mm":e=Rr(on.Minutes,2);break;case"s":e=Rr(on.Seconds,1);break;case"ss":e=Rr(on.Seconds,2);break;case"S":e=Rr(on.FractionalSeconds,1);break;case"SS":e=Rr(on.FractionalSeconds,2);break;case"SSS":e=Rr(on.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Uw(ka.Short);break;case"ZZZZZ":e=Uw(ka.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Uw(ka.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Uw(ka.Long);break;default:return null}return lI[n]=e,e}(h);c+=m?m(i,t,l):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Vw(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Pa(n,e){const t=function iZ(n){return Wi(n)[Pn.LocaleId]}(n);if(qg[t]=qg[t]||{},qg[t][e])return qg[t][e];let r="";switch(e){case"shortDate":r=Nw(n,Ms.Short);break;case"mediumDate":r=Nw(n,Ms.Medium);break;case"longDate":r=Nw(n,Ms.Long);break;case"fullDate":r=Nw(n,Ms.Full);break;case"shortTime":r=Fw(n,Ms.Short);break;case"mediumTime":r=Fw(n,Ms.Medium);break;case"longTime":r=Fw(n,Ms.Long);break;case"fullTime":r=Fw(n,Ms.Full);break;case"short":const i=Pa(n,"shortTime"),s=Pa(n,"shortDate");r=Bw(Lw(n,Ms.Short),[i,s]);break;case"medium":const o=Pa(n,"mediumTime"),a=Pa(n,"mediumDate");r=Bw(Lw(n,Ms.Medium),[o,a]);break;case"long":const l=Pa(n,"longTime"),c=Pa(n,"longDate");r=Bw(Lw(n,Ms.Long),[l,c]);break;case"full":const h=Pa(n,"fullTime"),m=Pa(n,"fullDate");r=Bw(Lw(n,Ms.Full),[h,m])}return r&&(qg[t][e]=r),r}function Bw(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function bo(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Rr(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function vZ(n,e){switch(n){case on.FullYear:return e.getFullYear();case on.Month:return e.getMonth();case on.Date:return e.getDate();case on.Hours:return e.getHours();case on.Minutes:return e.getMinutes();case on.Seconds:return e.getSeconds();case on.FractionalSeconds:return e.getMilliseconds();case on.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===on.Hours)0===a&&-12===t&&(a=12);else if(n===on.FractionalSeconds)return function yZ(n,e){return bo(n,3).substring(0,e)}(a,e);const l=Xs(o,Cr.MinusSign);return bo(a,e,l,r,i)}}function xn(n,e,t=Zi.Format,r=!1){return function(i,s){return function wZ(n,e,t,r,i,s){switch(t){case an.Months:return function aZ(n,e,t){const r=Wi(n),s=Js([r[Pn.MonthsFormat],r[Pn.MonthsStandalone]],e);return Js(s,t)}(e,i,r)[n.getMonth()];case an.Days:return function oZ(n,e,t){const r=Wi(n),s=Js([r[Pn.DaysFormat],r[Pn.DaysStandalone]],e);return Js(s,t)}(e,i,r)[n.getDay()];case an.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function dZ(n){const e=Wi(n);return HF(e),(e[Pn.ExtraData][2]||[]).map(r=>"string"==typeof r?oI(r):[oI(r[0]),oI(r[1])])}(e),h=function hZ(n,e,t){const r=Wi(n);HF(r);const s=Js([r[Pn.ExtraData][0],r[Pn.ExtraData][1]],e)||[];return Js(s,t)||[]}(e,i,r),m=c.findIndex(_=>{if(Array.isArray(_)){const[v,C]=_,I=o>=v.hours&&a>=v.minutes,S=o<C.hours||o===C.hours&&a<C.minutes;if(v.hours<C.hours){if(I&&S)return!0}else if(I||S)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==m)return h[m]}return function sZ(n,e,t){const r=Wi(n),s=Js([r[Pn.DayPeriodsFormat],r[Pn.DayPeriodsStandalone]],e);return Js(s,t)}(e,i,r)[o<12?0:1];case an.Eras:return function lZ(n,e){return Js(Wi(n)[Pn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Uw(n){return function(e,t,r){const i=-1*r,s=Xs(t,Cr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case ka.Short:return(i>=0?"+":"")+bo(o,2,s)+bo(Math.abs(i%60),2,s);case ka.ShortGMT:return"GMT"+(i>=0?"+":"")+bo(o,1,s);case ka.Long:return"GMT"+(i>=0?"+":"")+bo(o,2,s)+":"+bo(Math.abs(i%60),2,s);case ka.Extended:return 0===r?"Z":(i>=0?"+":"")+bo(o,2,s)+":"+bo(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const EZ=0,jw=4;function $F(n){return Vw(n.getFullYear(),n.getMonth(),n.getDate()+(jw-n.getDay()))}function aI(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=$F(t),o=function CZ(n){const e=Vw(n,EZ,1).getDay();return Vw(n,0,1+(e<=jw?jw:jw+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return bo(i,n,Xs(r,Cr.MinusSign))}}function Hw(n,e=!1){return function(t,r){return bo($F(t).getFullYear(),n,Xs(r,Cr.MinusSign),e)}}const lI={};function zF(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function WF(n){return n instanceof Date&&!isNaN(n.valueOf())}let fI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(r){let i=null;return r?i=new r:(s=Q(hs),i=new VZ(s)),i;var s},providedIn:"root"})}return n})();let VZ=(()=>{class n extends fI{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(uZ(r||this.locale)(t)){case Rh.Zero:return"zero";case Rh.One:return"one";case Rh.Two:return"two";case Rh.Few:return"few";case Rh.Many:return"many";default:return"other"}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(hs))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function KF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const pI=/\s+/,YF=[];let ps=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=YF,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(pI):YF}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(pI):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(pI).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(U(Pw),U(zg),U(rn),U(Si))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class UZ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new UZ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),XF(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{XF(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(U(qi),U(Ys),U(Pw))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function XF(n,e){n.context.$implicit=e.item}let Rs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){JF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){JF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(U(qi),U(Ys))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class jZ{constructor(){this.$implicit=null,this.ngIf=null}}function JF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${un(e)}'.`)}let xa=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:kl.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static#e=this.\u0275fac=function(r){return new(r||n)(U(rn),U(zg),U(Si))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),eo=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(r){return new(r||n)(U(qi))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ir]})}return n})();function Do(n,e){return new P(2100,!1)}class WZ{createSubscription(e,t){return Wc(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Wc(()=>e.unsubscribe())}}class qZ{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const GZ=new qZ,ZZ=new WZ;let tL=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Pg(t))return GZ;if(H1(t))return ZZ;throw Do()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ll,16))};static#t=this.\u0275pipe=_r({name:"async",type:n,pure:!1,standalone:!0})}return n})();const eK=new be("DATE_PIPE_DEFAULT_TIMEZONE"),tK=new be("DATE_PIPE_DEFAULT_OPTIONS");let zw=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return zr(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Do()}}static#e=this.\u0275fac=function(r){return new(r||n)(U(hs,16),U(eK,24),U(tK,24))};static#t=this.\u0275pipe=_r({name:"date",type:n,pure:!0,standalone:!0})}return n})();const nK=/#/g;let _I=(()=>{class n{constructor(t){this._localization=t}transform(t,r,i){if(null==t)return"";if("object"!=typeof r||null===r)throw Do();return r[function ZF(n,e,t,r){let i=`=${n}`;if(e.indexOf(i)>-1||(i=t.getPluralCategory(n,r),e.indexOf(i)>-1))return i;if(e.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(t,Object.keys(r),this._localization,i)].replace(nK,t.toString())}static#e=this.\u0275fac=function(r){return new(r||n)(U(fI,16))};static#t=this.\u0275pipe=_r({name:"i18nPlural",type:n,pure:!0,standalone:!0})}return n})(),rL=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Do();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=_r({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Wr=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({})}return n})();const iL="browser";function sL(n){return n===iL}function Ww(n){return"server"===n}let fK=(()=>{class n{static#e=this.\u0275prov=Me({token:n,providedIn:"root",factory:()=>new pK(Q(xt),window)})}return n})();class pK{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function gK(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class oL{}class VK extends Y7{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class CI extends VK{static makeCurrent(){!function K7(n){nI||(nI=n)}(new CI)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function BK(){return Kg=Kg||document.querySelector("base"),Kg?Kg.getAttribute("href"):null}();return null==t?null:function UK(n){Zw=Zw||document.createElement("a"),Zw.setAttribute("href",n);const e=Zw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Kg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return KF(document.cookie,e)}}let Zw,Kg=null,HK=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const bI=new be("EventManagerPlugins");let dL=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new P(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(Q(bI),Q(it))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class hL{constructor(e){this._doc=e}}const DI="ng-app-id";let fL=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ww(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${DI}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(DI),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(DI,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(Qv),Q(T0,8),Q(Gs))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const TI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},II=/%COMP%/g,qK=new be("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function gL(n,e){return e.map(t=>t.replace(II,n))}let SI=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Ww(a),this.defaultRenderer=new AI(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===wi.ShadowDom&&(r={...r,encapsulation:wi.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof _L?i.applyToHost(t):i instanceof MI&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case wi.Emulated:s=new _L(l,c,r,this.appId,h,o,a,m);break;case wi.ShadowDom:return new YK(l,c,t,r,o,a,this.nonce,m);default:s=new MI(l,c,r,h,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(dL),Q(fL),Q(Qv),Q(qK),Q(xt),Q(Gs),Q(it),Q(T0))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class AI{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(TI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(mL(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(mL(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new P(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=TI[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=TI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(kl.DashCase|kl.Important)?e.style.setProperty(t,r,i&kl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&kl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Vl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function mL(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class YK extends AI{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=gL(i.id,i.styles);for(const h of c){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=h,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class MI extends AI{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?gL(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class _L extends MI{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function GK(n){return"_ngcontent-%COMP%".replace(II,n)}(c),this.hostAttr=function ZK(n){return"_nghost-%COMP%".replace(II,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let QK=(()=>{class n extends hL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const yL=["alt","control","meta","shift"],XK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let eY=(()=>{class n extends hL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),yL.forEach(c=>{const h=r.indexOf(c);h>-1&&(r.splice(h,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=XK[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),yL.forEach(o=>{o!==i&&(0,JK[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function vL(n){return{appProviders:[...EL,...n?.providers??[]],platformProviders:sY}}const sY=[{provide:Gs,useValue:iL},{provide:Ex,useValue:function nY(){CI.makeCurrent()},multi:!0},{provide:xt,useFactory:function iY(){return function t5(n){d0=n}(document),document},deps:[]}],oY=new be(""),wL=[{provide:Aw,useClass:class jK{addToWindow(e){yn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new P(5103,!1);return s},yn.getAllAngularTestabilities=()=>e.getAllTestabilities(),yn.getAllAngularRootElements=()=>e.getAllRootElements(),yn.frameworkStabilizers||(yn.frameworkStabilizers=[]),yn.frameworkStabilizers.push(r=>{const i=yn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Vl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:sF,useClass:WT,deps:[it,qT,Aw]},{provide:WT,useClass:WT,deps:[it,qT,Aw]}],EL=[{provide:E0,useValue:"root"},{provide:Sa,useFactory:function rY(){return new Sa},deps:[]},{provide:bI,useClass:QK,multi:!0,deps:[xt,it,Gs]},{provide:bI,useClass:eY,multi:!0,deps:[xt]},SI,fL,dL,{provide:wg,useExisting:SI},{provide:oL,useClass:HK,deps:[]},[]];let aY=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Qv,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(oY,12))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:[...EL,...wL],imports:[Wr,F7]})}return n})(),CL=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:function(r){let i=null;return i=r?new r:function cY(){return new CL(Q(xt))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:gY}=Array,{getPrototypeOf:mY,prototype:_Y,keys:yY}=Object;function IL(n){if(1===n.length){const e=n[0];if(gY(e))return{args:e,keys:null};if(function vY(n){return n&&"object"==typeof n&&mY(n)===_Y}(e)){const t=yY(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:wY}=Array;function kI(n){return Ne(e=>function EY(n,e){return wY(e)?n(...e):n(e)}(n,e))}function SL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Yg(...n){const e=pr(n),t=fa(n),{args:r,keys:i}=IL(n);if(0===r.length)return K([],e);const s=new dt(function CY(n,e,t=Tn){return r=>{AL(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)AL(e,()=>{const c=K(n[l],e);let h=!1;c.subscribe(ke(r,m=>{s[l]=m,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>SL(i,o):Tn));return t?s.pipe(kI(t)):s}function AL(n,e,t){n?hr(t,n,e):e()}const Kw=lt(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Yw(...n){return function bY(){return ns(1)}()(K(n,pr(n)))}function Qw(n){return new dt(e=>{Gn(n()).subscribe(e)})}function Qg(n,e){const t=k(n)?n:()=>n,r=i=>i.error(t());return new dt(e?i=>e.schedule(r,0,i):r)}function PI(){return ue((n,e)=>{let t=null;n._refCount++;const r=ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ML extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Oe(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ct;const t=this.getSubject();e.add(this.source.subscribe(ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ct.EMPTY)}return e}refCount(){return PI()(this)}}function kr(n){return n<=0?()=>fr:ue((e,t)=>{let r=0;e.subscribe(ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function to(...n){const e=pr(n);return ue((t,r)=>{(e?Yw(n,t,e):Yw(n,t)).subscribe(r)})}function dn(n,e){return ue((t,r)=>{let i=0;t.subscribe(ke(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Xw(n){return ue((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function RL(n=DY){return ue((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function DY(){return new Kw}function Ul(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dn((i,s)=>n(i,s,r)):Tn,kr(1),t?Xw(e):RL(()=>new Kw))}function kh(n,e){return k(e)?mn(n,e,1):mn(n,1)}function qr(n,e,t){const r=k(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ke(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Tn}function du(n){return ue((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ke(t,void 0,void 0,o=>{s=Gn(n(o,du(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function kL(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ke(o,h=>{const m=c++;l=a?n(l,h,m):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function Jw(n,e){return ue(kL(n,e,arguments.length>=2,!0))}function eE(n){return n<=0?()=>fr:ue((e,t)=>{let r=[];e.subscribe(ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Xg(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ki(n){return ue((e,t)=>{Gn(n).subscribe(ke(t,()=>t.complete(),Ye)),!t.closed&&e.subscribe(t)})}const Tt="primary",Jg=Symbol("RouteTitle");class SY{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ph(n){return new SY(n)}function AY(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ko(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!PL(n[i],e[i]))return!1;return!0}function PL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function xL(n){return n.length>0?n[n.length-1]:null}function jl(n){return function pY(n){return!!n&&(n instanceof dt||k(n.lift)&&k(n.subscribe))}(n)?n:Pg(n)?K(Promise.resolve(n)):me(n)}const RY={exact:function FL(n,e,t){if(!hu(n.segments,e.segments)||!tE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!FL(n.children[r],e.children[r],t))return!1;return!0},subset:LL},OL={exact:function kY(n,e){return Ko(n,e)},subset:function PY(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>PL(n[t],e[t]))},ignored:()=>!0};function NL(n,e,t){return RY[t.paths](n.root,e.root,t.matrixParams)&&OL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function LL(n,e,t){return VL(n,e,e.segments,t)}function VL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!hu(i,t)||e.hasChildren()||!tE(i,t,r))}if(n.segments.length===t.length){if(!hu(n.segments,t)||!tE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!LL(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(hu(n.segments,i)&&tE(n.segments,i,r)&&n.children[Tt])&&VL(n.children[Tt],e,s,r)}}function tE(n,e,t){return e.every((r,i)=>OL[t](n[i].parameters,r.parameters))}class xh{constructor(e=new hn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ph(this.queryParams)),this._queryParamMap}toString(){return NY.serialize(this)}}class hn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nE(this)}}class em{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ph(this.parameters)),this._parameterMap}toString(){return jL(this)}}function hu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return new xI},providedIn:"root"})}return n})();class xI{parse(e){const t=new qY(e);return new xh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${nm(e.root,!0)}`,r=function VY(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${rE(t)}=${rE(i)}`).join("&"):`${rE(t)}=${rE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function FY(n){return encodeURI(n)}(e.fragment)}`:""}`}}const NY=new xI;function nE(n){return n.segments.map(e=>jL(e)).join("/")}function nm(n,e){if(!n.hasChildren())return nE(n);if(e){const t=n.children[Tt]?nm(n.children[Tt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Tt&&r.push(`${i}:${nm(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function OY(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Tt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Tt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Tt?[nm(n.children[Tt],!1)]:[`${i}:${nm(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${nE(n)}/${t[0]}`:`${nE(n)}/(${t.join("//")})`}}function BL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rE(n){return BL(n).replace(/%3B/gi,";")}function OI(n){return BL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iE(n){return decodeURIComponent(n)}function UL(n){return iE(n.replace(/\+/g,"%20"))}function jL(n){return`${OI(n.path)}${function LY(n){return Object.keys(n).map(e=>`;${OI(e)}=${OI(n[e])}`).join("")}(n.parameters)}`}const BY=/^[^\/()?;#]+/;function NI(n){const e=n.match(BY);return e?e[0]:""}const UY=/^[^\/()?;=#]+/,HY=/^[^=?&#]+/,zY=/^[^&#]+/;class qY{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new hn(e,t)),r}parseSegment(){const e=NI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new P(4009,!1);return this.capture(e),new em(iE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function jY(n){const e=n.match(UY);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=NI(this.remaining);i&&(r=i,this.capture(r))}e[iE(t)]=iE(r)}parseQueryParam(e){const t=function $Y(n){const e=n.match(HY);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function WY(n){const e=n.match(zY);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=UL(t),s=UL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=NI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new P(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Tt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Tt]:new hn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new P(4011,!1)}}function HL(n){return n.segments.length>0?new hn([],{[Tt]:n}):n}function $L(n){const e={};for(const r of Object.keys(n.children)){const s=$L(n.children[r]);if(r===Tt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function GY(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new hn(n.segments.concat(e.segments),e.children)}return n}(new hn(n.segments,e))}function fu(n){return n instanceof xh}function zL(n){let e;const i=HL(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new hn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function WL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return FI(i,i,i,t,r);const s=function KY(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new GL(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new GL(t,e,r)}(e);if(s.toRoot())return FI(i,i,new hn([],{}),t,r);const o=function YY(n,e,t){if(n.isAbsolute)return new oE(e,!0,0);if(!t)return new oE(e,!1,NaN);if(null===t.parent)return new oE(t,!0,0);const r=sE(n.commands[0])?0:1;return function QY(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new P(4005,!1);i=r.segments.length}return new oE(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?im(o.segmentGroup,o.index,s.commands):ZL(o.segmentGroup,o.index,s.commands);return FI(i,o.segmentGroup,a,t,r)}function sE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rm(n){return"object"==typeof n&&null!=n&&n.outlets}function FI(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),o=n===e?t:qL(n,e,t);const a=HL($L(o));return new xh(a,s,i)}function qL(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:qL(s,e,t)}),new hn(n.segments,r)}class GL{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sE(r[0]))throw new P(4003,!1);const i=r.find(rm);if(i&&i!==xL(r))throw new P(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oE{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ZL(n,e,t){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return im(n,e,t);const r=function JY(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(rm(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!YL(l,c,o))return s;r+=2}else{if(!YL(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new hn(n.segments.slice(0,r.pathIndex),{});return s.children[Tt]=new hn(n.segments.slice(r.pathIndex),n.children),im(s,0,i)}return r.match&&0===i.length?new hn(n.segments,{}):r.match&&!n.hasChildren()?LI(n,e,t):r.match?im(n,0,i):LI(n,e,t)}function im(n,e,t){if(0===t.length)return new hn(n.segments,{});{const r=function XY(n){return rm(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Tt)&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const s=im(n.children[Tt],e,t);return new hn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=ZL(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new hn(n.segments,i)}}function LI(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(rm(s)){const l=eQ(s.outlets);return new hn(r,l)}if(0===i&&sE(t[0])){r.push(new em(n.segments[e].path,KL(t[0]))),i++;continue}const o=rm(s)?s.outlets[Tt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&sE(a)?(r.push(new em(o,KL(a))),i+=2):(r.push(new em(o,{})),i++)}return new hn(r,{})}function eQ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=LI(new hn([],{}),0,r))}),e}function KL(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function YL(n,e,t){return n==t.path&&Ko(e,t.parameters)}const sm="imperative";class Yo{constructor(e,t){this.id=e,this.url=t}}class aE extends Yo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oa extends Yo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class om extends Yo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Oh extends Yo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class lE extends Yo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class QL extends Yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tQ extends Yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nQ extends Yo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rQ extends Yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iQ extends Yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sQ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class VI{}class BI{constructor(e){this.url=e}}class dQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new am,this.attachRef=null}}let am=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dQ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class JL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=UI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=UI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jI(e,this._root).map(t=>t.value)}}function UI(n,e){if(n===e.value)return e;for(const t of e.children){const r=UI(n,t);if(r)return r}return null}function jI(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jI(n,t);if(r.length)return r.unshift(e),r}return[]}class Na{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Nh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class eV extends JL{constructor(e,t){super(e),this.snapshot=t,HI(this,e)}toString(){return this.snapshot.toString()}}function tV(n,e){const t=function hQ(n,e){const o=new cE([],{},{},"",{},Tt,e,null,{});return new rV("",new Na(o,[]))}(0,e),r=new ne([new em("",{})]),i=new ne({}),s=new ne({}),o=new ne({}),a=new ne(""),l=new Fh(r,i,o,a,s,Tt,e,t.root);return l.snapshot=t.root,new eV(new Na(l,[]),t)}class Fh{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ne(c=>c[Jg]))??me(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ne(e=>Ph(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ne(e=>Ph(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nV(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function fQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cE{get title(){return this.data?.[Jg]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ph(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ph(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rV extends JL{constructor(e,t){super(t),this.url=e,HI(this,t)}toString(){return iV(this._root)}}function HI(n,e){e.value._routerState=n,e.children.forEach(t=>HI(n,t))}function iV(n){const e=n.children.length>0?` { ${n.children.map(iV).join(", ")} } `:"";return`${n.value}${e}`}function $I(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ko(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ko(e.params,t.params)||n.paramsSubject.next(t.params),function MY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ko(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ko(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zI(n,e){const t=Ko(n.params,e.params)&&function xY(n,e){return hu(n,e)&&n.every((t,r)=>Ko(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zI(n.parent,e.parent))}let WI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=Ue(am),this.location=Ue(qi),this.changeDetector=Ue(Ll),this.environmentInjector=Ue(Ss),this.inputBinder=Ue(uE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new P(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new P(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new P(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new P(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new pQ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ir]})}return n})();class pQ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fh?this.route:e===am?this.childContexts:this.parent.get(e,t)}}const uE=new be("");let sV=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Yg([r.queryParams,r.params,r.data]).pipe(ct(([s,o,a],l)=>(a={...s,...o,...a},0===l?me(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function Z7(n){const e=Pt(n);if(!e)return null;const t=new Tg(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function lm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function mQ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lm(n,r,i);return lm(n,r)})}(n,e,t);return new Na(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>lm(n,a)),o}}const r=function _Q(n){return new Fh(new ne(n.url),new ne(n.params),new ne(n.queryParams),new ne(n.fragment),new ne(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>lm(n,s));return new Na(r,i)}}const qI="ngNavigationCancelingError";function oV(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=fu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=aV(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function aV(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qI]=!0,r.cancellationCode=e,t&&(r.url=t),r}function lV(n){return n&&n[qI]}let cV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ri],decls:1,vars:0,template:function(r,i){1&r&&kn(0,"router-outlet")},dependencies:[WI],encapsulation:2})}return n})();function GI(n){const e=n.children&&n.children.map(GI),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=cV),t}function To(n){return n.outlet||Tt}function cm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class TQ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$I(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Nh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Nh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new uQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new lQ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if($I(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$I(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=cm(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class uV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dE{constructor(e,t){this.component=e,this.route=t}}function IQ(n,e,t){const r=n._root;return um(r,e?e._root:null,t,[r.value])}function Lh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Jb(n){return null!==ol(n)}(n)?e.get(n):n:r}function um(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Nh(e);return n.children.forEach(o=>{(function AQ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function MQ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!hu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hu(n.url,e.url)||!Ko(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zI(n,e)||!Ko(n.queryParams,e.queryParams);default:return!zI(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new uV(r)):(s.data=o.data,s._resolvedData=o._resolvedData),um(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dE(a.outlet.component,o))}else o&&dm(e,a,i),i.canActivateChecks.push(new uV(r)),um(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>dm(a,t.getContext(o),i)),i}function dm(n,e,t){const r=Nh(n),i=n.value;Object.entries(r).forEach(([s,o])=>{dm(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new dE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function hm(n){return"function"==typeof n}function dV(n){return n instanceof Kw||"EmptyError"===n?.name}const hE=Symbol("INITIAL_VALUE");function Vh(){return ct(n=>Yg(n.map(e=>e.pipe(kr(1),to(hE)))).pipe(Ne(e=>{for(const t of e)if(!0!==t){if(t===hE)return hE;if(!1===t||t instanceof xh)return t}return!0}),dn(e=>e!==hE),kr(1)))}function hV(n){return function ji(...n){return es(n)}(qr(e=>{if(fu(e))throw oV(0,e)}),Ne(e=>!0===e))}class fE{constructor(e){this.segmentGroup=e||null}}class fV{constructor(e){this.urlTree=e}}function Bh(n){return Qg(new fE(n))}function pV(n){return Qg(new fV(n))}class KQ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new P(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return me(r);if(i.numberOfChildren>1||!i.children[Tt])return Qg(new P(4e3,!1));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new xh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new hn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new P(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const ZI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function YQ(n,e,t,r,i){const s=KI(n,e,t);return s.matched?(r=function vQ(n,e){return n.providers&&!n._injector&&(n._injector=DT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function qQ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?me(i.map(o=>{const a=Lh(o,n);return jl(function NQ(n){return n&&hm(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Vh(),hV()):me(!0)}(r,e,t).pipe(Ne(o=>!0===o?s:{...ZI}))):me(s)}function KI(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ZI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||AY)(t,n,e);if(!i)return{...ZI};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function gV(n,e,t,r){return t.length>0&&function JQ(n,e,t){return t.some(r=>pE(n,e,r)&&To(r)!==Tt)}(n,t,r)?{segmentGroup:new hn(e,XQ(r,new hn(t,n.children))),slicedSegments:[]}:0===t.length&&function eX(n,e,t){return t.some(r=>pE(n,e,r))}(n,t,r)?{segmentGroup:new hn(n.segments,QQ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new hn(n.segments,n.children),slicedSegments:t}}function QQ(n,e,t,r,i){const s={};for(const o of r)if(pE(n,t,o)&&!i[To(o)]){const a=new hn([],{});s[To(o)]=a}return{...i,...s}}function XQ(n,e){const t={};t[Tt]=e;for(const r of n)if(""===r.path&&To(r)!==Tt){const i=new hn([],{});t[To(r)]=i}return t}function pE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class iX{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new KQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new P(4002,!1)}recognize(){const e=gV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe(du(t=>{if(t instanceof fV)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof fE?this.noMatchError(t):t}),Ne(t=>{const r=new cE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,{}),i=new Na(r,t),s=new rV("",i),o=function ZY(n,e,t=null,r=null){return WL(zL(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Tt).pipe(du(r=>{throw r instanceof fE?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=nV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return K(i).pipe(kh(s=>{const o=r.children[s],a=function bQ(n,e){const t=n.filter(r=>To(r)===e);return t.push(...n.filter(r=>To(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Jw((s,o)=>(s.push(...o),s)),Xw(null),function TY(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dn((i,s)=>n(i,s,r)):Tn,eE(1),t?Xw(e):RL(()=>new Kw))}(),mn(s=>{if(null===s)return Bh(r);const o=mV(s);return function sX(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),me(o)}))}processSegment(e,t,r,i,s,o){return K(t).pipe(kh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(du(l=>{if(l instanceof fE)return me(null);throw l}))),Ul(a=>!!a),du(a=>{if(dV(a))return function nX(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?me([]):Bh(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function tX(n,e,t,r){return!!(To(n)===r||r!==Tt&&pE(e,t,n))&&("**"===n.path||KI(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Bh(i):Bh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?pV(s):this.applyRedirects.lineralizeSegments(r,s).pipe(mn(o=>{const a=new hn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=KI(t,i,s);if(!a)return Bh(t);const m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,h);return i.redirectTo.startsWith("/")?pV(m):this.applyRedirects.lineralizeSegments(i,m).pipe(mn(_=>this.processSegment(e,r,t,_.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?xL(i).parameters:{};a=me({snapshot:new cE(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_V(r),To(r),r.component??r._loadedComponent??null,r,yV(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=YQ(t,r,i,e).pipe(Ne(({matched:l,consumedSegments:c,remainingSegments:h,parameters:m})=>l?{snapshot:new cE(c,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_V(r),To(r),r.component??r._loadedComponent??null,r,yV(r)),consumedSegments:c,remainingSegments:h}:null));return a.pipe(ct(l=>null===l?Bh(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ct(({routes:c})=>{const h=r._loadedInjector??e,{snapshot:m,consumedSegments:_,remainingSegments:v}=l,{segmentGroup:C,slicedSegments:I}=gV(t,_,v,c);if(0===I.length&&C.hasChildren())return this.processChildren(h,c,C).pipe(Ne(j=>null===j?null:[new Na(m,j)]));if(0===c.length&&0===I.length)return me([new Na(m,[])]);const S=To(r)===s;return this.processSegment(h,c,C,I,S?Tt:s,!0).pipe(Ne(j=>[new Na(m,j)]))}))))}getChildConfig(e,t,r){return t.children?me({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?me({routes:t._loadedRoutes,injector:t._loadedInjector}):function WQ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?me(!0):me(i.map(o=>{const a=Lh(o,n);return jl(function kQ(n){return n&&hm(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Vh(),hV())}(e,t,r).pipe(mn(i=>i?this.configLoader.loadChildren(e,t).pipe(qr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function ZQ(n){return Qg(aV(!1,3))}())):me({routes:[],injector:e})}}function oX(n){const e=n.value.routeConfig;return e&&""===e.path}function mV(n){const e=[],t=new Set;for(const r of n){if(!oX(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=mV(r.children);e.push(new Na(r.value,i))}return e.filter(r=>!t.has(r))}function _V(n){return n.data||{}}function yV(n){return n.resolve||{}}function vV(n){return"string"==typeof n.title||null===n.title}function YI(n){return ct(e=>{const t=n(e);return t?K(t).pipe(Ne(()=>e)):me(e)})}const Uh=new be("ROUTES");let QI=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ue(tF)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return me(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=jl(t.loadComponent()).pipe(Ne(wV),qr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Xg(()=>{this.componentLoaders.delete(t)})),i=new ML(r,()=>new X).pipe(PI());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function fX(n,e,t,r){return jl(n.loadChildren()).pipe(Ne(wV),mn(i=>i instanceof aN||Array.isArray(i)?me(i):K(e.compileModuleAsync(i))),Ne(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Uh,[],{optional:!0,self:!0}).flat()),{routes:o.map(GI),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Xg(()=>{this.childrenLoaders.delete(r)})),o=new ML(s,()=>new X).pipe(PI());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wV(n){return function pX(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let gE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new X,this.transitionAbortSubject=new X,this.configLoader=Ue(QI),this.environmentInjector=Ue(Ss),this.urlSerializer=Ue(tm),this.rootContexts=Ue(am),this.inputBindingEnabled=null!==Ue(uE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>me(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new oQ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new sQ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ne({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sm,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dn(s=>0!==s.id),Ne(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ct(s=>{this.currentTransition=s;let o=!1,a=!1;return me(s).pipe(qr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ct(l=>{const c=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const _="";return this.events.next(new Oh(l.id,this.urlSerializer.serialize(l.rawUrl),_,0)),l.resolve(null),fr}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return me(l).pipe(ct(_=>{const v=this.transitions?.getValue();return this.events.next(new aE(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),v!==this.transitions?.getValue()?fr:Promise.resolve(_)}),function aX(n,e,t,r,i,s){return mn(o=>function rX(n,e,t,r,i,s,o="emptyOnly"){return new iX(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Ne(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),qr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const v=new QL(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(v)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:_,extractedUrl:v,source:C,restoredState:I,extras:S}=l,j=new aE(_,this.urlSerializer.serialize(v),C,I);this.events.next(j);const O=tV(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:O,urlAfterRedirects:v,extras:{...S,skipLocationChange:!1,replaceUrl:!1}},me(s)}{const _="";return this.events.next(new Oh(l.id,this.urlSerializer.serialize(l.extractedUrl),_,1)),l.resolve(null),fr}}),qr(l=>{const c=new tQ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Ne(l=>(this.currentTransition=s={...l,guards:IQ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function LQ(n,e){return mn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?me({...t,guardsResult:!0}):function VQ(n,e,t,r){return K(n).pipe(mn(i=>function zQ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?me(s.map(a=>{const l=cm(e)??i,c=Lh(a,l);return jl(function OQ(n){return n&&hm(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Ul())})).pipe(Vh()):me(!0)}(i.component,i.route,t,e,r)),Ul(i=>!0!==i,!0))}(o,r,i,n).pipe(mn(a=>a&&function RQ(n){return"boolean"==typeof n}(a)?function BQ(n,e,t,r){return K(e).pipe(kh(i=>Yw(function jQ(n,e){return null!==n&&e&&e(new aQ(n)),me(!0)}(i.route.parent,r),function UQ(n,e){return null!==n&&e&&e(new cQ(n)),me(!0)}(i.route,r),function $Q(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function SQ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Qw(()=>me(o.guards.map(l=>{const c=cm(o.node)??t,h=Lh(l,c);return jl(function xQ(n){return n&&hm(n.canActivateChild)}(h)?h.canActivateChild(r,n):c.runInContext(()=>h(r,n))).pipe(Ul())})).pipe(Vh())));return me(s).pipe(Vh())}(n,i.path,t),function HQ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return me(!0);const i=r.map(s=>Qw(()=>{const o=cm(e)??t,a=Lh(s,o);return jl(function PQ(n){return n&&hm(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ul())}));return me(i).pipe(Vh())}(n,i.route,t))),Ul(i=>!0!==i,!0))}(r,s,n,e):me(a)),Ne(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),qr(l=>{if(s.guardsResult=l.guardsResult,fu(l.guardsResult))throw oV(0,l.guardsResult);const c=new nQ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),dn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),YI(l=>{if(l.guards.canActivateChecks.length)return me(l).pipe(qr(c=>{const h=new rQ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),ct(c=>{let h=!1;return me(c).pipe(function lX(n,e){return mn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return me(t);let s=0;return K(i).pipe(kh(o=>function cX(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!vV(i)&&(s[Jg]=i.title),function uX(n,e,t,r){const i=function dX(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return me({});const s={};return K(i).pipe(mn(o=>function hX(n,e,t,r){const i=cm(e)??r,s=Lh(n,i);return jl(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ul(),qr(a=>{s[o]=a}))),eE(1),function IY(n){return Ne(()=>n)}(s),du(o=>dV(o)?fr:Qg(o)))}(s,n,e,r).pipe(Ne(o=>(n._resolvedData=o,n.data=nV(n,t).resolve,i&&vV(i)&&(n.data[Jg]=i.title),null)))}(o.route,r,n,e)),qr(()=>s++),eE(1),mn(o=>s===i.length?me(t):fr))})}(t.paramsInheritanceStrategy,this.environmentInjector),qr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",2)}}))}),qr(c=>{const h=new iQ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),YI(l=>{const c=h=>{const m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(qr(_=>{h.component=_}),Ne(()=>{})));for(const _ of h.children)m.push(...c(_));return m};return Yg(c(l.targetSnapshot.root)).pipe(Xw(),kr(1))}),YI(()=>this.afterPreactivation()),Ne(l=>{const c=function gQ(n,e,t){const r=lm(n,e._root,t?t._root:void 0);return new eV(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),qr(()=>{this.events.next(new VI)}),((n,e,t,r)=>Ne(i=>(new TQ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),kr(1),qr({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Oa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),ki(this.transitionAbortSubject.pipe(qr(l=>{throw l}))),Xg(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),du(l=>{if(a=!0,lV(l))this.events.next(new om(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function yQ(n){return lV(n)&&fu(n.url)}(l)?this.events.next(new BI(l.url)):s.resolve(!1);else{this.events.next(new lE(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return fr}))}))}cancelNavigationTransition(t,r,i){const s=new om(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EV(n){return n!==sm}let CV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[Jg]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(gX)},providedIn:"root"})}return n})(),gX=(()=>{class n extends CV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(CL))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(yX)},providedIn:"root"})}return n})();class _X{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let yX=(()=>{class n extends _X{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const mE=new be("",{providedIn:"root",factory:()=>({})});let vX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:function(){return Ue(wX)},providedIn:"root"})}return n})(),wX=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fm=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(fm||{});function bV(n,e){n.events.pipe(dn(t=>t instanceof Oa||t instanceof om||t instanceof lE||t instanceof Oh),Ne(t=>t instanceof Oa||t instanceof Oh?fm.COMPLETE:t instanceof om&&(0===t.code||1===t.code)?fm.REDIRECTING:fm.FAILED),dn(t=>t!==fm.REDIRECTING),kr(1)).subscribe(()=>{e()})}function EX(n){throw n}function CX(n,e,t){return e.parse("/")}const bX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ue(eF),this.isNgZoneEnabled=!1,this._events=new X,this.options=Ue(mE,{optional:!0})||{},this.pendingTasks=Ue(Iw),this.errorHandler=this.options.errorHandler||EX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||CX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ue(vX),this.routeReuseStrategy=Ue(mX),this.titleStrategy=Ue(CV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ue(Uh,{optional:!0})?.flat()??[],this.navigationTransitions=Ue(gE),this.urlSerializer=Ue(tm),this.location=Ue(Wg),this.componentInputBindingEnabled=!!Ue(uE,{optional:!0}),this.eventsSubscription=new Ct,this.isNgZoneEnabled=Ue(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new xh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tV(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(DV(r)&&this._events.next(r));if(r instanceof aE)EV(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Oh)this.rawUrlTree=i.rawUrl;else if(r instanceof QL){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof VI)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof om)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof BI){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||EV(i.source)};this.scheduleNavigation(s,sm,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof lE&&this.restoreHistory(i,!0),r instanceof Oa&&(this.navigated=!0),DV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),sm,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(GI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let m,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{m=zL(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return WL(m,t,h,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,sm,null,r)}navigate(t,r={skipLocationChange:!1}){return function TX(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new P(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...bX}:!1===r?{...DX}:r,fu(t))return NL(this.currentUrlTree,t,i);const s=this.parseUrl(t);return NL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((m,_)=>{a=m,l=_});const h=this.pendingTasks.add();return bV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DV(n){return!(n instanceof VI||n instanceof BI)}let pu=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new X,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof Oa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function hx(n,e,t){return function b5(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?dx:ux}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(U(Pi),U(Fh),function Gd(n){return function Kp(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(op(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Er(),n)}("tabindex"),U(Si),U(rn),U(uu))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ae("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&ir("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Mh],skipLocationChange:["skipLocationChange","skipLocationChange",Mh],replaceUrl:["replaceUrl","replaceUrl",Mh],routerLink:"routerLink"},standalone:!0,features:[T1,Ir]})}return n})();class TV{}let AX=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(dn(t=>t instanceof Oa),kh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=DT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return K(i).pipe(ns())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):me(null);const s=i.pipe(mn(o=>null===o?me(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?K([s,this.loader.loadComponent(r)]).pipe(ns()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Pi),Q(tF),Q(Ss),Q(TV),Q(QI))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const XI=new be("");let IV=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof aE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Oh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof XL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new XL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){z0()};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function Fa(n,e){return{\u0275kind:n,\u0275providers:e}}function AV(){const n=Ue(Mr);return e=>{const t=n.get(Fl);if(e!==t.components[0])return;const r=n.get(Pi),i=n.get(MV);1===n.get(JI)&&r.initialNavigation(),n.get(RV,null,kt.Optional)?.setUpPreloading(),n.get(XI,null,kt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const MV=new be("",{factory:()=>new X}),JI=new be("",{providedIn:"root",factory:()=>1}),RV=new be("");function PX(n){return Fa(0,[{provide:RV,useExisting:AX},{provide:TV,useExisting:n}])}const kV=new be("ROUTER_FORROOT_GUARD"),OX=[Wg,{provide:tm,useClass:xI},Pi,am,{provide:Fh,useFactory:function SV(n){return n.routerState.root},deps:[Pi]},QI,[]];function NX(){return new lF("Router",Pi)}let Hl=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[OX,[],{provide:Uh,multi:!0,useValue:t},{provide:kV,useFactory:BX,deps:[[Pi,new Rl,new Yd]]},{provide:mE,useValue:r||{}},r?.useHash?{provide:uu,useClass:J7}:{provide:uu,useClass:BF},{provide:XI,useFactory:()=>{const n=Ue(fK),e=Ue(it),t=Ue(mE),r=Ue(gE),i=Ue(tm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new IV(i,r,n,e,t)}},r?.preloadingStrategy?PX(r.preloadingStrategy).\u0275providers:[],{provide:lF,multi:!0,useFactory:NX},r?.initialNavigation?UX(r):[],r?.bindToComponentInputs?Fa(8,[sV,{provide:uE,useExisting:sV}]).\u0275providers:[],[{provide:PV,useFactory:AV},{provide:KT,multi:!0,useExisting:PV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Uh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(kV,8))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({})}return n})();function BX(n){return"guarded"}function UX(n){return["disabled"===n.initialNavigation?Fa(3,[{provide:jT,multi:!0,useFactory:()=>{const e=Ue(Pi);return()=>{e.setUpLocationChangeListener()}}},{provide:JI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fa(2,[{provide:JI,useValue:0},{provide:jT,multi:!0,deps:[Mr],useFactory:e=>{const t=e.get(Q7,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Pi),s=e.get(MV);bV(i,()=>{r(!0)}),e.get(gE).afterPreactivation=()=>(r(!0),s.closed?me(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const PV=new be("");var pe=vt(861),gs=vt(106);gs.Z.registerVersion("firebase","10.12.2","app-compat"),vt(985);var jh=vt(534);(0,jh.registerVersion)("firebase","10.12.2","app");class qX extends Ct{constructor(e,t){super()}schedule(e,t=0){return this}}const _E={setInterval(n,e,...t){const{delegate:r}=_E;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=_E;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class yE extends qX{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return _E.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&_E.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fe(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const eS={now:()=>(eS.delegate||Date).now(),delegate:void 0};class pm{constructor(e,t=pm.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}pm.now=eS.now;class vE extends pm{constructor(e,t=pm.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const KX=new class ZX extends vE{}(class GX extends yE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Hh=new vE(yE),YX=Hh,tS=new xl("ANGULARFIRE2_VERSION");class xV{constructor(){return((n,e)=>{const t=(0,jh.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(XX)}}const XX="app-check";function $h(){}class OV{zone;delegate;constructor(e,t=KX){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class JX{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$h,{},$h,$h)),t.pipe(qr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let NV=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new OV(Zone.current)),this.insideAngular=t.run(()=>new OV(Zone.current,Hh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Q(it))};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ks(n){return function tJ(n){return function(t){return(t=t.lift(new JX(n.ngZone))).pipe(vi(n.outsideAngular),Hi(n.insideAngular))}}(function zh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}const rJ=["ngOnDestroy"];class FV{constructor(e){return e}}const wE=new be("angularfire2.app.options"),EE=new be("angularfire2.app.name");function nS(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=gs.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>gs.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;oJ("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new FV(o)}const oJ=(n,...e)=>{},aJ={provide:FV,useFactory:nS,deps:[wE,it,[new Rl,EE]]};let lJ=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:wE,useValue:t},{provide:EE,useValue:r}]}}constructor(t){gs.Z.registerVersion("angularfire",tS.full,"core"),gs.Z.registerVersion("angularfire",tS.full,"app-compat"),gs.Z.registerVersion("angular",Sx.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Q(Gs))};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[aJ]})}return n})();function LV(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function cJ(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(VV("error",`${e} was already initialized on the ${t} Firebase App with different settings.${uJ?" You may need to reload as Firebase is not HMR aware.":""}`),VV("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const uJ=typeof module<"u"&&!!module.hot,VV=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class BV extends X{constructor(e=1/0,t=1/0,r=eS){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function UV(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,Ke({connector:()=>new BV(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function rS(n,e){return k(e)?ct(()=>n,e):ct(()=>n)}const jV=new be("angularfire2.auth.use-emulator"),HV=new be("angularfire2.auth.settings"),$V=new be("angularfire2.auth.tenant-id"),zV=new be("angularfire2.auth.langugage-code"),WV=new be("angularfire2.auth.use-device-language"),qV=new be("angularfire.auth.persistence"),GV=(n,e,t,r,i,s,o,a)=>LV(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,h]of Object.entries(o))l.settings[c]=h;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let iS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,h,m,_,v){const C=new X,I=me(void 0).pipe(Hi(o.outsideAngular),ct(()=>s.runOutsideAngular(()=>Promise.resolve().then(vt.bind(vt,985)))),Ne(()=>nS(t,s,r)),Ne(S=>GV(S,s,a,c,h,m,l,_)),UV({bufferSize:1,refCount:!1}));if(Ww(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=me(null);else{I.pipe(Ul()).subscribe();const S=I.pipe(ct(q=>q.getRedirectResult().then(te=>te,()=>null)),ks,UV({bufferSize:1,refCount:!1})),j=I.pipe(ct(q=>new dt(te=>({unsubscribe:s.runOutsideAngular(()=>q.onAuthStateChanged(ye=>te.next(ye),ye=>te.error(ye),()=>te.complete()))})))),O=I.pipe(ct(q=>new dt(te=>({unsubscribe:s.runOutsideAngular(()=>q.onIdTokenChanged(ye=>te.next(ye),ye=>te.error(ye),()=>te.complete()))}))));this.authState=S.pipe(rS(j),vi(o.outsideAngular),Hi(o.insideAngular)),this.user=S.pipe(rS(O),vi(o.outsideAngular),Hi(o.insideAngular)),this.idToken=this.user.pipe(ct(q=>q?K(q.getIdToken()):me(null))),this.idTokenResult=this.user.pipe(ct(q=>q?K(q.getIdTokenResult()):me(null))),this.credential=ge(S,C,this.authState.pipe(dn(q=>!q))).pipe(Ne(q=>q?.user?q:null),vi(o.outsideAngular),Hi(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(rJ.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(h=>{const m=h?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,m),m})})})}))(this,I,s,{spy:{apply:(S,j,O)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&O.then(q=>C.next(q))}}})}static \u0275fac=function(r){return new(r||n)(Q(wE),Q(EE,8),Q(Gs),Q(it),Q(NV),Q(jV,8),Q(HV,8),Q($V,8),Q(zV,8),Q(WV,8),Q(qV,8),Q(xV,8))};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function Wh(){return ue((n,e)=>{let t,r=!1;n.subscribe(ke(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var mu,QV,ZV=vt(537),Qo=vt(879),ln=vt(58),KV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},YV={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(z,R,N){N||(N=0);var W=Array(16);if("string"==typeof R)for(var F=0;16>F;++F)W[F]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(F=0;16>F;++F)W[F]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;var $=z.g[3],L=(R=z.g[0])+($^(N=z.g[1])&((F=z.g[2])^$))+W[0]+3614090360&4294967295;L=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=(N=(F=($=(R=N+(L<<7&4294967295|L>>>25))+((L=$+(F^R&(N^F))+W[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=F+(N^$&(R^N))+W[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=N+(R^F&($^R))+W[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=R+($^N&(F^$))+W[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=$+(F^R&(N^F))+W[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=F+(N^$&(R^N))+W[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=N+(R^F&($^R))+W[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=R+($^N&(F^$))+W[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=$+(F^R&(N^F))+W[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=F+(N^$&(R^N))+W[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=N+(R^F&($^R))+W[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=R+($^N&(F^$))+W[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=$+(F^R&(N^F))+W[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=F+(N^$&(R^N))+W[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=N+(R^F&($^R))+W[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=R+(F^$&(N^F))+W[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=$+(N^F&(R^N))+W[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=F+(R^N&($^R))+W[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=N+($^R&(F^$))+W[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=R+(F^$&(N^F))+W[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=$+(N^F&(R^N))+W[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=F+(R^N&($^R))+W[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=N+($^R&(F^$))+W[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=R+(F^$&(N^F))+W[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=$+(N^F&(R^N))+W[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=F+(R^N&($^R))+W[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=N+($^R&(F^$))+W[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=R+(F^$&(N^F))+W[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=$+(N^F&(R^N))+W[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=F+(R^N&($^R))+W[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=N+($^R&(F^$))+W[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=R+(N^F^$)+W[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=$+(R^N^F)+W[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=F+($^R^N)+W[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=N+(F^$^R)+W[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=R+(N^F^$)+W[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=$+(R^N^F)+W[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=F+($^R^N)+W[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=N+(F^$^R)+W[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=R+(N^F^$)+W[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=$+(R^N^F)+W[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=F+($^R^N)+W[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=N+(F^$^R)+W[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=R+(N^F^$)+W[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=$+(R^N^F)+W[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=F+($^R^N)+W[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=N+(F^$^R)+W[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=R+(F^(N|~$))+W[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=$+(N^(R|~F))+W[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=F+(R^($|~N))+W[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=N+($^(F|~R))+W[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=R+(F^(N|~$))+W[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=$+(N^(R|~F))+W[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=F+(R^($|~N))+W[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=N+($^(F|~R))+W[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=R+(F^(N|~$))+W[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=$+(N^(R|~F))+W[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=F+(R^($|~N))+W[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=N+($^(F|~R))+W[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+(($=(R=N+((L=R+(F^(N|~$))+W[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=$+(N^(R|~F))+W[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^((F=$+((L=F+(R^($|~N))+W[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~R))+W[9]+3951481745&4294967295,z.g[0]=z.g[0]+R&4294967295,z.g[1]=z.g[1]+(F+(L<<21&4294967295|L>>>11))&4294967295,z.g[2]=z.g[2]+F&4294967295,z.g[3]=z.g[3]+$&4294967295}function o(z,R){this.h=R;for(var N=[],W=!0,F=z.length-1;0<=F;F--){var $=0|z[F];W&&$==R||(N[F]=$,W=!1)}this.g=N}(function e(z,R){function N(){}N.prototype=R.prototype,z.D=R.prototype,z.prototype=new N,z.prototype.constructor=z,z.C=function(W,F,$){for(var L=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)L[Lt-2]=arguments[Lt];return R.prototype[F].apply(W,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(z,R){void 0===R&&(R=z.length);for(var N=R-this.blockSize,W=this.B,F=this.h,$=0;$<R;){if(0==F)for(;$<=N;)i(this,z,$),$+=this.blockSize;if("string"==typeof z){for(;$<R;)if(W[F++]=z.charCodeAt($++),F==this.blockSize){i(this,W),F=0;break}}else for(;$<R;)if(W[F++]=z[$++],F==this.blockSize){i(this,W),F=0;break}}this.h=F,this.o+=R},r.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var R=1;R<z.length-8;++R)z[R]=0;var N=8*this.o;for(R=z.length-8;R<z.length;++R)z[R]=255&N,N/=256;for(this.u(z),z=Array(16),R=N=0;4>R;++R)for(var W=0;32>W;W+=8)z[N++]=this.g[R]>>>W&255;return z};var a={};function l(z){return-128<=z&&128>z?function s(z,R){var N=a;return Object.prototype.hasOwnProperty.call(N,z)?N[z]:N[z]=R(z)}(z,function(R){return new o([0|R],0>R?-1:0)}):new o([0|z],0>z?-1:0)}function c(z){if(isNaN(z)||!isFinite(z))return m;if(0>z)return S(c(-z));for(var R=[],N=1,W=0;z>=N;W++)R[W]=z/N|0,N*=4294967296;return new o(R,0)}var m=l(0),_=l(1),v=l(16777216);function C(z){if(0!=z.h)return!1;for(var R=0;R<z.g.length;R++)if(0!=z.g[R])return!1;return!0}function I(z){return-1==z.h}function S(z){for(var R=z.g.length,N=[],W=0;W<R;W++)N[W]=~z.g[W];return new o(N,~z.h).add(_)}function j(z,R){return z.add(S(R))}function O(z,R){for(;(65535&z[R])!=z[R];)z[R+1]+=z[R]>>>16,z[R]&=65535,R++}function q(z,R){this.g=z,this.h=R}function te(z,R){if(C(R))throw Error("division by zero");if(C(z))return new q(m,m);if(I(z))return R=te(S(z),R),new q(S(R.g),S(R.h));if(I(R))return R=te(z,S(R)),new q(S(R.g),R.h);if(30<z.g.length){if(I(z)||I(R))throw Error("slowDivide_ only works with positive integers.");for(var N=_,W=R;0>=W.l(z);)N=ye(N),W=ye(W);var F=Pe(N,1),$=Pe(W,1);for(W=Pe(W,2),N=Pe(N,2);!C(W);){var L=$.add(W);0>=L.l(z)&&(F=F.add(N),$=L),W=Pe(W,1),N=Pe(N,1)}return R=j(z,F.j(R)),new q(F,R)}for(F=m;0<=z.l(R);){for(N=Math.max(1,Math.floor(z.m()/R.m())),W=48>=(W=Math.ceil(Math.log(N)/Math.LN2))?1:Math.pow(2,W-48),L=($=c(N)).j(R);I(L)||0<L.l(z);)L=($=c(N-=W)).j(R);C($)&&($=_),F=F.add($),z=j(z,L)}return new q(F,z)}function ye(z){for(var R=z.g.length+1,N=[],W=0;W<R;W++)N[W]=z.i(W)<<1|z.i(W-1)>>>31;return new o(N,z.h)}function Pe(z,R){var N=R>>5;R%=32;for(var W=z.g.length-N,F=[],$=0;$<W;$++)F[$]=0<R?z.i($+N)>>>R|z.i($+N+1)<<32-R:z.i($+N);return new o(F,z.h)}(n=o.prototype).m=function(){if(I(this))return-S(this).m();for(var z=0,R=1,N=0;N<this.g.length;N++){var W=this.i(N);z+=(0<=W?W:4294967296+W)*R,R*=4294967296}return z},n.toString=function(z){if(2>(z=z||10)||36<z)throw Error("radix out of range: "+z);if(C(this))return"0";if(I(this))return"-"+S(this).toString(z);for(var R=c(Math.pow(z,6)),N=this,W="";;){var F=te(N,R).g,$=((0<(N=j(N,F.j(R))).g.length?N.g[0]:N.h)>>>0).toString(z);if(C(N=F))return $+W;for(;6>$.length;)$="0"+$;W=$+W}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h},n.l=function(z){return I(z=j(this,z))?-1:C(z)?0:1},n.abs=function(){return I(this)?S(this):this},n.add=function(z){for(var R=Math.max(this.g.length,z.g.length),N=[],W=0,F=0;F<=R;F++){var $=W+(65535&this.i(F))+(65535&z.i(F)),L=($>>>16)+(this.i(F)>>>16)+(z.i(F)>>>16);W=L>>>16,N[F]=(L&=65535)<<16|($&=65535)}return new o(N,-2147483648&N[N.length-1]?-1:0)},n.j=function(z){if(C(this)||C(z))return m;if(I(this))return I(z)?S(this).j(S(z)):S(S(this).j(z));if(I(z))return S(this.j(S(z)));if(0>this.l(v)&&0>z.l(v))return c(this.m()*z.m());for(var R=this.g.length+z.g.length,N=[],W=0;W<2*R;W++)N[W]=0;for(W=0;W<this.g.length;W++)for(var F=0;F<z.g.length;F++){var $=this.i(W)>>>16,L=65535&this.i(W),Lt=z.i(F)>>>16,oo=65535&z.i(F);N[2*W+2*F]+=L*oo,O(N,2*W+2*F),N[2*W+2*F+1]+=$*oo,O(N,2*W+2*F+1),N[2*W+2*F+1]+=L*Lt,O(N,2*W+2*F+1),N[2*W+2*F+2]+=$*Lt,O(N,2*W+2*F+2)}for(W=0;W<R;W++)N[W]=N[2*W+1]<<16|N[2*W];for(W=R;W<2*R;W++)N[W]=0;return new o(N,0)},n.A=function(z){return te(this,z).h},n.and=function(z){for(var R=Math.max(this.g.length,z.g.length),N=[],W=0;W<R;W++)N[W]=this.i(W)&z.i(W);return new o(N,this.h&z.h)},n.or=function(z){for(var R=Math.max(this.g.length,z.g.length),N=[],W=0;W<R;W++)N[W]=this.i(W)|z.i(W);return new o(N,this.h|z.h)},n.xor=function(z){for(var R=Math.max(this.g.length,z.g.length),N=[],W=0;W<R;W++)N[W]=this.i(W)^z.i(W);return new o(N,this.h^z.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QV=YV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function h(z,R){if(0==z.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==z.charAt(0))return S(h(z.substring(1),R));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(R,8)),W=m,F=0;F<z.length;F+=8){var $=Math.min(8,z.length-F),L=parseInt(z.substring(F,F+$),R);8>$?($=c(Math.pow(R,$)),W=W.j($).add(c(L))):W=(W=W.j(N)).add(c(L))}return W},mu=YV.Integer=o}).apply(typeof KV<"u"?KV:typeof self<"u"?self:typeof window<"u"?window:{});var XV,JV,gm,e2,bE,sS,t2,n2,r2,CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},La={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,E){return f==Array.prototype||f==Object.prototype||(f[y]=E.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof CE&&CE];for(var y=0;y<f.length;++y){var E=f[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var E=r;f=f.split(".");for(var M=0;M<f.length-1;M++){var ie=f[M];if(!(ie in E))break e;E=E[ie]}(y=y(M=E[f=f[f.length-1]]))!=M&&null!=y&&e(E,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function s(f,y){f instanceof String&&(f+="");var E=0,M=!1,ie={next:function(){if(!M&&E<f.length){var he=E++;return{value:y(he,f[he]),done:!1}}return M=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}(this,function(y,E){return E})}});var o=o||{},a=this||self;function l(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function c(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function h(f,y,E){return f.call.apply(f.bind,arguments)}function m(f,y,E){if(!f)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,M),f.apply(y,ie)}}return function(){return f.apply(y,arguments)}}function _(f,y,E){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:m).apply(null,arguments)}function v(f,y){var E=Array.prototype.slice.call(arguments,1);return function(){var M=E.slice();return M.push.apply(M,arguments),f.apply(this,M)}}function C(f,y){function E(){}E.prototype=y.prototype,f.aa=y.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(M,ie,he){for(var Ve=Array(arguments.length-2),An=2;An<arguments.length;An++)Ve[An-2]=arguments[An];return y.prototype[ie].apply(M,Ve)}}function I(f){const y=f.length;if(0<y){const E=Array(y);for(let M=0;M<y;M++)E[M]=f[M];return E}return[]}function S(f,y){for(let E=1;E<arguments.length;E++){const M=arguments[E];if(l(M)){const ie=f.length||0,he=M.length||0;f.length=ie+he;for(let Ve=0;Ve<he;Ve++)f[ie+Ve]=M[Ve]}else f.push(M)}}function O(f){return/^[\s\xa0]*$/.test(f)}function q(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function te(f){return te[" "](f),f}te[" "]=function(){};var ye=!(-1==q().indexOf("Gecko")||-1!=q().toLowerCase().indexOf("webkit")&&-1==q().indexOf("Edge")||-1!=q().indexOf("Trident")||-1!=q().indexOf("MSIE")||-1!=q().indexOf("Edge"));function Pe(f,y,E){for(const M in f)y.call(E,f[M],M,f)}function R(f){const y={};for(const E in f)y[E]=f[E];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(f,y){let E,M;for(let ie=1;ie<arguments.length;ie++){for(E in M=arguments[ie],M)f[E]=M[E];for(let he=0;he<N.length;he++)E=N[he],Object.prototype.hasOwnProperty.call(M,E)&&(f[E]=M[E])}}function F(f){var y=1;f=f.split(":");const E=[];for(;0<y&&f.length;)E.push(f.shift()),y--;return f.length&&E.push(f.join(":")),E}function $(f){a.setTimeout(()=>{throw f},0)}function L(){var f=st;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var oo=new class j{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new Ze,f=>f.reset());class Ze{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,tt=!1,st=new class Lt{constructor(){this.h=this.g=null}add(y,E){const M=oo.get();M.set(y,E),this.h?this.h.next=M:this.g=M,this.h=M}},Dn=()=>{const f=a.Promise.resolve(void 0);Xe=()=>{f.then(Jn)}};var Jn=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(E){$(E)}var y=oo;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}tt=!1};function Nn(){this.s=this.s,this.C=this.C}function Sn(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}Nn.prototype.s=!1,Nn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Nn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Sn.prototype.h=function(){this.defaultPrevented=!0};var pn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return f}();function Mo(f,y){if(Sn.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,M=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(ye){e:{try{te(y.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(y=null)}}else"mouseover"==E?y=f.fromElement:"mouseout"==E&&(y=f.toElement);this.relatedTarget=y,M?(this.clientX=void 0!==M.clientX?M.clientX:M.pageX,this.clientY=void 0!==M.clientY?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:U_[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Mo.aa.h.call(this)}}C(Mo,Sn);var U_={2:"touch",3:"pen",4:"mouse"};Mo.prototype.h=function(){Mo.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var cr="closure_listenable_"+(1e6*Math.random()|0),Ya=0;function vs(f,y,E,M,ie){this.listener=f,this.proxy=null,this.src=y,this.type=E,this.capture=!!M,this.ha=ie,this.key=++Ya,this.da=this.fa=!1}function Qa(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function vc(f){this.src=f,this.g={},this.h=0}function Tk(f,y){var E=y.type;if(E in f.g){var he,M=f.g[E],ie=Array.prototype.indexOf.call(M,y,void 0);(he=0<=ie)&&Array.prototype.splice.call(M,ie,1),he&&(Qa(y),0==f.g[E].length&&(delete f.g[E],f.h--))}}function Ik(f,y,E,M){for(var ie=0;ie<f.length;++ie){var he=f[ie];if(!he.da&&he.listener==y&&he.capture==!!E&&he.ha==M)return ie}return-1}vc.prototype.add=function(f,y,E,M,ie){var he=f.toString();(f=this.g[he])||(f=this.g[he]=[],this.h++);var Ve=Ik(f,y,M,ie);return-1<Ve?(y=f[Ve],E||(y.fa=!1)):((y=new vs(y,this.src,he,!!M,ie)).fa=E,f.push(y)),y};var Sk="closure_lm_"+(1e6*Math.random()|0),Ak={};function pz(f,y,E,M,ie){if(M&&M.once)return mz(f,y,E,M,ie);if(Array.isArray(y)){for(var he=0;he<y.length;he++)pz(f,y[he],E,M,ie);return null}return E=Pk(E),f&&f[cr]?f.K(y,E,c(M)?!!M.capture:!!M,ie):gz(f,y,E,!1,M,ie)}function gz(f,y,E,M,ie,he){if(!y)throw Error("Invalid event type");var Ve=c(ie)?!!ie.capture:!!ie,An=Rk(f);if(An||(f[Sk]=An=new vc(f)),(E=An.add(y,E,M,Ve,he)).proxy)return E;if(M=function Ffe(){const y=Lfe;return function f(E){return y.call(f.src,f.listener,E)}}(),E.proxy=M,M.src=f,M.listener=E,f.addEventListener)pn||(ie=Ve),void 0===ie&&(ie=!1),f.addEventListener(y.toString(),M,ie);else if(f.attachEvent)f.attachEvent(yz(y.toString()),M);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(M)}return E}function mz(f,y,E,M,ie){if(Array.isArray(y)){for(var he=0;he<y.length;he++)mz(f,y[he],E,M,ie);return null}return E=Pk(E),f&&f[cr]?f.L(y,E,c(M)?!!M.capture:!!M,ie):gz(f,y,E,!0,M,ie)}function _z(f,y,E,M,ie){if(Array.isArray(y))for(var he=0;he<y.length;he++)_z(f,y[he],E,M,ie);else M=c(M)?!!M.capture:!!M,E=Pk(E),f&&f[cr]?(f=f.i,(y=String(y).toString())in f.g&&-1<(E=Ik(he=f.g[y],E,M,ie))&&(Qa(he[E]),Array.prototype.splice.call(he,E,1),0==he.length&&(delete f.g[y],f.h--))):f&&(f=Rk(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Ik(y,E,M,ie)),(E=-1<f?y[f]:null)&&Mk(E))}function Mk(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[cr])Tk(y.i,f);else{var E=f.type,M=f.proxy;y.removeEventListener?y.removeEventListener(E,M,f.capture):y.detachEvent?y.detachEvent(yz(E),M):y.addListener&&y.removeListener&&y.removeListener(M),(E=Rk(y))?(Tk(E,f),0==E.h&&(E.src=null,y[Sk]=null)):Qa(f)}}}function yz(f){return f in Ak?Ak[f]:Ak[f]="on"+f}function Lfe(f,y){if(f.da)f=!0;else{y=new Mo(y,this);var E=f.listener,M=f.ha||f.src;f.fa&&Mk(f),f=E.call(M,y)}return f}function Rk(f){return(f=f[Sk])instanceof vc?f:null}var kk="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pk(f){return"function"==typeof f?f:(f[kk]||(f[kk]=function(y){return f.handleEvent(y)}),f[kk])}function Vi(){Nn.call(this),this.i=new vc(this),this.M=this,this.F=null}function Xi(f,y){var E,M=f.F;if(M)for(E=[];M;M=M.F)E.push(M);if(f=f.M,M=y.type||y,"string"==typeof y)y=new Sn(y,f);else if(y instanceof Sn)y.target=y.target||f;else{var ie=y;W(y=new Sn(M,f),ie)}if(ie=!0,E)for(var he=E.length-1;0<=he;he--){var Ve=y.g=E[he];ie=Pb(Ve,M,!0,y)&&ie}if(ie=Pb(Ve=y.g=f,M,!0,y)&&ie,ie=Pb(Ve,M,!1,y)&&ie,E)for(he=0;he<E.length;he++)ie=Pb(Ve=y.g=E[he],M,!1,y)&&ie}function Pb(f,y,E,M){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var ie=!0,he=0;he<y.length;++he){var Ve=y[he];if(Ve&&!Ve.da&&Ve.capture==E){var An=Ve.listener,mi=Ve.ha||Ve.src;Ve.fa&&Tk(f.i,Ve),ie=!1!==An.call(mi,M)&&ie}}return ie&&!M.defaultPrevented}function vz(f,y,E){if("function"==typeof f)E&&(f=_(f,E));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function wz(f){f.g=vz(()=>{f.g=null,f.i&&(f.i=!1,wz(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}C(Vi,Nn),Vi.prototype[cr]=!0,Vi.prototype.removeEventListener=function(f,y,E,M){_z(this,f,y,E,M)},Vi.prototype.N=function(){if(Vi.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var E=f.g[y],M=0;M<E.length;M++)Qa(E[M]);delete f.g[y],f.h--}}this.F=null},Vi.prototype.K=function(f,y,E,M){return this.i.add(String(f),y,!1,E,M)},Vi.prototype.L=function(f,y,E,M){return this.i.add(String(f),y,!0,E,M)};class Vfe extends Nn{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:wz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function j_(f){Nn.call(this),this.h=f,this.g={}}C(j_,Nn);var Ez=[];function Cz(f){Pe(f.g,function(y,E){this.g.hasOwnProperty(E)&&Mk(y)},f),f.g={}}j_.prototype.N=function(){j_.aa.N.call(this),Cz(this)},j_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xk=a.JSON.stringify,Bfe=a.JSON.parse,Ufe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ok(){}function Dz(){}Ok.prototype.h=null;var H_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nk(){Sn.call(this,"d")}function Fk(){Sn.call(this,"c")}C(Nk,Sn),C(Fk,Sn);var ad={},Tz=null;function xb(){return Tz=Tz||new Vi}function Iz(f){Sn.call(this,ad.La,f)}function $_(f){const y=xb();Xi(y,new Iz(y))}function Sz(f,y){Sn.call(this,ad.STAT_EVENT,f),this.stat=y}function Ji(f){const y=xb();Xi(y,new Sz(y,f))}function Az(f,y){Sn.call(this,ad.Ma,f),this.size=y}function z_(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function W_(){this.g=!0}function Qf(f,y,E,M){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function zfe(f,y){if(!f.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E)for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var M=E[f];if(!(2>M.length)){var ie=M[1];if(Array.isArray(ie)&&!(1>ie.length)){var he=ie[0];if("noop"!=he&&"stop"!=he&&"close"!=he)for(var Ve=1;Ve<ie.length;Ve++)ie[Ve]=""}}}return xk(E)}catch{return y}}(f,E)+(M?" "+M:"")})}ad.La="serverreachability",C(Iz,Sn),ad.STAT_EVENT="statevent",C(Sz,Sn),ad.Ma="timingevent",C(Az,Sn),W_.prototype.xa=function(){this.g=!1},W_.prototype.info=function(){};var Lk,Ob={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Nb(){}function wc(f,y,E,M){this.j=f,this.i=y,this.l=E,this.R=M||1,this.U=new j_(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rz}function Rz(){this.i=null,this.g="",this.h=!1}C(Nb,Ok),Nb.prototype.g=function(){return new XMLHttpRequest},Nb.prototype.i=function(){return{}},Lk=new Nb;var kz={},Vk={};function Bk(f,y,E){f.L=1,f.v=Bb(Xa(y)),f.m=E,f.P=!0,Pz(f,null)}function Pz(f,y){f.F=Date.now(),Fb(f),f.A=Xa(f.v);var E=f.A,M=f.R;Array.isArray(M)||(M=[String(M)]),qz(E.i,"t",M),f.C=0,E=f.j.J,f.h=new Rz,f.g=u6(f.j,E?y:null,!f.m),0<f.O&&(f.M=new Vfe(_(f.Y,f,f.g),f.O)),y=f.U,E=f.g,M=f.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Ez[0]=ie.toString()),ie=Ez);for(var he=0;he<ie.length;he++){var Ve=pz(E,ie[he],M||y.handleEvent,!1,y.h||y);if(!Ve)break;y.g[Ve.key]=Ve}y=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),$_(),function jfe(f,y,E,M,ie,he){f.info(function(){if(f.g)if(he)for(var Ve="",An=he.split("&"),mi=0;mi<An.length;mi++){var tn=An[mi].split("=");if(1<tn.length){var Bi=tn[0];tn=tn[1];var Ui=Bi.split("_");Ve=2<=Ui.length&&"type"==Ui[1]?Ve+(Bi+"=")+tn+"&":Ve+(Bi+"=redacted&")}}else Ve=null;else Ve=he;return"XMLHTTP REQ ("+M+") [attempt "+ie+"]: "+y+"\n"+E+"\n"+Ve})}(f.i,f.u,f.A,f.l,f.R,f.m)}function xz(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function Wfe(f,y){var E=f.C,M=y.indexOf("\n",E);return-1==M?Vk:(E=Number(y.substring(E,M)),isNaN(E)?kz:(M+=1)+E>y.length?Vk:(y=y.slice(M,M+E),f.C=M+E,y))}function Fb(f){f.S=Date.now()+f.I,Oz(f,f.I)}function Oz(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=z_(_(f.ba,f),y)}function Uk(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function q_(f){0==f.j.G||f.J||o6(f.j,f)}function ld(f){Uk(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,Cz(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function jk(f,y){try{var E=f.j;if(0!=E.G&&(E.g==f||Hk(E.h,f)))if(!f.K&&Hk(E.h,f)&&3==E.G){try{var M=E.Da.g.parse(y)}catch{M=null}if(Array.isArray(M)&&3==M.length){var ie=M;if(0==ie[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<f.F))break e;zb(E),Hb(E)}qk(E),Ji(18)}}else E.za=ie[1],0<E.za-E.T&&37500>ie[2]&&E.F&&0==E.v&&!E.C&&(E.C=z_(_(E.Za,E),6e3));if(1>=Lz(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ud(E,11)}else if((f.K||E.g==f)&&zb(E),!O(y))for(ie=E.Da.g.parse(y),y=0;y<ie.length;y++){let tn=ie[y];if(E.T=tn[0],tn=tn[1],2==E.G)if("c"==tn[0]){E.K=tn[1],E.ia=tn[2];const Bi=tn[3];null!=Bi&&(E.la=Bi,E.j.info("VER="+E.la));const Ui=tn[4];null!=Ui&&(E.Aa=Ui,E.j.info("SVER="+E.Aa));const ep=tn[5];null!=ep&&"number"==typeof ep&&0<ep&&(E.L=M=1.5*ep,E.j.info("backChannelRequestTimeoutMs_="+M)),M=E;const Ro=f.g;if(Ro){const qb=Ro.g?Ro.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qb){var he=M.h;he.g||-1==qb.indexOf("spdy")&&-1==qb.indexOf("quic")&&-1==qb.indexOf("h2")||(he.j=he.l,he.g=new Set,he.h&&($k(he,he.h),he.h=null))}if(M.D){const Zk=Ro.g?Ro.g.getResponseHeader("X-HTTP-Session-Id"):null;Zk&&(M.ya=Zk,Wn(M.I,M.D,Zk))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ve=f;if((M=E).qa=c6(M,M.J?M.ia:null,M.W),Ve.K){Vz(M.h,Ve);var An=Ve,mi=M.L;mi&&(An.I=mi),An.B&&(Uk(An),Fb(An)),M.g=Ve}else i6(M);0<E.i.length&&$b(E)}else"stop"!=tn[0]&&"close"!=tn[0]||ud(E,7);else 3==E.G&&("stop"==tn[0]||"close"==tn[0]?"stop"==tn[0]?ud(E,7):Wk(E):"noop"!=tn[0]&&E.l&&E.l.ta(tn),E.v=0)}$_()}catch{}}function Nz(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fz(f){return!!f.h||!!f.g&&f.g.size>=f.j}function Lz(f){return f.h?1:f.g?f.g.size:0}function Hk(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function $k(f,y){f.g?f.g.add(y):f.h=y}function Vz(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function Bz(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const E of f.g.values())y=y.concat(E.D);return y}return I(f.i)}function Uz(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(l(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var E=function Zfe(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||"string"==typeof f){var y=[];f=f.length;for(var E=0;E<f;E++)y.push(E);return y}y=[],E=0;for(const M in f)y[E++]=M;return y}}}(f),M=function Gfe(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(l(f)){for(var y=[],E=f.length,M=0;M<E;M++)y.push(f[M]);return y}for(M in y=[],E=0,f)y[E++]=f[M];return y}(f),ie=M.length,he=0;he<ie;he++)y.call(void 0,M[he],E&&E[he],f)}wc.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==Ja(f)?y.j():this.Y(f)},wc.prototype.Y=function(f){try{if(f==this.g)e:{const Ui=Ja(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>Ui)&&(3!=Ui||this.g&&(this.h.h||this.g.oa()||Jz(this.g)))){this.J||4!=Ui||7==y||$_(),Uk(this);var E=this.g.Z();this.X=E;t:if(xz(this)){var M=Jz(this.g);f="";var ie=M.length,he=4==Ja(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ld(this),q_(this);var Ve="";break t}this.h.i=new a.TextDecoder}for(y=0;y<ie;y++)this.h.h=!0,f+=this.h.i.decode(M[y],{stream:!(he&&y==ie-1)});M.length=0,this.h.g+=f,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=200==E,function Hfe(f,y,E,M,ie,he,Ve){f.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+ie+"]: "+y+"\n"+E+"\n"+he+" "+Ve})}(this.i,this.u,this.A,this.l,this.R,Ui,E),this.o){if(this.T&&!this.K){t:{if(this.g){var An,mi=this.g;if((An=mi.g?mi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(An)){var tn=An;break t}}tn=null}if(!(E=tn)){this.o=!1,this.s=3,Ji(12),ld(this),q_(this);break e}Qf(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jk(this,E)}if(this.P){let Ro;for(E=!0;!this.J&&this.C<Ve.length;){if(Ro=Wfe(this,Ve),Ro==Vk){4==Ui&&(this.s=4,Ji(14),E=!1),Qf(this.i,this.l,null,"[Incomplete Response]");break}if(Ro==kz){this.s=4,Ji(15),Qf(this.i,this.l,Ve,"[Invalid Chunk]"),E=!1;break}Qf(this.i,this.l,Ro,null),jk(this,Ro)}if(xz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ui||0!=Ve.length||this.h.h||(this.s=1,Ji(16),E=!1),this.o=this.o&&E,E){if(0<Ve.length&&!this.W){this.W=!0;var Bi=this.j;Bi.g==this&&Bi.ba&&!Bi.M&&(Bi.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),Gk(Bi),Bi.M=!0,Ji(11))}}else Qf(this.i,this.l,Ve,"[Invalid Chunked Response]"),ld(this),q_(this)}else Qf(this.i,this.l,Ve,null),jk(this,Ve);4==Ui&&ld(this),this.o&&!this.J&&(4==Ui?o6(this.j,this):(this.o=!1,Fb(this)))}else(function lpe(f){const y={};f=(f.g&&2<=Ja(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let M=0;M<f.length;M++){if(O(f[M]))continue;var E=F(f[M]);const ie=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const he=y[ie]||[];y[ie]=he,he.push(E)}!function z(f,y){for(const E in f)y.call(void 0,f[E],E,f)}(y,function(M){return M.join(", ")})})(this.g),400==E&&0<Ve.indexOf("Unknown SID")?(this.s=3,Ji(12)):(this.s=0,Ji(13)),ld(this),q_(this)}}}catch{}},wc.prototype.cancel=function(){this.J=!0,ld(this)},wc.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function $fe(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&($_(),Ji(17)),ld(this),this.s=2,q_(this)):Oz(this,this.S-f)},Nz.prototype.cancel=function(){if(this.i=Bz(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var jz=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof cd){this.h=f.h,Lb(this,f.j),this.o=f.o,this.g=f.g,Vb(this,f.s),this.l=f.l;var y=f.i,E=new K_;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Hz(this,E),this.m=f.m}else f&&(y=String(f).match(jz))?(this.h=!1,Lb(this,y[1]||"",!0),this.o=G_(y[2]||""),this.g=G_(y[3]||"",!0),Vb(this,y[4]),this.l=G_(y[5]||"",!0),Hz(this,y[6]||"",!0),this.m=G_(y[7]||"")):(this.h=!1,this.i=new K_(null,this.h))}function Xa(f){return new cd(f)}function Lb(f,y,E){f.j=E?G_(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Vb(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function Hz(f,y,E){y instanceof K_?(f.i=y,function tpe(f,y){y&&!f.j&&(Ec(f),f.i=null,f.g.forEach(function(E,M){var ie=M.toLowerCase();M!=ie&&(zz(this,M),qz(this,ie,E))},f)),f.j=y}(f.i,f.h)):(E||(y=Z_(y,Jfe)),f.i=new K_(y,f.h))}function Wn(f,y,E){f.i.set(y,E)}function Bb(f){return Wn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function G_(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Z_(f,y,E){return"string"==typeof f?(f=encodeURI(f).replace(y,Yfe),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Yfe(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}cd.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Z_(y,$z,!0),":");var E=this.g;return(E||"file"==y)&&(f.push("//"),(y=this.o)&&f.push(Z_(y,$z,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&f.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&f.push("/"),f.push(Z_(E,"/"==E.charAt(0)?Xfe:Qfe,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Z_(E,epe)),f.join("")};var f,$z=/[#\/\?@]/g,Qfe=/[#\?:]/g,Xfe=/[#\?]/g,Jfe=/[#\?@]/g,epe=/#/g;function K_(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Ec(f){f.g||(f.g=new Map,f.h=0,f.i&&function Kfe(f,y){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var M=f[E].indexOf("="),ie=null;if(0<=M){var he=f[E].substring(0,M);ie=f[E].substring(M+1)}else he=f[E];y(he,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}(f.i,function(y,E){f.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}function zz(f,y){Ec(f),y=Xf(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Wz(f,y){return Ec(f),y=Xf(f,y),f.g.has(y)}function qz(f,y,E){zz(f,y),0<E.length&&(f.i=null,f.g.set(Xf(f,y),I(E)),f.h+=E.length)}function Xf(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function Cc(f,y,E,M,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),M(E)}catch{}}function ipe(){this.g=new Ufe}function spe(f,y,E){const M=E||"";try{Uz(f,function(ie,he){let Ve=ie;c(ie)&&(Ve=xk(ie)),y.push(M+he+"="+encodeURIComponent(Ve))})}catch(ie){throw y.push(M+"type="+encodeURIComponent("_badmap")),ie}}function Y_(f){this.l=f.Ub||null,this.j=f.eb||!1}function Ub(f,y){Vi.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Gz(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function Q_(f){f.readyState=4,f.l=null,f.j=null,f.v=null,X_(f)}function X_(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function Zz(f){let y="";return Pe(f,function(E,M){y+=M,y+=":",y+=E,y+="\r\n"}),y}function zk(f,y,E){e:{for(M in E){var M=!1;break e}M=!0}M||(E=Zz(E),"string"==typeof f?null!=E&&encodeURIComponent(String(E)):Wn(f,y,E))}function ur(f){Vi.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=K_.prototype).add=function(f,y){Ec(this),this.i=null,f=Xf(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(y),this.h+=1,this},n.forEach=function(f,y){Ec(this),this.g.forEach(function(E,M){E.forEach(function(ie){f.call(y,ie,M,this)},this)},this)},n.na=function(){Ec(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let M=0;M<y.length;M++){const ie=f[M];for(let he=0;he<ie.length;he++)E.push(y[M])}return E},n.V=function(f){Ec(this);let y=[];if("string"==typeof f)Wz(this,f)&&(y=y.concat(this.g.get(Xf(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)y=y.concat(f[E])}return y},n.set=function(f,y){return Ec(this),this.i=null,Wz(this,f=Xf(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var M=y[E];const he=encodeURIComponent(String(M)),Ve=this.V(M);for(M=0;M<Ve.length;M++){var ie=he;""!==Ve[M]&&(ie+="="+encodeURIComponent(String(Ve[M]))),f.push(ie)}}return this.i=f.join("&")},C(Y_,Ok),Y_.prototype.g=function(){return new Ub(this.l,this.j)},Y_.prototype.i=(f={},function(){return f}),C(Ub,Vi),(n=Ub.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,X_(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Q_(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,X_(this)),this.g&&(this.readyState=3,X_(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gz(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Q_(this):X_(this),3==this.readyState&&Gz(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Q_(this))},n.Qa=function(f){this.g&&(this.response=f,Q_(this))},n.ga=function(){this.g&&Q_(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var E=y.next();!E.done;)f.push((E=E.value)[0]+": "+E[1]),E=y.next();return f.join("\r\n")},Object.defineProperty(Ub.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),C(ur,Vi);var ope=/^https?$/i,ape=["POST","PUT"];function Kz(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Yz(f),jb(f)}function Yz(f){f.A||(f.A=!0,Xi(f,"complete"),Xi(f,"error"))}function Qz(f){if(f.h&&typeof o<"u"&&(!f.v[1]||4!=Ja(f)||2!=f.Z()))if(f.u&&4==Ja(f))vz(f.Ea,0,f);else if(Xi(f,"readystatechange"),4==Ja(f)){f.h=!1;try{const Ve=f.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var M;if(M=0===Ve){var ie=String(f.D).match(jz)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),M=!ope.test(ie?ie.toLowerCase():"")}E=M}if(E)Xi(f,"complete"),Xi(f,"success");else{f.m=6;try{var he=2<Ja(f)?f.g.statusText:""}catch{he=""}f.l=he+" ["+f.Z()+"]",Yz(f)}}finally{jb(f)}}}function jb(f,y){if(f.g){Xz(f);const E=f.g,M=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Xi(f,"ready");try{E.onreadystatechange=M}catch{}}}function Xz(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function Ja(f){return f.g?f.g.readyState:0}function Jz(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function J_(f,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||y}function e6(f){this.Aa=0,this.i=[],this.j=new W_,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=J_("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=J_("baseRetryDelayMs",5e3,f),this.cb=J_("retryDelaySeedMs",1e4,f),this.Wa=J_("forwardChannelMaxRetries",2,f),this.wa=J_("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Nz(f&&f.concurrentRequestLimit),this.Da=new ipe,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wk(f){if(t6(f),3==f.G){var y=f.U++,E=Xa(f.I);if(Wn(E,"SID",f.K),Wn(E,"RID",y),Wn(E,"TYPE","terminate"),ey(f,E),(y=new wc(f,f.j,y)).L=2,y.v=Bb(Xa(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=y.v,E=!0),E||(y.g=u6(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Fb(y)}l6(f)}function Hb(f){f.g&&(Gk(f),f.g.cancel(),f.g=null)}function t6(f){Hb(f),f.u&&(a.clearTimeout(f.u),f.u=null),zb(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function $b(f){if(!Fz(f.h)&&!f.s){f.s=!0;var y=f.Ga;Xe||Dn(),tt||(Xe(),tt=!0),st.add(y,f),f.B=0}}function n6(f,y){var E;E=y?y.l:f.U++;const M=Xa(f.I);Wn(M,"SID",f.K),Wn(M,"RID",E),Wn(M,"AID",f.T),ey(f,M),f.m&&f.o&&zk(M,f.m,f.o),E=new wc(f,f.j,E,f.B+1),null===f.m&&(E.H=f.o),y&&(f.i=y.D.concat(f.i)),y=r6(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),$k(f.h,E),Bk(E,M,y)}function ey(f,y){f.H&&Pe(f.H,function(E,M){Wn(y,M,E)}),f.l&&Uz({},function(E,M){Wn(y,M,E)})}function r6(f,y,E){E=Math.min(f.i.length,E);var M=f.l?_(f.l.Na,f.l,f):null;e:{var ie=f.i;let he=-1;for(;;){const Ve=["count="+E];-1==he?0<E?(he=ie[0].g,Ve.push("ofs="+he)):he=0:Ve.push("ofs="+he);let An=!0;for(let mi=0;mi<E;mi++){let tn=ie[mi].g;const Bi=ie[mi].map;if(tn-=he,0>tn)he=Math.max(0,ie[mi].g-100),An=!1;else try{spe(Bi,Ve,"req"+tn+"_")}catch{M&&M(Bi)}}if(An){M=Ve.join("&");break e}}}return f=f.i.splice(0,E),y.D=f,M}function i6(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Xe||Dn(),tt||(Xe(),tt=!0),st.add(y,f),f.v=0}}function qk(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=z_(_(f.Fa,f),a6(f,f.v)),f.v++,0))}function Gk(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function s6(f){f.g=new wc(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=Xa(f.qa);Wn(y,"RID","rpc"),Wn(y,"SID",f.K),Wn(y,"AID",f.T),Wn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Wn(y,"TO",f.ja),Wn(y,"TYPE","xmlhttp"),ey(f,y),f.m&&f.o&&zk(y,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Bb(Xa(y)),E.m=null,E.P=!0,Pz(E,f)}function zb(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function o6(f,y){var E=null;if(f.g==y){zb(f),Gk(f),f.g=null;var M=2}else{if(!Hk(f.h,y))return;E=y.D,Vz(f.h,y),M=1}if(0!=f.G)if(y.o)if(1==M){E=y.m?y.m.length:0,y=Date.now()-y.F;var ie=f.B;Xi(M=xb(),new Az(M,E)),$b(f)}else i6(f);else if(3==(ie=y.s)||0==ie&&0<y.X||!(1==M&&function cpe(f,y){return!(Lz(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=z_(_(f.Ga,f,y),a6(f,f.B)),f.B++,0)))}(f,y)||2==M&&qk(f)))switch(E&&0<E.length&&(y=f.h,y.i=y.i.concat(E)),ie){case 1:ud(f,5);break;case 4:ud(f,10);break;case 3:ud(f,6);break;default:ud(f,2)}}function a6(f,y){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*y}function ud(f,y){if(f.j.info("Error code "+y),2==y){var E=_(f.fb,f),M=f.Xa;const ie=!M;M=new cd(M||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Lb(M,"https"),Bb(M),ie?function npe(f,y){const E=new W_;if(a.Image){const M=new Image;M.onload=v(Cc,E,"TestLoadImage: loaded",!0,y,M),M.onerror=v(Cc,E,"TestLoadImage: error",!1,y,M),M.onabort=v(Cc,E,"TestLoadImage: abort",!1,y,M),M.ontimeout=v(Cc,E,"TestLoadImage: timeout",!1,y,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=f}else y(!1)}(M.toString(),E):function rpe(f,y){new W_;const M=new AbortController,ie=setTimeout(()=>{M.abort(),Cc(0,0,!1,y)},1e4);fetch(f,{signal:M.signal}).then(he=>{clearTimeout(ie),Cc(0,0,!!he.ok,y)}).catch(()=>{clearTimeout(ie),Cc(0,0,!1,y)})}(M.toString(),E)}else Ji(2);f.G=0,f.l&&f.l.sa(y),l6(f),t6(f)}function l6(f){if(f.G=0,f.ka=[],f.l){const y=Bz(f.h);(0!=y.length||0!=f.i.length)&&(S(f.ka,y),S(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function c6(f,y,E){var M=E instanceof cd?Xa(E):new cd(E);if(""!=M.g)y&&(M.g=y+"."+M.g),Vb(M,M.s);else{var ie=a.location;M=ie.protocol,y=y?y+"."+ie.hostname:ie.hostname,ie=+ie.port;var he=new cd(null);M&&Lb(he,M),y&&(he.g=y),ie&&Vb(he,ie),E&&(he.l=E),M=he}return y=f.ya,(E=f.D)&&y&&Wn(M,E,y),Wn(M,"VER",f.la),ey(f,M),M}function u6(f,y,E){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new ur(f.Ca&&!f.pa?new Y_({eb:E}):f.pa)).Ha(f.J),y}function d6(){}function Wb(){}function Bs(f,y){Vi.call(this),this.g=new e6(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!O(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new Jf(this)}function h6(f){Nk.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const E in y){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function f6(){Fk.call(this),this.status=1}function Jf(f){this.g=f}(n=ur.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,E,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lk.g(),this.v=function bz(f){return f.h||(f.h=f.i())}(this.o?this.o:Lk),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(he){return void Kz(this,he)}if(f=E||"",E=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var ie in M)E.set(ie,M[ie]);else{if("function"!=typeof M.keys||"function"!=typeof M.get)throw Error("Unknown input type for opt_headers: "+String(M));for(const he of M.keys())E.set(he,M.get(he))}M=Array.from(E.keys()).find(he=>"content-type"==he.toLowerCase()),ie=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ape,y,void 0))||M||ie||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Ve]of E)this.g.setRequestHeader(he,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xz(this),this.u=!0,this.g.send(f),this.u=!1}catch(he){Kz(this,he)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Xi(this,"complete"),Xi(this,"abort"),jb(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jb(this,!0)),ur.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qz(this):this.bb())},n.bb=function(){Qz(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ja(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),Bfe(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=e6.prototype).la=8,n.G=1,n.connect=function(f,y,E,M){Ji(0),this.W=f,this.H=y||{},E&&void 0!==M&&(this.H.OSID=E,this.H.OAID=M),this.F=this.X,this.I=c6(this,null,this.W),$b(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ie=new wc(this,this.j,f);let he=this.o;if(this.S&&(he?(he=R(he),W(he,this.S)):he=this.S),null!==this.m||this.O||(ie.H=he,he=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){var M=this.i[E];if(void 0===(M="__data__"in M.map&&"string"==typeof(M=M.map.__data__)?M.length:void 0))break;if(4096<(y+=M)){y=E;break e}if(4096===y||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=r6(this,ie,y),Wn(E=Xa(this.I),"RID",f),Wn(E,"CVER",22),this.D&&Wn(E,"X-HTTP-Session-Id",this.D),ey(this,E),he&&(this.O?y="headers="+encodeURIComponent(String(Zz(he)))+"&"+y:this.m&&zk(E,this.m,he)),$k(this.h,ie),this.Ua&&Wn(E,"TYPE","init"),this.P?(Wn(E,"$req",y),Wn(E,"SID","null"),ie.T=!0,Bk(ie,E,null)):Bk(ie,E,y),this.G=2}}else 3==this.G&&(f?n6(this,f):0==this.i.length||Fz(this.h)||n6(this))},n.Fa=function(){if(this.u=null,s6(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=z_(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ji(10),Hb(this),s6(this))},n.Za=function(){null!=this.C&&(this.C=null,Hb(this),qk(this),Ji(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ji(2)):(this.j.info("Failed to ping google.com"),Ji(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=d6.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Wb.prototype.g=function(f,y){return new Bs(f,y)},C(Bs,Vi),Bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bs.prototype.close=function(){Wk(this.g)},Bs.prototype.o=function(f){var y=this.g;if("string"==typeof f){var E={};E.__data__=f,f=E}else this.u&&((E={}).__data__=xk(f),f=E);y.i.push(new class{constructor(f,y){this.g=f,this.map=y}}(y.Ya++,f)),3==y.G&&$b(y)},Bs.prototype.N=function(){this.g.l=null,delete this.j,Wk(this.g),delete this.g,Bs.aa.N.call(this)},C(h6,Nk),C(f6,Fk),C(Jf,d6),Jf.prototype.ua=function(){Xi(this.g,"a")},Jf.prototype.ta=function(f){Xi(this.g,new h6(f))},Jf.prototype.sa=function(f){Xi(this.g,new f6)},Jf.prototype.ra=function(){Xi(this.g,"b")},Wb.prototype.createWebChannel=Wb.prototype.g,Bs.prototype.send=Bs.prototype.o,Bs.prototype.open=Bs.prototype.m,Bs.prototype.close=Bs.prototype.close,r2=La.createWebChannelTransport=function(){return new Wb},n2=La.getStatEventTarget=function(){return xb()},t2=La.Event=ad,sS=La.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ob.NO_ERROR=0,Ob.TIMEOUT=8,Ob.HTTP_ERROR=6,bE=La.ErrorCode=Ob,Mz.COMPLETE="complete",e2=La.EventType=Mz,Dz.EventType=H_,H_.OPEN="a",H_.CLOSE="b",H_.ERROR="c",H_.MESSAGE="d",Vi.prototype.listen=Vi.prototype.K,gm=La.WebChannel=Dz,JV=La.FetchXmlHttpFactory=Y_,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,XV=La.XhrIo=ur}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});const s2="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let qh="10.12.1";const $l=new Qo.Yd("@firebase/firestore");function Gh(){return $l.logLevel}function Ae(n,...e){if($l.logLevel<=Qo.in.DEBUG){const t=e.map(oS);$l.debug(`Firestore (${qh}): ${n}`,...t)}}function br(n,...e){if($l.logLevel<=Qo.in.ERROR){const t=e.map(oS);$l.error(`Firestore (${qh}): ${n}`,...t)}}function ms(n,...e){if($l.logLevel<=Qo.in.WARN){const t=e.map(oS);$l.warn(`Firestore (${qh}): ${n}`,...t)}}function oS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ge(n="Unexpected state"){const e=`FIRESTORE (${qh}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function Je(n,e){n||Ge()}function Le(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends ln.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class o2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class gJ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mJ{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,pe.Z)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je("string"==typeof r.accessToken),new o2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Je(null===e||"string"==typeof e),new ri(e)}}class _J{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ri.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yJ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _J(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vJ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je("string"==typeof t.token),this.R=t.token,new a2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wJ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class l2{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=wJ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function yt(n,e){return n<e?-1:n>e?1:0}function Zh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function c2(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new et(e)}static min(){return new et(new Yn(0,0))}static max(){return new et(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mm{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ge(),void 0===r?r=e.length-t:r>e.length-t&&Ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class jt extends mm{construct(e,t,r){return new jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new jt(t)}static emptyPath(){return new jt([])}}const EJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends mm{construct(e,t,r){return new Hn(e,t,r)}static isValidIdentifier(e){return EJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Te(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Te(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Te(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Te(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(jt.fromString(e))}static fromName(e){return new Be(jt.fromString(e).popFirst(5))}static empty(){return new Be(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new jt(e.slice()))}}class Kh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function aS(n){return n.fields.find(e=>2===e.kind)}function _u(n){return n.fields.filter(e=>2!==e.kind)}Kh.UNKNOWN_ID=-1;class yu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yh(0,Ps.min())}}function u2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=et.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new Ps(i,Be.empty(),e)}function d2(n){return new Ps(n.readTime,n.key,-1)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(et.min(),Be.empty(),-1)}static max(){return new Ps(et.max(),Be.empty(),-1)}}function lS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:yt(n.largestBatchId,e.largestBatchId))}const h2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zl(n){return cS.apply(this,arguments)}function cS(){return(cS=(0,pe.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==h2)throw n;Ae("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class DE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Gr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new _m(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=uS(r.target.error);this.V.reject(new _m(e,i))}}static open(e,t,r,i){try{return new DE(t,e.transaction(i,r))}catch(s){throw new _m(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new TJ(t)}}class Xo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Xo.S((0,ln.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),vu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ln.hl)())return!1;if(Xo.C())return!0;const e=(0,ln.z$)(),t=Xo.S(e),r=0<t&&t<10,i=p2(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new _m(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Te(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Te(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new _m(e,a))},s.onupgradeneeded=o=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,pe.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=DE.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),oe.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(Ae("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function p2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class DJ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return vu(this.B.delete())}}class _m extends Te{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wl(n){return"IndexedDbTransactionError"===n.name}class TJ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vu(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),vu(this.store.add(e))}get(e){return vu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),vu(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),vu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new oe((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=s=>{const o=uS(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new DJ(a),c=t(a.primaryKey,a.value,l);if(c instanceof oe){const h=c.catch(m=>(l.done(),oe.reject(m)));r.push(h)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vu(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=uS(r.target.error);t(i)}})}let g2=!1;function uS(n){const e=Xo.S((0,ln.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return g2||(g2=!0,setTimeout(()=>{throw r},0)),r}}return n}class IJ{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Ae("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Wl(r)?Ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield zl(r)}yield t.X(6e4)}))}}class SJ{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return oe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ae("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ae("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=d2(s);lS(o,r)>0&&(r=o)}),new Ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let xs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ym(n){return null==n}function vm(n){return 0===n&&1/n==-1/0}function m2(n){return"number"==typeof n&&Number.isInteger(n)&&!vm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_2(e)),e=AJ(n.get(t),e);return _2(e)}function AJ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function _2(n){return n+"\x01\x01"}function Jo(n){const e=n.length;if(Je(e>=2),2===e)return Je("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),jt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ge(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ge()}s=o+2}return new jt(r)}const y2=["userId","batchId"];function TE(n,e){return[n,xi(e)]}function v2(n,e,t){return[n,xi(e),t]}const MJ={},RJ=["prefixPath","collectionGroup","readTime","documentId"],kJ=["prefixPath","collectionGroup","documentId"],PJ=["collectionGroup","readTime","prefixPath","documentId"],xJ=["canonicalId","targetId"],OJ=["targetId","path"],NJ=["path","targetId"],FJ=["collectionId","parent"],LJ=["indexId","uid"],VJ=["uid","sequenceNumber"],BJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UJ=["indexId","uid","orderedDocumentKey"],jJ=["userId","collectionPath","documentId"],HJ=["userId","collectionPath","largestBatchId"],$J=["userId","collectionGroup","largestBatchId"],w2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zJ=[...w2,"documentOverlays"],E2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C2=E2,b2=[...C2,"indexConfiguration","indexState","indexEntries"],WJ=b2;class dS extends f2{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ii(n,e){const t=Le(n);return Xo.F(t._e,e)}function D2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ql(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function I2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class On{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new On(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new On(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new IE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new IE(this.root,e,this.comparator,!1)}getReverseIterator(){return new IE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new IE(this.root,e,this.comparator,!0)}}class IE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??fi.RED,this.left=i??fi.EMPTY,this.right=s??fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new fi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ge();const e=this.left.check();if(e!==this.right.check())throw Ge();return e+(this.isRed()?0:1)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1,fi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge()}get value(){throw Ge()}get color(){throw Ge()}get left(){throw Ge()}get right(){throw Ge()}copy(e,t,r,i,s){return this}insert(e,t,r){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new On(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new S2(this.data.getIterator())}getIteratorFrom(e){return new S2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class S2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qh(n){return n.hasNext()?n.getNext():void 0}class _s{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new _s([])}unionWith(e){let t=new Cn(Hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class A2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new A2("Invalid base64 string: "+s):s}}(e);return new Zr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const GJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Va(n){if(Je(!!n),"string"==typeof n){let e=0;const t=GJ.exec(n);if(Je(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ba(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function SE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function AE(n){const e=n.mapValue.fields.__previous_value__;return SE(e)?AE(e):e}function wm(n){const e=Va(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class ZJ{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}const Zl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ME={nullValue:"NULL_VALUE"};function Kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?SE(n)?4:P2(n)?9007199254740991:10:Ge()}function ea(n,e){if(n===e)return!0;const t=Kl(n);if(t!==Kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wm(n).isEqual(wm(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Va(i.timestampValue),a=Va(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ba(n.bytesValue).isEqual(Ba(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return lr(i.geoPointValue.latitude)===lr(s.geoPointValue.latitude)&&lr(i.geoPointValue.longitude)===lr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lr(i.integerValue)===lr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=lr(i.doubleValue),a=lr(s.doubleValue);return o===a?vm(o)===vm(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Zh(n.arrayValue.values||[],e.arrayValue.values||[],ea);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(D2(o)!==D2(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!ea(o[l],a[l])))return!1;return!0}(n,e);default:return Ge()}var s}function Em(n,e){return void 0!==(n.values||[]).find(t=>ea(t,e))}function Yl(n,e){if(n===e)return 0;const t=Kl(n),r=Kl(e);if(t!==r)return yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=lr(s.integerValue||s.doubleValue),l=lr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return M2(n.timestampValue,e.timestampValue);case 4:return M2(wm(n),wm(e));case 5:return yt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Ba(s),l=Ba(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=yt(a[c],l[c]);if(0!==h)return h}return yt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=yt(lr(s.latitude),lr(o.latitude));return 0!==a?a:yt(lr(s.longitude),lr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Yl(a[c],l[c]);if(h)return h}return yt(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Zl.mapValue&&o===Zl.mapValue)return 0;if(s===Zl.mapValue)return 1;if(o===Zl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const _=yt(l[m],h[m]);if(0!==_)return _;const v=Yl(a[l[m]],c[h[m]]);if(0!==v)return v}return yt(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Ge()}}function M2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return yt(n,e);const t=Va(n),r=Va(e),i=yt(t.seconds,r.seconds);return 0!==i?i:yt(t.nanos,r.nanos)}function Xh(n){return hS(n)}function hS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Va(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ba(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=hS(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${hS(t.fields[o])}`;return i+"}"}(n.mapValue):Ge()}function wu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fS(n){return!!n&&"integerValue"in n}function Cm(n){return!!n&&"arrayValue"in n}function R2(n){return!!n&&"nullValue"in n}function k2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kE(n){return!!n&&"mapValue"in n}function bm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ql(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function P2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function KJ(n){return"nullValue"in n?ME:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wu(Gl.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ge()}function YJ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wu(Gl.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Zl:Ge()}function x2(n,e){const t=Yl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function O2(n,e){const t=Yl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bm(t)}setAll(e){let t=Hn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=bm(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());kE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];kE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ql(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new pi(bm(this.value))}}function N2(n){const e=[];return ql(n.fields,(t,r)=>{const i=new Hn([t]);if(kE(r)){const s=N2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new _s(e)}class $n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $n(e,0,et.min(),et.min(),et.min(),pi.empty(),0)}static newFoundDocument(e,t,r,i){return new $n(e,1,t,et.min(),r,i,0)}static newNoDocument(e,t){return new $n(e,2,t,et.min(),et.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,et.min(),et.min(),pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ql{constructor(e,t){this.position=e,this.inclusive=t}}function F2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Be.comparator(Be.fromName(o.referenceValue),t.key):Yl(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function L2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ea(n.position[t],e.position[t]))return!1;return!0}class Dm{constructor(e,t="asc"){this.field=e,this.dir=t}}function QJ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class V2{}class Ht extends V2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new XJ(e,t,r):"array-contains"===t?new tee(e,r):"in"===t?new z2(e,r):"not-in"===t?new nee(e,r):"array-contains-any"===t?new ree(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new JJ(e,r):new eee(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yl(t,this.value)):null!==t&&Kl(this.value)===Kl(t)&&this.matchesComparison(Yl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends V2{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fn(e,t)}matches(e){return Jh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jh(n){return"and"===n.op}function pS(n){return"or"===n.op}function gS(n){return B2(n)&&Jh(n)}function B2(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function mS(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+Xh(n.value);if(gS(n))return n.filters.map(e=>mS(e)).join(",");{const e=n.filters.map(t=>mS(t)).join(",");return`${n.op}(${e})`}}function U2(n,e){return n instanceof Ht?(r=n,(i=e)instanceof Ht&&r.op===i.op&&r.field.isEqual(i.field)&&ea(r.value,i.value)):n instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&U2(o,i.filters[a]),!0)}(n,e):void Ge();var r,i}function j2(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function H2(n){return n instanceof Ht?`${(t=n).field.canonicalString()} ${t.op} ${Xh(t.value)}`:n instanceof fn?function(t){return t.op.toString()+" {"+t.getFilters().map(H2).join(" ,")+"}"}(n):"Filter";var t}class XJ extends Ht{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class JJ extends Ht{constructor(e,t){super(e,"in",t),this.keys=$2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eee extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=$2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class tee extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cm(t)&&Em(t.arrayValue,this.value)}}class z2 extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Em(this.value.arrayValue,t)}}class nee extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(Em(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Em(this.value.arrayValue,t)}}class ree extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Em(this.value.arrayValue,r))}}class iee{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function _S(n,e=null,t=[],r=[],i=null,s=null,o=null){return new iee(n,e,t,r,i,s,o)}function Eu(n){const e=Le(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ym(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xh(r)).join(",")),e.ue=t}return e.ue}function Tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QJ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!U2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!L2(n.startAt,e.startAt)&&L2(n.endAt,e.endAt)}function PE(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function xE(n,e){return n.filters.filter(t=>t instanceof Ht&&t.field.isEqual(e))}function W2(n,e,t){let r=ME,i=!0;for(const s of xE(n,e)){let o=ME,a=!0;switch(s.op){case"<":case"<=":o=KJ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ME}x2({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];x2({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function q2(n,e,t){let r=Zl,i=!0;for(const s of xE(n,e)){let o=Zl,a=!0;switch(s.op){case">=":case">":o=YJ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zl}O2({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];O2({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Ua{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function G2(n,e,t,r,i,s,o,a){return new Ua(n,e,t,r,i,s,o,a)}function ef(n){return new Ua(n)}function Z2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function yS(n){return null!==n.collectionGroup}function tf(n){const e=Le(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Cn(Hn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Dm(s,r))}),t.has(Hn.keyField().canonicalString())||e.ce.push(new Dm(Hn.keyField(),r))}return e.ce}function Oi(n){const e=Le(n);return e.le||(e.le=function Y2(n,e){if("F"===n.limitType)return _S(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Dm(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Ql(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ql(n.startAt.position,n.startAt.inclusive):null;return _S(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,tf(n))),e.le}function vS(n,e){const t=n.filters.concat([e]);return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function OE(n,e,t){return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Im(n,e){return Tm(Oi(n),Oi(e))&&n.limitType===e.limitType}function Q2(n){return`${Eu(Oi(n))}|lt:${n.limitType}`}function nf(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>H2(i)).join(", ")}]`),ym(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xh(i)).join(",")),`Target(${r})`}(Oi(n))}; limitType=${n.limitType})`}function Sm(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of tf(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=F2(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,tf(r),i)||r.endAt&&!function(o,a,l){const c=F2(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,tf(r),i)));var r,i}function X2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J2(n){return(e,t)=>{let r=!1;for(const i of tf(n)){const s=see(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function see(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Yl(l,c):Ge()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ge()}}class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ql(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return I2(this.inner)}size(){return this.innerSize}}const oee=new On(Be.comparator);function ys(){return oee}const e3=new On(Be.comparator);function Am(...n){let e=e3;for(const t of n)e=e.insert(t.key,t);return e}function t3(n){let e=e3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ta(){return Mm()}function n3(){return Mm()}function Mm(){return new ja(n=>n.toString(),(n,e)=>n.isEqual(e))}const aee=new On(Be.comparator),lee=new Cn(Be.comparator);function It(...n){let e=lee;for(const t of n)e=e.add(t);return e}const cee=new Cn(yt);function wS(){return cee}function r3(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vm(e)?"-0":e}}function s3(n){return{integerValue:""+n}}function o3(n,e){return m2(e)?s3(e):r3(n,e)}class NE{constructor(){this._=void 0}}function uee(n,e,t){return n instanceof rf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&SE(s)&&(s=AE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Cu?l3(n,e):n instanceof bu?c3(n,e):function(i,s){const o=a3(i,s),a=u3(o)+u3(i.Pe);return fS(o)&&fS(i.Pe)?s3(a):r3(i.serializer,a)}(n,e)}function dee(n,e,t){return n instanceof Cu?l3(n,e):n instanceof bu?c3(n,e):t}function a3(n,e){return n instanceof sf?fS(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class rf extends NE{}class Cu extends NE{constructor(e){super(),this.elements=e}}function l3(n,e){const t=d3(e);for(const r of n.elements)t.some(i=>ea(i,r))||t.push(r);return{arrayValue:{values:t}}}class bu extends NE{constructor(e){super(),this.elements=e}}function c3(n,e){let t=d3(e);for(const r of n.elements)t=t.filter(i=>!ea(i,r));return{arrayValue:{values:t}}}class sf extends NE{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function u3(n){return lr(n.integerValue||n.doubleValue)}function d3(n){return Cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Rm{constructor(e,t){this.field=e,this.transform=t}}class fee{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function FE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class LE{}function h3(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new lf(n.key,Qn.none()):new af(n.key,n.data,Qn.none());{const t=n.data,r=pi.empty();let i=new Cn(Hn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ha(n.key,r,new _s(i.toArray()),Qn.none())}}function pee(n,e,t){n instanceof af?function(i,s,o){const a=i.value.clone(),l=g3(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ha?function(i,s,o){if(!FE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=g3(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(p3(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function km(n,e,t,r){return n instanceof af?function(s,o,a,l){if(!FE(s.precondition,o))return a;const c=s.value.clone(),h=m3(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ha?function(s,o,a,l){if(!FE(s.precondition,o))return a;const c=m3(s.fieldTransforms,l,o),h=o.data;return h.setAll(p3(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,FE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function gee(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=a3(r.transform,i||null);null!=s&&(null===t&&(t=pi.empty()),t.set(r.field,s))}return t||null}function f3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Zh(r,i,(s,o)=>function hee(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Cu&&i instanceof Cu||r instanceof bu&&i instanceof bu?Zh(r.elements,i.elements,ea):r instanceof sf&&i instanceof sf?ea(r.Pe,i.Pe):r instanceof rf&&i instanceof rf);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class af extends LE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ha extends LE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function p3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function g3(n,e,t){const r=new Map;Je(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dee(o,a,t[i]))}return r}function m3(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,uee(s,o,e))}return r}class lf extends LE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ES extends LE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&pee(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=km(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=km(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=n3();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=h3(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),It())}isEqual(e){return this.batchId===e.batchId&&Zh(this.mutations,e.mutations,(t,r)=>f3(t,r))&&Zh(this.baseMutations,e.baseMutations,(t,r)=>f3(t,r))}}class bS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Je(e.mutations.length===r.length);let i=aee;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new bS(e,t,r,i)}}class DS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mee{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pr,Gt;function y3(n){switch(n){default:return Ge();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function v3(n){if(void 0===n)return br("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Pr.OK:return ce.OK;case Pr.CANCELLED:return ce.CANCELLED;case Pr.UNKNOWN:return ce.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return ce.INTERNAL;case Pr.UNAVAILABLE:return ce.UNAVAILABLE;case Pr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Pr.NOT_FOUND:return ce.NOT_FOUND;case Pr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Pr.ABORTED:return ce.ABORTED;case Pr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Pr.DATA_LOSS:return ce.DATA_LOSS;default:return Ge()}}(Gt=Pr||(Pr={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";function w3(){return new TextEncoder}const _ee=new mu([4294967295,4294967295],0);function E3(n){const e=w3().encode(n),t=new QV;return t.update(e),new Uint8Array(t.digest())}function C3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new mu([t,r],0),new mu([i,s],0)]}class TS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pm(`Invalid padding: ${t}`);if(r<0)throw new Pm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Pm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Pm(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=mu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(mu.fromNumber(r)));return 1===i.compare(_ee)&&(i=new mu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=E3(e),[r,i]=C3(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new TS(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=E3(e),[r,i]=C3(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Pm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Om.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xm(et.min(),i,new On(yt),ys(),It())}}class Om{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Om(r,t,It(),It(),It())}}class BE{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class b3{constructor(e,t){this.targetId=e,this.me=t}}class D3{constructor(e,t,r=Zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class T3{constructor(){this.fe=0,this.ge=S3(),this.pe=Zr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=It(),t=It(),r=It();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ge()}}),new Om(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=S3()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yee{constructor(e){this.Le=e,this.Be=new Map,this.ke=ys(),this.qe=I3(),this.Qe=new On(yt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(PE(s))if(0===r){const o=new Be(s.path);this.Ue(t,o,$n.newNoDocument(o,et.min()))}else Je(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Ba(r).toUint8Array()}catch(l){if(l instanceof A2)return ms("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new TS(o,i,s)}catch(l){return ms(l instanceof Pm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&PE(a.target)){const l=new Be(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,$n.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=It();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new xm(e,t,this.Qe,this.ke,r);return this.ke=ys(),this.qe=I3(),this.Qe=new On(yt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new T3,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Cn(yt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new T3),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function I3(){return new On(Be.comparator)}function S3(){return new On(Be.comparator)}const vee={asc:"ASCENDING",desc:"DESCENDING"},wee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eee={and:"AND",or:"OR"};class Cee{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function IS(n,e){return n.useProto3Json||ym(e)?e:{value:e}}function cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bee(n,e){return cf(n,e.toTimestamp())}function Dr(n){return Je(!!n),et.fromTimestamp(function(t){const r=Va(t);return new Yn(r.seconds,r.nanos)}(n))}function SS(n,e){return AS(n,e).canonicalString()}function AS(n,e){const t=(i=n,new jt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function M3(n){const e=jt.fromString(n);return Je(U3(e)),e}function Nm(n,e){return SS(n.databaseId,e.path)}function na(n,e){const t=M3(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(P3(t))}function R3(n,e){return SS(n.databaseId,e)}function k3(n){const e=M3(n);return 4===e.length?jt.emptyPath():P3(e)}function MS(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function P3(n){return Je(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function x3(n,e,t){return{name:Nm(n,e),fields:t.value.mapValue.fields}}function O3(n,e,t){const r=na(n,e.name),i=Dr(e.updateTime),s=e.createTime?Dr(e.createTime):et.min(),o=new pi({mapValue:{fields:e.fields}}),a=$n.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Fm(n,e){let t;if(e instanceof af)t={update:x3(n,e.key,e.value)};else if(e instanceof lf)t={delete:Nm(n,e.key)};else if(e instanceof Ha)t={update:x3(n,e.key,e.data),updateMask:kee(e.fieldMask)};else{if(!(e instanceof ES))return Ge();t={verify:Nm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof rf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ge()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:bee(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ge()),t;var s}function RS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Qn.updateTime(Dr(s.updateTime)):void 0!==s.exists?Qn.exists(s.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(Je("REQUEST_TIME"===a.setToServerValue),l=new rf):"appendMissingElements"in a?l=new Cu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new bu(a.removeAllFromArray.values||[]):"increment"in a?l=new sf(o,a.increment):Ge();const c=Hn.fromServerFormat(a.fieldPath);return new Rm(c,l)}(n,i)):[];var s;if(e.update){const i=na(n,e.update.name),s=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new _s((e.updateMask.fieldPaths||[]).map(h=>Hn.fromServerFormat(h)));return new Ha(i,s,o,t,r)}return new af(i,s,t,r)}if(e.delete){const i=na(n,e.delete);return new lf(i,t)}if(e.verify){const i=na(n,e.verify);return new ES(i,t)}return Ge()}function N3(n,e){return{documents:[R3(n,e.path)]}}function UE(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=R3(n,i);const s=function(c){if(0!==c.length)return B3(fn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(h=>{return{field:Xl((_=h).field),direction:Aee(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=IS(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function L3(n){let e=k3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Je(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(m){const _=V3(m);return _ instanceof fn&&gS(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new Dm(uf((C=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;t.limit&&(a=function(m){let _;return _="object"==typeof m?m.value:m,ym(_)?null:_}(t.limit));let l=null;var m;t.startAt&&(l=new Ql((m=t.startAt).values||[],!!m.before));let c=null;return t.endAt&&(c=function(m){return new Ql(m.values||[],!m.before)}(t.endAt)),G2(e,i,o,s,a,"F",l,c)}function V3(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=uf(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=uf(t.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=uf(t.unaryFilter.field);return Ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=uf(t.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ge()}}(n):void 0!==n.fieldFilter?Ht.create(uf((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ge()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return fn.create(t.compositeFilter.filters.map(r=>V3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge()}}(t.compositeFilter.op))}(n):Ge();var t}function Aee(n){return vee[n]}function Mee(n){return wee[n]}function Ree(n){return Eee[n]}function Xl(n){return{fieldPath:n.canonicalString()}}function uf(n){return Hn.fromServerFormat(n.fieldPath)}function B3(n){return n instanceof Ht?function(t){if("=="===t.op){if(k2(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NAN"}};if(R2(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(k2(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NAN"}};if(R2(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(t.field),op:Mee(t.op),value:t.value}}}(n):n instanceof fn?function(t){const r=t.getFilters().map(i=>B3(i));return 1===r.length?r[0]:{compositeFilter:{op:Ree(t.op),filters:r}}}(n):Ge()}function kee(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function U3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class $a{constructor(e,t,r,i,s=et.min(),o=et.min(),a=Zr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class j3{constructor(e){this.ct=e}}function H3(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Nm(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:cf(s,o.version.toTimestamp()),createTime:cf(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Du(e.version)};else{if(!e.isUnknownDocument())return Ge();r.unknownDocument={path:t.path.toArray(),version:Du(e.version)}}var s,o;return r}function jE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Du(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tu(n){const e=new Yn(n.seconds,n.nanoseconds);return et.fromTimestamp(e)}function Iu(n,e){const t=(e.baseMutations||[]).map(s=>RS(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>RS(n.ct,s)),i=Yn.fromMillis(e.localWriteTimeMs);return new CS(e.batchId,i,t,r)}function Lm(n){const e=Tu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tu(n.lastLimboFreeSnapshotVersion):et.min();let r;return r=void 0!==n.query.documents?(Je(1===(s=n.query).documents.length),Oi(ef(k3(s.documents[0])))):function(s){return Oi(L3(s))}(n.query),new $a(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken));var s}function $3(n,e){const t=Du(e.snapshotVersion),r=Du(e.lastLimboFreeSnapshotVersion);let i;i=PE(e.target)?N3(n.ct,e.target):UE(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kS(n){const e=L3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?OE(e,e.limit,"L"):e}function PS(n,e){return new DS(e.largestBatchId,RS(n.ct,e.overlayMutation))}function z3(n,e){const t=e.path.lastSegment();return[n,xi(e.path.popLast()),t]}function W3(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Du(r.readTime),documentKey:xi(r.documentKey.path),largestBatchId:r.largestBatchId}}class xee{getBundleMetadata(e,t){return q3(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Tu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return q3(e).put({bundleId:(i=t).id,createTime:Du(Dr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return G3(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:kS(s.bundledQuery),readTime:Tu(s.readTime)};var s})}saveNamedQuery(e,t){return G3(e).put({name:(i=t).name,readTime:Du(Dr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function q3(n){return ii(n,"bundles")}function G3(n){return ii(n,"namedQueries")}class HE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new HE(e,t.uid||"")}getOverlay(e,t){return Vm(e).get(z3(this.userId,t)).next(r=>r?PS(this.serializer,r):null)}getOverlays(e,t){const r=ta();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new DS(t,o);i.push(this.ht(e,a))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(xi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Vm(e).j("collectionPathOverlayIndex",a))}),oe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ta(),s=xi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Vm(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=PS(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ta();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vm(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const m=PS(this.serializer,c);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return Vm(e).put(function(i,s,o){const[a,l,c]=z3(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Fm(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Vm(n){return ii(n,"documentOverlays")}class Su{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),vm(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Va(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ba(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?P2(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ge()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Be.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Oee(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Z3(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Oee(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Su.bt=new Su;class Nee{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=Z3(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=Z3(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Fee{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Lee{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Bm{constructor(){this.Gt=new Nee,this.zt=new Fee(this.Gt),this.jt=new Lee(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Au{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Au(this.indexId,this.documentKey,this.arrayValue,r)}}function Jl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=K3(n.arrayValue,e.arrayValue),0!==t?t:(t=K3(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function K3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Y3{constructor(e){this.Yt=new Cn((t,r)=>Hn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Je(e.collectionGroup===this.collectionId),this.en)return!1;const t=aS(e);if(void 0!==t&&!this.nn(t))return!1;const r=_u(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Cn(Hn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new yu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new yu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new yu(r.field,"asc"===r.dir?0:1)));return new Kh(Kh.UNKNOWN_ID,this.collectionId,t,Yh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Q3(n){var e,t;if(Je(n instanceof Ht||n instanceof fn),n instanceof Ht){if(n instanceof z2){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Ht.create(n.field,"==",s)))||[];return fn.create(i,"or")}return n}const r=n.filters.map(i=>Q3(i));return fn.create(r,n.op)}function Vee(n){if(0===n.getFilters().length)return[];const e=NS(Q3(n));return Je(X3(e)),xS(e)||OS(e)?[e]:e.getFilters()}function xS(n){return n instanceof Ht}function OS(n){return n instanceof fn&&gS(n)}function X3(n){return xS(n)||OS(n)||function(t){if(t instanceof fn&&pS(t)){for(const r of t.getFilters())if(!xS(r)&&!OS(r))return!1;return!0}return!1}(n)}function NS(n){if(Je(n instanceof Ht||n instanceof fn),n instanceof Ht)return n;if(1===n.filters.length)return NS(n.filters[0]);const e=n.filters.map(r=>NS(r));let t=fn.create(e,n.op);return t=$E(t),X3(t)?t:(Je(t instanceof fn),Je(Jh(t)),Je(t.filters.length>1),t.filters.reduce((r,i)=>FS(r,i)))}function FS(n,e){let t;return Je(n instanceof Ht||n instanceof fn),Je(e instanceof Ht||e instanceof fn),t=n instanceof Ht?e instanceof Ht?fn.create([n,e],"and"):J3(n,e):e instanceof Ht?J3(e,n):function(i,s){if(Je(i.filters.length>0&&s.filters.length>0),Jh(i)&&Jh(s))return j2(i,s.getFilters());const o=pS(i)?i:s,a=pS(i)?s:i,l=o.filters.map(c=>FS(c,a));return fn.create(l,"or")}(n,e),$E(t)}function J3(n,e){if(Jh(e))return j2(e,n.getFilters());{const t=e.filters.map(r=>FS(n,r));return fn.create(t,"or")}}function $E(n){if(Je(n instanceof Ht||n instanceof fn),n instanceof Ht)return n;const e=n.getFilters();if(1===e.length)return $E(e[0]);if(B2(n))return n;const t=e.map(i=>$E(i)),r=[];return t.forEach(i=>{i instanceof Ht?r.push(i):i instanceof fn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:fn.create(r,n.op)}class Bee{constructor(){this._n=new LS}addToCollectionParentIndex(e,t){return this._n.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ps.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class LS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Cn(jt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Cn(jt.comparator)).toArray()}}const zE=new Uint8Array(0);class Uee{constructor(e,t){this.databaseId=t,this.an=new LS,this.un=new ja(r=>Eu(r),(r,i)=>Tm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:xi(i)};return eB(e).put(s)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[c2(t),""],!1,!0);return eB(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Jo(o.parent))}return r})}addFieldIndex(e,t){const r=Um(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=hf(e);return s.next(a=>{o.put(W3(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Um(e),i=hf(e),s=df(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Um(e),r=df(e),i=hf(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return oe.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Y3(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=df(e);let i=!0;const s=new Map;return oe.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=It();const a=[];return oe.forEach(s,(l,c)=>{var q;Ae("IndexedDbIndexManager",`Using index ${q=l,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${Eu(t)}`);const h=function(q,te){const ye=aS(te);if(void 0===ye)return null;for(const Pe of xE(q,ye.fieldPath))switch(Pe.op){case"array-contains-any":return Pe.value.arrayValue.values||[];case"array-contains":return[Pe.value]}return null}(c,l),m=function(q,te){const ye=new Map;for(const Pe of _u(te))for(const z of xE(q,Pe.fieldPath))switch(z.op){case"==":case"in":ye.set(Pe.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return ye.set(Pe.fieldPath.canonicalString(),z.value),Array.from(ye.values())}return null}(c,l),_=function(q,te){const ye=[];let Pe=!0;for(const z of _u(te)){const R=0===z.kind?W2(q,z.fieldPath,q.startAt):q2(q,z.fieldPath,q.startAt);ye.push(R.value),Pe&&(Pe=R.inclusive)}return new Ql(ye,Pe)}(c,l),v=function(q,te){const ye=[];let Pe=!0;for(const z of _u(te)){const R=0===z.kind?q2(q,z.fieldPath,q.endAt):W2(q,z.fieldPath,q.endAt);ye.push(R.value),Pe&&(Pe=R.inclusive)}return new Ql(ye,Pe)}(c,l),C=this.hn(l,c,_),I=this.hn(l,c,v),S=this.Pn(l,c,m),j=this.In(l.indexId,h,C,_.inclusive,I,v.inclusive,S);return oe.forEach(j,O=>r.G(O,t.limit).next(q=>{q.forEach(te=>{const ye=Be.fromSegments(te.documentKey);o.has(ye)||(o=o.add(ye),a.push(ye))})}))}).next(()=>a)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Vee(fn.create(e.filters,"and")).map(r=>_S(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),h=[];for(let m=0;m<l;++m){const _=t?this.Tn(t[m/c]):zE,v=this.En(e,_,r[m%c],i),C=this.dn(e,_,s[m%c],o),I=a.map(S=>this.En(e,_,S,!0));h.push(...this.createRange(v,C,I))}return h}En(e,t,r,i){const s=new Au(e,Be.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Au(e,Be.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new Y3(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new Cn(Hn.comparator),h=!1;for(const m of l.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:c=c.add(_.field));for(const m of l.orderBy)m.field.isKeyField()||(c=c.add(m.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Bm;for(const i of _u(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Su.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Bm;return Su.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Bm;return Su.bt.Pt(wu(this.databaseId,t),r.Ht(function(s){const o=_u(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Bm);let s=0;for(const o of _u(e)){const a=r[s++];for(const l of i)if(this.Vn(t,o.fieldPath)&&Cm(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);Su.bt.Pt(a,c)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Bm;l.seed(a.Wt()),Su.bt.Pt(o,l.Ht(t.kind)),s.push(l)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Ht&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Um(e),i=hf(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return oe.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,m){const _=m?new Yh(m.sequenceNumber,new Ps(Tu(m.readTime),new Be(Jo(m.documentKey)),m.largestBatchId)):Yh.empty(),v=h.fields.map(([C,I])=>new yu(Hn.fromServerFormat(C),I));return new Kh(h.indexId,h.collectionGroup,v,_)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Um(e),s=hf(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>oe.forEach(a,l=>s.put(W3(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?oe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),oe.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(s,l);return c.isEqual(h)?oe.resolve():this.wn(e,s,l,c,h)}))))})}Sn(e,t,r,i){return df(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return df(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=df(e);let s=new Cn(Jl);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Au(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Cn(Jl);const i=this.An(t,e);if(null==i)return r;const s=aS(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Cm(o))for(const a of o.arrayValue.values||[])r=r.add(new Au(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Au(t.indexId,e.key,zE,i));return r}wn(e,t,r,i,s){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,h,m,_){const v=l.getIterator(),C=c.getIterator();let I=Qh(v),S=Qh(C);for(;I||S;){let j=!1,O=!1;if(I&&S){const q=h(I,S);q<0?O=!0:q>0&&(j=!0)}else null!=I?O=!0:j=!0;j?(m(S),S=Qh(C)):O?(_(I),I=Qh(v)):(I=Qh(v),S=Qh(C))}}(i,s,Jl,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),oe.waitFor(o)}gn(e){let t=1;return hf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Jl(o,a)).filter((o,a,l)=>!a||0!==Jl(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=Jl(o,e),l=Jl(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,zE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,zE,[]]))}return s}Dn(e,t){return Jl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tB)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ge())).next(tB)}}function eB(n){return ii(n,"collectionParents")}function df(n){return ii(n,"indexEntries")}function Um(n){return ii(n,"indexConfiguration")}function hf(n){return ii(n,"indexState")}function tB(n){Je(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;lS(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}const nB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ni{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ni(e,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(h,m,_)=>(a++,_.delete()));s.push(l.next(()=>{Je(1===a)}));const c=[];for(const h of t.mutations){const m=v2(e,h.key.path,t.batchId);s.push(i.delete(m)),c.push(h.key)}return oe.waitFor(s).next(()=>c)}function WE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ge();e=n.noDocument}return JSON.stringify(e).length}Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(41943040,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);class qE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Je(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new qE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=ff(e),o=ec(e);return o.add({}).next(a=>{Je("number"==typeof a);const l=new CS(a,t,r,i),c=function(v,C,I){const S=I.baseMutations.map(O=>Fm(v.ct,O)),j=I.mutations.map(O=>Fm(v.ct,O));return{userId:C,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:S,mutations:j}}(this.serializer,this.userId,l),h=[];let m=new Cn((_,v)=>yt(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=v2(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),h.push(o.put(c)),h.push(s.put(v,MJ))}return m.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),oe.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return ec(e).get(t).next(r=>r?(Je(r.userId===this.userId),Iu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?oe.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ec(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Je(a.batchId>=r),s=Iu(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ec(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).U("userMutationsIndex",t).next(r=>r.map(i=>Iu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=TE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ff(e).J({range:i},(o,a,l)=>{const[c,h,m]=o,_=Jo(h);if(c===this.userId&&t.path.isEqual(_))return ec(e).get(m).next(v=>{if(!v)throw Ge();Je(v.userId===this.userId),s.push(Iu(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(yt);const i=[];return t.forEach(s=>{const o=TE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ff(e).J({range:a},(c,h,m)=>{const[_,v,C]=c,I=Jo(v);_===this.userId&&s.path.isEqual(I)?r=r.add(C):m.done()});i.push(l)}),oe.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=TE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Cn(yt);return ff(e).J({range:o},(l,c,h)=>{const[m,_,v]=l,C=Jo(_);m===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(v)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ec(e).get(s).next(o=>{if(null===o)throw Ge();Je(o.userId===this.userId),r.push(Iu(this.serializer,o))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rB(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ff(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Jo(s[1]);i.push(l)}else a.done()}).next(()=>{Je(0===i.length)})})}containsKey(e,t){return iB(e,this.userId,t)}xn(e){return sB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iB(n,e,t){const r=TE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ff(n).J({range:s,H:!0},(a,l,c)=>{const[h,m,_]=a;h===e&&m===i&&(o=!0),c.done()}).next(()=>o)}function ec(n){return ii(n,"mutations")}function ff(n){return ii(n,"documentMutations")}function sB(n){return ii(n,"mutationQueues")}class Mu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Mu(0)}static Ln(){return new Mu(-1)}}class jee{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Mu(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>et.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>pf(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Je(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return pf(e).J((o,a)=>{const l=Lm(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>oe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return pf(e).J((r,i)=>{const s=Lm(i);t(s)})}Bn(e){return oB(e).get("targetGlobalKey").next(t=>(Je(null!==t),t))}kn(e,t){return oB(e).put("targetGlobalKey",t)}qn(e,t){return pf(e).put($3(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Eu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return pf(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Lm(a);Tm(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=tc(e);return t.forEach(o=>{const a=xi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=tc(e);return oe.forEach(t,s=>{const o=xi(s.path);return oe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=tc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tc(e);let s=It();return i.J({range:r,H:!0},(o,a,l)=>{const c=Jo(o[1]),h=new Be(c);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=xi(t.path),i=IDBKeyRange.bound([r],[c2(r)],!1,!0);let s=0;return tc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return pf(e).get(t).next(r=>r?Lm(r):null)}}function pf(n){return ii(n,"targets")}function oB(n){return ii(n,"targetGlobal")}function tc(n){return ii(n,"targetDocuments")}function aB([n,e],[t,r]){const i=yt(n,t);return 0===i?yt(e,r):i}class Hee{constructor(e){this.Kn=e,this.buffer=new Cn(aB),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aB(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Wl(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield zl(r)}yield t.zn(3e5)}))}}class $ee{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(xs.oe);const r=new Hee(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(nB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nB):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),Gh()<=Qo.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${m} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class zee{constructor(e,t){this.db=e,this.garbageCollector=function cB(n,e){return new $ee(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return GE(e,r)}removeReference(e,t,r){return GE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return GE(e,t)}er(e,t){return function(i,s){let o=!1;return sB(i).Y(a=>iB(i,a,s).next(l=>(l&&(o=!0),oe.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,et.min()),tc(e).delete([0,xi(o.path)])))});i.push(l)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return GE(e,t)}Xn(e,t){const r=tc(e);let i,s=xs.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==xs.oe&&t(new Be(Jo(i)),s),s=c,i=l):s=xs.oe}).next(()=>{s!==xs.oe&&t(new Be(Jo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function GE(n,e){return tc(n).put((i=n.currentSequenceNumber,{targetId:0,path:xi(e.path),sequenceNumber:i}));var i}class uB{constructor(){this.changes=new ja(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wee{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ru(e).put(r)}removeEntry(e,t,r){return Ru(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jE(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=$n.newInvalidDocument(t);return Ru(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jm(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:$n.newInvalidDocument(t)};return Ru(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jm(t))},(i,s)=>{r={document:this.nr(t,s),size:WE(s)}}).next(()=>r)}getEntries(e,t){let r=ys();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=ys(),i=new On(Be.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,WE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return oe.resolve();let i=new Cn(pB);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(jm(i.first()),jm(i.last())),o=i.getIterator();let a=o.getNext();return Ru(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const m=Be.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&pB(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(jm(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),jE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ru(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let h=ys();for(const m of c){const _=this.nr(Be.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(Sm(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=ys();const o=fB(t,r),a=fB(t,Ps.max());return Ru(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const m=this.nr(Be.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(m.key,m),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new qee(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return hB(e).get("remoteDocumentGlobalKey").next(t=>(Je(!!t),t))}tr(e,t){return hB(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function Pee(n,e){let t;if(e.document)t=O3(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=Tu(e.noDocument.readTime);t=$n.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ge();{const r=Be.fromSegments(e.unknownDocument.path),i=Tu(e.unknownDocument.version);t=$n.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Yn(i[0],i[1]);return et.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(et.min()))return r}return $n.newInvalidDocument(e)}}function dB(n){return new Wee(n)}class qee extends uB{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ja(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Cn((s,o)=>yt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=H3(this.ar.serializer,o);i=i.add(s.path.popLast());const c=WE(l);r+=c-a.size,t.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=H3(this.ar.serializer,o.convertToNoDocument(et.min()));t.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function hB(n){return ii(n,"remoteDocumentGlobal")}function Ru(n){return ii(n,"remoteDocumentsV14")}function jm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fB(n,e){const t=e.documentKey.path.toArray();return[n,jE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=yt(t[s],r[s]),i)return i;return i=yt(t.length,r.length),i||(i=yt(t[t.length-2],r[r.length-2]),i||yt(t[t.length-1],r[r.length-1]))}class Gee{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&km(r.mutation,i,_s.empty(),Yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,It()).next(()=>r))}getLocalViewOfDocuments(e,t,r=It()){const i=ta();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Am();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ta();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,It()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ys();const o=Mm(),a=Mm();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof Ha)?s=s.insert(c.key,c):void 0!==h?(o.set(c.key,h.mutation.getFieldMask()),km(h.mutation,c,h.mutation.getFieldMask(),Yn.now())):o.set(c.key,_s.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var m;return a.set(c,new Gee(h,null!==(m=o.get(c))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Mm();let i=new On((o,a)=>o-a),s=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let h=r.get(l)||_s.empty();h=a.applyToLocalView(c,h),r.set(l,h);const m=(i.get(a.batchId)||It()).add(l);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,m=n3();h.forEach(_=>{if(!s.has(_)){const v=h3(t.get(_),r.get(_));null!==v&&m.set(_,v),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):yS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(ta());let a=-1,l=s;return o.next(c=>oe.forEach(c,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(h)?oe.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,It())).next(h=>({batchId:a,changes:t3(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let i=Am();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Am();return this.indexManager.getCollectionParents(e,s).next(a=>oe.forEach(a,l=>{const c=(m=t,_=l.child(s),new Ua(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();null===o.get(h)&&(o=o.insert(h,$n.newInvalidDocument(h)))});let a=Am();return o.forEach((l,c)=>{const h=s.get(l);void 0!==h&&km(h.mutation,c,_s.empty(),Yn.now()),Sm(t,c)&&(a=a.insert(l,c))}),a})}}class Zee{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return oe.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Dr(i.createTime)}),oe.resolve();var i}getNamedQuery(e,t){return oe.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:kS(i.bundledQuery),readTime:Dr(i.readTime)}),oe.resolve();var i}}class Kee{constructor(){this.overlays=new On(Be.comparator),this.hr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ta();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=ta(),s=t.length+1,o=new Be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new On((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);null===h&&(h=ta(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ta(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return oe.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DS(t,r));let s=this.hr.get(t);void 0===s&&(s=It(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class VS{constructor(){this.Pr=new Cn(si.Ir),this.Tr=new Cn(si.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new si(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new si(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Be(new jt([])),r=new si(t,e),i=new si(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Be(new jt([])),r=new si(t,e),i=new si(t,e+1);let s=It();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new si(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Be.comparator(e.key,t.key)||yt(e.pr,t.pr)}static Er(e,t){return yt(e.pr,t.pr)||Be.comparator(e.key,t.key)}}class Yee{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Cn(si.Ir)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new CS(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new si(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,t){return oe.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),i=new si(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(yt);return t.forEach(i=>{const s=new si(i,0),o=new si(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),oe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const o=new si(new Be(s),0);let a=new Cn(yt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),oe.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Je(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return oe.forEach(t.mutations,i=>{const s=new si(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new si(t,0),i=this.wr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qee{constructor(e){this.vr=e,this.docs=new On(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=ys();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$n.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ys();const o=t.path,a=new Be(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||lS(d2(h),r)<=0||(i.has(h.key)||Sm(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ge()}Fr(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Xee(this)}getSize(e){return oe.resolve(this.size)}}class Xee extends uB{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Jee{constructor(e){this.persistence=e,this.Mr=new ja(t=>Eu(t),Tm),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.Or=0,this.Nr=new VS,this.targetCount=0,this.Lr=Mu.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),oe.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Mu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.qn(t),oe.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Nr.containsKey(t))}}class BS{constructor(e,t){this.Br={},this.overlays={},this.kr=new xs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Jee(this),this.indexManager=new Bee,this.remoteDocumentCache=new Qee(r=>this.referenceDelegate.Kr(r)),this.serializer=new j3(t),this.$r=new Zee(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kee,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Yee(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new ete(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return oe.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class ete extends f2{constructor(e){super(),this.currentSequenceNumber=e}}class ZE{constructor(e){this.persistence=e,this.zr=new VS,this.jr=null}static Hr(e){return new ZE(e)}get Jr(){if(this.jr)return this.jr;throw Ge()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),oe.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Jr,r=>{const i=Be.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,et.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return oe.or([()=>oe.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class tte{constructor(e){this.serializer=e}O(e,t,r,i){const s=new DE("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y2,{unique:!0}),l.createObjectStore("documentMutations"),mB(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),mB(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y2,{unique:!0});const m=c.store("mutations"),_=h.map(v=>m.put(v));return oe.waitFor(_)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:jJ});c.createIndex("collectionPathOverlayIndex",HJ,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",$J,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:RJ});c.createIndex("documentKeyIndex",kJ),c.createIndex("collectionGroupIndex",PJ)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:LJ}).createIndex("sequenceNumberIndex",VJ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:BJ}).createIndex("documentKeyIndex",UJ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=WE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>oe.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>oe.forEach(a,l=>{Je(l.userId===s.userId);const c=Iu(this.serializer,l);return rB(e,s.userId,c).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new jt(o),c=[0,xi(l)];s.push(t.get(c).next(h=>h?oe.resolve():t.put({targetId:0,path:xi(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:FJ});const r=t.store("collectionParents"),i=new LS,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:xi(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new jt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=Jo(a);return s(h.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=Lm(i),o=$3(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(m=o,m.document?new Be(jt.fromString(m.document.name).popFirst(5)):m.noDocument?Be.fromSegments(m.noDocument.path):m.unknownDocument?Be.fromSegments(m.unknownDocument.path):Ge()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(c))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=dB(this.serializer),s=new BS(ZE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:It();Iu(this.serializer,l).keys().forEach(m=>h=h.add(m)),a.set(l.userId,h)}),oe.forEach(a,(l,c)=>{const h=new ri(c),m=HE.lt(this.serializer,h),_=s.getIndexManager(h),v=qE.lt(h,this.serializer,_,s.referenceDelegate);return new gB(i,v,m,_).recalculateAndSaveOverlaysForDocumentKeys(new dS(t,xs.oe),l).next()})})}}function mB(n){n.createObjectStore("targetDocuments",{keyPath:OJ}).createIndex("documentTargetsIndex",NJ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xJ,{unique:!0}),n.createObjectStore("targetGlobal")}const US="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jS{constructor(e,t,r,i,s,o,a,l,c,h,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=h,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!jS.D())throw new Te(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zee(this,i),this.Ti=t+"main",this.serializer=new j3(l),this.Ei=new Xo(this.Ti,this.ui,new tte(this.serializer)),this.Qr=new jee(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dB(this.serializer),this.$r=new xee,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(ce.FAILED_PRECONDITION,US);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new xs(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,pe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Wl(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Hm(e).get("owner").next(t=>oe.resolve(this.Si(t)))}bi(e){return YE(e).delete(this.clientId)}Di(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ii(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return oe.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?oe.resolve(!0):Hm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Te(ce.FAILED_PRECONDITION,US);return!1}}return!(!this.networkEnabled||!this.inForeground)||YE(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new dS(t,xs.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>YE(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return qE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uee(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return HE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(l=this.ui)?WJ:15===l?b2:14===l?C2:13===l?E2:12===l?zJ:11===l?w2:void Ge();var l;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new dS(a,this.kr?this.kr.next():xs.oe),"readwrite-primary"===t?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Te(ce.FAILED_PRECONDITION,h2);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Hm(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(ce.FAILED_PRECONDITION,US)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hm(e).put("owner",t)}static D(){return Xo.D()}yi(e){const t=Hm(e);return t.get("owner").next(r=>this.Si(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ln.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hm(n){return ii(n,"owner")}function YE(n){return ii(n,"clientMetadata")}function HS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $S{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=It(),i=It();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $S(e,t.fromCache,r,i)}}class nte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _B{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ln.G6)()?8:p2((0,ln.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nte;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Gh()<=Qo.in.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",nf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),oe.resolve()):(Gh()<=Qo.in.DEBUG&&Ae("QueryEngine","Query:",nf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Gh()<=Qo.in.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",nf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(t))):oe.resolve())}ji(e,t){if(Z2(t))return oe.resolve(null);let r=Oi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=OE(t,null,"F"),r=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=It(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,OE(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,i){return Z2(t)||i.isEqual(et.min())?oe.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?oe.resolve(null):(Gh()<=Qo.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nf(t)),this.es(e,o,t,u2(i,-1)).next(a=>a))})}Zi(e,t){let r=new Cn(J2(e));return t.forEach((i,s)=>{Sm(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Gh()<=Qo.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",nf(t)),this.zi.getDocumentsMatchingQuery(e,t,Ps.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class rte{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new On(yt),this.rs=new ja(s=>Eu(s),Tm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gB(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function yB(n,e,t,r){return new rte(n,e,t,r)}function vB(n,e){return zS.apply(this,arguments)}function zS(){return(zS=(0,pe.Z)(function*(n,e){const t=Le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=It();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function wB(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function EB(n,e,t){let r=It(),i=It();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ys();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(et.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function ote(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gf(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new $a(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function mf(n,e,t){return WS.apply(this,arguments)}function WS(){return(WS=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Wl(o))throw o;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function QE(n,e,t){const r=Le(n);let i=et.min(),s=It();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const m=Le(l),_=m.rs.get(h);return void 0!==_?oe.resolve(m.ns.get(_)):m.Qr.getTargetData(c,h)}(r,o,Oi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:et.min(),t?s:It())).next(a=>(DB(r,X2(e),a),{documents:a,hs:s})))}function CB(n,e){const t=Le(n),r=Le(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function bB(n,e){const t=Le(n),r=t.ss.get(e)||et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,u2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(DB(t,e,i),i))}function DB(n,e,t){let r=n.ss.get(e)||et.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function qS(){return(qS=(0,pe.Z)(function*(n,e,t,r){const i=Le(n);let s=It(),o=ys();for(const c of t){const h=e.Ps(c.metadata.name);c.document&&(s=s.add(h));const m=e.Is(c);m.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(h,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield gf(i,(h=r,Oi(ef(jt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>EB(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))})).apply(this,arguments)}function lte(n,e){return GS.apply(this,arguments)}function GS(){return(GS=(0,pe.Z)(function*(n,e,t=It()){const r=yield gf(n,Oi(kS(e.bundledQuery))),i=Le(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Dr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Zr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function TB(n,e){return`firestore_clients_${n}_${e}`}function IB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZS(n,e){return`firestore_targets_${n}_${e}`}class XE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Te(i.error.code,i.error.message))),o?new XE(e,t,i.state,s):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $m{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Te(r.error.code,r.error.message))),s?new $m(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=wS();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=m2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new JE(e,s):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KS{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KS(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YS{constructor(){this.activeTargetIds=wS()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QS{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new On(yt),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=TB(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new YS),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(TB(e.persistenceKey,i));if(s){const o=JE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ZS(this.persistenceKey,e));if(r){const i=$m.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZS(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=xs.oe;if(null!=o)try{const l=JSON.parse(o);Je("number"==typeof l),a=l}catch(l){br("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==xs.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new XE(this.currentUser,e,t,r),s=IB(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=IB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=ZS(this.persistenceKey,e),s=new $m(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return JE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return XE.Es(new ri(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return $m.Es(i,t)}xs(e){return KS.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=wS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class SB{constructor(){this.no=new YS,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new YS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cte{io(e){}shutdown(){}}class AB{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eC=null;function XS(){return null===eC?eC=268435456+Math.round(2147483648*Math.random()):eC++,"0x"+eC.toString(16)}const ute={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dte{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Fi="WebChannelConnection";class hte extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=XS(),l=this.vo(t,r.toUriEncodedString());Ae("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(t,l,c,i).then(h=>(Ae("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ms("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+qh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${ute[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=XS();return new Promise((o,a)=>{const l=new XV;l.setWithCredentials(!0),l.listenOnce(e2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bE.NO_ERROR:const h=l.getResponseJson();Ae(Fi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case bE.TIMEOUT:Ae(Fi,`RPC '${e}' ${s} timed out`),a(new Te(ce.DEADLINE_EXCEEDED,"Request time out"));break;case bE.HTTP_ERROR:const m=l.getStatus();if(Ae(Fi,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const C=function(S){const j=S.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(j)>=0?j:ce.UNKNOWN}(v.status);a(new Te(C,v.message))}else a(new Te(ce.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Te(ce.UNAVAILABLE,"Connection failed."));break;default:Ge()}}finally{Ae(Fi,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Ae(Fi,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Oo(e,t,r){const i=XS(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=r2(),a=n2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new JV({})),this.Fo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Ae(Fi,`Creating RPC '${e}' stream ${i}: ${h}`,l);const m=o.createWebChannel(h,l);let _=!1,v=!1;const C=new dte({lo:S=>{v?Ae(Fi,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(Ae(Fi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),Ae(Fi,`RPC '${e}' stream ${i} sending:`,S),m.send(S))},ho:()=>m.close()}),I=(S,j,O)=>{S.listen(j,q=>{try{O(q)}catch(te){setTimeout(()=>{throw te},0)}})};return I(m,gm.EventType.OPEN,()=>{v||(Ae(Fi,`RPC '${e}' stream ${i} transport opened.`),C.mo())}),I(m,gm.EventType.CLOSE,()=>{v||(v=!0,Ae(Fi,`RPC '${e}' stream ${i} transport closed`),C.po())}),I(m,gm.EventType.ERROR,S=>{v||(v=!0,ms(Fi,`RPC '${e}' stream ${i} transport errored:`,S),C.po(new Te(ce.UNAVAILABLE,"The operation could not be completed")))}),I(m,gm.EventType.MESSAGE,S=>{var j;if(!v){const O=S.data[0];Je(!!O);const te=O.error||(null===(j=O[0])||void 0===j?void 0:j.error);if(te){Ae(Fi,`RPC '${e}' stream ${i} received error:`,te);const ye=te.status;let Pe=function(N){const W=Pr[N];if(void 0!==W)return v3(W)}(ye),z=te.message;void 0===Pe&&(Pe=ce.INTERNAL,z="Unknown error status: "+ye+" with message "+te.message),v=!0,C.po(new Te(Pe,z)),m.close()}else Ae(Fi,`RPC '${e}' stream ${i} received:`,O),C.yo(O)}}),I(a,t2.STAT_EVENT,S=>{S.stat===sS.PROXY?Ae(Fi,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===sS.NOPROXY&&Ae(Fi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}}function MB(){return typeof window<"u"?window:null}function tC(){return typeof document<"u"?document:null}function zm(n){return new Cee(n,!0)}class JS{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class RB{constructor(e,t,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new JS(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,pe.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,pe.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new Te(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,pe.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fte extends RB{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function Tee(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Ge(),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Je(void 0===h||"string"==typeof h),Zr.fromBase64String(h||"")):(Je(void 0===h||h instanceof Buffer||h instanceof Uint8Array),Zr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=void 0===c.code?ce.UNKNOWN:v3(c.code);return new Te(h,c.message||"")}(o);t=new D3(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=na(n,r.document.name),s=Dr(r.document.updateTime),o=r.document.createTime?Dr(r.document.createTime):et.min(),a=new pi({mapValue:{fields:r.document.fields}}),l=$n.newFoundDocument(i,s,o,a);t=new BE(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=na(n,r.document),s=r.readTime?Dr(r.readTime):et.min(),o=$n.newNoDocument(i,s);t=new BE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=na(n,r.document);t=new BE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ge();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new mee(i,s);t=new b3(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return et.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?et.min():o.readTime?Dr(o.readTime):et.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=MS(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=PE(l)?{documents:N3(s,l)}:{query:UE(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=A3(s,o.resumeToken);const c=IS(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(et.min())>0){a.readTime=cf(s,o.snapshotVersion.toTimestamp());const c=IS(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function See(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=MS(this.serializer),t.removeTarget=e,this.i_(t)}}class pte extends RB{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function Iee(n,e){return n&&n.length>0?(Je(void 0!==e),n.map(t=>function(i,s){let o=Dr(i.updateTime?i.updateTime:s);return o.isEqual(et.min())&&(o=Dr(s)),new fee(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.A_(r,t)}return Je(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=MS(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Fm(this.serializer,r))};this.i_(t)}}class gte extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,AS(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(ce.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,AS(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ce.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class mte{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(br(t),this.y_=!1):Ae("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class _te{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,pe.Z)(function*(){var l;nc(o)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,pe.Z)(function*(h){const m=Le(h);m.M_.add(4),yield _f(m),m.N_.set("Unknown"),m.M_.delete(4),yield Wm(m)}),function c(h){return l.apply(this,arguments)})(o))}))}),this.N_=new mte(r,i)}}function Wm(n){return eA.apply(this,arguments)}function eA(){return(eA=(0,pe.Z)(function*(n){if(nc(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function _f(n){return tA.apply(this,arguments)}function tA(){return(tA=(0,pe.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function nC(n,e){const t=Le(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),iA(t)?rA(t):wf(t).Xo()&&nA(t,e))}function yf(n,e){const t=Le(n),r=wf(t);t.F_.delete(e),r.Xo()&&kB(t,e),0===t.F_.size&&(r.Xo()?r.n_():nc(t)&&t.N_.set("Unknown"))}function nA(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wf(n).P_(e)}function kB(n,e){n.L_.xe(e),wf(n).I_(e)}function rA(n){n.L_=new yee({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),wf(n).start(),n.N_.w_()}function iA(n){return nc(n)&&!wf(n).Zo()&&n.F_.size>0}function nc(n){return 0===Le(n).M_.size}function PB(n){n.L_=void 0}function yte(n){return sA.apply(this,arguments)}function sA(){return(sA=(0,pe.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function vte(n){return oA.apply(this,arguments)}function oA(){return(oA=(0,pe.Z)(function*(n){n.F_.forEach((e,t)=>{nA(n,e)})})).apply(this,arguments)}function wte(n,e){return aA.apply(this,arguments)}function aA(){return(aA=(0,pe.Z)(function*(n,e){PB(n),iA(n)?(n.N_.D_(e),rA(n)):n.N_.set("Unknown")})).apply(this,arguments)}function Ete(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,pe.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof D3&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.F_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.F_.delete(l),s.L_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rC(n,r)}else if(e instanceof BE?n.L_.Ke(e):e instanceof b3?n.L_.He(e):n.L_.We(e),!t.isEqual(et.min()))try{const r=yield wB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Zr.EMPTY_BYTE_STRING,h.snapshotVersion)),kB(s,l);const m=new $a(h.target,l,c,h.sequenceNumber);nA(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield rC(n,r)}var r}),lA.apply(this,arguments)}function rC(n,e,t){return cA.apply(this,arguments)}function cA(){return(cA=(0,pe.Z)(function*(n,e,t){if(!Wl(e))throw e;n.M_.add(1),yield _f(n),n.N_.set("Offline"),t||(t=()=>wB(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Wm(n)}))})).apply(this,arguments)}function xB(n,e){return e().catch(t=>rC(n,t,e))}function vf(n){return uA.apply(this,arguments)}function uA(){return(uA=(0,pe.Z)(function*(n){const e=Le(n),t=rc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Cte(e);)try{const i=yield ote(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,bte(e,i)}catch(i){yield rC(e,i)}OB(e)&&NB(e)})).apply(this,arguments)}function Cte(n){return nc(n)&&n.v_.length<10}function bte(n,e){n.v_.push(e);const t=rc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function OB(n){return nc(n)&&!rc(n).Zo()&&n.v_.length>0}function NB(n){rc(n).start()}function Dte(n){return dA.apply(this,arguments)}function dA(){return(dA=(0,pe.Z)(function*(n){rc(n).V_()})).apply(this,arguments)}function Tte(n){return hA.apply(this,arguments)}function hA(){return(hA=(0,pe.Z)(function*(n){const e=rc(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function Ite(n,e,t){return fA.apply(this,arguments)}function fA(){return(fA=(0,pe.Z)(function*(n,e,t){const r=n.v_.shift(),i=bS.from(r,e,t);yield xB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vf(n)})).apply(this,arguments)}function Ste(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,pe.Z)(function*(n,e){var t;e&&rc(n).E_&&(yield(t=(0,pe.Z)(function*(i,s){if(y3(a=s.code)&&a!==ce.ABORTED){const o=i.v_.shift();rc(i).t_(),yield xB(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield vf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),OB(n)&&NB(n)}),pA.apply(this,arguments)}function FB(n,e){return gA.apply(this,arguments)}function gA(){return(gA=(0,pe.Z)(function*(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=nc(t);t.M_.add(3),yield _f(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Wm(t)})).apply(this,arguments)}function mA(n,e){return _A.apply(this,arguments)}function _A(){return(_A=(0,pe.Z)(function*(n,e){const t=Le(n);e?(t.M_.delete(2),yield Wm(t)):e||(t.M_.add(2),yield _f(t),t.N_.set("Unknown"))})).apply(this,arguments)}function wf(n){return n.B_||(n.B_=function(t,r,i){const s=Le(t);return s.f_(),new fte(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:yte.bind(null,n),To:vte.bind(null,n),Ao:wte.bind(null,n),h_:Ete.bind(null,n)}),n.x_.push(function(){var e=(0,pe.Z)(function*(t){t?(n.B_.t_(),iA(n)?rA(n):n.N_.set("Unknown")):(yield n.B_.stop(),PB(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function rc(n){return n.k_||(n.k_=function(t,r,i){const s=Le(t);return s.f_(),new pte(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:Dte.bind(null,n),Ao:Ste.bind(null,n),R_:Tte.bind(null,n),A_:Ite.bind(null,n)}),n.x_.push(function(){var e=(0,pe.Z)(function*(t){t?(n.k_.t_(),yield vf(n)):(yield n.k_.stop(),n.v_.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class yA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new yA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ef(n,e){if(br("AsyncQueue",`${e}: ${n}`),Wl(n))return new Te(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Cf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=Am(),this.sortedSet=new On(this.comparator)}static emptySet(e){return new Cf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Cf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class LB{constructor(){this.q_=new On(Be.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ge():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class bf{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new bf(e,t,Cf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Ate{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Mte{constructor(){this.queries=new ja(e=>Q2(e),Im),this.onlineState="Unknown",this.z_=new Set}}function vA(n,e){return wA.apply(this,arguments)}function wA(){return(wA=(0,pe.Z)(function*(n,e){const t=Le(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Ate,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Ef(o,`Initialization of query '${nf(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&bA(t)})).apply(this,arguments)}function EA(n,e){return CA.apply(this,arguments)}function CA(){return(CA=(0,pe.Z)(function*(n,e){const t=Le(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Rte(n,e){const t=Le(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&bA(t)}function kte(n,e,t){const r=Le(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function bA(n){n.z_.forEach(e=>{e.next()})}var DA,VB;(VB=DA||(DA={})).J_="default",VB.Cache="cache";class TA{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new bf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=bf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==DA.Cache}}class Pte{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class BB{constructor(e){this.serializer=e}Ps(e){return na(this.serializer,e)}Is(e){return e.metadata.exists?O3(this.serializer,e.document,!1):$n.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Dr(e)}}class xte{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UB(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=jt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new BB(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||It()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function ate(n,e,t,r){return qS.apply(this,arguments)}(e.localStore,new BB(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield lte(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function UB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jB{constructor(e){this.key=e}}class HB{constructor(e){this.key=e}}class $B{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=It(),this.mutatedKeys=It(),this.Ia=J2(e),this.Ta=new Cf(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new LB,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const _=i.get(h),v=Sm(this.query,m)?m:null,C=!!_&&this.mutatedKeys.has(_.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;_&&v?_.data.isEqual(v.data)?C!==I&&(r.track({type:3,doc:v}),S=!0):this.Ra(_,v)||(r.track({type:2,doc:v}),S=!0,(l&&this.Ia(v,l)>0||c&&this.Ia(v,c)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),S=!0):_&&!v&&(r.track({type:1,doc:_}),S=!0,(l||c)&&(a=!0)),S&&(v?(o=o.add(v),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,m)=>function(v,C){const I=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge()}};return I(v)-I(C)}(h.type,m.type)||this.Ia(h.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],l=0===this.Pa.size&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,0!==o.length||c?{snapshot:new bf(this.query,e.Ta,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new LB,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=It(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new HB(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new jB(r))}),t}pa(e){this.la=e.hs,this.Pa=It();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return bf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Ote{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Nte{constructor(e){this.key=e,this.wa=!1}}class Fte{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ja(a=>Q2(a),Im),this.Da=new Map,this.Ca=new Set,this.va=new On(Be.comparator),this.Fa=new Map,this.Ma=new VS,this.xa={},this.Oa=new Map,this.Na=Mu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Lte(n,e){return IA.apply(this,arguments)}function IA(){return(IA=(0,pe.Z)(function*(n,e,t=!0){const r=iC(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield zB(r,e,t,!0),i})).apply(this,arguments)}function Vte(n,e){return SA.apply(this,arguments)}function SA(){return(SA=(0,pe.Z)(function*(n,e){const t=iC(n);yield zB(t,e,!0,!1)})).apply(this,arguments)}function zB(n,e,t,r){return AA.apply(this,arguments)}function AA(){return(AA=(0,pe.Z)(function*(n,e,t,r){const i=yield gf(n.localStore,Oi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield MA(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&nC(n.remoteStore,i),a})).apply(this,arguments)}function MA(n,e,t,r,i){return RA.apply(this,arguments)}function RA(){return RA=(0,pe.Z)(function*(n,e,t,r,i){n.Ba=(m,_,v)=>{return(C=(0,pe.Z)(function*(S,j,O,q){let te=j.view.da(O);te.Xi&&(te=yield QE(S.localStore,j.query,!1).then(({documents:R})=>j.view.da(R,te)));const ye=q&&q.targetChanges.get(j.targetId),Pe=q&&null!=q.targetMismatches.get(j.targetId),z=j.view.applyChanges(te,S.isPrimaryClient,ye,Pe);return jA(S,j.targetId,z.fa),z.snapshot}),function I(S,j,O,q){return C.apply(this,arguments)})(n,m,_,v);var C};const s=yield QE(n.localStore,e,!0),o=new $B(e,s.hs),a=o.da(s.documents),l=Om.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);jA(n,t,c.fa);const h=new Ote(e,t,o);return n.ba.set(e,h),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),c.snapshot}),RA.apply(this,arguments)}function Bte(n,e,t){return kA.apply(this,arguments)}function kA(){return(kA=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Im(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&yf(r.remoteStore,i.targetId),Df(r,i.targetId)}).catch(zl))):(Df(r,i.targetId),yield mf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Ute(n,e){return PA.apply(this,arguments)}function PA(){return(PA=(0,pe.Z)(function*(n,e){const t=Le(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yf(t.remoteStore,r.targetId))})).apply(this,arguments)}function xA(){return(xA=(0,pe.Z)(function*(n,e,t){const r=XA(n);try{const i=yield function(o,a){const l=Le(o),c=Yn.now(),h=a.reduce((v,C)=>v.add(C.key),It());let m,_;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=ys(),I=It();return l.os.getEntries(v,h).next(S=>{C=S,C.forEach((j,O)=>{O.isValidDocument()||(I=I.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,C)).next(S=>{m=S;const j=[];for(const O of a){const q=gee(O,m.get(O.key).overlayedDocument);null!=q&&j.push(new Ha(O.key,q,N2(q.value.mapValue),Qn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,j,a)}).next(S=>{_=S;const j=S.applyToLocalDocumentSet(m,I);return l.documentOverlayCache.saveOverlays(v,S.batchId,j)})}).then(()=>({batchId:_.batchId,changes:t3(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new On(yt)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,t),yield za(r,i.changes),yield vf(r.remoteStore)}catch(i){const s=Ef(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function WB(n,e){return OA.apply(this,arguments)}function OA(){return(OA=(0,pe.Z)(function*(n,e){const t=Le(n);try{const r=yield function ste(n,e){const t=Le(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((h,m)=>{const _=i.get(m);if(!_)return;a.push(t.Qr.removeMatchingKeys(s,h.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,h.addedDocuments,m)));let v=_.withSequenceNumber(s.currentSequenceNumber);var I,S,j;null!==e.targetMismatches.get(m)?v=v.withResumeToken(Zr.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(m,v),S=v,j=h,(0===(I=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,v))});let l=ys(),c=It();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(EB(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(et.min())){const h=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return oe.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Je(o.wa):i.removedDocuments.size>0&&(Je(o.wa),o.wa=!1))}),yield za(t,r,e)}catch(r){yield zl(r)}})).apply(this,arguments)}function qB(n,e,t){const r=Le(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Le(o);l.onlineState=a;let c=!1;l.queries.forEach((h,m)=>{for(const _ of m.U_)_.j_(a)&&(c=!0)}),c&&bA(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hte(n,e,t){return NA.apply(this,arguments)}function NA(){return(NA=(0,pe.Z)(function*(n,e,t){const r=Le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new On(Be.comparator);o=o.insert(s,$n.newNoDocument(s,et.min()));const a=It().add(s),l=new xm(et.min(),new Map,new On(yt),o,a);yield WB(r,l),r.va=r.va.remove(s),r.Fa.delete(e),HA(r)}else yield mf(r.localStore,e,!1).then(()=>Df(r,e,t)).catch(zl)})).apply(this,arguments)}function $te(n,e){return FA.apply(this,arguments)}function FA(){return(FA=(0,pe.Z)(function*(n,e){const t=Le(n),r=e.batch.batchId;try{const i=yield function ite(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const m=c.batch,_=m.keys();let v=oe.resolve();return _.forEach(C=>{v=v.next(()=>h.getEntry(l,C)).next(I=>{const S=c.docVersions.get(C);Je(null!==S),I.version.compareTo(S)<0&&(m.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=It();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);UA(t,r,null),BA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield za(t,i)}catch(i){yield zl(i)}})).apply(this,arguments)}function zte(n,e,t){return LA.apply(this,arguments)}function LA(){return(LA=(0,pe.Z)(function*(n,e,t){const r=Le(n);try{const i=yield function(o,a){const l=Le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(Je(null!==m),h=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);UA(r,e,t),BA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield za(r,i)}catch(i){yield zl(i)}})).apply(this,arguments)}function VA(){return(VA=(0,pe.Z)(function*(n,e){const t=Le(n);nc(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Le(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Ef(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function BA(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function UA(n,e,t){const r=Le(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Df(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||GB(n,r)})}function GB(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(yf(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),HA(n))}function jA(n,e,t){for(const r of t)r instanceof jB?(n.Ma.addReference(r.key,e),qte(n,r)):r instanceof HB?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||GB(n,r.key)):Ge()}function qte(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.Ca.add(r),HA(n))}function HA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Be(jt.fromString(e)),r=n.Na.next();n.Fa.set(r,new Nte(t)),n.va=n.va.insert(t,r),nC(n.remoteStore,new $a(Oi(ef(t.path)),r,"TargetPurposeLimboResolution",xs.oe))}}function za(n,e,t){return $A.apply(this,arguments)}function $A(){return $A=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c&&!c.fromCache?"current":"not-current"),c){i.push(c);const h=$S.Ki(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,pe.Z)(function*(c,h){const m=Le(c);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>oe.forEach(h,v=>oe.forEach(v.qi,C=>m.persistence.referenceDelegate.addReference(_,v.targetId,C)).next(()=>oe.forEach(v.Qi,C=>m.persistence.referenceDelegate.removeReference(_,v.targetId,C)))))}catch(_){if(!Wl(_))throw _;Ae("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of h){const v=_.targetId;if(!_.fromCache){const C=m.ns.get(v),S=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);m.ns=m.ns.insert(v,S)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,s))}),$A.apply(this,arguments)}function Gte(n,e){return zA.apply(this,arguments)}function zA(){return(zA=(0,pe.Z)(function*(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield vB(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(l=>{l.reject(new Te(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield za(t,r.us)}var s})).apply(this,arguments)}function Zte(n,e){const t=Le(n),r=t.Fa.get(e);if(r&&r.wa)return It().add(r.key);{let i=It();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Kte(n,e){return WA.apply(this,arguments)}function WA(){return(WA=(0,pe.Z)(function*(n,e){const t=Le(n),r=yield QE(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&jA(t,e.targetId,i.fa),i})).apply(this,arguments)}function Yte(n,e){return qA.apply(this,arguments)}function qA(){return(qA=(0,pe.Z)(function*(n,e){const t=Le(n);return bB(t.localStore,e).then(r=>za(t,r))})).apply(this,arguments)}function Qte(n,e,t,r){return GA.apply(this,arguments)}function GA(){return(GA=(0,pe.Z)(function*(n,e,t,r){const i=Le(n),s=yield function(a,l){const c=Le(a),h=Le(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.vn(m,l).next(_=>_?c.localDocuments.getDocuments(m,_):oe.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield vf(i.remoteStore):"acknowledged"===t||"rejected"===t?(UA(i,e,r||null),BA(i,e),l=e,Le(Le(i.localStore).mutationQueue).Mn(l)):Ge(),yield za(i,s)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function ZA(){return(ZA=(0,pe.Z)(function*(n,e){const t=Le(n);if(iC(t),XA(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ZB(t,r.toArray());t.La=!0,yield mA(t.remoteStore,!0);for(const s of i)nC(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Df(t,o),mf(t.localStore,o,!0))),yf(t.remoteStore,o)}),yield i,yield ZB(t,r),function(o){const a=Le(o);a.Fa.forEach((l,c)=>{yf(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new On(Be.comparator)}(t),t.La=!1,yield mA(t.remoteStore,!1)}})).apply(this,arguments)}function ZB(n,e,t){return KA.apply(this,arguments)}function KA(){return(KA=(0,pe.Z)(function*(n,e,t){const r=Le(n),i=[],s=[];for(const o of e){let a;const l=r.Da.get(o);if(l&&0!==l.length){a=yield gf(r.localStore,Oi(l[0]));for(const c of l){const h=r.ba.get(c),m=yield Kte(r,h);m.snapshot&&s.push(m.snapshot)}}else{const c=yield CB(r.localStore,o);a=yield gf(r.localStore,c),yield MA(r,KB(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function KB(n){return G2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Jte(n){return t=Le(n).localStore,Le(Le(t).persistence).Bi();var t}function ene(n,e,t,r){return YA.apply(this,arguments)}function YA(){return(YA=(0,pe.Z)(function*(n,e,t,r){const i=Le(n);if(i.La)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield bB(i.localStore,X2(s[0])),a=xm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Zr.EMPTY_BYTE_STRING);yield za(i,o,a);break}case"rejected":yield mf(i.localStore,e,!0),Df(i,e,r);break;default:Ge()}})).apply(this,arguments)}function tne(n,e,t){return QA.apply(this,arguments)}function QA(){return(QA=(0,pe.Z)(function*(n,e,t){const r=iC(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ae("SyncEngine","Adding an already active target "+i);continue}const s=yield CB(r.localStore,i),o=yield gf(r.localStore,s);yield MA(r,KB(s),o.targetId,!1,o.resumeToken),nC(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield mf(r.localStore,i,!1).then(()=>{yf(r.remoteStore,i),Df(r,i)}).catch(zl))}})).apply(this,arguments)}function iC(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zte.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hte.bind(null,e),e.Sa.h_=Rte.bind(null,e.eventManager),e.Sa.ka=kte.bind(null,e.eventManager),e}function XA(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$te.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zte.bind(null,e),e}class qm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.serializer=zm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return yB(this.persistence,new _B,e.initialUser,this.serializer)}createPersistence(e){return new BS(ZE.Hr,this.serializer)}createSharedClientState(e){return new SB}terminate(){var e=this;return(0,pe.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class JA extends qm{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield XA(r.Qa.syncEngine),yield vf(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return yB(this.persistence,new _B,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new lB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new SJ(t,this.persistence);return new IJ(e.asyncQueue,r)}createPersistence(e){const t=HS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new jS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MB(),tC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new SB}}class YB extends JA{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof QS&&(r.sharedClientState.syncEngine={Zs:Qte.bind(null,i),Xs:ene.bind(null,i),eo:tne.bind(null,i),Bi:Jte.bind(null,i),Ys:Yte.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,pe.Z)(function*(o){yield function Xte(n,e){return ZA.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=MB();if(!QS.D(t))throw new Te(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Tf{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>qB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Gte.bind(null,r.syncEngine),yield mA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Mte}createDatastore(e){const t=zm(e.databaseInfo.databaseId),r=new hte(e.databaseInfo);return new gte(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>qB(this.syncEngine,t,0),a=AB.D()?new AB:new cte,new _te(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const m=new Fte(i,s,o,a,l,c);return h&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,pe.Z)(function*(){var t,r;yield(r=(0,pe.Z)(function*(s){const o=Le(s);Ae("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield _f(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function QB(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class sC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ine{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,pe.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new Pte(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,pe.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sne{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Te(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,pe.Z)(function*(o,a){const l=Le(o),c={documents:a.map(v=>Nm(l.serializer,v))},h=yield l.xo("BatchGetDocuments",l.serializer.databaseId,jt.emptyPath(),c,a.length),m=new Map;h.forEach(v=>{const C=function Dee(n,e){return"found"in e?function(r,i){Je(!!i.found);const s=na(r,i.found.name),o=Dr(i.found.updateTime),a=i.found.createTime?Dr(i.found.createTime):et.min(),l=new pi({mapValue:{fields:i.found.fields}});return $n.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Je(!!i.missing),Je(!!i.readTime);const s=na(r,i.missing),o=Dr(i.readTime);return $n.newNoDocument(s,o)}(n,e):Ge()}(l.serializer,v);m.set(C.key.toString(),C)});const _=[];return a.forEach(v=>{const C=m.get(v.toString());Je(!!C),_.push(C)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new lf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Be.fromPath(i);e.mutations.push(new ES(s,e.precondition(s)))}),yield(r=(0,pe.Z)(function*(s,o){const a=Le(s),l={writes:o.map(c=>Fm(a.serializer,c))};yield a.Co("Commit",a.serializer.databaseId,jt.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ge();t=et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(et.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(et.min()))throw new Te(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class one{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new JS(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,pe.Z)(function*(){const t=new sne(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!ym(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!y3(t)}return!1}}class ane{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ri.UNAUTHENTICATED,this.clientId=l2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,pe.Z)(function*(a){Ae("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ef(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function oC(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,pe.Z)(function*(s){r.isEqual(s)||(yield vB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),eM.apply(this,arguments)}function tM(n,e){return nM.apply(this,arguments)}function nM(){return(nM=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rM(n);Ae("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>FB(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>FB(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function XB(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function rM(n){return iM.apply(this,arguments)}function iM(){return(iM=(0,pe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield oC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!XB(t))throw t;ms("Error using user provided cache. Falling back to memory cache: "+t),yield oC(n,new qm)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield oC(n,new qm);return n._offlineComponents})).apply(this,arguments)}function aC(n){return sM.apply(this,arguments)}function sM(){return(sM=(0,pe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield tM(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield tM(n,new Tf))),n._onlineComponents})).apply(this,arguments)}function JB(n){return rM(n).then(e=>e.persistence)}function If(n){return rM(n).then(e=>e.localStore)}function eU(n){return aC(n).then(e=>e.remoteStore)}function oM(n){return aC(n).then(e=>e.syncEngine)}function Sf(n){return aM.apply(this,arguments)}function aM(){return(aM=(0,pe.Z)(function*(n){const e=yield aC(n),t=e.eventManager;return t.onListen=Lte.bind(null,e.syncEngine),t.onUnlisten=Bte.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Vte.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ute.bind(null,e.syncEngine),t})).apply(this,arguments)}function nU(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,o,a,l,c){const h=new sC({next:_=>{o.enqueueAndForget(()=>EA(s,m));const v=_.docs.has(a);!v&&_.fromCache?c.reject(new Te(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&l&&"server"===l.source?c.reject(new Te(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(_)},error:_=>c.reject(_)}),m=new TA(ef(a.path),h,{includeMetadataChanges:!0,ra:!0});return vA(s,m)}(yield Sf(n),n.asyncQueue,e,t,r)})),r.promise}function rU(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,o,a,l,c){const h=new sC({next:_=>{o.enqueueAndForget(()=>EA(s,m)),_.fromCache&&"server"===l.source?c.reject(new Te(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(_)},error:_=>c.reject(_)}),m=new TA(a,h,{includeMetadataChanges:!0,ra:!0});return vA(s,m)}(yield Sf(n),n.asyncQueue,e,t,r)})),r.promise}function iU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const sU=new Map;function lM(n,e,t){if(!t)throw new Te(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oU(n,e,t,r){if(!0===e&&!0===r)throw new Te(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aU(n){if(!Be.isDocumentKey(n))throw new Te(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lU(n){if(Be.isDocumentKey(n))throw new Te(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ge()}function Ft(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lC(n);throw new Te(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cU(n,e){if(e<=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class uU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=iU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new pJ;switch(r.type){case"firstParty":return new yJ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=sU.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),sU.delete(t),r.terminate())}(this),Promise.resolve()}}class gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class ra extends gi{constructor(e,t,r){super(e,t,ef(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Be(e))}withConverter(e){return new ra(this.firestore,e,this._path)}}function hU(n,e,...t){if(n=(0,ln.m9)(n),lM("collection","path",e),n instanceof Gm){const r=jt.fromString(e,...t);return lU(r),new ra(n,null,r)}{if(!(n instanceof zn||n instanceof ra))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return lU(r),new ra(n.firestore,null,r)}}function cC(n,e,...t){if(n=(0,ln.m9)(n),1===arguments.length&&(e=l2.newId()),lM("doc","path",e),n instanceof Gm){const r=jt.fromString(e,...t);return aU(r),new zn(n,null,new Be(r))}{if(!(n instanceof zn||n instanceof ra))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return aU(r),new zn(n.firestore,n instanceof ra?n.converter:null,new Be(r))}}function fU(n,e){return n=(0,ln.m9)(n),e=(0,ln.m9)(e),(n instanceof zn||n instanceof ra)&&(e instanceof zn||e instanceof ra)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cM(n,e){return n=(0,ln.m9)(n),e=(0,ln.m9)(e),n instanceof gi&&e instanceof gi&&n.firestore===e.firestore&&Im(n._query,e._query)&&n.converter===e.converter}class wne{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new JS(this,"async_queue_retry"),this.hu=()=>{const t=tC();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=tC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=tC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Gr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,pe.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Wl(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,br("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=yA.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ge()}verifyOperationInProgress(){}du(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function uM(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Ene{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class bn extends Gm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||pU(this),this._firestoreClient.terminate()}}function Xn(n){return n._firestoreClient||pU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pU(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZJ(n._databaseId,l,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iU(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new ane(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function gU(n,e,t){const r=new Gr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield oC(n,t),yield tM(n,e),r.resolve()}catch(i){const s=i;if(!XB(s))throw s;ms("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function mU(n){if(n._initialized||n._terminated)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(Zr.fromBase64String(e))}catch(t){throw new Te(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ia(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ku{constructor(e){this._methodName=e}}class uC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}}const Pne=/^__.*__$/;class xne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new af(e,this.data,t,this.fieldTransforms)}}class _U{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge()}}class dC{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new dC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return pC(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(yU(this.fu)&&Pne.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class One{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zm(e)}Fu(e,t,r,i=!1){return new dC({fu:e,methodName:t,vu:r,path:Hn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pu(n){const e=n._freezeSettings(),t=zm(n._databaseId);return new One(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hC(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);_M("Data must be an object, but it was:",o,r);const a=EU(r,o);let l,c;if(s.merge)l=new _s(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const _=Ym(e,m,t);if(!o.contains(_))throw new Te(ce.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);bU(h,_)||h.push(_)}l=new _s(h),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new xne(new pi(a),l,c)}class Km extends ku{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Km}}function vU(n,e,t){return new dC({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dM extends ku{_toFieldTransform(e){return new Rm(e.path,new rf)}isEqual(e){return e instanceof dM}}class hM extends ku{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=vU(this,e,!0),r=this.Mu.map(s=>xu(s,t)),i=new Cu(r);return new Rm(e.path,i)}isEqual(e){return e instanceof hM&&(0,ln.vZ)(this.Mu,e.Mu)}}class fM extends ku{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=vU(this,e,!0),r=this.Mu.map(s=>xu(s,t)),i=new bu(r);return new Rm(e.path,i)}isEqual(e){return e instanceof fM&&(0,ln.vZ)(this.Mu,e.Mu)}}class pM extends ku{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new sf(e.serializer,o3(e.serializer,this.xu));return new Rm(e.path,t)}isEqual(e){return e instanceof pM&&this.xu===e.xu}}function gM(n,e,t,r){const i=n.Fu(1,e,t);_M("Data must be an object, but it was:",i,r);const s=[],o=pi.empty();ql(r,(l,c)=>{const h=fC(e,l,t);c=(0,ln.m9)(c);const m=i.Su(h);if(c instanceof Km)s.push(h);else{const _=xu(c,m);null!=_&&(s.push(h),o.set(h,_))}});const a=new _s(s);return new _U(o,a,i.fieldTransforms)}function mM(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Ym(e,r,t)],l=[i];if(s.length%2!=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(Ym(e,s[_])),l.push(s[_+1]);const c=[],h=pi.empty();for(let _=a.length-1;_>=0;--_)if(!bU(c,a[_])){const v=a[_];let C=l[_];C=(0,ln.m9)(C);const I=o.Su(v);if(C instanceof Km)c.push(v);else{const S=xu(C,I);null!=S&&(c.push(v),h.set(v,S))}}const m=new _s(c);return new _U(h,m,o.fieldTransforms)}function wU(n,e,t,r=!1){return xu(t,n.Fu(r?4:3,e))}function xu(n,e){if(CU(n=(0,ln.m9)(n)))return _M("Unsupported field value:",e,n),EU(n,e);if(n instanceof ku)return function(r,i){if(!yU(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=xu(a,i.bu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,ln.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return o3(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Yn.fromDate(r);return{timestampValue:cf(i.serializer,s)}}if(r instanceof Yn){const s=new Yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cf(i.serializer,s)}}if(r instanceof uC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ia)return{bytesValue:A3(i.serializer,r._byteString)};if(r instanceof zn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:SS(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${lC(r)}`)}(n,e)}function EU(n,e){const t={};return I2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ql(n,(r,i)=>{const s=xu(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function CU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof uC||n instanceof ia||n instanceof zn||n instanceof ku)}function _M(n,e,t){if(!CU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=lC(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Ym(n,e,t){if((e=(0,ln.m9)(e))instanceof Wa)return e._internalPath;if("string"==typeof e)return fC(n,e);throw pC("Field path arguments must be of type string or ",n,!1,void 0,t)}const Nne=new RegExp("[~\\*/\\[\\]]");function fC(n,e,t){if(e.search(Nne)>=0)throw pC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wa(...e.split("."))._internalPath}catch{throw pC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pC(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Te(ce.INVALID_ARGUMENT,a+n+l)}function bU(n,e){return n.some(t=>t.isEqual(e))}class Qm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fne(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fne extends Qm{data(){return super.data()}}function gC(n,e){return"string"==typeof e?fC(n,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}function DU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yM{}class Xm extends yM{}function ic(n,e,...t){let r=[];e instanceof yM&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Af).length,a=s.filter(l=>l instanceof Jm).length;if(o>1||o>0&&a>0)throw new Te(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Jm extends Xm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Jm(e,t,r)}_apply(e){const t=this._parse(e);return AU(e._query,t),new gi(e.firestore,e.converter,vS(e._query,t))}_parse(e){const t=Pu(e.firestore);return function(s,o,a,l,c,h,m){let _;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){SU(m,h);const v=[];for(const C of m)v.push(IU(l,s,C));_={arrayValue:{values:v}}}else _=IU(l,s,m)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||SU(m,h),_=wU(a,"where",m,"in"===h||"not-in"===h);return Ht.create(c,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Af extends yM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Af(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)AU(o,l),o=vS(o,l)}(e._query,t),new gi(e.firestore,e.converter,vS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class vM extends Xm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new vM(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dm(s,o)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ua(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class mC extends Xm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mC(e,t,r)}_apply(e){return new gi(e.firestore,e.converter,OE(e._query,this._limit,this._limitType))}}class _C extends Xm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _C(e,t,r)}_apply(e){const t=TU(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(s=t,new Ua((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class yC extends Xm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yC(e,t,r)}_apply(e){const t=TU(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(s=t,new Ua((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function TU(n,e,t,r){if(t[0]=(0,ln.m9)(t[0]),t[0]instanceof Qm)return function(s,o,a,l,c){if(!l)throw new Te(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const m of tf(s))if(m.field.isKeyField())h.push(wu(o,l.key));else{const _=l.data.field(m.field);if(SE(_))throw new Te(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=m.field.canonicalString();throw new Te(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(_)}return new Ql(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Pu(n.firestore);return function(o,a,l,c,h,m){const _=o.explicitOrderBy;if(h.length>_.length)throw new Te(ce.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let C=0;C<h.length;C++){const I=h[C];if(_[C].field.isKeyField()){if("string"!=typeof I)throw new Te(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof I}`);if(!yS(o)&&-1!==I.indexOf("/"))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${I}' contains a slash.`);const S=o.path.child(jt.fromString(I));if(!Be.isDocumentKey(S))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const j=new Be(S);v.push(wu(a,j))}else{const S=wU(l,c,I);v.push(S)}}return new Ql(v,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function IU(n,e,t){if("string"==typeof(t=(0,ln.m9)(t))){if(""===t)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yS(e)&&-1!==t.indexOf("/"))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(jt.fromString(t));if(!Be.isDocumentKey(r))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wu(n,new Be(r))}if(t instanceof zn)return wu(n,t._key);throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lC(t)}.`)}function SU(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AU(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Te(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wM{convertValue(e,t="none"){switch(Kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ql(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new uC(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=AE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wm(e));default:return null}}convertTimestamp(e){const t=Va(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=jt.fromString(e);Je(U3(r));const i=new Gl(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(t)||br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function vC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Wne extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qa extends Qm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new e_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class e_ extends qa{data(e={}){return super.data(e)}}class sc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ou(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new e_(this._firestore,this._userDataWriter,r.key,r,new Ou(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new e_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ou(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new e_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ou(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Gne(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Gne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge()}}function RU(n,e){return n instanceof qa&&e instanceof qa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof sc&&e instanceof sc&&n._firestore===e._firestore&&cM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class oc extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function kU(n,e,t){n=Ft(n,zn);const r=Ft(n.firestore,bn),i=vC(n.converter,e,t);return Mf(r,[hC(Pu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qn.none())])}function PU(n,e,t,...r){n=Ft(n,zn);const i=Ft(n.firestore,bn),s=Pu(i);let o;return o="string"==typeof(e=(0,ln.m9)(e))||e instanceof Wa?mM(s,"updateDoc",n._key,e,t,r):gM(s,"updateDoc",n._key,e),Mf(i,[o.toMutation(n._key,Qn.exists(!0))])}function xU(n,...e){var t,r,i;n=(0,ln.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||uM(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uM(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let l,c,h;if(n instanceof zn)c=Ft(n.firestore,bn),h=ef(n._key.path),l={next:m=>{e[o]&&e[o](EM(c,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Ft(n,gi);c=Ft(m.firestore,bn),h=m._query;const _=new oc(c);l={next:v=>{e[o]&&e[o](new sc(c,_,m,v))},error:e[o+1],complete:e[o+2]},DU(n._query)}return function(_,v,C,I){const S=new sC(I),j=new TA(v,S,C);return _.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return vA(yield Sf(_),j)})),()=>{S.$a(),_.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return EA(yield Sf(_),j)}))}}(Xn(c),h,a,l)}function Mf(n,e){return function(r,i){const s=new Gr;return r.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function jte(n,e,t){return xA.apply(this,arguments)}(yield oM(r),i,s)})),s.promise}(Xn(n),e)}function EM(n,e,t){const r=t.docs.get(e._key),i=new oc(n);return new qa(n,i,e._key,r,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}const dre={maxAttempts:5};class OU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pu(e)}set(e,t,r){this._verifyNotCommitted();const i=ac(e,this._firestore),s=vC(i.converter,t,r),o=hC(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=ac(e,this._firestore);let o;return o="string"==typeof(t=(0,ln.m9)(t))||t instanceof Wa?mM(this._dataReader,"WriteBatch.update",s._key,t,r,i):gM(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ac(e,this._firestore);return this._mutations=this._mutations.concat(new lf(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ac(n,e){if((n=(0,ln.m9)(n)).firestore!==e)throw new Te(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hre extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Pu(t)}get(t){const r=ac(t,this._firestore),i=new Wne(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ge();const o=s[0];if(o.isFoundDocument())return new Qm(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Qm(this._firestore,i,r._key,null,r.converter);throw Ge()})}set(t,r,i){const s=ac(t,this._firestore),o=vC(s.converter,r,i),a=hC(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=ac(t,this._firestore);let a;return a="string"==typeof(r=(0,ln.m9)(r))||r instanceof Wa?mM(this._dataReader,"Transaction.update",o._key,r,i,s):gM(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=ac(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ac(e,this._firestore),r=new oc(this._firestore);return super.get(e).then(i=>new qa(this._firestore,r,t._key,i._document,new Ou(!1,!1),t.converter))}}function bM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VU(){if(typeof Uint8Array>"u")throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function BU(){if(!function qJ(){return typeof atob<"u"}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){qh=jh.SDK_VERSION,(0,jh._registerComponent)(new ZV.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new bn(new mJ(r.getProvider("auth-internal")),new vJ(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Te(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,jh.registerVersion)(s2,"4.6.3",e),(0,jh.registerVersion)(s2,"4.6.3","esm2017")}();class t_{constructor(e){this._delegate=e}static fromBase64String(e){return BU(),new t_(ia.fromBase64String(e))}static fromUint8Array(e){return VU(),new t_(ia.fromUint8Array(e))}toBase64(){return BU(),this._delegate.toBase64()}toUint8Array(){return VU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DM(n){return function Cre(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bre{enableIndexedDbPersistence(e,t){return function bne(n,e){mU(n=Ft(n,bn));const t=Xn(n);if(t._uninitializedComponentsProvider)throw new Te(ce.FAILED_PRECONDITION,"SDK cache is already specified.");ms("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Tf;return gU(t,i,new JA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Dne(n){mU(n=Ft(n,bn));const e=Xn(n);if(e._uninitializedComponentsProvider)throw new Te(ce.FAILED_PRECONDITION,"SDK cache is already specified.");ms("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Tf;return gU(e,r,new YB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tne(n){if(n._initialized&&!n._terminated)throw new Te(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(i){if(!Xo.D())return Promise.resolve();const s=i+"main";yield Xo.delete(s)}),function r(i){return t.apply(this,arguments)})(HS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class UU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ms("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function dU(n,e,t,r={}){var i;const s=(n=Ft(n,Gm))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=ri.MOCK_USER;else{a=(0,ln.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Te(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ri(c)}n._authCredentials=new gJ(new o2(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function Sne(n){return function lne(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield JB(n),t=yield eU(n);return e.setNetworkEnabled(!0),function(i){const s=Le(i);return s.M_.delete(0),Wm(s)}(t)}))}(Xn(n=Ft(n,bn)))}(this._delegate)}disableNetwork(){return function Ane(n){return function cne(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield JB(n),t=yield eU(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(s){const o=Le(s);o.M_.add(0),yield _f(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Xn(n=Ft(n,bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,oU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ine(n){return function(t){const r=new Gr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function Wte(n,e){return VA.apply(this,arguments)}(yield oM(t),r)})),r.promise}(Xn(n=Ft(n,bn)))}(this._delegate)}onSnapshotsInSync(e){return function nre(n,e){return function fne(n,e){const t=new sC(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield Sf(n),s=t,Le(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield Sf(n),s=t,void Le(i).z_.delete(s);var i,s}))}}(Xn(n=Ft(n,bn)),uM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rf(this,hU(this._delegate,e))}catch(t){throw Ki(t,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,cC(this._delegate,e))}catch(t){throw Ki(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yi(this,function vne(n,e){if(n=Ft(n,Gm),lM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gi(n,null,(r=e,new Ua(jt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ki(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fre(n,e,t){n=Ft(n,bn);const r=Object.assign(Object.assign({},dre),t);return function(s){if(s.maxAttempts<1)throw new Te(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Gr;return s.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const c=yield function tU(n){return aC(n).then(e=>e.datastore)}(s);new one(s.asyncQueue,c,a,o,l).Xa()})),l.promise}(Xn(n),i=>e(new hre(n,i)),r)}(this._delegate,t=>e(new jU(this,t)))}batch(){return Xn(this._delegate),new HU(new OU(this._delegate,e=>Mf(this._delegate,e)))}loadBundle(e){return function Mne(n,e){const t=Xn(n=Ft(n,bn)),r=new Ene;return function pne(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?w3().encode(o):o,h=function(h,m){if(h instanceof Uint8Array)return QB(h,m);if(h instanceof ArrayBuffer)return QB(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new ine(h,a);var h}(t,zm(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function nne(n,e,t){const r=Le(n);var i;(i=(0,pe.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(C,I){const S=Le(C),j=Dr(I.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",O=>S.$r.getBundleMetadata(O,I.id)).then(O=>!!O&&O.createTime.compareTo(j)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(C=c).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);l._updateProgress(UB(c));const h=new xte(c,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const v=yield h._a(m);v&&l._updateProgress(v),m=yield a.qa()}const _=yield h.complete();return yield za(o,_.ca,void 0),yield function(C,I){const S=Le(C);return S.persistence.runTransaction("Save bundle","readwrite",j=>S.$r.saveBundleMetadata(j,I))}(o.localStore,c),l._completeWith(_.progress),Promise.resolve(_.ua)}catch(c){return ms("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var C}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Rne(n,e){return function gne(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(r,i){const s=Le(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield If(n),e)}))}(Xn(n=Ft(n,bn)),e).then(t=>t?new gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Yi(this,t):null)}}class EC extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new t_(new ia(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(t,this.firestore,null)}}class jU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}get(e){const t=Fu(e);return this._delegate.get(t).then(r=>new n_(this._firestore,new qa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fu(e);return r?(bM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fu(e);return this._delegate.delete(t),this}}class HU{constructor(e){this._delegate=e}set(e,t,r){const i=Fu(e);return r?(bM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new e_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new r_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Nu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Nu(e,new EC(e),t),i.set(t,s)),s}}Nu.INSTANCES=new WeakMap;class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new no(t,new zn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new no(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Rf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rf(this.firestore,hU(this._delegate,e))}catch(t){throw Ki(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ln.m9)(e))instanceof zn&&fU(this._delegate,e)}set(e,t){t=bM("DocumentReference.set",t);try{return t?kU(this._delegate,e,t):kU(this._delegate,e)}catch(r){throw Ki(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PU(this._delegate,e):PU(this._delegate,e,t,...r)}catch(i){throw Ki(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ere(n){return Mf(Ft(n.firestore,bn),[new lf(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=$U(e),r=zU(e,i=>new n_(this.firestore,new qa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Kne(n){n=Ft(n,zn);const e=Ft(n.firestore,bn),t=Xn(e),r=new oc(e);return function une(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,o,a){try{const l=yield function(h,m){const _=Le(h);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,m))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Te(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Ef(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield If(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qa(e,r,n._key,i,new Ou(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Yne(n){n=Ft(n,zn);const e=Ft(n.firestore,bn);return nU(Xn(e),n._key,{source:"server"}).then(t=>EM(e,n,t))}(this._delegate):function Zne(n){n=Ft(n,zn);const e=Ft(n.firestore,bn);return nU(Xn(e),n._key).then(t=>EM(e,n,t))}(this._delegate),t.then(r=>new n_(this.firestore,new qa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}function Ki(n,e,t){return n.message=n.message.replace(e,t),n}function $U(n){for(const e of n)if("object"==typeof e&&!DM(e))return e;return{}}function zU(n,e){var t,r;let i;return i=DM(n[0])?n[0]:DM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class n_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RU(this._delegate,e._delegate)}}class r_ extends n_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function fJ(n,e){n||Ge()}(void 0!==t),t}}class Yi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}where(e,t,r){try{return new Yi(this.firestore,ic(this._delegate,function Lne(n,e,t){const r=e,i=gC("where",n);return Jm._create(i,r,t)}(e,t,r)))}catch(i){throw Ki(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yi(this.firestore,ic(this._delegate,function Vne(n,e="asc"){const t=e,r=gC("orderBy",n);return vM._create(r,t)}(e,t)))}catch(r){throw Ki(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yi(this.firestore,ic(this._delegate,function Bne(n){return cU("limit",n),mC._create("limit",n,"F")}(e)))}catch(t){throw Ki(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yi(this.firestore,ic(this._delegate,function Une(n){return cU("limitToLast",n),mC._create("limitToLast",n,"L")}(e)))}catch(t){throw Ki(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yi(this.firestore,ic(this._delegate,function jne(...n){return _C._create("startAt",n,!0)}(...e)))}catch(t){throw Ki(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yi(this.firestore,ic(this._delegate,function Hne(...n){return _C._create("startAfter",n,!1)}(...e)))}catch(t){throw Ki(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yi(this.firestore,ic(this._delegate,function $ne(...n){return yC._create("endBefore",n,!1)}(...e)))}catch(t){throw Ki(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yi(this.firestore,ic(this._delegate,function zne(...n){return yC._create("endAt",n,!0)}(...e)))}catch(t){throw Ki(t,"endAt()","Query.endAt()")}}isEqual(e){return cM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Xne(n){n=Ft(n,gi);const e=Ft(n.firestore,bn),t=Xn(e),r=new oc(e);return function dne(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,o,a){try{const l=yield QE(s,o,!0),c=new $B(o,l.hs),h=c.da(l.documents),m=c.applyChanges(h,!1);a.resolve(m.snapshot)}catch(l){const c=Ef(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield If(n),e,t);var r})),t.promise}(t,n._query).then(i=>new sc(e,r,n,i))}(this._delegate):"server"===e?.source?function Jne(n){n=Ft(n,gi);const e=Ft(n.firestore,bn),t=Xn(e),r=new oc(e);return rU(t,n._query,{source:"server"}).then(i=>new sc(e,r,n,i))}(this._delegate):function Qne(n){n=Ft(n,gi);const e=Ft(n.firestore,bn),t=Xn(e),r=new oc(e);return DU(n._query),rU(t,n._query).then(i=>new sc(e,r,n,i))}(this._delegate),t.then(r=>new TM(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$U(e),r=zU(e,i=>new TM(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xU(this._delegate,t,r)}withConverter(e){return new Yi(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}class Tre{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new r_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new r_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Tre(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new r_(this._firestore,r))})}isEqual(e){return RU(this._delegate,e._delegate)}}class Rf extends Yi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return new no(this.firestore,void 0===e?cC(this._delegate):cC(this._delegate,e))}catch(t){throw Ki(t,"doc()","CollectionReference.doc()")}}add(e){return function tre(n,e){const t=Ft(n.firestore,bn),r=cC(n),i=vC(n.converter,e);return Mf(t,[hC(Pu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new no(this.firestore,t))}isEqual(e){return fU(this._delegate,e._delegate)}withConverter(e){return new Rf(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}function Fu(n){return Ft(n,zn)}class IM{constructor(...e){this._delegate=new Wa(...e)}static documentId(){return new IM(Hn.keyField().canonicalString())}isEqual(e){return(e=(0,ln.m9)(e))instanceof Wa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gre(){return new dM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lu(e)}static delete(){const e=function pre(){return new Km("deleteField")}();return e._methodName="FieldValue.delete",new Lu(e)}static arrayUnion(...e){const t=function mre(...n){return new hM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lu(t)}static arrayRemove(...e){const t=function _re(...n){return new fM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lu(t)}static increment(e){const t=function yre(n){return new pM("increment",n)}(e);return t._methodName="FieldValue.increment",new Lu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ire={Firestore:UU,GeoPoint:uC,Timestamp:Yn,Blob:t_,Transaction:jU,WriteBatch:HU,DocumentReference:no,DocumentSnapshot:n_,Query:Yi,QueryDocumentSnapshot:r_,QuerySnapshot:TM,CollectionReference:Rf,FieldPath:IM,FieldValue:Lu,setLogLevel:function Dre(n){!function hJ(n){$l.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function WU(n,e){return function Mre(n,e=Hh){return new dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function SM(n,e){return WU(n,e).pipe(Ne(t=>({payload:t,type:"query"})))}!function Are(n){(function Sre(n,e){n.INTERNAL.registerComponent(new ZV.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Ire)))})(n,(e,t)=>new UU(e,t,new bre)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(gs.Z);class qU{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=XU(r,t);return new KU(i,s,this.afs)}snapshotChanges(){return function Rre(n,e){return WU(n,e).pipe(to(void 0),Wh(),Ne(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ks)}valueChanges(e={}){return this.snapshotChanges().pipe(Ne(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return K(this.ref.get(e)).pipe(ks)}}function CC(n,e){return SM(n,e).pipe(to(void 0),Wh(),Ne(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(m=>m.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function GU(n,e,t){return CC(n,t).pipe(Jw((r,i)=>function kre(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Pre(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return AM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return AM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return AM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),gr(),Ne(r=>r.map(i=>({type:i.type,payload:i}))))}function AM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function ZU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class KU{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=CC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ne(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(to(void 0),Wh(),dn(([r,i])=>i.length>0||!r),Ne(([,r])=>r),ks)}auditTrail(e){return this.stateChanges(e).pipe(Jw((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZU(e);return GU(this.query,t,this.afs.schedulers.outsideAngular).pipe(ks)}valueChanges(e={}){return SM(this.query,this.afs.schedulers.outsideAngular).pipe(Ne(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ks)}get(e){return K(this.query.get(e)).pipe(ks)}add(e){return this.ref.add(e)}doc(e){return new qU(this.ref.doc(e),this.afs)}}class xre{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CC(this.query,this.afs.schedulers.outsideAngular).pipe(Ne(t=>t.filter(r=>e.indexOf(r.type)>-1)),dn(t=>t.length>0),ks):CC(this.query,this.afs.schedulers.outsideAngular).pipe(ks)}auditTrail(e){return this.stateChanges(e).pipe(Jw((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZU(e);return GU(this.query,t,this.afs.schedulers.outsideAngular).pipe(ks)}valueChanges(e={}){return SM(this.query,this.afs.schedulers.outsideAngular).pipe(Ne(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ks)}get(e){return K(this.query.get(e)).pipe(ks)}}const YU=new be("angularfire2.enableFirestorePersistence"),QU=new be("angularfire2.firestore.persistenceSettings"),Ore=new be("angularfire2.firestore.settings"),Nre=new be("angularfire2.firestore.use-emulator");function XU(n,e=(t=>t)){return{query:e(n),ref:n}}let Vu=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,h,m,_,v,C,I,S,j,O){this.schedulers=l;const q=nS(t,a,r),te=h;m&&GV(q,a,_,C,I,S,v,j),[this.firestore,this.persistenceEnabled$]=LV(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{const ye=a.runOutsideAngular(()=>q.firestore());if(s&&ye.settings(s),te&&ye.useEmulator(...te),i&&!Ww(o)){const Pe=()=>{try{return K(ye.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(z){return typeof console<"u"&&console.warn(z),me(!1)}};return[ye,a.runOutsideAngular(Pe)]}return[ye,me(!1)]},[s,te,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=XU(i,r),a=this.schedulers.ngZone.run(()=>s);return new KU(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new xre(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Q(wE),Q(EE,8),Q(YU,8),Q(Ore,8),Q(Gs),Q(it),Q(NV),Q(QU,8),Q(Nre,8),Q(iS,8),Q(jV,8),Q(HV,8),Q($V,8),Q(zV,8),Q(WV,8),Q(qV,8),Q(xV,8))};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Fre=(()=>{class n{constructor(){gs.Z.registerVersion("angularfire",tS.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:YU,useValue:!0},{provide:QU,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=qt({providers:[Vu]})}return n})(),sa=(()=>{class n{constructor(t,r){this.afAuth=t,this.firestore=r,this.user$=this.afAuth.authState}login(t,r){var i=this;return(0,pe.Z)(function*(){yield i.afAuth.signInWithEmailAndPassword(t,r)})()}register(t,r){var i=this;return(0,pe.Z)(function*(){yield i.afAuth.createUserWithEmailAndPassword(t,r)})()}resetPassword(t){var r=this;return(0,pe.Z)(function*(){yield r.afAuth.sendPasswordResetEmail(t)})()}logout(){var t=this;return(0,pe.Z)(function*(){yield t.afAuth.signOut()})()}updateProfile(t,r,i,s,o){var a=this;return(0,pe.Z)(function*(){const l=gs.Z.auth().currentUser;return l?(yield l.updateProfile({displayName:t}),a.firestore.collection("users").doc(l.uid).set({displayName:t,bio:r||"",company:i||"",position:s||"",team:o||""},{merge:!0})):Promise.reject("\u30e6\u30fc\u30b6\u30fc\u304c\u8a8d\u8a3c\u3055\u308c\u3066\u3044\u307e\u305b\u3093")})()}getUserById(t){return this.firestore.collection("users").doc(t).valueChanges()}getCurrentUser(){return gs.Z.auth().currentUser}getCurrentUserId(){const t=this.getCurrentUser();return t?t.uid:null}static#e=this.\u0275fac=function(r){return new(r||n)(Q(iS),Q(Vu))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Lre=function(){return["/calendar"]},Vre=function(){return["/projects"]},Bre=function(){return["/tasks"]},Ure=function(){return["/profile"]},jre=function(){return["/user-search"]};let Hre=(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.title="todo-app",this.router.events.subscribe(i=>{i instanceof Oa&&console.log("\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u307e\u3057\u305f:",i.urlAfterRedirects)})}logClick(t,r){r.preventDefault();const i=this.getPathFromLinkName(t);console.log(`${t}\u30ea\u30f3\u30af\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u307e\u3057\u305f`),this.router.navigate([i]).then(()=>{console.log(`${t}\u30ea\u30f3\u30af\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f`)})}getPathFromLinkName(t){switch(t){case"\u30ab\u30ec\u30f3\u30c0\u30fc":return"/calendar";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8":return"/projects";case"\u30bf\u30b9\u30af\u4e00\u89a7":return"/tasks";case"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb":return"/profile";case"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22":return"/user-search";default:return"/"}}logOut(){this.authService.logout().then(()=>{this.router.navigate(["/login"])}).catch(t=>{console.error("\u30ed\u30b0\u30a2\u30a6\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t)})}static#e=this.\u0275fac=function(r){return new(r||n)(U(Pi),U(sa))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-root"]],standalone:!0,features:[Ri],decls:24,vars:10,consts:[[1,"app-container"],[1,"side-nav"],[1,"nav-link",3,"routerLink"],[1,"spacer"],[1,"logout-button",3,"click"],[1,"content"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1)(2,"nav")(3,"ul")(4,"li")(5,"a",2),x(6,"\u30ab\u30ec\u30f3\u30c0\u30fc"),T()(),b(7,"li")(8,"a",2),x(9,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),T()(),b(10,"li")(11,"a",2),x(12,"\u30bf\u30b9\u30af\u4e00\u89a7"),T()(),b(13,"li")(14,"a",2),x(15,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),T()(),b(16,"li")(17,"a",2),x(18,"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22"),T()()()(),kn(19,"div",3),b(20,"button",4),ae("click",function(){return i.logOut()}),x(21,"\u30ed\u30b0\u30a2\u30a6\u30c8"),T()(),b(22,"div",5),kn(23,"router-outlet"),T()()),2&r&&(H(5),Y("routerLink",jn(5,Lre)),H(3),Y("routerLink",jn(6,Vre)),H(3),Y("routerLink",jn(7,Bre)),H(3),Y("routerLink",jn(8,Ure)),H(3),Y("routerLink",jn(9,jre)))},dependencies:[WI,Wr,Hl,pu],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.side-nav[_ngcontent-%COMP%]{width:200px;background-color:#f8f9fa;display:flex;flex-direction:column;padding:10px}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;padding:10px;color:#000;border-radius:4px;display:block}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.spacer[_ngcontent-%COMP%]{flex-grow:1}.logout-button[_ngcontent-%COMP%]{padding:10px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer;text-align:center}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}"]})}return n})();class JU{}class $re{}const Ga="*";function bC(n,e=null){return{type:4,styles:e,timings:n}}function nj(n,e=null){return{type:2,steps:n,options:e}}function lc(n){return{type:6,styles:n,offset:null}}function DC(n,e,t){return{type:0,name:n,styles:e,options:t}}function TC(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class i_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class sj{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function oj(n){return new P(3e3,!1)}function cc(n){switch(n.length){case 0:return new i_;case 1:return n[0];default:return new sj(n)}}function aj(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),h=c==o,m=h&&a||new Map;l.forEach((_,v)=>{let C=v,I=_;if("offset"!==v)switch(C=n.normalizePropertyName(C,i),I){case"!":I=t.get(v);break;case Ga:I=r.get(v);break;default:I=n.normalizeStyleValue(v,C,I,i)}m.set(C,I)}),h||s.push(m),a=m,o=c}),i.length)throw function hie(n){return new P(3502,!1)}();return s}function RM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&kM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&kM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&kM(t,"destroy",n)))}}function kM(n,e,t){const s=PM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function PM(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Os(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function lj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Die=(()=>typeof document>"u"?null:document.documentElement)();function xM(n){const e=n.parentNode||n.host||null;return e===Die?null:e}let Bu=null,cj=!1;function uj(n,e){for(;e;){if(e===n)return!0;e=xM(e)}return!1}function dj(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let hj=(()=>{class n{validateStyleProperty(t){return function Iie(n){Bu||(Bu=function Sie(){return typeof document<"u"?document.body:null}()||{},cj=!!Bu.style&&"WebkitAppearance"in Bu.style);let e=!0;return Bu.style&&!function Tie(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Bu.style,!e&&cj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Bu.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return uj(t,r)}getParentElement(t){return xM(t)}query(t,r,i){return dj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new i_(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),OM=(()=>{class n{static#e=this.NOOP=new hj}return n})();const Aie=1e3,NM="ng-enter",IC="ng-leave",SC="ng-trigger",AC=".ng-trigger",pj="ng-animating",FM=".ng-animating";function Za(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:LM(parseFloat(e[1]),e[2])}function LM(n,e){return"s"===e?n*Aie:n}function MC(n,e,t){return n.hasOwnProperty("duration")?n:function Rie(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(oj()),{duration:0,delay:0,easing:""};i=LM(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=LM(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function zre(){return new P(3100,!1)}()),a=!0),s<0&&(e.push(function Wre(){return new P(3101,!1)}()),a=!0),a&&e.splice(l,0,oj())}return{duration:i,delay:s,easing:o}}(n,e,t)}function s_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function gj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function uc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function oa(n,e,t){e.forEach((r,i)=>{const s=BM(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Uu(n,e){e.forEach((t,r)=>{const i=BM(r);n.style[i]=""})}function o_(n){return Array.isArray(n)?1==n.length?n[0]:nj(n):n}const VM=new RegExp("{{\\s*(.+?)\\s*}}","g");function _j(n){let e=[];if("string"==typeof n){let t;for(;t=VM.exec(n);)e.push(t[1]);VM.lastIndex=0}return e}function a_(n,e,t){const r=n.toString(),i=r.replace(VM,(s,o)=>{let a=e[o];return null==a&&(t.push(function Gre(n){return new P(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function RC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const xie=/-+([a-z0-9])/g;function BM(n){return n.replace(xie,(...e)=>e[1].toUpperCase())}function Ns(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Zre(n){return new P(3004,!1)}()}}function yj(n,e){return window.getComputedStyle(n)[e]}const kC="*";function Fie(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Lie(n,e,t){if(":"==n[0]){const l=function Vie(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function lie(n){return new P(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function aie(n){return new P(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(vj(i,o));"<"==s[0]&&!(i==kC&&o==kC)&&e.push(vj(o,i))}(r,t,e)):t.push(n),t}const PC=new Set(["true","1"]),xC=new Set(["false","0"]);function vj(n,e){const t=PC.has(n)||xC.has(n),r=PC.has(e)||xC.has(e);return(i,s)=>{let o=n==kC||n==i,a=e==kC||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?PC.has(n):xC.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?PC.has(e):xC.has(e)),o&&a}}const Bie=new RegExp("s*:selfs*,?","g");function UM(n,e,t,r){return new Uie(n).build(e,t,r)}class Uie{constructor(e){this._driver=e}build(e,t,r){const i=new $ie(t);return this._resetContextStyleTimingState(i),Ns(this,o_(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Yre(){return new P(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function Qre(){return new P(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{_j(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(RC(s.values()),t.errors.push(function Xre(n,e){return new P(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ns(this,o_(e.animation),t);return{type:1,matchers:Fie(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ju(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ns(this,r,t)),options:ju(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Ns(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:ju(e.options)}}visitAnimate(e,t){const r=function Wie(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return jM(MC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=jM(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=MC(t,e);return jM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:lc({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=lc(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Ga?r.push(a):t.errors.push(new P(3002,!1)):r.push(gj(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let m=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(function eie(n,e,t,r,i){return new P(3010,!1)}()),m=!1),s=h.startTime),m&&c.set(l,{startTime:s,endTime:i}),t.options&&function Pie(n,e,t){const r=e.params||{},i=_j(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function qre(n){return new P(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function tie(){return new P(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const h=e.steps.map(j=>{const O=this._makeStyleAst(j,t);let q=null!=O.offset?O.offset:function zie(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(O.styles),te=0;return null!=q&&(s++,te=O.offset=q),l=l||te<0||te>1,a=a||te<c,c=te,o.push(te),O});l&&t.errors.push(function nie(){return new P(3012,!1)}()),a&&t.errors.push(function rie(){return new P(3200,!1)}());const m=e.steps.length;let _=0;s>0&&s<m?t.errors.push(function iie(){return new P(3202,!1)}()):0==s&&(_=1/(m-1));const v=m-1,C=t.currentTime,I=t.currentAnimateTimings,S=I.duration;return h.forEach((j,O)=>{const q=_>0?O==v?1:_*O:o[O],te=q*S;t.currentTime=C+I.delay+te,I.duration=te,this._validateStyleAst(j,t),j.offset=q,r.styles.push(j)}),r}visitReference(e,t){return{type:8,animation:Ns(this,o_(e.animation),t),options:ju(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ju(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ju(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function jie(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Bie,"")),n=n.replace(/@\*/g,AC).replace(/@\w+/g,t=>AC+"-"+t.slice(1)).replace(/:animating/g,FM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Os(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ns(this,o_(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ju(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function sie(){return new P(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:MC(e.timings,t.errors,!0);return{type:12,animation:Ns(this,o_(e.animation),t),timings:r,options:null}}}class $ie{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ju(n){return n?(n=s_(n)).params&&(n.params=function Hie(n){return n?s_(n):null}(n.params)):n={},n}function jM(n,e,t){return{duration:n,delay:e,easing:t}}function HM(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class OC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Zie=new RegExp(":enter","g"),Yie=new RegExp(":leave","g");function $M(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new Qie).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class Qie{buildKeyframes(e,t,r,i,s,o,a,l,c,h=[]){c=c||new OC;const m=new zM(e,t,c,i,s,h,[]);m.options=l;const _=l.delay?Za(l.delay):0;m.currentTimeline.delayNextStep(_),m.currentTimeline.setStyles([o],null,m.errors,l),Ns(this,r,m);const v=m.timelines.filter(C=>C.containsAnimation());if(v.length&&a.size){let C;for(let I=v.length-1;I>=0;I--){const S=v[I];if(S.element===t){C=S;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([a],null,m.errors,l)}return v.length?v.map(C=>C.buildKeyframes()):[HM(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Za(a_(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Za(r.duration):null,a=null!=r.delay?Za(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ns(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=NC);const o=Za(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ns(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Za(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ns(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return MC(t.params?a_(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Za(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=NC);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const m=t.createSubContext(e.options,c);s&&m.delayNextStep(s),c===t.element&&(l=m.currentTimeline),Ns(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const m=h.currentTime;Ns(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const NC={};class zM{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=NC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new FC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Za(r.duration)),null!=r.delay&&(i.delay=Za(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=a_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new zM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=NC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Xie(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Zie,"."+this._enterClassName)).replace(Yie,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function oie(n){return new P(3014,!1)}()),a}}class FC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new FC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ga),this._currentKeyframe.set(t,Ga);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Jie(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Ga)}else uc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=a_(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ga),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=uc(a,new Map,this._backFill);c.forEach((h,m)=>{"!"===h?e.add(m):h===Ga&&t.add(m)}),r||c.set("offset",l/this.duration),i.push(c)});const s=e.size?RC(e.values()):[],o=t.size?RC(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return HM(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Xie extends FC{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=uc(e[0]);l.set("offset",0),s.push(l);const c=uc(e[0]);c.set("offset",Cj(a)),s.push(c);const h=e.length-1;for(let m=1;m<=h;m++){let _=uc(e[m]);const v=_.get("offset");_.set("offset",Cj((t+v*r)/o)),s.push(_)}r=o,t=0,i="",e=s}return HM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Cj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class WM{}const ese=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class tse extends WM{normalizePropertyName(e,t){return BM(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(ese.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Kre(n,e){return new P(3005,!1)}())}return o+s}}function bj(n,e,t,r,i,s,o,a,l,c,h,m,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:m,errors:_}}const qM={};class Dj{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function nse(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,h){const m=[],_=this.ast.options&&this.ast.options.params||qM,C=this.buildStyles(r,a&&a.params||qM,m),I=l&&l.params||qM,S=this.buildStyles(i,I,m),j=new Set,O=new Map,q=new Map,te="void"===i,ye={params:rse(I,_),delay:this.ast.options?.delay},Pe=h?[]:$M(e,t,this.ast.animation,s,o,C,S,ye,c,m);let z=0;if(Pe.forEach(N=>{z=Math.max(N.duration+N.delay,z)}),m.length)return bj(t,this._triggerName,r,i,te,C,S,[],[],O,q,z,m);Pe.forEach(N=>{const W=N.element,F=Os(O,W,new Set);N.preStyleProps.forEach(L=>F.add(L));const $=Os(q,W,new Set);N.postStyleProps.forEach(L=>$.add(L)),W!==t&&j.add(W)});const R=RC(j.values());return bj(t,this._triggerName,r,i,te,C,S,Pe,R,O,q,z)}}function rse(n,e){const t=s_(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class ise{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=s_(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=a_(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class ose{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new ise(i.style,i.options&&i.options.params||{},r))}),Tj(this.states,"true","1"),Tj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Dj(e,i,this.states))}),this.fallbackTransition=function ase(n,e,t){return new Dj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Tj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const lse=new OC;class cse{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=UM(this._driver,t,r,[]);if(r.length)throw function fie(n){return new P(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=aj(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=$M(this._driver,t,s,NM,IC,new Map,new Map,r,lse,i),o.forEach(h=>{const m=Os(a,h.element,new Map);h.postStyleProps.forEach(_=>m.set(_,null))})):(i.push(function pie(){return new P(3300,!1)}()),o=[]),i.length)throw function gie(n){return new P(3504,!1)}();a.forEach((h,m)=>{h.forEach((_,v)=>{h.set(v,this._driver.computeStyle(m,v,Ga))})});const c=cc(o.map(h=>{const m=a.get(h.element);return this._buildPlayer(h,new Map,m)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function mie(n){return new P(3301,!1)}();return t}listen(e,t,r,i){const s=PM(t,"","","");return RM(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Ij="ng-animate-queued",GM="ng-animate-disabled",pse=[],Sj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gse={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Io="__ng_removed";class ZM{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function vse(n){return n??null}(r?e.value:e),r){const s=s_(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const l_="void",KM=new ZM(l_);class mse{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ro(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function _ie(n,e){return new P(3302,!1)}();if(null==r||0==r.length)throw function yie(n){return new P(3303,!1)}();if(!function wse(n){return"start"==n||"done"==n}(r))throw function vie(n,e){return new P(3400,!1)}();const s=Os(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Os(this._engine.statesByElement,e,new Map);return a.has(t)||(ro(e,SC),ro(e,SC+"-"+t),a.set(t,KM)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function wie(n){return new P(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new YM(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ro(e,SC),ro(e,SC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new ZM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=KM),c.value!==l_&&l.value===c.value){if(!function bse(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const I=[],S=s.matchStyles(l.value,l.params,I),j=s.matchStyles(c.value,c.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{Uu(e,S),oa(e,j)})}return}const _=Os(this._engine.playersByElement,e,[]);_.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let v=s.matchTransition(l.value,c.value,e,c.params),C=!1;if(!v){if(!i)return;v=s.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:v,fromState:l,toState:c,player:o,isFallbackTransition:C}),C||(ro(e,Ij),o.onStart(()=>{kf(e,Ij)})),o.onDone(()=>{let I=this.players.indexOf(o);I>=0&&this.players.splice(I,1);const S=this._engine.playersByElement.get(e);if(S){let j=S.indexOf(o);j>=0&&S.splice(j,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,AC,!0);r.forEach(i=>{if(i[Io])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,l_,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&cc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||KM,h=new ZM(l_),m=new YM(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Io];(!s||s===Sj)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ro(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=PM(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,RM(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class _se{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new mse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(LC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!LC(t))return;const s=t[Io];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ro(e,GM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),kf(e,GM))}removeNode(e,t,r){if(LC(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Io]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return LC(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,AC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,FM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return cc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Io];if(t&&t.setForRemoval){if(e[Io]=Sj,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(GM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ro(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?cc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Eie(n){return new P(3402,!1)}()}_flushAnimations(e,t){const r=new OC,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(Ze=>{h.add(Ze);const Xe=this.driver.query(Ze,".ng-animate-queued",!0);for(let tt=0;tt<Xe.length;tt++)h.add(Xe[tt])});const m=this.bodyNode,_=Array.from(this.statesByElement.keys()),v=Rj(_,this.collectedEnterElements),C=new Map;let I=0;v.forEach((Ze,Xe)=>{const tt=NM+I++;C.set(Xe,tt),Ze.forEach(st=>ro(st,tt))});const S=[],j=new Set,O=new Set;for(let Ze=0;Ze<this.collectedLeaveElements.length;Ze++){const Xe=this.collectedLeaveElements[Ze],tt=Xe[Io];tt&&tt.setForRemoval&&(S.push(Xe),j.add(Xe),tt.hasAnimation?this.driver.query(Xe,".ng-star-inserted",!0).forEach(st=>j.add(st)):O.add(Xe))}const q=new Map,te=Rj(_,Array.from(j));te.forEach((Ze,Xe)=>{const tt=IC+I++;q.set(Xe,tt),Ze.forEach(st=>ro(st,tt))}),e.push(()=>{v.forEach((Ze,Xe)=>{const tt=C.get(Xe);Ze.forEach(st=>kf(st,tt))}),te.forEach((Ze,Xe)=>{const tt=q.get(Xe);Ze.forEach(st=>kf(st,tt))}),S.forEach(Ze=>{this.processLeaveNode(Ze)})});const ye=[],Pe=[];for(let Ze=this._namespaceList.length-1;Ze>=0;Ze--)this._namespaceList[Ze].drainQueuedTransitions(t).forEach(tt=>{const st=tt.player,Dn=tt.element;if(ye.push(st),this.collectedEnterElements.length){const cr=Dn[Io];if(cr&&cr.setForMove){if(cr.previousTriggersValues&&cr.previousTriggersValues.has(tt.triggerName)){const Ya=cr.previousTriggersValues.get(tt.triggerName),vs=this.statesByElement.get(tt.element);if(vs&&vs.has(tt.triggerName)){const Qa=vs.get(tt.triggerName);Qa.value=Ya,vs.set(tt.triggerName,Qa)}}return void st.destroy()}}const Jn=!m||!this.driver.containsElement(m,Dn),Nn=q.get(Dn),Sn=C.get(Dn),pn=this._buildInstruction(tt,r,Sn,Nn,Jn);if(pn.errors&&pn.errors.length)return void Pe.push(pn);if(Jn)return st.onStart(()=>Uu(Dn,pn.fromStyles)),st.onDestroy(()=>oa(Dn,pn.toStyles)),void i.push(st);if(tt.isFallbackTransition)return st.onStart(()=>Uu(Dn,pn.fromStyles)),st.onDestroy(()=>oa(Dn,pn.toStyles)),void i.push(st);const Mo=[];pn.timelines.forEach(cr=>{cr.stretchStartingKeyframe=!0,this.disabledNodes.has(cr.element)||Mo.push(cr)}),pn.timelines=Mo,r.append(Dn,pn.timelines),o.push({instruction:pn,player:st,element:Dn}),pn.queriedElements.forEach(cr=>Os(a,cr,[]).push(st)),pn.preStyleProps.forEach((cr,Ya)=>{if(cr.size){let vs=l.get(Ya);vs||l.set(Ya,vs=new Set),cr.forEach((Qa,vc)=>vs.add(vc))}}),pn.postStyleProps.forEach((cr,Ya)=>{let vs=c.get(Ya);vs||c.set(Ya,vs=new Set),cr.forEach((Qa,vc)=>vs.add(vc))})});if(Pe.length){const Ze=[];Pe.forEach(Xe=>{Ze.push(function Cie(n,e){return new P(3505,!1)}())}),ye.forEach(Xe=>Xe.destroy()),this.reportError(Ze)}const z=new Map,R=new Map;o.forEach(Ze=>{const Xe=Ze.element;r.has(Xe)&&(R.set(Xe,Xe),this._beforeAnimationBuild(Ze.player.namespaceId,Ze.instruction,z))}),i.forEach(Ze=>{const Xe=Ze.element;this._getPreviousPlayers(Xe,!1,Ze.namespaceId,Ze.triggerName,null).forEach(st=>{Os(z,Xe,[]).push(st),st.destroy()})});const N=S.filter(Ze=>Pj(Ze,l,c)),W=new Map;Mj(W,this.driver,O,c,Ga).forEach(Ze=>{Pj(Ze,l,c)&&N.push(Ze)});const $=new Map;v.forEach((Ze,Xe)=>{Mj($,this.driver,new Set(Ze),l,"!")}),N.forEach(Ze=>{const Xe=W.get(Ze),tt=$.get(Ze);W.set(Ze,new Map([...Xe?.entries()??[],...tt?.entries()??[]]))});const L=[],Lt=[],oo={};o.forEach(Ze=>{const{element:Xe,player:tt,instruction:st}=Ze;if(r.has(Xe)){if(h.has(Xe))return tt.onDestroy(()=>oa(Xe,st.toStyles)),tt.disabled=!0,tt.overrideTotalTime(st.totalTime),void i.push(tt);let Dn=oo;if(R.size>1){let Nn=Xe;const Sn=[];for(;Nn=Nn.parentNode;){const pn=R.get(Nn);if(pn){Dn=pn;break}Sn.push(Nn)}Sn.forEach(pn=>R.set(pn,Dn))}const Jn=this._buildAnimation(tt.namespaceId,st,z,s,$,W);if(tt.setRealPlayer(Jn),Dn===oo)L.push(tt);else{const Nn=this.playersByElement.get(Dn);Nn&&Nn.length&&(tt.parentPlayer=cc(Nn)),i.push(tt)}}else Uu(Xe,st.fromStyles),tt.onDestroy(()=>oa(Xe,st.toStyles)),Lt.push(tt),h.has(Xe)&&i.push(tt)}),Lt.forEach(Ze=>{const Xe=s.get(Ze.element);if(Xe&&Xe.length){const tt=cc(Xe);Ze.setRealPlayer(tt)}}),i.forEach(Ze=>{Ze.parentPlayer?Ze.syncPlayerEvents(Ze.parentPlayer):Ze.destroy()});for(let Ze=0;Ze<S.length;Ze++){const Xe=S[Ze],tt=Xe[Io];if(kf(Xe,IC),tt&&tt.hasAnimation)continue;let st=[];if(a.size){let Jn=a.get(Xe);Jn&&Jn.length&&st.push(...Jn);let Nn=this.driver.query(Xe,FM,!0);for(let Sn=0;Sn<Nn.length;Sn++){let pn=a.get(Nn[Sn]);pn&&pn.length&&st.push(...pn)}}const Dn=st.filter(Jn=>!Jn.destroyed);Dn.length?Ese(this,Xe,Dn):this.processLeaveNode(Xe)}return S.length=0,L.forEach(Ze=>{this.players.push(Ze),Ze.onDone(()=>{Ze.destroy();const Xe=this.players.indexOf(Ze);this.players.splice(Xe,1)}),Ze.play()}),L}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==l_;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==s,m=Os(r,c,[]);this._getPreviousPlayers(c,h,o,a,t.toState).forEach(v=>{const C=v.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),v.destroy(),m.push(v)})}Uu(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],h=new Set,m=new Set,_=t.timelines.map(C=>{const I=C.element;h.add(I);const S=I[Io];if(S&&S.removedBeforeQueried)return new i_(C.duration,C.delay);const j=I!==l,O=function Cse(n){const e=[];return kj(n,e),e}((r.get(I)||pse).map(z=>z.getRealPlayer())).filter(z=>!!z.element&&z.element===I),q=s.get(I),te=o.get(I),ye=aj(this._normalizer,C.keyframes,q,te),Pe=this._buildPlayer(C,ye,O);if(C.subTimeline&&i&&m.add(I),j){const z=new YM(e,a,I);z.setRealPlayer(Pe),c.push(z)}return Pe});c.forEach(C=>{Os(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>function yse(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,C.element,C))}),h.forEach(C=>ro(C,pj));const v=cc(_);return v.onDestroy(()=>{h.forEach(C=>kf(C,pj)),oa(l,t.toStyles)}),m.forEach(C=>{Os(i,C,[]).push(v)}),v}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new i_(e.duration,e.delay)}}class YM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new i_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>RM(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Os(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function LC(n){return n&&1===n.nodeType}function Aj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Mj(n,e,t,r,i){const s=[];t.forEach(l=>s.push(Aj(l)));const o=[];r.forEach((l,c)=>{const h=new Map;l.forEach(m=>{const _=e.computeStyle(c,m,i);h.set(m,_),(!_||0==_.length)&&(c[Io]=gse,o.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>Aj(l,s[a++])),o}function Rj(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function ro(n,e){n.classList?.add(e)}function kf(n,e){n.classList?.remove(e)}function Ese(n,e,t){cc(t).onDone(()=>n.processLeaveNode(e))}function kj(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof sj?kj(r.players,e):e.push(r)}}function Pj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class VC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new _se(e,t,r),this._timelineEngine=new cse(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],h=UM(this._driver,s,l,[]);if(l.length)throw function die(n,e){return new P(3404,!1)}();a=function sse(n,e,t){return new ose(n,e,t)}(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=lj(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=lj(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Tse=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&oa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oa(this._element,this._initialStyles),this._endStyles&&(oa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Uu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Uu(this._element,this._endStyles),this._endStyles=null),oa(this._element,this._initialStyles),this._state=3)}}return n})();function QM(n){let e=null;return n.forEach((t,r)=>{(function Ise(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class xj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:yj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Sse{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return uj(e,t)}getParentElement(e){return xM(e)}query(e,t,r){return dj(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,h=o.filter(v=>v instanceof xj);(function Oie(n,e){return 0===n||0===e})(r,i)&&h.forEach(v=>{v.currentSnapshot.forEach((C,I)=>c.set(I,C))});let m=function kie(n){return n.length?n[0]instanceof Map?n:n.map(e=>gj(e)):[]}(t).map(v=>uc(v));m=function Nie(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,yj(n,a)))}}return e}(e,m,c);const _=function Dse(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=QM(e[0]),e.length>1&&(r=QM(e[e.length-1]))):e instanceof Map&&(t=QM(e)),t||r?new Tse(n,t,r):null}(e,m);return new xj(e,m,l,_)}}let Ase=(()=>{class n extends JU{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:wi.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?nj(t):t;return Oj(this._renderer,null,r,"register",[i]),new Mse(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(wg),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class Mse extends $re{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Rse(this._id,e,t||{},this._renderer)}}class Rse{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Oj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Oj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Nj="@.disabled";let kse=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let h=this._rendererCache.get(s);return h||(h=new Fj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,h)),h}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(o,a,t,h.name,h)};return r.data.animation.forEach(l),new Pse(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(wg),Q(VC),Q(it))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();class Fj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Nj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Pse extends Fj{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Nj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function xse(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Ose(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const Lj=[{provide:JU,useClass:Ase},{provide:WM,useFactory:function Fse(){return new tse}},{provide:VC,useClass:(()=>{class n extends VC{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(OM),Q(WM),Q(Fl))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})()},{provide:wg,useFactory:function Lse(n,e,t){return new kse(n,e,t)},deps:[SI,VC,it]}],XM=[{provide:OM,useFactory:()=>new Sse},{provide:_g,useValue:"BrowserAnimations"},...Lj],Vj=[{provide:OM,useClass:hj},{provide:_g,useValue:"NoopAnimations"},...Lj];let Vse=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Vj:XM}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:XM,imports:[aY]})}return n})(),Bj=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Si),U(rn))};static#t=this.\u0275dir=Qe({type:n})}return n})(),Hu=(()=>{class n extends Bj{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,features:[Qt]})}return n})();const aa=new be("NgValueAccessor"),Use={provide:aa,useExisting:nn(()=>$u),multi:!0};let $u=(()=>{class n extends Hu{writeValue(t){this.setProperty("checked",t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&ae("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[sn([Use]),Qt]})}return n})();const jse={provide:aa,useExisting:nn(()=>Fs),multi:!0},$se=new be("CompositionEventMode");let Fs=(()=>{class n extends Bj{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Hse(){const n=Vl()?Vl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Si),U(rn),U($se,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ae("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[sn([jse]),Qt]})}return n})();function dc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Li=new be("NgValidators"),hc=new be("NgAsyncValidators");function $j(n){return dc(n.value)?{required:!0}:null}function UC(n){return null}function Kj(n){return null!=n}function Yj(n){return Pg(n)?K(n):n}function Qj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Xj(n,e){return e.map(t=>t(n))}function Jj(n){return n.map(e=>function Wse(n){return!n.validate}(e)?e:t=>e.validate(t))}function JM(n){return null!=n?function eH(n){if(!n)return null;const e=n.filter(Kj);return 0==e.length?null:function(t){return Qj(Xj(t,e))}}(Jj(n)):null}function eR(n){return null!=n?function tH(n){if(!n)return null;const e=n.filter(Kj);return 0==e.length?null:function(t){return function Bse(...n){const e=fa(n),{args:t,keys:r}=IL(n),i=new dt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let h=0;h<o;h++){let m=!1;Gn(t[h]).subscribe(ke(s,_=>{m||(m=!0,c--),a[h]=_},()=>l--,void 0,()=>{(!l||!m)&&(c||s.next(r?SL(r,a):a),s.complete())}))}});return e?i.pipe(kI(e)):i}(Xj(t,e).map(Yj)).pipe(Ne(Qj))}}(Jj(n)):null}function nH(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tR(n){return n?Array.isArray(n)?n:[n]:[]}function jC(n,e){return Array.isArray(n)?n.includes(e):n===e}function sH(n,e){const t=tR(e);return tR(n).forEach(i=>{jC(t,i)||t.push(i)}),t}function oH(n,e){return tR(e).filter(t=>!jC(n,t))}class aH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qi extends aH{get formDirective(){return null}get path(){return null}}class fc extends aH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let io=(()=>{class n extends lH{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(fc,2))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ni("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Qt]})}return n})(),c_=(()=>{class n extends lH{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Qi,10))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&ni("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Qt]})}return n})();const u_="VALID",$C="INVALID",Pf="PENDING",d_="DISABLED";function iR(n){return(zC(n)?n.validators:n)||null}function sR(n,e){return(zC(e)?e.asyncValidators:n)||null}function zC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class hH{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===u_}get invalid(){return this.status===$C}get pending(){return this.status==Pf}get disabled(){return this.status===d_}get enabled(){return this.status!==d_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oH(e,this._rawAsyncValidators))}hasValidator(e){return jC(this._rawValidators,e)}hasAsyncValidator(e){return jC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=d_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=u_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===u_||this.status===Pf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?d_:u_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pf,this._hasOwnPendingAsyncValidator=!0;const t=Yj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?d_:this.errors?$C:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pf)?Pf:this._anyControlsHaveStatus($C)?$C:u_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Kse(n){return Array.isArray(n)?JM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Yse(n){return Array.isArray(n)?eR(n):n||null}(this._rawAsyncValidators)}}class oR extends hH{constructor(e,t,r){super(iR(t),sR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function dH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new P(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function uH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new P(1e3,"");if(!r[t])throw new P(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const xf=new be("CallSetDisabledState",{providedIn:"root",factory:()=>WC}),WC="always";function h_(n,e,t=WC){aR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Jse(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fH(n,e)})}(n,e),function toe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function eoe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Xse(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ZC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function aR(n,e){const t=function rH(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(nH(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function iH(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(nH(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ZC(e._rawValidators,i),ZC(e._rawAsyncValidators,i)}function fH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const ooe={provide:Qi,useExisting:nn(()=>zu)},f_=(()=>Promise.resolve())();let zu=(()=>{class n extends Qi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new He,this.form=new oR({},JM(t),eR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){f_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),h_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){f_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){f_.then(()=>{const r=this._findContainer(t.path),i=new oR({});(function pH(n,e){aR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){f_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){f_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function gH(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(U(Li,10),U(hc,10),U(xf,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&ae("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([ooe]),Qt]})}return n})();function mH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function _H(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const yH=class extends hH{constructor(e=null,t,r){super(iR(t),sR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=_H(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){_H(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},coe={provide:fc,useExisting:nn(()=>Ls)},EH=(()=>Promise.resolve())();let Ls=(()=>{class n extends fc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new yH,this._registered=!1,this.name="",this.update=new He,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function uR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Fs?t=s:function ioe(n){return Object.getPrototypeOf(n.constructor)===Hu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function cR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){h_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){EH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Mh(r);EH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function qC(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(U(Qi,9),U(Li,10),U(hc,10),U(aa,10),U(Ll,8),U(xf,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sn([coe]),Qt,Ir]})}return n})(),p_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const uoe={provide:aa,useExisting:nn(()=>YC),multi:!0};let YC=(()=>{class n extends Hu{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&ae("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[sn([uoe]),Qt]})}return n})(),CH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({})}return n})();const voe={provide:aa,useExisting:nn(()=>Wu),multi:!0};function MH(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Wu=(()=>{class n extends Hu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=MH(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function woe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&ae("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([voe]),Qt]})}return n})(),g_=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(MH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(U(rn),U(Si),U(Wu,9))};static#t=this.\u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const Eoe={provide:aa,useExisting:nn(()=>pR),multi:!0};function RH(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let pR=(()=>{class n extends Hu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);i.push(c)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Coe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&ae("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([Eoe]),Qt]})}return n})(),m_=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(RH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(RH(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(U(rn),U(Si),U(pR,9))};static#t=this.\u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();let qu=(()=>{class n{constructor(){this._validator=UC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):UC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,features:[Ir]})}return n})();const Doe={provide:Li,useExisting:nn(()=>QC),multi:!0};let QC=(()=>{class n extends qu{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function PH(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function jj(n){return e=>{if(dc(e.value)||dc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&ir("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[sn([Doe]),Qt]})}return n})();const Toe={provide:Li,useExisting:nn(()=>Gu),multi:!0};let Gu=(()=>{class n extends qu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Mh,this.createValidator=t=>$j}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}();static#t=this.\u0275dir=Qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&ir("required",i._enabled?"":null)},inputs:{required:"required"},features:[sn([Toe]),Qt]})}return n})(),koe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({imports:[CH]})}return n})(),Vs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xf,useValue:t.callSetDisabledState??WC}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({imports:[koe]})}return n})();function XC(n,e=0){return function xoe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function __(n){return Array.isArray(n)?n:[n]}function xr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Kr(n){return n instanceof rn?n.nativeElement:n}const Ooe=["addListener","removeListener"],Noe=["addEventListener","removeEventListener"],Foe=["on","off"];function Of(n,e,t,r){if(k(t)&&(r=t,t=void 0),r)return Of(n,e,t).pipe(kI(r));const[i,s]=function Boe(n){return k(n.addEventListener)&&k(n.removeEventListener)}(n)?Noe.map(o=>a=>n[o](e,a,t)):function Loe(n){return k(n.addListener)&&k(n.removeListener)}(n)?Ooe.map(BH(n,e)):function Voe(n){return k(n.on)&&k(n.off)}(n)?Foe.map(BH(n,e)):[];if(!i&&Dt(n))return mn(o=>Of(o,e,t))(Gn(n));if(!i)throw new TypeError("Invalid event target");return new dt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function BH(n,e){return t=>r=>n[t](e,r)}const y_={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=y_;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new Ct(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=y_;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=y_;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},UH=new class joe extends vE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Uoe extends yE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=y_.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(y_.cancelAnimationFrame(t),e._scheduled=void 0)}});let gR,Hoe=1;const JC={};function jH(n){return n in JC&&(delete JC[n],!0)}const $oe={setImmediate(n){const e=Hoe++;return JC[e]=!0,gR||(gR=Promise.resolve()),gR.then(()=>jH(e)&&n()),e},clearImmediate(n){jH(n)}},{setImmediate:zoe,clearImmediate:Woe}=$oe,eb={setImmediate(...n){const{delegate:e}=eb;return(e?.setImmediate||zoe)(...n)},clearImmediate(n){const{delegate:e}=eb;return(e?.clearImmediate||Woe)(n)},delegate:void 0};new class Goe extends vE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class qoe extends yE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=eb.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(eb.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function mR(n=0,e,t=YX){let r=-1;return null!=e&&(nl(e)?t=e:r=e),new dt(i=>{let s=function Yoe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function HH(n,e=Hh){return function Koe(n){return ue((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(ke(t,c=>{r=!0,i=c,s||Gn(n(c)).subscribe(s=ke(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>mR(n,e))}let _R;try{_R=typeof Intl<"u"&&Intl.v8BreakIterator}catch{_R=!1}let v_,Ku,yR,la=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?sL(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!_R)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Gs))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zu(n){return function Qoe(){if(null==v_&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>v_=!0}))}finally{v_=v_||!1}return v_}()?n:!!n.capture}function Xoe(){if(null==Ku){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ku=!1,Ku;if("scrollBehavior"in document.documentElement.style)Ku=!0;else{const n=Element.prototype.scrollTo;Ku=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ku}function vR(n){if(function Joe(){if(null==yR){const n=typeof document<"u"?document.head:null;yR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return yR}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function wR(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function so(n){return n.composedPath?n.composedPath()[0]:n.target}function ER(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const eae=new be("cdk-dir-doc",{providedIn:"root",factory:function tae(){return Ue(xt)}}),nae=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let w_=(()=>{class n{constructor(t){this.value="ltr",this.change=new He,t&&(this.value=function rae(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?nae.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(eae,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({})}return n})(),zH=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new X,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new dt(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(HH(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):me()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(dn(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Kr(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Of(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(la),Q(xt,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CR=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new X,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(HH(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(la),Q(it),Q(xt,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({})}return n})(),WH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({imports:[E_,bR,E_,bR]})}return n})();class DR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class TR extends DR{constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}}class qH extends DR{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class oae extends DR{constructor(e){super(),this.element=e instanceof rn?e.nativeElement:e}}class IR{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof TR?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof qH?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof oae?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class aae extends IR{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Mr.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let SR=(()=>{class n extends IR{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new He,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=r.createComponent(s,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(r){return new(r||n)(U(iu),U(qi),U(xt))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Qt]})}return n})(),nb=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({})}return n})();const GH=Xoe();class lae{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=xr(-this._previousScrollPosition.left),e.style.top=xr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),GH&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),GH&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class cae{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(dn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ZH{enable(){}disable(){}attach(){}}function AR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function KH(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class uae{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();AR(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let dae=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new ZH,this.close=o=>new cae(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new lae(this._viewportRuler,this._document),this.reposition=o=>new uae(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(r){return new(r||n)(Q(zH),Q(CR),Q(it),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class YH{constructor(e){if(this.scrollStrategy=new ZH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class hae{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let QH=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fae=(()=>{class n extends QH{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(it,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pae=(()=>{class n extends QH{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=so(s)},this._clickListener=s=>{const o=so(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const h=l[c];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(o)||h.overlayElement.contains(a))break;const m=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(la),Q(it,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rb=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ER()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),ER()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(la))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class C_{constructor(e,t,r,i,s,o,a,l,c,h=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new X,this._attachments=new X,this._detachments=new X,this._locationChanges=Ct.EMPTY,this._backdropClickHandler=m=>this._backdropClick.next(m),this._backdropTransitionendHandler=m=>{this._disposeBackdrop(m.target)},this._keydownEvents=new X,this._outsidePointerEvents=new X,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(kr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=xr(this._config.width),e.height=xr(this._config.height),e.minWidth=xr(this._config.minWidth),e.minHeight=xr(this._config.minHeight),e.maxWidth=xr(this._config.maxWidth),e.maxHeight=xr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=__(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(ki(ge(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const XH="cdk-overlay-connected-position-bounding-box",gae=/([A-Za-z%]+)$/;class mae{get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new X,this._resizeSubscription=Ct.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(XH),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),h=this._getOverlayFit(c,t,r,a);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(h,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const h=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);h>l&&(l=h,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(XH),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=e4(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let _=0-a,v=a+s.height-r.height,C=this._subtractOverflows(s.width,0-o,o+s.width-r.width),I=this._subtractOverflows(s.height,_,v),S=C*I;return{visibleArea:S,isCompletelyWithinViewport:s.width*s.height===S,fitsInViewportVertically:I===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=JH(this._overlayRef.getConfig().minHeight),a=JH(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=e4(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let h=0,m=0;return h=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,m=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:h,y:m},{x:e.x+h,y:e.y+m}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new hae(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,h,m,_;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const v=Math.min(r.bottom-e.y+r.top,e.y),C=this._lastBoundingBoxSize.height;s=2*v,o=e.y-v,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-C/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)_=r.width-e.x+this._viewportMargin,h=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)m=e.x,h=r.right-e.x;else{const v=Math.min(r.right-e.x+r.left,e.x),C=this._lastBoundingBoxSize.width;h=2*v,m=e.x-v,h>C&&!this._isInitialRender&&!this._growAfterOpen&&(m=e.x-C/2)}return{top:o,left:m,bottom:a,right:_,width:h,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=xr(r.height),i.top=xr(r.top),i.bottom=xr(r.bottom),i.width=xr(r.width),i.left=xr(r.left),i.right=xr(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=xr(s)),o&&(i.maxWidth=xr(o))}this._lastBoundingBoxSize=r,Yu(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Yu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const h=this._viewportRuler.getViewportScrollPosition();Yu(r,this._getExactOverlayY(t,e,h)),Yu(r,this._getExactOverlayX(t,e,h))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=xr(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=xr(o.maxWidth):s&&(r.maxWidth="")),Yu(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=xr(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=xr(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:KH(e,r),isOriginOutsideView:AR(e,r),isOverlayClipped:KH(t,r),isOverlayOutsideView:AR(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&__(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof rn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Yu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function JH(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(gae);return t&&"px"!==t?null:parseFloat(e)}return n||null}function e4(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const t4="cdk-global-overlay-wrapper";class _ae{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(t4),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),h=this._xPosition,m=this._xOffset,_="rtl"===this._overlayRef.getConfig().direction;let v="",C="",I="";l?I="flex-start":"center"===h?(I="center",_?C=m:v=m):_?"left"===h||"end"===h?(I="flex-end",v=m):("right"===h||"start"===h)&&(I="flex-start",C=m):"left"===h||"start"===h?(I="flex-start",v=m):("right"===h||"end"===h)&&(I="flex-end",C=m),e.position=this._cssPosition,e.marginLeft=l?"0":v,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":C,t.justifyContent=I,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(t4),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let yae=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new _ae}flexibleConnectedTo(t){return new mae(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(CR),Q(xt),Q(la),Q(rb))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vae=0,Ff=(()=>{class n{constructor(t,r,i,s,o,a,l,c,h,m,_,v){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=h,this._location=m,this._outsideClickDispatcher=_,this._animationsModuleType=v}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new YH(t);return o.direction=o.direction||this._directionality.value,new C_(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+vae++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Fl)),new aae(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(dae),Q(rb),Q(iu),Q(yae),Q(fae),Q(Mr),Q(it),Q(xt),Q(w_),Q(Wg),Q(pae),Q(_g,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Cae={provide:new be("cdk-connected-overlay-scroll-strategy"),deps:[Ff],useFactory:function Eae(n){return()=>n.scrollStrategies.reposition()}};let n4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:[Ff,Cae],imports:[E_,nb,WH,WH]})}return n})();function i4(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function s4(n){return dn((e,t)=>n<=t)}let Aae=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mae=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:[Aae]})}return n})();const o4=new Set;let Qu,kae=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xae}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Pae(n,e){if(!o4.has(n))try{Qu||(Qu=document.createElement("style"),e&&(Qu.nonce=e),Qu.setAttribute("type","text/css"),document.head.appendChild(Qu)),Qu.sheet&&(Qu.sheet.insertRule(`@media ${n} {body{ }}`,0),o4.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(la),Q(T0,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xae(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Oae=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new X}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return a4(__(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Yg(a4(__(t)).map(o=>this._registerQuery(o).observable));return s=Yw(s.pipe(kr(1)),s.pipe(s4(1),function Rae(n,e=Hh){return ue((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,h=e.now();if(h<c)return i=this.schedule(void 0,c-h),void r.add(i);a()}t.subscribe(ke(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))),s.pipe(Ne(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new dt(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(to(r),Ne(({matches:o})=>({query:t,matches:o})),ki(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(Q(kae),Q(it))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a4(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let ib=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Vae(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function Lae(n){try{return n.frameElement}catch{return null}}(function qae(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===d4(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=d4(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function zae(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Wae(n){return!function Uae(n){return function Hae(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Bae(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function jae(n){return function $ae(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||u4(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(la))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function u4(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function d4(n){if(!u4(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Gae{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(kr(1)).subscribe(e)}}let MR=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new Gae(t,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(ib),Q(it),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RR(n){return 0===n.buttons||0===n.detail}function kR(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Zae=new be("cdk-input-modality-detector-options"),Kae={ignoreKeys:[18,17,224,91,16]},Lf=Zu({passive:!0,capture:!0});let Yae=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ne(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=so(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(RR(o)?"keyboard":"mouse"),this._mostRecentTarget=so(o))},this._onTouchstart=o=>{kR(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=so(o))},this._options={...Kae,...s},this.modalityDetected=this._modality.pipe(s4(1)),this.modalityChanged=this.modalityDetected.pipe(gr()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Lf),i.addEventListener("mousedown",this._onMousedown,Lf),i.addEventListener("touchstart",this._onTouchstart,Lf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Lf),document.removeEventListener("mousedown",this._onMousedown,Lf),document.removeEventListener("touchstart",this._onTouchstart,Lf))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(la),Q(it),Q(xt),Q(Zae,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xae=new be("cdk-focus-monitor-default-options"),sb=Zu({passive:!0,capture:!0});let PR=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new X,this._rootNodeFocusAndBlurListener=a=>{for(let c=so(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,r=!1){const i=Kr(t);if(!this._platform.isBrowser||1!==i.nodeType)return me();const s=vR(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new X,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Kr(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Kr(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=so(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,sb),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,sb)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ki(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,sb),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,sb),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(la),Q(Yae),Q(xt,8),Q(Xae,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const f4="cdk-high-contrast-black-on-white",p4="cdk-high-contrast-white-on-black",xR="cdk-high-contrast-active";let g4=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Ue(Oae).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(xR,f4,p4),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(xR,f4):2===r&&t.add(xR,p4)}}static#e=this.\u0275fac=function(r){return new(r||n)(Q(la),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jae=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(g4))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({imports:[Mae]})}return n})();function ele(n,e){}class ob{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let m4=(()=>{class n extends IR{constructor(t,r,i,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const m=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),m},this._document=i,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=wR(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=wR();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=wR())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(r){return new(r||n)(U(rn),U(MR),U(xt,8),U(ob),U(ib),U(it),U(C_),U(PR))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&ON(SR,7),2&r){let s;Th(s=function Ih(){return function yG(n,e){return n[Hs].queries[e].queryList}(De(),rv())}())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&ir("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Qt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&xe(0,ele,0,0,"ng-template",0)},dependencies:[SR],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class OR{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new X,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!i4(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const _4=new be("DialogScrollStrategy"),tle=new be("DialogData"),nle=new be("DefaultDialogConfig"),ile={provide:_4,deps:[Ff],useFactory:function rle(n){return()=>n.scrollStrategies.block()}};let sle=0,y4=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,r,i,s,o,a){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new X,this._afterOpenedAtThisLevel=new X,this._ariaHiddenElements=new Map,this.afterAllClosed=Qw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(to(void 0))),this._scrollStrategy=a}open(t,r){(r={...this._defaultOptions||new ob,...r}).id=r.id||"cdk-dialog-"+sle++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),o=this._overlay.create(s),a=new OR(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){NR(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){NR(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),NR(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new YH({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,o=[{provide:ob,useValue:i},{provide:OR,useValue:r},{provide:C_,useValue:t}];let a;i.container?"function"==typeof i.container?a=i.container:(a=i.container.type,o.push(...i.container.providers(i))):a=m4;const l=new TR(a,i.viewContainerRef,Mr.create({parent:s||this._injector,providers:o}),i.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,r,i,s){if(t instanceof Ys){const o=this._createInjector(s,r,i,void 0);let a={$implicit:s.data,dialogRef:r};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new qH(t,null,a,o))}else{const o=this._createInjector(s,r,i,this._injector),a=i.attachComponentPortal(new TR(t,s.viewContainerRef,o,s.componentFactoryResolver));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:tle,useValue:t.data},{provide:OR,useValue:r}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!o||!o.get(w_,null,{optional:!0}))&&a.push({provide:w_,useValue:{value:t.direction,change:me()}}),Mr.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Ff),Q(Mr),Q(nle,8),Q(n,12),Q(rb),Q(_4))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function NR(n,e){let t=n.length;for(;t--;)e(n[t])}let ole=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:[y4,ile],imports:[n4,nb,Jae,nb]})}return n})();const lle=new be("mat-sanity-checks",{providedIn:"root",factory:function ale(){return!0}});let E4=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!ER()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(Q(g4),Q(lle,8),Q(xt))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({imports:[E_,E_]})}return n})();const C4=Zu({passive:!0,capture:!0});class dle{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=so(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,C4)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,C4)))}}class FR{static#e=this._eventManager=new dle;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Kr(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...b4,...r.animation},o=r.radius||function fle(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-o+"px",h.style.top=l-o+"px",h.style.height=2*o+"px",h.style.width=2*o+"px",null!=r.color&&(h.style.backgroundColor=r.color),h.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(h);const m=window.getComputedStyle(h),v=m.transitionDuration,C="none"===m.transitionProperty||"0s"===v||"0s, 0s"===v||0===i.width&&0===i.height,I=new ule(this,h,r,C);h.style.transform="scale3d(1, 1, 1)",I.state=0,r.persistent||(this._mostRecentTransientRipple=I);return!C&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const j=()=>this._finishRippleTransition(I),O=()=>this._destroyRipple(I);h.addEventListener("transitionend",j),h.addEventListener("transitioncancel",O)}),this._activeRipples.set(I,null),(C||!c)&&this._finishRippleTransition(I),I}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...b4,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Kr(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,T4.forEach(r=>{FR._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{I4.forEach(t=>{this._triggerElement.addEventListener(t,this,D4)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=RR(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!kR(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(T4.forEach(t=>FR._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&I4.forEach(t=>e.removeEventListener(t,this,D4)))}}function ple(n,e){}class ab{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const LR="mdc-dialog--open",S4="mdc-dialog--opening",A4="mdc-dialog--closing";let _le=(()=>{class n extends m4{constructor(t,r,i,s,o,a,l,c){super(t,r,i,s,o,a,l,c),this._animationStateChanged=new He}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(r){return new(r||n)(U(rn),U(MR),U(xt,8),U(ab),U(ib),U(it),U(C_),U(PR))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ng-component"]],features:[Qt],decls:0,vars:0,template:function(r,i){},encapsulation:2})}return n})();const M4="--mat-dialog-transition-duration";function R4(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?XC(n.substring(0,n.length-2)):n.endsWith("s")?1e3*XC(n.substring(0,n.length-1)):"0"===n?0:null}let yle=(()=>{class n extends _le{constructor(t,r,i,s,o,a,l,c,h){super(t,r,i,s,o,a,l,h),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?R4(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?R4(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(M4,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(S4,LR)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(LR),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(LR),this._animationsEnabled?(this._hostElement.style.setProperty(M4,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(A4)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(S4,A4)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(r){return new(r||n)(U(rn),U(MR),U(xt,8),U(ab),U(ib),U(it),U(C_),U(_g,8),U(PR))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,i){2&r&&(gT("id",i._config.id),ir("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),ni("_mat-animation-noopable",!i._animationsEnabled))},features:[Qt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1),xe(2,ple,0,0,"ng-template",2),T()())},dependencies:[SR],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class Vf{constructor(e,t,r){this._ref=e,this._containerInstance=r,this._afterOpened=new X,this._beforeClosed=new X,this._state=0,this.disableClose=t.disableClose,this.id=e.id,r._animationStateChanged.pipe(dn(i=>"opened"===i.state),kr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(dn(i=>"closed"===i.state),kr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ge(this.backdropClick(),this.keydownEvents().pipe(dn(i=>27===i.keyCode&&!this.disableClose&&!i4(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function vle(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(dn(t=>"closing"===t.state),kr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const lb=new be("MatMdcDialogData"),wle=new be("mat-mdc-dialog-default-options"),k4=new be("mat-mdc-dialog-scroll-strategy"),Cle={provide:k4,deps:[Ff],useFactory:function Ele(n){return()=>n.scrollStrategies.block()}};let ble=0,Dle=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,r,i,s,o,a,l,c,h,m){this._overlay=t,this._defaultOptions=i,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new X,this._afterOpenedAtThisLevel=new X,this._idPrefix="mat-dialog-",this.dialogConfigClass=ab,this.afterAllClosed=Qw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(to(void 0))),this._scrollStrategy=a,this._dialog=r.get(y4)}open(t,r){let i;(r={...this._defaultOptions||new ab,...r}).id=r.id||`${this._idPrefix}${ble++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:ob,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(o,a,l)=>(i=new this._dialogRefConstructor(o,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=s.componentRef,i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static#e=this.\u0275fac=function(r){z0()};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),D_=(()=>{class n extends Dle{constructor(t,r,i,s,o,a,l,c){super(t,r,s,a,l,o,Vf,yle,lb,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Ff),Q(Mr),Q(Wg,8),Q(wle,8),Q(k4),Q(n,12),Q(rb),Q(_g,8))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),Tle=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:[D_,Cle],imports:[ole,n4,nb,E4,E4]})}return n})();class cb{}class ub{}class ca{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ca?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ca;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ca?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Ile{encodeKey(e){return x4(e)}encodeValue(e){return x4(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ale=/%(\d[a-f0-9])/gi,Mle={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function x4(n){return encodeURIComponent(n).replace(Ale,(e,t)=>Mle[t]??e)}function db(n){return`${n}`}class gc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ile,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Sle(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(db):[db(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new gc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(db(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(db(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Rle{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function O4(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function N4(n){return typeof Blob<"u"&&n instanceof Blob}function F4(n){return typeof FormData<"u"&&n instanceof FormData}class T_{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function kle(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ca),this.context||(this.context=new Rle),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new gc,this.urlWithParams=t}serializeBody(){return null===this.body?null:O4(this.body)||N4(this.body)||F4(this.body)||function Ple(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||F4(this.body)?null:N4(this.body)?this.body.type||null:O4(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((m,_)=>m.set(_,e.setHeaders[_]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((m,_)=>m.set(_,e.setParams[_]),c)),new T_(t,r,s,{params:c,headers:l,context:h,reportProgress:a,responseType:i,withCredentials:o})}}var Bf=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Bf||{});class VR{constructor(e,t=200,r="OK"){this.headers=e.headers||new ca,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class BR extends VR{constructor(e={}){super(e),this.type=Bf.ResponseHeader}clone(e={}){return new BR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Uf extends VR{constructor(e={}){super(e),this.type=Bf.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Uf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class L4 extends VR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function UR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let xle=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof T_)s=t;else{let l,c;l=i.headers instanceof ca?i.headers:new ca(i.headers),i.params&&(c=i.params instanceof gc?i.params:new gc({fromObject:i.params})),s=new T_(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=me(s).pipe(kh(l=>this.handler.handle(l)));if(t instanceof T_||"events"===i.observe)return o;const a=o.pipe(dn(l=>l instanceof Uf));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ne(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ne(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ne(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ne(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new gc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,UR(i,r))}post(t,r,i={}){return this.request("POST",t,UR(i,r))}put(t,r,i={}){return this.request("PUT",t,UR(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(cb))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function U4(n,e){return e(n)}function Nle(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Lle=new be(""),I_=new be(""),j4=new be("");function Vle(){let n=null;return(e,t)=>{null===n&&(n=(Ue(Lle,{optional:!0})??[]).reduceRight(Nle,U4));const r=Ue(Iw),i=r.add();return n(e,t).pipe(Xg(()=>r.remove(i)))}}let H4=(()=>{class n extends cb{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Ue(Iw)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(I_),...this.injector.get(j4,[])]));this.chain=i.reduceRight((s,o)=>function Fle(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),U4)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Xg(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(ub),Q(Ss))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const Hle=/^\)\]\}',?\n/;let z4=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new P(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?K(r.\u0275loadImpl()):me(null)).pipe(ct(()=>new dt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((I,S)=>o.setRequestHeader(I,S.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const I=t.detectContentTypeHeader();null!==I&&o.setRequestHeader("Content-Type",I)}if(t.responseType){const I=t.responseType.toLowerCase();o.responseType="json"!==I?I:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const I=o.statusText||"OK",S=new ca(o.getAllResponseHeaders()),j=function $le(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new BR({headers:S,status:o.status,statusText:I,url:j}),l},h=()=>{let{headers:I,status:S,statusText:j,url:O}=c(),q=null;204!==S&&(q=typeof o.response>"u"?o.responseText:o.response),0===S&&(S=q?200:0);let te=S>=200&&S<300;if("json"===t.responseType&&"string"==typeof q){const ye=q;q=q.replace(Hle,"");try{q=""!==q?JSON.parse(q):null}catch(Pe){q=ye,te&&(te=!1,q={error:Pe,text:q})}}te?(s.next(new Uf({body:q,headers:I,status:S,statusText:j,url:O||void 0})),s.complete()):s.error(new L4({error:q,headers:I,status:S,statusText:j,url:O||void 0}))},m=I=>{const{url:S}=c(),j=new L4({error:I,status:o.status||0,statusText:o.statusText||"Unknown Error",url:S||void 0});s.error(j)};let _=!1;const v=I=>{_||(s.next(c()),_=!0);let S={type:Bf.DownloadProgress,loaded:I.loaded};I.lengthComputable&&(S.total=I.total),"text"===t.responseType&&o.responseText&&(S.partialText=o.responseText),s.next(S)},C=I=>{let S={type:Bf.UploadProgress,loaded:I.loaded};I.lengthComputable&&(S.total=I.total),s.next(S)};return o.addEventListener("load",h),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",v),null!==a&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:Bf.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",h),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",v),null!==a&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(oL))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();const jR=new be("XSRF_ENABLED"),W4=new be("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),q4=new be("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class G4{}let qle=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=KF(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(Gs),Q(W4))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function Gle(n,e){const t=n.url.toLowerCase();if(!Ue(jR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=Ue(G4).getToken(),i=Ue(q4);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var mc=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(mc||{});function Zle(...n){const e=[xle,z4,H4,{provide:cb,useExisting:H4},{provide:ub,useExisting:z4},{provide:I_,useValue:Gle,multi:!0},{provide:jR,useValue:!0},{provide:G4,useClass:qle}];for(const t of n)e.push(...t.\u0275providers);return y0(e)}const Z4=new be("LEGACY_INTERCEPTOR_FN");function Kle(){return function Xu(n,e){return{\u0275kind:n,\u0275providers:e}}(mc.LegacyInterceptors,[{provide:Z4,useFactory:Vle},{provide:I_,useExisting:Z4,multi:!0}])}let Yle=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:[Zle(Kle())]})}return n})();function K4(n=0,e=Hh){return n<0&&(n=0),mR(n,n,e)}var nce=function(){function n(){}return n.prototype.getAllStyles=function(e){return window.getComputedStyle(e)},n.prototype.getStyle=function(e,t){return this.getAllStyles(e)[t]},n.prototype.isStaticPositioned=function(e){return"static"===(this.getStyle(e,"position")||"static")},n.prototype.offsetParent=function(e){for(var t=e.offsetParent||document.documentElement;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement},n.prototype.position=function(e,t){void 0===t&&(t=!0);var r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))r={top:(r=e.getBoundingClientRect()).top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{var s=this.offsetParent(e);r=this.offset(e,!1),s!==document.documentElement&&(i=this.offset(s,!1)),i.top+=s.clientTop,i.left+=s.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,t&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r},n.prototype.offset=function(e,t){void 0===t&&(t=!0);var r=e.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft,s={height:r.height||e.offsetHeight,width:r.width||e.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return t&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(e,t,r,i){var s=r.split("-"),o=s[0],a=void 0===o?"top":o,l=s[1],c=void 0===l?"center":l,h=i?this.offset(e,!1):this.position(e,!1),m=this.getAllStyles(t),_=parseFloat(m.marginTop),v=parseFloat(m.marginBottom),C=parseFloat(m.marginLeft),I=parseFloat(m.marginRight),S=0,j=0;switch(a){case"top":S=h.top-(t.offsetHeight+_+v);break;case"bottom":S=h.top+h.height;break;case"left":j=h.left-(t.offsetWidth+C+I);break;case"right":j=h.left+h.width}switch(c){case"top":S=h.top;break;case"bottom":S=h.top+h.height-t.offsetHeight;break;case"left":j=h.left;break;case"right":j=h.left+h.width-t.offsetWidth;break;case"center":"top"===a||"bottom"===a?j=h.left+h.width/2-t.offsetWidth/2:S=h.top+h.height/2-t.offsetHeight/2}t.style.transform="translate("+Math.round(j)+"px, "+Math.round(S)+"px)";var O=t.getBoundingClientRect(),q=document.documentElement,te=window.innerHeight||q.clientHeight,ye=window.innerWidth||q.clientWidth;return O.left>=0&&O.top>=0&&O.right<=ye&&O.bottom<=te},n}(),rce=/\s+/,Y4=new nce,So=function(){return So=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},So.apply(this,arguments)},HR=function(n,e,t){if(t||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},$R=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}($R||{}),sce=[$R.SUNDAY,$R.SATURDAY],zR=7,_c=86400;function Q4(n,e){var t=e.startDate,i=e.excluded,s=e.precision;if(i.length<1)return 0;for(var a=n.getDay,l=n.addDays,c=(0,n.addSeconds)(t,e.seconds-1),h=a(t),m=a(c),_=0,v=t,C=function(){var I=a(v);i.some(function(S){return S===I})&&(_+=function oce(n,e){var r=e.day,s=e.dayEnd,o=e.startDate,a=e.endDate,l=n.differenceInSeconds,h=n.startOfDay;if("minutes"===e.precision){if(r===e.dayStart)return l((0,n.endOfDay)(o),o)+1;if(r===s)return l(a,h(a))+1}return _c}(n,{dayStart:h,dayEnd:m,day:I,precision:s,startDate:t,endDate:c})),v=l(v,1)};v<c;)C();return _}function S_(n,e){var r=e.periodStart,i=e.periodEnd;return e.events.filter(function(s){return function cce(n,e){var t=e.event,r=e.periodStart,i=e.periodEnd,s=n.isSameSecond,o=t.start,a=t.end||t.start;return!!(o>r&&o<i||a>r&&a<i||o<r&&a>i||s(o,r)||s(o,i)||s(a,r)||s(a,i))}(n,{event:s,periodStart:r,periodEnd:i})})}function X4(n,e){var t=e.date,r=e.weekendDays,i=void 0===r?sce:r,o=n.isSameDay,a=n.getDay,l=(0,n.startOfDay)(new Date),c=a(t);return{date:t,day:c,isPast:t<l,isToday:o(t,l),isFuture:t>l,isWeekend:i.indexOf(c)>-1}}function qR(n,e){for(var i=e.excluded,s=void 0===i?[]:i,o=e.weekendDays,a=e.viewStart,l=void 0===a?n.startOfWeek(e.viewDate,{weekStartsOn:e.weekStartsOn}):a,c=e.viewEnd,h=void 0===c?n.addDays(l,zR):c,m=n.addDays,_=n.getDay,v=[],C=l;C<h;)s.some(function(I){return _(C)===I})||v.push(X4(n,{date:C,weekendDays:o})),C=m(C,1);return v}function dce(n,e){var t=e.events,r=void 0===t?[]:t,i=e.excluded,s=void 0===i?[]:i,o=e.precision,a=void 0===o?"days":o,l=e.absolutePositionedEvents,c=void 0!==l&&l,h=e.viewStart,m=e.viewEnd;h=n.startOfDay(h),m=n.endOfDay(m);var _=n.differenceInSeconds,v=n.differenceInDays,C=function uce(n,e){for(var r=e.date2,i=e.excluded,s=e.date1,o=0;s<r;)-1===i.indexOf(n.getDay(s))&&o++,s=n.addDays(s,1);return o}(n,{date1:h,date2:m,excluded:s}),I=v(m,h)+1,S=r.filter(function(q){return q.allDay}).map(function(q){var te=function lce(n,e){var t=e.event,r=e.startOfWeek,i=e.excluded,s=e.precision,o=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(t.start<r)return 0;var c=0;switch(s){case"days":c=o(a(t.start),r)*_c;break;case"minutes":c=l(t.start,r)}return c-=Q4(n,{startDate:r,seconds:c,excluded:i,precision:s}),Math.abs(c/_c)}(n,{event:q,startOfWeek:h,excluded:s,precision:a}),ye=function ace(n,e){var t=e.event,r=e.offset,s=e.excluded,o=e.precision,a=e.totalDaysInView,c=n.differenceInSeconds,h=n.addDays,m=n.endOfDay,_=n.differenceInDays,v=_c,C=(0,n.max)([t.start,e.startOfWeekDate]);t.end&&(v="minutes"===o?c(t.end,C):_(h(m(t.end),1),C)*_c);var I=r*_c,j=a*_c;return I+v>j&&(v=j-I),(v-=Q4(n,{startDate:C,seconds:v,excluded:s,precision:o}))/_c}(n,{event:q,offset:te,startOfWeekDate:h,excluded:s,precision:a,totalDaysInView:I});return{event:q,offset:te,span:ye}}).filter(function(q){return q.offset<C}).filter(function(q){return q.span>0}).map(function(q){return{event:q.event,offset:q.offset,span:q.span,startsBeforeWeek:q.event.start<h,endsAfterWeek:(q.event.end||q.event.start)>m}}).sort(function(q,te){var ye=_(q.event.start,te.event.start);return 0===ye?_(te.event.end||te.event.start,q.event.end||q.event.start):ye}),j=[],O=[];return S.forEach(function(q,te){if(-1===O.indexOf(q)){O.push(q);var ye=q.span+q.offset,Pe=S.slice(te+1).filter(function(N){if(N.offset>=ye&&ye+N.span<=I&&-1===O.indexOf(N)){var W=N.offset-ye;return c||(N.offset=W),ye+=N.span+W,O.push(N),!0}}),z=HR([q],Pe,!0),R=z.filter(function(N){return N.event.id}).map(function(N){return N.event.id}).join("-");j.push(So({row:z},R?{id:R}:{}))}}),j}function hce(n,e){var t=e.events,r=e.viewDate,i=e.hourSegments,s=e.hourDuration,o=e.dayStart,a=e.dayEnd,l=e.weekStartsOn,c=e.excluded,h=e.weekendDays,m=e.segmentHeight,_=e.viewStart,v=e.viewEnd,C=e.minimumEventHeight,I=function mce(n,e){var t=e.viewDate,r=e.hourSegments,i=e.hourDuration,s=e.dayStart,o=e.dayEnd,a=n.setMinutes,l=n.setHours,c=n.startOfDay,h=n.startOfMinute,m=n.endOfDay,_=n.addMinutes,v=n.addDays,C=[],I=a(l(c(t),gb(s.hour)),mb(s.minute)),S=a(l(h(m(t)),gb(o.hour)),mb(o.minute)),j=(i||60)/r,O=c(t),q=m(t),te=function(W){return W};n.getTimezoneOffset(O)!==n.getTimezoneOffset(q)&&(O=v(O,1),I=v(I,1),S=v(S,1),te=function(W){return v(W,-1)});for(var ye=i?1440/i:60,Pe=0;Pe<ye;Pe++){for(var z=[],R=0;R<r;R++){var N=_(_(I,Pe*(i||60)),R*j);N>=I&&N<S&&z.push({date:te(N),displayDate:N,isStart:0===R})}z.length>0&&C.push({segments:z})}return C}(n,{viewDate:r,hourSegments:i,hourDuration:s,dayStart:o,dayEnd:a}),S=qR(n,{viewDate:r,weekStartsOn:l,excluded:c,weekendDays:h,viewStart:_,viewEnd:v}),j=n.setHours,O=n.setMinutes,q=n.getHours,te=n.getMinutes;return S.map(function(ye){var Pe=function gce(n,e){var t=e.events,r=e.viewDate,i=e.hourSegments,s=e.dayStart,o=e.dayEnd,a=e.eventWidth,l=e.segmentHeight,c=e.hourDuration,h=e.minimumEventHeight,m=n.setMinutes,_=n.setHours,v=n.startOfDay,C=n.startOfMinute,I=n.endOfDay,S=n.differenceInMinutes,j=m(_(v(r),gb(s.hour)),mb(s.minute)),O=m(_(C(I(r)),gb(o.hour)),mb(o.minute));O.setSeconds(59,999);var q=[],te=S_(n,{events:t.filter(function(R){return!R.allDay}),periodStart:j,periodEnd:O}),ye=te.sort(function(R,N){return R.start.valueOf()-N.start.valueOf()}).map(function(R){var N=R.start,W=R.end||N,F=N<j,$=W>O,L=i*l/(c||60),Lt=0;if(N>j){var oo=n.getTimezoneOffset(N),Xe=n.getTimezoneOffset(j)-oo;Lt+=S(N,j)+Xe}Lt*=L,Lt=Math.floor(Lt);var tt=F?j:N,st=$?O:W,Dn=n.getTimezoneOffset(tt)-n.getTimezoneOffset(st),Jn=S(st,tt)+Dn;R.end?Jn*=L:Jn=l,h&&Jn<h&&(Jn=h),Jn=Math.floor(Jn);for(var Sn=pb(q,Lt,Lt+Jn),pn=0;Sn.some(function(U_){return U_.left===pn});)pn+=a;var Mo={event:R,height:Jn,width:a,top:Lt,left:pn,startsBeforeDay:F,endsAfterDay:$};return q.push(Mo),Mo}),Pe=Math.max.apply(Math,ye.map(function(R){return R.left+R.width})),z=S_(n,{events:t.filter(function(R){return R.allDay}),periodStart:v(j),periodEnd:I(O)});return{events:ye,width:Pe,allDayEvents:z,period:{events:te,start:j,end:O}}}(n,{events:t,viewDate:ye.date,hourSegments:i,dayStart:o,dayEnd:a,segmentHeight:m,eventWidth:1,hourDuration:s,minimumEventHeight:C}),z=I.map(function(W){var F=W.segments.map(function($){var L=O(j(ye.date,q($.date)),te($.date));return So(So({},$),{date:L})});return So(So({},W),{segments:F})});function R(W,F){var $=Math.max.apply(Math,F.map(function(Lt){return Lt.left+1})),L=W.filter(function(Lt){return Lt.left>=$}).filter(function(Lt){return pb(F,Lt.top,Lt.top+Lt.height).length>0});return L.length>0?R(W,L):$}var N=Pe.events.map(function(W){var $=100/R(Pe.events,pb(Pe.events,W.top,W.top+W.height));return So(So({},W),{left:W.left*$,width:$})});return{hours:z,date:ye.date,events:N.map(function(W){var F=pb(N.filter(function($){return $.left>W.left}),W.top,W.top+W.height);return F.length>0?So(So({},W),{width:Math.min.apply(Math,F.map(function($){return $.left}))-W.left}):W})}})}function pb(n,e,t){return n.filter(function(r){var i=r.top,s=r.top+r.height;return e<s&&s<t||e<i&&i<t||i<=e&&t<=s})}function gb(n){return Math.max(Math.min(23,n),0)}function mb(n){return Math.max(Math.min(59,n),0)}var jf=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(jf||{});function GR(n,e){return n=function wce(n,e){return typeof n>"u"?typeof e>"u"?n:e:n}(n,e),"function"==typeof n?function(){for(var r=arguments,i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=r[o];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var ZR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},J4=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":ZR(n))&&1===n.nodeType&&"object"===ZR(n.style)&&"object"===ZR(n.ownerDocument)};function e$(n,e){if(e=YR(e,!0),!J4(e))return-1;for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1}function KR(n,e){return-1!==e$(n,e)}function Cce(n){for(var e=arguments,t=[],r=arguments.length-1;r-- >0;)t[r]=e[r+1];return function Ece(n,e){for(var t=0;t<e.length;t++)KR(n,e[t])||n.push(e[t]);return e}(n,t=t.map(YR))}function bce(n){for(var e=arguments,t=[],r=arguments.length-1;r-- >0;)t[r]=e[r+1];return t.map(YR).reduce(function(i,s){var o=e$(n,s);return-1!==o?i.concat(n.splice(o,1)):i},[])}function YR(n,e){if("string"==typeof n)try{return document.querySelector(n)}catch(t){throw t}if(!J4(n)&&!e)throw new TypeError(n+" is not a DOM element.");return n}function t$(n){if(n===window)return function Tce(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var e={};return Object.defineProperties(e,n),e}();try{var e=n.getBoundingClientRect();return void 0===e.x&&(e.x=e.left,e.y=e.top),e}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var e,QR=void 0;"function"!=typeof Object.create?(e=function(){},QR=function(t,r){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");e.prototype=t||{};var i=new e;return e.prototype=null,void 0!==r&&Object.defineProperties(i,r),null===t&&(i.__proto__=null),i}):QR=Object.create;var Sce=QR,Ju=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function XR(n,e){e=e||{};for(var t=Sce(n),r=0;r<Ju.length;r++)void 0!==e[Ju[r]]&&(t[Ju[r]]=e[Ju[r]]);return t}function JR(n,e){console.log("data ",e),n.data=e||{},n.dispatched="mousemove"}var A_=["webkit","moz","ms","o"],M_=function(){if(typeof window>"u")return function(){};for(var n=0,e=A_.length;n<e&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[A_[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var t=0;window.requestAnimationFrame=function(r){var i=(new Date).getTime(),s=Math.max(0,16-i-t),o=window.setTimeout(function(){return r(i+s)},s);return t=i+s,o}}return window.requestAnimationFrame.bind(window)}(),Hf=function(){if(typeof window>"u")return function(){};for(var n=0,e=A_.length;n<e&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[A_[n]+"CancelAnimationFrame"]||window[A_[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){window.clearTimeout(t)}),window.cancelAnimationFrame.bind(window)}();function Mce(n,e){void 0===e&&(e={});var t=this,r=4,i=!1;if("object"!=typeof e.margin){var s=e.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=e.margin;this.scrollWhenOutside=e.scrollWhenOutside||!1;var o={},a=function Dce(n,e){var t=GR((e=e||{}).allowUpdate,!0);return function(i){if(i=i||window.event,n.target=i.target||i.srcElement||i.originalTarget,n.element=this,n.type=i.type,t(i)){if(i.targetTouches)n.x=i.targetTouches[0].clientX,n.y=i.targetTouches[0].clientY,n.pageX=i.targetTouches[0].pageX,n.pageY=i.targetTouches[0].pageY,n.screenX=i.targetTouches[0].screenX,n.screenY=i.targetTouches[0].screenY;else{if(null===i.pageX&&null!==i.clientX){var s=i.target&&i.target.ownerDocument||document,o=s.documentElement,a=s.body;n.pageX=i.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=i.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else n.pageX=i.pageX,n.pageY=i.pageY;n.x=i.clientX,n.y=i.clientY,n.screenX=i.screenX,n.screenY=i.screenY}n.clientX=n.x,n.clientY=n.y}}}(o),l=function Ace(n){var e={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function t(s){for(var o=0;o<Ju.length;o++)e[Ju[o]]=s[Ju[o]]}return void 0!==n&&n.addEventListener("mousemove",t),{destroy:function i(){n&&n.removeEventListener("mousemove",t,!1),e=null},dispatch:MouseEvent?function(o,a,l){var c=new MouseEvent("mousemove",XR(e,a));return JR(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEvent?function(o,a,l){var c=XR(e,a),h=document.createEvent("MouseEvents");return h.initMouseEvent("mousemove",!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),JR(h,l),o.dispatchEvent(h)}:"function"==typeof document.createEventObject?function(o,a,l){var c=document.createEventObject(),h=XR(e,a);for(var m in h)c[m]=h[m];return JR(c,l),o.dispatchEvent(c)}:void 0}}(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(e.maxSpeed)||(r=e.maxSpeed),"object"!=typeof r&&(r={left:r,right:r,top:r,bottom:r}),this.autoScroll=GR(e.autoScroll),this.syncMove=GR(e.syncMove,!1),this.destroy=function(F){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",I,!1),window.removeEventListener("touchstart",I,!1),window.removeEventListener("mouseup",S,!1),window.removeEventListener("touchend",S,!1),window.removeEventListener("pointerup",S,!1),window.removeEventListener("mouseleave",O,!1),window.removeEventListener("mousemove",ye,!1),window.removeEventListener("touchmove",ye,!1),window.removeEventListener("scroll",C,!0),n=[],F&&j()},this.add=function(){for(var F=[],$=arguments.length;$--;)F[$]=arguments[$];return Cce.apply(void 0,[n].concat(F)),this},this.remove=function(){for(var F=[],$=arguments.length;$--;)F[$]=arguments[$];return bce.apply(void 0,[n].concat(F))};var m,F,h=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),F=n,n=[],F.forEach(function($){$===window?h=window:t.add($)}),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return r}},point:{get:function(){return o}},scrolling:{get:function(){return i}}});var v,_=null;function C(F){for(var $=0;$<n.length;$++)if(n[$]===F.target){i=!0;break}i&&M_(function(){return i=!1})}function I(){c=!0}function S(){c=!1,j()}function j(){Hf(v),Hf(m)}function O(){c=!1}function te(){for(var F=null,$=0;$<n.length;$++)n$(o,n[$])&&(F=n[$]);return F}function ye(F){if(t.autoScroll()&&!F.dispatched){var $=F.target,L=document.body;_&&!n$(o,_)&&(t.scrollWhenOutside||(_=null)),$&&$.parentNode===L?$=te():($=function q(F){if(!F)return null;if(_===F||KR(n,F))return F;for(;F=F.parentNode;)if(KR(n,F))return F;return null}($),$||($=te())),$&&$!==_&&(_=$),h&&(Hf(m),m=M_(Pe)),_&&(Hf(v),v=M_(z))}}function Pe(){R(h),Hf(m),m=M_(Pe)}function z(){_&&(R(_),Hf(v),v=M_(z))}function R(F){var L,Lt,$=t$(F);L=o.x<$.left+t.margin.left?Math.floor(Math.max(-1,(o.x-$.left)/t.margin.left-1)*t.maxSpeed.left):o.x>$.right-t.margin.right?Math.ceil(Math.min(1,(o.x-$.right)/t.margin.right+1)*t.maxSpeed.right):0,Lt=o.y<$.top+t.margin.top?Math.floor(Math.max(-1,(o.y-$.top)/t.margin.top-1)*t.maxSpeed.top):o.y>$.bottom-t.margin.bottom?Math.ceil(Math.min(1,(o.y-$.bottom)/t.margin.bottom+1)*t.maxSpeed.bottom):0,t.syncMove()&&l.dispatch(F,{pageX:o.pageX+L,pageY:o.pageY+Lt,clientX:o.x+L,clientY:o.y+Lt}),setTimeout(function(){Lt&&function N(F,$){F===window?window.scrollTo(F.pageXOffset,F.pageYOffset+$):F.scrollTop+=$}(F,Lt),L&&function W(F,$){F===window?window.scrollTo(F.pageXOffset+$,F.pageYOffset):F.scrollLeft+=$}(F,L)})}window.addEventListener("mousedown",I,!1),window.addEventListener("touchstart",I,!1),window.addEventListener("mouseup",S,!1),window.addEventListener("touchend",S,!1),window.addEventListener("pointerup",S,!1),window.addEventListener("mousemove",ye,!1),window.addEventListener("touchmove",ye,!1),window.addEventListener("mouseleave",O,!1),window.addEventListener("scroll",C,!0)}function n$(n,e,t){return t?n.y>t.top&&n.y<t.bottom&&n.x>t.left&&n.x<t.right:function Ice(n,e){var t=t$(e);return n.y>t.top&&n.y<t.bottom&&n.x>t.left&&n.x<t.right}(n,e)}function ek(n,e,t){t&&t.split(" ").forEach(r=>n.addClass(e.nativeElement,r))}function _b(n,e,t){t&&t.split(" ").forEach(r=>n.removeClass(e.nativeElement,r))}let r$=(()=>{class n{constructor(){this.currentDrag=new X}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),i$=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(U(rn))},n.\u0275dir=Qe({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),tk=(()=>{class n{constructor(t,r,i,s,o,a,l){this.element=t,this.renderer=r,this.draggableHelper=i,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new He,this.dragStart=new He,this.ghostElementCreated=new He,this.dragging=new He,this.dragEnd=new He,this.pointerDown$=new X,this.pointerMove$=new X,this.pointerUp$=new X,this.eventListenerSubscriptions={},this.destroy$=new X,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const t=this.pointerDown$.pipe(dn(()=>this.canDrag()),mn(r=>{r.event.stopPropagation&&!this.scrollContainer&&r.event.stopPropagation();const i=this.renderer.createElement("style");this.renderer.setAttribute(i,"type","text/css"),this.renderer.appendChild(i,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(i)});const s=this.getScrollPosition(),o=new dt(v=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",I=>v.next(I))).pipe(to(s),Ne(()=>this.getScrollPosition())),a=new X,l=new BV;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const c=ge(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(Ke()),h=Yg([this.pointerMove$,o]).pipe(Ne(([v,C])=>({currentDrag$:a,transformX:v.clientX-r.clientX,transformY:v.clientY-r.clientY,clientX:v.clientX,clientY:v.clientY,scrollLeft:C.left,scrollTop:C.top,target:v.event.target})),Ne(v=>(this.dragSnapGrid.x&&(v.transformX=Math.round(v.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(v.transformY=Math.round(v.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),v)),Ne(v=>(this.dragAxis.x||(v.transformX=0),this.dragAxis.y||(v.transformY=0),v)),Ne(v=>{const C=v.scrollLeft-s.left,I=v.scrollTop-s.top;return{...v,x:v.transformX+C,y:v.transformY+I}}),dn(({x:v,y:C,transformX:I,transformY:S})=>!this.validateDrag||this.validateDrag({x:v,y:C,transform:{x:I,y:S}})),ki(c),Ke()),m=h.pipe(kr(1),Ke()),_=h.pipe(eE(1),Ke());return m.subscribe(({clientX:v,clientY:C,x:I,y:S})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function Rce(n,e){return new Mce(n,e)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),ek(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const j=this.element.nativeElement.getBoundingClientRect(),O=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(O):this.element.nativeElement.parentNode.insertBefore(O,this.element.nativeElement.nextSibling),this.ghostElement=O,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(O,{position:"fixed",top:`${j.top}px`,left:`${j.left}px`,width:`${j.width}px`,height:`${j.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const q=this.vcr.createEmbeddedView(this.ghostElementTemplate);O.innerHTML="",q.rootNodes.filter(te=>te instanceof Node).forEach(te=>{O.appendChild(te)}),_.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(q))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:v-I,clientY:C-S,element:O})}),_.subscribe(()=>{O.parentElement.removeChild(O),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),_.pipe(mn(v=>{const C=l.pipe(function vce(n){return function yce(n,e){return ue(kL(n,e,arguments.length>=2,!1,!0))}((e,t,r)=>!n||n(t,r)?e+1:e,0)}(),kr(1),Ne(I=>({...v,dragCancelled:I>0})));return l.complete(),C})).subscribe(({x:v,y:C,dragCancelled:I})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:v,y:C,dragCancelled:I})}),_b(this.renderer,this.element,this.dragActiveClass),a.complete()}),ge(c,_).pipe(kr(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(i)})}),h}),Ke());ge(t.pipe(kr(1),Ne(r=>[,r])),t.pipe(Wh())).pipe(dn(([r,i])=>!r||r.x!==i.x||r.y!==i.y),Ne(([r,i])=>i)).subscribe(({x:r,y:i,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:c,target:h})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:r,y:i})}),requestAnimationFrame(()=>{if(this.ghostElement){const m=`translate3d(${l}px, ${c}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:m,"-webkit-transform":m,"-ms-transform":m,"-moz-transform":m,"-o-transform":m})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:h})})}ngOnChanges(t){t.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const t=this.canDrag(),r=Object.keys(this.eventListenerSubscriptions).length>0;t&&!r?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",i=>{this.onMouseDown(i)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",i=>{this.onMouseUp(i)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",i=>{this.onTouchStart(i)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",i=>{this.onTouchEnd(i)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",i=>{this.onTouchEnd(i)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!t&&r&&this.unsubscribeEventListeners()}onMouseDown(t){0===t.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",r=>{this.pointerMove$.next({event:r,clientX:r.clientX,clientY:r.clientY})})),this.pointerDown$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onMouseUp(t){0===t.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onTouchStart(t){let r,i,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),i=!1,s=this.hasScrollbar(),r=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=Of(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Of(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!i&&s&&(i=this.shouldBeginDrag(t,l,r)),(!this.touchStartLongPress||!s||i)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:t,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY})}onTouchEnd(t){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:t,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(t){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",t)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(t=>{this.eventListenerSubscriptions[t](),delete this.eventListenerSubscriptions[t]})}setElementStyles(t,r){Object.keys(r).forEach(i=>{this.renderer.setStyle(t,i,r[i])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(t,r,i){const s=this.getScrollPosition(),o_top=Math.abs(s.top-i.top),o_left=Math.abs(s.left-i.left),a=Math.abs(r.targetTouches[0].clientX-t.touches[0].clientX)-o_left,l=Math.abs(r.targetTouches[0].clientY-t.touches[0].clientY)-o_top,h=this.touchStartLongPress;return(a+l>h.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=h.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const t=this.getScrollElement();return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(U(rn),U(Si),U(r$),U(it),U(qi),U(i$,8),U(xt))},n.\u0275dir=Qe({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Ir]}),n})();function s$(n,e,t){return n>=t.left&&n<=t.right&&e>=t.top&&e<=t.bottom}let nk=(()=>{class n{constructor(t,r,i,s,o){this.element=t,this.draggableHelper=r,this.zone=i,this.renderer=s,this.scrollContainer=o,this.dragEnter=new He,this.dragLeave=new He,this.dragOver=new He,this.drop=new He}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(t=>{ek(this.renderer,this.element,this.dragActiveClass);const r={updateCache:!0},i=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{r.updateCache=!0});let s;const o=t.pipe(Ne(({clientX:c,clientY:h,dropData:m,target:_})=>{s={clientX:c,clientY:h,dropData:m,target:_},r.updateCache&&(r.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(r.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),r.updateCache=!1);const v=s$(c,h,r.rect),C=!this.validateDrop||this.validateDrop({clientX:c,clientY:h,target:_,dropData:m});return r.scrollContainerRect?v&&C&&s$(c,h,r.scrollContainerRect):v&&C})),a=o.pipe(gr());let l;a.pipe(dn(c=>c)).subscribe(()=>{l=!0,ek(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(dn(c=>c)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(Wh(),dn(([c,h])=>c&&!h)).subscribe(()=>{l=!1,_b(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),t.subscribe({complete:()=>{i(),_b(this.renderer,this.element,this.dragActiveClass),l&&(_b(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(U(rn),U(r$),U(it),U(Si),U(i$,8))},n.\u0275dir=Qe({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),yb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=$t({type:n}),n.\u0275inj=qt({}),n})();const ed=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function o$(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let xce=0;function a$(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${xce++}`)}function l$(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function c$(n,e,t,r){const i={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return e.top&&(i.top+=r),e.bottom&&(i.bottom+=r),e.left&&(i.left+=t),e.right&&(i.right+=t),i.height=i.bottom-i.top,i.width=i.right-i.left,i}const u$=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function d$(n,e){return n.left&&n.top?e.topLeft:n.right&&n.top?e.topRight:n.left&&n.bottom?e.bottomLeft:n.right&&n.bottom?e.bottomRight:n.left||n.right?e.leftOrRight:n.top||n.bottom?e.topOrBottom:""}function vb({edges:n,initialRectangle:e,newRectangle:t}){const r={};return Object.keys(n).forEach(i=>{r[i]=(t[i]||0)-(e[i]||0)}),r}const h$="resize-active";let f$=(()=>{class n{constructor(t,r,i,s){this.platformId=t,this.renderer=r,this.elm=i,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=u$,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new He,this.resizing=new He,this.resizeEnd=new He,this.mouseup=new X,this.mousedown=new X,this.mousemove=new X,this.destroy$=new X,this.pointerEventListeners=$f.getInstance(r,s)}ngOnInit(){const t=ge(this.pointerEventListeners.pointerDown,this.mousedown),r=ge(this.pointerEventListeners.pointerMove,this.mousemove).pipe(qr(({event:c})=>{s&&c.cancelable&&c.preventDefault()}),Ke()),i=ge(this.pointerEventListeners.pointerUp,this.mouseup);let s;const o=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>({...u$,...this.resizeCursors});t.pipe(mn(c=>{function h(v){return{clientX:v.clientX-c.clientX,clientY:v.clientY-c.clientY}}const m=()=>{const v={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?v.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(v.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?v.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(v.y=+this.resizeSnapGrid.bottom)),v};function _(v,C){return{x:Math.ceil(v.clientX/C.x),y:Math.ceil(v.clientY/C.y)}}return ge(r.pipe(kr(1)).pipe(Ne(v=>[,v])),r.pipe(Wh())).pipe(Ne(([v,C])=>[v&&h(v),h(C)])).pipe(dn(([v,C])=>{if(!v)return!0;const I=m(),S=_(v,I),j=_(C,I);return S.x!==j.x||S.y!==j.y})).pipe(Ne(([,v])=>{const C=m();return{clientX:Math.round(v.clientX/C.x)*C.x,clientY:Math.round(v.clientY/C.y)*C.y}})).pipe(ki(ge(i,t)))})).pipe(dn(()=>!!s)).pipe(Ne(({clientX:c,clientY:h})=>c$(s.startingRect,s.edges,c,h))).pipe(dn(c=>this.allowNegativeResizes||!!(c.height&&c.width&&c.height>0&&c.width>0))).pipe(dn(c=>!this.validateResize||this.validateResize({rectangle:c,edges:vb({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c})})),ki(this.destroy$)).subscribe(c=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${c.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${c.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${c.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${c.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:vb({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c}),rectangle:c})}),s.currentRect=c}),t.pipe(Ne(({edges:c})=>c||{}),dn(c=>Object.keys(c).length>0),ki(this.destroy$)).subscribe(c=>{s&&o();const h=function Oce(n,e){let t=0,r=0;const i=n.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>i[a]).find(a=>!!a);if(o&&o.includes("translate")&&(t=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),r=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===e)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-r,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-r,left:n.nativeElement.offsetLeft-t,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-t};{const a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-r,bottom:a.bottom-r,left:a.left-t,right:a.right-t,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:c,startingRect:h,currentRect:h};const m=a(),_=d$(s.edges,m);this.renderer.setStyle(document.body,"cursor",_),this.setElementClass(this.elm,h$,!0),this.enableGhostResize&&(s.clonedNode=function Pce(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();return e.removeAttribute("id"),t.forEach(i=>{i.removeAttribute("id")}),"canvas"===r?l$(n,e):("input"===r||"select"===r||"textarea"===r)&&a$(n,e),o$("canvas",n,e,l$),o$("input, textarea, select",n,e,a$),e}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",d$(s.edges,m)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:vb({edges:c,initialRectangle:h,newRectangle:h}),rectangle:c$(h,{},0,0)})})}),i.pipe(ki(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,h$),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:vb({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),o(),s=null)})}ngOnDestroy(){sL(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(t,r,i){i?this.renderer.addClass(t.nativeElement,r):this.renderer.removeClass(t.nativeElement,r)}}return n.\u0275fac=function(t){return new(t||n)(U(Gs),U(Si),U(rn),U(it))},n.\u0275dir=Qe({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class $f{constructor(e,t){this.pointerDown=new dt(r=>{let i,s;return t.runOutsideAngular(()=>{i=e.listen("document","mousedown",o=>{r.next({clientX:o.clientX,clientY:o.clientY,event:o})}),ed&&(s=e.listen("document","touchstart",o=>{r.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{i(),ed&&s()}}).pipe(Ke()),this.pointerMove=new dt(r=>{let i,s;return t.runOutsideAngular(()=>{i=e.listen("document","mousemove",o=>{r.next({clientX:o.clientX,clientY:o.clientY,event:o})}),ed&&(s=e.listen("document","touchmove",o=>{r.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{i(),ed&&s()}}).pipe(Ke()),this.pointerUp=new dt(r=>{let i,s,o;return t.runOutsideAngular(()=>{i=e.listen("document","mouseup",a=>{r.next({clientX:a.clientX,clientY:a.clientY,event:a})}),ed&&(s=e.listen("document","touchend",a=>{r.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),o=e.listen("document","touchcancel",a=>{r.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{i(),ed&&(s(),o())}}).pipe(Ke())}static getInstance(e,t){return $f.instance||($f.instance=new $f(e,t)),$f.instance}}let Lce=(()=>{class n{constructor(t,r,i,s){this.renderer=t,this.element=r,this.zone=i,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new X}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(t=>{this.onMousedown(t,t.clientX,t.clientY)}),this.listenOnTheHost("mouseup").subscribe(t=>{this.onMouseup(t.clientX,t.clientY)}),ed&&(this.listenOnTheHost("touchstart").subscribe(t=>{this.onMousedown(t,t.touches[0].clientX,t.touches[0].clientY)}),ge(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(t=>{this.onMouseup(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(t,r,i){t.cancelable&&t.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:r,clientY:i,edges:this.resizeEdges})}onMouseup(t,r){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:t,clientY:r,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(t,r,i){this.resizable.mousemove.next({clientX:r,clientY:i,edges:this.resizeEdges,event:t})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(t=>{this.eventListeners[t](),delete this.eventListeners[t]})}listenOnTheHost(t){return Of(this.element.nativeElement,t).pipe(ki(this.destroy$))}}return n.\u0275fac=function(t){return new(t||n)(U(Si),U(rn),U(it),U(f$,8))},n.\u0275dir=Qe({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),p$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=$t({type:n}),n.\u0275inj=qt({}),n})();const Vce=function(n){return{action:n}};function Bce(n,e){if(1&n){const t=Et();b(0,"a",5),ae("mwlClick",function(i){const o=we(t).$implicit,a=re(2).event;return Ee(o.onClick({event:a,sourceEvent:i}))})("mwlKeydownEnter",function(i){const o=we(t).$implicit,a=re(2).event;return Ee(o.onClick({event:a,sourceEvent:i}))}),Xt(1,"calendarA11y"),T()}if(2&n){const t=e.$implicit;Y("ngClass",t.cssClass)("innerHtml",t.label,Gv),ir("aria-label",or(1,3,Co(6,Vce,t),"actionButtonLabel"))}}function Uce(n,e){if(1&n&&(b(0,"span",3),xe(1,Bce,2,8,"a",4),T()),2&n){const t=re(),r=t.event,i=t.trackByActionId;H(1),Y("ngForOf",r.actions)("ngForTrackBy",i)}}function jce(n,e){1&n&&xe(0,Uce,2,2,"span",2),2&n&&Y("ngIf",e.event.actions)}function Hce(n,e){}const $ce=function(n,e){return{event:n,trackByActionId:e}},zf=function(){return{}};function zce(n,e){if(1&n&&(kn(0,"span",2),Xt(1,"calendarEventTitle"),Xt(2,"calendarA11y")),2&n){const t=e.event;Y("innerHTML",Zo(1,2,t.title,e.view,t),Gv),ir("aria-hidden",or(2,6,jn(9,zf),"hideEventTitle"))}}function Wce(n,e){}const qce=function(n,e){return{event:n,view:e}};function Gce(n,e){if(1&n&&(b(0,"div",2),kn(1,"div",3)(2,"div",4),T()),2&n){const t=e.contents;Y("ngClass","cal-tooltip-"+e.placement),H(2),Y("innerHtml",t,Gv)}}function Zce(n,e){}const Kce=function(n,e,t){return{contents:n,placement:e,event:t}};function Yce(n,e){if(1&n&&(b(0,"span",7),x(1),T()),2&n){const t=re().day;H(1),gt(t.badgeTotal)}}const rk=function(n){return{backgroundColor:n}},Qce=function(n,e){return{event:n,draggedFrom:e}},R_=function(n,e){return{x:n,y:e}},wb=function(){return{delay:300,delta:30}};function Xce(n,e){if(1&n){const t=Et();b(0,"div",10),ae("mouseenter",function(){const s=we(t).$implicit;return Ee(re(2).highlightDay.emit({event:s}))})("mouseleave",function(){const s=we(t).$implicit;return Ee(re(2).unhighlightDay.emit({event:s}))})("mwlClick",function(i){const o=we(t).$implicit;return Ee(re(2).eventClicked.emit({event:o,sourceEvent:i}))}),Xt(1,"calendarEventTitle"),Xt(2,"calendarA11y"),T()}if(2&n){const t=e.$implicit,r=re(2),i=r.tooltipPlacement,s=r.tooltipTemplate,o=r.tooltipAppendToBody,a=r.tooltipDelay,l=r.day,c=r.validateDrag;ni("cal-draggable",t.draggable),Y("ngStyle",Co(22,rk,null==t.color?null:t.color.primary))("ngClass",null==t?null:t.cssClass)("mwlCalendarTooltip",Zo(1,15,t.title,"monthTooltip",t))("tooltipPlacement",i)("tooltipEvent",t)("tooltipTemplate",s)("tooltipAppendToBody",o)("tooltipDelay",a)("dropData",$r(24,Qce,t,l))("dragAxis",$r(27,R_,t.draggable,t.draggable))("validateDrag",c)("touchStartLongPress",jn(30,wb)),ir("aria-hidden",or(2,19,jn(31,zf),"hideMonthCellEvents"))}}function Jce(n,e){if(1&n&&(b(0,"div",8),xe(1,Xce,3,32,"div",9),T()),2&n){const t=re(),r=t.day,i=t.trackByEventId;H(1),Y("ngForOf",r.events)("ngForTrackBy",i)}}const eue=function(n,e){return{day:n,locale:e}};function tue(n,e){if(1&n&&(b(0,"div",2),Xt(1,"calendarA11y"),b(2,"span",3),xe(3,Yce,2,1,"span",4),b(4,"span",5),x(5),Xt(6,"calendarDate"),T()()(),xe(7,Jce,2,2,"div",6)),2&n){const t=e.day,r=e.locale;ir("aria-label",or(1,4,$r(11,eue,t,r),"monthCell")),H(3),Y("ngIf",t.badgeTotal>0),H(2),gt(Zo(6,7,t.date,"monthViewDayNumber",r)),H(2),Y("ngIf",t.events.length>0)}}function nue(n,e){}const rue=function(n,e,t,r,i,s,o,a,l,c,h,m){return{day:n,openDay:e,locale:t,tooltipPlacement:r,highlightDay:i,unhighlightDay:s,eventClicked:o,tooltipTemplate:a,tooltipAppendToBody:l,tooltipDelay:c,trackByEventId:h,validateDrag:m}},iue=function(n){return{event:n}},g$=function(n,e){return{event:n,locale:e}};function sue(n,e){if(1&n){const t=Et();b(0,"div",7),kn(1,"span",8),x(2," "),b(3,"mwl-calendar-event-title",9),ae("mwlClick",function(i){const o=we(t).$implicit;return Ee(re(2).eventClicked.emit({event:o,sourceEvent:i}))})("mwlKeydownEnter",function(i){const o=we(t).$implicit;return Ee(re(2).eventClicked.emit({event:o,sourceEvent:i}))}),Xt(4,"calendarA11y"),T(),x(5," "),kn(6,"mwl-calendar-event-actions",10),T()}if(2&n){const t=e.$implicit,r=re(2).validateDrag,i=re();ni("cal-draggable",t.draggable),Y("ngClass",null==t?null:t.cssClass)("dropData",Co(16,iue,t))("dragAxis",$r(18,R_,t.draggable,t.draggable))("validateDrag",r)("touchStartLongPress",jn(21,wb)),H(1),Y("ngStyle",Co(22,rk,null==t.color?null:t.color.primary)),H(2),Y("event",t)("customTemplate",i.eventTitleTemplate),ir("aria-label",or(4,13,$r(24,g$,t,i.locale),"eventDescription")),H(3),Y("event",t)("customTemplate",i.eventActionsTemplate)}}const m$=function(n,e){return{date:n,locale:e}};function oue(n,e){if(1&n&&(b(0,"div",3),kn(1,"span",4),Xt(2,"calendarA11y"),kn(3,"span",5),Xt(4,"calendarA11y"),xe(5,sue,7,27,"div",6),T()),2&n){const t=re(),r=t.events,i=t.trackByEventId,s=re();Y("@collapse",void 0),H(1),ir("aria-label",or(2,5,$r(11,m$,s.date,s.locale),"openDayEventsAlert")),H(2),ir("aria-label",or(4,8,$r(14,m$,s.date,s.locale),"openDayEventsLandmark")),H(2),Y("ngForOf",r)("ngForTrackBy",i)}}function aue(n,e){1&n&&xe(0,oue,6,17,"div",2),2&n&&Y("ngIf",e.isOpen)}function lue(n,e){}const cue=function(n,e,t,r,i){return{events:n,eventClicked:e,isOpen:t,trackByEventId:r,validateDrag:i}};function uue(n,e){if(1&n){const t=Et();b(0,"div",4),ae("click",function(i){const o=we(t).$implicit;return Ee(re(2).columnHeaderClicked.emit({isoDayNumber:o.day,sourceEvent:i}))}),x(1),Xt(2,"calendarDate"),T()}if(2&n){const t=e.$implicit,r=re().locale;ni("cal-past",t.isPast)("cal-today",t.isToday)("cal-future",t.isFuture)("cal-weekend",t.isWeekend),Y("ngClass",t.cssClass),H(1),Mi(" ",Zo(2,10,t.date,"monthViewColumnHeader",r)," ")}}function due(n,e){if(1&n&&(b(0,"div",2),xe(1,uue,3,14,"div",3),T()),2&n){const t=e.days,r=e.trackByWeekDayHeaderDate;H(1),Y("ngForOf",t)("ngForTrackBy",r)}}function hue(n,e){}const fue=function(n,e,t){return{days:n,locale:e,trackByWeekDayHeaderDate:t}};function pue(n,e){if(1&n){const t=Et();b(0,"mwl-calendar-month-cell",7),ae("mwlClick",function(i){const o=we(t).$implicit;return Ee(re(2).dayClicked.emit({day:o,sourceEvent:i}))})("mwlKeydownEnter",function(i){const o=we(t).$implicit;return Ee(re(2).dayClicked.emit({day:o,sourceEvent:i}))})("highlightDay",function(i){return we(t),Ee(re(2).toggleDayHighlight(i.event,!0))})("unhighlightDay",function(i){return we(t),Ee(re(2).toggleDayHighlight(i.event,!1))})("drop",function(i){const o=we(t).$implicit;return Ee(re(2).eventDropped(o,i.dropData.event,i.dropData.draggedFrom))})("eventClicked",function(i){return we(t),Ee(re(2).eventClicked.emit({event:i.event,sourceEvent:i.sourceEvent}))}),Xt(1,"calendarA11y"),T()}if(2&n){const t=e.$implicit,r=re(2);Y("ngClass",null==t?null:t.cssClass)("day",t)("openDay",r.openDay)("locale",r.locale)("tooltipPlacement",r.tooltipPlacement)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipTemplate",r.tooltipTemplate)("tooltipDelay",r.tooltipDelay)("customTemplate",r.cellTemplate)("ngStyle",Co(15,rk,t.backgroundColor))("clickListenerDisabled",0===r.dayClicked.observers.length),ir("tabindex",or(1,12,jn(17,zf),"monthCellTabIndex"))}}function gue(n,e){if(1&n){const t=Et();b(0,"div")(1,"div",4),xe(2,pue,2,18,"mwl-calendar-month-cell",5),Xt(3,"slice"),T(),b(4,"mwl-calendar-open-day-events",6),ae("eventClicked",function(i){return we(t),Ee(re().eventClicked.emit({event:i.event,sourceEvent:i.sourceEvent}))})("drop",function(i){we(t);const s=re();return Ee(s.eventDropped(s.openDay,i.dropData.event,i.dropData.draggedFrom))}),T()()}if(2&n){const t=e.$implicit,r=re();H(2),Y("ngForOf",Zo(3,9,r.view.days,t,t+r.view.totalDaysVisibleInWeek))("ngForTrackBy",r.trackByDate),H(2),Y("locale",r.locale)("isOpen",r.openRowIndex===t)("events",null==r.openDay?null:r.openDay.events)("date",null==r.openDay?null:r.openDay.date)("customTemplate",r.openDayEventsTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)}}function mue(n,e){if(1&n){const t=Et();b(0,"div",4),ae("mwlClick",function(i){const o=we(t).$implicit;return Ee(re().dayHeaderClicked.emit({day:o,sourceEvent:i}))})("drop",function(i){const o=we(t).$implicit;return Ee(re().eventDropped.emit({event:i.dropData.event,newStart:o.date}))})("dragEnter",function(){const s=we(t).$implicit;return Ee(re().dragEnter.emit({date:s.date}))}),b(1,"b"),x(2),Xt(3,"calendarDate"),T(),kn(4,"br"),b(5,"span"),x(6),Xt(7,"calendarDate"),T()()}if(2&n){const t=e.$implicit,r=re().locale;ni("cal-past",t.isPast)("cal-today",t.isToday)("cal-future",t.isFuture)("cal-weekend",t.isWeekend),Y("ngClass",t.cssClass),H(2),gt(Zo(3,11,t.date,"weekViewColumnHeader",r)),H(4),gt(Zo(7,15,t.date,"weekViewColumnSubHeader",r))}}function _ue(n,e){if(1&n&&(b(0,"div",2),xe(1,mue,8,19,"div",3),T()),2&n){const t=e.days,r=e.trackByWeekDayHeaderDate;H(1),Y("ngForOf",t)("ngForTrackBy",r)}}function yue(n,e){}const vue=function(n,e,t,r,i,s){return{days:n,locale:e,dayHeaderClicked:t,eventDropped:r,dragEnter:i,trackByWeekDayHeaderDate:s}},wue=function(n,e,t){return{color:n,backgroundColor:e,borderColor:t}};function Eue(n,e){if(1&n){const t=Et();b(0,"div",2),ae("mwlClick",function(i){return Ee(we(t).eventClicked.emit({sourceEvent:i}))})("mwlKeydownEnter",function(i){return Ee(we(t).eventClicked.emit({sourceEvent:i}))}),Xt(1,"calendarEventTitle"),Xt(2,"calendarA11y"),kn(3,"mwl-calendar-event-actions",3),x(4," "),kn(5,"mwl-calendar-event-title",4),T()}if(2&n){const t=e.weekEvent,r=e.tooltipPlacement,i=e.tooltipTemplate,s=e.tooltipAppendToBody,o=e.tooltipDisabled,a=e.tooltipDelay,l=e.daysInWeek,c=re();Y("ngStyle",Cw(20,wue,null==t.event.color?null:t.event.color.secondaryText,null==t.event.color?null:t.event.color.secondary,null==t.event.color?null:t.event.color.primary))("mwlCalendarTooltip",o?"":Zo(1,13,t.event.title,1===l?"dayTooltip":"weekTooltip",t.tempEvent||t.event))("tooltipPlacement",r)("tooltipEvent",t.tempEvent||t.event)("tooltipTemplate",i)("tooltipAppendToBody",s)("tooltipDelay",a),ir("aria-label",or(2,17,$r(24,g$,t.tempEvent||t.event,c.locale),"eventDescription")),H(3),Y("event",t.tempEvent||t.event)("customTemplate",c.eventActionsTemplate),H(2),Y("event",t.tempEvent||t.event)("customTemplate",c.eventTitleTemplate)("view",1===l?"day":"week")}}function Cue(n,e){}const bue=function(n,e,t,r,i,s,o,a,l){return{weekEvent:n,tooltipPlacement:e,eventClicked:t,tooltipTemplate:r,tooltipAppendToBody:i,tooltipDisabled:s,tooltipDelay:o,column:a,daysInWeek:l}};function Due(n,e){if(1&n&&(b(0,"div",4),x(1),Xt(2,"calendarDate"),T()),2&n){const t=re(),r=t.segment,i=t.daysInWeek,s=t.locale;H(1),Mi(" ",Zo(2,1,r.displayDate,1===i?"dayViewHour":"weekViewHour",s)," ")}}function Tue(n,e){if(1&n&&(b(0,"div",2),Xt(1,"calendarA11y"),xe(2,Due,3,5,"div",3),T()),2&n){const t=e.segment,i=e.isTimeLabel,s=e.daysInWeek;Ks("height",e.segmentHeight,"px"),ni("cal-hour-start",t.isStart)("cal-after-hour-start",!t.isStart),Y("ngClass",t.cssClass),ir("aria-hidden",or(1,9,jn(12,zf),1===s?"hideDayHourSegment":"hideWeekHourSegment")),H(2),Y("ngIf",i)}}function Iue(n,e){}const Sue=function(n,e,t,r,i){return{segment:n,locale:e,segmentHeight:t,isTimeLabel:r,daysInWeek:i}};function Aue(n,e){1&n&&kn(0,"div",3),2&n&&Ks("top",re().topPx,"px")}function Mue(n,e){1&n&&xe(0,Aue,1,2,"div",2),2&n&&Y("ngIf",e.isVisible)}function Rue(n,e){}const kue=function(n,e,t,r,i,s,o){return{columnDate:n,dayStartHour:e,dayStartMinute:t,dayEndHour:r,dayEndMinute:i,isVisible:s,topPx:o}};function Pue(n,e){1&n&&cT(0)}function xue(n,e){if(1&n){const t=Et();b(0,"div",14),ae("drop",function(i){const o=we(t).$implicit;return Ee(re(2).eventDropped(i,o.date,!0))})("dragEnter",function(){const s=we(t).$implicit;return Ee(re(2).dateDragEnter(s.date))}),T()}}const Oue=function(){return{left:!0}};function Nue(n,e){1&n&&kn(0,"div",23),2&n&&Y("resizeEdges",jn(1,Oue))}const Fue=function(){return{right:!0}};function Lue(n,e){1&n&&kn(0,"div",24),2&n&&Y("resizeEdges",jn(1,Fue))}const Vue=function(n,e){return{left:n,right:e}},_$=function(n,e){return{event:n,calendarId:e}},Bue=function(n){return{x:n}};function Uue(n,e){if(1&n){const t=Et();b(0,"div",18,19),ae("resizeStart",function(i){const o=we(t).$implicit;re();const a=ti(1);return Ee(re(2).allDayEventResizeStarted(a,o,i))})("resizing",function(i){const o=we(t).$implicit,a=re(3);return Ee(a.allDayEventResizing(o,i,a.dayColumnWidth))})("resizeEnd",function(){const s=we(t).$implicit;return Ee(re(3).allDayEventResizeEnded(s))})("dragStart",function(){const s=we(t).$implicit,o=ti(1);re();const a=ti(1);return Ee(re(2).dragStarted(a,o,s,!1))})("dragging",function(){return we(t),Ee(re(3).allDayEventDragMove())})("dragEnd",function(i){const o=we(t).$implicit,a=re(3);return Ee(a.dragEnded(o,i,a.dayColumnWidth))}),xe(2,Nue,1,2,"div",20),b(3,"mwl-calendar-week-view-event",21),ae("eventClicked",function(i){const o=we(t).$implicit;return Ee(re(3).eventClicked.emit({event:o.event,sourceEvent:i.sourceEvent}))}),T(),xe(4,Lue,1,2,"div",22),T()}if(2&n){const t=e.$implicit,r=re(3);Ks("width",100/r.days.length*t.span,"%")("margin-left",r.rtl?null:100/r.days.length*t.offset,"%")("margin-right",r.rtl?100/r.days.length*t.offset:null,"%"),ni("cal-draggable",t.event.draggable&&0===r.allDayEventResizes.size)("cal-starts-within-week",!t.startsBeforeWeek)("cal-ends-within-week",!t.endsAfterWeek),Y("ngClass",null==t.event?null:t.event.cssClass)("resizeCursors",r.resizeCursors)("resizeSnapGrid",$r(33,Vue,r.dayColumnWidth,r.dayColumnWidth))("validateResize",r.validateResize)("dropData",$r(36,_$,t.event,r.calendarId))("dragAxis",$r(39,R_,t.event.draggable&&0===r.allDayEventResizes.size,!r.snapDraggedEvents&&t.event.draggable&&0===r.allDayEventResizes.size))("dragSnapGrid",r.snapDraggedEvents?Co(42,Bue,r.dayColumnWidth):jn(44,zf))("validateDrag",r.validateDrag)("touchStartLongPress",jn(45,wb)),H(2),Y("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.beforeStart)&&!t.startsBeforeWeek),H(1),Y("locale",r.locale)("weekEvent",t)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("daysInWeek",r.daysInWeek),H(1),Y("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.afterEnd)&&!t.endsAfterWeek)}}function jue(n,e){if(1&n&&(b(0,"div",15,16),xe(2,Uue,5,46,"div",17),T()),2&n){const t=e.$implicit,r=re(2);H(2),Y("ngForOf",t.row)("ngForTrackBy",r.trackByWeekAllDayEvent)}}function Hue(n,e){if(1&n){const t=Et();b(0,"div",8,9),ae("dragEnter",function(){return we(t),Ee(re().dragEnter("allDay"))})("dragLeave",function(){return we(t),Ee(re().dragLeave("allDay"))}),b(2,"div",5)(3,"div",10),xe(4,Pue,1,0,"ng-container",11),T(),xe(5,xue,1,0,"div",12),T(),xe(6,jue,3,2,"div",13),T()}if(2&n){const t=re();H(4),Y("ngTemplateOutlet",t.allDayEventsLabelTemplate),H(1),Y("ngForOf",t.days)("ngForTrackBy",t.trackByWeekDayHeaderDate),H(1),Y("ngForOf",t.view.allDayEventRows)("ngForTrackBy",t.trackById)}}function $ue(n,e){if(1&n&&kn(0,"mwl-calendar-week-view-hour-segment",28),2&n){const t=e.$implicit,r=re(3);Ks("height",r.hourSegmentHeight,"px"),Y("segment",t)("segmentHeight",r.hourSegmentHeight)("locale",r.locale)("customTemplate",r.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",r.daysInWeek)}}function zue(n,e){if(1&n&&(b(0,"div",26),xe(1,$ue,1,8,"mwl-calendar-week-view-hour-segment",27),T()),2&n){const t=e.$implicit,r=e.odd,i=re(2);ni("cal-hour-odd",r),H(1),Y("ngForOf",t.segments)("ngForTrackBy",i.trackByHourSegment)}}function Wue(n,e){if(1&n&&(b(0,"div",10),xe(1,zue,2,4,"div",25),T()),2&n){const t=re();H(1),Y("ngForOf",t.view.hourColumns[0].hours)("ngForTrackBy",t.trackByHour)}}const que=function(){return{left:!0,top:!0}};function Gue(n,e){1&n&&kn(0,"div",23),2&n&&Y("resizeEdges",jn(1,que))}function Zue(n,e){}function Kue(n,e){if(1&n){const t=Et();b(0,"mwl-calendar-week-view-event",36),ae("eventClicked",function(i){we(t);const s=re().$implicit;return Ee(re(2).eventClicked.emit({event:s.event,sourceEvent:i.sourceEvent}))}),T()}if(2&n){const t=re().$implicit,r=re().$implicit,i=re();Y("locale",i.locale)("weekEvent",t)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDisabled",i.dragActive||i.timeEventResizes.size>0)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("column",r)("daysInWeek",i.daysInWeek)}}const Yue=function(){return{right:!0,bottom:!0}};function Que(n,e){1&n&&kn(0,"div",24),2&n&&Y("resizeEdges",jn(1,Yue))}const Xue=function(n,e,t,r){return{left:n,right:e,top:t,bottom:r}};function Jue(n,e){if(1&n){const t=Et();b(0,"div",33,19),ae("resizeStart",function(i){const o=we(t).$implicit,a=re(2),l=ti(6);return Ee(a.timeEventResizeStarted(l,o,i))})("resizing",function(i){const o=we(t).$implicit;return Ee(re(2).timeEventResizing(o,i))})("resizeEnd",function(){const s=we(t).$implicit;return Ee(re(2).timeEventResizeEnded(s))})("dragStart",function(){const s=we(t).$implicit,o=ti(1),a=re(2),l=ti(6);return Ee(a.dragStarted(l,o,s,!0))})("dragging",function(i){const o=we(t).$implicit;return Ee(re(2).dragMove(o,i))})("dragEnd",function(i){const o=we(t).$implicit,a=re(2);return Ee(a.dragEnded(o,i,a.dayColumnWidth,!0))}),xe(2,Gue,1,2,"div",20),xe(3,Zue,0,0,"ng-template",34),xe(4,Kue,1,12,"ng-template",null,35,Qs),xe(6,Que,1,2,"div",22),T()}if(2&n){const t=e.$implicit,r=ti(5),i=re(2);Ks("top",t.top,"px")("height",t.height,"px")("left",t.left,"%")("width",t.width,"%"),ni("cal-draggable",t.event.draggable&&0===i.timeEventResizes.size)("cal-starts-within-day",!t.startsBeforeDay)("cal-ends-within-day",!t.endsAfterDay),Y("ngClass",t.event.cssClass)("hidden",0===t.height&&0===t.width)("resizeCursors",i.resizeCursors)("resizeSnapGrid",gN(30,Xue,i.dayColumnWidth,i.dayColumnWidth,i.eventSnapSize||i.hourSegmentHeight,i.eventSnapSize||i.hourSegmentHeight))("validateResize",i.validateResize)("allowNegativeResizes",!0)("dropData",$r(35,_$,t.event,i.calendarId))("dragAxis",$r(38,R_,t.event.draggable&&0===i.timeEventResizes.size,t.event.draggable&&0===i.timeEventResizes.size))("dragSnapGrid",i.snapDraggedEvents?$r(41,R_,i.dayColumnWidth,i.eventSnapSize||i.hourSegmentHeight):jn(44,zf))("touchStartLongPress",jn(45,wb))("ghostDragEnabled",!i.snapDraggedEvents)("ghostElementTemplate",r)("validateDrag",i.validateDrag),H(2),Y("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.beforeStart)&&!t.startsBeforeDay),H(1),Y("ngTemplateOutlet",r),H(3),Y("ngIf",(null==t.event||null==t.event.resizable?null:t.event.resizable.afterEnd)&&!t.endsAfterDay)}}function ede(n,e){if(1&n){const t=Et();b(0,"mwl-calendar-week-view-hour-segment",38),ae("mwlClick",function(i){const o=we(t).$implicit;return Ee(re(3).hourSegmentClicked.emit({date:o.date,sourceEvent:i}))})("drop",function(i){const o=we(t).$implicit;return Ee(re(3).eventDropped(i,o.date,!1))})("dragEnter",function(){const s=we(t).$implicit;return Ee(re(3).dateDragEnter(s.date))}),T()}if(2&n){const t=e.$implicit,r=re(3);Ks("height",r.hourSegmentHeight,"px"),Y("segment",t)("segmentHeight",r.hourSegmentHeight)("locale",r.locale)("customTemplate",r.hourSegmentTemplate)("daysInWeek",r.daysInWeek)("clickListenerDisabled",0===r.hourSegmentClicked.observers.length)("dragOverClass",r.dragActive&&r.snapDraggedEvents?null:"cal-drag-over")("isTimeLabel",1===r.daysInWeek)}}function tde(n,e){if(1&n&&(b(0,"div",26),xe(1,ede,1,10,"mwl-calendar-week-view-hour-segment",37),T()),2&n){const t=e.$implicit,r=e.odd,i=re(2);ni("cal-hour-odd",r),H(1),Y("ngForOf",t.segments)("ngForTrackBy",i.trackByHourSegment)}}function nde(n,e){if(1&n&&(b(0,"div",29),kn(1,"mwl-calendar-week-view-current-time-marker",30),b(2,"div",31),xe(3,Jue,7,46,"div",32),T(),xe(4,tde,2,4,"div",25),T()),2&n){const t=e.$implicit,r=re();H(1),Y("columnDate",t.date)("dayStartHour",r.dayStartHour)("dayStartMinute",r.dayStartMinute)("dayEndHour",r.dayEndHour)("dayEndMinute",r.dayEndMinute)("hourSegments",r.hourSegments)("hourDuration",r.hourDuration)("hourSegmentHeight",r.hourSegmentHeight)("customTemplate",r.currentTimeMarkerTemplate),H(2),Y("ngForOf",t.events)("ngForTrackBy",r.trackByWeekTimeEvent),H(1),Y("ngForOf",t.hours)("ngForTrackBy",r.trackByHour)}}let td=(()=>{class n{constructor(t,r,i){this.renderer=t,this.elm=r,this.document=i,this.clickListenerDisabled=!1,this.click=new He,this.destroy$=new X}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(ki(this.destroy$)).subscribe(t=>{t.stopPropagation(),this.click.emit(t)})}ngOnDestroy(){this.destroy$.next()}listen(){return new dt(t=>this.renderer.listen(this.elm.nativeElement,"click",r=>{t.next(r)}))}}return n.\u0275fac=function(t){return new(t||n)(U(Si),U(rn),U(xt))},n.\u0275dir=Qe({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),Eb=(()=>{class n{constructor(t,r,i){this.host=t,this.ngZone=r,this.renderer=i,this.keydown=new He,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",t=>{(13===t.keyCode||13===t.which||"Enter"===t.key)&&(t.preventDefault(),t.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(t)}))})})}ngOnDestroy(){null!==this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(t){return new(t||n)(U(rn),U(it),U(Si))},n.\u0275dir=Qe({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),k_=(()=>{class n{constructor(t){this.i18nPlural=t}monthCell({day:t,locale:r}){return t.badgeTotal>0?`\n        ${zr(t.date,"EEEE MMMM d",r)},\n        ${this.i18nPlural.transform(t.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${zr(t.date,"EEEE MMMM d",r)}`}openDayEventsLandmark({date:t,locale:r}){return`\n      Beginning of expanded view for ${zr(t,"EEEE MMMM dd",r)}\n    `}openDayEventsAlert({date:t,locale:r}){return`${zr(t,"EEEE MMMM dd",r)} expanded`}eventDescription({event:t,locale:r}){if(!0===t.allDay)return this.allDayEventDescription({event:t,locale:r});const i=`\n      ${zr(t.start,"EEEE MMMM dd",r)},\n      ${t.title}, from ${zr(t.start,"hh:mm a",r)}\n    `;return t.end?i+` to ${zr(t.end,"hh:mm a",r)}`:i}allDayEventDescription({event:t,locale:r}){const i=`\n      ${t.title}, event spans multiple days:\n      start time ${zr(t.start,"MMMM dd hh:mm a",r)}\n    `;return t.end?i+`, stop time ${zr(t.end,"MMMM d hh:mm a",r)}`:i+", no stop time"}actionButtonLabel({action:t}){return t.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(t){return new(t||n)(Q(_I))},n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})(),nd=(()=>{class n{constructor(t,r){this.calendarA11y=t,this.locale=r}transform(t,r){if(t.locale=t.locale||this.locale,typeof this.calendarA11y[r]>"u"){const i=Object.getOwnPropertyNames(Object.getPrototypeOf(k_.prototype)).filter(s=>"constructor"!==s);throw new Error(`${r} is not a valid a11y method. Can only be one of ${i.join(", ")}`)}return this.calendarA11y[r](t)}}return n.\u0275fac=function(t){return new(t||n)(U(k_,16),U(hs,16))},n.\u0275pipe=_r({name:"calendarA11y",type:n,pure:!0}),n})(),y$=(()=>{class n{constructor(){this.trackByActionId=(t,r)=>r.id?r.id:r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter"]],template:function(t,r){if(1&t&&(xe(0,jce,1,1,"ng-template",null,0,Qs),xe(2,Hce,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",$r(2,$ce,r.event,r.trackByActionId))}},dependencies:[ps,hi,Rs,eo,td,Eb,nd],encapsulation:2}),n})();class Cb{month(e,t){return e.title}monthTooltip(e,t){return e.title}week(e,t){return e.title}weekTooltip(e,t){return e.title}day(e,t){return e.title}dayTooltip(e,t){return e.title}}let ik=(()=>{class n{constructor(t){this.calendarEventTitle=t}transform(t,r,i){return this.calendarEventTitle[r](i,t)}}return n.\u0275fac=function(t){return new(t||n)(U(Cb,16))},n.\u0275pipe=_r({name:"calendarEventTitle",type:n,pure:!0}),n})(),v$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(t,r){if(1&t&&(xe(0,zce,3,10,"ng-template",null,0,Qs),xe(2,Wce,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",$r(2,qce,r.event,r.view))}},dependencies:[eo,ik,nd],encapsulation:2}),n})(),rde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(t,r){if(1&t&&(xe(0,Gce,3,2,"ng-template",null,0,Qs),xe(2,Zce,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",Cw(2,Kce,r.contents,r.placement,r.event))}},dependencies:[ps,eo],encapsulation:2}),n})(),w$=(()=>{class n{constructor(t,r,i,s,o,a){this.elementRef=t,this.injector=r,this.renderer=i,this.viewContainerRef=o,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new X,this.tooltipFactory=s.resolveComponentFactory(rde)}ngOnChanges(t){this.tooltipRef&&(t.contents||t.customTemplate||t.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(null===this.delay?me("now"):mR(this.delay)).pipe(ki(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(t=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=function ice(n,e,t,r,i){var s=Array.isArray(t)?t:t.split(rce),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=e.classList,l=function(S){var j=S.split("-"),O=j[0],q=j[1],te=[];return i&&(te.push(i+"-"+O),q&&te.push(i+"-"+O+"-"+q),te.forEach(function(ye){a.add(ye)})),te};i&&o.forEach(function(S){a.remove(i+"-"+S)});var c=s.findIndex(function(S){return"auto"===S});c>=0&&o.forEach(function(S){null==s.find(function(j){return-1!==j.search("^"+S)})&&s.splice(c++,1,S)});var h=e.style;h.position="absolute",h.top="0",h.left="0",h["will-change"]="transform";for(var m,_=!1,v=0,C=s;v<C.length;v++){var I=l(m=C[v]);if(Y4.positionElements(n,e,m,r)){_=!0;break}i&&I.forEach(function(S){a.remove(S)})}return _||(l(m=s[0]),Y4.positionElements(n,e,m,r)),m}(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===t.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip([...t,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(t){return new(t||n)(U(rn),U(Mr),U(Si),U(iu),U(qi),U(xt))},n.\u0275dir=Qe({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(t,r){1&t&&ae("mouseenter",function(){return r.onMouseOver()})("mouseleave",function(){return r.onMouseOut()})},inputs:{contents:["mwlCalendarTooltip","contents"],placement:["tooltipPlacement","placement"],customTemplate:["tooltipTemplate","customTemplate"],event:["tooltipEvent","event"],appendToBody:["tooltipAppendToBody","appendToBody"],delay:["tooltipDelay","delay"]},features:[Ir]}),n})();var Ka=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(Ka||{});const E$=n=>function _ce(n,e){var t=!0;function r(i,s){e(i,s),t=!1}return Array.isArray(n)?(n.forEach(function(i){i.start?i.start instanceof Date||r(jf.StartPropertyNotDate,i):r(jf.StartPropertyMissing,i),i.end&&(i.end instanceof Date||r(jf.EndPropertyNotDate,i),i.start>i.end&&r(jf.EndsBeforeStart,i))}),t):(e(jf.NotArray,n),!1)}(n,(...t)=>console.warn("angular-calendar",...t));function C$(n,e){return Math.floor(n.left)<=Math.ceil(e.left)&&Math.floor(e.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(e.right)&&Math.floor(e.right)<=Math.ceil(n.right)}function b$(n,e){return Math.round(n/e)*e}const D$=(n,e)=>e.id?e.id:e,sk=(n,e)=>e.date.toISOString(),ode=(n,e)=>e.date.toISOString(),ade=(n,e)=>e.segments[0].date.toISOString(),lde=(n,e)=>e.event.id?e.event.id:e.event,cde=(n,e)=>e.event.id?e.event.id:e.event;function ok(n,e,t,r,i){const s=b$(n,r||t),o=function dde(n,e,t){return(t||60)/(n*e)}(e,t,i);return s*o}function T$(n,e,t){return e.end?e.end:n.addMinutes(e.start,t)}function rd(n,e,t,r){let i=0,s=0;const o=t<0?n.subDays:n.addDays;let a=e;for(;s<=Math.abs(t);){a=o(e,i);const l=n.getDay(a);-1===r.indexOf(l)&&s++,i++}return a}function ak(n,e,t,r=[],i){let s=i?n.startOfDay(e):n.startOfWeek(e,{weekStartsOn:t});const o=n.endOfWeek(e,{weekStartsOn:t});for(;r.indexOf(n.getDay(s))>-1&&s<o;)s=n.addDays(s,1);if(i)return{viewStart:s,viewEnd:n.endOfDay(rd(n,s,i-1,r))};{let a=o;for(;r.indexOf(n.getDay(a))>-1&&a>s;)a=n.subDays(a,1);return{viewStart:s,viewEnd:a}}}function lk({x:n,y:e}){return Math.abs(n)>1||Math.abs(e)>1}class id{}let pde=(()=>{class n{constructor(t){this.dateAdapter=t}monthViewColumnHeader({date:t,locale:r}){return zr(t,"EEEE",r)}monthViewDayNumber({date:t,locale:r}){return zr(t,"d",r)}monthViewTitle({date:t,locale:r}){return zr(t,"LLLL y",r)}weekViewColumnHeader({date:t,locale:r}){return zr(t,"EEEE",r)}weekViewColumnSubHeader({date:t,locale:r}){return zr(t,"MMM d",r)}weekViewTitle({date:t,locale:r,weekStartsOn:i,excludeDays:s,daysInWeek:o}){const{viewStart:a,viewEnd:l}=ak(this.dateAdapter,t,i,s,o),c=(h,m)=>zr(h,"MMM d"+(m?", yyyy":""),r);return`${c(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${c(l,!0)}`}weekViewHour({date:t,locale:r}){return zr(t,"h a",r)}dayViewHour({date:t,locale:r}){return zr(t,"h a",r)}dayViewTitle({date:t,locale:r}){return zr(t,"EEEE, MMMM d, y",r)}}return n.\u0275fac=function(t){return new(t||n)(Q(id))},n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})(),P_=(()=>{class n extends pde{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ar(n)))(r||n)}}(),n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})(),bb=(()=>{class n{constructor(t,r){this.dateFormatter=t,this.locale=r}transform(t,r,i=this.locale,s=0,o=[],a){if(typeof this.dateFormatter[r]>"u"){const l=Object.getOwnPropertyNames(Object.getPrototypeOf(P_.prototype)).filter(c=>"constructor"!==c);throw new Error(`${r} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[r]({date:t,locale:i,weekStartsOn:s,excludeDays:o,daysInWeek:a})}}return n.\u0275fac=function(t){return new(t||n)(U(P_,16),U(hs,16))},n.\u0275pipe=_r({name:"calendarDate",type:n,pure:!0}),n})(),x_=(()=>{class n{constructor(t){this.dateAdapter=t}getMonthView(t){return function pce(n,e){var t=e.events,r=void 0===t?[]:t,i=e.viewDate,s=e.weekStartsOn,o=e.excluded,a=void 0===o?[]:o,l=e.viewStart,c=void 0===l?n.startOfMonth(i):l,h=e.viewEnd,m=void 0===h?n.endOfMonth(i):h,_=e.weekendDays;r||(r=[]);for(var N,C=n.endOfWeek,I=n.differenceInDays,S=n.startOfDay,j=n.addHours,O=n.endOfDay,q=n.isSameMonth,te=n.getDay,ye=(0,n.startOfWeek)(c,{weekStartsOn:s}),Pe=C(m,{weekStartsOn:s}),z=S_(n,{events:r,periodStart:ye,periodEnd:Pe}),R=[],W=function(tt){var st;if(N?(st=S(j(N,24)),N.getTime()===st.getTime()&&(st=S(j(N,25))),N=st):st=N=ye,!a.some(function(Nn){return te(st)===Nn})){var Dn=X4(n,{date:st,weekendDays:_}),Jn=S_(n,{events:z,periodStart:S(st),periodEnd:O(st)});Dn.inMonth=q(st,i),Dn.events=Jn,Dn.badgeTotal=Jn.length,R.push(Dn)}},F=0;F<I(Pe,ye)+1;F++)W();var $=[],L=zR-a.length;if(L<zR)for(F=0;F<R.length;F+=L){var Lt=R.slice(F,F+L);Lt.some(function(st){return c<=st.date&&st.date<m})&&($=HR(HR([],$,!0),Lt,!0))}else $=R;var Ze=Math.floor($.length/L),Xe=[];for(F=0;F<Ze;F++)Xe.push(F*L);return{rowOffsets:Xe,totalDaysVisibleInWeek:L,days:$,period:{start:$[0].date,end:O($[$.length-1].date),events:z}}}(this.dateAdapter,t)}getWeekViewHeader(t){return qR(this.dateAdapter,t)}getWeekView(t){return function fce(n,e){var t=e.events,r=void 0===t?[]:t,i=e.viewDate,s=e.weekStartsOn,o=e.excluded,a=void 0===o?[]:o,l=e.precision,c=void 0===l?"days":l,h=e.absolutePositionedEvents,m=void 0!==h&&h,_=e.hourSegments,v=e.hourDuration,C=e.dayStart,I=e.dayEnd,S=e.weekendDays,j=e.segmentHeight,O=e.minimumEventHeight,q=e.viewStart,te=void 0===q?n.startOfWeek(i,{weekStartsOn:s}):q,ye=e.viewEnd,Pe=void 0===ye?n.endOfWeek(i,{weekStartsOn:s}):ye;r||(r=[]);var R=n.endOfDay,N=S_(n,{events:r,periodStart:te=(0,n.startOfDay)(te),periodEnd:Pe=R(Pe)}),W=qR(n,{viewDate:i,weekStartsOn:s,excluded:a,weekendDays:S,viewStart:te,viewEnd:Pe});return{allDayEventRows:dce(n,{events:N,excluded:a,precision:c,absolutePositionedEvents:m,viewStart:te,viewEnd:Pe}),period:{events:N,start:W[0].date,end:R(W[W.length-1].date)},hourColumns:hce(n,{events:r,viewDate:i,hourSegments:_,hourDuration:v,dayStart:C,dayEnd:I,weekStartsOn:s,excluded:a,weekendDays:S,segmentHeight:j,viewStart:te,viewEnd:Pe,minimumEventHeight:O})}}(this.dateAdapter,t)}}return n.\u0275fac=function(t){return new(t||n)(Q(id))},n.\u0275prov=Me({token:n,factory:n.\u0275fac}),n})();new be("Moment");var yc=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(yc||{});let Wf=(()=>{class n{static forRoot(t,r={}){return{ngModule:n,providers:[t,r.eventTitleFormatter||Cb,r.dateFormatter||P_,r.utils||x_,r.a11y||k_]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=$t({type:n}),n.\u0275inj=qt({providers:[_I],imports:[Wr]}),n})(),gde=(()=>{class n{constructor(){this.highlightDay=new He,this.unhighlightDay=new He,this.eventClicked=new He,this.trackByEventId=D$,this.validateDrag=lk}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(t,r){2&t&&ni("cal-past",r.day.isPast)("cal-today",r.day.isToday)("cal-future",r.day.isFuture)("cal-weekend",r.day.isWeekend)("cal-in-month",r.day.inMonth)("cal-out-month",!r.day.inMonth)("cal-has-events",r.day.events.length>0)("cal-open",r.day===r.openDay)("cal-event-highlight",!!r.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:15,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"]],template:function(t,r){if(1&t&&(xe(0,tue,8,14,"ng-template",null,0,Qs),xe(2,nue,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",ST(2,rue,[r.day,r.openDay,r.locale,r.tooltipPlacement,r.highlightDay,r.unhighlightDay,r.eventClicked,r.tooltipTemplate,r.tooltipAppendToBody,r.tooltipDelay,r.trackByEventId,r.validateDrag]))}},dependencies:[ps,hi,Rs,eo,xa,tk,w$,td,bb,ik,nd],encapsulation:2}),n})();const mde=function ej(n,e){return{type:7,name:n,definitions:e,options:{}}}("collapse",[DC("void",lc({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),DC("*",lc({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),TC("* => void",bC("150ms ease-out")),TC("void => *",bC("150ms ease-in"))]);let _de=(()=>{class n{constructor(){this.isOpen=!1,this.eventClicked=new He,this.trackByEventId=D$,this.validateDrag=lk}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-open-day-events","role","application",4,"ngIf"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"event","customTemplate","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"]],template:function(t,r){if(1&t&&(xe(0,aue,1,1,"ng-template",null,0,Qs),xe(2,lue,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",IT(2,cue,r.events,r.eventClicked,r.isOpen,r.trackByEventId,r.validateDrag))}},dependencies:[ps,hi,Rs,eo,xa,tk,y$,v$,td,Eb,nd],encapsulation:2,data:{animation:[mde]}}),n})(),yde=(()=>{class n{constructor(){this.columnHeaderClicked=new He,this.trackByWeekDayHeaderDate=sk}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass","click"]],template:function(t,r){if(1&t&&(xe(0,due,2,2,"ng-template",null,0,Qs),xe(2,hue,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",Cw(2,fue,r.days,r.locale,r.trackByWeekDayHeaderDate))}},dependencies:[ps,hi,eo,bb],encapsulation:2}),n})(),vde=(()=>{class n{constructor(t,r,i,s){this.cdr=t,this.utils=r,this.dateAdapter=s,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new He,this.dayClicked=new He,this.eventClicked=new He,this.columnHeaderClicked=new He,this.eventTimesChanged=new He,this.trackByRowOffset=(o,a)=>this.view.days.slice(a,this.view.totalDaysVisibleInWeek).map(l=>l.date.toISOString()).join("-"),this.trackByDate=(o,a)=>a.date.toISOString(),this.locale=i}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(t){const r=t.viewDate||t.excludeDays||t.weekendDays,i=t.viewDate||t.events||t.excludeDays||t.weekendDays;r&&this.refreshHeader(),t.events&&E$(this.events),i&&this.refreshBody(),(r||i)&&this.emitBeforeViewRender(),(t.activeDayIsOpen||t.viewDate||t.events||t.excludeDays||t.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(t,r){this.view.days.forEach(i=>{r&&i.events.indexOf(t)>-1?i.backgroundColor=t.color&&t.color.secondary||"#D1E8FF":delete i.backgroundColor})}eventDropped(t,r,i){if(t!==i){const s=this.dateAdapter.getYear(t.date),o=this.dateAdapter.getMonth(t.date),a=this.dateAdapter.getDate(t.date),l=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(r.start,s),o),a);let c;if(r.end){const h=this.dateAdapter.differenceInSeconds(l,r.start);c=this.dateAdapter.addSeconds(r.end,h)}this.eventTimesChanged.emit({event:r,newStart:l,newEnd:c,day:t,type:yc.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(!0===this.activeDayIsOpen){const t=this.activeDay||this.viewDate;this.openDay=this.view.days.find(i=>this.dateAdapter.isSameDay(i.date,t));const r=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(r/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}}return n.\u0275fac=function(t){return new(t||n)(U(Ll),U(x_),U(hs),U(id))},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[Ir],decls:4,vars:5,consts:[["role","grid",1,"cal-month-view"],[3,"days","locale","customTemplate","columnHeaderClicked"],[1,"cal-days"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate","eventClicked","drop"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked"]],template:function(t,r){1&t&&(b(0,"div",0)(1,"mwl-calendar-month-view-header",1),ae("columnHeaderClicked",function(s){return r.columnHeaderClicked.emit(s)}),T(),b(2,"div",2),xe(3,gue,5,13,"div",3),T()()),2&t&&(H(1),Y("days",r.columnHeaders)("locale",r.locale)("customTemplate",r.headerTemplate),H(2),Y("ngForOf",r.view.rowOffsets)("ngForTrackBy",r.trackByRowOffset))},dependencies:[ps,hi,xa,nk,td,Eb,gde,_de,yde,rL,nd],encapsulation:2}),n})(),ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=$t({type:n}),n.\u0275inj=qt({imports:[Wr,yb,Wf,yb]}),n})();class wde{constructor(e,t){this.dragContainerElement=e,this.startPosition=t.getBoundingClientRect()}validateDrag({x:e,y:t,snapDraggedEvents:r,dragAlreadyMoved:i,transform:s}){const o=lk({x:e,y:t})||i;if(r){const a=Object.assign({},this.startPosition,{left:this.startPosition.left+s.x,right:this.startPosition.right+s.x,top:this.startPosition.top+s.y,bottom:this.startPosition.bottom+s.y});if(o){const l=this.dragContainerElement.getBoundingClientRect(),c=l.top<a.top&&a.top<l.bottom,h=l.top<a.bottom&&a.bottom<l.bottom;return C$(l,a)&&(c||h)}return!1}return o}}class Ede{constructor(e,t,r){this.resizeContainerElement=e,this.minWidth=t,this.rtl=r}validateResize({rectangle:e,edges:t}){return this.rtl&&(typeof t.left<"u"?(e.left-=t.left,e.right+=t.left):typeof t.right<"u"&&(e.left+=t.right,e.right-=t.right),e.width=e.right-e.left),!(this.minWidth&&Math.ceil(e.width)<Math.ceil(this.minWidth))&&function sde(n,e){return C$(n,e)&&function ide(n,e){return Math.floor(n.top)<=Math.ceil(e.top)&&Math.floor(e.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(e.bottom)&&Math.floor(e.bottom)<=Math.ceil(n.bottom)}(n,e)}(this.resizeContainerElement.getBoundingClientRect(),e)}}let Cde=(()=>{class n{constructor(){this.dayHeaderClicked=new He,this.eventDropped=new He,this.dragEnter=new He,this.trackByWeekDayHeaderDate=sk}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"ngClass","mwlClick","drop","dragEnter"]],template:function(t,r){if(1&t&&(xe(0,_ue,2,2,"ng-template",null,0,Qs),xe(2,yue,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",function mN(n,e,t,r,i,s,o,a,l){const c=Sr()+n,h=De(),m=Zs(h,c,t,r,i,s);return su(h,c+4,o,a)||m?Wo(h,c+6,l?e.call(l,t,r,i,s,o,a):e(t,r,i,s,o,a)):Ig(h,c+6)}(2,vue,r.days,r.locale,r.dayHeaderClicked,r.eventDropped,r.dragEnter,r.trackByWeekDayHeaderDate))}},dependencies:[ps,hi,eo,nk,td,bb],encapsulation:2}),n})(),bde=(()=>{class n{constructor(){this.eventClicked=new He}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(t,r){if(1&t&&(xe(0,Eue,6,27,"ng-template",null,0,Qs),xe(2,Cue,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",ST(2,bue,[r.weekEvent,r.tooltipPlacement,r.eventClicked,r.tooltipTemplate,r.tooltipAppendToBody,r.tooltipDisabled,r.tooltipDelay,r.column,r.daysInWeek]))}},dependencies:[eo,xa,y$,v$,w$,td,Eb,ik,nd],encapsulation:2}),n})(),Dde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(t,r){if(1&t&&(xe(0,Tue,3,13,"ng-template",null,0,Qs),xe(2,Iue,0,0,"ng-template",1)),2&t){const i=ti(1);H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",IT(2,Sue,r.segment,r.locale,r.segmentHeight,r.isTimeLabel,r.daysInWeek))}},dependencies:[ps,Rs,eo,bb,nd],encapsulation:2}),n})(),Tde=(()=>{class n{constructor(t,r){this.dateAdapter=t,this.zone=r,this.columnDate$=new ne(void 0),this.marker$=this.zone.onStable.pipe(ct(()=>K4(6e4)),to(0),rS(this.columnDate$),Ne(i=>{const s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(i,this.dayStartHour),this.dayStartMinute),o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(i,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(i,l)&&l>=s&&l<=o,top:this.dateAdapter.differenceInMinutes(l,s)*a}}))}ngOnChanges(t){t.columnDate&&this.columnDate$.next(t.columnDate.currentValue)}}return n.\u0275fac=function(t){return new(t||n)(U(id),U(it))},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[Ir],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(t,r){if(1&t&&(xe(0,Mue,1,1,"ng-template",null,0,Qs),xe(2,Rue,0,0,"ng-template",1),Xt(3,"async"),Xt(4,"async")),2&t){const i=ti(1);let s;H(2),Y("ngTemplateOutlet",r.customTemplate||i)("ngTemplateOutletContext",function _N(n,e,t,r,i,s,o,a,l,c){const h=Sr()+n,m=De();let _=Zs(m,h,t,r,i,s);return dw(m,h+4,o,a,l)||_?Wo(m,h+7,c?e.call(c,t,r,i,s,o,a,l):e(t,r,i,s,o,a,l)):Ig(m,h+7)}(6,kue,r.columnDate,r.dayStartHour,r.dayStartMinute,r.dayEndHour,r.dayEndMinute,null==(s=AT(3,2,r.marker$))?null:s.isVisible,null==(s=AT(4,4,r.marker$))?null:s.top))}},dependencies:[Rs,eo,tL],encapsulation:2}),n})(),I$=(()=>{class n{constructor(t,r,i,s,o){this.cdr=t,this.utils=r,this.dateAdapter=s,this.element=o,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new He,this.eventClicked=new He,this.eventTimesChanged=new He,this.beforeViewRender=new He,this.hourSegmentClicked=new He,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=sk,this.trackByHourSegment=ode,this.trackByHour=ade,this.trackByWeekAllDayEvent=lde,this.trackByWeekTimeEvent=cde,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=i}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(t){const r=t.viewDate||t.excludeDays||t.weekendDays||t.daysInWeek||t.weekStartsOn,i=t.viewDate||t.dayStartHour||t.dayStartMinute||t.dayEndHour||t.dayEndMinute||t.hourSegments||t.hourDuration||t.weekStartsOn||t.weekendDays||t.excludeDays||t.hourSegmentHeight||t.events||t.daysInWeek||t.minimumEventHeight;r&&this.refreshHeader(),t.events&&E$(this.events),i&&this.refreshBody(),(r||i)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&"rtl"===getComputedStyle(this.element.nativeElement).direction,this.cdr.detectChanges()}timeEventResizeStarted(t,r,i){this.timeEventResizes.set(r.event,i),this.resizeStarted(t,r)}timeEventResizing(t,r){this.timeEventResizes.set(t.event,r);const i=new Map,s=[...this.events];this.timeEventResizes.forEach((o,a)=>{const l=this.getTimeEventResizedDates(a,o),c={...a,...l};i.set(c,a);const h=s.indexOf(a);s[h]=c}),this.restoreOriginalEvents(s,i,!0)}timeEventResizeEnded(t){this.view=this.getWeekView(this.events);const r=this.timeEventResizes.get(t.event);if(r){this.timeEventResizes.delete(t.event);const i=this.getTimeEventResizedDates(t.event,r);this.eventTimesChanged.emit({newStart:i.start,newEnd:i.end,event:t.event,type:yc.Resize})}}allDayEventResizeStarted(t,r,i){this.allDayEventResizes.set(r,{originalOffset:r.offset,originalSpan:r.span,edge:typeof i.edges.left<"u"?"left":"right"}),this.resizeStarted(t,r,this.getDayColumnWidth(t))}allDayEventResizing(t,r,i){const s=this.allDayEventResizes.get(t),o=this.rtl?-1:1;if(typeof r.edges.left<"u"){const a=Math.round(+r.edges.left/i)*o;t.offset=s.originalOffset+a,t.span=s.originalSpan-a}else if(typeof r.edges.right<"u"){const a=Math.round(+r.edges.right/i)*o;t.span=s.originalSpan+a}}allDayEventResizeEnded(t){const r=this.allDayEventResizes.get(t);if(r){const i="left"===r.edge;let s;s=i?t.offset-r.originalOffset:t.span-r.originalSpan,t.offset=r.originalOffset,t.span=r.originalSpan;const o=this.getAllDayEventResizedDates(t.event,s,i);this.eventTimesChanged.emit({newStart:o.start,newEnd:o.end,event:t.event,type:yc.Resize}),this.allDayEventResizes.delete(t)}}getDayColumnWidth(t){return Math.floor(t.offsetWidth/this.days.length)}dateDragEnter(t){this.lastDragEnterDate=t}eventDropped(t,r,i){(function fde(n,e,t,r){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==r||n.dropData.event.allDay&&!t||!n.dropData.event.allDay&&t)})(t,0,i,this.calendarId)&&this.lastDragEnterDate.getTime()===r.getTime()&&(!this.snapDraggedEvents||t.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:yc.Drop,event:t.dropData.event,newStart:r,allDay:i}),this.lastDraggedEvent=null}dragEnter(t){this.eventDragEnterByType[t]++}dragLeave(t){this.eventDragEnterByType[t]--}dragStarted(t,r,i,s){this.dayColumnWidth=this.getDayColumnWidth(t);const o=new wde(t,r);this.validateDrag=({x:a,y:l,transform:c})=>{const h=0===this.allDayEventResizes.size&&0===this.timeEventResizes.size&&o.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:c});if(h&&this.validateEventTimesChanged){const m=this.getDragMovedEventTimes(i,{x:a,y:l},this.dayColumnWidth,s);return this.validateEventTimesChanged({type:yc.Drag,event:i.event,newStart:m.start,newEnd:m.end})}return h},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&s&&this.view.hourColumns.forEach(a=>{const l=a.events.find(c=>c.event===i.event&&c!==i);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(t,r){const i=this.getDragMovedEventTimes(t,r,this.dayColumnWidth,!0),s=t.event,o={...s,...i},a=this.events.map(l=>l===s?o:l);this.restoreOriginalEvents(a,new Map([[o,s]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(t,r,i,s=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;const{start:o,end:a}=this.getDragMovedEventTimes(t,r,i,s);(this.snapDraggedEvents||this.eventDragEnterByType[s?"time":"allDay"]>0)&&function hde(n,e,t){const r=e||n;return t.start<=n&&n<=t.end||t.start<=r&&r<=t.end}(o,a,this.view.period)&&(this.lastDraggedEvent=t.event,this.eventTimesChanged.emit({newStart:o,newEnd:a,event:t.event,type:yc.Drag,allDay:!s}))}refreshHeader(){this.days=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays,...ak(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit({header:this.days,...this.view})}getWeekView(t){return this.utils.getWeekView({events:t,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight,...ak(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}getDragMovedEventTimes(t,r,i,s){const o=b$(r.x,i)/i*(this.rtl?-1:1),a=s?ok(r.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(rd(this.dateAdapter,t.event.start,o,this.excludeDays),a);let c;return t.event.end&&(c=this.dateAdapter.addMinutes(rd(this.dateAdapter,t.event.end,o,this.excludeDays),a)),{start:l,end:c}}restoreOriginalEvents(t,r,i=!0){const s=this.view;i&&(this.view=this.getWeekView(t));const o=t.filter(a=>r.has(a));this.view.hourColumns.forEach((a,l)=>{s.hourColumns[l].hours.forEach((c,h)=>{c.segments.forEach((m,_)=>{a.hours[h].segments[_].cssClass=m.cssClass})}),o.forEach(c=>{const h=r.get(c),m=a.events.find(_=>_.event===(i?c:h));m?(m.event=h,m.tempEvent=c,i||(m.height=0,m.width=0)):a.events.push({event:h,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:c})})}),r.clear()}getTimeEventResizedDates(t,r){const i={start:t.start,end:T$(this.dateAdapter,t,this.minimumEventHeight)},{end:s,...o}=t,a={start:this.dateAdapter.addMinutes(i.end,-1*this.minimumEventHeight),end:T$(this.dateAdapter,o,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof r.edges.left<"u"){const c=Math.round(+r.edges.left/this.dayColumnWidth)*l,h=rd(this.dateAdapter,i.start,c,this.excludeDays);i.start=h<a.start?h:a.start}else if(typeof r.edges.right<"u"){const c=Math.round(+r.edges.right/this.dayColumnWidth)*l,h=rd(this.dateAdapter,i.end,c,this.excludeDays);i.end=h>a.end?h:a.end}if(typeof r.edges.top<"u"){const c=ok(r.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(i.start,c);i.start=h<a.start?h:a.start}else if(typeof r.edges.bottom<"u"){const c=ok(r.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(i.end,c);i.end=h>a.end?h:a.end}return i}resizeStarted(t,r,i){this.dayColumnWidth=this.getDayColumnWidth(t);const s=new Ede(t,i,this.rtl);this.validateResize=({rectangle:o,edges:a})=>{const l=s.validateResize({rectangle:{...o},edges:a});if(l&&this.validateEventTimesChanged){let c;if(i){const h=this.rtl?-1:1;if(typeof a.left<"u"){const m=Math.round(+a.left/i)*h;c=this.getAllDayEventResizedDates(r.event,m,!this.rtl)}else{const m=Math.round(+a.right/i)*h;c=this.getAllDayEventResizedDates(r.event,m,this.rtl)}}else c=this.getTimeEventResizedDates(r.event,{rectangle:o,edges:a});return this.validateEventTimesChanged({type:yc.Resize,event:r.event,newStart:c.start,newEnd:c.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(t,r,i){let s=t.start,o=t.end||t.start;return i?s=rd(this.dateAdapter,s,r,this.excludeDays):o=rd(this.dateAdapter,o,r,this.excludeDays),{start:s,end:o}}}return n.\u0275fac=function(t){return new(t||n)(U(Ll),U(x_),U(hs),U(id),U(rn))},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[Ir],decls:8,vars:9,consts:[["role","grid",1,"cal-week-view"],[3,"days","locale","customTemplate","dayHeaderClicked","eventDropped","dragEnter"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["dayColumns",""],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],["allDayEventsContainer",""],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["eventRowContainer",""],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],["event",""],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek","eventClicked"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],[3,"ngTemplateOutlet"],["weekEventTemplate",""],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek","eventClicked"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter"]],template:function(t,r){1&t&&(b(0,"div",0)(1,"mwl-calendar-week-view-header",1),ae("dayHeaderClicked",function(s){return r.dayHeaderClicked.emit(s)})("eventDropped",function(s){return r.eventDropped({dropData:s},s.newStart,!0)})("dragEnter",function(s){return r.dateDragEnter(s.date)}),T(),xe(2,Hue,7,5,"div",2),b(3,"div",3),ae("dragEnter",function(){return r.dragEnter("time")})("dragLeave",function(){return r.dragLeave("time")}),xe(4,Wue,2,2,"div",4),b(5,"div",5,6),xe(7,nde,5,13,"div",7),T()()()),2&t&&(H(1),Y("days",r.days)("locale",r.locale)("customTemplate",r.headerTemplate),H(1),Y("ngIf",r.view.allDayEventRows.length>0),H(2),Y("ngIf",r.view.hourColumns.length>0&&1!==r.daysInWeek),H(1),ni("cal-resize-active",r.timeEventResizes.size>0),H(2),Y("ngForOf",r.view.hourColumns)("ngForTrackBy",r.trackByHourColumn))},dependencies:[ps,hi,Rs,eo,f$,Lce,tk,nk,td,Cde,bde,Dde,Tde],encapsulation:2}),n})(),Db=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=$t({type:n}),n.\u0275inj=qt({imports:[Wr,p$,yb,Wf,p$,yb]}),n})(),Ide=(()=>{class n{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new He,this.hourSegmentClicked=new He,this.eventTimesChanged=new He,this.beforeViewRender=new He}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ut({type:n,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender"]],template:function(t,r){1&t&&(b(0,"mwl-calendar-week-view",0),ae("eventClicked",function(s){return r.eventClicked.emit(s)})("hourSegmentClicked",function(s){return r.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return r.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return r.beforeViewRender.emit(s)}),T()),2&t&&Y("daysInWeek",1)("viewDate",r.viewDate)("events",r.events)("hourSegments",r.hourSegments)("hourDuration",r.hourDuration)("hourSegmentHeight",r.hourSegmentHeight)("minimumEventHeight",r.minimumEventHeight)("dayStartHour",r.dayStartHour)("dayStartMinute",r.dayStartMinute)("dayEndHour",r.dayEndHour)("dayEndMinute",r.dayEndMinute)("refresh",r.refresh)("locale",r.locale)("eventSnapSize",r.eventSnapSize)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDelay",r.tooltipDelay)("resizeCursors",r.resizeCursors)("hourSegmentTemplate",r.hourSegmentTemplate)("eventTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("snapDraggedEvents",r.snapDraggedEvents)("allDayEventsLabelTemplate",r.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",r.currentTimeMarkerTemplate)("validateEventTimesChanged",r.validateEventTimesChanged)},dependencies:[I$],encapsulation:2}),n})(),uk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=$t({type:n}),n.\u0275inj=qt({imports:[Wr,Wf,Db]}),n})(),S$=(()=>{class n{static forRoot(t,r={}){return{ngModule:n,providers:[t,r.eventTitleFormatter||Cb,r.dateFormatter||P_,r.utils||x_,r.a11y||k_]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=$t({type:n}),n.\u0275inj=qt({imports:[Wf,ck,Db,uk,Wf,ck,Db,uk]}),n})(),A$=(()=>{class n{constructor(){this.apiUrl="https://holidays-jp.github.io/api/v1/date.json"}getHolidays(){var t=this;return(0,pe.Z)(function*(){try{const r=yield fetch(t.apiUrl);if(!r.ok)throw new Error("Network response was not ok");return yield r.json()}catch(r){throw console.error("There was an error fetching the holidays:",r),r}})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zt(n){const e=Object.prototype.toString.call(n);return n instanceof Date||"object"==typeof n&&"[object Date]"===e?new n.constructor(+n):"number"==typeof n||"[object Number]"===e||"string"==typeof n||"[object String]"===e?new Date(n):new Date(NaN)}function Ao(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function qf(n,e){const t=zt(n);return isNaN(e)?Ao(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function dk(n,e){return Ao(n,+zt(n)+e)}Math.pow(10,8);const Ade=6048e5,Mde=864e5,M$=6e4,Rde=36e5;function Pde(n,e){return dk(n,e*Rde)}function xde(n,e){return dk(n,e*M$)}function Ode(n,e){return dk(n,1e3*e)}function O_(n){const e=zt(n);return e.setHours(0,0,0,0),e}function k$(n){const e=zt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Fde(n,e){const t=zt(n),r=zt(e),i=P$(t,r),s=Math.abs(function Nde(n,e){const t=O_(n),r=O_(e),i=+t-k$(t),s=+r-k$(r);return Math.round((i-s)/Mde)}(t,r));t.setDate(t.getDate()-i*s);const a=i*(s-+(P$(t,r)===-i));return 0===a?0:a}function P$(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function x$(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return 0===r?0:r}}function O$(n,e){return+zt(n)-+zt(e)}function Lde(n,e,t){const r=O$(n,e)/M$;return x$(t?.roundingMethod)(r)}function Vde(n,e,t){const r=O$(n,e)/1e3;return x$(t?.roundingMethod)(r)}function Bde(n){const e=zt(n);return e.setHours(23,59,59,999),e}function N$(n){const e=zt(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}let F$={};function L$(){return F$}function V$(n,e){const t=L$(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=zt(n),s=i.getDay(),o=6+(s<r?-7:0)-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Ude(n){return zt(n).getDay()}function jde(n){return zt(n).getMonth()}function B$(n,e){return+O_(n)==+O_(e)}function Hde(n,e){const t=zt(n),r=zt(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function U$(n){const e=zt(n);return e.setMilliseconds(0),e}function $de(n,e){return+U$(n)==+U$(e)}function zde(n){let e;return n.forEach(function(t){const r=zt(t);(void 0===e||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Wde(n,e){const t=zt(n);return t.setHours(e),t}function qde(n,e){const t=zt(n);return t.setMinutes(e),t}function Gde(n){const e=zt(n);return e.setSeconds(0,0),e}function Zde(n){const e=zt(n);return e.setDate(1),e.setHours(0,0,0,0),e}function N_(n,e){const t=L$(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=zt(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Kde(n){return zt(n).getHours()}function Yde(n){return zt(n).getMinutes()}function Qde(n){return new Date(n).getTimezoneOffset()}function Tb(n,e){return qf(n,7*e)}function sd(n,e){const t=zt(n);if(isNaN(e))return Ao(n,NaN);if(!e)return t;const r=t.getDate(),i=Ao(n,t.getTime());return i.setMonth(t.getMonth()+e+1,0),r>=i.getDate()?i:(t.setFullYear(i.getFullYear(),i.getMonth(),r),t)}function Gf(n,e){return qf(n,-e)}function Jde(n,e){return Tb(n,-e)}function ehe(n,e){return sd(n,-e)}function Ib(n){return N_(n,{weekStartsOn:1})}function rhe(n){const e=zt(n),t=+Ib(e)-+function nhe(n){const e=function the(n){const e=zt(n),t=e.getFullYear(),r=Ao(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=Ib(r),s=Ao(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=Ib(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}(n),t=Ao(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Ib(t)}(e);return Math.round(t/Ade)+1}function ihe(n,e){const t=zt(n);return t.setDate(e),t}function j$(n,e){const t=zt(n),r=t.getFullYear(),i=t.getDate(),s=Ao(n,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const o=function she(n){const e=zt(n),t=e.getFullYear(),r=e.getMonth(),i=Ao(n,0);return i.setFullYear(t,r+1,0),i.setHours(0,0,0,0),i.getDate()}(s);return t.setMonth(e,Math.min(i,o)),t}function ohe(n,e){const t=zt(n);return isNaN(+t)?Ao(n,NaN):(t.setFullYear(e),t)}function ahe(n){return zt(n).getDate()}function lhe(n){return zt(n).getFullYear()}function H$(){return(0,nt.pi)((0,nt.pi)({},function Xde(){return{addDays:qf,addHours:Pde,addMinutes:xde,addSeconds:Ode,differenceInDays:Fde,differenceInMinutes:Lde,differenceInSeconds:Vde,endOfDay:Bde,endOfMonth:N$,endOfWeek:V$,getDay:Ude,getMonth:jde,isSameDay:B$,isSameMonth:Hde,isSameSecond:$de,max:zde,setHours:Wde,setMinutes:qde,startOfDay:O_,startOfMinute:Gde,startOfMonth:Zde,startOfWeek:N_,getHours:Kde,getMinutes:Yde,getTimezoneOffset:Qde}}()),{addWeeks:Tb,addMonths:sd,subDays:Gf,subWeeks:Jde,subMonths:ehe,getISOWeek:rhe,setDate:ihe,setMonth:j$,setYear:ohe,getDate:ahe,getYear:lhe})}let $$=(()=>{class n{constructor(){this.reminders={},this.subtaskReminders={}}setReminder(t,r){const i=new Date(t.startDateTime).getTime(),s=i-r,o=Date.now();if(s>o){const a=window.setTimeout(()=>{const l=this.calculateTimeRemaining(i-Date.now());alert(`\u30bf\u30b9\u30af "${t.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${l}`),delete this.reminders[t.id]},s-o);this.reminders[t.id]=a}}clearReminder(t){this.reminders[t.id]&&(clearTimeout(this.reminders[t.id]),delete this.reminders[t.id])}setSubtaskReminder(t,r,i){const s=new Date(i).getTime(),o=s-r,a=Date.now();if(o>a){const l=window.setTimeout(()=>{const c=this.calculateTimeRemaining(s-Date.now());alert(`\u30b5\u30d6\u30bf\u30b9\u30af "${t.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${c}`),delete this.subtaskReminders[t.id]},o-a);this.subtaskReminders[t.id]=l}}clearSubtaskReminder(t){this.subtaskReminders[t.id]&&(clearTimeout(this.subtaskReminders[t.id]),delete this.subtaskReminders[t.id])}calculateTimeRemaining(t){const r=Math.floor(t/1e3),i=Math.floor(r/60),s=Math.floor(i/60),o=Math.floor(s/24);return o>0?`${o}\u65e5`:s>0?`${s}\u6642\u9593`:i>0?`${i}\u5206`:`${r}\u79d2`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zf=(()=>{class n{constructor(t){this.firestore=t}getProjects(){return console.log("Fetching all projects from Firestore..."),this.firestore.collection("projects").valueChanges({idField:"id"})}getProjectById(t){return console.log(`Fetching project by ID: ${t}`),this.firestore.collection("projects").doc(t).valueChanges()}addProject(t){const r=this.firestore.createId();return console.log(`Adding new project with ID: ${r}`,t),this.firestore.collection("projects").doc(r).set({...t,id:r}).then(()=>console.log(`Project added successfully with ID: ${r}`)).catch(i=>{throw console.error(`Error adding project with ID: ${r}`,i),i})}updateProject(t){return t.id?(console.log(`Updating project with ID: ${t.id}`,t),this.firestore.collection("projects").doc(t.id).set(t).then(()=>console.log(`Project updated successfully with ID: ${t.id}`)).catch(r=>{throw console.error(`Error updating project with ID: ${t.id}`,r),r})):(console.error("Project ID is missing, cannot update project",t),Promise.reject("Project ID is missing"))}deleteProject(t){return t.id?(console.log(`Deleting project with ID: ${t.id}`),this.firestore.collection("projects").doc(t.id).delete().then(()=>console.log(`Project deleted successfully with ID: ${t.id}`)).catch(r=>{throw console.error(`Error deleting project with ID: ${t.id}`,r),r})):(console.error("Project ID is missing, cannot delete project",t),Promise.reject("Project ID is missing"))}addMemberToProject(t,r){return r?(console.log(`Adding member with ID: ${r} to project with ID: ${t}`),this.firestore.collection("projects").doc(t).update({members:gs.Z.firestore.FieldValue.arrayUnion(r)}).then(()=>console.log(`Member with ID: ${r} added to project with ID: ${t} successfully`)).catch(i=>{throw console.error(`Error adding member with ID: ${r} to project with ID: ${t}`,i),i})):(console.error("User ID is undefined, cannot add member to project",t),Promise.reject("User ID is undefined"))}removeMemberFromProject(t,r){return r?(console.log(`Removing member with ID: ${r} from project with ID: ${t}`),this.firestore.collection("projects").doc(t).update({members:gs.Z.firestore.FieldValue.arrayRemove(r)}).then(()=>console.log(`Member with ID: ${r} removed from project with ID: ${t} successfully`)).catch(i=>{throw console.error(`Error removing member with ID: ${r} from project with ID: ${t}`,i),i})):(console.error("User ID is undefined, cannot remove member from project",t),Promise.reject("User ID is undefined"))}addOwnerToProject(t,r){return r?(console.log(`Adding owner with ID: ${r} to project with ID: ${t}`),this.firestore.collection("projects").doc(t).update({owners:gs.Z.firestore.FieldValue.arrayUnion(r)}).then(()=>console.log(`Owner with ID: ${r} added to project with ID: ${t} successfully`)).catch(i=>{throw console.error(`Error adding owner with ID: ${r} to project with ID: ${t}`,i),i})):(console.error("User ID is undefined, cannot add owner to project",t),Promise.reject("User ID is undefined"))}removeOwnerFromProject(t,r){return r?(console.log(`Removing owner with ID: ${r} from project with ID: ${t}`),this.firestore.collection("projects").doc(t).update({owners:gs.Z.firestore.FieldValue.arrayRemove(r)}).then(()=>console.log(`Owner with ID: ${r} removed from project with ID: ${t} successfully`)).catch(i=>{throw console.error(`Error removing owner with ID: ${r} from project with ID: ${t}`,i),i})):(console.error("User ID is undefined, cannot remove owner from project",t),Promise.reject("User ID is undefined"))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Vu))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function che(n,e){if(1&n&&(b(0,"option",29),x(1),T()),2&n){const t=e.$implicit;Y("value",t.id),H(1),gt(t.name)}}function uhe(n,e){if(1&n&&(b(0,"option",29),x(1),T()),2&n){const t=e.$implicit;Y("value",t),H(1),gt(t)}}function dhe(n,e){if(1&n){const t=Et();b(0,"div")(1,"label"),x(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),T(),b(3,"input",41),ae("ngModelChange",function(i){return we(t),Ee(re(3).task.repeatSettings.daysOffsetFromEnd=i)}),T()()}if(2&n){const t=re(3);H(3),Y("ngModel",t.task.repeatSettings.daysOffsetFromEnd)}}function hhe(n,e){if(1&n){const t=Et();b(0,"div"),x(1),b(2,"button",5),ae("click",function(){const s=we(t).$implicit;return Ee(re(3).removeExcludeDate(s))}),x(3,"\u524a\u9664"),T()()}if(2&n){const t=e.$implicit;H(1),Mi(" ",t," ")}}function fhe(n,e){if(1&n){const t=Et();b(0,"div",6)(1,"span",7),x(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),T(),b(3,"span",8)(4,"div",30)(5,"div")(6,"label"),x(7,"\u983b\u5ea6:"),T(),b(8,"select",10),ae("ngModelChange",function(i){return we(t),Ee(re(2).task.repeatSettings.frequency=i)}),b(9,"option",31),x(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),T(),b(11,"option",32),x(12,"\u6bce\u65e5"),T(),b(13,"option",33),x(14,"\u6bce\u9031"),T(),b(15,"option",34),x(16,"\u6bce\u6708"),T(),b(17,"option",35),x(18,"\u6bce\u5e74"),T(),b(19,"option",36),x(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),T()()(),xe(21,dhe,4,1,"div",37),b(22,"div")(23,"label"),x(24,"\u7d42\u4e86\u65e5:"),T(),b(25,"input",38),ae("ngModelChange",function(i){return we(t),Ee(re(2).task.repeatSettings.endDate=i)}),T()(),b(26,"div")(27,"label"),x(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),T(),b(29,"input",39),ae("ngModelChange",function(i){return we(t),Ee(re(2).task.repeatSettings.businessDaysOnly=i)}),T()(),b(30,"div")(31,"label"),x(32,"\u9664\u5916\u65e5:"),T(),b(33,"input",38),ae("ngModelChange",function(i){return we(t),Ee(re(2).excludeDate=i)}),T(),b(34,"button",5),ae("click",function(){return we(t),Ee(re(2).addExcludeDate())}),x(35,"\u8ffd\u52a0"),T(),xe(36,hhe,4,1,"div",40),T()()()()}if(2&n){const t=re(2);H(8),Y("ngModel",t.task.repeatSettings.frequency),H(13),Y("ngIf","monthlyFromEnd"===t.task.repeatSettings.frequency),H(4),Y("ngModel",t.task.repeatSettings.endDate),H(4),Y("ngModel",t.task.repeatSettings.businessDaysOnly),H(4),Y("ngModel",t.excludeDate),H(3),Y("ngForOf",t.task.repeatSettings.excludeDates)}}const phe=function(n){return{selected:n}},ghe=function(n){return{"background-color":n}};function mhe(n,e){if(1&n){const t=Et();b(0,"div",42),ae("click",function(){const s=we(t).$implicit;return Ee(re(2).selectColor(s))}),T()}if(2&n){const t=e.$implicit,r=re(2);Y("ngClass",Co(2,phe,r.task.tagColor===t))("ngStyle",Co(4,ghe,t))}}function _he(n,e){if(1&n){const t=Et();b(0,"li",43)(1,"span",44),x(2),T(),b(3,"button",5),ae("click",function(){const s=we(t).index;return Ee(re(2).deleteSubtask(s))}),x(4,"\u524a\u9664"),T()()}if(2&n){const t=e.$implicit;H(2),gt(t.title)}}function yhe(n,e){if(1&n){const t=Et();b(0,"div",1)(1,"div",2)(2,"h2",3),x(3),T(),b(4,"div",4)(5,"button",5),ae("click",function(){return we(t),Ee(re().saveTask())}),x(6,"\u4fdd\u5b58"),T(),b(7,"button",5),ae("click",function(){return we(t),Ee(re().duplicateTask())}),x(8,"\u8907\u88fd"),T(),b(9,"button",5),ae("click",function(){return we(t),Ee(re().cancel())}),x(10,"\u30ad\u30e3\u30f3\u30bb\u30eb"),T()()(),b(11,"div",6)(12,"span",7),x(13,"\u30bf\u30a4\u30c8\u30eb:"),T(),b(14,"span",8)(15,"input",9),ae("ngModelChange",function(i){return we(t),Ee(re().task.title=i)}),T()()(),b(16,"div",6)(17,"span",7),x(18,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),T(),b(19,"span",8)(20,"select",10),ae("ngModelChange",function(i){return we(t),Ee(re().task.projectId=i)}),b(21,"option",11),x(22,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),T(),xe(23,che,2,2,"option",12),T()()(),b(24,"div",6)(25,"span",7),x(26,"\u8aac\u660e:"),T(),b(27,"span",8)(28,"textarea",13),ae("ngModelChange",function(i){return we(t),Ee(re().task.description=i)}),T()()(),b(29,"div",6)(30,"span",7),x(31,"\u958b\u59cb\u65e5\u6642:"),T(),b(32,"span",8)(33,"input",14),ae("ngModelChange",function(i){return we(t),Ee(re().task.startDateTime=i)}),T()()(),b(34,"div",6)(35,"span",7),x(36,"\u7d42\u4e86\u65e5\u6642:"),T(),b(37,"span",8)(38,"input",14),ae("ngModelChange",function(i){return we(t),Ee(re().task.endDateTime=i)}),T()()(),b(39,"div",6)(40,"span",7),x(41,"\u901a\u77e5:"),T(),b(42,"span",8)(43,"input",15),ae("ngModelChange",function(i){return we(t),Ee(re().task.reminderTime.value=i)}),T(),b(44,"select",16),ae("ngModelChange",function(i){return we(t),Ee(re().task.reminderTime.unit=i)}),xe(45,uhe,2,2,"option",12),T()()(),xe(46,fhe,37,6,"div",17),b(47,"div",6)(48,"span",7),x(49,"\u512a\u5148\u5ea6:"),T(),b(50,"span",8)(51,"select",10),ae("ngModelChange",function(i){return we(t),Ee(re().task.priority=i)}),b(52,"option",18),x(53,"\u4f4e"),T(),b(54,"option",19),x(55,"\u4e2d"),T(),b(56,"option",20),x(57,"\u9ad8"),T()()()(),b(58,"div",6)(59,"span",7),x(60,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),T(),b(61,"span",8)(62,"select",10),ae("ngModelChange",function(i){return we(t),Ee(re().task.status=i)}),b(63,"option",21),x(64,"\u672a\u7740\u624b"),T(),b(65,"option",22),x(66,"\u9032\u884c\u4e2d"),T(),b(67,"option",23),x(68,"\u5b8c\u4e86"),T()()()(),b(69,"div",6)(70,"span",7),x(71,"\u30bf\u30b0:"),T(),b(72,"span",8)(73,"input",24),ae("ngModelChange",function(i){return we(t),Ee(re().task.tag=i)}),T()()(),b(74,"div",6)(75,"span",7),x(76,"\u30bf\u30b0\u306e\u8272:"),T(),b(77,"span",8)(78,"div",25),xe(79,mhe,1,6,"div",26),T()()(),b(80,"div",27)(81,"h6"),x(82,"\u30b5\u30d6\u30bf\u30b9\u30af"),T(),b(83,"button",5),ae("click",function(){return we(t),Ee(re().addSubtask())}),x(84,"\u30b5\u30d6\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),T(),b(85,"ul"),xe(86,_he,5,1,"li",28),T()()()}if(2&n){const t=re();H(3),Mi("",t.task.title," \u306e\u8a73\u7d30"),H(12),Y("ngModel",t.task.title),H(5),Y("ngModel",t.task.projectId),H(3),Y("ngForOf",t.projects),H(5),Y("ngModel",t.task.description),H(5),Y("ngModel",t.task.startDateTime),H(5),Y("ngModel",t.task.endDateTime),H(5),Y("ngModel",t.task.reminderTime.value),H(1),Y("ngModel",t.task.reminderTime.unit),H(1),Y("ngForOf",t.reminderUnits),H(1),Y("ngIf",t.task.repeatSettings),H(5),Y("ngModel",t.task.priority),H(11),Y("ngModel",t.task.status),H(11),Y("ngModel",t.task.tag),H(6),Y("ngForOf",t.colors),H(7),Y("ngForOf",t.task.subtasks)}}let F_=(()=>{class n{constructor(t,r,i,s,o){this.taskService=t,this.reminderService=r,this.projectService=i,this.dialogRef=s,this.data=o,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",console.log("TaskDetailComponent constructor called"),o&&o.task&&(this.task={...o.task},this.originalTask={...o.task},console.log("TaskDetailComponent received task data:",this.task))}ngOnInit(){if(console.log("TaskDetailComponent ngOnInit called"),this.projects$=this.projectService.getProjects(),this.projects$.subscribe(t=>{this.projects=t,console.log("Projects loaded:",this.projects)}),this.task)this.task.reminderTime||(this.task.reminderTime={value:null,unit:"\u5206"}),console.log("Loaded existing task:",this.task);else{this.task={id:"",title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:""};const t=this.taskService.getCurrentUserId();t&&(this.task.userId=t),console.log("Initialized empty task")}}saveTask(){var t=this;return(0,pe.Z)(function*(){if(console.log("saveTask called"),t.task.reminderTime&&null!==t.task.reminderTime.value){const r=t.calculateReminderTime({value:t.task.reminderTime.value,unit:t.task.reminderTime.unit});t.reminderService.setReminder(t.task,r)}t.task.id?(yield t.taskService.updateTask(t.task),console.log("Task updated:",t.task)):(yield t.taskService.addTask(t.task),console.log("New task added:",t.task)),t.dialogRef.close(t.task),console.log("Dialog closed with task:",t.task)})()}duplicateTask(){var t=this;return(0,pe.Z)(function*(){console.log("duplicateTask called"),yield t.taskService.duplicateTask(t.task),t.dialogRef.close(),console.log("Dialog closed after duplicating task")})()}addSubtask(){console.log("addSubtask called"),this.task.subtasks||(this.task.subtasks=[]);const t={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"};this.task.subtasks.push(t),this.saveTask(),console.log("New subtask added:",t)}deleteSubtask(t){console.log("deleteSubtask called"),this.task.subtasks&&(this.task.subtasks.splice(t,1),this.saveTask(),console.log("Subtask deleted at index:",t))}cancel(){console.log("cancel called"),this.dialogRef.close(this.originalTask),console.log("Dialog closed with original task:",this.originalTask)}selectColor(t){this.task.tagColor=t,console.log("Color selected:",t)}addExcludeDate(){console.log("addExcludeDate called"),this.excludeDate&&(this.task.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="",console.log("Exclude date added:",this.excludeDate))}removeExcludeDate(t){console.log("removeExcludeDate called"),this.task.repeatSettings?.excludeDates&&(this.task.repeatSettings.excludeDates=this.task.repeatSettings.excludeDates.filter(r=>r!==t),console.log("Exclude date removed:",t))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(t){const{value:r,unit:i}=t;switch(i){case"\u5206":return 60*r*1e3;case"\u6642\u9593":return 60*r*60*1e3;case"\u65e5":return 24*r*60*60*1e3;case"\u9031":return 7*r*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(r){return new(r||n)(U(Kf),U($$),U(Zf),U(Vf),U(lb))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-task-detail"]],inputs:{task:"task"},standalone:!0,features:[Ri],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"subtask-container"],["class","subtask-item",4,"ngFor","ngForOf"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"],[1,"subtask-item"],[1,"subtask-title"]],template:function(r,i){1&r&&xe(0,yhe,87,16,"div",0),2&r&&Y("ngIf",i.task)},dependencies:[Wr,ps,hi,Rs,xa,Vs,g_,m_,Fs,YC,$u,Wu,io,QC,Ls],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})(),Kf=(()=>{class n{constructor(t,r,i,s){this.firestore=t,this.holidayService=r,this.dialog=i,this.authService=s,this.currentDialogRefs={}}getCurrentUserId(){return this.authService.getCurrentUserId()}getUserTasks(){return this.authService.user$.pipe(ct(t=>t?this.firestore.collection(`users/${t.uid}/tasks`).snapshotChanges().pipe(Ne(r=>r.map(i=>{const s=i.payload.doc.data();return{id:i.payload.doc.id,title:s.title,completed:s.completed,description:s.description,priority:s.priority,startDateTime:s.startDateTime,endDateTime:s.endDateTime,tag:s.tag,selected:s.selected,tagColor:s.tagColor,status:s.status,subtasks:s.subtasks,reminderTime:s.reminderTime,projectId:s.projectId,repeatSettings:s.repeatSettings,userId:s.userId}}))):me([])))}getTasksByUserId(t){return this.firestore.collection(`users/${t}/tasks`).valueChanges()}getTasks(){const t=this.getCurrentUserId();return t?this.firestore.collection(`users/${t}/tasks`).valueChanges():me([])}addTask(t){const r=this.getCurrentUserId();if(r){const i=this.firestore.createId(),s={...t,id:i,userId:r};return this.firestore.collection(`users/${r}/tasks`).doc(i).set(s)}return Promise.reject("User not authenticated")}updateTask(t){const r=this.getCurrentUserId();if(r){const i={...t,userId:r};return this.firestore.collection(`users/${r}/tasks`).doc(t.id).set(i)}return Promise.reject("User not authenticated")}duplicateTask(t){const r=this.getCurrentUserId();if(r){const i=this.generateId(),s={...t,id:i,userId:r};return this.firestore.collection(`users/${r}/tasks`).doc(i).set(s)}return Promise.reject("User not authenticated")}deleteTask(t){const r=this.getCurrentUserId();return r?this.firestore.collection(`users/${r}/tasks`).doc(t.id).delete():Promise.reject("User not authenticated")}openTaskDetail(t){if(console.log("openTaskDetail called"),this.currentDialogRefs[t.id])return void console.log("Task detail is already open for this task:",t.id);const r=this.dialog.open(F_,{data:{task:t}});this.currentDialogRefs[t.id]=r,r.afterClosed().subscribe(()=>{console.log("Dialog closed for task:",t.id),delete this.currentDialogRefs[t.id]})}generateRecurringTasks(){var t=this;return(0,pe.Z)(function*(){const r=(new Date).toISOString().split("T")[0];try{const i=yield t.holidayService.getHolidays(),s=yield t.firestore.collection("tasks").get().toPromise();s&&s.forEach(o=>{const a=o.data();a.repeatSettings&&"monthlyFromEnd"===a.repeatSettings.frequency&&t.generateMonthlyFromEndTasks(a,r,i)})}catch(i){console.error("Failed to generate recurring tasks:",i)}})()}generateMonthlyFromEndTasks(t,r,i){let s=new Date(t.startDateTime);const o=t.repeatSettings.endDate?new Date(t.repeatSettings.endDate):null;for(;s.toISOString().split("T")[0]<=r&&(!o||s<=o);){let l=Gf(N$(s),t.repeatSettings.daysOffsetFromEnd);t.repeatSettings.businessDaysOnly&&(l=this.adjustForHolidaysAndWeekends(l,i)),l.toISOString().split("T")[0]<=r&&this.createTaskInstance(t,l.toISOString()),s.setMonth(s.getMonth()+1)}}adjustForHolidaysAndWeekends(t,r){for(;r.includes(t.toISOString().split("T")[0])||0===t.getDay()||6===t.getDay();)t.setDate(t.getDate()-1);return t}createTaskInstance(t,r){const i=this.generateId(),s={...t,id:i,startDateTime:r};this.firestore.collection(`users/${t.userId}/tasks`).doc(i).set(s)}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Vu),Q(A$),Q(D_),Q(sa))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vhe(n,e){if(1&n&&(b(0,"option",22),x(1),T()),2&n){const t=e.$implicit;Y("value",t.id),H(1),gt(t.name)}}function whe(n,e){if(1&n&&(b(0,"option",22),x(1),T()),2&n){const t=e.$implicit;Y("value",t),H(1),gt(t)}}function Ehe(n,e){if(1&n){const t=Et();b(0,"div",6)(1,"span",7),x(2,"\u901a\u77e5:"),T(),b(3,"span",8)(4,"input",23),ae("ngModelChange",function(i){return we(t),Ee(re(2).newTask.reminderTime.value=i)}),T(),b(5,"select",24),ae("ngModelChange",function(i){return we(t),Ee(re(2).newTask.reminderTime.unit=i)}),xe(6,whe,2,2,"option",12),T()()()}if(2&n){const t=re(2);H(4),Y("ngModel",t.newTask.reminderTime.value),H(1),Y("ngModel",t.newTask.reminderTime.unit),H(1),Y("ngForOf",t.reminderUnits)}}function Che(n,e){if(1&n){const t=Et();b(0,"div")(1,"label"),x(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),T(),b(3,"input",36),ae("ngModelChange",function(i){return we(t),Ee(re(3).newTask.repeatSettings.daysOffsetFromEnd=i)}),T()()}if(2&n){const t=re(3);H(3),Y("ngModel",t.newTask.repeatSettings.daysOffsetFromEnd)}}function bhe(n,e){if(1&n){const t=Et();b(0,"div"),x(1),b(2,"button",5),ae("click",function(){const s=we(t).$implicit;return Ee(re(3).removeExcludeDate(s))}),x(3,"\u524a\u9664"),T()()}if(2&n){const t=e.$implicit;H(1),Mi(" ",t," ")}}function Dhe(n,e){if(1&n){const t=Et();b(0,"div",6)(1,"span",7),x(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),T(),b(3,"span",8)(4,"div",25)(5,"div")(6,"label"),x(7,"\u983b\u5ea6:"),T(),b(8,"select",10),ae("ngModelChange",function(i){return we(t),Ee(re(2).newTask.repeatSettings.frequency=i)}),b(9,"option",26),x(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),T(),b(11,"option",27),x(12,"\u6bce\u65e5"),T(),b(13,"option",28),x(14,"\u6bce\u9031"),T(),b(15,"option",29),x(16,"\u6bce\u6708"),T(),b(17,"option",30),x(18,"\u6bce\u5e74"),T(),b(19,"option",31),x(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),T()()(),xe(21,Che,4,1,"div",32),b(22,"div")(23,"label"),x(24,"\u7d42\u4e86\u65e5:"),T(),b(25,"input",33),ae("ngModelChange",function(i){return we(t),Ee(re(2).newTask.repeatSettings.endDate=i)}),T()(),b(26,"div")(27,"label"),x(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),T(),b(29,"input",34),ae("ngModelChange",function(i){return we(t),Ee(re(2).newTask.repeatSettings.businessDaysOnly=i)}),T()(),b(30,"div")(31,"label"),x(32,"\u9664\u5916\u65e5:"),T(),b(33,"input",33),ae("ngModelChange",function(i){return we(t),Ee(re(2).excludeDate=i)}),T(),b(34,"button",5),ae("click",function(){return we(t),Ee(re(2).addExcludeDate())}),x(35,"\u8ffd\u52a0"),T(),xe(36,bhe,4,1,"div",35),T()()()()}if(2&n){const t=re(2);H(8),Y("ngModel",t.newTask.repeatSettings.frequency),H(13),Y("ngIf","monthlyFromEnd"===t.newTask.repeatSettings.frequency),H(4),Y("ngModel",t.newTask.repeatSettings.endDate),H(4),Y("ngModel",t.newTask.repeatSettings.businessDaysOnly),H(4),Y("ngModel",t.excludeDate),H(3),Y("ngForOf",t.newTask.repeatSettings.excludeDates)}}const The=function(n){return{selected:n}},Ihe=function(n){return{"background-color":n}};function She(n,e){if(1&n){const t=Et();b(0,"div",37),ae("click",function(){const s=we(t).$implicit;return Ee(re(2).selectColor(s))}),T()}if(2&n){const t=e.$implicit,r=re(2);Y("ngClass",Co(2,The,r.newTask.tagColor===t))("ngStyle",Co(4,Ihe,t))}}function Ahe(n,e){if(1&n){const t=Et();b(0,"div",1)(1,"div",2)(2,"h2",3),x(3,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),T(),b(4,"div",4)(5,"button",5),ae("click",function(){return we(t),Ee(re().saveTask())}),x(6,"\u4fdd\u5b58"),T(),b(7,"button",5),ae("click",function(){return we(t),Ee(re().cancel())}),x(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),T()()(),b(9,"div",6)(10,"span",7),x(11,"\u30bf\u30a4\u30c8\u30eb:"),T(),b(12,"span",8)(13,"input",9),ae("ngModelChange",function(i){return we(t),Ee(re().newTask.title=i)}),T()()(),b(14,"div",6)(15,"span",7),x(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),T(),b(17,"span",8)(18,"select",10),ae("ngModelChange",function(i){return we(t),Ee(re().newTask.projectId=i)}),b(19,"option",11),x(20,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),T(),xe(21,vhe,2,2,"option",12),T()()(),b(22,"div",6)(23,"span",7),x(24,"\u8aac\u660e:"),T(),b(25,"span",8)(26,"textarea",13),ae("ngModelChange",function(i){return we(t),Ee(re().newTask.description=i)}),T()()(),b(27,"div",6)(28,"span",7),x(29,"\u958b\u59cb\u65e5\u6642:"),T(),b(30,"span",8)(31,"input",14),ae("ngModelChange",function(i){return we(t),Ee(re().newTask.startDateTime=i)}),T()()(),b(32,"div",6)(33,"span",7),x(34,"\u7d42\u4e86\u65e5\u6642:"),T(),b(35,"span",8)(36,"input",14),ae("ngModelChange",function(i){return we(t),Ee(re().newTask.endDateTime=i)}),T()()(),xe(37,Ehe,7,3,"div",15),xe(38,Dhe,37,6,"div",15),b(39,"div",6)(40,"span",7),x(41,"\u512a\u5148\u5ea6:"),T(),b(42,"span",8)(43,"select",10),ae("ngModelChange",function(i){return we(t),Ee(re().newTask.priority=i)}),b(44,"option",16),x(45,"\u4f4e"),T(),b(46,"option",17),x(47,"\u4e2d"),T(),b(48,"option",18),x(49,"\u9ad8"),T()()()(),b(50,"div",6)(51,"span",7),x(52,"\u30bf\u30b0:"),T(),b(53,"span",8)(54,"input",19),ae("ngModelChange",function(i){return we(t),Ee(re().newTask.tag=i)}),T()()(),b(55,"div",6)(56,"span",7),x(57,"\u30bf\u30b0\u306e\u8272:"),T(),b(58,"span",8)(59,"div",20),xe(60,She,1,6,"div",21),T()()()()}if(2&n){const t=re();H(13),Y("ngModel",t.newTask.title),H(5),Y("ngModel",t.newTask.projectId),H(3),Y("ngForOf",t.projects),H(5),Y("ngModel",t.newTask.description),H(5),Y("ngModel",t.newTask.startDateTime),H(5),Y("ngModel",t.newTask.endDateTime),H(1),Y("ngIf",t.newTask.reminderTime),H(1),Y("ngIf",t.newTask.repeatSettings),H(5),Y("ngModel",t.newTask.priority),H(11),Y("ngModel",t.newTask.tag),H(6),Y("ngForOf",t.colors)}}let hk=(()=>{class n{constructor(t,r,i,s){this.dialogRef=t,this.reminderService=r,this.projectService=i,this.taskService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",this.newTask={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",daysOffsetFromEnd:1,endDate:"",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:0,unit:"\u5206"},userId:""}}ngOnInit(){this.projects$=this.projectService.getProjects(),this.projects$.subscribe(r=>{this.projects=r});const t=this.taskService.getCurrentUserId();t&&(this.newTask.userId=t)}saveTask(){var t=this;return(0,pe.Z)(function*(){try{if(t.newTask.startDateTime&&t.newTask.reminderTime&&null!==t.newTask.reminderTime.value){const r=t.calculateReminderTime({value:t.newTask.reminderTime.value,unit:t.newTask.reminderTime.unit});t.reminderService.setReminder(t.newTask,r)}yield t.taskService.addTask(t.newTask),t.dialogRef.close(t.newTask)}catch(r){console.error("Failed to save task:",r)}})()}cancel(){this.dialogRef.close()}selectColor(t){this.newTask.tagColor=t}addExcludeDate(){this.excludeDate&&(this.newTask.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(t){this.newTask.repeatSettings?.excludeDates&&(this.newTask.repeatSettings.excludeDates=this.newTask.repeatSettings.excludeDates.filter(r=>r!==t))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(t){const{value:r,unit:i}=t;switch(i){case"\u5206":return 60*r*1e3;case"\u6642\u9593":return 60*r*60*1e3;case"\u65e5":return 24*r*60*60*1e3;case"\u9031":return 7*r*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(r){return new(r||n)(U(Vf),U($$),U(Zf),U(Kf))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-task-add"]],standalone:!0,features:[Ri],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"]],template:function(r,i){1&r&&xe(0,Ahe,61,11,"div",0),2&r&&Y("ngIf",i.newTask)},dependencies:[Wr,ps,hi,Rs,xa,Vs,g_,m_,Fs,YC,$u,Wu,io,QC,Ls],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})();function Sb(n,e){let t=zt(n);return isNaN(+t)?Ao(n,NaN):(null!=e.year&&t.setFullYear(e.year),null!=e.month&&(t=j$(t,e.month)),null!=e.date&&t.setDate(e.date),null!=e.hours&&t.setHours(e.hours),null!=e.minutes&&t.setMinutes(e.minutes),null!=e.seconds&&t.setSeconds(e.seconds),null!=e.milliseconds&&t.setMilliseconds(e.milliseconds),t)}function z$(n,e){return sd(n,12*e)}function fk(n){const e=zt(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function Rhe(n,e){if(1&n){const t=Et();b(0,"div")(1,"h3"),x(2),Xt(3,"date"),T(),b(4,"mwl-calendar-month-view",5),ae("eventClicked",function(i){return we(t),Ee(re().handleEvent("Clicked",i.event))}),T()()}if(2&n){const t=re();H(2),gt(or(3,3,t.viewDate,"yyyy\u5e74MM\u6708")),H(2),Y("viewDate",t.viewDate)("events",t.allEvents)}}function khe(n,e){if(1&n&&(b(0,"div")(1,"div",8),x(2),Xt(3,"date"),T()()),2&n){const t=re().$implicit;H(2),_w(" ",or(3,2,t.start,"EEEE, MMM d")," - ",t.title," ")}}function Phe(n,e){if(1&n&&(Rg(0),xe(1,khe,4,5,"div",4),kg()),2&n){const t=e.$implicit,r=re(2);H(1),Y("ngIf",r.isSameWeek(t.start,r.viewDate))}}function xhe(n,e){if(1&n){const t=Et();b(0,"div")(1,"h3"),x(2),T(),b(3,"div",6),xe(4,Phe,2,1,"ng-container",7),T(),b(5,"mwl-calendar-week-view",5),ae("eventClicked",function(i){return we(t),Ee(re().handleEvent("Clicked",i.event))}),T()()}if(2&n){const t=re();H(2),gt(t.getWeekRange()),H(2),Y("ngForOf",t.holidayEvents),H(1),Y("viewDate",t.viewDate)("events",t.getNonHolidayEvents())}}function Ohe(n,e){if(1&n&&(b(0,"div")(1,"div",10),x(2),T()()),2&n){const t=re().$implicit;H(2),Mi(" ",t.title," ")}}function Nhe(n,e){if(1&n&&(Rg(0),xe(1,Ohe,3,1,"div",4),kg()),2&n){const t=e.$implicit,r=re(2);H(1),Y("ngIf",r.isSameDay(t.start,r.viewDate))}}function Fhe(n,e){if(1&n){const t=Et();b(0,"div")(1,"h3"),x(2),Xt(3,"date"),T(),b(4,"div",9),xe(5,Nhe,2,1,"ng-container",7),T(),b(6,"mwl-calendar-day-view",5),ae("eventClicked",function(i){return we(t),Ee(re().handleEvent("Clicked",i.event))}),T()()}if(2&n){const t=re();H(2),gt(or(3,4,t.viewDate,"yyyy\u5e74MM\u6708dd\u65e5")),H(3),Y("ngForOf",t.holidayEvents),H(1),Y("viewDate",t.viewDate)("events",t.getNonHolidayEvents())}}let Lhe=(()=>{class n{constructor(t,r,i){this.taskService=t,this.holidayService=r,this.dialog=i,this.view=Ka.Week,this.viewDate=new Date,this.events=[],this.holidayEvents=[],this.allEvents=[],this.holidays=[],this.CalendarView=Ka}ngOnInit(){console.log("Initializing CalendarComponent..."),this.loadHolidays()}loadHolidays(){console.log("Loading holidays..."),K(this.holidayService.getHolidays()).subscribe(t=>{this.holidays=Object.keys(t).map(r=>new Date(r)),this.holidayEvents=this.holidays.map(r=>({start:r,title:t[r.toISOString().split("T")[0]],color:{primary:"#e3bc08",secondary:"#FDF1BA"}})),console.log("Holidays loaded:",this.holidayEvents),this.loadEvents(),this.updateAllEvents()},t=>{console.error("Failed to load holidays:",t)})}loadEvents(){console.log("Loading events..."),this.taskService.getTasks().subscribe(t=>{this.events=this.generateEventsFromTasks(t),console.log("Events loaded:",this.events),this.updateAllEvents()})}generateEventsFromTasks(t){console.log("Generating events from tasks...");const r=[];return t.forEach(i=>{if(i.repeatSettings)r.push(...this.generateRecurringEvents(i));else{const s=new Date(i.startDateTime),o=new Date(i.endDateTime);if(isNaN(s.getTime())||isNaN(o.getTime()))return void console.error(`Invalid date for task: ${i.title}`);if(s>o)return void console.warn(`Start date is after end date for task: ${i.title}`);r.push({start:s,end:o,title:i.title,color:i.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:i})}}),console.log("Events generated:",r),r}generateRecurringEvents(t){console.log("Generating recurring events for task:",t.title);const r=[],i=new Date(t.startDateTime),s=new Date(t.endDateTime),o=t.repeatSettings;if(isNaN(i.getTime())||isNaN(s.getTime())||!o)return console.error(`Invalid date or repeat settings for task: ${t.title}`),r;if("none"===o.frequency)return r.push({start:i,end:s,title:t.title,color:t.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:t}),r;let a=i,l=s;const c=o.endDate?new Date(o.endDate):null,h=1e3;let m=0;for(;(!c||a<=c)&&m<h;){if("monthlyFromEnd"===o.frequency&&void 0!==o.daysOffsetFromEnd&&(a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd),a=Sb(a,{hours:i.getHours(),minutes:i.getMinutes()}),l=Sb(a,{hours:s.getHours(),minutes:s.getMinutes()})),a>l)return console.warn(`Start date is after end date for recurring task: ${t.title}`),r;!this.isExcludedDate(a,o.excludeDates)&&(!o.businessDaysOnly||!this.isHolidayOrWeekend(a))&&r.push({start:a,end:l,title:t.title,color:t.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:t});let _=!1;for(;!_;){switch(o.frequency){case"daily":a=qf(a,1),l=qf(l,1),_=!0;break;case"weekly":a=Tb(a,1),l=Tb(l,1),_=!0;break;case"monthly":a=sd(a,1),l=sd(l,1),_=!0;break;case"yearly":a=z$(a,1),l=z$(l,1),_=!0;break;case"monthlyFromEnd":a=sd(a,1),l=sd(l,1),a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd??0),a=Sb(a,{hours:i.getHours(),minutes:i.getMinutes()}),l=Sb(a,{hours:s.getHours(),minutes:s.getMinutes()}),_=!0;break;default:console.warn(`Unknown repeat frequency: ${o.frequency}`),m=h,_=!0}o.businessDaysOnly&&this.isHolidayOrWeekend(a)&&(_=!1)}m++}return m===h&&console.warn(`Max iterations reached for task: ${t.title}`),console.log("Recurring events generated:",r),r}isExcludedDate(t,r){return!!r&&r.some(i=>{const s=new Date(i);return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()})}calculateMonthlyFromEndDate(t,r){let i=Gf(fk(t),r),s=0;for(let o=Gf(fk(t),r);o<=fk(t);o=qf(o,1))this.isHolidayOrWeekend(o)&&s++;for(i=Gf(i,s);this.isHolidayOrWeekend(i);)i=Gf(i,1);return console.log(`Final target date: ${i}`),i}isHolidayOrWeekend(t){const r=t.getDay(),i=0===r||6===r,s=this.holidays.some(o=>o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate());return console.log(`Date: ${t}, isWeekend: ${i}, isHoliday: ${s}`),i||s}updateAllEvents(){this.allEvents=[...this.events,...this.holidayEvents],console.log("All events updated:",this.allEvents)}getNonHolidayEvents(){return this.allEvents.filter(t=>!this.holidayEvents.some(r=>r.start.getTime()===t.start.getTime()))}handleEvent(t,r){console.log(`Event ${t} - ${r.title}`),r.meta&&(this.dialog.closeAll(),this.dialog.open(F_,{width:"600px",data:{task:r.meta}}).afterClosed().subscribe(s=>{s&&(console.log("Event details updated:",s),this.taskService.updateTask(s).then(()=>{this.loadEvents()}))}))}setView(t){console.log(`View changed to ${t}`),this.view=t}addTask(){console.log("Adding new task..."),this.dialog.open(hk,{width:"600px",maxHeight:"80vh",panelClass:"custom-dialog-container"}).afterClosed().subscribe(r=>{r&&(console.log("New task added:",r),this.loadEvents())})}previousPeriod(){switch(console.log("Moving to previous period..."),this.view){case Ka.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()-1));break;case Ka.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-7));break;case Ka.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-1))}console.log("New view date:",this.viewDate)}nextPeriod(){switch(console.log("Moving to next period..."),this.view){case Ka.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()+1));break;case Ka.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+7));break;case Ka.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+1))}console.log("New view date:",this.viewDate)}getWeekRange(){const t=N_(this.viewDate),r=V$(this.viewDate);return`${t.getFullYear()}\u5e74${("0"+(t.getMonth()+1)).slice(-2)}\u6708${("0"+t.getDate()).slice(-2)}\u65e5\uff5e${r.getFullYear()}\u5e74${("0"+(r.getMonth()+1)).slice(-2)}\u6708${("0"+r.getDate()).slice(-2)}\u65e5`}isSameWeek(t,r){return function Mhe(n,e,t){return+N_(n,t)==+N_(e,t)}(t,r)}isSameDay(t,r){return B$(t,r)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Kf),U(A$),U(D_))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-calendar"]],standalone:!0,features:[sn([x_,k_,P_,Cb,{provide:id,useFactory:H$}]),Ri],decls:19,vars:3,consts:[[1,"container"],[1,"button-container"],[3,"click"],[1,"add-task-button",3,"click"],[4,"ngIf"],[3,"viewDate","events","eventClicked"],[1,"holiday-week-container"],[4,"ngFor","ngForOf"],[1,"holiday-week-item","holiday-item"],[1,"holiday-day-container"],[1,"holiday-day-item","holiday-item"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"h2"),x(2,"\u30ab\u30ec\u30f3\u30c0\u30fc"),T(),b(3,"div",1)(4,"button",2),ae("click",function(){return i.setView(i.CalendarView.Month)}),x(5,"\u6708\u30d3\u30e5\u30fc"),T(),b(6,"button",2),ae("click",function(){return i.setView(i.CalendarView.Week)}),x(7,"\u9031\u30d3\u30e5\u30fc"),T(),b(8,"button",2),ae("click",function(){return i.setView(i.CalendarView.Day)}),x(9,"\u65e5\u30d3\u30e5\u30fc"),T(),b(10,"button",2),ae("click",function(){return i.previousPeriod()}),x(11,"\u524d\u306e\u671f\u9593"),T(),b(12,"button",2),ae("click",function(){return i.nextPeriod()}),x(13,"\u6b21\u306e\u671f\u9593"),T(),b(14,"button",3),ae("click",function(){return i.addTask()}),x(15,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),T()(),xe(16,Rhe,5,6,"div",4),xe(17,xhe,6,4,"div",4),xe(18,Fhe,7,7,"div",4),T()),2&r&&(H(16),Y("ngIf",i.view===i.CalendarView.Month),H(1),Y("ngIf",i.view===i.CalendarView.Week),H(1),Y("ngIf",i.view===i.CalendarView.Day))},dependencies:[Wr,hi,Rs,zw,S$,vde,I$,Ide,Wf,ck,uk,Db],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:8px;overflow-y:auto;height:calc(100vh - 40px)}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}h2[_ngcontent-%COMP%]{font-size:1.5em;color:#777}h3[_ngcontent-%COMP%]{font-size:1.2em;color:#777}.holiday-week-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:10px}.holiday-week-item[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;color:#e3bc08}.holiday-day-container[_ngcontent-%COMP%]{margin-top:10px}.holiday-day-item[_ngcontent-%COMP%], .holiday-item[_ngcontent-%COMP%]{font-weight:700;color:#e3bc08}.mwl-calendar-month-view[_ngcontent-%COMP%], .mwl-calendar-week-view[_ngcontent-%COMP%], .mwl-calendar-day-view[_ngcontent-%COMP%]{height:calc(100vh - 160px)}"]})}return n})();function Vhe(n,e){if(1&n){const t=Et();b(0,"li")(1,"input",3),ae("ngModelChange",function(i){return Ee(we(t).$implicit.selected=i)}),T(),x(2),T()}if(2&n){const t=e.$implicit;H(1),Y("ngModel",t.selected),H(1),_w(" ",t.displayName," ",t.email," ")}}let pk=(()=>{class n{constructor(t){this.firestore=t,this.searchTerm="",this.users=[],this.userSelected=new He}searchUsers(){this.users=[],this.firestore.collection("users",t=>t.where("email","==",this.searchTerm)).get().subscribe(t=>{t.forEach(r=>{this.users.push({...r.data(),uid:r.id,selected:!1})})}),this.firestore.collection("users",t=>t.where("displayName","==",this.searchTerm)).get().subscribe(t=>{t.forEach(r=>{this.users.push({...r.data(),uid:r.id,selected:!1})})}),this.firestore.collection("users",t=>t.where("uid","==",this.searchTerm)).get().subscribe(t=>{t.forEach(r=>{this.users.push({...r.data(),uid:r.id,selected:!1})})})}selectUsers(){const t=this.users.filter(r=>r.selected);console.log("Selected users:",t),this.userSelected.emit(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Vu))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-user-search"]],outputs:{userSelected:"userSelected"},standalone:!0,features:[Ri],decls:8,vars:2,consts:[["type","text","placeholder","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u30e6\u30fc\u30b6\u30fcID\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u3067\u691c\u7d22",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(b(0,"div")(1,"input",0),ae("ngModelChange",function(o){return i.searchTerm=o}),T(),b(2,"button",1),ae("click",function(){return i.searchUsers()}),x(3,"\u691c\u7d22"),T(),b(4,"ul"),xe(5,Vhe,3,3,"li",2),T(),b(6,"button",1),ae("click",function(){return i.selectUsers()}),x(7,"\u9078\u629e\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0"),T()()),2&r&&(H(1),Y("ngModel",i.searchTerm),H(4),Y("ngForOf",i.users))},dependencies:[Vs,Fs,$u,io,Ls,Wr,hi]})}return n})(),gk=(()=>{class n{constructor(t){this.firestore=t}getUserById(t){return this.firestore.collection("users").doc(t).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(Vu))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Bhe=function(n,e){return{"background-color":n,border:e}};function Uhe(n,e){if(1&n){const t=Et();b(0,"div",9),ae("click",function(){const s=we(t).$implicit;return Ee(re().newProject.color=s)}),T()}if(2&n){const t=e.$implicit,r=re();Y("ngStyle",$r(1,Bhe,t,r.newProject.color===t?"3px solid black":"1px solid #000"))}}function jhe(n,e){if(1&n){const t=Et();b(0,"button",8),ae("click",function(){we(t);const i=re().$implicit;return Ee(re().removeOwner(i))}),x(1,"\u524a\u9664"),T()}}function Hhe(n,e){if(1&n&&(b(0,"li"),x(1),xe(2,jhe,2,0,"button",10),T()),2&n){const t=e.$implicit,r=re();H(1),Mi(" ",t.displayName," "),H(1),Y("ngIf",t.uid!==r.currentUserUid)}}function $he(n,e){if(1&n){const t=Et();b(0,"li"),x(1),b(2,"button",8),ae("click",function(){const s=we(t).$implicit;return Ee(re().removeMember(s))}),x(3,"\u524a\u9664"),T()()}if(2&n){const t=e.$implicit;H(1),Mi(" ",t.displayName," ")}}let W$=(()=>{class n{constructor(t,r,i,s){this.dialogRef=t,this.projectService=r,this.authService=i,this.userService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.newProject={id:this.generateId(),name:"",description:"",startDate:"",endDate:"",color:"white",tasks:[],members:[],owners:[]},this.members=[],this.owners=[]}ngOnInit(){this.authService.user$.subscribe(t=>{console.log("\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u60c5\u5831:",t),this.currentUserUid=t?.uid,console.log("\u53d6\u5f97\u3057\u305f\u30e6\u30fc\u30b6\u30fcID:",this.currentUserUid),this.currentUserUid&&(this.newProject.owners.push(this.currentUserUid),console.log("\u30aa\u30fc\u30ca\u30fc\u30ea\u30b9\u30c8\u306b\u8ffd\u52a0:",this.newProject.owners),this.userService.getUserById(this.currentUserUid).subscribe(r=>{console.log("\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u53d6\u5f97:",r),r?(this.owners.push({...r,uid:this.currentUserUid}),console.log("\u30aa\u30fc\u30ca\u30fc\u60c5\u5831\u306b\u8ffd\u52a0:",this.owners)):console.error("\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u304c\u5b58\u5728\u3057\u307e\u305b\u3093:",this.currentUserUid)},r=>{console.error("\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f:",r)}))},t=>{console.error("\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f:",t)})}saveProject(){var t=this;return(0,pe.Z)(function*(){try{yield t.projectService.addProject(t.newProject),t.dialogRef.close(t.newProject)}catch(r){console.error("Error saving project:",r)}})()}cancel(){this.dialogRef.close()}addMembers(t){if(t.filter(i=>this.newProject.members.includes(i.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002");else{const i=t.filter(s=>!this.newProject.members.includes(s.uid));this.newProject.members.push(...i.map(s=>s.uid)),i.forEach(s=>{this.members.some(o=>o.uid===s.uid)||this.members.push(s)})}}addOwners(t){if(t.filter(i=>this.newProject.owners.includes(i.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002");else{const i=t.filter(s=>!this.newProject.owners.includes(s.uid));this.newProject.owners.push(...i.map(s=>s.uid)),i.forEach(s=>{this.owners.some(o=>o.uid===s.uid)||this.owners.push(s)})}}removeMember(t){t&&t.uid&&(this.newProject.members=this.newProject.members.filter(r=>r!==t.uid),this.members=this.members.filter(r=>r.uid!==t.uid))}removeOwner(t){t&&t.uid&&t.uid!==this.currentUserUid?(this.newProject.owners=this.newProject.owners.filter(r=>r!==t.uid),this.owners=this.owners.filter(r=>r.uid!==t.uid)):console.error("Cannot remove owner: user ID is undefined or user object is invalid",t)}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Vf),U(Zf),U(sa),U(gk))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-project-add"]],standalone:!0,features:[Ri],decls:43,vars:7,consts:[[1,"project-detail-container"],["placeholder","\u540d\u524d",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[3,"click"],[1,"color-option",3,"ngStyle","click"],[3,"click",4,"ngIf"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"h2"),x(2,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),T(),b(3,"div")(4,"label"),x(5,"\u540d\u524d: "),b(6,"input",1),ae("ngModelChange",function(o){return i.newProject.name=o}),T()()(),b(7,"div")(8,"label"),x(9,"\u8aac\u660e: "),b(10,"textarea",2),ae("ngModelChange",function(o){return i.newProject.description=o}),T()()(),b(11,"div")(12,"label"),x(13,"\u958b\u59cb\u65e5: "),b(14,"input",3),ae("ngModelChange",function(o){return i.newProject.startDate=o}),T()()(),b(15,"div")(16,"label"),x(17,"\u7d42\u4e86\u65e5: "),b(18,"input",3),ae("ngModelChange",function(o){return i.newProject.endDate=o}),T()()(),b(19,"div")(20,"label"),x(21,"\u8272:"),T(),b(22,"div",4),xe(23,Uhe,1,4,"div",5),T()(),b(24,"h4"),x(25,"\u30aa\u30fc\u30ca\u30fc"),T(),b(26,"ul"),xe(27,Hhe,3,2,"li",6),T(),b(28,"h4"),x(29,"\u30e1\u30f3\u30d0\u30fc"),T(),b(30,"ul"),xe(31,$he,4,1,"li",6),T(),b(32,"h4"),x(33,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),T(),b(34,"app-user-search",7),ae("userSelected",function(o){return i.addMembers(o)}),T(),b(35,"h4"),x(36,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),T(),b(37,"app-user-search",7),ae("userSelected",function(o){return i.addOwners(o)}),T(),b(38,"div")(39,"button",8),ae("click",function(){return i.saveProject()}),x(40,"\u4fdd\u5b58"),T(),b(41,"button",8),ae("click",function(){return i.cancel()}),x(42,"\u30ad\u30e3\u30f3\u30bb\u30eb"),T()()()),2&r&&(H(6),Y("ngModel",i.newProject.name),H(4),Y("ngModel",i.newProject.description),H(4),Y("ngModel",i.newProject.startDate),H(4),Y("ngModel",i.newProject.endDate),H(5),Y("ngForOf",i.colors),H(4),Y("ngForOf",i.owners),H(4),Y("ngForOf",i.members))},dependencies:[Wr,hi,Rs,xa,Vs,Fs,io,Ls,pk],styles:[".project-detail-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;max-width:1000px;margin:0 auto;max-height:80vh;overflow-y:auto}.color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}"]})}return n})();function zhe(n,e){if(1&n){const t=Et();b(0,"div")(1,"button",4),ae("click",function(){return we(t),Ee(re().updateProject())}),x(2,"\u4fdd\u5b58"),T(),b(3,"button",4),ae("click",function(){return we(t),Ee(re().cancel())}),x(4,"\u30ad\u30e3\u30f3\u30bb\u30eb"),T()()}}function Whe(n,e){if(1&n){const t=Et();b(0,"button",4),ae("click",function(){we(t);const i=re().$implicit;return Ee(re().removeOwner(i))}),x(1,"\u524a\u9664"),T()}}function qhe(n,e){if(1&n&&(b(0,"li"),x(1),xe(2,Whe,2,0,"button",5),T()),2&n){const t=e.$implicit,r=re();H(1),Mi(" ",t.displayName," "),H(1),Y("ngIf",r.isOwner&&t.uid!==r.currentUserUid)}}function Ghe(n,e){if(1&n){const t=Et();b(0,"li"),x(1),b(2,"button",4),ae("click",function(){const s=we(t).$implicit;return Ee(re().removeMember(s))}),x(3,"\u524a\u9664"),T()()}if(2&n){const t=e.$implicit;H(1),Mi(" ",t.displayName," ")}}let q$=(()=>{class n{constructor(t,r,i,s,o){this.dialogRef=t,this.data=r,this.projectService=i,this.userService=s,this.authService=o,this.members=[],this.owners=[],this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.isOwner=!1,this.project=r.project,this.projectCopy=JSON.parse(JSON.stringify(this.project))}ngOnInit(){this.loadMembers(),this.loadOwners(),this.checkIfOwner(),this.authService.user$.subscribe(t=>{this.currentUserUid=t?.uid})}loadMembers(){this.members=[],this.projectCopy.members.forEach(t=>{this.userService.getUserById(t).subscribe(r=>{r&&(this.members.push({...r,uid:t}),console.log("Member loaded:",r))})})}loadOwners(){this.owners=[],this.projectCopy.owners.forEach(t=>{this.userService.getUserById(t).subscribe(r=>{r&&(this.owners.push({...r,uid:t}),console.log("Owner loaded:",r))})})}checkIfOwner(){this.authService.user$.subscribe(t=>{t&&(this.isOwner=this.projectCopy.owners.includes(t.uid))})}updateProject(){this.projectService.updateProject(this.projectCopy).then(()=>{this.dialogRef.close(this.projectCopy)})}addMembers(t){if(t.filter(i=>this.projectCopy.members.includes(i.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002");else{const i=t.filter(s=>!this.projectCopy.members.includes(s.uid));this.projectCopy.members.push(...i.map(s=>s.uid)),this.loadMembers()}}addOwners(t){if(t.filter(i=>this.projectCopy.owners.includes(i.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002");else{const i=t.filter(s=>!this.projectCopy.owners.includes(s.uid));this.projectCopy.owners.push(...i.map(s=>s.uid)),this.loadOwners()}}removeMember(t){t&&t.uid?(console.log("Removing member with ID:",t.uid),this.projectCopy.members=this.projectCopy.members.filter(r=>r!==t.uid),this.members=this.members.filter(r=>r.uid!==t.uid),console.log("Member removed:",t)):console.error("Cannot remove member: user ID is undefined or user object is invalid",t)}removeOwner(t){t&&t.uid&&t.uid!==this.currentUserUid?(console.log("Removing owner with ID:",t.uid),this.projectCopy.owners=this.projectCopy.owners.filter(r=>r!==t.uid),this.owners=this.owners.filter(r=>r.uid!==t.uid),console.log("Owner removed:",t)):console.error("Cannot remove owner: user ID is undefined or user object is invalid",t)}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(r){return new(r||n)(U(Vf),U(lb),U(Zf),U(gk),U(sa))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-project-detail"]],standalone:!0,features:[Ri],decls:20,vars:5,consts:[[1,"project-detail-container"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[3,"click"],[3,"click",4,"ngIf"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"h3"),x(2),T(),xe(3,zhe,5,0,"div",1),b(4,"p"),x(5),T(),b(6,"h4"),x(7,"\u30aa\u30fc\u30ca\u30fc"),T(),b(8,"ul"),xe(9,qhe,3,2,"li",2),T(),b(10,"h4"),x(11,"\u30e1\u30f3\u30d0\u30fc"),T(),b(12,"ul"),xe(13,Ghe,4,1,"li",2),T(),b(14,"h4"),x(15,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),T(),b(16,"app-user-search",3),ae("userSelected",function(o){return i.addMembers(o)}),T(),b(17,"h4"),x(18,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),T(),b(19,"app-user-search",3),ae("userSelected",function(o){return i.addOwners(o)}),T()()),2&r&&(H(2),gt(i.project.name),H(1),Y("ngIf",i.isOwner),H(2),gt(i.project.description),H(4),Y("ngForOf",i.owners),H(4),Y("ngForOf",i.members))},dependencies:[Wr,hi,Rs,Vs,pk],styles:[".color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}button[_ngcontent-%COMP%]{margin:10px 5px 0 0;padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.project-detail-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;max-width:1000px;margin:0 auto;max-height:80vh;overflow-y:auto}"]})}return n})();function Zhe(n,e){if(1&n&&(b(0,"li"),x(1),T()),2&n){const t=e.$implicit,r=re(2);H(1),Mi(" ",(null==r.ownersMap[t]?null:r.ownersMap[t].displayName)||"Unknown Owner"," ")}}function Khe(n,e){if(1&n&&(b(0,"li"),x(1),T()),2&n){const t=e.$implicit,r=re(2);H(1),Mi(" ",(null==r.membersMap[t]?null:r.membersMap[t].displayName)||"Unknown Member"," ")}}function Yhe(n,e){if(1&n){const t=Et();b(0,"li",14)(1,"div",15)(2,"input",16),ae("ngModelChange",function(i){return Ee(we(t).$implicit.selected=i)}),T(),b(3,"a",17),ae("click",function(){const s=we(t).$implicit;return Ee(re(2).openTaskDetailDialog(s))}),b(4,"div",18),x(5),T(),b(6,"div",19)(7,"span",20),x(8),T(),b(9,"span",21),x(10),T(),b(11,"span",22),x(12),Xt(13,"date"),T(),b(14,"span",23),x(15),Xt(16,"date"),T(),b(17,"span",24),x(18),T(),kn(19,"span",25),T()()()()}if(2&n){const t=e.$implicit,r=re().$implicit,i=re();H(2),Y("ngModel",t.selected)("disabled",!i.canEdit(r)),H(3),gt(t.title),H(3),gt(t.status),H(1),Y("ngClass",t.priority),H(1),gt(i.getPriorityLabel(t.priority)),H(2),gt(or(13,11,t.startDateTime,"short")),H(3),gt(or(16,14,t.endDateTime,"short")),H(3),gt(t.tag),H(1),Ks("background-color",t.tagColor)}}function Qhe(n,e){if(1&n){const t=Et();b(0,"li")(1,"div",6)(2,"input",12),ae("ngModelChange",function(i){return Ee(we(t).$implicit.selected=i)}),T(),b(3,"h3",13),ae("click",function(){const s=we(t).$implicit;return Ee(re().openProjectDetailDialog(s))}),x(4),T()(),b(5,"p"),x(6,"\u30aa\u30fc\u30ca\u30fc:"),T(),b(7,"ul"),xe(8,Zhe,2,1,"li",5),T(),b(9,"p"),x(10,"\u30e1\u30f3\u30d0\u30fc:"),T(),b(11,"ul"),xe(12,Khe,2,1,"li",5),T(),b(13,"ul",7)(14,"li",8)(15,"div",9)(16,"span",10),x(17,"\u9078\u629e"),T(),b(18,"span",10),x(19,"\u30bf\u30a4\u30c8\u30eb"),T(),b(20,"span",10),x(21,"\u30b9\u30c6\u30fc\u30bf\u30b9"),T(),b(22,"span",10),x(23,"\u512a\u5148\u5ea6"),T(),b(24,"span",10),x(25,"\u958b\u59cb\u65e5\u6642"),T(),b(26,"span",10),x(27,"\u7d42\u4e86\u65e5\u6642"),T(),b(28,"span",10),x(29,"\u30bf\u30b0"),T(),b(30,"span",10),x(31,"\u30bf\u30b0\u306e\u8272"),T()()(),xe(32,Yhe,20,17,"li",11),T()()}if(2&n){const t=e.$implicit,r=re();H(2),Y("ngModel",t.selected)("disabled",!r.canEdit(t)),H(2),gt(t.name),H(4),Y("ngForOf",t.owners),H(4),Y("ngForOf",t.members),H(20),Y("ngForOf",r.getTasksForProject(t.id))}}function Xhe(n,e){if(1&n){const t=Et();b(0,"li",14)(1,"div",15)(2,"input",26),ae("ngModelChange",function(i){return Ee(we(t).$implicit.selected=i)}),T(),b(3,"a",17),ae("click",function(){const s=we(t).$implicit;return Ee(re().openTaskDetailDialog(s))}),b(4,"div",18),x(5),T(),b(6,"div",19)(7,"span",20),x(8),T(),b(9,"span",21),x(10),T(),b(11,"span",22),x(12),Xt(13,"date"),T(),b(14,"span",23),x(15),Xt(16,"date"),T(),b(17,"span",24),x(18),T(),kn(19,"span",25),T()()()()}if(2&n){const t=e.$implicit,r=re();H(2),Y("ngModel",t.selected),H(3),gt(t.title),H(3),gt(t.status),H(1),Y("ngClass",t.priority),H(1),gt(r.getPriorityLabel(t.priority)),H(2),gt(or(13,10,t.startDateTime,"short")),H(3),gt(or(16,13,t.endDateTime,"short")),H(3),gt(t.tag),H(1),Ks("background-color",t.tagColor)}}let Jhe=(()=>{class n{constructor(t,r,i,s,o){this.taskService=t,this.projectService=r,this.userService=i,this.authService=s,this.dialog=o,this.projects=[],this.tasks=[],this.membersMap={},this.ownersMap={},this.currentUserUid=null}ngOnInit(){this.authService.user$.subscribe(t=>{this.currentUserUid=t?.uid||null,this.loadProjects()})}loadProjects(){console.log("Loading projects..."),this.projectService.getProjects().subscribe(t=>{this.projects=t,console.log("Projects loaded:",this.projects),this.loadUsers(),this.loadTasksForProjects()})}loadTasksForProjects(){console.log("Loading tasks for each project..."),this.currentUserUid&&this.projects.forEach(t=>{(t.members.includes(this.currentUserUid)||t.owners.includes(this.currentUserUid))&&(console.log(`User is a member or owner of project: ${t.id}`),this.loadTasksForUsersInProject(t.id,t.members.concat(t.owners)))})}loadTasksForUsersInProject(t,r){r.forEach(i=>{this.taskService.getTasksByUserId(i).subscribe(s=>{s.forEach(o=>{o.projectId===t&&this.tasks.push(o)}),console.log(`Tasks for project ${t} loaded:`,this.tasks)})})}loadUsers(){console.log("Loading users...");const t=new Set,r=new Set;this.projects.forEach(o=>{o.members&&o.members.forEach(a=>t.add(a)),o.owners&&o.owners.forEach(a=>r.add(a))});const i=Array.from(t),s=Array.from(r);console.log("Unique Member IDs:",i),console.log("Unique Owner IDs:",s),i.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.membersMap[o]=a,console.log("Added member to membersMap:",a)):console.log("User is undefined or has no UID:",a)})}),s.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.ownersMap[o]=a,console.log("Added owner to ownersMap:",a)):console.log("User is undefined or has no UID:",a)})})}openAddTaskDialog(){console.log("Opening Add Task Dialog..."),this.dialog.open(hk,{width:"400px"}).afterClosed().subscribe(r=>{r&&(console.log("Add Task Dialog closed with result:",r),this.loadTasksForProjects())})}openAddProjectDialog(){console.log("Opening Add Project Dialog..."),this.dialog.open(W$,{width:"400px"}).afterClosed().subscribe(r=>{r&&(console.log("Add Project Dialog closed with result:",r),this.loadProjects())})}deleteSelectedTasks(){console.log("Deleting selected tasks..."),this.tasks.filter(r=>r.selected).forEach(r=>{this.taskService.deleteTask(r).then(()=>{console.log("Deleted task:",r),this.loadTasksForProjects()})})}deleteSelectedProjects(){console.log("Deleting selected projects..."),this.projects.filter(r=>r.selected).forEach(r=>{this.getTasksForProject(r.id).forEach(s=>{this.taskService.deleteTask(s).then(()=>{console.log("Deleted related task:",s),this.loadTasksForProjects()})}),this.projectService.deleteProject(r).then(()=>{console.log("Deleted project:",r),this.loadProjects()})})}openProjectDetailDialog(t){console.log("Opening Project Detail Dialog for project:",t),this.currentUserUid&&t.owners.includes(this.currentUserUid)?(this.dialog.closeAll(),this.dialog.open(q$,{width:"600px",data:{project:t}}).afterClosed().subscribe(i=>{i&&(console.log("Project Detail Dialog closed with result:",i),this.loadProjects())})):alert("\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30aa\u30fc\u30ca\u30fc\u3067\u306f\u306a\u3044\u305f\u3081\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\u3002")}getTasksForProject(t){return this.tasks.filter(r=>r.projectId===t)}openTaskDetailDialog(t){console.log("Opening Task Detail Dialog for task:",t),this.dialog.closeAll(),this.dialog.open(F_,{width:"600px",data:{task:t}}).afterClosed().subscribe(i=>{i&&(console.log("Task Detail Dialog closed with result:",i),this.loadTasksForProjects())})}getPriorityLabel(t){switch(t){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return t}}canEdit(t){return!!this.currentUserUid&&t.owners.includes(this.currentUserUid)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Kf),U(Zf),U(gk),U(sa),U(D_))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-project-list"]],standalone:!0,features:[Ri],decls:37,vars:2,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"project-task-list-container"],[4,"ngFor","ngForOf"],[1,"project-header"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],["type","checkbox",1,"project-checkbox",3,"ngModel","disabled","ngModelChange"],[3,"click"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","disabled","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1)(2,"button",2),ae("click",function(){return i.openAddTaskDialog()}),x(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),T(),b(4,"button",3),ae("click",function(){return i.openAddProjectDialog()}),x(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),T(),b(6,"button",3),ae("click",function(){return i.deleteSelectedTasks()}),x(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),T(),b(8,"button",3),ae("click",function(){return i.deleteSelectedProjects()}),x(9,"\u9078\u629e\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664"),T()(),b(10,"div",4)(11,"ul"),xe(12,Qhe,33,6,"li",5),b(13,"li")(14,"div",6)(15,"h3"),x(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7121\u6240\u5c5e"),T()(),b(17,"ul",7)(18,"li",8)(19,"div",9)(20,"span",10),x(21,"\u9078\u629e"),T(),b(22,"span",10),x(23,"\u30bf\u30a4\u30c8\u30eb"),T(),b(24,"span",10),x(25,"\u30b9\u30c6\u30fc\u30bf\u30b9"),T(),b(26,"span",10),x(27,"\u512a\u5148\u5ea6"),T(),b(28,"span",10),x(29,"\u958b\u59cb\u65e5\u6642"),T(),b(30,"span",10),x(31,"\u7d42\u4e86\u65e5\u6642"),T(),b(32,"span",10),x(33,"\u30bf\u30b0"),T(),b(34,"span",10),x(35,"\u30bf\u30b0\u306e\u8272"),T()()(),xe(36,Xhe,20,16,"li",11),T()()()()()),2&r&&(H(12),Y("ngForOf",i.projects),H(24),Y("ngForOf",i.getTasksForProject("")))},dependencies:[Wr,ps,hi,zw,Vs,$u,io,Ls],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;max-width:1000px;margin:0 auto}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.project-task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;margin:10px auto}.project-header[_ngcontent-%COMP%]{display:flex;align-items:center}.project-checkbox[_ngcontent-%COMP%]{margin-right:10px}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-start-date[_ngcontent-%COMP%], .task-end-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%], .task-tag-color[_ngcontent-%COMP%]{text-align:center;margin-left:10px}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}"]})}return n})();function mk(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function Yf(n,e){const t=e?"":"none";mk(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function G$(n,e,t){mk(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Ab(n,e){return e&&"none"!=e?n+" "+e:n}function Z$(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function _k(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function yk(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function vk(n,e,t){const{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function L_(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function K$(n,e,t,r){const{top:i,right:s,bottom:o,left:a,width:l,height:c}=n,h=l*e,m=c*e;return r>i-m&&r<o+m&&t>a-h&&t<s+h}class Y${constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:yk(t)})})}handleScroll(e){const t=so(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let s,o;if(t===this._document){const c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=t.scrollTop,o=t.scrollLeft;const a=i.top-s,l=i.left-o;return this.positions.forEach((c,h)=>{c.clientRect&&t!==h&&t.contains(h)&&L_(c.clientRect,a,l)}),i.top=s,i.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Q$(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?ez(n,e):("input"===r||"select"===r||"textarea"===r)&&J$(n,e),X$("canvas",n,e,ez),X$("input, textarea, select",n,e,J$),e}function X$(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let tfe=0;function J$(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${tfe++}`)}function ez(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const tz=Zu({passive:!0}),Mb=Zu({passive:!1}),wk=new Set(["position"]);class rfe{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=function pc(n){return null!=n&&"false"!=`${n}`}(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>Yf(r,t)))}constructor(e,t,r,i,s,o){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new X,this._pointerMoveSubscription=Ct.EMPTY,this._pointerUpSubscription=Ct.EMPTY,this._scrollSubscription=Ct.EMPTY,this._resizeSubscription=Ct.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new X,this.started=new X,this.released=new X,this.ended=new X,this.entered=new X,this.exited=new X,this.dropped=new X,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const v=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),C=this._dropContainer;if(!v)return void this._endDragSequence(a);(!C||!C.isDragging()&&!C.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const h=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,m=this._activeTransform;m.x=c.x-h.x+this._passiveTransform.x,m.y=c.y-h.y+this._passiveTransform.y,this._applyRootElementTransform(m.x,m.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Y$(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Kr(r)),this._handles.forEach(r=>Yf(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Kr(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,Mb),t.addEventListener("touchstart",this._pointerDown,tz),t.addEventListener("dragstart",this._nativeDragStart,Mb)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Kr(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Yf(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Yf(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){V_(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(o,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),G$(r,!1,wk),this._document.body.appendChild(i.replaceChild(s,r)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=V_(t),s=!i&&0!==t.button,o=this._rootElement,a=so(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=i?kR(t):RR(t);if(a&&a.draggable&&"mousedown"===t.type&&t.preventDefault(),r||s||l||c)return;if(this._handles.length){const _=o.style;this._rootElementTapHighlight=_.webkitTapHighlightColor||"",_.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(_=>this._updateOnScroll(_)),this._boundaryElement&&(this._boundaryRect=yk(this._boundaryElement));const h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const m=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:m.x,y:m.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){G$(this._rootElement,!0,wk),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const s=e.matchSize?this._initialClientRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=rz(o,this._document),this._previewRef=o,e.matchSize?iz(i,s):i.style.transform=Rb(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=Q$(this._rootElement),iz(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return mk(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},wk),Yf(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function efe(n){const e=getComputedStyle(n),t=_k(e,"transition-property"),r=t.find(a=>"transform"===a||"all"===a);if(!r)return 0;const i=t.indexOf(r),s=_k(e,"transition-duration"),o=_k(e,"transition-delay");return Z$(s[i])+Z$(o[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=o=>{(!o||so(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(s))},s=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=rz(this._placeholderRef,this._document)):r=Q$(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=V_(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition();return{x:s.left-e.left+(o.pageX-s.left-a.left),y:s.top-e.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=V_(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),h=a.top+o,m=a.bottom-(c-o);r=nz(r,a.left+s,a.right-(l-s)),i=nz(i,h,m)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Yf(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Mb),e.removeEventListener("touchstart",this._pointerDown,tz),e.removeEventListener("dragstart",this._nativeDragStart,Mb)}_applyRootElementTransform(e,t){const r=Rb(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=Ab(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=Rb(e,t);this._preview.style.transform=Ab(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:V_(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=so(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&L_(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=vR(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Kr(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function Rb(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function nz(n,e,t){return Math.max(e,Math.min(t,n))}function V_(n){return"t"===n.type[0]}function rz(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function iz(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Rb(e.left,e.top)}function sz(n,e,t){const r=B_(e,n.length-1),i=B_(t,n.length-1);if(r===i)return;const s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function B_(n,e){return Math.max(0,Math.min(e,n))}class ife{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,l=s.findIndex(S=>S.drag===e),c=s[o],m=c.clientRect,_=l>o?1:-1,v=this._getItemOffsetPx(s[l].clientRect,m,_),C=this._getSiblingOffsetPx(l,s,_),I=s.slice();return sz(s,l,o),s.forEach((S,j)=>{if(I[j]===S)return;const O=S.drag===e,q=O?v:C,te=O?e.getPlaceholderElement():S.drag.getRootElement();S.offset+=q,a?(te.style.transform=Ab(`translate3d(${Math.round(S.offset)}px, 0, 0)`,S.initialTransform),L_(S.clientRect,0,q)):(te.style.transform=Ab(`translate3d(0, ${Math.round(S.offset)}px, 0)`,S.initialTransform),L_(S.clientRect,q,0))}),this._previousSwap.overlaps=vk(m,t,r),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:o}}enter(e,t,r,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),l=e.getPlaceholderElement();let c=o[s];if(c===e&&(c=o[s+1]),!c&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const h=c.getRootElement();h.parentElement.insertBefore(l,h),o.splice(s,0,e)}else Kr(this._element).appendChild(l),o.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{L_(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:yk(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let s=i?t.left-e.left:t.top-e.top;return-1===r&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,s=t[e].clientRect,o=t[e+-1*r];let a=s[i?"width":"height"]*r;if(o){const l=i?"left":"top",c=i?"right":"bottom";-1===r?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}{const o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>a!==e&&((!i||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?i.x:i.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom))));return-1!==o&&this._sortPredicate(o,e)?o:-1}}class sfe{constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new X,this.entered=new X,this.exited=new X,this.dropped=new X,this.sorted=new X,this.receivingStarted=new X,this.receivingStopped=new X,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Ct.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new X,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),K4(0,UH).pipe(ki(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=Kr(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new Y$(r),this._sortStrategy=new ife(this.element,t),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:l})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=Kr(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!K$(this._clientRect,.05,t,r))return;const s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||K$(o.clientRect,.05,e,t)&&([i,s]=function ofe(n,e,t,r){const i=lz(e,r),s=cz(e,t);let o=0,a=0;if(i){const l=n.scrollTop;1===i?l>0&&(o=1):n.scrollHeight-l>n.clientHeight&&(o=2)}if(s){const l=n.scrollLeft;1===s?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,e,t),(i||s)&&(r=a))}),!i&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};i=lz(l,t),s=cz(l,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Kr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Kr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Kr(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&vk(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!vk(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const s=Kr(this.element);return i===s||s.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=vR(Kr(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function lz(n,e){const{top:t,bottom:r,height:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}function cz(n,e){const{left:t,right:r,width:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}const kb=Zu({passive:!1,capture:!0});let afe=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new X,this.pointerUp=new X,this.scroll=new X,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,kb)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,kb)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:kb}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:kb}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new dt(i=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&i.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),ge(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Q(it),Q(xt))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const lfe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ek=(()=>{class n{constructor(t,r,i,s){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,r=lfe){return new rfe(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new sfe(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(r){return new(r||n)(Q(xt),Q(it),Q(CR),Q(afe))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mfe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({providers:[Ek],imports:[bR]})}return n})();const _fe=function(n,e){return{"background-color":n,border:e}};function yfe(n,e){if(1&n){const t=Et();b(0,"div",22),ae("click",function(){const s=we(t).$implicit;return Ee(re(2).selectColor(s))}),T()}if(2&n){const t=e.$implicit,r=re(2);Y("ngStyle",$r(1,_fe,t,r.subtask.tagColor===t?"3px solid black":"1px solid #000"))}}function vfe(n,e){if(1&n){const t=Et();b(0,"div",1)(1,"div",2)(2,"h2",3),x(3),T(),b(4,"div",4)(5,"button",5),ae("click",function(){return we(t),Ee(re().saveSubtask())}),x(6,"\u4fdd\u5b58"),T(),b(7,"button",5),ae("click",function(){return we(t),Ee(re().cancel())}),x(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),T()()(),b(9,"div",6)(10,"span",7),x(11,"\u30bf\u30a4\u30c8\u30eb:"),T(),b(12,"span",8)(13,"input",9),ae("ngModelChange",function(i){return we(t),Ee(re().subtask.title=i)}),T()()(),b(14,"div",6)(15,"span",7),x(16,"\u8aac\u660e:"),T(),b(17,"span",8)(18,"textarea",10),ae("ngModelChange",function(i){return we(t),Ee(re().subtask.description=i)}),T()()(),b(19,"div",6)(20,"span",7),x(21,"\u958b\u59cb\u65e5\u6642:"),T(),b(22,"span",8)(23,"input",11),ae("ngModelChange",function(i){return we(t),Ee(re().subtask.startDateTime=i)}),T()()(),b(24,"div",6)(25,"span",7),x(26,"\u7d42\u4e86\u65e5\u6642:"),T(),b(27,"span",8)(28,"input",11),ae("ngModelChange",function(i){return we(t),Ee(re().subtask.endDateTime=i)}),T()()(),b(29,"div",6)(30,"span",7),x(31,"\u512a\u5148\u5ea6:"),T(),b(32,"span",8)(33,"select",12),ae("ngModelChange",function(i){return we(t),Ee(re().subtask.priority=i)}),b(34,"option",13),x(35,"\u4f4e"),T(),b(36,"option",14),x(37,"\u4e2d"),T(),b(38,"option",15),x(39,"\u9ad8"),T()()()(),b(40,"div",6)(41,"span",7),x(42,"\u30bf\u30b0:"),T(),b(43,"span",8)(44,"input",16),ae("ngModelChange",function(i){return we(t),Ee(re().subtask.tag=i)}),T()()(),b(45,"div",6)(46,"span",7),x(47,"\u30bf\u30b0\u306e\u8272:"),T(),b(48,"span",8)(49,"div",17),xe(50,yfe,1,4,"div",18),T()()(),b(51,"div",6)(52,"span",7),x(53,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),T(),b(54,"span",8)(55,"select",12),ae("ngModelChange",function(i){return we(t),Ee(re().subtask.status=i)}),b(56,"option",19),x(57,"\u672a\u7740\u624b"),T(),b(58,"option",20),x(59,"\u9032\u884c\u4e2d"),T(),b(60,"option",21),x(61,"\u5b8c\u4e86"),T()()()()()}if(2&n){const t=re();H(3),Mi("",t.subtask.title," \u306e\u8a73\u7d30"),H(10),Y("ngModel",t.subtask.title),H(5),Y("ngModel",t.subtask.description),H(5),Y("ngModel",t.subtask.startDateTime),H(5),Y("ngModel",t.subtask.endDateTime),H(5),Y("ngModel",t.subtask.priority),H(11),Y("ngModel",t.subtask.tag),H(6),Y("ngForOf",t.colors),H(5),Y("ngModel",t.subtask.status)}}let wfe=(()=>{class n{constructor(t,r,i){this.taskService=t,this.dialogRef=r,this.data=i,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],i&&i.subtask&&i.task&&(this.subtask=i.subtask,this.task=i.task)}ngOnInit(){this.subtask||(this.subtask={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"})}saveSubtask(){var t=this;return(0,pe.Z)(function*(){t.task.subtasks||(t.task.subtasks=[]);const r=t.task.subtasks.findIndex(i=>i.id===t.subtask.id);-1!==r?t.task.subtasks[r]=t.subtask:t.task.subtasks.push(t.subtask),yield t.taskService.updateTask(t.task),t.dialogRef.close(t.subtask)})()}cancel(){this.dialogRef.close()}selectColor(t){this.subtask.tagColor=t}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Kf),U(Vf),U(lb))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-subtask-detail"]],inputs:{subtask:"subtask"},standalone:!0,features:[Ri],decls:1,vars:1,consts:[["class","subtask-detail-container",4,"ngIf"],[1,"subtask-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"color-option",3,"ngStyle","click"]],template:function(r,i){1&r&&xe(0,vfe,62,9,"div",0),2&r&&Y("ngIf",i.subtask)},dependencies:[Wr,hi,Rs,xa,Vs,g_,m_,Fs,Wu,io,Ls],styles:[".subtask-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;text-align:center}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ddd}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0}"]})}return n})();function Efe(n,e){if(1&n&&(b(0,"option"),x(1),T()),2&n){const t=e.$implicit;H(1),gt(t)}}function Cfe(n,e){if(1&n){const t=Et();b(0,"li",52)(1,"div",53),ae("click",function(){const s=we(t).$implicit;return Ee(re(2).openSubtaskDetailDialog(s))}),b(2,"input",54),ae("ngModelChange",function(i){return Ee(we(t).$implicit.selected=i)})("click",function(i){return i.stopPropagation()}),T(),b(3,"span",55),x(4),T(),b(5,"span",56),x(6),T(),b(7,"span",57),x(8),T(),b(9,"span",58),x(10),Xt(11,"date"),T(),b(12,"span",59),x(13),Xt(14,"date"),T(),b(15,"span",60),x(16),T(),kn(17,"span",61),T()()}if(2&n){const t=e.$implicit,r=re(2);H(2),Y("ngModel",t.selected),H(2),gt(t.title),H(2),gt(t.status),H(1),Y("ngClass",t.priority),H(1),gt(r.getPriorityLabel(t.priority)),H(2),gt(or(11,10,t.startDateTime,"short")),H(3),gt(or(14,13,t.endDateTime,"short")),H(3),gt(t.tag),H(1),Ks("background-color",t.tagColor)}}function bfe(n,e){if(1&n){const t=Et();b(0,"li",37)(1,"div",38)(2,"input",39),ae("ngModelChange",function(i){return Ee(we(t).$implicit.selected=i)}),T(),b(3,"a",40),ae("click",function(){const s=we(t).$implicit;return Ee(re().openTaskDetailDialog(s))}),b(4,"div",41),x(5),T(),b(6,"div",42)(7,"span",43),x(8),T(),b(9,"span",44),x(10),T(),b(11,"span",45),x(12),T(),b(13,"span",46),x(14),Xt(15,"date"),T(),b(16,"span",47),x(17),Xt(18,"date"),T(),b(19,"span",48),x(20),T(),kn(21,"span",49),T()()(),b(22,"ul",50),xe(23,Cfe,18,16,"li",51),T()()}if(2&n){const t=e.$implicit,r=re();H(2),Y("ngModel",t.selected),H(3),gt(t.title),H(3),gt(r.getProjectName(t.projectId||"")),H(2),gt(t.status),H(1),Y("ngClass",t.priority),H(1),gt(r.getPriorityLabel(t.priority)),H(2),gt(or(15,12,t.startDateTime,"short")),H(3),gt(or(18,15,t.endDateTime,"short")),H(3),gt(t.tag),H(1),Ks("background-color",t.tagColor),H(2),Y("ngForOf",t.subtasks)}}let Dfe=(()=>{class n{constructor(t,r,i){this.taskService=t,this.projectService=r,this.dialog=i,this.tasks$=null,this.projects$=null,this.tasks=[],this.projects=[],this.tags=[],this.selectedTag="",this.selectedPriority="",this.selectedStatus="\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9",this.searchText="",this.sortOrder="startDateAsc"}ngOnInit(){this.tasks$=this.taskService.getTasks(),this.projects$=this.projectService.getProjects(),this.tasks$?.subscribe(t=>{t&&(this.tasks=t,this.tags=this.getTags())}),this.projects$?.subscribe(t=>{t&&(this.projects=t)})}filteredTasks(){const t=this.searchText.toLowerCase();return this.tasks.filter(r=>("\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"===this.selectedStatus||"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"===this.selectedStatus&&("\u672a\u7740\u624b"===r.status||"\u9032\u884c\u4e2d"===r.status)||this.selectedStatus===r.status)&&(r.title.toLowerCase().includes(t)||r.tag.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))&&(""===this.selectedTag||r.tag===this.selectedTag)&&(""===this.selectedPriority||r.priority===this.selectedPriority)).sort((r,i)=>this.compareTasks(r,i))}sortTasks(t){t&&(this.sortOrder=t),this.tasks.sort((r,i)=>this.compareTasks(r,i))}compareTasks(t,r){const i={high:1,medium:2,low:3,"":4};switch(this.sortOrder){case"startDateAsc":return new Date(t.startDateTime).getTime()-new Date(r.startDateTime).getTime();case"startDateDesc":return new Date(r.startDateTime).getTime()-new Date(t.startDateTime).getTime();case"endDateAsc":return new Date(t.endDateTime).getTime()-new Date(r.endDateTime).getTime();case"endDateDesc":return new Date(r.endDateTime).getTime()-new Date(t.endDateTime).getTime();case"priority":return t.priority!==r.priority?i[t.priority]-i[r.priority]:new Date(t.endDateTime).getTime()-new Date(r.endDateTime).getTime();default:return 0}}drop(t){sz(this.tasks,t.previousIndex,t.currentIndex),this.saveTasks()}getTags(){const t=this.tasks.map(r=>r.tag);return Array.from(new Set(t)).filter(r=>""!==r)}deleteSelectedTasks(){this.tasks=this.tasks.filter(t=>t.selected?(this.taskService.deleteTask(t),!1):(t.subtasks=t.subtasks.filter(r=>!r.selected),!0)),this.saveTasks()}getPriorityLabel(t){switch(t){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return t}}getProjectName(t){const r=this.projects.find(i=>i.id===t);return r?r.name:""}openAddTaskDialog(){this.dialog.open(hk,{width:"400px"}).afterClosed().subscribe(r=>{r&&(this.tasks$=this.taskService.getTasks(),this.tasks$?.subscribe(i=>{i&&(this.tasks=i)}))})}openAddProjectDialog(){this.dialog.open(W$,{width:"600px"}).afterClosed().subscribe(r=>{r&&(this.projects$=this.projectService.getProjects(),this.projects$?.subscribe(i=>{i&&(this.projects=i)}))})}openTaskDetailDialog(t){this.dialog.closeAll(),this.dialog.open(F_,{width:"600px",data:{task:t}}).afterClosed().subscribe(i=>{i&&(this.tasks=this.tasks.map(s=>s.id===i.id?i:s),this.saveTasks())})}openSubtaskDetailDialog(t){this.dialog.closeAll(),this.dialog.open(wfe,{width:"400px",data:{subtask:t}}).afterClosed().subscribe(i=>{i&&this.saveTasks()})}saveTasks(){console.log("Tasks saved")}static#e=this.\u0275fac=function(r){return new(r||n)(U(Kf),U(Zf),U(D_))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-task-list"]],standalone:!0,features:[Ri],decls:85,vars:7,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"task-filters"],[1,"filter-group"],["for","searchText"],["type","text","id","searchText","placeholder","\u30bf\u30b9\u30af\u3092\u691c\u7d22",1,"search-input",3,"ngModel","ngModelChange"],["for","sortPriority"],["id","sortPriority",1,"filter-btn",3,"click"],["for","sortDate"],["id","sortDate",1,"filter-select",3,"ngModel","ngModelChange","change"],["value","startDateAsc"],["value","startDateDesc"],["value","endDateAsc"],["value","endDateDesc"],["for","tagSelect"],["id","tagSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["for","prioritySelect"],["id","prioritySelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["for","statusSelect"],["id","statusSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-project"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],[1,"subtask-list"],["class","subtask-item",4,"ngFor","ngForOf"],[1,"subtask-item"],[1,"subtask-item-content",3,"click"],["type","checkbox",1,"subtask-checkbox",3,"ngModel","ngModelChange","click"],[1,"subtask-title"],[1,"subtask-status"],[1,"subtask-priority",3,"ngClass"],[1,"subtask-start-date"],[1,"subtask-end-date"],[1,"subtask-tag"],[1,"subtask-tag-color"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1)(2,"button",2),ae("click",function(){return i.openAddTaskDialog()}),x(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),T(),b(4,"button",3),ae("click",function(){return i.openAddProjectDialog()}),x(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),T(),b(6,"button",3),ae("click",function(){return i.deleteSelectedTasks()}),x(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),T()(),b(8,"div",4)(9,"div",5)(10,"label",6),x(11,"\u691c\u7d22:"),T(),b(12,"input",7),ae("ngModelChange",function(o){return i.searchText=o}),T()(),b(13,"div",5)(14,"label",8),x(15,"\u512a\u5148\u5ea6\u3067\u30bd\u30fc\u30c8:"),T(),b(16,"button",9),ae("click",function(){return i.sortTasks("priority")}),x(17,"\u512a\u5148\u5ea6"),T()(),b(18,"div",5)(19,"label",10),x(20,"\u65e5\u6642\u3067\u30bd\u30fc\u30c8:"),T(),b(21,"select",11),ae("ngModelChange",function(o){return i.sortOrder=o})("change",function(){return i.sortTasks()}),b(22,"option",12),x(23,"\u958b\u59cb\u65e5\u6642\u306e\u65e9\u3044\u9806"),T(),b(24,"option",13),x(25,"\u958b\u59cb\u65e5\u6642\u306e\u9045\u3044\u9806"),T(),b(26,"option",14),x(27,"\u7d42\u4e86\u65e5\u6642\u306e\u65e9\u3044\u9806"),T(),b(28,"option",15),x(29,"\u7d42\u4e86\u65e5\u6642\u306e\u9045\u3044\u9806"),T()()(),b(30,"div",5)(31,"label",16),x(32,"\u30bf\u30b0:"),T(),b(33,"select",17),ae("ngModelChange",function(o){return i.selectedTag=o}),b(34,"option",18),x(35,"\u3059\u3079\u3066\u306e\u30bf\u30b0"),T(),xe(36,Efe,2,1,"option",19),T()(),b(37,"div",5)(38,"label",20),x(39,"\u512a\u5148\u5ea6:"),T(),b(40,"select",21),ae("ngModelChange",function(o){return i.selectedPriority=o}),b(41,"option",18),x(42,"\u3059\u3079\u3066\u306e\u512a\u5148\u5ea6"),T(),b(43,"option",22),x(44,"\u4f4e"),T(),b(45,"option",23),x(46,"\u4e2d"),T(),b(47,"option",24),x(48,"\u9ad8"),T()()(),b(49,"div",5)(50,"label",25),x(51,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),T(),b(52,"select",26),ae("ngModelChange",function(o){return i.selectedStatus=o}),b(53,"option",27),x(54,"\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"),T(),b(55,"option",28),x(56,"\u672a\u7740\u624b"),T(),b(57,"option",29),x(58,"\u9032\u884c\u4e2d"),T(),b(59,"option",30),x(60,"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"),T(),b(61,"option",31),x(62,"\u5b8c\u4e86"),T()()()(),b(63,"ul",32)(64,"li",33)(65,"div",34)(66,"span",35),x(67,"\u9078\u629e"),T(),b(68,"span",35),x(69,"\u30bf\u30a4\u30c8\u30eb"),T(),b(70,"span",35),x(71,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),T(),b(72,"span",35),x(73,"\u30b9\u30c6\u30fc\u30bf\u30b9"),T(),b(74,"span",35),x(75,"\u512a\u5148\u5ea6"),T(),b(76,"span",35),x(77,"\u958b\u59cb\u65e5\u6642"),T(),b(78,"span",35),x(79,"\u7d42\u4e86\u65e5\u6642"),T(),b(80,"span",35),x(81,"\u30bf\u30b0"),T(),b(82,"span",35),x(83,"\u30bf\u30b0\u306e\u8272"),T()()(),xe(84,bfe,24,18,"li",36),T()()),2&r&&(H(12),Y("ngModel",i.searchText),H(9),Y("ngModel",i.sortOrder),H(12),Y("ngModel",i.selectedTag),H(3),Y("ngForOf",i.tags),H(4),Y("ngModel",i.selectedPriority),H(12),Y("ngModel",i.selectedStatus),H(32),Y("ngForOf",i.filteredTasks()))},dependencies:[Wr,ps,hi,zw,Vs,g_,m_,Fs,$u,Wu,io,Ls,Hl,mfe],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%], .show-completed[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-due-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%]{font-size:.9em;color:#555}.task-tag[_ngcontent-%COMP%]{display:inline-block;padding:2px 4px;border-radius:3px;background-color:transparent}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:10px 0 0 20px}.subtask-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:5px;padding:10px;display:flex;align-items:center}.subtask-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 15% 15% 15% 15%;width:100%;align-items:center}.subtask-title[_ngcontent-%COMP%], .subtask-status[_ngcontent-%COMP%], .subtask-priority[_ngcontent-%COMP%], .subtask-start-date[_ngcontent-%COMP%], .subtask-end-date[_ngcontent-%COMP%], .subtask-tag[_ngcontent-%COMP%], .subtask-tag-color[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.subtask-title[_ngcontent-%COMP%]{padding-right:10px}.subtask-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-item-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}"]})}return n})();const Tfe=function(){return["/register"]},Ife=function(){return["/reset-password"]};let Sfe=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.email="",this.password="",this.message=""}login(){this.authService.login(this.email,this.password).then(()=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u6210\u529f\u3057\u307e\u3057\u305f",this.router.navigate(["/"])}).catch(t=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(t=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(r){return new(r||n)(U(sa),U(Pi))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-login"]],standalone:!0,features:[Ri],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(r,i){1&r&&(b(0,"div")(1,"h2"),x(2,"\u30ed\u30b0\u30a4\u30f3"),T(),b(3,"form",0),ae("ngSubmit",function(){return i.login()}),b(4,"label",1),x(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),T(),b(6,"input",2),ae("ngModelChange",function(o){return i.email=o}),T(),b(7,"label",3),x(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),T(),b(9,"input",4),ae("ngModelChange",function(o){return i.password=o}),T(),b(10,"button",5),x(11,"\u30ed\u30b0\u30a4\u30f3"),T()(),b(12,"p"),x(13),T(),b(14,"p"),x(15,"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u5834\u5408\u306f\u3001"),b(16,"a",6),x(17,"\u3053\u3061\u3089"),T(),x(18,"\u304b\u3089\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),T(),b(19,"p")(20,"a",6),x(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),T()()()),2&r&&(H(6),Y("ngModel",i.email),H(3),Y("ngModel",i.password),H(4),gt(i.message),H(3),Y("routerLink",jn(5,Tfe)),H(4),Y("routerLink",jn(6,Ife)))},dependencies:[Vs,p_,Fs,io,c_,Gu,Ls,zu,Wr,Hl,pu]})}return n})();const Afe=function(){return["/login"]},Mfe=function(){return["/reset-password"]};let Rfe=(()=>{class n{constructor(t){this.authService=t,this.email="",this.password="",this.message=""}register(){this.authService.register(this.email,this.password).then(()=>{this.message="\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(t=>{this.message="auth/email-already-in-use"===t.code?"\u3059\u3067\u306b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059":"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(t=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(r){return new(r||n)(U(sa))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-register"]],standalone:!0,features:[Ri],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(r,i){1&r&&(b(0,"div")(1,"h2"),x(2,"\u767b\u9332"),T(),b(3,"form",0),ae("ngSubmit",function(){return i.register()}),b(4,"label",1),x(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),T(),b(6,"input",2),ae("ngModelChange",function(o){return i.email=o}),T(),b(7,"label",3),x(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),T(),b(9,"input",4),ae("ngModelChange",function(o){return i.password=o}),T(),b(10,"button",5),x(11,"\u767b\u9332"),T()(),b(12,"p"),x(13),T(),b(14,"p"),x(15,"\u65e2\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u306e\u5834\u5408\u306f\u3001"),b(16,"a",6),x(17,"\u3053\u3061\u3089"),T(),x(18,"\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),T(),b(19,"p")(20,"a",6),x(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),T()()()),2&r&&(H(6),Y("ngModel",i.email),H(3),Y("ngModel",i.password),H(4),gt(i.message),H(3),Y("routerLink",jn(5,Afe)),H(4),Y("routerLink",jn(6,Mfe)))},dependencies:[Vs,p_,Fs,io,c_,Gu,Ls,zu,Wr,Hl,pu]})}return n})();const kfe=function(){return["/login"]};let Pfe=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.email="",this.message=""}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(t=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(r){return new(r||n)(U(sa),U(Pi))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[Ri],decls:16,vars:4,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(r,i){1&r&&(b(0,"div")(1,"h2"),x(2,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a"),T(),b(3,"form",0),ae("ngSubmit",function(){return i.resetPassword()}),b(4,"label",1),x(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),T(),b(6,"input",2),ae("ngModelChange",function(o){return i.email=o}),T(),b(7,"button",3),x(8,"\u518d\u8a2d\u5b9a\u30ea\u30f3\u30af\u3092\u9001\u4fe1"),T()(),b(9,"p"),x(10),T(),b(11,"p"),x(12,"\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u623b\u308b\u5834\u5408\u306f\u3001"),b(13,"a",4),x(14,"\u3053\u3061\u3089"),T(),x(15,"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),T()()),2&r&&(H(6),Y("ngModel",i.email),H(4),gt(i.message),H(3),Y("routerLink",jn(3,kfe)))},dependencies:[Vs,p_,Fs,io,c_,Gu,Ls,zu,Wr,Hl,pu]})}return n})(),xfe=(()=>{class n{constructor(t,r){this.authService=t,this.firestore=r,this.user={},this.profile={displayName:"",bio:"",email:"",company:"",position:"",team:""},this.userId="",this.message=""}ngOnInit(){this.authService.user$.subscribe(t=>{t&&(this.userId=t.uid,this.firestore.collection("users").doc(t.uid).valueChanges().subscribe(r=>{r&&"object"==typeof r?(this.user=t,this.profile={...r,displayName:t.displayName,email:t.email}):(this.user=t,this.profile={displayName:t.displayName,email:t.email,bio:"",company:"",position:"",team:""})}))})}updateProfile(){this.authService.updateProfile(this.profile.displayName,this.profile.bio,this.profile.company,this.profile.position,this.profile.team).then(()=>{this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(t=>{console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t),this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(r){return new(r||n)(U(sa),U(Vu))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["app-profile"]],standalone:!0,features:[Ri],decls:29,vars:8,consts:[[1,"profile-container"],[3,"ngSubmit"],["for","userId"],["type","text","name","userId","disabled","",3,"value"],["for","username"],["type","text","name","username","required","",3,"ngModel","ngModelChange"],["for","email"],["type","email","name","email","disabled","",3,"ngModel","ngModelChange"],["for","bio"],["name","bio",3,"ngModel","ngModelChange"],["for","company"],["type","text","name","company",3,"ngModel","ngModelChange"],["for","position"],["type","text","name","position",3,"ngModel","ngModelChange"],["for","team"],["type","text","name","team",3,"ngModel","ngModelChange"],["type","submit"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"h2"),x(2,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),T(),b(3,"form",1),ae("ngSubmit",function(){return i.updateProfile()}),b(4,"label",2),x(5,"\u30e6\u30fc\u30b6\u30fcID:"),T(),kn(6,"input",3),b(7,"label",4),x(8,"\u30e6\u30fc\u30b6\u30fc\u540d:"),T(),b(9,"input",5),ae("ngModelChange",function(o){return i.profile.displayName=o}),T(),b(10,"label",6),x(11,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),T(),b(12,"input",7),ae("ngModelChange",function(o){return i.profile.email=o}),T(),b(13,"label",8),x(14,"\u81ea\u5df1\u7d39\u4ecb:"),T(),b(15,"textarea",9),ae("ngModelChange",function(o){return i.profile.bio=o}),T(),b(16,"label",10),x(17,"\u4f1a\u793e:"),T(),b(18,"input",11),ae("ngModelChange",function(o){return i.profile.company=o}),T(),b(19,"label",12),x(20,"\u5f79\u8077:"),T(),b(21,"input",13),ae("ngModelChange",function(o){return i.profile.position=o}),T(),b(22,"label",14),x(23,"\u90e8\u7f72\u307e\u305f\u306f\u30c1\u30fc\u30e0:"),T(),b(24,"input",15),ae("ngModelChange",function(o){return i.profile.team=o}),T(),b(25,"button",16),x(26,"\u66f4\u65b0"),T()(),b(27,"p"),x(28),T()()),2&r&&(H(6),Y("value",i.userId),H(3),Y("ngModel",i.profile.displayName),H(3),Y("ngModel",i.profile.email),H(3),Y("ngModel",i.profile.bio),H(3),Y("ngModel",i.profile.company),H(3),Y("ngModel",i.profile.position),H(3),Y("ngModel",i.profile.team),H(4),gt(i.message))},dependencies:[Vs,p_,Fs,io,c_,Gu,Ls,zu,Wr,Hl],styles:[".profile-container[_ngcontent-%COMP%]{width:800px;max-width:100%;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:10px;background-color:#f9f9f9}h2[_ngcontent-%COMP%]{text-align:center;color:#333}form[_ngcontent-%COMP%]{display:block}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px;font-weight:700;color:#555}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{display:block;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#45a049}p[_ngcontent-%COMP%]{margin-top:20px;color:green;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:10px}"]})}return n})(),od=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(){return this.authService.user$.pipe(kr(1),Ne(t=>!!t||(this.router.navigate(["/login"]),!1)))}static#e=this.\u0275fac=function(r){return new(r||n)(Q(sa),Q(Pi))};static#t=this.\u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ofe=[{path:"",redirectTo:"/calendar",pathMatch:"full"},{path:"calendar",component:Lhe,canActivate:[od]},{path:"projects",component:Jhe,canActivate:[od]},{path:"project/:id",component:q$,canActivate:[od]},{path:"tasks",component:Dfe,canActivate:[od]},{path:"task/:id",component:F_,canActivate:[od]},{path:"login",component:Sfe},{path:"register",component:Rfe},{path:"reset-password",component:Pfe},{path:"profile",component:xfe,canActivate:[od]},{path:"user-search",component:pk,canActivate:[od]}];(function tY(n,e){return m7({rootComponent:n,...vL(e)})})(Hre,{providers:[gx(Vse,Vs,Tle,Yle,(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=qt({imports:[Hl.forRoot(Ofe),Hl]})}return n})(),S$.forRoot({provide:id,useFactory:H$}),lJ.initializeApp({apiKey:"AIzaSyBLib--Lb3kRU1UORbEgx76QxXWLr8rFZk",authDomain:"nozuki3rd.firebaseapp.com",projectId:"nozuki3rd",storageBucket:"nozuki3rd.appspot.com",messagingSenderId:"183357457685",appId:"1:183357457685:web:01b4a530cc30b2b310d51c"}),Fre)]}).catch(n=>console.error(n))},106:(ao,Or,vt)=>{vt.d(Or,{Z:()=>Fr});var k=vt(58),lt=vt(537),$e=vt(534),fe=vt(879);class Ct{constructor(ht,bt){this._delegate=ht,this.firebase=bt,(0,$e._addComponent)(ht,new lt.wA("app-compat",()=>this,"PUBLIC")),this.container=ht.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ht){this._delegate.automaticDataCollectionEnabled=ht}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ht=>{this._delegate.checkDestroyed(),ht()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$e.deleteApp)(this._delegate)))}_getService(ht,bt=$e._DEFAULT_ENTRY_NAME){var Lr;this._delegate.checkDestroyed();const Vr=this._delegate.container.getProvider(ht);return!Vr.isInitialized()&&"EXPLICIT"===(null===(Lr=Vr.getComponent())||void 0===Lr?void 0:Lr.instantiationMode)&&Vr.initialize(),Vr.getImmediate({identifier:bt})}_removeServiceInstance(ht,bt=$e._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ht).clearInstance(bt)}_addComponent(ht){(0,$e._addComponent)(this._delegate,ht)}_addOrOverwriteComponent(ht){(0,$e._addOrOverwriteComponent)(this._delegate,ht)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const qn=new k.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ce=function Ot(){const Zt=function Nr(Zt){const ht={},bt={__esModule:!0,initializeApp:function Mn(rt,er={}){const gn=$e.initializeApp(rt,er);if((0,k.r3)(ht,gn.name))return ht[gn.name];const Ie=new Zt(gn,bt);return ht[gn.name]=Ie,Ie},app:Vr,registerVersion:$e.registerVersion,setLogLevel:$e.setLogLevel,onLog:$e.onLog,apps:null,SDK_VERSION:$e.SDK_VERSION,INTERNAL:{registerComponent:function cn(rt){const er=rt.name,gn=er.replace("-compat","");if($e._registerComponent(rt)&&"PUBLIC"===rt.type){const Ie=(Ln=Vr())=>{if("function"!=typeof Ln[gn])throw qn.create("invalid-app-argument",{appName:er});return Ln[gn]()};void 0!==rt.serviceProps&&(0,k.ZB)(Ie,rt.serviceProps),bt[gn]=Ie,Zt.prototype[gn]=function(...Ln){return this._getService.bind(this,er).apply(this,rt.multipleInstances?Ln:[])}}return"PUBLIC"===rt.type?bt[gn]:null},removeApp:function Lr(rt){delete ht[rt]},useAsService:function oi(rt,er){return"serverAuth"===er?null:er},modularAPIs:$e}};function Vr(rt){if(!(0,k.r3)(ht,rt=rt||$e._DEFAULT_ENTRY_NAME))throw qn.create("no-app",{appName:rt});return ht[rt]}return bt.default=bt,Object.defineProperty(bt,"apps",{get:function Kt(){return Object.keys(ht).map(rt=>ht[rt])}}),Vr.App=Zt,bt}(Ct);return Zt.INTERNAL=Object.assign(Object.assign({},Zt.INTERNAL),{createFirebaseNamespace:Ot,extendNamespace:function ht(bt){(0,k.ZB)(Zt,bt)},createSubscribe:k.ne,ErrorFactory:k.LL,deepExtend:k.ZB}),Zt}(),Re=new fe.Yd("@firebase/app-compat");if((0,k.jU)()&&void 0!==self.firebase){Re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Zt=self.firebase.SDK_VERSION;Zt&&Zt.indexOf("LITE")>=0&&Re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fr=Ce;!function Wt(Zt){(0,$e.registerVersion)("@firebase/app-compat","0.2.35",Zt)}()},534:(ao,Or,vt)=>{vt.r(Or),vt.d(Or,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>vi,_DEFAULT_ENTRY_NAME:()=>ws,_addComponent:()=>Cs,_addOrOverwriteComponent:()=>mn,_apps:()=>_i,_clearComponents:()=>yi,_components:()=>hr,_getProvider:()=>fr,_isFirebaseApp:()=>ko,_isFirebaseServerApp:()=>nl,_registerComponent:()=>ns,_removeServiceInstance:()=>Ic,_serverApps:()=>Es,deleteApp:()=>xo,getApp:()=>il,getApps:()=>Sc,initializeApp:()=>Po,initializeServerApp:()=>dd,onLog:()=>K,registerVersion:()=>V,setLogLevel:()=>ge});var k=vt(861),lt=vt(537),$e=vt(879),fe=vt(58);const Ct=(P,ee)=>ee.some(se=>P instanceof se);let Fn,qn;const Ce=new WeakMap,Re=new WeakMap,Ye=new WeakMap,Mt=new WeakMap,Wt=new WeakMap;let ht={get(P,ee,se){if(P instanceof IDBTransaction){if("done"===ee)return Re.get(P);if("objectStoreNames"===ee)return P.objectStoreNames||Ye.get(P);if("store"===ee)return se.objectStoreNames[1]?void 0:se.objectStore(se.objectStoreNames[0])}return Mn(P[ee])},set:(P,ee,se)=>(P[ee]=se,!0),has:(P,ee)=>P instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in P};function Vr(P){return"function"==typeof P?function Lr(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ot(){return qn||(qn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...ee){return P.apply(Kt(this),ee),Mn(Ce.get(this))}:function(...ee){return Mn(P.apply(Kt(this),ee))}:function(ee,...se){const Se=P.call(Kt(this),ee,...se);return Ye.set(Se,ee.sort?ee.sort():[ee]),Mn(Se)}}(P):(P instanceof IDBTransaction&&function Zt(P){if(Re.has(P))return;const ee=new Promise((se,Se)=>{const ft=()=>{P.removeEventListener("complete",mt),P.removeEventListener("error",St),P.removeEventListener("abort",St)},mt=()=>{se(),ft()},St=()=>{Se(P.error||new DOMException("AbortError","AbortError")),ft()};P.addEventListener("complete",mt),P.addEventListener("error",St),P.addEventListener("abort",St)});Re.set(P,ee)}(P),Ct(P,function Nr(){return Fn||(Fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,ht):P)}function Mn(P){if(P instanceof IDBRequest)return function Fr(P){const ee=new Promise((se,Se)=>{const ft=()=>{P.removeEventListener("success",mt),P.removeEventListener("error",St)},mt=()=>{se(Mn(P.result)),ft()},St=()=>{Se(P.error),ft()};P.addEventListener("success",mt),P.addEventListener("error",St)});return ee.then(se=>{se instanceof IDBCursor&&Ce.set(se,P)}).catch(()=>{}),Wt.set(ee,P),ee}(P);if(Mt.has(P))return Mt.get(P);const ee=Vr(P);return ee!==P&&(Mt.set(P,ee),Wt.set(ee,P)),ee}const Kt=P=>Wt.get(P),rt=["get","getKey","getAll","getAllKeys","count"],er=["put","add","delete","clear"],gn=new Map;function Ie(P,ee){if(!(P instanceof IDBDatabase)||ee in P||"string"!=typeof ee)return;if(gn.get(ee))return gn.get(ee);const se=ee.replace(/FromIndex$/,""),Se=ee!==se,ft=er.includes(se);if(!(se in(Se?IDBIndex:IDBObjectStore).prototype)||!ft&&!rt.includes(se))return;const mt=function(){var St=(0,k.Z)(function*(_n,...Rt){const rs=this.transaction(_n,ft?"readwrite":"readonly");let pa=rs.store;return Se&&(pa=pa.index(Rt.shift())),(yield Promise.all([pa[se](...Rt),ft&&rs.done]))[0]});return function(Rt){return St.apply(this,arguments)}}();return gn.set(ee,mt),mt}!function bt(P){ht=P(ht)}(P=>({...P,get:(ee,se,Se)=>Ie(ee,se)||P.get(ee,se,Se),has:(ee,se)=>!!Ie(ee,se)||P.has(ee,se)}));class Ln{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(se=>{if(function Tn(P){const ee=P.getComponent();return"VERSION"===ee?.type}(se)){const Se=se.getImmediate();return`${Se.library}/${Se.version}`}return null}).filter(se=>se).join(" ")}}const ji="@firebase/app",es="0.10.5",dt=new $e.Yd("@firebase/app"),ws="[DEFAULT]",Tc={[ji]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},_i=new Map,Es=new Map,hr=new Map;function Cs(P,ee){try{P.container.addComponent(ee)}catch(se){dt.debug(`Component ${ee.name} failed to register with FirebaseApp ${P.name}`,se)}}function mn(P,ee){P.container.addOrOverwriteComponent(ee)}function ns(P){const ee=P.name;if(hr.has(ee))return dt.debug(`There were multiple attempts to register component ${ee}.`),!1;hr.set(ee,P);for(const se of _i.values())Cs(se,P);for(const se of Es.values())Cs(se,P);return!0}function fr(P,ee){const se=P.container.getProvider("heartbeat").getImmediate({optional:!0});return se&&se.triggerHeartbeat(),P.container.getProvider(ee)}function Ic(P,ee,se=ws){fr(P,ee).clearInstance(se)}function ko(P){return void 0!==P.options}function nl(P){return void 0!==P.settings}function yi(){hr.clear()}const pr=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rl{constructor(ee,se,Se){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},se),this._name=se.name,this._automaticDataCollectionEnabled=se.automaticDataCollectionEnabled,this._container=Se,this.container.addComponent(new lt.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}class Hi extends rl{constructor(ee,se,Se,ft){const mt=void 0!==se.automaticDataCollectionEnabled&&se.automaticDataCollectionEnabled,St={name:Se,automaticDataCollectionEnabled:mt};super(void 0!==ee.apiKey?ee:ee.options,St,ft),this._serverConfig=Object.assign({automaticDataCollectionEnabled:mt},se),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,se.releaseOnDeref=void 0,V(ji,es,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(ee){this.isDeleted||(this._refCount++,void 0!==ee&&this._finalizationRegistry.register(ee,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){xo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw pr.create("server-app-deleted")}}const vi="10.12.2";function Po(P,ee={}){let se=P;"object"!=typeof ee&&(ee={name:ee});const Se=Object.assign({name:ws,automaticDataCollectionEnabled:!1},ee),ft=Se.name;if("string"!=typeof ft||!ft)throw pr.create("bad-app-name",{appName:String(ft)});if(se||(se=(0,fe.aH)()),!se)throw pr.create("no-options");const mt=_i.get(ft);if(mt){if((0,fe.vZ)(se,mt.options)&&(0,fe.vZ)(Se,mt.config))return mt;throw pr.create("duplicate-app",{appName:ft})}const St=new lt.H0(ft);for(const Rt of hr.values())St.addComponent(Rt);const _n=new rl(se,Se,St);return _i.set(ft,_n),_n}function dd(P,ee){if((0,fe.jU)())throw pr.create("invalid-server-app-environment");let se;void 0===ee.automaticDataCollectionEnabled&&(ee.automaticDataCollectionEnabled=!1),se=ko(P)?P.options:P;const Se=Object.assign(Object.assign({},ee),se);if(void 0!==Se.releaseOnDeref&&delete Se.releaseOnDeref,void 0!==ee.releaseOnDeref&&typeof FinalizationRegistry>"u")throw pr.create("finalization-registry-not-supported",{});const mt=""+(rs=JSON.stringify(Se),[...rs].reduce((pa,ty)=>Math.imul(31,pa)+ty.charCodeAt(0)|0,0)),St=Es.get(mt);var rs;if(St)return St.incRefCount(ee.releaseOnDeref),St;const _n=new lt.H0(mt);for(const rs of hr.values())_n.addComponent(rs);const Rt=new Hi(se,ee,mt,_n);return Es.set(mt,Rt),Rt}function il(P=ws){const ee=_i.get(P);if(!ee&&P===ws&&(0,fe.aH)())return Po();if(!ee)throw pr.create("no-app",{appName:P});return ee}function Sc(){return Array.from(_i.values())}function xo(P){return G.apply(this,arguments)}function G(){return(G=(0,k.Z)(function*(P){let ee=!1;const se=P.name;_i.has(se)?(ee=!0,_i.delete(se)):Es.has(se)&&P.decRefCount()<=0&&(Es.delete(se),ee=!0),ee&&(yield Promise.all(P.container.getProviders().map(Se=>Se.delete())),P.isDeleted=!0)})).apply(this,arguments)}function V(P,ee,se){var Se;let ft=null!==(Se=Tc[P])&&void 0!==Se?Se:P;se&&(ft+=`-${se}`);const mt=ft.match(/\s|\//),St=ee.match(/\s|\//);if(mt||St){const _n=[`Unable to register library "${ft}" with version "${ee}":`];return mt&&_n.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),mt&&St&&_n.push("and"),St&&_n.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void dt.warn(_n.join(" "))}ns(new lt.wA(`${ft}-version`,()=>({library:ft,version:ee}),"VERSION"))}function K(P,ee){if(null!==P&&"function"!=typeof P)throw pr.create("invalid-log-argument");(0,$e.Am)(P,ee)}function ge(P){(0,$e.Ub)(P)}const ne="firebase-heartbeat-database",me=1,Ke="firebase-heartbeat-store";let en=null;function ct(){return en||(en=function cn(P,ee,{blocked:se,upgrade:Se,blocking:ft,terminated:mt}={}){const St=indexedDB.open(P,ee),_n=Mn(St);return Se&&St.addEventListener("upgradeneeded",Rt=>{Se(Mn(St.result),Rt.oldVersion,Rt.newVersion,Mn(St.transaction),Rt)}),se&&St.addEventListener("blocked",Rt=>se(Rt.oldVersion,Rt.newVersion,Rt)),_n.then(Rt=>{mt&&Rt.addEventListener("close",()=>mt()),ft&&Rt.addEventListener("versionchange",rs=>ft(rs.oldVersion,rs.newVersion,rs))}).catch(()=>{}),_n}(ne,me,{upgrade:(P,ee)=>{if(0===ee)try{P.createObjectStore(Ke)}catch(se){console.warn(se)}}}).catch(P=>{throw pr.create("idb-open",{originalErrorMessage:P.message})})),en}function mr(){return(mr=(0,k.Z)(function*(P){try{const se=(yield ct()).transaction(Ke),Se=yield se.objectStore(Ke).get(un(P));return yield se.done,Se}catch(ee){if(ee instanceof fe.ZR)dt.warn(ee.message);else{const se=pr.create("idb-get",{originalErrorMessage:ee?.message});dt.warn(se.message)}}})).apply(this,arguments)}function qe(P,ee){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,k.Z)(function*(P,ee){try{const Se=(yield ct()).transaction(Ke,"readwrite");yield Se.objectStore(Ke).put(ee,un(P)),yield Se.done}catch(se){if(se instanceof fe.ZR)dt.warn(se.message);else{const Se=pr.create("idb-set",{originalErrorMessage:se?.message});dt.warn(Se.message)}}})).apply(this,arguments)}function un(P){return`${P.name}!${P.options.appId}`}class nn{constructor(ee){this.container=ee,this._heartbeatsCache=null;const se=this.container.getProvider("app").getImmediate();this._storage=new sl(se),this._heartbeatsCachePromise=this._storage.read().then(Se=>(this._heartbeatsCache=Se,Se))}triggerHeartbeat(){var ee=this;return(0,k.Z)(function*(){var se,Se;const mt=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=ot();if((null!=(null===(se=ee._heartbeatsCache)||void 0===se?void 0:se.heartbeats)||(ee._heartbeatsCache=yield ee._heartbeatsCachePromise,null!=(null===(Se=ee._heartbeatsCache)||void 0===Se?void 0:Se.heartbeats)))&&ee._heartbeatsCache.lastSentHeartbeatDate!==St&&!ee._heartbeatsCache.heartbeats.some(_n=>_n.date===St))return ee._heartbeatsCache.heartbeats.push({date:St,agent:mt}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(_n=>{const Rt=new Date(_n.date).valueOf();return Date.now()-Rt<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,k.Z)(function*(){var se;if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null==(null===(se=ee._heartbeatsCache)||void 0===se?void 0:se.heartbeats)||0===ee._heartbeatsCache.heartbeats.length)return"";const Se=ot(),{heartbeatsToSend:ft,unsentEntries:mt}=function lo(P,ee=1024){const se=[];let Se=P.slice();for(const ft of P){const mt=se.find(St=>St.agent===ft.agent);if(mt){if(mt.dates.push(ft.date),hd(se)>ee){mt.dates.pop();break}}else if(se.push({agent:ft.agent,dates:[ft.date]}),hd(se)>ee){se.pop();break}Se=Se.slice(1)}return{heartbeatsToSend:se,unsentEntries:Se}}(ee._heartbeatsCache.heartbeats),St=(0,fe.L)(JSON.stringify({version:2,heartbeats:ft}));return ee._heartbeatsCache.lastSentHeartbeatDate=Se,mt.length>0?(ee._heartbeatsCache.heartbeats=mt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),St})()}}function ot(){return(new Date).toISOString().substring(0,10)}class sl{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,k.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,k.Z)(function*(){if(yield ee._canUseIndexedDBPromise){const Se=yield function gr(P){return mr.apply(this,arguments)}(ee.app);return Se?.heartbeats?Se:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ee){var se=this;return(0,k.Z)(function*(){var Se;if(yield se._canUseIndexedDBPromise){const mt=yield se.read();return qe(se.app,{lastSentHeartbeatDate:null!==(Se=ee.lastSentHeartbeatDate)&&void 0!==Se?Se:mt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var se=this;return(0,k.Z)(function*(){var Se;if(yield se._canUseIndexedDBPromise){const mt=yield se.read();return qe(se.app,{lastSentHeartbeatDate:null!==(Se=ee.lastSentHeartbeatDate)&&void 0!==Se?Se:mt.lastSentHeartbeatDate,heartbeats:[...mt.heartbeats,...ee.heartbeats]})}})()}}function hd(P){return(0,fe.L)(JSON.stringify({version:2,heartbeats:P})).length}!function co(P){ns(new lt.wA("platform-logger",ee=>new Ln(ee),"PRIVATE")),ns(new lt.wA("heartbeat",ee=>new nn(ee),"PRIVATE")),V(ji,es,P),V(ji,es,"esm2017"),V("fire-js","")}("")},537:(ao,Or,vt)=>{vt.d(Or,{H0:()=>Nr,wA:()=>$e});var k=vt(861),lt=vt(58);class $e{constructor(Ce,Re,Ye){this.name=Ce,this.instanceFactory=Re,this.type=Ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ce){return this.instantiationMode=Ce,this}setMultipleInstances(Ce){return this.multipleInstances=Ce,this}setServiceProps(Ce){return this.serviceProps=Ce,this}setInstanceCreatedCallback(Ce){return this.onInstanceCreated=Ce,this}}const fe="[DEFAULT]";class Ct{constructor(Ce,Re){this.name=Ce,this.container=Re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ce){const Re=this.normalizeInstanceIdentifier(Ce);if(!this.instancesDeferred.has(Re)){const Ye=new lt.BH;if(this.instancesDeferred.set(Re,Ye),this.isInitialized(Re)||this.shouldAutoInitialize())try{const Mt=this.getOrInitializeService({instanceIdentifier:Re});Mt&&Ye.resolve(Mt)}catch{}}return this.instancesDeferred.get(Re).promise}getImmediate(Ce){var Re;const Ye=this.normalizeInstanceIdentifier(Ce?.identifier),Mt=null!==(Re=Ce?.optional)&&void 0!==Re&&Re;if(!this.isInitialized(Ye)&&!this.shouldAutoInitialize()){if(Mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ye})}catch(Wt){if(Mt)return null;throw Wt}}getComponent(){return this.component}setComponent(Ce){if(Ce.name!==this.name)throw Error(`Mismatching Component ${Ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ce,this.shouldAutoInitialize()){if(function qn(Ot){return"EAGER"===Ot.instantiationMode}(Ce))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[Re,Ye]of this.instancesDeferred.entries()){const Mt=this.normalizeInstanceIdentifier(Re);try{const Wt=this.getOrInitializeService({instanceIdentifier:Mt});Ye.resolve(Wt)}catch{}}}}clearInstance(Ce=fe){this.instancesDeferred.delete(Ce),this.instancesOptions.delete(Ce),this.instances.delete(Ce)}delete(){var Ce=this;return(0,k.Z)(function*(){const Re=Array.from(Ce.instances.values());yield Promise.all([...Re.filter(Ye=>"INTERNAL"in Ye).map(Ye=>Ye.INTERNAL.delete()),...Re.filter(Ye=>"_delete"in Ye).map(Ye=>Ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ce=fe){return this.instances.has(Ce)}getOptions(Ce=fe){return this.instancesOptions.get(Ce)||{}}initialize(Ce={}){const{options:Re={}}=Ce,Ye=this.normalizeInstanceIdentifier(Ce.instanceIdentifier);if(this.isInitialized(Ye))throw Error(`${this.name}(${Ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Mt=this.getOrInitializeService({instanceIdentifier:Ye,options:Re});for(const[Wt,Fr]of this.instancesDeferred.entries())Ye===this.normalizeInstanceIdentifier(Wt)&&Fr.resolve(Mt);return Mt}onInit(Ce,Re){var Ye;const Mt=this.normalizeInstanceIdentifier(Re),Wt=null!==(Ye=this.onInitCallbacks.get(Mt))&&void 0!==Ye?Ye:new Set;Wt.add(Ce),this.onInitCallbacks.set(Mt,Wt);const Fr=this.instances.get(Mt);return Fr&&Ce(Fr,Mt),()=>{Wt.delete(Ce)}}invokeOnInitCallbacks(Ce,Re){const Ye=this.onInitCallbacks.get(Re);if(Ye)for(const Mt of Ye)try{Mt(Ce,Re)}catch{}}getOrInitializeService({instanceIdentifier:Ce,options:Re={}}){let Ye=this.instances.get(Ce);if(!Ye&&this.component&&(Ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Ot=Ce,Ot===fe?void 0:Ot),options:Re}),this.instances.set(Ce,Ye),this.instancesOptions.set(Ce,Re),this.invokeOnInitCallbacks(Ye,Ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ce,Ye)}catch{}var Ot;return Ye||null}normalizeInstanceIdentifier(Ce=fe){return this.component?this.component.multipleInstances?Ce:fe:Ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Nr{constructor(Ce){this.name=Ce,this.providers=new Map}addComponent(Ce){const Re=this.getProvider(Ce.name);if(Re.isComponentSet())throw new Error(`Component ${Ce.name} has already been registered with ${this.name}`);Re.setComponent(Ce)}addOrOverwriteComponent(Ce){this.getProvider(Ce.name).isComponentSet()&&this.providers.delete(Ce.name),this.addComponent(Ce)}getProvider(Ce){if(this.providers.has(Ce))return this.providers.get(Ce);const Re=new Ct(Ce,this);return this.providers.set(Ce,Re),Re}getProviders(){return Array.from(this.providers.values())}}},879:(ao,Or,vt)=>{vt.d(Or,{Am:()=>Ot,Ub:()=>Nr,Yd:()=>qn,in:()=>lt});const k=[];var lt=function(Ce){return Ce[Ce.DEBUG=0]="DEBUG",Ce[Ce.VERBOSE=1]="VERBOSE",Ce[Ce.INFO=2]="INFO",Ce[Ce.WARN=3]="WARN",Ce[Ce.ERROR=4]="ERROR",Ce[Ce.SILENT=5]="SILENT",Ce}(lt||{});const $e={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},fe=lt.INFO,Ct={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},Fn=(Ce,Re,...Ye)=>{if(Re<Ce.logLevel)return;const Mt=(new Date).toISOString(),Wt=Ct[Re];if(!Wt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Re})`);console[Wt](`[${Mt}]  ${Ce.name}:`,...Ye)};class qn{constructor(Re){this.name=Re,this._logLevel=fe,this._logHandler=Fn,this._userLogHandler=null,k.push(this)}get logLevel(){return this._logLevel}set logLevel(Re){if(!(Re in lt))throw new TypeError(`Invalid value "${Re}" assigned to \`logLevel\``);this._logLevel=Re}setLogLevel(Re){this._logLevel="string"==typeof Re?$e[Re]:Re}get logHandler(){return this._logHandler}set logHandler(Re){if("function"!=typeof Re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Re}get userLogHandler(){return this._userLogHandler}set userLogHandler(Re){this._userLogHandler=Re}debug(...Re){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...Re),this._logHandler(this,lt.DEBUG,...Re)}log(...Re){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...Re),this._logHandler(this,lt.VERBOSE,...Re)}info(...Re){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...Re),this._logHandler(this,lt.INFO,...Re)}warn(...Re){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...Re),this._logHandler(this,lt.WARN,...Re)}error(...Re){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...Re),this._logHandler(this,lt.ERROR,...Re)}}function Nr(Ce){k.forEach(Re=>{Re.setLogLevel(Ce)})}function Ot(Ce,Re){for(const Ye of k){let Mt=null;Re&&Re.level&&(Mt=$e[Re.level]),Ye.userLogHandler=null===Ce?null:(Wt,Fr,...Zt)=>{const ht=Zt.map(bt=>{if(null==bt)return null;if("string"==typeof bt)return bt;if("number"==typeof bt||"boolean"==typeof bt)return bt.toString();if(bt instanceof Error)return bt.message;try{return JSON.stringify(bt)}catch{return null}}).filter(bt=>bt).join(" ");Fr>=(Mt??Wt.logLevel)&&Ce({level:lt[Fr].toLowerCase(),message:ht,args:Zt,type:Wt.name})}}}},985:(ao,Or,vt)=>{vt.r(Or);var k=vt(861),lt=vt(106),$e=vt(534),fe=vt(58),Ct=vt(879),Fn=vt(582),qn=vt(537);const Ot={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Fr=function Mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Zt=function Wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new fe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Lr=new Ct.Yd("@firebase/auth");function Mn(p,...u){Lr.logLevel<=Ct.in.ERROR&&Lr.error(`Auth (${$e.SDK_VERSION}): ${p}`,...u)}function Kt(p,...u){throw gn(p,...u)}function cn(p,...u){return gn(p,...u)}function oi(p,u,d){const g=Object.assign(Object.assign({},Zt()),{[u]:d});return new fe.LL("auth","Firebase",g).create(u,{appName:p.name})}function rt(p){return oi(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function er(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Kt(p,"argument-error"),oi(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gn(p,...u){if("string"!=typeof p){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return ht.create(p,...u)}function Ie(p,u,...d){if(!p)throw gn(u,...d)}function Ln(p){const u="INTERNAL ASSERTION FAILED: "+p;throw Mn(u),new Error(u)}function Tn(p,u){p||Ln(u)}function ji(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function es(){return"http:"===dt()||"https:"===dt()}function dt(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class le{constructor(u,d){this.shortDelay=u,this.longDelay=d,Tn(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,fe.uI)()||(0,fe.b$)()}get(){return function ua(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(es()||(0,fe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function de(p,u){Tn(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class X{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Oe=new le(3e4,6e4);function ue(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function ke(p,u,d,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,k.Z)(function*(p,u,d,g,w={}){return Ne(p,w,(0,k.Z)(function*(){let D={},B={};g&&("GET"===u?B=g:D={body:JSON.stringify(g)});const J=(0,fe.xO)(Object.assign({key:p.config.apiKey},B)).slice(1),_e=yield p._getAdditionalHeaders();return _e["Content-Type"]="application/json",p.languageCode&&(_e["X-Firebase-Locale"]=p.languageCode),X.fetch()(ts(p,p.config.apiHost,d,J),Object.assign({method:u,headers:_e,referrerPolicy:"no-referrer"},D))}))})).apply(this,arguments)}function Ne(p,u,d){return nt.apply(this,arguments)}function nt(){return(nt=(0,k.Z)(function*(p,u,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},ve),u);try{const w=new dr(p),D=yield Promise.race([d(),w.promise]);w.clearNetworkTimeout();const B=yield D.json();if("needConfirmation"in B)throw tr(p,"account-exists-with-different-credential",B);if(D.ok&&!("errorMessage"in B))return B;{const J=D.ok?B.errorMessage:B.error.message,[_e,Fe]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_e)throw tr(p,"credential-already-in-use",B);if("EMAIL_EXISTS"===_e)throw tr(p,"email-already-in-use",B);if("USER_DISABLED"===_e)throw tr(p,"user-disabled",B);const ze=g[_e]||_e.toLowerCase().replace(/[_\s]+/g,"-");if(Fe)throw oi(p,ze,Fe);Kt(p,ze)}}catch(w){if(w instanceof fe.ZR)throw w;Kt(p,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function Dt(p,u,d,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,k.Z)(function*(p,u,d,g,w={}){const D=yield ke(p,u,d,g,w);return"mfaPendingCredential"in D&&Kt(p,"multi-factor-auth-required",{_serverResponse:D}),D})).apply(this,arguments)}function ts(p,u,d,g){const w=`${u}${d}?${g}`;return p.config.emulator?de(p.config,w):`${p.config.apiScheme}://${w}`}function Jt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dr{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(cn(this.auth,"network-request-failed")),Oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tr(p,u,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const w=cn(p,u,g);return w.customData._tokenResponse=d,w}function Yr(p){return void 0!==p&&void 0!==p.getResponse}function ai(p){return void 0!==p&&void 0!==p.enterprise}class tl{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return Jt(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Gn(){return(Gn=(0,k.Z)(function*(p){return(yield ke(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bc(p,u){return ha.apply(this,arguments)}function ha(){return(ha=(0,k.Z)(function*(p,u){return ke(p,"GET","/v2/recaptchaConfig",ue(p,u))})).apply(this,arguments)}function ws(){return(ws=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function _i(){return(_i=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Es(p,u){return hr.apply(this,arguments)}function hr(){return(hr=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Cs(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function fr(){return(fr=(0,k.Z)(function*(p,u=!1){const d=(0,fe.m9)(p),g=yield d.getIdToken(u),w=ko(g);Ie(w&&w.exp&&w.auth_time&&w.iat,d.auth,"internal-error");const D="object"==typeof w.firebase?w.firebase:void 0,B=D?.sign_in_provider;return{claims:w,token:g,authTime:Cs(Ic(w.auth_time)),issuedAtTime:Cs(Ic(w.iat)),expirationTime:Cs(Ic(w.exp)),signInProvider:B||null,signInSecondFactor:D?.sign_in_second_factor||null}})).apply(this,arguments)}function Ic(p){return 1e3*Number(p)}function ko(p){const[u,d,g]=p.split(".");if(void 0===u||void 0===d||void 0===g)return Mn("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,fe.tV)(d);return w?JSON.parse(w):(Mn("Failed to decode base64 JWT payload"),null)}catch(w){return Mn("Caught error parsing JWT payload as JSON",w?.toString()),null}}function nl(p){const u=ko(p);return Ie(u,"internal-error"),Ie(typeof u.exp<"u","internal-error"),Ie(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function yi(p,u){return fa.apply(this,arguments)}function fa(){return(fa=(0,k.Z)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof fe.ZR&&function pr({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class rl{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const w=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,k.Z)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,k.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class Hi{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cs(this.lastLoginAt),this.creationTime=Cs(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vi(p){return Po.apply(this,arguments)}function Po(){return(Po=(0,k.Z)(function*(p){var u;const d=p.auth,g=yield p.getIdToken(),w=yield yi(p,Es(d,{idToken:g}));Ie(w?.users.length,d,"internal-error");const D=w.users[0];p._notifyReloadListener(D);const B=null!==(u=D.providerUserInfo)&&void 0!==u&&u.length?xo(D.providerUserInfo):[],J=function Sc(p,u){return[...p.filter(g=>!u.some(w=>w.providerId===g.providerId)),...u]}(p.providerData,B),ze=!!p.isAnonymous&&!(p.email&&D.passwordHash||J?.length),We={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:J,metadata:new Hi(D.createdAt,D.lastLoginAt),isAnonymous:ze};Object.assign(p,We)})).apply(this,arguments)}function il(){return(il=(0,k.Z)(function*(p){const u=(0,fe.m9)(p);yield vi(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function xo(p){return p.map(u=>{var{providerId:d}=u,g=(0,Fn._T)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function V(){return(V=(0,k.Z)(function*(p,u){const d=yield Ne(p,{},(0,k.Z)(function*(){const g=(0,fe.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:w,apiKey:D}=p.config,B=ts(p,w,"/v1/token",`key=${D}`),J=yield p._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",X.fetch()(B,{method:"POST",headers:J,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function ge(){return(ge=(0,k.Z)(function*(p,u){return ke(p,"POST","/v2/accounts:revokeToken",ue(p,u))})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){Ie(u.idToken,"internal-error"),Ie(typeof u.idToken<"u","internal-error"),Ie(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):nl(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){Ie(0!==u.length,"internal-error");const d=nl(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var g=this;return(0,k.Z)(function*(){return d||!g.accessToken||g.isExpired?(Ie(g.refreshToken,u,"user-token-expired"),g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,k.Z)(function*(){const{accessToken:w,refreshToken:D,expiresIn:B}=yield function G(p,u){return V.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(w,D,Number(B))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:w,expirationTime:D}=d,B=new ne;return g&&(Ie("string"==typeof g,"internal-error",{appName:u}),B.refreshToken=g),w&&(Ie("string"==typeof w,"internal-error",{appName:u}),B.accessToken=w),D&&(Ie("number"==typeof D,"internal-error",{appName:u}),B.expirationTime=D),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return Ln("not implemented")}}function me(p,u){Ie("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class Ke{constructor(u){var{uid:d,auth:g,stsTokenManager:w}=u,D=(0,Fn._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=D.displayName||null,this.email=D.email||null,this.emailVerified=D.emailVerified||!1,this.phoneNumber=D.phoneNumber||null,this.photoURL=D.photoURL||null,this.isAnonymous=D.isAnonymous||!1,this.tenantId=D.tenantId||null,this.providerData=D.providerData?[...D.providerData]:[],this.metadata=new Hi(D.createdAt||void 0,D.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,k.Z)(function*(){const g=yield yi(d,d.stsTokenManager.getToken(d.auth,u));return Ie(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function ns(p){return fr.apply(this,arguments)}(this,u)}reload(){return function dd(p){return il.apply(this,arguments)}(this)}_assign(u){this!==u&&(Ie(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new Ke(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,k.Z)(function*(){let w=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),w=!0),d&&(yield vi(g)),yield g.auth._persistUserIfCurrent(g),w&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,k.Z)(function*(){if((0,$e._isFirebaseServerApp)(u.auth.app))return Promise.reject(rt(u.auth));const d=yield u.getIdToken();return yield yi(u,function Dc(p,u){return ws.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,w,D,B,J,_e,Fe,ze;const We=null!==(g=d.displayName)&&void 0!==g?g:void 0,En=null!==(w=d.email)&&void 0!==w?w:void 0,cs=null!==(D=d.phoneNumber)&&void 0!==D?D:void 0,Xd=null!==(B=d.photoURL)&&void 0!==B?B:void 0,sg=null!==(J=d.tenantId)&&void 0!==J?J:void 0,Rv=null!==(_e=d._redirectEventId)&&void 0!==_e?_e:void 0,og=null!==(Fe=d.createdAt)&&void 0!==Fe?Fe:void 0,KD=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:ag,emailVerified:kv,isAnonymous:Jd,providerData:Pv,stsTokenManager:YD}=d;Ie(ag&&YD,u,"internal-error");const lg=ne.fromJSON(this.name,YD);Ie("string"==typeof ag,u,"internal-error"),me(We,u.name),me(En,u.name),Ie("boolean"==typeof kv,u,"internal-error"),Ie("boolean"==typeof Jd,u,"internal-error"),me(cs,u.name),me(Xd,u.name),me(sg,u.name),me(Rv,u.name),me(og,u.name),me(KD,u.name);const xv=new Ke({uid:ag,auth:u,email:En,emailVerified:kv,displayName:We,isAnonymous:Jd,photoURL:Xd,phoneNumber:cs,tenantId:sg,stsTokenManager:lg,createdAt:og,lastLoginAt:KD});return Pv&&Array.isArray(Pv)&&(xv.providerData=Pv.map(bP=>Object.assign({},bP))),Rv&&(xv._redirectEventId=Rv),xv}static _fromIdTokenResponse(u,d,g=!1){return(0,k.Z)(function*(){const w=new ne;w.updateFromServerResponse(d);const D=new Ke({uid:d.localId,auth:u,stsTokenManager:w,isAnonymous:g});return yield vi(D),D})()}static _fromGetAccountInfoResponse(u,d,g){return(0,k.Z)(function*(){const w=d.users[0];Ie(void 0!==w.localId,"internal-error");const D=void 0!==w.providerUserInfo?xo(w.providerUserInfo):[],B=!(w.email&&w.passwordHash||D?.length),J=new ne;J.updateFromIdToken(g);const _e=new Ke({uid:w.localId,auth:u,stsTokenManager:J,isAnonymous:B}),Fe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:D,metadata:new Hi(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||D?.length)};return Object.assign(_e,Fe),_e})()}}const en=new Map;function ct(p){Tn(p instanceof Function,"Expected a class definition");let u=en.get(p);return u?(Tn(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,en.set(p,u),u)}const mr=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,k.Z)(function*(){return!0})()}_set(d,g){var w=this;return(0,k.Z)(function*(){w.storage[d]=g})()}_get(d){var g=this;return(0,k.Z)(function*(){const w=g.storage[d];return void 0===w?null:w})()}_remove(d){var g=this;return(0,k.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function qe(p,u,d){return`firebase:${p}:${u}:${d}`}class Vn{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:w,name:D}=this.auth;this.fullUserKey=qe(this.userKey,w.apiKey,D),this.fullPersistenceKey=qe("persistence",w.apiKey,D),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,k.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?Ke._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,k.Z)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,k.Z)(function*(){if(!d.length)return new Vn(ct(mr),u,g);const w=(yield Promise.all(d.map(function(){var Fe=(0,k.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Fe.apply(this,arguments)}}()))).filter(Fe=>Fe);let D=w[0]||ct(mr);const B=qe(g,u.config.apiKey,u.name);let J=null;for(const Fe of d)try{const ze=yield Fe._get(B);if(ze){const We=Ke._fromJSON(u,ze);Fe!==D&&(J=We),D=Fe;break}}catch{}const _e=w.filter(Fe=>Fe._shouldAllowMigration);return D._shouldAllowMigration&&_e.length?(D=_e[0],J&&(yield D._set(B,J.toJSON())),yield Promise.all(d.map(function(){var Fe=(0,k.Z)(function*(ze){if(ze!==D)try{yield ze._remove(B)}catch{}});return function(ze){return Fe.apply(this,arguments)}}())),new Vn(D,u,g)):new Vn(D,u,g)})()}}function un(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(ot(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Oo(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(sl(u))return"Blackberry";if(hd(u))return"Webos";if(Ac(u))return"Safari";if((u.includes("chrome/")||nn(u))&&!u.includes("edge/"))return"Chrome";if(lo(u))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Oo(p=(0,fe.z$)()){return/firefox\//i.test(p)}function Ac(p=(0,fe.z$)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function nn(p=(0,fe.z$)()){return/crios\//i.test(p)}function ot(p=(0,fe.z$)()){return/iemobile/i.test(p)}function lo(p=(0,fe.z$)()){return/android/i.test(p)}function sl(p=(0,fe.z$)()){return/blackberry/i.test(p)}function hd(p=(0,fe.z$)()){return/webos/i.test(p)}function co(p=(0,fe.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Se(p=(0,fe.z$)()){return co(p)||lo(p)||hd(p)||sl(p)||/windows phone/i.test(p)||ot(p)}function mt(p,u=[]){let d;switch(p){case"Browser":d=un((0,fe.z$)());break;case"Worker":d=`${un((0,fe.z$)())}-${p}`;break;default:d=p}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${$e.SDK_VERSION}/${g}`}class St{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=D=>new Promise((B,J)=>{try{B(u(D))}catch(_e){J(_e)}});g.onAbort=d,this.queue.push(g);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,k.Z)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const w of d.queue)yield w(u),w.onAbort&&g.push(w.onAbort)}catch(w){g.reverse();for(const D of g)try{D()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Rt(){return(Rt=(0,k.Z)(function*(p,u={}){return ke(p,"GET","/v2/passwordPolicy",ue(p,u))})).apply(this,arguments)}class pa{constructor(u){var d,g,w,D;const B=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=B.minPasswordLength)&&void 0!==d?d:6,B.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=B.maxPasswordLength),void 0!==B.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=B.containsLowercaseCharacter),void 0!==B.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=B.containsUppercaseCharacter),void 0!==B.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=B.containsNumericCharacter),void 0!==B.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=B.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(D=u.forceUpgradeOnSignin)&&void 0!==D&&D,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,w,D,B,J;const _e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,_e),this.validatePasswordCharacterOptions(u,_e),_e.isValid&&(_e.isValid=null===(d=_e.meetsMinPasswordLength)||void 0===d||d),_e.isValid&&(_e.isValid=null===(g=_e.meetsMaxPasswordLength)||void 0===g||g),_e.isValid&&(_e.isValid=null===(w=_e.containsLowercaseLetter)||void 0===w||w),_e.isValid&&(_e.isValid=null===(D=_e.containsUppercaseLetter)||void 0===D||D),_e.isValid&&(_e.isValid=null===(B=_e.containsNumericCharacter)||void 0===B||B),_e.isValid&&(_e.isValid=null===(J=_e.containsNonAlphanumericCharacter)||void 0===J||J),_e}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),w&&(d.meetsMaxPasswordLength=u.length<=w)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let w=0;w<u.length;w++)g=u.charAt(w),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,w,D){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=D))}}class ty{constructor(u,d,g,w){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gb(this),this.idTokenSubscription=new Gb(this),this.beforeStateQueue=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=ct(d)),this._initializationPromise=this.queue((0,k.Z)(function*(){var w,D;if(!g._deleted&&(g.persistenceManager=yield Vn.create(g,u),!g._deleted)){if(null!==(w=g._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(D=g.currentUser)||void 0===D?void 0:D.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,k.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,k.Z)(function*(){try{const g=yield Es(d,{idToken:u}),w=yield Ke._fromGetAccountInfoResponse(d,g,u);yield d.directlySetCurrentUser(w)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,k.Z)(function*(){var g;if((0,$e._isFirebaseServerApp)(d.app)){const J=d.app.settings.authIdToken;return J?new Promise(_e=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(J).then(_e,_e))}):d.directlySetCurrentUser(null)}const w=yield d.assertedPersistence.getCurrentUser();let D=w,B=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const J=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,_e=D?._redirectEventId,Fe=yield d.tryRedirectSignIn(u);(!J||J===_e)&&Fe?.user&&(D=Fe.user,B=!0)}if(!D)return d.directlySetCurrentUser(null);if(!D._redirectEventId){if(B)try{yield d.beforeStateQueue.runMiddleware(D)}catch(J){D=w,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(J))}return D?d.reloadAndSetCurrentUserOrClear(D):d.directlySetCurrentUser(null)}return Ie(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===D._redirectEventId?d.directlySetCurrentUser(D):d.reloadAndSetCurrentUserOrClear(D)})()}tryRedirectSignIn(u){var d=this;return(0,k.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,k.Z)(function*(){try{yield vi(u)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function el(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,k.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,k.Z)(function*(){if((0,$e._isFirebaseServerApp)(d.app))return Promise.reject(rt(d));const g=u?(0,fe.m9)(u):null;return g&&Ie(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,k.Z)(function*(){if(!g._deleted)return u&&Ie(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,k.Z)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,k.Z)(function*(){return(0,$e._isFirebaseServerApp)(u.app)?Promise.reject(rt(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,$e._isFirebaseServerApp)(this.app)?Promise.reject(rt(this)):this.queue((0,k.Z)(function*(){yield d.assertedPersistence.setPersistence(ct(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,k.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,k.Z)(function*(){const d=yield function _n(p){return Rt.apply(this,arguments)}(u),g=new pa(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new fe.LL("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,k.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(w.tenantId=d.tenantId),yield function K(p,u){return ge.apply(this,arguments)}(d,w)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,k.Z)(function*(){const w=yield g.getOrInitRedirectPersistenceManager(d);return null===u?w.removeCurrentUser():w.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,k.Z)(function*(){if(!d.redirectPersistenceManager){const g=u&&ct(u)||d._popupRedirectResolver;Ie(g,d,"argument-error"),d.redirectPersistenceManager=yield Vn.create(d,[ct(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,k.Z)(function*(){var g,w;return d._isInitialized&&(yield d.queue((0,k.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(w=d.redirectUser)||void 0===w?void 0:w._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,k.Z)(function*(){if(u===d.currentUser)return d.queue((0,k.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,w){if(this._deleted)return()=>{};const D="function"==typeof d?d:d.next.bind(d);let B=!1;const J=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(J,this,"internal-error"),J.then(()=>{B||D(this.currentUser)}),"function"==typeof d){const _e=u.addObserver(d,g,w);return()=>{B=!0,_e()}}{const _e=u.addObserver(d);return()=>{B=!0,_e()}}}directlySetCurrentUser(u){var d=this;return(0,k.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=mt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,k.Z)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const w=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();w&&(g["X-Firebase-Client"]=w);const D=yield u._getAppCheckToken();return D&&(g["X-Firebase-AppCheck"]=D),g})()}_getAppCheckToken(){var u=this;return(0,k.Z)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Vr(p,...u){Lr.logLevel<=Ct.in.WARN&&Lr.warn(`Auth (${$e.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Yt(p){return(0,fe.m9)(p)}class Gb{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,fe.ne)(d=>this.observer=d)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fd={loadJS:()=>(0,k.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ny(p){return fd.loadJS(p)}function Yb(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Qb{constructor(u){this.type="recaptcha-enterprise",this.auth=Yt(u)}verify(u="verify",d=!1){var g=this;return(0,k.Z)(function*(){function D(){return D=(0,k.Z)(function*(J){if(!d){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var _e=(0,k.Z)(function*(Fe,ze){bc(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(We=>{if(void 0!==We.recaptchaKey){const En=new tl(We);return null==J.tenantId?J._agentRecaptchaConfig=En:J._tenantRecaptchaConfigs[J.tenantId]=En,Fe(En.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(We=>{ze(We)})});return function(Fe,ze){return _e.apply(this,arguments)}}())}),D.apply(this,arguments)}function B(J,_e,Fe){const ze=window.grecaptcha;ai(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(J,{action:u}).then(We=>{_e(We)}).catch(()=>{_e("NO_RECAPTCHA")})}):Fe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,_e)=>{(function w(J){return D.apply(this,arguments)})(g.auth).then(Fe=>{if(!d&&ai(window.grecaptcha))B(Fe,J,_e);else{if(typeof window>"u")return void _e(new Error("RecaptchaVerifier is only supported in browser"));let ze=function Yk(){return fd.recaptchaEnterpriseScript}();0!==ze.length&&(ze+=Fe),ny(ze).then(()=>{B(Fe,J,_e)}).catch(We=>{_e(We)})}}).catch(Fe=>{_e(Fe)})})})()}}function Xb(p,u,d){return ry.apply(this,arguments)}function ry(){return(ry=(0,k.Z)(function*(p,u,d,g=!1){const w=new Qb(p);let D;try{D=yield w.verify(d)}catch{D=yield w.verify(d,!0)}const B=Object.assign({},u);return Object.assign(B,g?{captchaResp:D}:{captchaResponse:D}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}function Me(p,u,d,g){return iy.apply(this,arguments)}function iy(){return iy=(0,k.Z)(function*(p,u,d,g){var w;if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const D=yield Xb(p,u,d,"getOobCode"===d);return g(p,D)}return g(p,u).catch(function(){var D=(0,k.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const J=yield Xb(p,u,d,"getOobCode"===d);return g(p,J)}return Promise.reject(B)});return function(B){return D.apply(this,arguments)}}())}),iy.apply(this,arguments)}function Mc(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function gd(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class al{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return Ln("not implemented")}_getIdTokenResponse(u){return Ln("not implemented")}_linkToIdToken(u,d){return Ln("not implemented")}_getReauthenticationResolver(u){return Ln("not implemented")}}function kt(p,u){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:resetPassword",ue(p,u))})).apply(this,arguments)}function Qr(){return(Qr=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function cy(p,u){return uy.apply(this,arguments)}function uy(){return(uy=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function dy(){return(dy=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",ue(p,u))})).apply(this,arguments)}function Qk(p,u){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signInWithPassword",ue(p,u))})).apply(this,arguments)}function ll(p,u){return kc.apply(this,arguments)}function kc(){return(kc=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:sendOobCode",ue(p,u))})).apply(this,arguments)}function Pc(){return(Pc=(0,k.Z)(function*(p,u){return ll(p,u)})).apply(this,arguments)}function eD(p,u){return xc.apply(this,arguments)}function xc(){return(xc=(0,k.Z)(function*(p,u){return ll(p,u)})).apply(this,arguments)}function Xk(p,u){return fy.apply(this,arguments)}function fy(){return(fy=(0,k.Z)(function*(p,u){return ll(p,u)})).apply(this,arguments)}function py(){return(py=(0,k.Z)(function*(p,u){return ll(p,u)})).apply(this,arguments)}function ga(){return(ga=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signInWithEmailLink",ue(p,u))})).apply(this,arguments)}function cl(){return(cl=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signInWithEmailLink",ue(p,u))})).apply(this,arguments)}class Oc extends al{constructor(u,d,g,w=null){super("password",g),this._email=u,this._password=d,this._tenantId=w}static _fromEmailAndPassword(u,d){return new Oc(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new Oc(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,k.Z)(function*(){switch(d.signInMethod){case"password":return Me(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Qk);case"emailLink":return function eP(p,u){return ga.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Kt(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,k.Z)(function*(){switch(g.signInMethod){case"password":return Me(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cy);case"emailLink":return function tp(p,u){return cl.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:Kt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function uo(p,u){return np.apply(this,arguments)}function np(){return(np=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signInWithIdp",ue(p,u))})).apply(this,arguments)}class li extends al{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new li(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Kt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:w}=d,D=(0,Fn._T)(d,["providerId","signInMethod"]);if(!g||!w)return null;const B=new li(g,w);return B.idToken=D.idToken||void 0,B.accessToken=D.accessToken||void 0,B.secret=D.secret,B.nonce=D.nonce,B.pendingToken=D.pendingToken||null,B}_getIdTokenResponse(u){return uo(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,uo(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,uo(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,fe.xO)(d)}return u}}function Us(){return(Us=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:sendVerificationCode",ue(p,u))})).apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,u))})).apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(p,u){const d=yield Dt(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,u));if(d.temporaryProof)throw tr(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const md={USER_NOT_FOUND:"user-not-found"};function ma(){return(ma=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),md)})).apply(this,arguments)}class _a extends al{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new _a({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new _a({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function nD(p,u){return Q.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function my(p,u){return Ue.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function rp(p,u){return ma.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:w}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:w}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:w,temporaryProof:D}=u;return g||d||w||D?new _a({verificationId:d,verificationCode:g,phoneNumber:w,temporaryProof:D}):null}}class $i{constructor(u){var d,g,w,D,B,J;const _e=(0,fe.zd)((0,fe.pd)(u)),Fe=null!==(d=_e.apiKey)&&void 0!==d?d:null,ze=null!==(g=_e.oobCode)&&void 0!==g?g:null,We=function rD(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=_e.mode)&&void 0!==w?w:null);Ie(Fe&&ze&&We,"argument-error"),this.apiKey=Fe,this.operation=We,this.code=ze,this.continueUrl=null!==(D=_e.continueUrl)&&void 0!==D?D:null,this.languageCode=null!==(B=_e.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(J=_e.tenantId)&&void 0!==J?J:null}static parseLink(u){const d=function iD(p){const u=(0,fe.zd)((0,fe.pd)(p)).link,d=u?(0,fe.zd)((0,fe.pd)(u)).deep_link_id:null,g=(0,fe.zd)((0,fe.pd)(p)).deep_link_id;return(g?(0,fe.zd)((0,fe.pd)(g)).link:null)||g||d||u||p}(u);try{return new $i(d)}catch{return null}}}let wi=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Oc._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const w=$i.parseLink(g);return Ie(w,"argument-error"),Oc._fromEmailAndCode(d,w.code,w.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Tr{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Nt extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class ho extends Nt{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return Ie("providerId"in d&&"signInMethod"in d,"argument-error"),li._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return Ie(u.idToken||u.accessToken,"argument-error"),li._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return ho.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return ho.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:w,pendingToken:D,nonce:B,providerId:J}=u;if(!g&&!w&&!d&&!D||!J)return null;try{return new ho(J)._credential({idToken:d,accessToken:g,nonce:B,pendingToken:D})}catch{return null}}}let _d=(()=>{class p extends Nt{constructor(){super("facebook.com")}static credential(d){return li._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),yd=(()=>{class p extends Nt{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return li._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:w}=d;if(!g&&!w)return null;try{return p.credential(g,w)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),sp=(()=>{class p extends Nt{constructor(){super("github.com")}static credential(d){return li._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class js extends al{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return uo(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,uo(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,uo(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:w,pendingToken:D}=d;return g&&w&&D&&g===w?new js(g,D):null}static _create(u,d){return new js(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nc extends Tr{constructor(u){Ie(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return Nc.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return Nc.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=js.fromJSON(u);return Ie(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return js._create(g,d)}catch{return null}}}let vd=(()=>{class p extends Nt{constructor(){super("twitter.com")}static credential(d,g){return li._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:w}=d;if(!g||!w)return null;try{return p.credential(g,w)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function op(p,u){return wd.apply(this,arguments)}function wd(){return(wd=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signUp",ue(p,u))})).apply(this,arguments)}class Xr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,w=!1){return(0,k.Z)(function*(){const D=yield Ke._fromIdTokenResponse(u,g,w),B=ap(g);return new Xr({user:D,providerId:B,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,k.Z)(function*(){yield u._updateTokensIfNecessary(g,!0);const w=ap(g);return new Xr({user:u,providerId:w,_tokenResponse:g,operationType:d})})()}}function ap(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function lp(){return(lp=(0,k.Z)(function*(p){var u;if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const d=Yt(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Xr({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield op(d,{returnSecureToken:!0}),w=yield Xr._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(w.user),w})).apply(this,arguments)}class Fc extends fe.ZR{constructor(u,d,g,w){var D;super(d.code,d.message),this.operationType=g,this.user=w,Object.setPrototypeOf(this,Fc.prototype),this.customData={appName:u.name,tenantId:null!==(D=u.tenantId)&&void 0!==D?D:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,w){return new Fc(u,d,g,w)}}function vy(p,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(D=>{throw"auth/multi-factor-auth-required"===D.code?Fc._fromErrorAndOperation(p,D,u,g):D})}function wy(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function cp(){return cp=(0,k.Z)(function*(p,u){const d=(0,fe.m9)(p);yield Cd(!0,d,u);const{providerUserInfo:g}=yield function Tc(p,u){return _i.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),w=wy(g||[]);return d.providerData=d.providerData.filter(D=>w.has(D.providerId)),w.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),cp.apply(this,arguments)}function Ed(p,u){return up.apply(this,arguments)}function up(){return(up=(0,k.Z)(function*(p,u,d=!1){const g=yield yi(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return Xr._forOperation(p,"link",g)})).apply(this,arguments)}function Cd(p,u,d){return dp.apply(this,arguments)}function dp(){return(dp=(0,k.Z)(function*(p,u,d){yield vi(u);const w=!1===p?"provider-already-linked":"no-such-provider";Ie(wy(u.providerData).has(d)===p,u.auth,w)})).apply(this,arguments)}function Ey(p,u){return bd.apply(this,arguments)}function bd(){return(bd=(0,k.Z)(function*(p,u,d=!1){const{auth:g}=p;if((0,$e._isFirebaseServerApp)(g.app))return Promise.reject(rt(g));const w="reauthenticate";try{const D=yield yi(p,vy(g,w,u,p),d);Ie(D.idToken,g,"internal-error");const B=ko(D.idToken);Ie(B,g,"internal-error");const{sub:J}=B;return Ie(p.uid===J,g,"user-mismatch"),Xr._forOperation(p,w,D)}catch(D){throw"auth/user-not-found"===D?.code&&Kt(g,"user-mismatch"),D}})).apply(this,arguments)}function Cy(p,u){return hp.apply(this,arguments)}function hp(){return(hp=(0,k.Z)(function*(p,u,d=!1){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g="signIn",w=yield vy(p,g,u),D=yield Xr._fromIdTokenResponse(p,g,w);return d||(yield p._updateCurrentUser(D.user)),D})).apply(this,arguments)}function Dd(p,u){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,k.Z)(function*(p,u){return Cy(Yt(p),u)})).apply(this,arguments)}function by(p,u){return fp.apply(this,arguments)}function fp(){return(fp=(0,k.Z)(function*(p,u){const d=(0,fe.m9)(p);return yield Cd(!1,d,u.providerId),Ed(d,u)})).apply(this,arguments)}function Dy(p,u){return $t.apply(this,arguments)}function $t(){return($t=(0,k.Z)(function*(p,u){return Ey((0,fe.m9)(p),u)})).apply(this,arguments)}function Td(){return(Td=(0,k.Z)(function*(p,u){return Dt(p,"POST","/v1/accounts:signInWithCustomToken",ue(p,u))})).apply(this,arguments)}function _r(){return _r=(0,k.Z)(function*(p,u){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const d=Yt(p),g=yield function sD(p,u){return Td.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),w=yield Xr._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(w.user),w}),_r.apply(this,arguments)}class Pt{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?yr._fromServerResponse(u,d):"totpInfo"in d?Br._fromServerResponse(u,d):Kt(u,"internal-error")}}class yr extends Pt{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new yr(d)}}class Br extends Pt{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Br(d)}}function po(p,u,d){var g;Ie((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),Ie(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(Ie(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(Ie(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function ci(p){return Id.apply(this,arguments)}function Id(){return(Id=(0,k.Z)(function*(p){const u=Yt(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function ul(){return(ul=(0,k.Z)(function*(p,u,d){const g=Yt(p),w={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&po(g,w,d),yield Me(g,w,"getOobCode",eD)})).apply(this,arguments)}function pp(){return pp=(0,k.Z)(function*(p,u,d){yield kt((0,fe.m9)(p),{oobCode:u,newPassword:d}).catch(function(){var g=(0,k.Z)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&ci(p),w});return function(w){return g.apply(this,arguments)}}())}),pp.apply(this,arguments)}function je(){return je=(0,k.Z)(function*(p,u){yield function yn(p,u){return dy.apply(this,arguments)}((0,fe.m9)(p),{oobCode:u})}),je.apply(this,arguments)}function _t(p,u){return vn.apply(this,arguments)}function vn(){return(vn=(0,k.Z)(function*(p,u){const d=(0,fe.m9)(p),g=yield kt(d,{oobCode:u}),w=g.requestType;switch(Ie(w,d,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(g.mfaInfo,d,"internal-error");default:Ie(g.email,d,"internal-error")}let D=null;return g.mfaInfo&&(D=Pt._fromServerResponse(Yt(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:D},operation:w}})).apply(this,arguments)}function ya(){return(ya=(0,k.Z)(function*(p,u){const{data:d}=yield _t((0,fe.m9)(p),u);return d.email})).apply(this,arguments)}function No(){return(No=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Yt(p),B=yield Me(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",op).catch(_e=>{throw"auth/password-does-not-meet-requirements"===_e.code&&ci(p),_e}),J=yield Xr._fromIdTokenResponse(g,"signIn",B);return yield g._updateCurrentUser(J.user),J})).apply(this,arguments)}function Lo(){return(Lo=(0,k.Z)(function*(p,u,d){const g=Yt(p),w={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function D(B,J){Ie(J.handleCodeInApp,g,"argument-error"),J&&po(g,B,J)})(w,d),yield Me(g,w,"getOobCode",Xk)})).apply(this,arguments)}function Sd(){return(Sd=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=(0,fe.m9)(p),w=wi.credentialWithLink(u,d||ji());return Ie(w._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Dd(g,w)})).apply(this,arguments)}function Bn(){return(Bn=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:createAuthUri",ue(p,u))})).apply(this,arguments)}function Vo(){return Vo=(0,k.Z)(function*(p,u){const g={identifier:u,continueUri:es()?ji():"http://localhost"},{signinMethods:w}=yield function dl(p,u){return Bn.apply(this,arguments)}((0,fe.m9)(p),g);return w||[]}),Vo.apply(this,arguments)}function va(){return va=(0,k.Z)(function*(p,u){const d=(0,fe.m9)(p),w={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&po(d.auth,w,u);const{email:D}=yield function hy(p,u){return Pc.apply(this,arguments)}(d.auth,w);D!==p.email&&(yield p.reload())}),va.apply(this,arguments)}function $s(){return $s=(0,k.Z)(function*(p,u,d){const g=(0,fe.m9)(p),D={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&po(g.auth,D,d);const{email:B}=yield function Jk(p,u){return py.apply(this,arguments)}(g.auth,D);B!==p.email&&(yield p.reload())}),$s.apply(this,arguments)}function wa(){return(wa=(0,k.Z)(function*(p,u){return ke(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function At(){return At=(0,k.Z)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,fe.m9)(p),D={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},B=yield yi(g,function go(p,u){return wa.apply(this,arguments)}(g.auth,D));g.displayName=B.displayName||null,g.photoURL=B.photoUrl||null;const J=g.providerData.find(({providerId:_e})=>"password"===_e);J&&(J.displayName=g.displayName,J.photoURL=g.photoURL),yield g._updateTokensIfNecessary(B)}),At.apply(this,arguments)}function mp(p,u,d){return ss.apply(this,arguments)}function ss(){return ss=(0,k.Z)(function*(p,u,d){const{auth:g}=p,D={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(D.email=u),d&&(D.password=d);const B=yield yi(p,function ly(p,u){return Qr.apply(this,arguments)}(g,D));yield p._updateTokensIfNecessary(B,!0)}),ss.apply(this,arguments)}class Ts{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class hl extends Ts{constructor(u,d,g,w){super(u,d,g),this.username=w}}class Ur extends Ts{constructor(u,d){super(u,"facebook.com",d)}}class nP extends hl{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Ei extends Ts{constructor(u,d){super(u,"google.com",d)}}class ui extends hl{constructor(u,d,g){super(u,"twitter.com",d,g)}}function _p(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Ad(p){var u,d;if(!p)return null;const{providerId:g}=p,w=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},D=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const B=null===(d=null===(u=ko(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(B)return new Ts(D,"anonymous"!==B&&"custom"!==B?B:null)}if(!g)return null;switch(g){case"facebook.com":return new Ur(D,w);case"github.com":return new nP(D,w);case"google.com":return new Ei(D,w);case"twitter.com":return new ui(D,w,p.screenName||null);case"custom":case"anonymous":return new Ts(D,null);default:return new Ts(D,g,w)}}(d)}class pl{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new pl("enroll",u,d)}static _fromMfaPendingCredential(u){return new pl("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return pl._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return pl._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Ay{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Yt(u),w=d.customData._serverResponse,D=(w.mfaInfo||[]).map(J=>Pt._fromServerResponse(g,J));Ie(w.mfaPendingCredential,g,"internal-error");const B=pl._fromMfaPendingCredential(w.mfaPendingCredential);return new Ay(B,D,function(){var J=(0,k.Z)(function*(_e){const Fe=yield _e._process(g,B);delete w.mfaInfo,delete w.mfaPendingCredential;const ze=Object.assign(Object.assign({},w),{idToken:Fe.idToken,refreshToken:Fe.refreshToken});switch(d.operationType){case"signIn":const We=yield Xr._fromIdTokenResponse(g,d.operationType,ze);return yield g._updateCurrentUser(We.user),We;case"reauthenticate":return Ie(d.user,g,"internal-error"),Xr._forOperation(d.user,d.operationType,ze);default:Kt(g,"internal-error")}});return function(_e){return J.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,k.Z)(function*(){return d.signInResolver(u)})()}}class Md{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>Pt._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new Md(u)}getSession(){var u=this;return(0,k.Z)(function*(){return pl._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,k.Z)(function*(){const w=u,D=yield g.getSession(),B=yield yi(g.user,w._process(g.user.auth,D,d));return yield g.user._updateTokensIfNecessary(B),g.user.reload()})()}unenroll(u){var d=this;return(0,k.Z)(function*(){const g="string"==typeof u?u:u.uid,w=yield d.user.getIdToken();try{const D=yield yi(d.user,function cP(p,u){return ke(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ue(p,u))}(d.user.auth,{idToken:w,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:B})=>B!==g),yield d.user._updateTokensIfNecessary(D),yield d.user.reload()}catch(D){throw D}})()}}const Rd=new WeakMap,vp="__sak";class cD{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(vp,"1"),this.storage.removeItem(vp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const sr=(()=>{class p extends cD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ea(){const p=(0,fe.z$)();return Ac(p)||co(p)}()&&function ft(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Se(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const w=this.storage.getItem(g),D=this.localCache[g];w!==D&&d(g,D,w)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((J,_e,Fe)=>{this.notifyListeners(J,Fe)});const w=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(w);if(d.newValue!==J)null!==d.newValue?this.storage.setItem(w,d.newValue):this.storage.removeItem(w);else if(this.localCache[w]===d.newValue&&!g)return}const D=()=>{const J=this.storage.getItem(w);!g&&this.localCache[w]===J||this.notifyListeners(w,J)},B=this.storage.getItem(w);!function se(){return(0,fe.w1)()&&10===document.documentMode}()||B===d.newValue||d.newValue===d.oldValue?D():setTimeout(D,10)}notifyListeners(d,g){this.localCache[d]=g;const w=this.listeners[d];if(w)for(const D of Array.from(w))D(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var w=()=>super._set,D=this;return(0,k.Z)(function*(){yield w().call(D,d,g),D.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,w=this;return(0,k.Z)(function*(){const D=yield g().call(w,d);return w.localCache[d]=JSON.stringify(D),D})()}_remove(d){var g=()=>super._remove,w=this;return(0,k.Z)(function*(){yield g().call(w,d),delete w.localCache[d]})()}}return p.type="LOCAL",p})(),vr=(()=>{class p extends cD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Ry=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(D=>D.isListeningto(d));if(g)return g;const w=new p(d);return this.receivers.push(w),w}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,k.Z)(function*(){const w=d,{eventId:D,eventType:B,data:J}=w.data,_e=g.handlersMap[B];if(!_e?.size)return;w.ports[0].postMessage({status:"ack",eventId:D,eventType:B});const Fe=Array.from(_e).map(function(){var We=(0,k.Z)(function*(En){return En(w.origin,J)});return function(En){return We.apply(this,arguments)}}()),ze=yield function My(p){return Promise.all(p.map(function(){var u=(0,k.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(Fe);w.ports[0].postMessage({status:"done",eventId:D,eventType:B,response:ze})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function gl(p="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return p+d}class ky{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var w=this;return(0,k.Z)(function*(){const D=typeof MessageChannel<"u"?new MessageChannel:null;if(!D)throw new Error("connection_unavailable");let B,J;return new Promise((_e,Fe)=>{const ze=gl("",20);D.port1.start();const We=setTimeout(()=>{Fe(new Error("unsupported_event"))},g);J={messageChannel:D,onMessage(En){const cs=En;if(cs.data.eventId===ze)switch(cs.data.status){case"ack":clearTimeout(We),B=setTimeout(()=>{Fe(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),_e(cs.data.response);break;default:clearTimeout(We),clearTimeout(B),Fe(new Error("invalid_response"))}}},w.handlers.add(J),D.port1.addEventListener("message",J.onMessage),w.target.postMessage({eventType:u,eventId:ze,data:d},[D.port2])}).finally(()=>{J&&w.removeMessageHandler(J)})})()}}function Kn(){return window}function jc(){return typeof Kn().WorkerGlobalScope<"u"&&"function"==typeof Kn().importScripts}function kd(){return(kd=(0,k.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hc="firebaseLocalStorageDb",mo="firebaseLocalStorage",Cp="fbase_key";class Pd{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function bp(p,u){return p.transaction([mo],u?"readwrite":"readonly").objectStore(mo)}function Dp(){const p=indexedDB.open(Hc,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(mo,{keyPath:Cp})}catch(w){d(w)}}),p.addEventListener("success",(0,k.Z)(function*(){const g=p.result;g.objectStoreNames.contains(mo)?u(g):(g.close(),yield function hP(){const p=indexedDB.deleteDatabase(Hc);return new Pd(p).toPromise()}(),u(yield Dp()))}))})}function Ny(p,u,d){return Fy.apply(this,arguments)}function Fy(){return(Fy=(0,k.Z)(function*(p,u,d){const g=bp(p,!0).put({[Cp]:u,value:d});return new Pd(g).toPromise()})).apply(this,arguments)}function zc(){return(zc=(0,k.Z)(function*(p,u){const d=bp(p,!1).get(u),g=yield new Pd(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Vy(p,u){const d=bp(p,!0).delete(u);return new Pd(d).toPromise()}const ml=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,k.Z)(function*(){return d.db||(d.db=yield Dp()),d.db})()}_withRetries(d){var g=this;return(0,k.Z)(function*(){let w=0;for(;;)try{const D=yield g._openDb();return yield d(D)}catch(D){if(w++>3)throw D;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,k.Z)(function*(){return jc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,k.Z)(function*(){d.receiver=Ry._getInstance(function Oy(){return jc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,k.Z)(function*(w,D){return{keyProcessed:(yield d._poll()).includes(D.key)}});return function(w,D){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,k.Z)(function*(w,D){return["keyChanged"]});return function(w,D){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,k.Z)(function*(){var g,w;if(d.activeServiceWorker=yield function Ep(){return kd.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new ky(d.activeServiceWorker);const D=yield d.sender._send("ping",{},800);D&&null!==(g=D[0])&&void 0!==g&&g.fulfilled&&null!==(w=D[0])&&void 0!==w&&w.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,k.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function xy(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,k.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Dp();return yield Ny(d,vp,"1"),yield Vy(d,vp),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,k.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var w=this;return(0,k.Z)(function*(){return w._withPendingWrite((0,k.Z)(function*(){return yield w._withRetries(D=>Ny(D,d,g)),w.localCache[d]=g,w.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,k.Z)(function*(){const w=yield g._withRetries(D=>function Ly(p,u){return zc.apply(this,arguments)}(D,d));return g.localCache[d]=w,w})()}_remove(d){var g=this;return(0,k.Z)(function*(){return g._withPendingWrite((0,k.Z)(function*(){return yield g._withRetries(w=>Vy(w,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,k.Z)(function*(){const g=yield d._withRetries(B=>{const J=bp(B,!1).getAll();return new Pd(J).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const w=[],D=new Set;if(0!==g.length)for(const{fbase_key:B,value:J}of g)D.add(B),JSON.stringify(d.localCache[B])!==JSON.stringify(J)&&(d.notifyListeners(B,J),w.push(B));for(const B of Object.keys(d.localCache))d.localCache[B]&&!D.has(B)&&(d.notifyListeners(B,null),w.push(B));return w})()}notifyListeners(d,g){this.localCache[d]=g;const w=this.listeners[d];if(w)for(const D of Array.from(w))D(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,k.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Wc=1e12;class fD{constructor(u){this.auth=u,this.counter=Wc,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new jy(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||Wc;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Wc))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,k.Z)(function*(){var g;return null===(g=d._widgets.get(u||Wc))||void 0===g||g.execute(),""})()}}class jy{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof u?document.getElementById(u):u;Ie(w,"argument-error",{appName:d}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pD(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hy=Yb("rcb"),gD=new le(3e4,6e4);class Ir{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Kn().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return Ie(function $y(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Yr(Kn().grecaptcha)?Promise.resolve(Kn().grecaptcha):new Promise((g,w)=>{const D=Kn().setTimeout(()=>{w(cn(u,"network-request-failed"))},gD.get());Kn()[Hy]=()=>{Kn().clearTimeout(D),delete Kn()[Hy];const J=Kn().grecaptcha;if(!J||!Yr(J))return void w(cn(u,"internal-error"));const _e=J.render;J.render=(Fe,ze)=>{const We=_e(Fe,ze);return this.counter++,We},this.hostLanguage=d,g(J)},ny(`${function Zb(){return fd.recaptchaV2Script}()}?${(0,fe.xO)({onload:Hy,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(D),w(cn(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Kn().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mD{load(u){return(0,k.Z)(function*(){return new fD(u)})()}clearedOneInstance(){}}const zy="recaptcha",Wy={theme:"light",type:"image"};class qy{constructor(u,d,g=Object.assign({},Wy)){this.parameters=g,this.type=zy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yt(u),this.isInvisible="invisible"===this.parameters.size,Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof d?document.getElementById(d):d;Ie(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mD:new Ir,this.validateStartingState()}verify(){var u=this;return(0,k.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(D=>{const B=J=>{J&&(u.tokenChangeListeners.delete(B),D(J))};u.tokenChangeListeners.add(B),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=Kn()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,k.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,k.Z)(function*(){Ie(es()&&!jc(),u.auth,"internal-error"),yield function _D(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function da(p){return Gn.apply(this,arguments)}(u.auth);Ie(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qc{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=_a._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function os(){return(os=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Yt(p),w=yield Ca(g,u,(0,fe.m9)(d));return new qc(w,D=>Dd(g,D))})).apply(this,arguments)}function xd(){return(xd=(0,k.Z)(function*(p,u,d){const g=(0,fe.m9)(p);yield Cd(!1,g,"phone");const w=yield Ca(g.auth,u,(0,fe.m9)(d));return new qc(w,D=>by(g,D))})).apply(this,arguments)}function Gc(){return(Gc=(0,k.Z)(function*(p,u,d){const g=(0,fe.m9)(p);if((0,$e._isFirebaseServerApp)(g.auth.app))return Promise.reject(rt(g.auth));const w=yield Ca(g.auth,u,(0,fe.m9)(d));return new qc(w,D=>Dy(g,D))})).apply(this,arguments)}function Ca(p,u,d){return ei.apply(this,arguments)}function ei(){return ei=(0,k.Z)(function*(p,u,d){var g;const w=yield d.verify();try{let D;if(Ie("string"==typeof w,p,"argument-error"),Ie(d.type===zy,p,"argument-error"),D="string"==typeof u?{phoneNumber:u}:u,"session"in D){const B=D.session;if("phoneNumber"in D)return Ie("enroll"===B.type,p,"internal-error"),(yield function oP(p,u){return ke(p,"POST","/v2/accounts/mfaEnrollment:start",ue(p,u))}(p,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:D.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{Ie("signin"===B.type,p,"internal-error");const J=(null===(g=D.multiFactorHint)||void 0===g?void 0:g.uid)||D.multiFactorUid;return Ie(J,p,"missing-multi-factor-info"),(yield function By(p,u){return ke(p,"POST","/v2/accounts/mfaSignIn:start",ue(p,u))}(p,{mfaPendingCredential:B.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield function tD(p,u){return Us.apply(this,arguments)}(p,{phoneNumber:D.phoneNumber,recaptchaToken:w});return B}}finally{d._reset()}}),ei.apply(this,arguments)}function Od(){return(Od=(0,k.Z)(function*(p,u){const d=(0,fe.m9)(p);if((0,$e._isFirebaseServerApp)(d.auth.app))return Promise.reject(rt(d.auth));yield Ed(d,u)})).apply(this,arguments)}let Ws=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Yt(d)}verifyPhoneNumber(d,g){return Ca(this.auth,d,(0,fe.m9)(g))}static credential(d,g){return _a._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:w}=d;return g&&w?_a._fromTokenResponse(g,w):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function wr(p,u){return u?ct(u):(Ie(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Ip extends al{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return uo(u,this._buildIdpRequest())}_linkToIdToken(u,d){return uo(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return uo(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function wD(p){return Cy(p.auth,new Ip(p),p.bypassAuthState)}function ED(p){const{auth:u,user:d}=p;return Ie(d,u,"internal-error"),Ey(d,new Ip(p),p.bypassAuthState)}function Uo(p){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,k.Z)(function*(p){const{auth:u,user:d}=p;return Ie(d,u,"internal-error"),Ed(d,new Ip(p),p.bypassAuthState)})).apply(this,arguments)}class Zy{constructor(u,d,g,w,D=!1){this.auth=u,this.resolver=g,this.user=w,this.bypassAuthState=D,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,k.Z)(function*(g,w){u.pendingPromise={resolve:g,reject:w};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(D){u.reject(D)}});return function(g,w){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,k.Z)(function*(){const{urlResponse:g,sessionId:w,postBody:D,tenantId:B,error:J,type:_e}=u;if(J)return void d.reject(J);const Fe={auth:d.auth,requestUri:g,sessionId:w,tenantId:B||void 0,postBody:D||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(_e)(Fe))}catch(ze){d.reject(ze)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return wD;case"linkViaPopup":case"linkViaRedirect":return Uo;case"reauthViaPopup":case"reauthViaRedirect":return ED;default:Kt(this.auth,"internal-error")}}resolve(u){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ky=new le(2e3,1e4);function Fd(){return(Fd=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(cn(p,"operation-not-supported-in-this-environment"));const g=Yt(p);er(p,u,Tr);const w=wr(g,d);return new Sp(g,"signInViaPopup",u,w).executeNotNull()})).apply(this,arguments)}function at(){return(at=(0,k.Z)(function*(p,u,d){const g=(0,fe.m9)(p);if((0,$e._isFirebaseServerApp)(g.auth.app))return Promise.reject(cn(g.auth,"operation-not-supported-in-this-environment"));er(g.auth,u,Tr);const w=wr(g.auth,d);return new Sp(g.auth,"reauthViaPopup",u,w,g).executeNotNull()})).apply(this,arguments)}function Xy(){return(Xy=(0,k.Z)(function*(p,u,d){const g=(0,fe.m9)(p);er(g.auth,u,Tr);const w=wr(g.auth,d);return new Sp(g.auth,"linkViaPopup",u,w,g).executeNotNull()})).apply(this,arguments)}let Sp=(()=>{class p extends Zy{constructor(d,g,w,D,B){super(d,g,D,B),this.provider=w,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,k.Z)(function*(){const g=yield d.execute();return Ie(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,k.Z)(function*(){Tn(1===d.filter.length,"Popup operations only handle one event");const g=gl();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(w=>{d.reject(w)}),d.resolver._isIframeWebStorageSupported(d.auth,w=>{w||d.reject(cn(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,w;this.pollId=null!==(w=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Ky.get())};d()}}return p.currentPopupAction=null,p})();const bD="pendingRedirect",Zc=new Map;class Jy extends Zy{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,k.Z)(function*(){let g=Zc.get(d.auth._key());if(!g){try{const D=(yield function _l(p,u){return Ap.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(D)}catch(w){g=()=>Promise.reject(w)}Zc.set(d.auth._key(),g)}return d.bypassAuthState||Zc.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,k.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const w=yield g.auth._redirectUserForId(u.eventId);if(w)return g.user=w,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,k.Z)(function*(){})()}cleanUp(){}}function Ap(){return(Ap=(0,k.Z)(function*(p,u){const d=Bt(u),g=De(p);if(!(yield g._isAvailable()))return!1;const w="true"===(yield g._get(d));return yield g._remove(d),w})).apply(this,arguments)}function Mp(p,u){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,k.Z)(function*(p,u){return De(p)._set(Bt(u),"true")})).apply(this,arguments)}function kp(p,u){Zc.set(p._key(),u)}function De(p){return ct(p._redirectPersistence)}function Bt(p){return qe(bD,p.config.apiKey,p.name)}function we(p,u,d){return function Ee(p,u,d){return Er.apply(this,arguments)}(p,u,d)}function Er(){return(Er=(0,k.Z)(function*(p,u,d){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Yt(p);er(p,u,Tr),yield g._initializationPromise;const w=wr(g,d);return yield Mp(w,g),w._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function ev(p,u,d){return function Kc(p,u,d){return as.apply(this,arguments)}(p,u,d)}function as(){return(as=(0,k.Z)(function*(p,u,d){const g=(0,fe.m9)(p);if(er(g.auth,u,Tr),(0,$e._isFirebaseServerApp)(g.auth.app))return Promise.reject(rt(g.auth));yield g.auth._initializationPromise;const w=wr(g.auth,d);yield Mp(w,g.auth);const D=yield Np(g);return w._openRedirect(g.auth,u,"reauthViaRedirect",D)})).apply(this,arguments)}function Pp(p,u,d){return function xp(p,u,d){return Op.apply(this,arguments)}(p,u,d)}function Op(){return(Op=(0,k.Z)(function*(p,u,d){const g=(0,fe.m9)(p);er(g.auth,u,Tr),yield g.auth._initializationPromise;const w=wr(g.auth,d);yield Cd(!1,g,u.providerId),yield Mp(w,g.auth);const D=yield Np(g);return w._openRedirect(g.auth,u,"linkViaRedirect",D)})).apply(this,arguments)}function Ld(){return(Ld=(0,k.Z)(function*(p,u){return yield Yt(p)._initializationPromise,Sr(p,u,!1)})).apply(this,arguments)}function Sr(p,u){return Is.apply(this,arguments)}function Is(){return(Is=(0,k.Z)(function*(p,u,d=!1){if((0,$e._isFirebaseServerApp)(p.app))return Promise.reject(rt(p));const g=Yt(p),w=wr(g,u),B=yield new Jy(g,w,d).execute();return B&&!d&&(delete B.user._redirectEventId,yield g._persistUserIfCurrent(B.user),yield g._setRedirectUser(null,u)),B})).apply(this,arguments)}function Np(p){return jo.apply(this,arguments)}function jo(){return(jo=(0,k.Z)(function*(p){const u=gl(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class tv{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function TD(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nv(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!nv(u)){const w=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(cn(this.auth,w))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fp(u))}saveEventToCache(u){this.cachedEventUids.add(Fp(u)),this.lastProcessedEventTime=Date.now()}}function Fp(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function nv({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function Vd(p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,k.Z)(function*(p,u={}){return ke(p,"GET","/v1/projects",u)})).apply(this,arguments)}const rv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lp=/^https?/;function Bd(){return(Bd=(0,k.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield Vd(p);for(const d of u)try{if(Vp(d))return}catch{}Kt(p,"unauthorized-domain")})).apply(this,arguments)}function Vp(p){const u=ji(),{protocol:d,hostname:g}=new URL(u);if(p.startsWith("chrome-extension://")){const B=new URL(p);return""===B.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&B.hostname===g}if(!Lp.test(d))return!1;if(rv.test(p))return g===p;const w=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(g)}const iv=new le(3e4,6e4);function Bp(){const p=Kn().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Qc=null;const SD=new le(5e3,15e3),AD="__/auth/iframe",di="emulator/auth/iframe",ba={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Un=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MD(p){const u=p.config;Ie(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?de(u,di):`https://${p.config.authDomain}/${AD}`,g={apiKey:u.apiKey,appName:p.name,v:$e.SDK_VERSION},w=Un.get(p.config.apiHost);w&&(g.eid=w);const D=p._getFrameworks();return D.length&&(g.fw=D.join(",")),`${d}?${(0,fe.xO)(g).slice(1)}`}function jp(){return jp=(0,k.Z)(function*(p){const u=yield function Up(p){return Qc=Qc||function sv(p){return new Promise((u,d)=>{var g,w,D;function B(){Bp(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Bp(),d(cn(p,"network-request-failed"))},timeout:iv.get()})}if(null!==(w=null===(g=Kn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==w&&w.Iframe)u(gapi.iframes.getContext());else{if(null===(D=Kn().gapi)||void 0===D||!D.load){const J=Yb("iframefcb");return Kn()[J]=()=>{gapi.load?B():d(cn(p,"network-request-failed"))},ny(`${function Kb(){return fd.gapiScript}()}?onload=${J}`).catch(_e=>d(_e))}B()}}).catch(u=>{throw Qc=null,u})}(p),Qc}(p),d=Kn().gapi;return Ie(d,p,"internal-error"),u.open({where:document.body,url:MD(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ba,dontclear:!0},g=>new Promise(function(){var w=(0,k.Z)(function*(D,B){yield g.restyle({setHideOnLeave:!1});const J=cn(p,"network-request-failed"),_e=Kn().setTimeout(()=>{B(J)},SD.get());function Fe(){Kn().clearTimeout(_e),D(g)}g.ping(Fe).then(Fe,()=>{B(J)})});return function(D,B){return w.apply(this,arguments)}}()))}),jp.apply(this,arguments)}const kD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lv{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $d="__/auth/handler",Hp="emulator/auth/handler",cv=encodeURIComponent("fac");function zd(p,u,d,g,w,D){return $p.apply(this,arguments)}function $p(){return($p=(0,k.Z)(function*(p,u,d,g,w,D){Ie(p.config.authDomain,p,"auth-domain-config-required"),Ie(p.config.apiKey,p,"invalid-api-key");const B={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:$e.SDK_VERSION,eventId:w};if(u instanceof Tr){u.setDefaultLanguage(p.languageCode),B.providerId=u.providerId||"",(0,fe.xb)(u.getCustomParameters())||(B.customParameters=JSON.stringify(u.getCustomParameters()));for(const[ze,We]of Object.entries(D||{}))B[ze]=We}if(u instanceof Nt){const ze=u.getScopes().filter(We=>""!==We);ze.length>0&&(B.scopes=ze.join(","))}p.tenantId&&(B.tid=p.tenantId);const J=B;for(const ze of Object.keys(J))void 0===J[ze]&&delete J[ze];const _e=yield p._getAppCheckToken(),Fe=_e?`#${cv}=${encodeURIComponent(_e)}`:"";return`${function yl({config:p}){return p.emulator?de(p,Hp):`https://${p.authDomain}/${$d}`}(p)}?${(0,fe.xO)(J).slice(1)}${Fe}`})).apply(this,arguments)}const Da="webStorageSupport",xD=class PD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vr,this._completeRedirectFn=Sr,this._overrideRedirectResult=kp}_openPopup(u,d,g,w){var D=this;return(0,k.Z)(function*(){var B;Tn(null===(B=D.eventManagers[u._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const J=yield zd(u,d,g,ji(),w);return function jd(p,u,d,g=500,w=600){const D=Math.max((window.screen.availHeight-w)/2,0).toString(),B=Math.max((window.screen.availWidth-g)/2,0).toString();let J="";const _e=Object.assign(Object.assign({},kD),{width:g.toString(),height:w.toString(),top:D,left:B}),Fe=(0,fe.z$)().toLowerCase();d&&(J=nn(Fe)?"_blank":d),Oo(Fe)&&(u=u||"http://localhost",_e.scrollbars="yes");const ze=Object.entries(_e).reduce((En,[cs,Xd])=>`${En}${cs}=${Xd},`,"");if(function ee(p=(0,fe.z$)()){var u;return co(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Fe)&&"_self"!==J)return function Hd(p,u){const d=document.createElement("a");d.href=p,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",J),new lv(null);const We=window.open(u||"",J,ze);Ie(We,p,"popup-blocked");try{We.focus()}catch{}return new lv(We)}(u,J,gl())})()}_openRedirect(u,d,g,w){var D=this;return(0,k.Z)(function*(){return yield D._originValidation(u),function Py(p){Kn().location.href=p}(yield zd(u,d,g,ji(),w)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:w,promise:D}=this.eventManagers[d];return w?Promise.resolve(w):(Tn(D,"If manager is not set, promise should be"),D)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,k.Z)(function*(){const g=yield function RD(p){return jp.apply(this,arguments)}(u),w=new tv(u);return g.register("authEvent",D=>(Ie(D?.authEvent,u,"invalid-auth-event"),{status:w.onEvent(D.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:w},d.iframes[u._key()]=g,w})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(Da,{type:Da},w=>{var D;const B=null===(D=w?.[0])||void 0===D?void 0:D[Da];void 0!==B&&d(!!B),Kt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function ID(p){return Bd.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Se()||Ac()||co()}};class zp{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return Ln("unexpected MultiFactorSessionType")}}}class uv extends zp{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new uv(u)}_finalizeEnroll(u,d,g){return function aP(p,u){return ke(p,"POST","/v2/accounts/mfaEnrollment:finalize",ue(p,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function Uy(p,u){return ke(p,"POST","/v2/accounts/mfaSignIn:finalize",ue(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let OD=(()=>{class p{constructor(){}static assertion(d){return uv._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var wl="@firebase/auth";class Xc{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,k.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qs(){return window}(0,fe.Pz)("authIdTokenMaxAge"),function Kk(p){fd=p}({loadJS:p=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=u,g.onerror=w=>{const D=cn("internal-error");D.customData=w,d(D)},g.type="text/javascript",g.charset="UTF-8",function LD(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Wd(p){(0,$e._registerComponent)(new qn.wA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),w=u.getProvider("heartbeat"),D=u.getProvider("app-check-internal"),{apiKey:B,authDomain:J}=g.options;Ie(B&&!B.includes(":"),"invalid-api-key",{appName:g.name});const _e={apiKey:B,authDomain:J,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mt(p)},Fe=new ty(g,w,D,_e);return function sy(p,u){const d=u?.persistence||[],g=(Array.isArray(d)?d:[d]).map(ct);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(g,u?.popupRedirectResolver)}(Fe,d),Fe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,$e._registerComponent)(new qn.wA("auth-internal",u=>{const d=Yt(u.getProvider("auth").getImmediate());return new Xc(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$e.registerVersion)(wl,"1.7.4",function Wp(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,$e.registerVersion)(wl,"1.7.4","esm2017")}("Browser");function El(){return El=(0,k.Z)(function*(p,u,d){var g;const{BuildInfo:w}=qs();Tn(u.sessionId,"AuthEvent did not contain a session ID");const D=yield function VD(p){return Cl.apply(this,arguments)}(u.sessionId),B={};return co()?B.ibi=w.packageName:lo()?B.apn=w.packageName:Kt(p,"operation-not-supported-in-this-environment"),w.displayName&&(B.appDisplayName=w.displayName),B.sessionId=D,zd(p,d,u.type,void 0,null!==(g=u.eventId)&&void 0!==g?g:void 0,B)}),El.apply(this,arguments)}function Kp(){return(Kp=(0,k.Z)(function*(p){const{BuildInfo:u}=qs(),d={};co()?d.iosBundleId=u.packageName:lo()?d.androidPackageName=u.packageName:Kt(p,"operation-not-supported-in-this-environment"),yield Vd(p,d)})).apply(this,arguments)}function qd(){return(qd=(0,k.Z)(function*(p,u,d){const{cordova:g}=qs();let w=()=>{};try{yield new Promise((D,B)=>{let J=null;function _e(){var We;D();const En=null===(We=g.plugins.browsertab)||void 0===We?void 0:We.close;"function"==typeof En&&En(),"function"==typeof d?.close&&d.close()}function Fe(){J||(J=window.setTimeout(()=>{B(cn(p,"redirect-cancelled-by-user"))},2e3))}function ze(){"visible"===document?.visibilityState&&Fe()}u.addPassiveListener(_e),document.addEventListener("resume",Fe,!1),lo()&&document.addEventListener("visibilitychange",ze,!1),w=()=>{u.removePassiveListener(_e),document.removeEventListener("resume",Fe,!1),document.removeEventListener("visibilitychange",ze,!1),J&&window.clearTimeout(J)}})}finally{w()}})).apply(this,arguments)}function Cl(){return(Cl=(0,k.Z)(function*(p){const u=function Ta(p){if(Tn(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(w=>w.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class yv extends tv{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,k.Z)(function*(){yield u.initPromise})()}}function wv(p){return jr.apply(this,arguments)}function jr(){return(jr=(0,k.Z)(function*(p){const u=yield eu()._get(Yp(p));return u&&(yield eu()._remove(Yp(p))),u})).apply(this,arguments)}function Ar(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function eu(){return ct(sr)}function Yp(p){return qe("authEvent",p.config.apiKey,p.name)}function vo(p){if(!p?.includes("?"))return{};const[u,...d]=p.split("?");return(0,fe.zd)(d.join("?"))}const Cv=class Dl{constructor(){this._redirectPersistence=vr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sr,this._overrideRedirectResult=kp}_initialize(u){var d=this;return(0,k.Z)(function*(){const g=u._key();let w=d.eventManagers.get(g);return w||(w=new yv(u),d.eventManagers.set(g,w),d.attachCallbackListeners(u,w)),w})()}_openPopup(u){Kt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,g,w){var D=this;return(0,k.Z)(function*(){!function _v(p){var u,d,g,w,D,B,J,_e,Fe,ze;const We=qs();Ie("function"==typeof(null===(u=We?.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ie(typeof(null===(d=We?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ie("function"==typeof(null===(D=null===(w=null===(g=We?.cordova)||void 0===g?void 0:g.plugins)||void 0===w?void 0:w.browsertab)||void 0===D?void 0:D.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(_e=null===(J=null===(B=We?.cordova)||void 0===B?void 0:B.plugins)||void 0===J?void 0:J.browsertab)||void 0===_e?void 0:_e.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(ze=null===(Fe=We?.cordova)||void 0===Fe?void 0:Fe.InAppBrowser)||void 0===ze?void 0:ze.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const B=yield D._initialize(u);yield B.initialized(),B.resetRedirect(),function DD(){Zc.clear()}(),yield D._originValidation(u);const J=function vv(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:Ar(),postBody:null,tenantId:p.tenantId,error:cn(p,"no-auth-event")}}(u,g,w);yield function Jc(p,u){return eu()._set(Yp(p),u)}(u,J);const _e=yield function pv(p,u,d){return El.apply(this,arguments)}(u,J,d),Fe=yield function gv(p){const{cordova:u}=qs();return new Promise(d=>{u.plugins.browsertab.isAvailable(g=>{let w=null;g?u.plugins.browsertab.openUrl(p):w=u.InAppBrowser.open(p,function P(p=(0,fe.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(w)})})}(_e);return function mv(p,u,d){return qd.apply(this,arguments)}(u,B,Fe)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Zp(p){return Kp.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:g,handleOpenURL:w,BuildInfo:D}=qs(),B=setTimeout((0,k.Z)(function*(){yield wv(u),d.onEvent(Zd())}),500),J=function(){var ze=(0,k.Z)(function*(We){clearTimeout(B);const En=yield wv(u);let cs=null;En&&We?.url&&(cs=function UD(p,u){var d,g;const w=function Gd(p){const u=vo(p),d=u.link?decodeURIComponent(u.link):void 0,g=vo(d).link,w=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return vo(w).link||w||g||d||p}(u);if(w.includes("/__/auth/callback")){const D=vo(w),B=D.firebaseError?function Ev(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(D.firebaseError)):null,J=null===(g=null===(d=B?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],_e=J?cn(J):null;return _e?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:_e,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:w,postBody:null}}return null}(En,We.url)),d.onEvent(cs||Zd())});return function(En){return ze.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,J);const _e=w,Fe=`${D.packageName.toLowerCase()}://`;qs().handleOpenURL=function(){var ze=(0,k.Z)(function*(We){if(We.toLowerCase().startsWith(Fe)&&J({url:We}),"function"==typeof _e)try{_e(We)}catch(En){console.error(En)}});return function(We){return ze.apply(this,arguments)}}()}};function Zd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:cn("no-auth-event")}}function Kd(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function HD(p=(0,fe.z$)()){return!("file:"!==Kd()&&"ionic:"!==Kd()&&"capacitor:"!==Kd()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function bv(){try{const p=self.localStorage,u=gl();if(p)return p.setItem(u,"1"),p.removeItem(u),!function $D(p=(0,fe.z$)()){return function EP(){return(0,fe.w1)()&&11===document?.documentMode}()||function Il(p=(0,fe.z$)()){return/Edge\/\d+/.test(p)}(p)}()||(0,fe.hl)()}catch{return rr()&&(0,fe.hl)()}return!1}function rr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qp(){return(function vP(){return"http:"===Kd()||"https:"===Kd()}()||(0,fe.ru)()||HD())&&!function wP(){return(0,fe.b$)()||(0,fe.UG)()}()&&bv()&&!rr()}function Sl(){return HD()&&typeof document<"u"}function Ci(){return(Ci=(0,k.Z)(function*(){return!!Sl()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const bi={LOCAL:"local",NONE:"none",SESSION:"session"},$o=Ie,Ml="persistence";function Dv(p){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,k.Z)(function*(p){yield p._initializationPromise;const u=Di(),d=qe(Ml,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function Di(){var p;try{return(null===(p=function Al(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Jp=Ie;class zi{constructor(){this.browserResolver=ct(xD),this.cordovaResolver=ct(Cv),this.underlyingResolver=null,this._redirectPersistence=vr,this._completeRedirectFn=Sr,this._overrideRedirectResult=kp}_initialize(u){var d=this;return(0,k.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,g,w){var D=this;return(0,k.Z)(function*(){return yield D.selectUnderlyingResolver(),D.assertedUnderlyingResolver._openPopup(u,d,g,w)})()}_openRedirect(u,d,g,w){var D=this;return(0,k.Z)(function*(){return yield D.selectUnderlyingResolver(),D.assertedUnderlyingResolver._openRedirect(u,d,g,w)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return Sl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,k.Z)(function*(){if(u.underlyingResolver)return;const d=yield function zD(){return Ci.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function qD(p){return p.unwrap()}function GD(p){return Iv(p)}function Iv(p){const{_tokenResponse:u}=p instanceof fe.ZR?p.customData:p;if(!u)return null;if(!(p instanceof fe.ZR)&&"temporaryProof"in u&&"phoneNumber"in u)return Ws.credentialFromResult(p);const d=u.providerId;if(!d||d===Ot.PASSWORD)return null;let g;switch(d){case Ot.GOOGLE:g=yd;break;case Ot.FACEBOOK:g=_d;break;case Ot.GITHUB:g=sp;break;case Ot.TWITTER:g=vd;break;default:const{oauthIdToken:w,oauthAccessToken:D,oauthTokenSecret:B,pendingToken:J,nonce:_e}=u;return D||B||w||J?J?d.startsWith("saml.")?js._create(d,J):li._fromParams({providerId:d,signInMethod:d,pendingToken:J,idToken:w,accessToken:D}):new ho(d).credential({idToken:w,accessToken:D,rawNonce:_e}):null}return p instanceof fe.ZR?g.credentialFromError(p):g.credentialFromResult(p)}function Ti(p,u){return u.catch(d=>{throw d instanceof fe.ZR&&function ZD(p,u){var d;const g=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new ng(p,function sP(p,u){var d;const g=(0,fe.m9)(p),w=u;return Ie(u.customData.operationType,g,"argument-error"),Ie(null===(d=w.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),Ay._fromError(g,w)}(p,u));else if(g){const w=Iv(u),D=u;w&&(D.credential=w,D.tenantId=g.tenantId||void 0,D.email=g.email||void 0,D.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const w=d.user;return{operationType:d.operationType,credential:GD(d),additionalUserInfo:_p(d),user:ls.getOrCreate(w)}})}function eg(p,u){return tg.apply(this,arguments)}function tg(){return(tg=(0,k.Z)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:g=>Ti(p,d.confirm(g))}})).apply(this,arguments)}class ng{constructor(u,d){this.resolver=d,this.auth=function Tv(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Ti(qD(this.auth),this.resolver.resolveSignIn(u))}}class ls{constructor(u){this._delegate=u,this.multiFactor=function uP(p){const u=(0,fe.m9)(p);return Rd.has(u)||Rd.set(u,Md._fromUser(u)),Rd.get(u)}(u)}static getOrCreate(u){return ls.USER_MAP.has(u)||ls.USER_MAP.set(u,new ls(u)),ls.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,k.Z)(function*(){return Ti(d.auth,by(d._delegate,u))})()}linkWithPhoneNumber(u,d){var g=this;return(0,k.Z)(function*(){return eg(g.auth,function Gy(p,u,d){return xd.apply(this,arguments)}(g._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,k.Z)(function*(){return Ti(d.auth,function Qy(p,u,d){return Xy.apply(this,arguments)}(d._delegate,u,zi))})()}linkWithRedirect(u){var d=this;return(0,k.Z)(function*(){return yield Dv(Yt(d.auth)),Pp(d._delegate,u,zi)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,k.Z)(function*(){return Ti(d.auth,Dy(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return eg(this.auth,function wn(p,u,d){return Gc.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return Ti(this.auth,function CD(p,u,d){return at.apply(this,arguments)}(this._delegate,u,zi))}reauthenticateWithRedirect(u){var d=this;return(0,k.Z)(function*(){return yield Dv(Yt(d.auth)),ev(d._delegate,u,zi)})()}sendEmailVerification(u){return function Hs(p,u){return va.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,k.Z)(function*(){return yield function bs(p,u){return cp.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function tP(p,u){const d=(0,fe.m9)(p);return(0,$e._isFirebaseServerApp)(d.auth.app)?Promise.reject(rt(d.auth)):mp(d,u,null)}(this._delegate,u)}updatePassword(u){return function gp(p,u){return mp((0,fe.m9)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function vD(p,u){return Od.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Bc(p,u){return At.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function Iy(p,u,d){return $s.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ls.USER_MAP=new WeakMap;const tu=Ie;let Rl=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:w}=d.options;tu(w,"invalid-api-key",{appName:d.name}),tu(w,"invalid-api-key",{appName:d.name});const D=typeof window<"u"?zi:void 0;this._delegate=g.initialize({options:{persistence:Yd(w,d.name),popupRedirectResolver:D}}),this._delegate._updateErrorMap(Fr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ls.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function oy(p,u,d){const g=Yt(p);Ie(g._canInitEmulator,g,"emulator-config-failed"),Ie(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const w=!!d?.disableWarnings,D=Mc(u),{host:B,port:J}=function pd(p){const u=Mc(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(g);if(w){const D=w[1];return{host:D,port:gd(g.substr(D.length+1))}}{const[D,B]=g.split(":");return{host:D,port:gd(B)}}}(u);g.config.emulator={url:`${D}//${B}${null===J?"":`:${J}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:B,port:J,protocol:D.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function ay(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,g)}applyActionCode(d){return function Zn(p,u){return je.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return _t(this._delegate,d)}confirmPasswordReset(d,g){return function oD(p,u,d){return pp.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var w=this;return(0,k.Z)(function*(){return Ti(w._delegate,function Jr(p,u,d){return No.apply(this,arguments)}(w._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Vc(p,u){return Vo.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function pt(p,u){const d=$i.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,k.Z)(function*(){tu(Qp(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function pP(p,u){return Ld.apply(this,arguments)}(d._delegate,zi);return g?Ti(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Tl(p,u){Yt(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,g,w){const{next:D,error:B,complete:J}=Sv(d,g,w);return this._delegate.onAuthStateChanged(D,B,J)}onIdTokenChanged(d,g,w){const{next:D,error:B,complete:J}=Sv(d,g,w);return this._delegate.onIdTokenChanged(D,B,J)}sendSignInLinkToEmail(d,g){return function Fo(p,u,d){return Lo.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function Ty(p,u,d){return ul.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,k.Z)(function*(){let w;switch(function WD(p,u){$o(Object.values(bi).includes(u),p,"invalid-persistence-type"),(0,fe.b$)()?$o(u!==bi.SESSION,p,"unsupported-persistence-type"):(0,fe.UG)()?$o(u===bi.NONE,p,"unsupported-persistence-type"):rr()?$o(u===bi.NONE||u===bi.LOCAL&&(0,fe.hl)(),p,"unsupported-persistence-type"):$o(u===bi.NONE||bv(),p,"unsupported-persistence-type")}(g._delegate,d),d){case bi.SESSION:w=vr;break;case bi.LOCAL:w=(yield ct(ml)._isAvailable())?ml:sr;break;case bi.NONE:w=mr;break;default:return Kt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(w)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Ti(this._delegate,function yy(p){return lp.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Ti(this._delegate,Dd(this._delegate,d))}signInWithCustomToken(d){return Ti(this._delegate,function Qe(p,u){return _r.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return Ti(this._delegate,function nr(p,u,d){return(0,$e._isFirebaseServerApp)(p.app)?Promise.reject(rt(p)):Dd((0,fe.m9)(p),wi.credential(u,d)).catch(function(){var g=(0,k.Z)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&ci(p),w});return function(w){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return Ti(this._delegate,function Lc(p,u,d){return Sd.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return eg(this._delegate,function yD(p,u,d){return os.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,k.Z)(function*(){return tu(Qp(),g._delegate,"operation-not-supported-in-this-environment"),Ti(g._delegate,function Yy(p,u,d){return Fd.apply(this,arguments)}(g._delegate,d,zi))})()}signInWithRedirect(d){var g=this;return(0,k.Z)(function*(){return tu(Qp(),g._delegate,"operation-not-supported-in-this-environment"),yield Dv(g._delegate),we(g._delegate,d,zi)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Ds(p,u){return ya.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=bi,p})();function Sv(p,u,d){let g=p;"function"!=typeof p&&({next:g,error:u,complete:d}=p);const w=g;return{next:B=>w(B&&ls.getOrCreate(B)),error:u,complete:d}}function Yd(p,u){const d=function CP(p,u){const d=Di();if(!d)return[];const g=qe(Ml,p,u);switch(d.getItem(g)){case bi.NONE:return[mr];case bi.LOCAL:return[ml,vr];case bi.SESSION:return[vr];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(ml)&&d.push(ml),typeof window<"u")for(const g of[sr,vr])d.includes(g)||d.push(g);return d.includes(mr)||d.push(mr),d}class rg{constructor(){this.providerId="phone",this._delegate=new Ws(qD(lt.Z.auth()))}static credential(u,d){return Ws.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}rg.PHONE_SIGN_IN_METHOD=Ws.PHONE_SIGN_IN_METHOD,rg.PROVIDER_ID=Ws.PROVIDER_ID;const Av=Ie;class ig{constructor(u,d,g=lt.Z.app()){var w;Av(null===(w=g.options)||void 0===w?void 0:w.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new qy(g.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Mv(p){p.INTERNAL.registerComponent(new qn.wA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),g=u.getProvider("auth");return new Rl(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wi,FacebookAuthProvider:_d,GithubAuthProvider:sp,GoogleAuthProvider:yd,OAuthProvider:ho,SAMLAuthProvider:Nc,PhoneAuthProvider:rg,PhoneMultiFactorGenerator:OD,RecaptchaVerifier:ig,TwitterAuthProvider:vd,Auth:Rl,AuthCredential:al,Error:fe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.9")}(lt.Z)},861:(ao,Or,vt)=>{function k($e,fe,Ct,Fn,qn,Nr,Ot){try{var Ce=$e[Nr](Ot),Re=Ce.value}catch(Ye){return void Ct(Ye)}Ce.done?fe(Re):Promise.resolve(Re).then(Fn,qn)}function lt($e){return function(){var fe=this,Ct=arguments;return new Promise(function(Fn,qn){var Nr=$e.apply(fe,Ct);function Ot(Re){k(Nr,Fn,qn,Ot,Ce,"next",Re)}function Ce(Re){k(Nr,Fn,qn,Ot,Ce,"throw",Re)}Ot(void 0)})}}vt.d(Or,{Z:()=>lt})},582:(ao,Or,vt)=>{vt.d(Or,{FC:()=>Kt,KL:()=>oi,_T:()=>fe,mG:()=>Ye,pi:()=>$e,qq:()=>Mn});var $e=function(){return $e=Object.assign||function(de){for(var X,ve=1,Oe=arguments.length;ve<Oe;ve++)for(var ue in X=arguments[ve])Object.prototype.hasOwnProperty.call(X,ue)&&(de[ue]=X[ue]);return de},$e.apply(this,arguments)};function fe(le,de){var X={};for(var ve in le)Object.prototype.hasOwnProperty.call(le,ve)&&de.indexOf(ve)<0&&(X[ve]=le[ve]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(ve=Object.getOwnPropertySymbols(le);Oe<ve.length;Oe++)de.indexOf(ve[Oe])<0&&Object.prototype.propertyIsEnumerable.call(le,ve[Oe])&&(X[ve[Oe]]=le[ve[Oe]])}return X}function Ye(le,de,X,ve){return new(X||(X=Promise))(function(ue,ke){function Vt(Dt){try{nt(ve.next(Dt))}catch(Rn){ke(Rn)}}function Ne(Dt){try{nt(ve.throw(Dt))}catch(Rn){ke(Rn)}}function nt(Dt){Dt.done?ue(Dt.value):function Oe(ue){return ue instanceof X?ue:new X(function(ke){ke(ue)})}(Dt.value).then(Vt,Ne)}nt((ve=ve.apply(le,de||[])).next())})}function Mn(le){return this instanceof Mn?(this.v=le,this):new Mn(le)}function Kt(le,de,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ve=X.apply(le,de||[]),ue=[];return Oe={},Vt("next"),Vt("throw"),Vt("return",function ke(Jt){return function(dr){return Promise.resolve(dr).then(Jt,Rn)}}),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Vt(Jt,dr){ve[Jt]&&(Oe[Jt]=function(tr){return new Promise(function(Yr,ai){ue.push([Jt,tr,Yr,ai])>1||Ne(Jt,tr)})},dr&&(Oe[Jt]=dr(Oe[Jt])))}function Ne(Jt,dr){try{!function nt(Jt){Jt.value instanceof Mn?Promise.resolve(Jt.value.v).then(Dt,Rn):ts(ue[0][2],Jt)}(ve[Jt](dr))}catch(tr){ts(ue[0][3],tr)}}function Dt(Jt){Ne("next",Jt)}function Rn(Jt){Ne("throw",Jt)}function ts(Jt,dr){Jt(dr),ue.shift(),ue.length&&Ne(ue[0][0],ue[0][1])}}function oi(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,de=le[Symbol.asyncIterator];return de?de.call(le):(le=function Zt(le){var de="function"==typeof Symbol&&Symbol.iterator,X=de&&le[de],ve=0;if(X)return X.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&ve>=le.length&&(le=void 0),{value:le&&le[ve++],done:!le}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),X={},ve("next"),ve("throw"),ve("return"),X[Symbol.asyncIterator]=function(){return this},X);function ve(ue){X[ue]=le[ue]&&function(ke){return new Promise(function(Vt,Ne){!function Oe(ue,ke,Vt,Ne){Promise.resolve(Ne).then(function(nt){ue({value:nt,done:Vt})},ke)}(Vt,Ne,(ke=le[ue](ke)).done,ke.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},ao=>{ao(ao.s=533)}]);