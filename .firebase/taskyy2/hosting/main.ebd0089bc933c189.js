"use strict";(self.webpackChunktasky=self.webpackChunktasky||[]).push([[179],{58:(Wo,ur,Et)=>{Et.d(ur,{BH:()=>bn,G6:()=>hc,L:()=>Ut,LL:()=>ge,Pz:()=>on,Sg:()=>Or,UG:()=>Sn,ZB:()=>nt,ZR:()=>Fe,aH:()=>jn,b$:()=>Ln,eu:()=>_e,hl:()=>fe,jU:()=>Ae,m9:()=>ya,ne:()=>Gr,pd:()=>eo,r3:()=>gi,ru:()=>Zn,tV:()=>De,uI:()=>mi,vZ:()=>al,w1:()=>Ps,xO:()=>ll,xb:()=>Fr,z$:()=>at,zd:()=>zu});const be=function(te){const Q=[];let ne=0;for(let we=0;we<te.length;we++){let le=te.charCodeAt(we);le<128?Q[ne++]=le:le<2048?(Q[ne++]=le>>6|192,Q[ne++]=63&le|128):55296==(64512&le)&&we+1<te.length&&56320==(64512&te.charCodeAt(we+1))?(le=65536+((1023&le)<<10)+(1023&te.charCodeAt(++we)),Q[ne++]=le>>18|240,Q[ne++]=le>>12&63|128,Q[ne++]=le>>6&63|128,Q[ne++]=63&le|128):(Q[ne++]=le>>12|224,Q[ne++]=le>>6&63|128,Q[ne++]=63&le|128)}return Q},Yn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,Q){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let le=0;le<te.length;le+=3){const ve=te[le],tt=le+1<te.length,fn=tt?te[le+1]:0,lt=le+2<te.length,Pi=lt?te[le+2]:0;let Kn=(15&fn)<<2|Pi>>6,wn=63&Pi;lt||(wn=64,tt||(Kn=64)),we.push(ne[ve>>2],ne[(3&ve)<<4|fn>>4],ne[Kn],ne[wn])}return we.join("")},encodeString(te,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(te):this.encodeByteArray(be(te),Q)},decodeString(te,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(te):function(te){const Q=[];let ne=0,we=0;for(;ne<te.length;){const le=te[ne++];if(le<128)Q[we++]=String.fromCharCode(le);else if(le>191&&le<224){const ve=te[ne++];Q[we++]=String.fromCharCode((31&le)<<6|63&ve)}else if(le>239&&le<365){const lt=((7&le)<<18|(63&te[ne++])<<12|(63&te[ne++])<<6|63&te[ne++])-65536;Q[we++]=String.fromCharCode(55296+(lt>>10)),Q[we++]=String.fromCharCode(56320+(1023&lt))}else{const ve=te[ne++],tt=te[ne++];Q[we++]=String.fromCharCode((15&le)<<12|(63&ve)<<6|63&tt)}}return Q.join("")}(this.decodeStringToByteArray(te,Q))},decodeStringToByteArray(te,Q){this.init_();const ne=Q?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let le=0;le<te.length;){const ve=ne[te.charAt(le++)],fn=le<te.length?ne[te.charAt(le)]:0;++le;const Pi=le<te.length?ne[te.charAt(le)]:64;++le;const Je=le<te.length?ne[te.charAt(le)]:64;if(++le,null==ve||null==fn||null==Pi||null==Je)throw new li;we.push(ve<<2|fn>>4),64!==Pi&&(we.push(fn<<4&240|Pi>>2),64!==Je&&we.push(Pi<<6&192|Je))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}};class li extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ut=function(te){return function(te){const Q=be(te);return Yn.encodeByteArray(Q,!0)}(te).replace(/\./g,"")},De=function(te){try{return Yn.decodeString(te,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function nt(te,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return Q}for(const ne in Q)!Q.hasOwnProperty(ne)||!Lt(ne)||(te[ne]=nt(te[ne],Q[ne]));return te}function Lt(te){return"__proto__"!==te}const It=()=>{try{return function en(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Q=te&&De(te[1]);return Q&&JSON.parse(Q)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},jn=()=>{var te;return null===(te=It())||void 0===te?void 0:te.config},on=te=>{var Q;return null===(Q=It())||void 0===Q?void 0:Q[`_${te}`]};class bn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Q,ne)=>{this.resolve=Q,this.reject=ne})}wrapCallback(Q){return(ne,we)=>{ne?this.reject(ne):this.resolve(we),"function"==typeof Q&&(this.promise.catch(()=>{}),1===Q.length?Q(ne):Q(ne,we))}}}function Or(te,Q){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=Q||"demo-project",le=te.iat||0,ve=te.sub||te.user_id;if(!ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const tt=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:le,exp:le+3600,auth_time:le,sub:ve,user_id:ve,firebase:{sign_in_provider:"custom",identities:{}}},te);return[Ut(JSON.stringify({alg:"none",type:"JWT"})),Ut(JSON.stringify(tt)),""].join(".")}function at(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mi(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function Sn(){var te;const Q=null===(te=It())||void 0===te?void 0:te.forceEnvironment;if("node"===Q)return!0;if("browser"===Q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Zn(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function Ln(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ps(){const te=at();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function hc(){return!Sn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((te,Q)=>{try{let ne=!0;const we="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(we);le.onsuccess=()=>{le.result.close(),ne||self.indexedDB.deleteDatabase(we),te(!0)},le.onupgradeneeded=()=>{ne=!1},le.onerror=()=>{var ve;Q((null===(ve=le.error)||void 0===ve?void 0:ve.message)||"")}}catch(ne){Q(ne)}})}class Fe extends Error{constructor(Q,ne,we){super(ne),this.code=Q,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor(Q,ne,we){this.service=Q,this.serviceName=ne,this.errors=we}create(Q,...ne){const we=ne[0]||{},le=`${this.service}/${Q}`,ve=this.errors[Q],tt=ve?function Pe(te,Q){return te.replace(Wt,(ne,we)=>{const le=Q[we];return null!=le?String(le):`<${we}?>`})}(ve,we):"Error";return new Fe(le,`${this.serviceName}: ${tt} (${le}).`,we)}}const Wt=/\{\$([^}]+)}/g;function gi(te,Q){return Object.prototype.hasOwnProperty.call(te,Q)}function Fr(te){for(const Q in te)if(Object.prototype.hasOwnProperty.call(te,Q))return!1;return!0}function al(te,Q){if(te===Q)return!0;const ne=Object.keys(te),we=Object.keys(Q);for(const le of ne){if(!we.includes(le))return!1;const ve=te[le],tt=Q[le];if(ci(ve)&&ci(tt)){if(!al(ve,tt))return!1}else if(ve!==tt)return!1}for(const le of we)if(!ne.includes(le))return!1;return!0}function ci(te){return null!==te&&"object"==typeof te}function ll(te){const Q=[];for(const[ne,we]of Object.entries(te))Array.isArray(we)?we.forEach(le=>{Q.push(encodeURIComponent(ne)+"="+encodeURIComponent(le))}):Q.push(encodeURIComponent(ne)+"="+encodeURIComponent(we));return Q.length?"&"+Q.join("&"):""}function zu(te){const Q={};return te.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[le,ve]=we.split("=");Q[decodeURIComponent(le)]=decodeURIComponent(ve)}}),Q}function eo(te){const Q=te.indexOf("?");if(!Q)return"";const ne=te.indexOf("#",Q);return te.substring(Q,ne>0?ne:void 0)}function Gr(te,Q){const ne=new to(te,Q);return ne.subscribe.bind(ne)}class to{constructor(Q,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{Q(this)}).catch(we=>{this.error(we)})}next(Q){this.forEachObserver(ne=>{ne.next(Q)})}error(Q){this.forEachObserver(ne=>{ne.error(Q)}),this.close(Q)}complete(){this.forEachObserver(Q=>{Q.complete()}),this.close()}subscribe(Q,ne,we){let le;if(void 0===Q&&void 0===ne&&void 0===we)throw new Error("Missing Observer.");le=function no(te,Q){if("object"!=typeof te||null===te)return!1;for(const ne of Q)if(ne in te&&"function"==typeof te[ne])return!0;return!1}(Q,["next","error","complete"])?Q:{next:Q,error:ne,complete:we},void 0===le.next&&(le.next=In),void 0===le.error&&(le.error=In),void 0===le.complete&&(le.complete=In);const ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch{}}),this.observers.push(le),ve}unsubscribeOne(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Q){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,Q)}sendOne(Q,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Q])try{ne(this.observers[Q])}catch(we){typeof console<"u"&&console.error&&console.error(we)}})}close(Q){this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}function ya(te){return te&&te._delegate?te._delegate:te}},271:(Wo,ur,Et)=>{function j(n){return"function"==typeof n}function ht(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Ze=ht(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function be(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class St{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(j(i))try{i()}catch(s){t=s instanceof Ze?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{dr(s)}catch(o){t=t??[],o instanceof Ze?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Ze(t)}}add(t){var e;if(t&&t!==this)if(this.closed)dr(t);else{if(t instanceof St){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&be(e,t)}remove(t){const{_finalizers:e}=this;e&&be(e,t),t instanceof St&&t._removeParent(this)}}St.EMPTY=(()=>{const n=new St;return n.closed=!0,n})();const Yn=St.EMPTY;function li(n){return n instanceof St||n&&"closed"in n&&j(n.remove)&&j(n.add)&&j(n.unsubscribe)}function dr(n){j(n)?n():n.unsubscribe()}const Ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},De={setTimeout(n,t,...e){const{delegate:i}=De;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=De;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Re(n){De.setTimeout(()=>{const{onUnhandledError:t}=Ut;if(!t)throw n;t(n)})}function nt(){}const Lt=sn("C",void 0,void 0);function sn(n,t,e){return{kind:n,value:t,error:e}}let mt=null;function It(n){if(Ut.useDeprecatedSynchronousErrorHandling){const t=!mt;if(t&&(mt={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=mt;if(mt=null,e)throw i}}else n()}class pr extends St{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,li(t)&&t.add(this)):this.destination=Ae}static create(t,e,i){return new Or(t,e,i)}next(t){this.isStopped?Sn(function hr(n){return sn("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Sn(function en(n){return sn("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Sn(Lt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const jn=Function.prototype.bind;function on(n,t){return jn.call(n,t)}class bn{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){at(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){at(i)}else at(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){at(e)}}}class Or extends pr{constructor(t,e,i){let r;if(super(),j(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Ut.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&on(t.next,s),error:t.error&&on(t.error,s),complete:t.complete&&on(t.complete,s)}):r=t}this.destination=new bn(r)}}function at(n){Ut.useDeprecatedSynchronousErrorHandling?function fr(n){Ut.useDeprecatedSynchronousErrorHandling&&mt&&(mt.errorThrown=!0,mt.error=n)}(n):Re(n)}function Sn(n,t){const{onStoppedNotification:e}=Ut;e&&De.setTimeout(()=>e(n,t))}const Ae={closed:!0,next:nt,error:function mi(n){throw n},complete:nt},Zn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ln(n){return n}function Ps(n){return 0===n.length?Ln:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}let ft=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const s=function fe(n){return n&&n instanceof pr||function hc(n){return n&&j(n.next)&&j(n.error)&&j(n.complete)}(n)&&li(n)}(e)?e:new Or(e,i,r);return It(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=ol(i))((r,s)=>{const o=new Or({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Zn](){return this}pipe(...e){return Ps(e)(this)}toPromise(e){return new(e=ol(e))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function ol(n){var t;return null!==(t=n??Ut.Promise)&&void 0!==t?t:Promise}const _e=ht(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let se=(()=>{class n extends ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ee(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new _e}next(e){It(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){It(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){It(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Yn:(this.currentObservers=null,s.push(e),new St(()=>{this.currentObservers=null,be(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){const e=new ft;return e.source=this,e}}return n.create=(t,e)=>new Ee(t,e),n})();class Ee extends se{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:Yn}}function Fe(n){return j(n?.lift)}function ge(n){return t=>{if(Fe(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pe(n,t,e,i,r){return new Wt(n,t,e,i,r)}class Wt extends pr{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Oe(n,t){return ge((e,i)=>{let r=0;e.subscribe(Pe(i,s=>{i.next(n.call(t,s,r++))}))})}var ot=Et(582);const At=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Un(n){return j(n?.then)}function Os(n){return j(n[Zn])}function hn(n){return Symbol.asyncIterator&&j(n?.[Symbol.asyncIterator])}function ki(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const xr=function gi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Fr(n){return j(n?.[xr])}function fc(n){return(0,ot.FC)(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,ot.qq)(e.read());if(r)return yield(0,ot.qq)(void 0);yield yield(0,ot.qq)(i)}}finally{e.releaseLock()}})}function al(n){return j(n?.getReader)}function ci(n){if(n instanceof ft)return n;if(null!=n){if(Os(n))return function Uu(n){return new ft(t=>{const e=n[Zn]();if(j(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(At(n))return function ll(n){return new ft(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(Un(n))return function zu(n){return new ft(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Re)})}(n);if(hn(n))return Hu(n);if(Fr(n))return function eo(n){return new ft(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(al(n))return function Gr(n){return Hu(fc(n))}(n)}throw ki(n)}function Hu(n){return new ft(t=>{(function to(n,t){var e,i,r,s;return(0,ot.mG)(this,void 0,void 0,function*(){try{for(e=(0,ot.KL)(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Mi(n,t,e,i=0,r=!1){const s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function In(n,t,e=1/0){return j(t)?In((i,r)=>Oe((s,o)=>t(i,s,r,o))(ci(n(i,r))),e):("number"==typeof t&&(e=t),ge((i,r)=>function no(n,t,e,i,r,s,o,a){const l=[];let c=0,u=0,f=!1;const g=()=>{f&&!l.length&&!c&&t.complete()},v=x=>c<i?b(x):l.push(x),b=x=>{s&&t.next(x),c++;let E=!1;ci(e(x,u++)).subscribe(Pe(t,O=>{r?.(O),s?v(O):t.next(O)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;l.length&&c<i;){const O=l.shift();o?Mi(t,o,()=>b(O)):b(O)}g()}catch(O){t.error(O)}}))};return n.subscribe(Pe(t,v,()=>{f=!0,g()})),()=>{a?.()}}(i,r,n,e)))}function Fs(n=1/0){return In(Ln,n)}const yi=new ft(n=>n.complete());function pc(n){return n&&j(n.schedule)}function Yr(n){return n[n.length-1]}function cl(n){return j(Yr(n))?n.pop():void 0}function Ri(n){return pc(Yr(n))?n.pop():void 0}function ys(n,t=0){return ge((e,i)=>{e.subscribe(Pe(i,r=>Mi(i,n,()=>i.next(r),t),()=>Mi(i,n,()=>i.complete(),t),r=>Mi(i,n,()=>i.error(r),t)))})}function Zr(n,t=0){return ge((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function ya(n,t){if(!n)throw new Error("Iterable cannot be null");return new ft(e=>{Mi(e,t,()=>{const i=n[Symbol.asyncIterator]();Mi(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function ne(n,t){return t?function Q(n,t){if(null!=n){if(Os(n))return function va(n,t){return ci(n).pipe(Zr(t),ys(t))}(n,t);if(At(n))return function gc(n,t){return new ft(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(Un(n))return function jh(n,t){return ci(n).pipe(Zr(t),ys(t))}(n,t);if(hn(n))return ya(n,t);if(Fr(n))return function Wu(n,t){return new ft(e=>{let i;return Mi(e,t,()=>{i=n[xr](),Mi(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>j(i?.return)&&i.return()})}(n,t);if(al(n))return function te(n,t){return ya(fc(n),t)}(n,t)}throw ki(n)}(n,t):ci(n)}function we(...n){const t=Ri(n),e=function mc(n,t){return"number"==typeof Yr(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?ci(i[0]):Fs(e)(ne(i,t)):yi}class le extends se{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}function ve(...n){return ne(n,Ri(n))}function tt(n={}){const{connector:t=(()=>new se),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,f=!1;const g=()=>{a?.unsubscribe(),a=void 0},v=()=>{g(),o=l=void 0,u=f=!1},b=()=>{const x=o;v(),x?.unsubscribe()};return ge((x,E)=>{c++,!f&&!u&&g();const O=l=l??t();E.add(()=>{c--,0===c&&!f&&!u&&(a=fn(b,r))}),O.subscribe(E),!o&&c>0&&(o=new Or({next:k=>O.next(k),error:k=>{f=!0,g(),a=fn(v,e,k),O.error(k)},complete:()=>{u=!0,g(),a=fn(v,i),O.complete()}}),ci(x).subscribe(o))})(s)}}function fn(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new Or({next:()=>{i.unsubscribe(),n()}});return ci(t(...e)).subscribe(i)}function lt(n,t){return ge((e,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();e.subscribe(Pe(i,l=>{r?.unsubscribe();let c=0;const u=s++;ci(n(l,u)).subscribe(r=Pe(i,f=>i.next(t?t(l,f,u,c++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Pi(n,t=Ln){return n=n??Oi,ge((e,i)=>{let r,s=!0;e.subscribe(Pe(i,o=>{const a=t(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function Oi(n,t){return n===t}function Je(n){for(let t in n)if(n[t]===Je)return t;throw Error("Could not find renamed property on target object.")}function Kn(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function wn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(wn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function ba(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const qu=Je({__forward_ref__:Je});function mn(n){return n.__forward_ref__=mn,n.toString=function(){return wn(this())},n}function ct(n){return qo(n)?n():n}function qo(n){return"function"==typeof n&&n.hasOwnProperty(qu)&&n.__forward_ref__===mn}function _c(n){return n&&!!n.\u0275providers}const Go="https://g.co/ng/security#xss";class H extends Error{constructor(t,e){super(function ae(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function de(n){return"string"==typeof n?n:null==n?"":String(n)}function An(n,t){throw new H(-201,!1)}function Ls(n,t){null==n&&function pt(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function Se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function vc(n){return eb(n,Hh)||eb(n,nb)}function eb(n,t){return n.hasOwnProperty(t)?n[t]:null}function Gu(n){return n&&(n.hasOwnProperty($h)||n.hasOwnProperty(yc))?n[$h]:null}const Hh=Je({\u0275prov:Je}),$h=Je({\u0275inj:Je}),nb=Je({ngInjectableDef:Je}),yc=Je({ngInjectorDef:Je});var Bt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Bt||{});let Yu;function Er(n){const t=Yu;return Yu=n,t}function rb(n,t,e){const i=vc(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Bt.Optional?null:void 0!==t?t:void An(wn(n))}const kn=globalThis;class Ce{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Se({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const dl={},Bm="__NG_DI_FLAG__",wc="ngTempTokenPath",Yo=/\n/gm,ub="__source";let Nr;function Eo(n){const t=Nr;return Nr=n,t}function ND(n,t=Bt.Default){if(void 0===Nr)throw new H(-203,!1);return null===Nr?rb(n,void 0,t):Nr.get(n,t&Bt.Optional?null:void 0,t)}function ie(n,t=Bt.Default){return(function ib(){return Yu}()||ND)(ct(n),t)}function Ve(n,t=Bt.Default){return ie(n,Wh(t))}function Wh(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Um(n){const t=[];for(let e=0;e<n.length;e++){const i=ct(n[e]);if(Array.isArray(i)){if(0===i.length)throw new H(900,!1);let r,s=Bt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=fl(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(ie(r,s))}else t.push(ie(i))}return t}function hl(n,t){return n[Bm]=t,n.prototype[Bm]=t,n}function fl(n){return n[Bm]}function bs(n){return{toString:n}.toString()}var zm=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zm||{}),Kr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Kr||{});const Qi={},zt=[],Zo=Je({\u0275cmp:Je}),qh=Je({\u0275dir:Je}),Gh=Je({\u0275pipe:Je}),Hm=Je({\u0275mod:Je}),Ko=Je({\u0275fac:Je}),Do=Je({__NG_ELEMENT_ID__:Je}),hb=Je({__NG_ENV_ID__:Je});function Ju(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}function Yh(n,t,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{const s=r,o=e[++i];Zh(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function $m(n){return 3===n||4===n||6===n}function Zh(n){return 64===n.charCodeAt(0)}function Dr(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||Wm(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function Wm(n,t,e,i,r){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const fb="ng-template";function qm(n,t,e){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(e&&"class"===s&&-1!==Ju(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function ed(n){return 4===n.type&&n.value!==fb}function pb(n,t,e){return t===(4!==n.type||e?n.value:fb)}function mb(n,t,e){let i=4;const r=n.attrs||[],s=function Qh(n){for(let t=0;t<n.length;t++)if($m(n[t]))return t;return n.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!pb(n,l,e)||""===l&&1===t.length){if(io(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!qm(n.attrs,c,e)){if(io(i))return!1;o=!0}continue}const f=Gm(8&i?"class":l,r,ed(n),e);if(-1===f){if(io(i))return!1;o=!0;continue}if(""!==c){let g;g=f>s?"":r[f+1].toLowerCase();const v=8&i?g:null;if(v&&-1!==Ju(v,c,0)||2&i&&c!==g){if(io(i))return!1;o=!0}}}}else{if(!o&&!io(i)&&!io(l))return!1;if(o&&io(l))continue;o=!1,i=l|1&i}}return io(i)||o}function io(n){return 0==(1&n)}function Gm(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Zm(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function Kh(n,t,e=!1){for(let i=0;i<t.length;i++)if(mb(n,t[i],e))return!0;return!1}function gb(n,t){e:for(let e=0;e<t.length;e++){const i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Xh(n,t){return n?":not("+t.trim()+")":t}function _b(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!io(o)&&(t+=Xh(s,r),r=""),i=o,s=s||!io(i);e++}return""!==r&&(t+=Xh(s,r)),t}function Dt(n){return bs(()=>{const t=tf(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Kr.Emulated,styles:n.styles||zt,_:null,schemas:n.schemas||null,tView:null,id:""};bb(e);const i=n.dependencies;return e.directiveDefs=Cc(i,!1),e.pipeDefs=Cc(i,!0),e.id=function Xm(n){let t=0;const e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(e),e})}function Qm(n){return jt(n)||Ni(n)}function yb(n){return null!==n}function gt(n){return bs(()=>({type:n.type,bootstrap:n.bootstrap||zt,declarations:n.declarations||zt,imports:n.imports||zt,exports:n.exports||zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ef(n,t){if(null==n)return Qi;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,t&&(t[r]=s)}return e}function Ke(n){return bs(()=>{const t=tf(n);return bb(t),t})}function Fi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function jt(n){return n[Zo]||null}function Ni(n){return n[qh]||null}function mr(n){return n[Gh]||null}function Lr(n,t){const e=n[Hm]||null;if(!e&&!0===t)throw new Error(`Type ${wn(n)} does not have '\u0275mod' property.`);return e}function tf(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Qi,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ef(n.inputs,t),outputs:ef(n.outputs)}}function bb(n){n.features?.forEach(t=>t(n))}function Cc(n,t){if(!n)return null;const e=t?mr:Qm;return()=>("function"==typeof n?n():n).map(i=>e(i)).filter(yb)}const ui=0,$e=1,wt=2,Mn=3,ro=4,pl=5,Tr=6,wa=7,_i=8,Ca=9,xa=10,yt=11,td=12,nf=13,xc=14,Qn=15,nd=16,Ea=17,To=18,ml=19,wb=20,So=21,Xo=22,gl=23,id=24,Ot=25,Jm=1,eg=2,Vs=7,so=9,gr=11;function Qr(n){return Array.isArray(n)&&"object"==typeof n[Jm]}function Vr(n){return Array.isArray(n)&&!0===n[Jm]}function tg(n){return 0!=(4&n.flags)}function Dc(n){return n.componentOffset>-1}function ng(n){return 1==(1&n.flags)}function Io(n){return!!n.template}function rd(n){return 0!=(512&n[wt])}function _l(n,t){return n.hasOwnProperty(Ko)?n[Ko]:null}let bi=null,rg=!1;function Li(n){const t=bi;return bi=n,t}const Eb={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Sc(n){if(!ad(n)||n.dirty){if(!n.producerMustRecompute(n)&&!lf(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Sb(n){n.dirty=!0,function Tb(n){if(void 0===n.liveConsumerNode)return;const t=rg;rg=!0;try{for(const e of n.liveConsumerNode)e.dirty||Sb(e)}finally{rg=t}}(n),n.consumerMarkedDirty?.(n)}function sd(n){return n&&(n.nextProducerIndex=0),Li(n)}function sg(n,t){if(Li(t),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ad(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)od(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function lf(n){Jo(n);for(let t=0;t<n.producerNode.length;t++){const e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(Sc(e),i!==e.version))return!0}return!1}function Ib(n){if(Jo(n),ad(n))for(let t=0;t<n.producerNode.length;t++)od(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function od(n,t){if(function og(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Jo(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)od(n.producerNode[i],n.producerIndexOfThis[i]);const e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Jo(r),r.producerIndexOfThis[i]=t}}function ad(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Jo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Rb=null;function cd(n){const t=Li(null);try{return n()}finally{Li(t)}}const Nb=()=>{},YD=(()=>({...Eb,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Nb}))();class ZD{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Vi(){return Vb}function Vb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Bb),KD}function KD(){const n=Ub(this),t=n?.current;if(t){const e=n.previous;if(e===Qi)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function Bb(n,t,e,i){const r=this.declaredInputs[e],s=Ub(n)||function QD(n,t){return n[jb]=t}(n,{previous:Qi,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new ZD(l&&l.currentValue,t,a===Qi),n[i]=t}Vi.ngInherit=!0;const jb="__ngSimpleChanges__";function Ub(n){return n[jb]||null}const Bs=function(n,t,e){};function Rn(n){for(;Array.isArray(n);)n=n[ui];return n}function vl(n,t){return Rn(t[n])}function Sr(n,t){return Rn(t[n.index])}function df(n,t){return n.data[t]}function Ao(n,t){return n[t]}function Bi(n,t){const e=t[n];return Qr(e)?e:e[ui]}function Ta(n,t){return null==t?null:n[t]}function hf(n){n[Ea]=0}function Hb(n){1024&n[wt]||(n[wt]|=1024,Wb(n,1))}function $b(n){1024&n[wt]&&(n[wt]&=-1025,Wb(n,-1))}function Wb(n,t){let e=n[Mn];if(null===e)return;e[pl]+=t;let i=e;for(e=e[Mn];null!==e&&(1===t&&1===i[pl]||-1===t&&0===i[pl]);)e[pl]+=t,i=e,e=e[Mn]}const dt={lFrame:xg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Yb(){return dt.bindingsEnabled}function Ac(){return null!==dt.skipHydrationRootTNode}function Te(){return dt.lFrame.lView}function qt(){return dt.lFrame.tView}function J(n){return dt.lFrame.contextLView=n,n[_i]}function ee(n){return dt.lFrame.contextLView=null,n}function ji(){let n=Zb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Zb(){return dt.lFrame.currentTNode}function js(n,t){const e=dt.lFrame;e.currentTNode=n,e.isParent=t}function gg(){return dt.lFrame.isParent}function _g(){dt.lFrame.isParent=!1}function Xi(){const n=dt.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Sa(){return dt.lFrame.bindingIndex++}function ea(n){const t=dt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function Qb(n,t){const e=dt.lFrame;e.bindingIndex=e.bindingRootIndex=n,mf(t)}function mf(n){dt.lFrame.currentDirectiveIndex=n}function Xb(){return dt.lFrame.currentQueryIndex}function wg(n){dt.lFrame.currentQueryIndex=n}function oT(n){const t=n[$e];return 2===t.type?t.declTNode:1===t.type?n[Tr]:null}function gf(n,t,e){if(e&Bt.SkipSelf){let r=t,s=n;for(;!(r=r.parent,null!==r||e&Bt.Host||(r=oT(s),null===r||(s=s[xc],10&r.type))););if(null===r)return!1;t=r,n=s}const i=dt.lFrame=Jb();return i.currentTNode=t,i.lView=n,!0}function Cg(n){const t=Jb(),e=n[$e];dt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Jb(){const n=dt.lFrame,t=null===n?null:n.child;return null===t?xg(n):t}function xg(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function e0(){const n=dt.lFrame;return dt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const md=e0;function Eg(){const n=e0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Br(){return dt.lFrame.selectedIndex}function yl(n){dt.lFrame.selectedIndex=n}function Xn(){const n=dt.lFrame;return df(n.tView,n.selectedIndex)}let n0=!0;function _f(){return n0}function Ia(n){n0=n}function vf(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),null!=u&&(n.destroyHooks??=[]).push(e,u)}}function yf(n,t,e){s0(n,t,3,e)}function bf(n,t,e,i){(3&n[wt])===e&&s0(n,t,e,i)}function Tg(n,t){let e=n[wt];(3&e)===t&&(e&=8191,e+=1,n[wt]=e)}function s0(n,t,e,i){const s=i??-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&n[Ea]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[Ea]+=65536),(a<s||-1==s)&&(Sg(n,e,t,l),n[Ea]=(4294901760&n[Ea])+l+2),l++}function wf(n,t){Bs(4,n,t);const e=Li(null);try{t.call(n)}finally{Li(e),Bs(5,n,t)}}function Sg(n,t,e,i){const r=e[i]<0,s=e[i+1],a=n[r?-e[i]:e[i]];r?n[wt]>>13<n[Ea]>>16&&(3&n[wt])===t&&(n[wt]+=8192,wf(a,s)):wf(a,s)}const kc=-1;class bl{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Mc(n){return n!==kc}function Rc(n){return 32767&n}function gd(n,t){let e=function l0(n){return n>>16}(n),i=t;for(;e>0;)i=i[xc],e--;return i}let Ag=!0;function Cf(n){const t=Ag;return Ag=n,t}const c0=255,kg=5;let gT=0;const ta={};function ko(n,t){const e=u0(n,t);if(-1!==e)return e;const i=t[$e];i.firstCreatePass&&(n.injectorIndex=t.length,Mg(i.data,n),Mg(t,null),Mg(i.blueprint,null));const r=Pc(n,t),s=n.injectorIndex;if(Mc(r)){const o=Rc(r),a=gd(r,t),l=a[$e].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function Mg(n,t){n.push(0,0,0,0,0,0,0,0,t)}function u0(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Pc(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){if(i=_0(r),null===i)return kc;if(e++,r=r[xc],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return kc}function Rg(n,t,e){!function _T(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Do)&&(i=e[Do]),null==i&&(i=e[Do]=gT++);const r=i&c0;t.data[n+(r>>kg)]|=1<<r}(n,t,e)}function d0(n,t,e){if(e&Bt.Optional||void 0!==n)return n;An()}function h0(n,t,e,i){if(e&Bt.Optional&&void 0===i&&(i=null),!(e&(Bt.Self|Bt.Host))){const r=n[Ca],s=Er(void 0);try{return r?r.get(t,i,e&Bt.Optional):rb(t,i,e&Bt.Optional)}finally{Er(s)}}return d0(i,0,e)}function xf(n,t,e,i=Bt.Default,r){if(null!==n){if(2048&t[wt]&&!(i&Bt.Self)){const o=function Og(n,t,e,i,r){let s=n,o=t;for(;null!==s&&null!==o&&2048&o[wt]&&!(512&o[wt]);){const a=f0(s,o,e,i|Bt.Self,ta);if(a!==ta)return a;let l=s.parent;if(!l){const c=o[wb];if(c){const u=c.get(e,ta,i);if(u!==ta)return u}l=_0(o),o=o[xc]}s=l}return r}(n,t,e,i,ta);if(o!==ta)return o}const s=f0(n,t,e,i,ta);if(s!==ta)return s}return h0(t,e,i,r)}function f0(n,t,e,i,r){const s=function yT(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Do)?n[Do]:void 0;return"number"==typeof t?t>=0?t&c0:bT:t}(e);if("function"==typeof s){if(!gf(t,n,i))return i&Bt.Host?d0(r,0,i):h0(t,e,i,r);try{let o;if(o=s(i),null!=o||i&Bt.Optional)return o;An()}finally{md()}}else if("number"==typeof s){let o=null,a=u0(n,t),l=kc,c=i&Bt.Host?t[Qn][Tr]:null;for((-1===a||i&Bt.SkipSelf)&&(l=-1===a?Pc(n,t):t[a+8],l!==kc&&m0(i,!1)?(o=t[$e],a=Rc(l),t=gd(l,t)):a=-1);-1!==a;){const u=t[$e];if(p0(s,a,u.data)){const f=vT(a,t,e,o,i,c);if(f!==ta)return f}l=t[a+8],l!==kc&&m0(i,t[$e].data[a+8]===c)&&p0(s,a,t)?(o=u,a=Rc(l),t=gd(l,t)):a=-1}}return r}function vT(n,t,e,i,r,s){const o=t[$e],a=o.data[n+8],u=Oc(a,o,e,null==i?Dc(a)&&Ag:i!=o&&0!=(3&a.type),r&Bt.Host&&s===a);return null!==u?wl(t,o,u,a):ta}function Oc(n,t,e,i,r){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,u=s>>20,g=r?a+u:n.directiveEnd;for(let v=i?a:a+u;v<g;v++){const b=o[v];if(v<l&&e===b||v>=l&&b.type===e)return v}if(r){const v=o[l];if(v&&Io(v)&&v.type===e)return l}return null}function wl(n,t,e,i){let r=n[e];const s=t.data;if(function hT(n){return n instanceof bl}(r)){const o=r;o.resolving&&function _t(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new H(-200,`Circular dependency in DI detected for ${n}${e}`)}(function ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():de(n)}(s[e]));const a=Cf(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Er(o.injectImpl):null;gf(n,i,Bt.Default);try{r=n[e]=o.factory(void 0,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&function r0(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const o=Vb(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}(e,s[e],t)}finally{null!==c&&Er(c),Cf(a),o.resolving=!1,md()}}return r}function p0(n,t,e){return!!(e[t+(n>>kg)]&1<<n)}function m0(n,t){return!(n&Bt.Self||n&Bt.Host&&t)}class _r{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return xf(this._tNode,this._lView,t,Wh(i),e)}}function bT(){return new _r(ji(),Te())}function Ji(n){return bs(()=>{const t=n.prototype.constructor,e=t[Ko]||vd(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Ko]||vd(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function vd(n){return qo(n)?()=>{const t=vd(ct(n));return t&&t()}:_l(n)}function _0(n){const t=n[$e],e=t.type;return 2===e?t.declTNode:1===e?n[Tr]:null}const Fc="__parameters__";function Lc(n,t,e){return bs(()=>{const i=function Df(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const f=l.hasOwnProperty(Fc)?l[Fc]:Object.defineProperty(l,Fc,{value:[]})[Fc];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function jc(n,t){n.forEach(e=>Array.isArray(e)?jc(e,t):t(e))}function Jr(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Aa(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Uc(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}function es(n,t,e){let i=ws(n,t);return i>=0?n[1|i]=e:(i=~i,function Ng(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function Lg(n,t){const e=ws(n,t);if(e>=0)return n[1|e]}function ws(n,t){return function w0(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}(n,t,1)}const ia=hl(Lc("Optional"),8),bd=hl(Lc("SkipSelf"),4);function R0(n){return 128==(128&n.flags)}var zc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(zc||{});const Vq=/^>|^->|<!--|-->|--!>|<!-$/g,Bq=/(<|>)/g,jq="\u200b$1\u200b";const MT=new Map;let Uq=0;const PT="__ngContext__";function ns(n,t){Qr(t)?(n[PT]=t[ml],function Hq(n){MT.set(n[ml],n)}(t)):n[PT]=t}let OT;function FT(n,t){return OT(n,t)}function Yg(n){const t=n[Mn];return Vr(t)?t[Mn]:t}function dF(n){return fF(n[td])}function hF(n){return fF(n[ro])}function fF(n){for(;null!==n&&!Vr(n);)n=n[ro];return n}function Mf(n,t,e,i,r){if(null!=i){let s,o=!1;Vr(i)?s=i:Qr(i)&&(o=!0,i=i[ui]);const a=Rn(i);0===n&&null!==e?null==r?_F(t,e,a):wd(t,e,a,r||null,!0):1===n&&null!==e?wd(t,e,a,r||null,!0):2===n?function B0(n,t,e){const i=L0(n,t);i&&function lG(n,t,e,i){n.removeChild(t,e,i)}(n,i,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=s&&function dG(n,t,e,i,r){const s=e[Vs];s!==Rn(e)&&Mf(t,n,i,s,r);for(let a=gr;a<e.length;a++){const l=e[a];Kg(l[$e],l,n,t,i,s)}}(t,n,s,e,r)}}function NT(n,t){return n.createComment(function iF(n){return n.replace(Vq,t=>t.replace(Bq,jq))}(t))}function F0(n,t,e){return n.createElement(t,e)}function mF(n,t){const e=n[so],i=e.indexOf(t);$b(t),e.splice(i,1)}function N0(n,t){if(n.length<=gr)return;const e=gr+t,i=n[e];if(i){const r=i[nd];null!==r&&r!==n&&mF(r,i),t>0&&(n[e-1][ro]=i[ro]);const s=Aa(n,gr+t);!function eG(n,t){Kg(n,t,t[yt],2,null,null),t[ui]=null,t[Tr]=null}(i[$e],i);const o=s[To];null!==o&&o.detachView(s[$e]),i[Mn]=null,i[ro]=null,i[wt]&=-129}return i}function LT(n,t){if(!(256&t[wt])){const e=t[yt];t[gl]&&Ib(t[gl]),t[id]&&Ib(t[id]),e.destroyNode&&Kg(n,t,e,3,null,null),function iG(n){let t=n[td];if(!t)return VT(n[$e],n);for(;t;){let e=null;if(Qr(t))e=t[td];else{const i=t[gr];i&&(e=i)}if(!e){for(;t&&!t[ro]&&t!==n;)Qr(t)&&VT(t[$e],t),t=t[Mn];null===t&&(t=n),Qr(t)&&VT(t[$e],t),e=t&&t[ro]}t=e}}(t)}}function VT(n,t){if(!(256&t[wt])){t[wt]&=-129,t[wt]|=256,function aG(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof bl)){const s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Bs(4,a,l);try{l.call(a)}finally{Bs(5,a,l)}}else{Bs(4,r,s);try{s.call(r)}finally{Bs(5,r,s)}}}}}(n,t),function oG(n,t){const e=n.cleanup,i=t[wa];if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else e[s].call(i[e[s+1]]);null!==i&&(t[wa]=null);const r=t[So];if(null!==r){t[So]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,t),1===t[$e].type&&t[yt].destroy();const e=t[nd];if(null!==e&&Vr(t[Mn])){e!==t[Mn]&&mF(e,t);const i=t[To];null!==i&&i.detachView(n)}!function $q(n){MT.delete(n[ml])}(t)}}function BT(n,t,e){return function gF(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[ui];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Kr.None||s===Kr.Emulated)return null}return Sr(i,e)}}(n,t.parent,e)}function wd(n,t,e,i,r){n.insertBefore(t,e,i,r)}function _F(n,t,e){n.appendChild(t,e)}function vF(n,t,e,i,r){null!==i?wd(n,t,e,i,r):_F(n,t,e)}function L0(n,t){return n.parentNode(t)}function yF(n,t,e){return wF(n,t,e)}let jT,j0,$T,U0,wF=function bF(n,t,e){return 40&n.type?Sr(n,e):null};function V0(n,t,e,i){const r=BT(n,i,t),s=t[yt],a=yF(i.parent||t[Tr],i,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)vF(s,r,e[l],a,!1);else vF(s,r,e,a,!1);void 0!==jT&&jT(s,i,t,e,r)}function Zg(n,t){if(null!==t){const e=t.type;if(3&e)return Sr(t,n);if(4&e)return UT(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return Zg(n,i);{const r=n[t.index];return Vr(r)?UT(-1,r):Rn(r)}}if(32&e)return FT(t,n)()||Rn(n[t.index]);{const i=xF(n,t);return null!==i?Array.isArray(i)?i[0]:Zg(Yg(n[Qn]),i):Zg(n,t.next)}}return null}function xF(n,t){return null!==t?n[Qn][Tr].projection[t.projection]:null}function UT(n,t){const e=gr+n+1;if(e<t.length){const i=t[e],r=i[$e].firstChild;if(null!==r)return Zg(i,r)}return t[Vs]}function zT(n,t,e,i,r,s,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&ns(Rn(a),i),e.flags|=2),32!=(32&e.flags))if(8&l)zT(n,t,e.child,i,r,s,!1),Mf(t,n,r,a,s);else if(32&l){const c=FT(e,i);let u;for(;u=c();)Mf(t,n,r,u,s);Mf(t,n,r,a,s)}else 16&l?DF(n,t,i,e,r,s):Mf(t,n,r,a,s);e=o?e.projectionNext:e.next}}function Kg(n,t,e,i,r,s){zT(e,i,n.firstChild,t,r,s,!1)}function DF(n,t,e,i,r,s){const o=e[Qn],l=o[Tr].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Mf(t,n,r,l[c],s);else{let c=l;const u=o[Mn];R0(i)&&(c.flags|=128),zT(n,t,c,u,r,s,!0)}}function TF(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function SF(n,t,e){const{mergedAttrs:i,classes:r,styles:s}=e;null!==i&&Yh(n,t,i),null!==r&&TF(n,t,r),null!==s&&function fG(n,t,e){n.setAttribute(t,"style",e)}(n,t,s)}function Rf(n){return function HT(){if(void 0===j0&&(j0=null,kn.trustedTypes))try{j0=kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return j0}()?.createHTML(n)||n}function Pf(){if(void 0!==$T)return $T;if(typeof document<"u")return document;throw new H(210,!1)}function WT(){if(void 0===U0&&(U0=null,kn.trustedTypes))try{U0=kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return U0}function IF(n){return WT()?.createHTML(n)||n}function kF(n){return WT()?.createScriptURL(n)||n}class Cd{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Go})`}}function ao(n){return n instanceof Cd?n.changingThisBreaksApplicationSecurity:n}function ka(n,t){const e=function xG(n){return n instanceof Cd&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Go})`)}return e===t}class AG{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Rf(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class kG{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=Rf(t),e}}const RG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function z0(n){return(n=String(n)).match(RG)?n:"unsafe:"+n}function Cl(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Qg(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const RF=Cl("area,br,col,hr,img,wbr"),PF=Cl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),OF=Cl("rp,rt"),qT=Qg(RF,Qg(PF,Cl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qg(OF,Cl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qg(OF,PF)),GT=Cl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),FF=Qg(GT,Cl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PG=Cl("script,style,template");class OG{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!qT.hasOwnProperty(e))return this.sanitizedSomething=!0,!PG.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!FF.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;GT[a]&&(l=z0(l)),this.buf.push(" ",o,'="',NF(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();qT.hasOwnProperty(e)&&!RF.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(NF(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const FG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NG=/([^\#-~ |!])/g;function NF(n){return n.replace(/&/g,"&amp;").replace(FG,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(NG,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let H0;function LF(n,t){let e=null;try{H0=H0||function MF(n){const t=new kG(n);return function MG(){try{return!!(new window.DOMParser).parseFromString(Rf(""),"text/html")}catch{return!1}}()?new AG(t):t}(n);let i=t?String(t):"";e=H0.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=H0.getInertBodyElement(i)}while(i!==s);return Rf((new OG).sanitizeChildren(YT(e)||e))}finally{if(e){const i=YT(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function YT(n){return"content"in n&&function LG(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var jr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(jr||{});function $0(n){const t=Xg();return t?IF(t.sanitize(jr.HTML,n)||""):ka(n,"HTML")?IF(ao(n)):LF(Pf(),de(n))}function VF(n){const t=Xg();return t?t.sanitize(jr.URL,n)||"":ka(n,"URL")?ao(n):z0(de(n))}function BF(n){const t=Xg();if(t)return kF(t.sanitize(jr.RESOURCE_URL,n)||"");if(ka(n,"ResourceURL"))return kF(ao(n));throw new H(904,!1)}function Xg(){const n=Te();return n&&n[xa].sanitizer}const Jg=new Ce("ENVIRONMENT_INITIALIZER"),UF=new Ce("INJECTOR",-1),zF=new Ce("INJECTOR_DEF_TYPES");class ZT{get(t,e=dl){if(e===dl){const i=new Error(`NullInjectorError: No provider for ${wn(t)}!`);throw i.name="NullInjectorError",i}return e}}function W0(n){return{\u0275providers:n}}function HF(...n){return{\u0275providers:$F(0,n),\u0275fromNgModule:!0}}function $F(n,...t){const e=[],i=new Set;let r;const s=o=>{e.push(o)};return jc(t,o=>{const a=o;q0(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&WF(r,s),e}function WF(n,t){for(let e=0;e<n.length;e++){const{ngModule:i,providers:r}=n[e];KT(r,s=>{t(s,i)})}}function q0(n,t,e,i){if(!(n=ct(n)))return!1;let r=null,s=Gu(n);const o=!s&&jt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=Gu(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)q0(c,t,e,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{jc(s.imports,u=>{q0(u,t,e,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&WF(c,t)}if(!a){const c=_l(r)||(()=>new r);t({provide:r,useFactory:c,deps:zt},r),t({provide:zF,useValue:r,multi:!0},r),t({provide:Jg,useValue:()=>ie(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;KT(l,u=>{t(u,c)})}}}return r!==n&&void 0!==n.providers}function KT(n,t){for(let e of n)_c(e)&&(e=e.\u0275providers),Array.isArray(e)?KT(e,t):t(e)}const HG=Je({provide:String,useValue:Je});function QT(n){return null!==n&&"object"==typeof n&&HG in n}function xd(n){return"function"==typeof n}const XT=new Ce("Set Injector scope."),G0={},WG={};let JT;function Y0(){return void 0===JT&&(JT=new ZT),JT}class lo{}class Of extends lo{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tS(t,o=>this.processProvider(o)),this.records.set(UF,Ff(void 0,this)),r.has("environment")&&this.records.set(lo,Ff(void 0,this));const s=this.records.get(XT);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zF.multi,zt,Bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of t)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=Eo(this),i=Er(void 0);try{return t()}finally{Eo(e),Er(i)}}get(t,e=dl,i=Bt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(hb))return t[hb](this);i=Wh(i);const s=Eo(this),o=Er(void 0);try{if(!(i&Bt.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function KG(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ce}(t)&&vc(t);l=c&&this.injectableDefInScope(c)?Ff(eS(t),G0):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(i&Bt.Self?Y0():this.parent).get(t,e=i&Bt.Optional&&e===dl?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[wc]=a[wc]||[]).unshift(wn(t)),s)throw a;return function LD(n,t,e,i){const r=n[wc];throw t[ub]&&r.unshift(t[ub]),n.message=function VD(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=wn(t);if(Array.isArray(t))r=t.map(wn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):wn(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(Yo,"\n  ")}`}("\n"+n.message,r,e,i),n.ngTokenPath=r,n[wc]=null,n}(a,t,"R3InjectorError",this.source)}throw a}finally{Er(o),Eo(s)}}resolveInjectorInitializers(){const t=Eo(this),e=Er(void 0);try{const r=this.get(Jg.multi,zt,Bt.Self);for(const s of r)s()}finally{Eo(t),Er(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(wn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(t){let e=xd(t=ct(t))?t:ct(t&&t.provide);const i=function GG(n){return QT(n)?Ff(void 0,n.useValue):Ff(YF(n),G0)}(t);if(xd(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Ff(void 0,G0,!0),r.factory=()=>Um(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===G0&&(e.value=WG,e.value=e.factory()),"object"==typeof e.value&&e.value&&function ZG(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ct(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function eS(n){const t=vc(n),e=null!==t?t.factory:_l(n);if(null!==e)return e;if(n instanceof Ce)throw new H(204,!1);if(n instanceof Function)return function qG(n){const t=n.length;if(t>0)throw Uc(t,"?"),new H(204,!1);const e=function tb(n){return n&&(n[Hh]||n[nb])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new H(204,!1)}function YF(n,t,e){let i;if(xd(n)){const r=ct(n);return _l(r)||eS(r)}if(QT(n))i=()=>ct(n.useValue);else if(function GF(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Um(n.deps||[]));else if(function qF(n){return!(!n||!n.useExisting)}(n))i=()=>ie(ct(n.useExisting));else{const r=ct(n&&(n.useClass||n.provide));if(!function YG(n){return!!n.deps}(n))return _l(r)||eS(r);i=()=>new r(...Um(n.deps))}return i}function Ff(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function tS(n,t){for(const e of n)Array.isArray(e)?tS(e,t):e&&_c(e)?tS(e.\u0275providers,t):t(e)}const Z0=new Ce("AppId",{providedIn:"root",factory:()=>QG}),QG="ng",ZF=new Ce("Platform Initializer"),Mo=new Ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nf=new Ce("AnimationModuleType"),nS=new Ce("CSP nonce",{providedIn:"root",factory:()=>Pf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let KF=(n,t,e)=>null;function uS(n,t,e=!1){return KF(n,t,e)}class aY{}class JF{}class cY{resolveComponentFactory(t){throw function lY(n){const t=Error(`No component factory found for ${wn(n)}.`);return t.ngComponent=n,t}(t)}}let Ed=(()=>{class n{static#e=this.NULL=new cY}return n})();function uY(){return Bf(ji(),Te())}function Bf(n,t){return new Yt(Sr(n,t))}let Yt=(()=>{class n{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=uY}return n})();function dY(n){return n instanceof Yt?n.nativeElement:n}class n_{}let is=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function hY(){const n=Te(),e=Bi(ji().index,n);return(Qr(e)?e:n)[yt]}()}return n})(),fY=(()=>{class n{static#e=this.\u0275prov=Se({token:n,providedIn:"root",factory:()=>null})}return n})();class Hc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const t2=new Hc("16.2.12"),fS={};function o2(n,t=null,e=null,i){const r=a2(n,t,e,i);return r.resolveInjectorInitializers(),r}function a2(n,t=null,e=null,i,r=new Set){const s=[e||zt,HF(n)];return i=i||("object"==typeof n?void 0:wn(n)),new Of(s,t||Y0(),i||null,r)}let Ui=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=dl;static#t=this.NULL=new ZT;static create(e,i){if(Array.isArray(e))return o2({name:""},i,e,"");{const r=e.name??"";return o2({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Se({token:n,providedIn:"any",factory:()=>ie(UF)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function mS(n){return n.ngOriginalError}class ra{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&mS(t);for(;e&&mS(e);)e=mS(e);return e||null}}function _S(n){return t=>{setTimeout(n,void 0,t)}}const We=class bY extends se{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=_S(s),r&&(r=_S(r)),o&&(o=_S(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof St&&t.add(a),a}};function c2(...n){}class it{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new We(!1),this.onMicrotaskEmpty=new We(!1),this.onStable=new We(!1),this.onError=new We(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function wY(){const n="function"==typeof kn.requestAnimationFrame;let t=kn[n?"requestAnimationFrame":"setTimeout"],e=kn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function EY(n){const t=()=>{!function xY(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,yS(n),n.isCheckStableRunning=!0,vS(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),yS(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,o,a)=>{if(function TY(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(r,s,o,a);try{return u2(n),e.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),d2(n)}},onInvoke:(e,i,r,s,o,a,l)=>{try{return u2(n),e.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),d2(n)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,yS(n),vS(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new H(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,CY,c2,c2);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const CY={};function vS(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function yS(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function u2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function d2(n){n._nesting--,vS(n)}const h2=new Ce("",{providedIn:"root",factory:f2});function f2(){const n=Ve(it);let t=!0;return we(new ft(r=>{t=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(t),r.complete()})}),new ft(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(t=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{it.assertInAngularZone(),t&&(t=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(tt()))}function xl(n){return n instanceof Function?n():n}let bS=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Se({token:n,providedIn:"root",factory:()=>new n})}return n})();function i_(n){for(;n;){n[wt]|=64;const t=Yg(n);if(rd(n)&&!t)return n;n=t}return null}const v2=new Ce("",{providedIn:"root",factory:()=>!1});let nw=null;function C2(n,t){return n[t]??D2()}function x2(n,t){const e=D2();e.producerNode?.length&&(n[t]=nw,e.lView=n,nw=E2())}const NY={...Eb,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{i_(n.lView)},lView:null};function E2(){return Object.create(NY)}function D2(){return nw??=E2(),nw}const Tt={};function I(n){T2(qt(),Te(),Br()+n,!1)}function T2(n,t,e,i){if(!i)if(3==(3&t[wt])){const s=n.preOrderCheckHooks;null!==s&&yf(t,s,e)}else{const s=n.preOrderHooks;null!==s&&bf(t,s,0,e)}yl(e)}function z(n,t=Bt.Default){const e=Te();return null===e?ie(n,t):xf(ji(),e,ct(n),t)}function wS(){throw new Error("invalid")}function iw(n,t,e,i,r,s,o,a,l,c,u){const f=t.blueprint.slice();return f[ui]=r,f[wt]=140|i,(null!==c||n&&2048&n[wt])&&(f[wt]|=2048),hf(f),f[Mn]=f[xc]=n,f[_i]=e,f[xa]=o||n&&n[xa],f[yt]=a||n&&n[yt],f[Ca]=l||n&&n[Ca]||null,f[Tr]=s,f[ml]=function zq(){return Uq++}(),f[Xo]=u,f[wb]=c,f[Qn]=2==t.type?n[Qn]:f,f}function zf(n,t,e,i,r){let s=n.data[t];if(null===s)s=function CS(n,t,e,i,r){const s=Zb(),o=gg(),l=n.data[t]=function $Y(n,t,e,i,r,s){let o=t?t.injectorIndex:-1,a=0;return Ac()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,t,e,i,r),function Kb(){return dt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const o=function fd(){const n=dt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return js(s,!0),s}function r_(n,t,e,i){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function S2(n,t,e,i,r){const s=C2(t,gl),o=Br(),a=2&i;try{yl(-1),a&&t.length>Ot&&T2(n,t,Ot,!1),Bs(a?2:0,r);const c=a?s:null,u=sd(c);try{null!==c&&(c.dirty=!1),e(i,r)}finally{sg(c,u)}}finally{a&&null===t[gl]&&x2(t,gl),yl(o),Bs(a?3:1,r)}}function xS(n,t,e){if(tg(t)){const i=Li(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{Li(i)}}}function ES(n,t,e){Yb()&&(function QY(n,t,e,i){const r=e.directiveStart,s=e.directiveEnd;Dc(e)&&function rZ(n,t,e){const i=Sr(t,n),r=I2(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=rw(n,iw(n,r,null,o,i,t,null,n[xa].rendererFactory.createRenderer(i,e),null,null,null));n[t.index]=a}(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||ko(e,t),ns(i,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=wl(t,n,a,e);ns(c,t),null!==o&&sZ(0,a-r,c,l,0,o),Io(l)&&(Bi(e.index,t)[_i]=wl(t,n,a,e))}}(n,t,e,Sr(e,t)),64==(64&e.flags)&&P2(n,t,e))}function DS(n,t,e=Sr){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?e(t,n):n[o];n[r++]=a}}}function I2(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=TS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function TS(n,t,e,i,r,s,o,a,l,c,u){const f=Ot+i,g=f+r,v=function VY(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:Tt);return e}(f,g),b="function"==typeof c?c():c;return v[$e]={type:n,blueprint:v,template:e,queries:null,viewQuery:a,declTNode:t,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:u}}let A2=n=>null;function k2(n,t,e,i){for(let r in n)if(n.hasOwnProperty(r)){e=null===e?{}:e;const s=n[r];null===i?M2(e,t,r,s):i.hasOwnProperty(r)&&M2(e,t,i[r],s)}return e}function M2(n,t,e,i){n.hasOwnProperty(e)?n[e].push(t,i):n[e]=[t,i]}function co(n,t,e,i,r,s,o,a){const l=Sr(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(MS(n,e,u,i,r),Dc(t)&&function GY(n,t){const e=Bi(t,n);16&e[wt]||(e[wt]|=64)}(e,t.index)):3&t.type&&(i=function qY(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,t.value||"",i):r,s.setProperty(l,i,r))}function SS(n,t,e,i){if(Yb()){const r=null===i?null:{"":-1},s=function JY(n,t){const e=n.directiveRegistry;let i=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Kh(t,o.selectors,!1))if(i||(i=[]),Io(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),IS(n,t,a.length)}else i.unshift(o),IS(n,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&R2(n,t,e,o,r,a),r&&function eZ(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new H(-301,!1);i.push(t[r],s)}}}(e,i,r)}e.mergedAttrs=Dr(e.mergedAttrs,e.attrs)}function R2(n,t,e,i,r,s){for(let c=0;c<i.length;c++)Rg(ko(e,t),n,i[c].type);!function nZ(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=r_(n,t,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];e.mergedAttrs=Dr(e.mergedAttrs,u.hostAttrs),iZ(n,e,t,l,u),tZ(l,u,r),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const f=u.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function WY(n,t,e){const r=t.directiveEnd,s=n.data,o=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<r;u++){const f=s[u],g=e?e.get(f):null,b=g?g.outputs:null;l=k2(f.inputs,u,l,g?g.inputs:null),c=k2(f.outputs,u,c,b);const x=null===l||null===o||ed(t)?null:oZ(l,u,o);a.push(x)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,s)}function P2(n,t,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,o=function sT(){return dt.lFrame.currentDirectiveIndex}();try{yl(s);for(let a=i;a<r;a++){const l=n.data[a],c=t[a];mf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&XY(l,c)}}finally{yl(-1),mf(o)}}function XY(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function IS(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function tZ(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Io(t)&&(e[""]=n)}}function iZ(n,t,e,i,r){n.data[i]=r;const s=r.factory||(r.factory=_l(r.type)),o=new bl(s,Io(r),z);n.blueprint[i]=o,e[i]=o,function ZY(n,t,e,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~t.index;(function KY(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,i,s)}}(n,t,i,r_(n,e,r.hostVars,Tt),r)}function Ma(n,t,e,i,r,s){const o=Sr(n,t);!function AS(n,t,e,i,r,s,o){if(null==s)n.removeAttribute(t,r,e);else{const a=null==o?de(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}(t[yt],o,s,n.value,e,i,r)}function sZ(n,t,e,i,r,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)O2(i,e,o[a++],o[a++],o[a++])}function O2(n,t,e,i,r){const s=Li(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(t,r)),null!==n.setInput?n.setInput(t,r,e,i):t[i]=r}finally{Li(s)}}function oZ(n,t,e){let i=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){i.push(s,o[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function F2(n,t,e,i){return[n,!0,!1,t,null,0,i,e,null,null,null]}function N2(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const o=n.data[s];wg(e[i]),o.contentQueries(2,t[s],s)}}}function rw(n,t){return n[td]?n[nf][ro]=t:n[td]=t,n[nf]=t,t}function kS(n,t,e){wg(0);const i=Li(null);try{t(n,e)}finally{Li(i)}}function L2(n){return n[wa]||(n[wa]=[])}function V2(n){return n.cleanup||(n.cleanup=[])}function j2(n,t){const e=n[Ca],i=e?e.get(ra,null):null;i&&i.handleError(t)}function MS(n,t,e,i,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++];O2(n.data[o],t[o],i,a,r)}}function El(n,t,e){const i=vl(t,n);!function pF(n,t,e){n.setValue(t,e)}(n[yt],i,e)}function aZ(n,t){const e=Bi(t,n),i=e[$e];!function lZ(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}(i,e);const r=e[ui];null!==r&&null===e[Xo]&&(e[Xo]=uS(r,e[Ca])),RS(i,e,e[_i])}function RS(n,t,e){Cg(t);try{const i=n.viewQuery;null!==i&&kS(1,i,e);const r=n.template;null!==r&&S2(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&N2(n,t),n.staticViewQueries&&kS(2,n.viewQuery,e);const s=n.components;null!==s&&function cZ(n,t){for(let e=0;e<t.length;e++)aZ(n,t[e])}(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[wt]&=-5,Eg()}}let U2=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(e,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function GD(n,t,e){const i=Object.create(YD);e&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=t;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>Sb(i),run:()=>{if(i.dirty=!1,i.hasRun&&!lf(i))return;i.hasRun=!0;const o=sd(i);try{i.cleanupFn(),i.cleanupFn=Nb,i.fn(r)}finally{sg(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(e,c=>{this.all.has(c)&&this.queue.set(c,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[e,i]of this.queue)this.queue.delete(e),i?i.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Se({token:n,providedIn:"root",factory:()=>new n})}return n})();function sw(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=ba(r,a):2==s&&(i=ba(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function s_(n,t,e,i,r=!1){for(;null!==e;){const s=t[e.index];null!==s&&i.push(Rn(s)),Vr(s)&&z2(s,i);const o=e.type;if(8&o)s_(n,t,e.child,i);else if(32&o){const a=FT(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=xF(t,e);if(Array.isArray(a))i.push(...a);else{const l=Yg(t[Qn]);s_(l[$e],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function z2(n,t){for(let e=gr;e<n.length;e++){const i=n[e],r=i[$e].firstChild;null!==r&&s_(i[$e],i,r,t)}n[Vs]!==n[ui]&&t.push(n[Vs])}function ow(n,t,e,i=!0){const r=t[xa],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{H2(n,t,n.template,e)}catch(l){throw i&&j2(t,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function H2(n,t,e,i){const r=t[wt];if(256!=(256&r)){t[xa].effectManager?.flush(),Cg(t);try{hf(t),function yg(n){return dt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&S2(n,t,e,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&yf(t,c,null)}else{const c=n.preOrderHooks;null!==c&&bf(t,c,0,null),Tg(t,0)}if(function hZ(n){for(let t=dF(n);null!==t;t=hF(t)){if(!t[eg])continue;const e=t[so];for(let i=0;i<e.length;i++){Hb(e[i])}}}(t),$2(t,2),null!==n.contentQueries&&N2(n,t),o){const c=n.contentCheckHooks;null!==c&&yf(t,c)}else{const c=n.contentHooks;null!==c&&bf(t,c,1),Tg(t,1)}!function LY(n,t){const e=n.hostBindingOpCodes;if(null===e)return;const i=C2(t,id);try{for(let r=0;r<e.length;r++){const s=e[r];if(s<0)yl(~s);else{const o=s,a=e[++r],l=e[++r];Qb(a,o),i.dirty=!1;const c=sd(i);try{l(2,t[o])}finally{sg(i,c)}}}}finally{null===t[id]&&x2(t,id),yl(-1)}}(n,t);const a=n.components;null!==a&&q2(t,a,0);const l=n.viewQuery;if(null!==l&&kS(2,l,i),o){const c=n.viewCheckHooks;null!==c&&yf(t,c)}else{const c=n.viewHooks;null!==c&&bf(t,c,2),Tg(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[wt]&=-73,$b(t)}finally{Eg()}}}function $2(n,t){for(let e=dF(n);null!==e;e=hF(e))for(let i=gr;i<e.length;i++)W2(e[i],t)}function fZ(n,t,e){W2(Bi(t,n),e)}function W2(n,t){if(!function eT(n){return 128==(128&n[wt])}(n))return;const e=n[$e],i=n[wt];if(80&i&&0===t||1024&i||2===t)H2(e,n,e.template,n[_i]);else if(n[pl]>0){$2(n,1);const r=e.components;null!==r&&q2(n,r,1)}}function q2(n,t,e){for(let i=0;i<t.length;i++)fZ(n,t[i],e)}class o_{get rootNodes(){const t=this._lView,e=t[$e];return s_(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_i]}set context(t){this._lView[_i]=t}get destroyed(){return 256==(256&this._lView[wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Mn];if(Vr(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(N0(t,i),Aa(e,i))}this._attachedToViewContainer=!1}LT(this._lView[$e],this._lView)}onDestroy(t){!function ff(n,t){if(256==(256&n[wt]))throw new H(911,!1);null===n[So]&&(n[So]=[]),n[So].push(t)}(this._lView,t)}markForCheck(){i_(this._cdRefInjectingView||this._lView)}detach(){this._lView[wt]&=-129}reattach(){this._lView[wt]|=128}detectChanges(){ow(this._lView[$e],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nG(n,t){Kg(n,t,t[yt],2,null,null)}(this._lView[$e],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=t}}class pZ extends o_{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;ow(t[$e],t,t[_i],!1)}checkNoChanges(){}get context(){return null}}class G2 extends Ed{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=jt(t);return new a_(e,this.ngModule)}}function Y2(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class gZ{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Wh(i);const r=this.injector.get(t,fS,i);return r!==fS||e===fS?r:this.parentInjector.get(t,e,i)}}class a_ extends JF{get inputs(){const t=this.componentDef,e=t.inputTransforms,i=Y2(t.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return Y2(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function Km(n){return n.map(_b).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let s=(r=r||this.ngModule)instanceof lo?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new gZ(t,s):t,a=o.get(n_,null);if(null===a)throw new H(407,!1);const f={rendererFactory:a,sanitizer:o.get(fY,null),effectManager:o.get(U2,null),afterRenderEventManager:o.get(bS,null)},g=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=i?function BY(n,t,e,i){const s=i.get(v2,!1)||e===Kr.ShadowDom,o=n.selectRootElement(t,s);return function jY(n){A2(n)}(o),o}(g,i,this.componentDef.encapsulation,o):F0(g,v,function mZ(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),O=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let k=null;null!==b&&(k=uS(b,o,!0));const F=TS(0,null,null,1,0,null,null,null,null,null,null),q=iw(null,F,null,O,null,null,f,g,o,null,k);let K,re;Cg(q);try{const B=this.componentDef;let P,N=null;B.findHostDirectiveDefs?(P=[],N=new Map,B.findHostDirectiveDefs(B,P,N),P.push(B)):P=[B];const $=function vZ(n,t){const e=n[$e],i=Ot;return n[i]=t,zf(e,i,2,"#host",null)}(q,b),U=function yZ(n,t,e,i,r,s,o){const a=r[$e];!function bZ(n,t,e,i){for(const r of n)t.mergedAttrs=Dr(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(sw(t,t.mergedAttrs,!0),null!==e&&SF(i,e,t))}(i,n,t,o);let l=null;null!==t&&(l=uS(t,r[Ca]));const c=s.rendererFactory.createRenderer(t,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const f=iw(r,I2(e),null,u,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&IS(a,n,i.length-1),rw(r,f),r[n.index]=f}($,b,B,P,q,f,g);re=df(F,Ot),b&&function CZ(n,t,e,i){if(i)Yh(n,e,["ng-version",t2.full]);else{const{attrs:r,classes:s}=function Jh(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&t.push(s,n[++i]):8===r&&e.push(s);else{if(!io(r))break;r=s}i++}return{attrs:t,classes:e}}(t.selectors[0]);r&&Yh(n,e,r),s&&s.length>0&&TF(n,e,s.join(" "))}}(g,B,b,i),void 0!==e&&function xZ(n,t,e){const i=n.projection=[];for(let r=0;r<t.length;r++){const s=e[r];i.push(null!=s?Array.from(s):null)}}(re,this.ngContentSelectors,e),K=function wZ(n,t,e,i,r,s){const o=ji(),a=r[$e],l=Sr(o,r);R2(a,r,o,e,null,i);for(let u=0;u<e.length;u++)ns(wl(r,a,o.directiveStart+u,o),r);P2(a,r,o),l&&ns(l,r);const c=wl(r,a,o.directiveStart+o.componentOffset,o);if(n[_i]=r[_i]=c,null!==s)for(const u of s)u(c,t);return xS(a,o,n),c}(U,B,P,N,q,[EZ]),RS(F,q,null)}finally{Eg()}return new _Z(this.componentType,K,Bf(re,q),q,re)}}class _Z extends aY{constructor(t,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new pZ(r),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const s=this._rootLView;MS(s[$e],s,r,t,e),this.previousInputValues.set(t,e),i_(Bi(this._tNode.index,s))}}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function EZ(){const n=ji();vf(Te()[$e],n)}function tn(n){let t=function Z2(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(Io(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new H(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);const o=n;o.inputs=aw(n.inputs),o.inputTransforms=aw(n.inputTransforms),o.declaredInputs=aw(n.declaredInputs),o.outputs=aw(n.outputs);const a=r.hostBindings;a&&IZ(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&TZ(n,l),c&&SZ(n,c),Kn(n.inputs,r.inputs),Kn(n.declaredInputs,r.declaredInputs),Kn(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Kn(o.inputTransforms,r.inputTransforms)),Io(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===tn&&(e=!1)}}t=Object.getPrototypeOf(t)}!function DZ(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Dr(r.hostAttrs,e=Dr(e,r.hostAttrs))}}(i)}function aw(n){return n===Qi?{}:n===zt?[]:n}function TZ(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function SZ(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,s)=>{t(i,r,s),e(i,r,s)}:t}function IZ(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}function J2(n){const t=n.inputConfig,e={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];Array.isArray(r)&&r[2]&&(e[i]=r[2])}n.inputTransforms=e}function lw(n){return!!PS(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function PS(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ra(n,t,e){return n[t]=e}function l_(n,t){return n[t]}function rs(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Dd(n,t,e,i){const r=rs(n,t,e);return rs(n,t+1,i)||r}function cw(n,t,e,i,r){const s=Dd(n,t,e,i);return rs(n,t+2,r)||s}function Ro(n,t,e,i,r,s){const o=Dd(n,t,e,i);return Dd(n,t+2,r,s)||o}function zn(n,t,e,i){const r=Te();return rs(r,Sa(),t)&&(qt(),Ma(Xn(),r,n,t,e,i)),zn}function Wf(n,t,e,i,r,s){const a=Dd(n,function oo(){return dt.lFrame.bindingIndex}(),e,r);return ea(2),a?t+de(e)+i+de(r)+s:Tt}function ce(n,t,e,i,r,s,o,a){const l=Te(),c=qt(),u=n+Ot,f=c.firstCreatePass?function JZ(n,t,e,i,r,s,o,a,l){const c=t.consts,u=zf(t,n,4,o||null,Ta(c,a));SS(t,e,u,Ta(c,l)),vf(t,u);const f=u.tView=TS(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,i,r,s,o):c.data[u];js(f,!1);const g=hN(c,l,f,n);_f()&&V0(c,l,g,f),ns(g,l),rw(l,l[u]=F2(g,l,g,f)),ng(f)&&ES(c,l,f),null!=o&&DS(l,f,a)}let hN=function fN(n,t,e,i){return Ia(!0),t[yt].createComment("")};function er(n){return Ao(function vg(){return dt.lFrame.contextLView}(),Ot+n)}function R(n,t,e){const i=Te();return rs(i,Sa(),t)&&co(qt(),Xn(),i,n,t,i[yt],e,!1),R}function BS(n,t,e,i,r){const o=r?"class":"style";MS(n,e,t.inputs[o],o,i)}function y(n,t,e,i){const r=Te(),s=qt(),o=Ot+n,a=r[yt],l=s.firstCreatePass?function iK(n,t,e,i,r,s){const o=t.consts,l=zf(t,n,2,i,Ta(o,r));return SS(t,e,l,Ta(o,s)),null!==l.attrs&&sw(l,l.attrs,!1),null!==l.mergedAttrs&&sw(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,i):s.data[o],c=pN(s,r,l,a,t,n);r[o]=c;const u=ng(l);return js(l,!0),SF(a,c,l),32!=(32&l.flags)&&_f()&&V0(s,r,c,l),0===function dg(){return dt.lFrame.elementDepthCount}()&&ns(c,r),function iT(){dt.lFrame.elementDepthCount++}(),u&&(ES(s,r,l),xS(s,l,r)),null!==i&&DS(r,l),y}function w(){let n=ji();gg()?_g():(n=n.parent,js(n,!1));const t=n;(function hg(n){return dt.skipHydrationRootTNode===n})(t)&&function mg(){dt.skipHydrationRootTNode=null}(),function hd(){dt.lFrame.elementDepthCount--}();const e=qt();return e.firstCreatePass&&(vf(e,n),tg(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function pT(n){return 0!=(8&n.flags)}(t)&&BS(e,t,Te(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function HO(n){return 0!=(16&n.flags)}(t)&&BS(e,t,Te(),t.stylesWithoutHost,!1),w}function $t(n,t,e,i){return y(n,t,e,i),w(),$t}let pN=(n,t,e,i,r,s)=>(Ia(!0),F0(i,r,function t0(){return dt.lFrame.currentNamespace}()));function Dl(n,t,e){const i=Te(),r=qt(),s=n+Ot,o=r.firstCreatePass?function oK(n,t,e,i,r){const s=t.consts,o=Ta(s,i),a=zf(t,n,8,"ng-container",o);return null!==o&&sw(a,o,!0),SS(t,e,a,Ta(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,e):r.data[s];js(o,!0);const a=mN(r,i,o,n);return i[s]=a,_f()&&V0(r,i,a,o),ns(a,i),ng(o)&&(ES(r,i,o),xS(r,o,i)),null!=e&&DS(i,o),Dl}function Tl(){let n=ji();const t=qt();return gg()?_g():(n=n.parent,js(n,!1)),t.firstCreatePass&&(vf(t,n),tg(n)&&t.queries.elementEnd(n)),Tl}function jS(n,t,e){return Dl(n,t,e),Tl(),jS}let mN=(n,t,e,i)=>(Ia(!0),NT(t[yt],""));function je(){return Te()}function h_(n){return!!n&&"function"==typeof n.then}function gN(n){return!!n&&"function"==typeof n.subscribe}function G(n,t,e,i){const r=Te(),s=qt(),o=ji();return function vN(n,t,e,i,r,s,o){const a=ng(i),c=n.firstCreatePass&&V2(n),u=t[_i],f=L2(t);let g=!0;if(3&i.type||o){const x=Sr(i,t),E=o?o(x):x,O=f.length,k=o?q=>o(Rn(q[i.index])):i.index;let F=null;if(!o&&a&&(F=function cK(n,t,e,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===i){const a=t[wa],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,r,i.index)),null!==F)(F.__ngLastListenerFn__||F).__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,g=!1;else{s=bN(i,t,u,s,!1);const q=e.listen(E,r,s);f.push(s,q),c&&c.push(r,k,O,O+1)}}else s=bN(i,t,u,s,!1);const v=i.outputs;let b;if(g&&null!==v&&(b=v[r])){const x=b.length;if(x)for(let E=0;E<x;E+=2){const K=t[b[E]][b[E+1]].subscribe(s),re=f.length;f.push(s,K),c&&c.push(r,i.index,re,-(re+1))}}}(s,r,r[yt],o,n,t,i),G}function yN(n,t,e,i){try{return Bs(6,t,e),!1!==e(i)}catch(r){return j2(n,r),!1}finally{Bs(7,t,e)}}function bN(n,t,e,i,r){return function s(o){if(o===Function)return i;i_(n.componentOffset>-1?Bi(n.index,t):t);let l=yN(t,e,i,o),c=s.__ngNextListenerFn__;for(;c;)l=yN(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function V(n=1){return function aT(n){return(dt.lFrame.contextLView=function lT(n,t){for(;n>0;)t=t[xc],n--;return t}(n,dt.lFrame.contextLView))[_i]}(n)}function uK(n,t){let e=null;const i=function Ym(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===i?Kh(n,s,!0):gb(i,s))return r}else e=r}return e}function US(n){const t=Te()[Qn][Tr];if(!t.projection){const i=t.projection=Uc(n?n.length:1,null),r=i.slice();let s=t.child;for(;null!==s;){const o=n?uK(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function sa(n,t=0,e){const i=Te(),r=qt(),s=zf(r,Ot+n,16,null,e||null);null===s.projection&&(s.projection=t),_g(),(!i[Xo]||Ac())&&32!=(32&s.flags)&&function uG(n,t,e){DF(t[yt],0,t,e,BT(n,e,t),yF(e.parent||t[Tr],e,t))}(r,i,s)}function fw(n,t){return n<<17|t<<2}function $c(n){return n>>17&32767}function HS(n){return 2|n}function Td(n){return(131068&n)>>2}function $S(n,t){return-131069&n|t<<2}function WS(n){return 1|n}function kN(n,t,e,i,r){const s=n[e+1],o=null===t;let a=i?$c(s):Td(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];gK(n[a],t)&&(l=!0,n[a+1]=i?WS(u):HS(u)),a=i?$c(u):Td(u)}l&&(n[e+1]=i?HS(s):WS(s))}function gK(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&ws(n,t)>=0}function Cs(n,t,e){return oa(n,t,e,!1),Cs}function Jn(n,t){return oa(n,t,null,!0),Jn}function oa(n,t,e,i){const r=Te(),s=qt(),o=ea(2);s.firstUpdatePass&&function VN(n,t,e,i){const r=n.data;if(null===r[e+1]){const s=r[Br()],o=function LN(n,t){return t>=n.expandoStartIndex}(n,e);(function zN(n,t){return 0!=(n.flags&(t?8:16))})(s,i)&&null===t&&!o&&(t=!1),t=function DK(n,t,e,i){const r=function pd(n){const t=dt.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=f_(e=qS(null,n,t,e,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==r)if(e=qS(r,n,t,e,i),null===s){let l=function TK(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==Td(i))return n[$c(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=qS(null,n,t,l[1],i),l=f_(l,t.attrs,i),function SK(n,t,e,i){n[$c(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else s=function IK(n,t,e){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=f_(i,n[s].hostAttrs,e);return f_(i,t.attrs,e)}(n,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,i),function pK(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=$c(o),l=Td(o);n[i]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||ws(e,u)>0)&&(c=!0)):u=e,r)if(0!==l){const g=$c(n[a+1]);n[i+1]=fw(g,a),0!==g&&(n[g+1]=$S(n[g+1],i)),n[a+1]=function hK(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=fw(a,0),0!==a&&(n[a+1]=$S(n[a+1],i)),a=i;else n[i+1]=fw(l,0),0===a?a=i:n[l+1]=$S(n[l+1],i),l=i;c&&(n[i+1]=HS(n[i+1])),kN(n,u,i,!0),kN(n,u,i,!1),function mK(n,t,e,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&ws(s,t)>=0&&(e[i+1]=WS(e[i+1]))}(t,u,n,i,s),o=fw(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,i)}}(s,n,o,i),t!==Tt&&rs(r,o,t)&&function jN(n,t,e,i,r,s,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function fK(n){return 1==(1&n)}(c)?UN(l,t,e,r,Td(c),o):void 0;pw(u)||(pw(s)||function dK(n){return 2==(2&n)}(c)&&(s=UN(l,null,e,r,a,o)),function hG(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=-1===i.indexOf("-")?void 0:zc.DashCase;null==r?n.removeStyle(e,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=zc.Important),n.setStyle(e,i,r,s))}}(i,o,vl(Br(),e),r,s))}(s,s.data[Br()],r,r[yt],n,r[o+1]=function RK(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=wn(ao(n)))),n}(t,e),i,o)}function qS(n,t,e,i,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],i=f_(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function f_(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),es(n,o,!!e||t[++s]))}return void 0===n?null:n}function UN(n,t,e,i,r,s){const o=null===t;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,f=null===u;let g=e[r+1];g===Tt&&(g=f?zt:void 0);let v=f?Lg(g,i):u===i?g:void 0;if(c&&!pw(v)&&(v=Lg(l,i)),pw(v)&&(a=v,o))return a;const b=n[r+1];r=o?$c(b):Td(b)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=Lg(l,i))}return a}function pw(n){return void 0!==n}function S(n,t=""){const e=Te(),i=qt(),r=n+Ot,s=i.firstCreatePass?zf(i,r,1,t,null):i.data[r],o=HN(i,e,s,t,n);e[r]=o,_f()&&V0(i,e,o,s),js(s,!1)}let HN=(n,t,e,i,r)=>(Ia(!0),function O0(n,t){return n.createText(t)}(t[yt],i));function qe(n){return On("",n,""),qe}function On(n,t,e){const i=Te(),r=function $f(n,t,e,i){return rs(n,Sa(),e)?t+de(e)+i:Tt}(i,n,t,e);return r!==Tt&&El(i,Br(),r),On}function mw(n,t,e,i,r){const s=Te(),o=Wf(s,n,t,e,i,r);return o!==Tt&&El(s,Br(),o),mw}function p_(n,t,e){const i=Te();return rs(i,Sa(),t)&&co(qt(),Xn(),i,n,t,i[yt],e,!0),p_}const Sd=void 0;var eQ=["en",[["a","p"],["AM","PM"],Sd],[["AM","PM"],Sd,Sd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sd,"{1} 'at' {0}",Sd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JK(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Jf={};function xs(n){const t=function tQ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=lL(t);if(e)return e;const i=t.split("-")[0];if(e=lL(i),e)return e;if("en"===i)return eQ;throw new H(701,!1)}function lL(n){return n in Jf||(Jf[n]=kn.ng&&kn.ng.common&&kn.ng.common.locales&&kn.ng.common.locales[n]),Jf[n]}var Hn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Hn||{});const ep="en-US";let cL=ep;function ZS(n,t,e,i,r){if(n=ct(n),Array.isArray(n))for(let s=0;s<n.length;s++)ZS(n[s],t,e,i,r);else{const s=qt(),o=Te(),a=ji();let l=xd(n)?n:ct(n.provide);const c=YF(n),u=1048575&a.providerIndexes,f=a.directiveStart,g=a.providerIndexes>>20;if(xd(n)||!n.multi){const v=new bl(c,r,z),b=QS(l,t,r?u:u+g,f);-1===b?(Rg(ko(a,o),s,l),KS(s,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(v),o.push(v)):(e[b]=v,o[b]=v)}else{const v=QS(l,t,u+g,f),b=QS(l,t,u,u+g),E=b>=0&&e[b];if(r&&!E||!r&&!(v>=0&&e[v])){Rg(ko(a,o),s,l);const O=function JQ(n,t,e,i,r){const s=new bl(n,e,z);return s.multi=[],s.index=t,s.componentProviders=0,OL(s,r,i&&!e),s}(r?XQ:QQ,e.length,r,i,c);!r&&E&&(e[b].providerFactory=O),KS(s,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(O),o.push(O)}else KS(s,n,v>-1?v:b,OL(e[r?b:v],c,!r&&i));!r&&i&&E&&e[b].componentProviders++}}}function KS(n,t,e,i){const r=xd(t),s=function $G(n){return!!n.useClass}(t);if(r||s){const l=(s?ct(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function OL(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function QS(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function QQ(n,t,e,i){return XS(this.multi,[])}function XQ(n,t,e,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=wl(e,e[$e],this.providerFactory.index,i);s=a.slice(0,o),XS(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],XS(r,s);return s}function XS(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function ln(n,t=[]){return e=>{e.providersResolver=(i,r)=>function KQ(n,t,e){const i=qt();if(i.firstCreatePass){const r=Io(n);ZS(e,i.data,i.blueprint,r,!0),ZS(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class Id{}class FL{}class JS extends Id{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new G2(this);const r=Lr(t);this._bootstrapComponents=xl(r.bootstrap),this._r3Injector=a2(t,e,[{provide:Id,useValue:this},{provide:Ed,useValue:this.componentFactoryResolver},...i],wn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class eI extends FL{constructor(t){super(),this.moduleType=t}create(t){return new JS(this.moduleType,t,[])}}class NL extends Id{constructor(t){super(),this.componentFactoryResolver=new G2(this),this.instance=null;const e=new Of([...t.providers,{provide:Id,useValue:this},{provide:Ed,useValue:this.componentFactoryResolver}],t.parent||Y0(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function tI(n,t,e=null){return new NL({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}let nX=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=$F(0,e.type),r=i.length>0?tI([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Se({token:n,providedIn:"environment",factory:()=>new n(ie(lo))})}return n})();function wi(n){n.getStandaloneInjector=t=>t.get(nX).getOrCreateStandaloneInjector(n)}function $n(n,t,e){const i=Xi()+n,r=Te();return r[i]===Tt?Ra(r,i,e?t.call(e):t()):l_(r,i)}function nn(n,t,e,i){return qL(Te(),Xi(),n,t,e,i)}function zi(n,t,e,i,r){return GL(Te(),Xi(),n,t,e,i,r)}function bw(n,t,e,i,r,s){return YL(Te(),Xi(),n,t,e,i,r,s)}function HL(n,t,e,i,r,s,o){return function ZL(n,t,e,i,r,s,o,a,l){const c=t+e;return Ro(n,c,r,s,o,a)?Ra(n,c+4,l?i.call(l,r,s,o,a):i(r,s,o,a)):b_(n,c+4)}(Te(),Xi(),n,t,e,i,r,s,o)}function iI(n,t,e,i,r,s,o,a){const l=Xi()+n,c=Te(),u=Ro(c,l,e,i,r,s);return rs(c,l+4,o)||u?Ra(c,l+5,a?t.call(a,e,i,r,s,o):t(e,i,r,s,o)):l_(c,l+5)}function rI(n,t,e,i){return function KL(n,t,e,i,r,s){let o=t+e,a=!1;for(let l=0;l<r.length;l++)rs(n,o++,r[l])&&(a=!0);return a?Ra(n,o,i.apply(s,r)):b_(n,o)}(Te(),Xi(),n,t,e,i)}function b_(n,t){const e=n[t];return e===Tt?void 0:e}function qL(n,t,e,i,r,s){const o=t+e;return rs(n,o,r)?Ra(n,o+1,s?i.call(s,r):i(r)):b_(n,o+1)}function GL(n,t,e,i,r,s,o){const a=t+e;return Dd(n,a,r,s)?Ra(n,a+2,o?i.call(o,r,s):i(r,s)):b_(n,a+2)}function YL(n,t,e,i,r,s,o,a){const l=t+e;return cw(n,l,r,s,o)?Ra(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):b_(n,l+3)}function Zt(n,t){const e=qt();let i;const r=n+Ot;e.firstCreatePass?(i=function hX(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}}(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=_l(i.type)),a=Er(z);try{const l=Cf(!1),c=s();return Cf(l),function nK(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,Te(),r,c),c}finally{Er(a)}}function sI(n,t,e){const i=n+Ot,r=Te(),s=Ao(r,i);return w_(r,i)?qL(r,Xi(),t,s.transform,e,s):s.transform(e)}function ei(n,t,e,i){const r=n+Ot,s=Te(),o=Ao(s,r);return w_(s,r)?GL(s,Xi(),t,o.transform,e,i,o):o.transform(e,i)}function Fa(n,t,e,i,r){const s=n+Ot,o=Te(),a=Ao(o,s);return w_(o,s)?YL(o,Xi(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function w_(n,t){return n[$e].data[t].pure}function mX(){return this._results[Symbol.iterator]()}class oI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new We)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=oI.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=mX)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=function Xr(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function ET(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function _X(n,t,e,i=!0){const r=t[$e];if(function rG(n,t,e,i){const r=gr+i,s=e.length;i>0&&(e[r-1][ro]=t),i<s-gr?(t[ro]=e[r],Jr(e,gr+i,t)):(e.push(t),t[ro]=null),t[Mn]=e;const o=t[nd];null!==o&&e!==o&&function sG(n,t){const e=n[so];t[Qn]!==t[Mn][Mn][Qn]&&(n[eg]=!0),null===e?n[so]=[t]:e.push(t)}(o,t);const a=t[To];null!==a&&a.insertView(n),t[wt]|=128}(r,t,n,e),i){const s=UT(e,n),o=t[yt],a=L0(o,n[Vs]);null!==a&&function tG(n,t,e,i,r,s){i[ui]=r,i[Tr]=t,Kg(n,i,e,1,r,s)}(r,n[Tr],o,t,a,s)}}let Po=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=bX}return n})();const vX=Po,yX=class extends vX{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){const r=function gX(n,t,e,i){const r=t.tView,a=iw(n,r,e,4096&n[wt]?4096:16,null,t,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[nd]=n[t.index];const c=n[To];return null!==c&&(a[To]=c.createEmbeddedView(r)),RS(r,a,e),a}(this._declarationLView,this._declarationTContainer,t,{injector:e,hydrationInfo:i});return new o_(r)}};function bX(){return ww(ji(),Te())}function ww(n,t){return 4&n.type?new yX(t,n,Bf(n,t)):null}let Es=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=TX}return n})();function TX(){return iV(ji(),Te())}const SX=Es,tV=class extends SX{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Bf(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pc(this._hostTNode,this._hostLView);if(Mc(t)){const e=gd(t,this._hostLView),i=Rc(t);return new _r(e[$e].data[i+8],e)}return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=nV(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-gr}createEmbeddedView(t,e,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=t.createEmbeddedViewImpl(e||{},s,null);return this.insertImpl(a,r,false),a}createComponent(t,e,i,r,s){const o=t&&!function Bc(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const x=e||{};a=x.index,i=x.injector,r=x.projectableNodes,s=x.environmentInjector||x.ngModuleRef}const l=o?t:new a_(jt(t)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const E=(o?c:this.parentInjector).get(lo,null);E&&(s=E)}jt(l.componentType??{});const v=l.create(c,r,null,s);return this.insertImpl(v.hostView,a,false),v}insert(t,e){return this.insertImpl(t,e,!1)}insertImpl(t,e,i){const r=t._lView;if(function tT(n){return Vr(n[Mn])}(r)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const c=r[Mn],u=new tV(c,c[Tr],c[Mn]);u.detach(u.indexOf(t))}}const o=this._adjustIndex(e),a=this._lContainer;return _X(a,r,o,!i),t.attachToViewContainerRef(),Jr(aI(a),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=nV(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=N0(this._lContainer,e);i&&(Aa(aI(this._lContainer),e),LT(i[$e],i))}detach(t){const e=this._adjustIndex(t,-1),i=N0(this._lContainer,e);return i&&null!=Aa(aI(this._lContainer),e)?new o_(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function nV(n){return n[8]}function aI(n){return n[8]||(n[8]=[])}function iV(n,t){let e;const i=t[n.index];return Vr(i)?e=i:(e=F2(i,t,null,n),t[n.index]=e,rw(t,e)),rV(e,t,n,i),new tV(e,n,t)}let rV=function sV(n,t,e,i){if(n[Vs])return;let r;r=8&e.type?Rn(i):function IX(n,t){const e=n[yt],i=e.createComment(""),r=Sr(t,n);return wd(e,L0(e,r),i,function cG(n,t){return n.nextSibling(t)}(e,r),!1),i}(t,e),n[Vs]=r};class lI{constructor(t){this.queryList=t,this.matches=null}clone(){return new lI(this.queryList)}setDirty(){this.queryList.setDirty()}}class cI{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new cI(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==uV(t,e).matches&&this.queries[e].setDirty()}}class oV{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class uI{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new uI(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class dI{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new dI(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,e,MX(e,s)),this.matchTNodeWithReadOption(t,e,Oc(e,t,s,!1,!1))}else i===Po?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Oc(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Yt||r===Es||r===Po&&4&e.type)this.addMatch(e.index,-2);else{const s=Oc(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function MX(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function PX(n,t,e,i){return-1===e?function RX(n,t){return 11&n.type?Bf(n,t):4&n.type?ww(n,t):null}(t,n):-2===e?function OX(n,t,e){return e===Yt?Bf(t,n):e===Po?ww(t,n):e===Es?iV(t,n):void 0}(n,t,i):wl(n,n[$e],e,t)}function aV(n,t,e,i){const r=t[To].queries[i];if(null===r.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:PX(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function hI(n,t,e,i){const r=n.queries.getByIndex(e),s=r.matches;if(null!==s){const o=aV(n,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let f=gr;f<u.length;f++){const g=u[f];g[nd]===g[Mn]&&hI(g[$e],g,c,i)}if(null!==u[so]){const f=u[so];for(let g=0;g<f.length;g++){const v=f[g];hI(v[$e],v,c,i)}}}}}return i}function Hi(n){const t=Te(),e=qt(),i=Xb();wg(i+1);const r=uV(e,i);if(n.dirty&&function ug(n){return 4==(4&n[wt])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?hI(e,t,i,[]):aV(e,t,r,i);n.reset(s,dY),n.notifyOnChanges()}return!0}return!1}function Na(n,t,e){const i=qt();i.firstCreatePass&&(cV(i,new oV(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),lV(i,Te(),t)}function Oo(n,t,e,i){const r=qt();if(r.firstCreatePass){const s=ji();cV(r,new oV(t,e,i),s.index),function NX(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(r,n),2==(2&e)&&(r.staticContentQueries=!0)}lV(r,Te(),e)}function $i(){return function FX(n,t){return n[To].queries[t].queryList}(Te(),Xb())}function lV(n,t,e){const i=new oI(4==(4&e));(function HY(n,t,e,i){const r=L2(t);r.push(e),n.firstCreatePass&&V2(n).push(i,r.length-1)})(n,t,i,i.destroy),null===t[To]&&(t[To]=new cI),t[To].queries.push(new lI(i))}function cV(n,t,e){null===n.queries&&(n.queries=new uI),n.queries.track(new dI(t,e))}function uV(n,t){return n.queries.getByIndex(t)}function uo(n,t){return ww(n,t)}const vI=new Ce("Application Initializer");let yI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=Ve(vI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const s=r();if(h_(s))e.push(s);else if(gN(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SV=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ws=new Ce("LocaleId",{providedIn:"root",factory:()=>Ve(Ws,Bt.Optional|Bt.SkipSelf)||function iJ(){return typeof $localize<"u"&&$localize.locale||ep}()});let Ew=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new le(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class oJ{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let IV=(()=>{class n{compileModuleSync(e){return new eI(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=xl(Lr(e).declarations).reduce((o,a)=>{const l=jt(a);return l&&o.push(new a_(l)),o},[]);return new oJ(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const RV=new Ce(""),Tw=new Ce("");let EI,CI=(()=>{class n{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,EI||(function IJ(n){EI=n}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(ie(it),ie(xI),ie(Tw))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})(),xI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return EI?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Wc=null;const DI=new Ce("PlatformDestroyListeners"),Sw=new Ce("appBootstrapListener");class FV{constructor(t,e){this.name=t,this.token=e}}function PJ(n){try{const{rootComponent:t,appProviders:e,platformProviders:i}=n,r=function RJ(n=[]){if(Wc)return Wc;const t=function LV(n=[],t){return Ui.create({name:t,providers:[{provide:XT,useValue:"platform"},{provide:DI,useValue:new Set([()=>Wc=null])},...n]})}(n);return Wc=t,function OV(){!function Pb(n){Rb=n}(()=>{throw new H(600,!1)})}(),function NV(n){n.get(ZF,null)?.forEach(e=>e())}(t),t}(i),s=[VJ(),...e||[]],a=new NL({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(it);return l.run(()=>{a.resolveInjectorInitializers();const c=a.get(ra,null);let u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:v=>{c.handleError(v)}})});const f=()=>a.destroy(),g=r.get(DI);return g.add(f),a.onDestroy(()=>{u.unsubscribe(),g.delete(f)}),function jV(n,t,e){try{const i=e();return h_(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(c,l,()=>{const v=a.get(yI);return v.runInitializers(),v.donePromise.then(()=>{!function uL(n){Ls(n,"Expected localeId to be defined"),"string"==typeof n&&(cL=n.toLowerCase().replace(/_/g,"-"))}(a.get(Ws,ep)||ep);const x=a.get(qc);return void 0!==t&&x.bootstrap(t),x})})})}catch(t){return Promise.reject(t)}}let qc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ve(HV),this.zoneIsStable=Ve(h2),this.componentTypes=[],this.components=[],this.isStable=Ve(Ew).hasPendingTasks.pipe(lt(e=>e?ve(!1):this.zoneIsStable),Pi(),tt()),this._injector=Ve(lo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof JF;if(!this._injector.get(yI).done)throw!r&&function Qo(n){const t=jt(n)||Ni(n)||mr(n);return null!==t&&t.standalone}(e),new H(405,!1);let o;o=r?e:this._injector.get(Ed).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function kJ(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Id),c=o.create(Ui.NULL,[],i||o.selector,a),u=c.location.nativeElement,f=c.injector.get(RV,null);return f?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Iw(this.components,c),f?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Iw(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(Sw,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Iw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new H(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Iw(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const HV=new Ce("",{providedIn:"root",factory:()=>Ve(ra).handleError.bind(void 0)});function NJ(){const n=Ve(it),t=Ve(ra);return e=>n.runOutsideAngular(()=>t.handleError(e))}let LJ=(()=>{class n{constructor(){this.zone=Ve(it),this.applicationRef=Ve(qc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $V(n){return[{provide:it,useFactory:n},{provide:Jg,multi:!0,useFactory:()=>{const t=Ve(LJ,{optional:!0});return()=>t.initialize()}},{provide:HV,useFactory:NJ},{provide:h2,useFactory:f2}]}function VJ(n){return W0([[],$V(()=>new it(function BV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}(n)))])}let Sl=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=BJ}return n})();function BJ(n){return function jJ(n,t,e){if(Dc(n)&&!e){const i=Bi(n.index,t);return new o_(i,i)}return 47&n.type?new o_(t[Qn],t):null}(ji(),Te(),16==(16&n))}class ZV{constructor(){}supports(t){return lw(t)}create(t){return new qJ(t)}}const WJ=(n,t)=>t;class qJ{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||WJ}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const o=!i||e&&e.currentIndex<QV(i,r,s)?e:i,a=QV(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let g=0;g<c;g++){const v=g<s.length?s[g]:s[g]=0,b=v+g;u<=b&&b<c&&(s[g]=v+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!lw(t))throw new H(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),i=!0),e=e._next}else r=0,function FZ(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new GJ(e,i),s,r),t}_verifyReinsertion(t,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new KV),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KV),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class GJ{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YJ{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class KV{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new YJ,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QV(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}class XV{constructor(){}supports(t){return t instanceof Map||PS(t)}create(){return new ZJ}}class ZJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||PS(t)))throw new H(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new KJ(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class KJ{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JV(){return new Mw([new ZV])}let Mw=(()=>{class n{static#e=this.\u0275prov=Se({token:n,providedIn:"root",factory:JV});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||JV()),deps:[[n,new bd,new ia]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new H(901,!1)}}return n})();function e3(){return new E_([new XV])}let E_=(()=>{class n{static#e=this.\u0275prov=Se({token:n,providedIn:"root",factory:e3});constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||e3()),deps:[[n,new bd,new ia]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new H(901,!1)}}return n})(),JJ=(()=>{class n{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||n)(ie(qc))};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})();function ip(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let RI=null;function Gc(){return RI}class fee{}const Ct=new Ce("DocumentToken");let PI=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(){return Ve(mee)},providedIn:"platform"})}return n})();const pee=new Ce("Location Initialized");let mee=(()=>{class n extends PI{constructor(){super(),this._doc=Ve(Ct),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gc().getBaseHref(this._doc)}onPopState(e){const i=Gc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Gc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function OI(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function u3(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Il(n){return n&&"?"!==n[0]?"?"+n:n}let kd=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(){return Ve(h3)},providedIn:"root"})}return n})();const d3=new Ce("appBaseHref");let h3=(()=>{class n extends kd{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ve(Ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return OI(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Il(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const o=this.prepareExternalUrl(r+Il(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){const o=this.prepareExternalUrl(r+Il(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(PI),ie(d3,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gee=(()=>{class n extends kd{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=OI(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+Il(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+Il(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(PI),ie(d3,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})(),D_=(()=>{class n{constructor(e){this._subject=new We,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function yee(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(u3(f3(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Il(i))}normalize(e){return n.stripTrailingSlash(function vee(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,f3(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Il(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Il(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=Il;static#t=this.joinWithSlash=OI;static#n=this.stripTrailingSlash=u3;static#i=this.\u0275fac=function(i){return new(i||n)(ie(kd))};static#r=this.\u0275prov=Se({token:n,factory:function(){return function _ee(){return new D_(ie(kd))}()},providedIn:"root"})}return n})();function f3(n){return n.replace(/\/index.html$/,"")}var rp=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(rp||{}),Ts=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ts||{}),Vn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Vn||{}),ho=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(ho||{}),Wi=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Wi||{});function Ow(n,t){return No(xs(n)[Hn.DateFormat],t)}function Fw(n,t){return No(xs(n)[Hn.TimeFormat],t)}function Nw(n,t){return No(xs(n)[Hn.DateTimeFormat],t)}function Fo(n,t){const e=xs(n),i=e[Hn.NumberSymbols][t];if(typeof i>"u"){if(t===Wi.CurrencyDecimal)return e[Hn.NumberSymbols][Wi.Decimal];if(t===Wi.CurrencyGroup)return e[Hn.NumberSymbols][Wi.Group]}return i}const See=function aL(n){return xs(n)[Hn.PluralCase]};function m3(n){if(!n[Hn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Hn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function No(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function NI(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const Pee=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,T_={},Oee=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Al=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Al||{}),gn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(gn||{}),_n=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(_n||{});function yr(n,t,e,i){let r=function Hee(n){if(v3(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return Lw(r,s-1,o)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(Pee))return function $ee(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,o,a,l,c),t}(i)}const t=new Date(n);if(!v3(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=kl(e,t)||t;let a,o=[];for(;t;){if(a=Oee.exec(t),!a){o.push(t);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;t=u}}let l=r.getTimezoneOffset();i&&(l=_3(i,l),r=function zee(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function Uee(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(_3(t,r)-r))}(r,i,!0));let c="";return o.forEach(u=>{const f=function jee(n){if(VI[n])return VI[n];let t;switch(n){case"G":case"GG":case"GGG":t=Wn(_n.Eras,Vn.Abbreviated);break;case"GGGG":t=Wn(_n.Eras,Vn.Wide);break;case"GGGGG":t=Wn(_n.Eras,Vn.Narrow);break;case"y":t=tr(gn.FullYear,1,0,!1,!0);break;case"yy":t=tr(gn.FullYear,2,0,!0,!0);break;case"yyy":t=tr(gn.FullYear,3,0,!1,!0);break;case"yyyy":t=tr(gn.FullYear,4,0,!1,!0);break;case"Y":t=Uw(1);break;case"YY":t=Uw(2,!0);break;case"YYY":t=Uw(3);break;case"YYYY":t=Uw(4);break;case"M":case"L":t=tr(gn.Month,1,1);break;case"MM":case"LL":t=tr(gn.Month,2,1);break;case"MMM":t=Wn(_n.Months,Vn.Abbreviated);break;case"MMMM":t=Wn(_n.Months,Vn.Wide);break;case"MMMMM":t=Wn(_n.Months,Vn.Narrow);break;case"LLL":t=Wn(_n.Months,Vn.Abbreviated,Ts.Standalone);break;case"LLLL":t=Wn(_n.Months,Vn.Wide,Ts.Standalone);break;case"LLLLL":t=Wn(_n.Months,Vn.Narrow,Ts.Standalone);break;case"w":t=LI(1);break;case"ww":t=LI(2);break;case"W":t=LI(1,!0);break;case"d":t=tr(gn.Date,1);break;case"dd":t=tr(gn.Date,2);break;case"c":case"cc":t=tr(gn.Day,1);break;case"ccc":t=Wn(_n.Days,Vn.Abbreviated,Ts.Standalone);break;case"cccc":t=Wn(_n.Days,Vn.Wide,Ts.Standalone);break;case"ccccc":t=Wn(_n.Days,Vn.Narrow,Ts.Standalone);break;case"cccccc":t=Wn(_n.Days,Vn.Short,Ts.Standalone);break;case"E":case"EE":case"EEE":t=Wn(_n.Days,Vn.Abbreviated);break;case"EEEE":t=Wn(_n.Days,Vn.Wide);break;case"EEEEE":t=Wn(_n.Days,Vn.Narrow);break;case"EEEEEE":t=Wn(_n.Days,Vn.Short);break;case"a":case"aa":case"aaa":t=Wn(_n.DayPeriods,Vn.Abbreviated);break;case"aaaa":t=Wn(_n.DayPeriods,Vn.Wide);break;case"aaaaa":t=Wn(_n.DayPeriods,Vn.Narrow);break;case"b":case"bb":case"bbb":t=Wn(_n.DayPeriods,Vn.Abbreviated,Ts.Standalone,!0);break;case"bbbb":t=Wn(_n.DayPeriods,Vn.Wide,Ts.Standalone,!0);break;case"bbbbb":t=Wn(_n.DayPeriods,Vn.Narrow,Ts.Standalone,!0);break;case"B":case"BB":case"BBB":t=Wn(_n.DayPeriods,Vn.Abbreviated,Ts.Format,!0);break;case"BBBB":t=Wn(_n.DayPeriods,Vn.Wide,Ts.Format,!0);break;case"BBBBB":t=Wn(_n.DayPeriods,Vn.Narrow,Ts.Format,!0);break;case"h":t=tr(gn.Hours,1,-12);break;case"hh":t=tr(gn.Hours,2,-12);break;case"H":t=tr(gn.Hours,1);break;case"HH":t=tr(gn.Hours,2);break;case"m":t=tr(gn.Minutes,1);break;case"mm":t=tr(gn.Minutes,2);break;case"s":t=tr(gn.Seconds,1);break;case"ss":t=tr(gn.Seconds,2);break;case"S":t=tr(gn.FractionalSeconds,1);break;case"SS":t=tr(gn.FractionalSeconds,2);break;case"SSS":t=tr(gn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Bw(Al.Short);break;case"ZZZZZ":t=Bw(Al.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Bw(Al.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Bw(Al.Long);break;default:return null}return VI[n]=t,t}(u);c+=f?f(r,e,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Lw(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function kl(n,t){const e=function wee(n){return xs(n)[Hn.LocaleId]}(n);if(T_[e]=T_[e]||{},T_[e][t])return T_[e][t];let i="";switch(t){case"shortDate":i=Ow(n,ho.Short);break;case"mediumDate":i=Ow(n,ho.Medium);break;case"longDate":i=Ow(n,ho.Long);break;case"fullDate":i=Ow(n,ho.Full);break;case"shortTime":i=Fw(n,ho.Short);break;case"mediumTime":i=Fw(n,ho.Medium);break;case"longTime":i=Fw(n,ho.Long);break;case"fullTime":i=Fw(n,ho.Full);break;case"short":const r=kl(n,"shortTime"),s=kl(n,"shortDate");i=Vw(Nw(n,ho.Short),[r,s]);break;case"medium":const o=kl(n,"mediumTime"),a=kl(n,"mediumDate");i=Vw(Nw(n,ho.Medium),[o,a]);break;case"long":const l=kl(n,"longTime"),c=kl(n,"longDate");i=Vw(Nw(n,ho.Long),[l,c]);break;case"full":const u=kl(n,"fullTime"),f=kl(n,"fullDate");i=Vw(Nw(n,ho.Full),[u,f])}return i&&(T_[e][t]=i),i}function Vw(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function la(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function tr(n,t,e=0,i=!1,r=!1){return function(s,o){let a=function Nee(n,t){switch(n){case gn.FullYear:return t.getFullYear();case gn.Month:return t.getMonth();case gn.Date:return t.getDate();case gn.Hours:return t.getHours();case gn.Minutes:return t.getMinutes();case gn.Seconds:return t.getSeconds();case gn.FractionalSeconds:return t.getMilliseconds();case gn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||a>-e)&&(a+=e),n===gn.Hours)0===a&&-12===e&&(a=12);else if(n===gn.FractionalSeconds)return function Fee(n,t){return la(n,3).substring(0,t)}(a,t);const l=Fo(o,Wi.MinusSign);return la(a,t,l,i,r)}}function Wn(n,t,e=Ts.Format,i=!1){return function(r,s){return function Lee(n,t,e,i,r,s){switch(e){case _n.Months:return function Eee(n,t,e){const i=xs(n),s=No([i[Hn.MonthsFormat],i[Hn.MonthsStandalone]],t);return No(s,e)}(t,r,i)[n.getMonth()];case _n.Days:return function xee(n,t,e){const i=xs(n),s=No([i[Hn.DaysFormat],i[Hn.DaysStandalone]],t);return No(s,e)}(t,r,i)[n.getDay()];case _n.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function Iee(n){const t=xs(n);return m3(t),(t[Hn.ExtraData][2]||[]).map(i=>"string"==typeof i?NI(i):[NI(i[0]),NI(i[1])])}(t),u=function Aee(n,t,e){const i=xs(n);m3(i);const s=No([i[Hn.ExtraData][0],i[Hn.ExtraData][1]],t)||[];return No(s,e)||[]}(t,r,i),f=c.findIndex(g=>{if(Array.isArray(g)){const[v,b]=g,x=o>=v.hours&&a>=v.minutes,E=o<b.hours||o===b.hours&&a<b.minutes;if(v.hours<b.hours){if(x&&E)return!0}else if(x||E)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(-1!==f)return u[f]}return function Cee(n,t,e){const i=xs(n),s=No([i[Hn.DayPeriodsFormat],i[Hn.DayPeriodsStandalone]],t);return No(s,e)}(t,r,i)[o<12?0:1];case _n.Eras:return function Dee(n,t){return No(xs(n)[Hn.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function Bw(n){return function(t,e,i){const r=-1*i,s=Fo(e,Wi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Al.Short:return(r>=0?"+":"")+la(o,2,s)+la(Math.abs(r%60),2,s);case Al.ShortGMT:return"GMT"+(r>=0?"+":"")+la(o,1,s);case Al.Long:return"GMT"+(r>=0?"+":"")+la(o,2,s)+":"+la(Math.abs(r%60),2,s);case Al.Extended:return 0===i?"Z":(r>=0?"+":"")+la(o,2,s)+":"+la(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Vee=0,jw=4;function g3(n){return Lw(n.getFullYear(),n.getMonth(),n.getDate()+(jw-n.getDay()))}function LI(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=g3(e),o=function Bee(n){const t=Lw(n,Vee,1).getDay();return Lw(n,0,1+(t<=jw?jw:jw+7)-t)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return la(r,n,Fo(i,Wi.MinusSign))}}function Uw(n,t=!1){return function(e,i){return la(g3(e).getFullYear(),n,Fo(i,Wi.MinusSign),t)}}const VI={};function _3(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function v3(n){return n instanceof Date&&!isNaN(n.valueOf())}let HI=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(i){let r=null;return i?r=new i:(s=ie(Ws),r=new tte(s)),r;var s},providedIn:"root"})}return n})();let tte=(()=>{class n extends HI{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(See(i||this.locale)(e)){case rp.Zero:return"zero";case rp.One:return"one";case rp.Two:return"two";case rp.Few:return"few";case rp.Many:return"many";default:return"other"}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ws))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();function C3(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}const $I=/\s+/,x3=[];let Ir=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=x3,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split($I):x3}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split($I):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split($I).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Mw),z(E_),z(Yt),z(is))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class ite{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ci=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ite(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),D3(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{D3(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(z(Es),z(Po),z(Mw))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function D3(n,t){n.context.$implicit=t.item}let nr=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new rte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){T3("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){T3("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(z(Es),z(Po))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class rte{constructor(){this.$implicit=null,this.ngIf=null}}function T3(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${wn(t)}'.`)}class WI{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Hw=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),S3=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new WI(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||n)(z(Es),z(Po),z(Hw,9))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),Lo=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:zc.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(E_),z(is))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),fo=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Es))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Vi]})}return n})();function ca(n,t){return new H(2100,!1)}class ate{createSubscription(t,e){return cd(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){cd(()=>t.unsubscribe())}}class lte{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const cte=new lte,ute=new ate;let A3=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(h_(e))return cte;if(gN(e))return ute;throw ca()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(z(Sl,16))};static#t=this.\u0275pipe=Fi({name:"async",type:n,pure:!1,standalone:!0})}return n})();const gte=new Ce("DATE_PIPE_DEFAULT_TIMEZONE"),_te=new Ce("DATE_PIPE_DEFAULT_OPTIONS");let I_=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(null==e||""===e||e!=e)return null;try{return yr(e,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw ca()}}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ws,16),z(gte,24),z(_te,24))};static#t=this.\u0275pipe=Fi({name:"date",type:n,pure:!0,standalone:!0})}return n})();const vte=/#/g;let qI=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(null==e)return"";if("object"!=typeof i||null===i)throw ca();return i[function w3(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(e,Object.keys(i),this._localization,r)].replace(vte,e.toString())}static#e=this.\u0275fac=function(i){return new(i||n)(z(HI,16))};static#t=this.\u0275pipe=Fi({name:"i18nPlural",type:n,pure:!0,standalone:!0})}return n})(),M3=(()=>{class n{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw ca();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=Fi({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Cn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})();const R3="browser";function P3(n){return n===R3}function $w(n){return"server"===n}let Ate=(()=>{class n{static#e=this.\u0275prov=Se({token:n,providedIn:"root",factory:()=>new kte(ie(Ct),window)})}return n})();class kte{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Mte(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class O3{}class ene extends fee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class QI extends ene{static makeCurrent(){!function hee(n){RI||(RI=n)}(new QI)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function tne(){return k_=k_||document.querySelector("base"),k_?k_.getAttribute("href"):null}();return null==e?null:function nne(n){Gw=Gw||document.createElement("a"),Gw.setAttribute("href",n);const t=Gw.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){k_=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return C3(document.cookie,t)}}let Gw,k_=null,rne=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();const XI=new Ce("EventManagerPlugins");let B3=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(ie(XI),ie(it))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();class j3{constructor(t){this._doc=t}}const JI="ng-app-id";let U3=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$w(s),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${JI}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(JI),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(JI,this.appId),o}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct),ie(Z0),ie(nS,8),ie(Mo))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();const eA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tA=/%COMP%/g,lne=new Ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function H3(n,t){return t.map(e=>e.replace(tA,n))}let nA=(()=>{class n{constructor(e,i,r,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=$w(a),this.defaultRenderer=new iA(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Kr.ShadowDom&&(i={...i,encapsulation:Kr.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof W3?r.applyToHost(e):r instanceof rA&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Kr.Emulated:s=new W3(l,c,i,this.appId,u,o,a,f);break;case Kr.ShadowDom:return new hne(l,c,e,i,o,a,this.nonce,f);default:s=new rA(l,c,i,u,o,a,f)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(B3),ie(U3),ie(Z0),ie(lne),ie(Ct),ie(Mo),ie(it),ie(nS))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();class iA{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(eA[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){($3(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&($3(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new H(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=eA[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=eA[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(zc.DashCase|zc.Important)?t.style.setProperty(e,i,r&zc.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&zc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=Gc().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function $3(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hne extends iA{constructor(t,e,i,r,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=H3(r.id,r.styles);for(const u of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class rA extends iA{constructor(t,e,i,r,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?H3(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class W3 extends rA{constructor(t,e,i,r,s,o,a,l){const c=r+"-"+i.id;super(t,e,i,s,o,a,l,c),this.contentAttr=function cne(n){return"_ngcontent-%COMP%".replace(tA,n)}(c),this.hostAttr=function une(n){return"_nghost-%COMP%".replace(tA,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let fne=(()=>{class n extends j3{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();const q3=["alt","control","meta","shift"],pne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mne={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gne=(()=>{class n extends j3{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gc().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),q3.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let r=pne[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),q3.forEach(o=>{o!==r&&(0,mne[o])(e)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();function G3(n){return{appProviders:[...Z3,...n?.providers??[]],platformProviders:wne}}const wne=[{provide:Mo,useValue:R3},{provide:ZF,useValue:function vne(){QI.makeCurrent()},multi:!0},{provide:Ct,useFactory:function bne(){return function _G(n){$T=n}(document),document},deps:[]}],Cne=new Ce(""),Y3=[{provide:Tw,useClass:class ine{addToWindow(t){kn.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new H(5103,!1);return s},kn.getAllAngularTestabilities=()=>t.getAllTestabilities(),kn.getAllAngularRootElements=()=>t.getAllRootElements(),kn.frameworkStabilizers||(kn.frameworkStabilizers=[]),kn.frameworkStabilizers.push(i=>{const r=kn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?Gc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:RV,useClass:CI,deps:[it,xI,Tw]},{provide:CI,useClass:CI,deps:[it,xI,Tw]}],Z3=[{provide:XT,useValue:"root"},{provide:ra,useFactory:function yne(){return new ra},deps:[]},{provide:XI,useClass:fne,multi:!0,deps:[Ct,it,Mo]},{provide:XI,useClass:gne,multi:!0,deps:[Ct]},nA,U3,B3,{provide:n_,useExisting:nA},{provide:O3,useClass:rne,deps:[]},[]];let K3=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Z0,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Cne,12))};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[...Z3,...Y3],imports:[Cn,JJ]})}return n})(),Q3=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:function(i){let r=null;return r=i?new i:function Ene(){return new Q3(ie(Ct))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:kne}=Array,{getPrototypeOf:Mne,prototype:Rne,keys:Pne}=Object;function nB(n){if(1===n.length){const t=n[0];if(kne(t))return{args:t,keys:null};if(function One(n){return n&&"object"==typeof n&&Mne(n)===Rne}(t)){const e=Pne(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:Fne}=Array;function aA(n){return Oe(t=>function Nne(n,t){return Fne(t)?n(...t):n(t)}(n,t))}function iB(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function Md(...n){const t=Ri(n),e=cl(n),{args:i,keys:r}=nB(n);if(0===i.length)return ne([],t);const s=new ft(function Lne(n,t,e=Ln){return i=>{rB(t,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)rB(t,()=>{const c=ne(n[l],t);let u=!1;c.subscribe(Pe(i,f=>{s[l]=f,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,r?o=>iB(r,o):Ln));return e?s.pipe(aA(e)):s}function rB(n,t,e){n?Mi(e,n,t):t()}const Yw=ht(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Zw(...n){return function Vne(){return Fs(1)}()(ne(n,Ri(n)))}function Kw(n){return new ft(t=>{ci(n()).subscribe(t)})}function sp(n,t){const e=j(n)?n:()=>n,i=r=>r.error(e());return new ft(t?r=>t.schedule(i,0,r):i)}function lA(){return ge((n,t)=>{let e=null;n._refCount++;const i=Pe(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class sB extends ft{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Fe(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new St;const e=this.getSubject();t.add(this.source.subscribe(Pe(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=St.EMPTY)}return t}refCount(){return lA()(this)}}function ir(n){return n<=0?()=>yi:ge((t,e)=>{let i=0;t.subscribe(Pe(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Vo(...n){const t=Ri(n);return ge((e,i)=>{(t?Zw(n,e,t):Zw(n,e)).subscribe(i)})}function vn(n,t){return ge((e,i)=>{let r=0;e.subscribe(Pe(i,s=>n.call(t,s,r++)&&i.next(s)))})}function Qw(n){return ge((t,e)=>{let i=!1;t.subscribe(Pe(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function oB(n=Bne){return ge((t,e)=>{let i=!1;t.subscribe(Pe(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Bne(){return new Yw}function Zc(n,t){const e=arguments.length>=2;return i=>i.pipe(n?vn((r,s)=>n(r,s,i)):Ln,ir(1),e?Qw(t):oB(()=>new Yw))}function op(n,t){return j(t)?In(n,t,1):In(n,1)}function Ei(n,t,e){const i=j(n)||t||e?{next:n,error:t,complete:e}:n;return i?ge((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Pe(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Ln}function Kc(n){return ge((t,e)=>{let s,i=null,r=!1;i=t.subscribe(Pe(e,void 0,void 0,o=>{s=ci(n(o,Kc(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function aB(n,t,e,i,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Pe(o,u=>{const f=c++;l=a?n(l,u,f):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Xw(n,t){return ge(aB(n,t,arguments.length>=2,!0))}function Jw(n){return n<=0?()=>yi:ge((t,e)=>{let i=[];t.subscribe(Pe(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function ap(n){return ge((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function rr(n){return ge((t,e)=>{ci(n).subscribe(Pe(e,()=>e.complete(),nt)),!e.closed&&t.subscribe(e)})}const kt="primary",M_=Symbol("RouteTitle");class zne{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function lp(n){return new zne(n)}function Hne(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function La(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!lB(n[r],t[r]))return!1;return!0}function lB(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function cB(n){return n.length>0?n[n.length-1]:null}function Qc(n){return function Ane(n){return!!n&&(n instanceof ft||j(n.lift)&&j(n.subscribe))}(n)?n:h_(n)?ne(Promise.resolve(n)):ve(n)}const Wne={exact:function hB(n,t,e){if(!Rd(n.segments,t.segments)||!eC(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!hB(n.children[i],t.children[i],e))return!1;return!0},subset:fB},uB={exact:function qne(n,t){return La(n,t)},subset:function Gne(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>lB(n[e],t[e]))},ignored:()=>!0};function dB(n,t,e){return Wne[e.paths](n.root,t.root,e.matrixParams)&&uB[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function fB(n,t,e){return pB(n,t,t.segments,e)}function pB(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Rd(r,e)||t.hasChildren()||!eC(r,e,i))}if(n.segments.length===e.length){if(!Rd(n.segments,e)||!eC(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!fB(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Rd(n.segments,r)&&eC(n.segments,r,i)&&n.children[kt])&&pB(n.children[kt],t,s,i)}}function eC(n,t,e){return t.every((i,r)=>uB[e](n[r].parameters,i.parameters))}class cp{constructor(t=new xn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lp(this.queryParams)),this._queryParamMap}toString(){return Kne.serialize(this)}}class xn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tC(this)}}class R_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=lp(this.parameters)),this._parameterMap}toString(){return _B(this)}}function Rd(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let P_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(){return new cA},providedIn:"root"})}return n})();class cA{parse(t){const e=new aie(t);return new cp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${O_(t.root,!0)}`,i=function Jne(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${nC(e)}=${nC(r)}`).join("&"):`${nC(e)}=${nC(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Qne(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Kne=new cA;function tC(n){return n.segments.map(t=>_B(t)).join("/")}function O_(n,t){if(!n.hasChildren())return tC(n);if(t){const e=n.children[kt]?O_(n.children[kt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==kt&&i.push(`${r}:${O_(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Zne(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===kt&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==kt&&(e=e.concat(t(r,i)))}),e}(n,(i,r)=>r===kt?[O_(n.children[kt],!1)]:[`${r}:${O_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${tC(n)}/${e[0]}`:`${tC(n)}/(${e.join("//")})`}}function mB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nC(n){return mB(n).replace(/%3B/gi,";")}function uA(n){return mB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iC(n){return decodeURIComponent(n)}function gB(n){return iC(n.replace(/\+/g,"%20"))}function _B(n){return`${uA(n.path)}${function Xne(n){return Object.keys(n).map(t=>`;${uA(t)}=${uA(n[t])}`).join("")}(n.parameters)}`}const eie=/^[^\/()?;#]+/;function dA(n){const t=n.match(eie);return t?t[0]:""}const tie=/^[^\/()?;=#]+/,iie=/^[^=?&#]+/,sie=/^[^&#]+/;class aie{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[kt]=new xn(t,e)),i}parseSegment(){const t=dA(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(t),new R_(iC(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function nie(n){const t=n.match(tie);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=dA(this.remaining);r&&(i=r,this.capture(i))}t[iC(e)]=iC(i)}parseQueryParam(t){const e=function rie(n){const t=n.match(iie);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function oie(n){const t=n.match(sie);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=gB(e),s=gB(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=dA(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new H(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=kt);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[kt]:new xn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new H(4011,!1)}}function vB(n){return n.segments.length>0?new xn([],{[kt]:n}):n}function yB(n){const t={};for(const i of Object.keys(n.children)){const s=yB(n.children[i]);if(i===kt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function lie(n){if(1===n.numberOfChildren&&n.children[kt]){const t=n.children[kt];return new xn(n.segments.concat(t.segments),t.children)}return n}(new xn(n.segments,t))}function Pd(n){return n instanceof cp}function bB(n){let t;const r=vB(function e(s){const o={};for(const l of s.children){const c=e(l);o[l.outlet]=c}const a=new xn(s.url,o);return s===n&&(t=a),a}(n.root));return t??r}function wB(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(0===t.length)return hA(r,r,r,e,i);const s=function uie(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new xB(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new xB(e,t,i)}(t);if(s.toRoot())return hA(r,r,new xn([],{}),e,i);const o=function die(n,t,e){if(n.isAbsolute)return new sC(t,!0,0);if(!e)return new sC(t,!1,NaN);if(null===e.parent)return new sC(e,!0,0);const i=rC(n.commands[0])?0:1;return function hie(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new H(4005,!1);r=i.segments.length}return new sC(i,!1,r-s)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?N_(o.segmentGroup,o.index,s.commands):EB(o.segmentGroup,o.index,s.commands);return hA(r,o.segmentGroup,a,e,i)}function rC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function F_(n){return"object"==typeof n&&null!=n&&n.outlets}function hA(n,t,e,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===t?e:CB(n,t,e);const a=vB(yB(o));return new cp(a,s,r)}function CB(n,t,e){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===t?e:CB(s,t,e)}),new xn(n.segments,i)}class xB{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&rC(i[0]))throw new H(4003,!1);const r=i.find(F_);if(r&&r!==cB(i))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sC{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function EB(n,t,e){if(n||(n=new xn([],{})),0===n.segments.length&&n.hasChildren())return N_(n,t,e);const i=function pie(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const o=n.segments[r],a=e[i];if(F_(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!TB(l,c,o))return s;i+=2}else{if(!TB(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new xn(n.segments.slice(0,i.pathIndex),{});return s.children[kt]=new xn(n.segments.slice(i.pathIndex),n.children),N_(s,0,r)}return i.match&&0===r.length?new xn(n.segments,{}):i.match&&!n.hasChildren()?fA(n,t,e):i.match?N_(n,0,r):fA(n,t,e)}function N_(n,t,e){if(0===e.length)return new xn(n.segments,{});{const i=function fie(n){return F_(n[0])?n[0].outlets:{[kt]:n}}(e),r={};if(Object.keys(i).some(s=>s!==kt)&&n.children[kt]&&1===n.numberOfChildren&&0===n.children[kt].segments.length){const s=N_(n.children[kt],t,e);return new xn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=EB(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new xn(n.segments,r)}}function fA(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(F_(s)){const l=mie(s.outlets);return new xn(i,l)}if(0===r&&rC(e[0])){i.push(new R_(n.segments[t].path,DB(e[0]))),r++;continue}const o=F_(s)?s.outlets[kt]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&rC(a)?(i.push(new R_(o,DB(a))),r+=2):(i.push(new R_(o,{})),r++)}return new xn(i,{})}function mie(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=fA(new xn([],{}),0,i))}),t}function DB(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function TB(n,t,e){return n==e.path&&La(t,e.parameters)}const L_="imperative";class Va{constructor(t,e){this.id=t,this.url=e}}class oC extends Va{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ml extends Va{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class V_ extends Va{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class up extends Va{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class aC extends Va{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class SB extends Va{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gie extends Va{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _ie extends Va{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vie extends Va{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yie extends Va{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bie{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wie{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cie{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xie{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eie{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Die{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IB{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class pA{}class mA{constructor(t){this.url=t}}class Tie{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new B_,this.attachRef=null}}let B_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Tie,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class AB{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=gA(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=gA(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=_A(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return _A(t,this._root).map(e=>e.value)}}function gA(n,t){if(n===t.value)return t;for(const e of t.children){const i=gA(n,e);if(i)return i}return null}function _A(n,t){if(n===t.value)return[t];for(const e of t.children){const i=_A(n,e);if(i.length)return i.unshift(t),i}return[]}class Rl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function dp(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class kB extends AB{constructor(t,e){super(t),this.snapshot=e,vA(this,t)}toString(){return this.snapshot.toString()}}function MB(n,t){const e=function Sie(n,t){const o=new lC([],{},{},"",{},kt,t,null,{});return new PB("",new Rl(o,[]))}(0,t),i=new le([new R_("",{})]),r=new le({}),s=new le({}),o=new le({}),a=new le(""),l=new hp(i,r,o,a,s,kt,t,e.root);return l.snapshot=e.root,new kB(new Rl(l,[]),e)}class hp{constructor(t,e,i,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Oe(c=>c[M_]))??ve(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(t=>lp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(t=>lp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RB(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Iie(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class lC{get title(){return this.data?.[M_]}constructor(t,e,i,r,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class PB extends AB{constructor(t,e){super(e),this.url=t,vA(this,e)}toString(){return OB(this._root)}}function vA(n,t){t.value._routerState=n,t.children.forEach(e=>vA(n,e))}function OB(n){const t=n.children.length>0?` { ${n.children.map(OB).join(", ")} } `:"";return`${n.value}${t}`}function yA(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,La(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),La(t.params,e.params)||n.paramsSubject.next(e.params),function $ne(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!La(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),La(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function bA(n,t){const e=La(n.params,t.params)&&function Yne(n,t){return Rd(n,t)&&n.every((e,i)=>La(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||bA(n.parent,t.parent))}let wA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=kt,this.activateEvents=new We,this.deactivateEvents=new We,this.attachEvents=new We,this.detachEvents=new We,this.parentContexts=Ve(B_),this.location=Ve(Es),this.changeDetector=Ve(Sl),this.environmentInjector=Ve(lo),this.inputBinder=Ve(cC,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Aie(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vi]})}return n})();class Aie{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===hp?this.route:t===B_?this.childContexts:this.parent.get(t,e)}}const cC=new Ce("");let FB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=Md([i.queryParams,i.params,i.data]).pipe(lt(([s,o,a],l)=>(a={...s,...o,...a},0===l?ve(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const o=function dee(n){const t=jt(n);if(!t)return null;const e=new a_(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();function j_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Mie(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return j_(n,i,r);return j_(n,i)})}(n,t,e);return new Rl(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>j_(n,a)),o}}const i=function Rie(n){return new hp(new le(n.url),new le(n.params),new le(n.queryParams),new le(n.fragment),new le(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>j_(n,s));return new Rl(i,r)}}const CA="ngNavigationCancelingError";function NB(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Pd(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=LB(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function LB(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[CA]=!0,i.cancellationCode=t,e&&(i.url=e),i}function VB(n){return n&&n[CA]}let BB=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Dt({type:n,selectors:[["ng-component"]],standalone:!0,features:[wi],decls:1,vars:0,template:function(i,r){1&i&&$t(0,"router-outlet")},dependencies:[wA],encapsulation:2})}return n})();function xA(n){const t=n.children&&n.children.map(xA),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==kt&&(e.component=BB),e}function ua(n){return n.outlet||kt}function U_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class jie{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),yA(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=dp(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=dp(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=dp(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const r=dp(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Die(s.value.snapshot))}),t.children.length&&this.forwardEvent(new xie(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(yA(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),yA(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=U_(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class jB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class uC{constructor(t,e){this.component=t,this.route=e}}function Uie(n,t,e){const i=n._root;return z_(i,t?t._root:null,e,[i.value])}function fp(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||function PD(n){return null!==vc(n)}(n)?t.get(n):n:i}function z_(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=dp(t);return n.children.forEach(o=>{(function Hie(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function $ie(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Rd(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Rd(n.url,t.url)||!La(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bA(n,t)||!La(n.queryParams,t.queryParams);default:return!bA(n,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new jB(i)):(s.data=o.data,s._resolvedData=o._resolvedData),z_(n,t,s.component?a?a.children:null:e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new uC(a.outlet.component,o))}else o&&H_(t,a,r),r.canActivateChecks.push(new jB(i)),z_(n,null,s.component?a?a.children:null:e,i,r)})(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>H_(a,e.getContext(o),r)),r}function H_(n,t,e){const i=dp(n),r=n.value;Object.entries(i).forEach(([s,o])=>{H_(o,r.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new uC(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function $_(n){return"function"==typeof n}function UB(n){return n instanceof Yw||"EmptyError"===n?.name}const dC=Symbol("INITIAL_VALUE");function pp(){return lt(n=>Md(n.map(t=>t.pipe(ir(1),Vo(dC)))).pipe(Oe(t=>{for(const e of t)if(!0!==e){if(e===dC)return dC;if(!1===e||e instanceof cp)return e}return!0}),vn(t=>t!==dC),ir(1)))}function zB(n){return function vs(...n){return Ps(n)}(Ei(t=>{if(Pd(t))throw NB(0,t)}),Oe(t=>!0===t))}class hC{constructor(t){this.segmentGroup=t||null}}class HB{constructor(t){this.urlTree=t}}function mp(n){return sp(new hC(n))}function $B(n){return sp(new HB(n))}class ure{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new H(4002,!1)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ve(i);if(r.numberOfChildren>1||!r.children[kt])return sp(new H(4e3,!1));r=r.children[kt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new cp(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,r)}),new xn(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new H(4001,!1);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}const EA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dre(n,t,e,i,r){const s=DA(n,t,e);return s.matched?(i=function Oie(n,t){return n.providers&&!n._injector&&(n._injector=tI(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function are(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ve(r.map(o=>{const a=fp(o,n);return Qc(function Kie(n){return n&&$_(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(pp(),zB()):ve(!0)}(i,t,e).pipe(Oe(o=>!0===o?s:{...EA}))):ve(s)}function DA(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...EA}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Hne)(e,n,t);if(!r)return{...EA};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function WB(n,t,e,i){return e.length>0&&function pre(n,t,e){return e.some(i=>fC(n,t,i)&&ua(i)!==kt)}(n,e,i)?{segmentGroup:new xn(t,fre(i,new xn(e,n.children))),slicedSegments:[]}:0===e.length&&function mre(n,t,e){return e.some(i=>fC(n,t,i))}(n,e,i)?{segmentGroup:new xn(n.segments,hre(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:e}}function hre(n,t,e,i,r){const s={};for(const o of i)if(fC(n,e,o)&&!r[ua(o)]){const a=new xn([],{});s[ua(o)]=a}return{...r,...s}}function fre(n,t){const e={};e[kt]=t;for(const i of n)if(""===i.path&&ua(i)!==kt){const r=new xn([],{});e[ua(i)]=r}return e}function fC(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class yre{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new ure(this.urlSerializer,this.urlTree)}noMatchError(t){return new H(4002,!1)}recognize(){const t=WB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,kt).pipe(Kc(e=>{if(e instanceof HB)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof hC?this.noMatchError(e):e}),Oe(e=>{const i=new lC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,{}),r=new Rl(i,e),s=new PB("",r),o=function cie(n,t,e=null,i=null){return wB(bB(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,kt).pipe(Kc(i=>{throw i instanceof hC?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=RB(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0)}processChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return ne(r).pipe(op(s=>{const o=i.children[s],a=function Vie(n,t){const e=n.filter(i=>ua(i)===t);return e.push(...n.filter(i=>ua(i)!==t)),e}(e,s);return this.processSegmentGroup(t,a,o,s)}),Xw((s,o)=>(s.push(...o),s)),Qw(null),function jne(n,t){const e=arguments.length>=2;return i=>i.pipe(n?vn((r,s)=>n(r,s,i)):Ln,Jw(1),e?Qw(t):oB(()=>new Yw))}(),In(s=>{if(null===s)return mp(i);const o=qB(s);return function bre(n){n.sort((t,e)=>t.value.outlet===kt?-1:e.value.outlet===kt?1:t.value.outlet.localeCompare(e.value.outlet))}(o),ve(o)}))}processSegment(t,e,i,r,s,o){return ne(e).pipe(op(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,s,o).pipe(Kc(l=>{if(l instanceof hC)return ve(null);throw l}))),Zc(a=>!!a),Kc(a=>{if(UB(a))return function _re(n,t,e){return 0===t.length&&!n.children[e]}(i,r,s)?ve([]):mp(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,s,o,a){return function gre(n,t,e,i){return!!(ua(n)===i||i!==kt&&fC(t,e,n))&&("**"===n.path||DA(t,n,e).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o):mp(r):mp(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?$B(s):this.applyRedirects.lineralizeSegments(i,s).pipe(In(o=>{const a=new xn(o,{});return this.processSegment(t,e,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=DA(e,r,s);if(!a)return mp(e);const f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?$B(f):this.applyRedirects.lineralizeSegments(r,f).pipe(In(g=>this.processSegment(t,i,e,g.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?cB(r).parameters:{};a=ve({snapshot:new lC(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GB(i),ua(i),i.component??i._loadedComponent??null,i,YB(i)),consumedSegments:[],remainingSegments:[]}),e.children={}}else a=dre(e,i,r,t).pipe(Oe(({matched:l,consumedSegments:c,remainingSegments:u,parameters:f})=>l?{snapshot:new lC(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GB(i),ua(i),i.component??i._loadedComponent??null,i,YB(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(lt(l=>null===l?mp(e):this.getChildConfig(t=i._injector??t,i,r).pipe(lt(({routes:c})=>{const u=i._loadedInjector??t,{snapshot:f,consumedSegments:g,remainingSegments:v}=l,{segmentGroup:b,slicedSegments:x}=WB(e,g,v,c);if(0===x.length&&b.hasChildren())return this.processChildren(u,c,b).pipe(Oe(O=>null===O?null:[new Rl(f,O)]));if(0===c.length&&0===x.length)return ve([new Rl(f,[])]);const E=ua(i)===s;return this.processSegment(u,c,b,x,E?kt:s,!0).pipe(Oe(O=>[new Rl(f,O)]))}))))}getChildConfig(t,e,i){return e.children?ve({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ve({routes:e._loadedRoutes,injector:e._loadedInjector}):function ore(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ve(!0):ve(r.map(o=>{const a=fp(o,n);return Qc(function qie(n){return n&&$_(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(pp(),zB())}(t,e,i).pipe(In(r=>r?this.configLoader.loadChildren(t,e).pipe(Ei(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function cre(n){return sp(LB(!1,3))}())):ve({routes:[],injector:t})}}function wre(n){const t=n.value.routeConfig;return t&&""===t.path}function qB(n){const t=[],e=new Set;for(const i of n){if(!wre(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=qB(i.children);t.push(new Rl(i.value,r))}return t.filter(i=>!e.has(i))}function GB(n){return n.data||{}}function YB(n){return n.resolve||{}}function ZB(n){return"string"==typeof n.title||null===n.title}function TA(n){return lt(t=>{const e=n(t);return e?ne(e).pipe(Oe(()=>t)):ve(t)})}const gp=new Ce("ROUTES");let SA=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ve(IV)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ve(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Qc(e.loadComponent()).pipe(Oe(KB),Ei(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),ap(()=>{this.componentLoaders.delete(e)})),r=new sB(i,()=>new se).pipe(lA());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Ire(n,t,e,i){return Qc(n.loadChildren()).pipe(Oe(KB),In(r=>r instanceof FL||Array.isArray(r)?ve(r):ne(t.compileModuleAsync(r))),Oe(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(e).injector,o=s.get(gp,[],{optional:!0,self:!0}).flat()),{routes:o.map(xA),injector:s}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(ap(()=>{this.childrenLoaders.delete(i)})),o=new sB(s,()=>new se).pipe(lA());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KB(n){return function Are(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let pC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new se,this.transitionAbortSubject=new se,this.configLoader=Ve(SA),this.environmentInjector=Ve(lo),this.urlSerializer=Ve(P_),this.rootContexts=Ve(B_),this.inputBindingEnabled=null!==Ve(cC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ve(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new wie(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new bie(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new le({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:L_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vn(s=>0!==s.id),Oe(s=>({...s,extractedUrl:e.urlHandlingStrategy.extract(s.rawUrl)})),lt(s=>{this.currentTransition=s;let o=!1,a=!1;return ve(s).pipe(Ei(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),lt(l=>{const c=l.currentBrowserUrl.toString(),u=!e.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const g="";return this.events.next(new up(l.id,this.urlSerializer.serialize(l.rawUrl),g,0)),l.resolve(null),yi}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ve(l).pipe(lt(g=>{const v=this.transitions?.getValue();return this.events.next(new oC(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),v!==this.transitions?.getValue()?yi:Promise.resolve(g)}),function Cre(n,t,e,i,r,s){return In(o=>function vre(n,t,e,i,r,s,o="emptyOnly"){return new yre(n,t,e,i,r,o,s).recognize()}(n,t,e,i,o.extractedUrl,r,s).pipe(Oe(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),Ei(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const v=new SB(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}));if(u&&e.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:v,source:b,restoredState:x,extras:E}=l,O=new oC(g,this.urlSerializer.serialize(v),b,x);this.events.next(O);const k=MB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:k,urlAfterRedirects:v,extras:{...E,skipLocationChange:!1,replaceUrl:!1}},ve(s)}{const g="";return this.events.next(new up(l.id,this.urlSerializer.serialize(l.extractedUrl),g,1)),l.resolve(null),yi}}),Ei(l=>{const c=new gie(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Oe(l=>(this.currentTransition=s={...l,guards:Uie(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Xie(n,t){return In(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?ve({...e,guardsResult:!0}):function Jie(n,t,e,i){return ne(n).pipe(In(r=>function sre(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ve(s.map(a=>{const l=U_(t)??r,c=fp(a,l);return Qc(function Zie(n){return n&&$_(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,i):l.runInContext(()=>c(n,t,e,i))).pipe(Zc())})).pipe(pp()):ve(!0)}(r.component,r.route,e,t,i)),Zc(r=>!0!==r,!0))}(o,i,r,n).pipe(In(a=>a&&function Wie(n){return"boolean"==typeof n}(a)?function ere(n,t,e,i){return ne(t).pipe(op(r=>Zw(function nre(n,t){return null!==n&&t&&t(new Cie(n)),ve(!0)}(r.route.parent,i),function tre(n,t){return null!==n&&t&&t(new Eie(n)),ve(!0)}(r.route,i),function rre(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function zie(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>Kw(()=>ve(o.guards.map(l=>{const c=U_(o.node)??e,u=fp(l,c);return Qc(function Yie(n){return n&&$_(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(Zc())})).pipe(pp())));return ve(s).pipe(pp())}(n,r.path,e),function ire(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ve(!0);const r=i.map(s=>Kw(()=>{const o=U_(t)??e,a=fp(s,o);return Qc(function Gie(n){return n&&$_(n.canActivate)}(a)?a.canActivate(t,n):o.runInContext(()=>a(t,n))).pipe(Zc())}));return ve(r).pipe(pp())}(n,r.route,e))),Zc(r=>!0!==r,!0))}(i,s,n,t):ve(a)),Oe(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Ei(l=>{if(s.guardsResult=l.guardsResult,Pd(l.guardsResult))throw NB(0,l.guardsResult);const c=new _ie(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),vn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),TA(l=>{if(l.guards.canActivateChecks.length)return ve(l).pipe(Ei(c=>{const u=new vie(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),lt(c=>{let u=!1;return ve(c).pipe(function xre(n,t){return In(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ve(e);let s=0;return ne(r).pipe(op(o=>function Ere(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!ZB(r)&&(s[M_]=r.title),function Dre(n,t,e,i){const r=function Tre(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ve({});const s={};return ne(r).pipe(In(o=>function Sre(n,t,e,i){const r=U_(t)??i,s=fp(n,r);return Qc(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[o],t,e,i).pipe(Zc(),Ei(a=>{s[o]=a}))),Jw(1),function Une(n){return Oe(()=>n)}(s),Kc(o=>UB(o)?yi:sp(o)))}(s,n,t,i).pipe(Oe(o=>(n._resolvedData=o,n.data=RB(n,e).resolve,r&&ZB(r)&&(n.data[M_]=r.title),null)))}(o.route,i,n,t)),Ei(()=>s++),Jw(1),In(o=>s===r.length?ve(e):yi))})}(e.paramsInheritanceStrategy,this.environmentInjector),Ei({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),Ei(c=>{const u=new yie(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),TA(l=>{const c=u=>{const f=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ei(g=>{u.component=g}),Oe(()=>{})));for(const g of u.children)f.push(...c(g));return f};return Md(c(l.targetSnapshot.root)).pipe(Qw(),ir(1))}),TA(()=>this.afterPreactivation()),Oe(l=>{const c=function kie(n,t,e){const i=j_(n,t._root,e?e._root:void 0);return new kB(i,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),Ei(()=>{this.events.next(new pA)}),((n,t,e,i)=>Oe(r=>(new jie(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ir(1),Ei({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ml(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),rr(this.transitionAbortSubject.pipe(Ei(l=>{throw l}))),ap(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Kc(l=>{if(a=!0,VB(l))this.events.next(new V_(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function Pie(n){return VB(n)&&Pd(n.url)}(l)?this.events.next(new mA(l.url)):s.resolve(!1);else{this.events.next(new aC(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(l))}catch(c){s.reject(c)}}return yi}))}))}cancelNavigationTransition(e,i,r){const s=new V_(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QB(n){return n!==L_}let XB=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===kt);return i}getResolvedTitleForRoute(e){return e.data[M_]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(){return Ve(kre)},providedIn:"root"})}return n})(),kre=(()=>{class n extends XB{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Q3))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mre=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(){return Ve(Pre)},providedIn:"root"})}return n})();class Rre{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Pre=(()=>{class n extends Rre{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const mC=new Ce("",{providedIn:"root",factory:()=>({})});let Ore=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:function(){return Ve(Fre)},providedIn:"root"})}return n})(),Fre=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var W_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(W_||{});function JB(n,t){n.events.pipe(vn(e=>e instanceof Ml||e instanceof V_||e instanceof aC||e instanceof up),Oe(e=>e instanceof Ml||e instanceof up?W_.COMPLETE:e instanceof V_&&(0===e.code||1===e.code)?W_.REDIRECTING:W_.FAILED),vn(e=>e!==W_.REDIRECTING),ir(1)).subscribe(()=>{t()})}function Nre(n){throw n}function Lre(n,t,e){return t.parse("/")}const Vre={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bre={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ss=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ve(SV),this.isNgZoneEnabled=!1,this._events=new se,this.options=Ve(mC,{optional:!0})||{},this.pendingTasks=Ve(Ew),this.errorHandler=this.options.errorHandler||Nre,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Lre,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ve(Ore),this.routeReuseStrategy=Ve(Mre),this.titleStrategy=Ve(XB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ve(gp,{optional:!0})?.flat()??[],this.navigationTransitions=Ve(pC),this.urlSerializer=Ve(P_),this.location=Ve(D_),this.componentInputBindingEnabled=!!Ve(cC,{optional:!0}),this.eventsSubscription=new St,this.isNgZoneEnabled=Ve(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new cp,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=MB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(e4(i)&&this._events.next(i));if(i instanceof oC)QB(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof up)this.rawUrlTree=r.rawUrl;else if(i instanceof SB){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof pA)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof V_)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof mA){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||QB(r.source)};this.scheduleNavigation(s,L_,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof aC&&this.restoreHistory(r,!0),i instanceof Ml&&(this.navigated=!0),e4(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),L_,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(xA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let f,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{f=bB(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),f=this.currentUrlTree.root}return wB(f,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Pd(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,L_,null,i)}navigate(e,i={skipLocationChange:!1}){return function jre(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new H(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...Vre}:!1===i?{...Bre}:i,Pd(e))return dB(this.currentUrlTree,e,r);const s=this.parseUrl(e);return dB(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((f,g)=>{a=f,l=g});const u=this.pendingTasks.add();return JB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function e4(n){return!(n instanceof pA||n instanceof mA)}let Od=(()=>{class n{constructor(e,i,r,s,o,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new se,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof Ml&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function jF(n,t,e){return function zG(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?BF:VF}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(z(ss),z(hp),function Ef(n){return function Pg(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if($m(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(ji(),n)}("tabindex"),z(is),z(Yt),z(kd))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&G("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&zn("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ip],skipLocationChange:["skipLocationChange","skipLocationChange",ip],replaceUrl:["replaceUrl","replaceUrl",ip],routerLink:"routerLink"},standalone:!0,features:[J2,Vi]})}return n})();class t4{}let Hre=(()=>{class n{constructor(e,i,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(vn(e=>e instanceof Ml),op(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=tI(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ne(r).pipe(Fs())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ve(null);const s=r.pipe(In(o=>null===o?ve(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return i.loadComponent&&!i._loadedComponent?ne([s,this.loader.loadComponent(i)]).pipe(Fs()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(ie(ss),ie(IV),ie(lo),ie(t4),ie(SA))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const IA=new Ce("");let n4=(()=>{class n{constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof oC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ml?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof up&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof IB&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new IB(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){wS()};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();function r4(n){return n.routerState.root}function Pl(n,t){return{\u0275kind:n,\u0275providers:t}}function s4(){const n=Ve(Ui);return t=>{const e=n.get(qc);if(t!==e.components[0])return;const i=n.get(ss),r=n.get(o4);1===n.get(AA)&&i.initialNavigation(),n.get(a4,null,Bt.Optional)?.setUpPreloading(),n.get(IA,null,Bt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const o4=new Ce("",{factory:()=>new se}),AA=new Ce("",{providedIn:"root",factory:()=>1}),a4=new Ce("");function Yre(n){return Pl(0,[{provide:a4,useExisting:Hre},{provide:t4,useExisting:n}])}const l4=new Ce("ROUTER_FORROOT_GUARD"),Kre=[D_,{provide:P_,useClass:cA},ss,B_,{provide:hp,useFactory:r4,deps:[ss]},SA,[]];function Qre(){return new FV("Router",ss)}let _p=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[Kre,[],{provide:gp,multi:!0,useValue:e},{provide:l4,useFactory:tse,deps:[[ss,new ia,new bd]]},{provide:mC,useValue:i||{}},i?.useHash?{provide:kd,useClass:gee}:{provide:kd,useClass:h3},{provide:IA,useFactory:()=>{const n=Ve(Ate),t=Ve(it),e=Ve(mC),i=Ve(pC),r=Ve(P_);return e.scrollOffset&&n.setOffset(e.scrollOffset),new n4(r,i,n,t,e)}},i?.preloadingStrategy?Yre(i.preloadingStrategy).\u0275providers:[],{provide:FV,multi:!0,useFactory:Qre},i?.initialNavigation?nse(i):[],i?.bindToComponentInputs?Pl(8,[FB,{provide:cC,useExisting:FB}]).\u0275providers:[],[{provide:c4,useFactory:s4},{provide:Sw,multi:!0,useExisting:c4}]]}}static forChild(e){return{ngModule:n,providers:[{provide:gp,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(l4,8))};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})();function tse(n){return"guarded"}function nse(n){return["disabled"===n.initialNavigation?Pl(3,[{provide:vI,multi:!0,useFactory:()=>{const t=Ve(ss);return()=>{t.setUpLocationChangeListener()}}},{provide:AA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Pl(2,[{provide:AA,useValue:0},{provide:vI,multi:!0,deps:[Ui],useFactory:t=>{const e=t.get(pee,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(ss),s=t.get(o4);JB(r,()=>{i(!0)}),t.get(pC).afterPreactivation=()=>(i(!0),s.closed?ve(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const c4=new Ce("");class rse extends St{constructor(t,e){super()}schedule(t,e=0){return this}}const gC={setInterval(n,t,...e){const{delegate:i}=gC;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=gC;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class _C extends rse{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return gC.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&gC.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,be(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const kA={now:()=>(kA.delegate||Date).now(),delegate:void 0};class q_{constructor(t,e=q_.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}q_.now=kA.now;class vC extends q_{constructor(t,e=q_.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const vp=new vC(_C),sse=vp;function MA(n=0,t,e=sse){let i=-1;return null!=t&&(pc(t)?e=t:i=t),new ft(r=>{let s=function ose(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function u4(n=0,t=vp){return n<0&&(n=0),MA(n,n,t)}function RA(n,t){return j(t)?lt(()=>n,t):lt(()=>n)}var ase=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){void 0===e&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i={top:(i=t.getBoundingClientRect()).top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var s=this.offsetParent(t);i=this.offset(t,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){void 0===e&&(e=!0);var i=t.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft,s={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(t,e,i,r){var s=i.split("-"),o=s[0],a=void 0===o?"top":o,l=s[1],c=void 0===l?"center":l,u=r?this.offset(t,!1):this.position(t,!1),f=this.getAllStyles(e),g=parseFloat(f.marginTop),v=parseFloat(f.marginBottom),b=parseFloat(f.marginLeft),x=parseFloat(f.marginRight),E=0,O=0;switch(a){case"top":E=u.top-(e.offsetHeight+g+v);break;case"bottom":E=u.top+u.height;break;case"left":O=u.left-(e.offsetWidth+b+x);break;case"right":O=u.left+u.width}switch(c){case"top":E=u.top;break;case"bottom":E=u.top+u.height-e.offsetHeight;break;case"left":O=u.left;break;case"right":O=u.left+u.width-e.offsetWidth;break;case"center":"top"===a||"bottom"===a?O=u.left+u.width/2-e.offsetWidth/2:E=u.top+u.height/2-e.offsetHeight/2}e.style.transform="translate("+Math.round(O)+"px, "+Math.round(E)+"px)";var k=e.getBoundingClientRect(),F=document.documentElement,q=window.innerHeight||F.clientHeight,K=window.innerWidth||F.clientWidth;return k.left>=0&&k.top>=0&&k.right<=K&&k.bottom<=q},n}(),lse=/\s+/,d4=new ase,da=function(){return da=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},da.apply(this,arguments)},PA=function(n,t,e){if(e||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},OA=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(OA||{}),use=[OA.SUNDAY,OA.SATURDAY],FA=7,Xc=86400;function h4(n,t){var e=t.startDate,r=t.excluded,s=t.precision;if(r.length<1)return 0;for(var a=n.getDay,l=n.addDays,c=(0,n.addSeconds)(e,t.seconds-1),u=a(e),f=a(c),g=0,v=e,b=function(){var x=a(v);r.some(function(E){return E===x})&&(g+=function dse(n,t){var i=t.day,s=t.dayEnd,o=t.startDate,a=t.endDate,l=n.differenceInSeconds,u=n.startOfDay;if("minutes"===t.precision){if(i===t.dayStart)return l((0,n.endOfDay)(o),o)+1;if(i===s)return l(a,u(a))+1}return Xc}(n,{dayStart:u,dayEnd:f,day:x,precision:s,startDate:e,endDate:c})),v=l(v,1)};v<c;)b();return g}function G_(n,t){var i=t.periodStart,r=t.periodEnd;return t.events.filter(function(s){return function pse(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,s=n.isSameSecond,o=e.start,a=e.end||e.start;return!!(o>i&&o<r||a>i&&a<r||o<i&&a>r||s(o,i)||s(o,r)||s(a,i)||s(a,r))}(n,{event:s,periodStart:i,periodEnd:r})})}function f4(n,t){var e=t.date,i=t.weekendDays,r=void 0===i?use:i,o=n.isSameDay,a=n.getDay,l=(0,n.startOfDay)(new Date),c=a(e);return{date:e,day:c,isPast:e<l,isToday:o(e,l),isFuture:e>l,isWeekend:r.indexOf(c)>-1}}function LA(n,t){for(var r=t.excluded,s=void 0===r?[]:r,o=t.weekendDays,a=t.viewStart,l=void 0===a?n.startOfWeek(t.viewDate,{weekStartsOn:t.weekStartsOn}):a,c=t.viewEnd,u=void 0===c?n.addDays(l,FA):c,f=n.addDays,g=n.getDay,v=[],b=l;b<u;)s.some(function(x){return g(b)===x})||v.push(f4(n,{date:b,weekendDays:o})),b=f(b,1);return v}function gse(n,t){var e=t.events,i=void 0===e?[]:e,r=t.excluded,s=void 0===r?[]:r,o=t.precision,a=void 0===o?"days":o,l=t.absolutePositionedEvents,c=void 0!==l&&l,u=t.viewStart,f=t.viewEnd;u=n.startOfDay(u),f=n.endOfDay(f);var g=n.differenceInSeconds,v=n.differenceInDays,b=function mse(n,t){for(var i=t.date2,r=t.excluded,s=t.date1,o=0;s<i;)-1===r.indexOf(n.getDay(s))&&o++,s=n.addDays(s,1);return o}(n,{date1:u,date2:f,excluded:s}),x=v(f,u)+1,E=i.filter(function(F){return F.allDay}).map(function(F){var q=function fse(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,s=t.precision,o=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(e.start<i)return 0;var c=0;switch(s){case"days":c=o(a(e.start),i)*Xc;break;case"minutes":c=l(e.start,i)}return c-=h4(n,{startDate:i,seconds:c,excluded:r,precision:s}),Math.abs(c/Xc)}(n,{event:F,startOfWeek:u,excluded:s,precision:a}),K=function hse(n,t){var e=t.event,i=t.offset,s=t.excluded,o=t.precision,a=t.totalDaysInView,c=n.differenceInSeconds,u=n.addDays,f=n.endOfDay,g=n.differenceInDays,v=Xc,b=(0,n.max)([e.start,t.startOfWeekDate]);e.end&&(v="minutes"===o?c(e.end,b):g(u(f(e.end),1),b)*Xc);var x=i*Xc,O=a*Xc;return x+v>O&&(v=O-x),(v-=h4(n,{startDate:b,seconds:v,excluded:s,precision:o}))/Xc}(n,{event:F,offset:q,startOfWeekDate:u,excluded:s,precision:a,totalDaysInView:x});return{event:F,offset:q,span:K}}).filter(function(F){return F.offset<b}).filter(function(F){return F.span>0}).map(function(F){return{event:F.event,offset:F.offset,span:F.span,startsBeforeWeek:F.event.start<u,endsAfterWeek:(F.event.end||F.event.start)>f}}).sort(function(F,q){var K=g(F.event.start,q.event.start);return 0===K?g(q.event.end||q.event.start,F.event.end||F.event.start):K}),O=[],k=[];return E.forEach(function(F,q){if(-1===k.indexOf(F)){k.push(F);var K=F.span+F.offset,re=E.slice(q+1).filter(function(N){if(N.offset>=K&&K+N.span<=x&&-1===k.indexOf(N)){var $=N.offset-K;return c||(N.offset=$),K+=N.span+$,k.push(N),!0}}),B=PA([F],re,!0),P=B.filter(function(N){return N.event.id}).map(function(N){return N.event.id}).join("-");O.push(da({row:B},P?{id:P}:{}))}}),O}function _se(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.hourDuration,o=t.dayStart,a=t.dayEnd,l=t.weekStartsOn,c=t.excluded,u=t.weekendDays,f=t.segmentHeight,g=t.viewStart,v=t.viewEnd,b=t.minimumEventHeight,x=function wse(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,s=t.dayStart,o=t.dayEnd,a=n.setMinutes,l=n.setHours,c=n.startOfDay,u=n.startOfMinute,f=n.endOfDay,g=n.addMinutes,v=n.addDays,b=[],x=a(l(c(e),wC(s.hour)),CC(s.minute)),E=a(l(u(f(e)),wC(o.hour)),CC(o.minute)),O=(r||60)/i,k=c(e),F=f(e),q=function($){return $};n.getTimezoneOffset(k)!==n.getTimezoneOffset(F)&&(k=v(k,1),x=v(x,1),E=v(E,1),q=function($){return v($,-1)});for(var K=r?1440/r:60,re=0;re<K;re++){for(var B=[],P=0;P<i;P++){var N=g(g(x,re*(r||60)),P*O);N>=x&&N<E&&B.push({date:q(N),displayDate:N,isStart:0===P})}B.length>0&&b.push({segments:B})}return b}(n,{viewDate:i,hourSegments:r,hourDuration:s,dayStart:o,dayEnd:a}),E=LA(n,{viewDate:i,weekStartsOn:l,excluded:c,weekendDays:u,viewStart:g,viewEnd:v}),O=n.setHours,k=n.setMinutes,F=n.getHours,q=n.getMinutes;return E.map(function(K){var re=function bse(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.dayStart,o=t.dayEnd,a=t.eventWidth,l=t.segmentHeight,c=t.hourDuration,u=t.minimumEventHeight,f=n.setMinutes,g=n.setHours,v=n.startOfDay,b=n.startOfMinute,x=n.endOfDay,E=n.differenceInMinutes,O=f(g(v(i),wC(s.hour)),CC(s.minute)),k=f(g(b(x(i)),wC(o.hour)),CC(o.minute));k.setSeconds(59,999);var F=[],q=G_(n,{events:e.filter(function(P){return!P.allDay}),periodStart:O,periodEnd:k}),K=q.sort(function(P,N){return P.start.valueOf()-N.start.valueOf()}).map(function(P){var N=P.start,$=P.end||N,U=N<O,W=$>k,Y=r*l/(c||60),ut=0;if(N>O){var Nt=n.getTimezoneOffset(N),Le=n.getTimezoneOffset(O)-Nt;ut+=E(N,O)+Le}ut*=Y,ut=Math.floor(ut);var Ge=U?O:N,Ye=W?k:$,Jt=n.getTimezoneOffset(Ge)-n.getTimezoneOffset(Ye),Tn=E(Ye,Ge)+Jt;P.end?Tn*=Y:Tn=l,u&&Tn<u&&(Tn=u),Tn=Math.floor(Tn);for(var dn=bC(F,ut,ut+Tn),Gt=0;dn.some(function(Co){return Co.left===Gt});)Gt+=a;var Wr={event:P,height:Tn,width:a,top:ut,left:Gt,startsBeforeDay:U,endsAfterDay:W};return F.push(Wr),Wr}),re=Math.max.apply(Math,K.map(function(P){return P.left+P.width})),B=G_(n,{events:e.filter(function(P){return P.allDay}),periodStart:v(O),periodEnd:x(k)});return{events:K,width:re,allDayEvents:B,period:{events:q,start:O,end:k}}}(n,{events:e,viewDate:K.date,hourSegments:r,dayStart:o,dayEnd:a,segmentHeight:f,eventWidth:1,hourDuration:s,minimumEventHeight:b}),B=x.map(function($){var U=$.segments.map(function(W){var Y=k(O(K.date,F(W.date)),q(W.date));return da(da({},W),{date:Y})});return da(da({},$),{segments:U})});function P($,U){var W=Math.max.apply(Math,U.map(function(ut){return ut.left+1})),Y=$.filter(function(ut){return ut.left>=W}).filter(function(ut){return bC(U,ut.top,ut.top+ut.height).length>0});return Y.length>0?P($,Y):W}var N=re.events.map(function($){var W=100/P(re.events,bC(re.events,$.top,$.top+$.height));return da(da({},$),{left:$.left*W,width:W})});return{hours:B,date:K.date,events:N.map(function($){var U=bC(N.filter(function(W){return W.left>$.left}),$.top,$.top+$.height);return U.length>0?da(da({},$),{width:Math.min.apply(Math,U.map(function(W){return W.left}))-$.left}):$})}})}function bC(n,t,e){return n.filter(function(i){var r=i.top,s=i.top+i.height;return t<s&&s<e||t<r&&r<e||r<=t&&e<=s})}function wC(n){return Math.max(Math.min(23,n),0)}function CC(n){return Math.max(Math.min(59,n),0)}var yp=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(yp||{});class p4 extends se{constructor(t=1/0,e=1/0,i=kA){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(i.push(t),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=i?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}const xse=["addListener","removeListener"],Ese=["addEventListener","removeEventListener"],Dse=["on","off"];function bp(n,t,e,i){if(j(e)&&(i=e,e=void 0),i)return bp(n,t,e).pipe(aA(i));const[r,s]=function Ise(n){return j(n.addEventListener)&&j(n.removeEventListener)}(n)?Ese.map(o=>a=>n[o](t,a,e)):function Tse(n){return j(n.addListener)&&j(n.removeListener)}(n)?xse.map(m4(n,t)):function Sse(n){return j(n.on)&&j(n.off)}(n)?Dse.map(m4(n,t)):[];if(!r&&At(n))return In(o=>bp(o,t,e))(ci(n));if(!r)throw new TypeError("Invalid event target");return new ft(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function m4(n,t){return e=>i=>n[e](t,i)}function wp(){return ge((n,t)=>{let e,i=!1;n.subscribe(Pe(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function VA(n,t){return n=function Mse(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}(n,t),"function"==typeof n?function(){for(var i=arguments,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=i[o];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var BA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},g4=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":BA(n))&&1===n.nodeType&&"object"===BA(n.style)&&"object"===BA(n.ownerDocument)};function _4(n,t){if(t=UA(t,!0),!g4(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function jA(n,t){return-1!==_4(n,t)}function Pse(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return function Rse(n,t){for(var e=0;e<t.length;e++)jA(n,t[e])||n.push(t[e]);return t}(n,e=e.map(UA))}function Ose(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(UA).reduce(function(r,s){var o=_4(n,s);return-1!==o?r.concat(n.splice(o,1)):r},[])}function UA(n,t){if("string"==typeof n)try{return document.querySelector(n)}catch(e){throw e}if(!g4(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function v4(n){if(n===window)return function Nse(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}();try{var t=n.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var t,zA=void 0;"function"!=typeof Object.create?(t=function(){},zA=function(e,i){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===e&&(r.__proto__=null),r}):zA=Object.create;var Vse=zA,Fd=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function HA(n,t){t=t||{};for(var e=Vse(n),i=0;i<Fd.length;i++)void 0!==t[Fd[i]]&&(e[Fd[i]]=t[Fd[i]]);return e}function $A(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var Y_=["webkit","moz","ms","o"],Z_=function(){if(typeof window>"u")return function(){};for(var n=0,t=Y_.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[Y_[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-e),o=window.setTimeout(function(){return i(r+s)},s);return e=r+s,o}}return window.requestAnimationFrame.bind(window)}(),Cp=function(){if(typeof window>"u")return function(){};for(var n=0,t=Y_.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[Y_[n]+"CancelAnimationFrame"]||window[Y_[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function jse(n,t){void 0===t&&(t={});var e=this,i=4,r=!1;if("object"!=typeof t.margin){var s=t.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var o={},a=function Fse(n,t){var e=VA((t=t||{}).allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,o=s.documentElement,a=s.body;n.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}(o),l=function Bse(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function e(s){for(var o=0;o<Fd.length;o++)t[Fd[o]]=s[Fd[o]]}return void 0!==n&&n.addEventListener("mousemove",e),{destroy:function r(){n&&n.removeEventListener("mousemove",e,!1),t=null},dispatch:MouseEvent?function(o,a,l){var c=new MouseEvent("mousemove",HA(t,a));return $A(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEvent?function(o,a,l){var c=HA(t,a),u=document.createEvent("MouseEvents");return u.initMouseEvent("mousemove",!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),$A(u,l),o.dispatchEvent(u)}:"function"==typeof document.createEventObject?function(o,a,l){var c=document.createEventObject(),u=HA(t,a);for(var f in u)c[f]=u[f];return $A(c,l),o.dispatchEvent(c)}:void 0}}(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=VA(t.autoScroll),this.syncMove=VA(t.syncMove,!1),this.destroy=function(U){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",x,!1),window.removeEventListener("touchstart",x,!1),window.removeEventListener("mouseup",E,!1),window.removeEventListener("touchend",E,!1),window.removeEventListener("pointerup",E,!1),window.removeEventListener("mouseleave",k,!1),window.removeEventListener("mousemove",K,!1),window.removeEventListener("touchmove",K,!1),window.removeEventListener("scroll",b,!0),n=[],U&&O()},this.add=function(){for(var U=[],W=arguments.length;W--;)U[W]=arguments[W];return Pse.apply(void 0,[n].concat(U)),this},this.remove=function(){for(var U=[],W=arguments.length;W--;)U[W]=arguments[W];return Ose.apply(void 0,[n].concat(U))};var f,U,u=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),U=n,n=[],U.forEach(function(W){W===window?u=window:e.add(W)}),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return i}},point:{get:function(){return o}},scrolling:{get:function(){return r}}});var v,g=null;function b(U){for(var W=0;W<n.length;W++)if(n[W]===U.target){r=!0;break}r&&Z_(function(){return r=!1})}function x(){c=!0}function E(){c=!1,O()}function O(){Cp(v),Cp(f)}function k(){c=!1}function q(){for(var U=null,W=0;W<n.length;W++)y4(o,n[W])&&(U=n[W]);return U}function K(U){if(e.autoScroll()&&!U.dispatched){var W=U.target,Y=document.body;g&&!y4(o,g)&&(e.scrollWhenOutside||(g=null)),W&&W.parentNode===Y?W=q():(W=function F(U){if(!U)return null;if(g===U||jA(n,U))return U;for(;U=U.parentNode;)if(jA(n,U))return U;return null}(W),W||(W=q())),W&&W!==g&&(g=W),u&&(Cp(f),f=Z_(re)),g&&(Cp(v),v=Z_(B))}}function re(){P(u),Cp(f),f=Z_(re)}function B(){g&&(P(g),Cp(v),v=Z_(B))}function P(U){var Y,ut,W=v4(U);Y=o.x<W.left+e.margin.left?Math.floor(Math.max(-1,(o.x-W.left)/e.margin.left-1)*e.maxSpeed.left):o.x>W.right-e.margin.right?Math.ceil(Math.min(1,(o.x-W.right)/e.margin.right+1)*e.maxSpeed.right):0,ut=o.y<W.top+e.margin.top?Math.floor(Math.max(-1,(o.y-W.top)/e.margin.top-1)*e.maxSpeed.top):o.y>W.bottom-e.margin.bottom?Math.ceil(Math.min(1,(o.y-W.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):0,e.syncMove()&&l.dispatch(U,{pageX:o.pageX+Y,pageY:o.pageY+ut,clientX:o.x+Y,clientY:o.y+ut}),setTimeout(function(){ut&&function N(U,W){U===window?window.scrollTo(U.pageXOffset,U.pageYOffset+W):U.scrollTop+=W}(U,ut),Y&&function $(U,W){U===window?window.scrollTo(U.pageXOffset+W,U.pageYOffset):U.scrollLeft+=W}(U,Y)})}window.addEventListener("mousedown",x,!1),window.addEventListener("touchstart",x,!1),window.addEventListener("mouseup",E,!1),window.addEventListener("touchend",E,!1),window.addEventListener("pointerup",E,!1),window.addEventListener("mousemove",K,!1),window.addEventListener("touchmove",K,!1),window.addEventListener("mouseleave",k,!1),window.addEventListener("scroll",b,!0)}function y4(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:function Lse(n,t){var e=v4(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}(n,t)}function WA(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function xC(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}let b4=(()=>{class n{constructor(){this.currentDrag=new se}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w4=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(z(Yt))},n.\u0275dir=Ke({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),qA=(()=>{class n{constructor(e,i,r,s,o,a,l){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new We,this.dragStart=new We,this.ghostElementCreated=new We,this.dragging=new We,this.dragEnd=new We,this.pointerDown$=new se,this.pointerMove$=new se,this.pointerUp$=new se,this.eventListenerSubscriptions={},this.destroy$=new se,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const e=this.pointerDown$.pipe(vn(()=>this.canDrag()),In(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),o=new ft(v=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",x=>v.next(x))).pipe(Vo(s),Oe(()=>this.getScrollPosition())),a=new se,l=new p4;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const c=we(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(tt()),u=Md([this.pointerMove$,o]).pipe(Oe(([v,b])=>({currentDrag$:a,transformX:v.clientX-i.clientX,transformY:v.clientY-i.clientY,clientX:v.clientX,clientY:v.clientY,scrollLeft:b.left,scrollTop:b.top,target:v.event.target})),Oe(v=>(this.dragSnapGrid.x&&(v.transformX=Math.round(v.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(v.transformY=Math.round(v.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),v)),Oe(v=>(this.dragAxis.x||(v.transformX=0),this.dragAxis.y||(v.transformY=0),v)),Oe(v=>{const b=v.scrollLeft-s.left,x=v.scrollTop-s.top;return{...v,x:v.transformX+b,y:v.transformY+x}}),vn(({x:v,y:b,transformX:x,transformY:E})=>!this.validateDrag||this.validateDrag({x:v,y:b,transform:{x,y:E}})),rr(c),tt()),f=u.pipe(ir(1),tt()),g=u.pipe(Jw(1),tt());return f.subscribe(({clientX:v,clientY:b,x,y:E})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function Use(n,t){return new jse(n,t)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),WA(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const O=this.element.nativeElement.getBoundingClientRect(),k=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(k):this.element.nativeElement.parentNode.insertBefore(k,this.element.nativeElement.nextSibling),this.ghostElement=k,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(k,{position:"fixed",top:`${O.top}px`,left:`${O.left}px`,width:`${O.width}px`,height:`${O.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const F=this.vcr.createEmbeddedView(this.ghostElementTemplate);k.innerHTML="",F.rootNodes.filter(q=>q instanceof Node).forEach(q=>{k.appendChild(q)}),g.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(F))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:v-x,clientY:b-E,element:k})}),g.subscribe(()=>{k.parentElement.removeChild(k),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),g.pipe(In(v=>{const b=l.pipe(function kse(n){return function Ase(n,t){return ge(aB(n,t,arguments.length>=2,!1,!0))}((t,e,i)=>!n||n(e,i)?t+1:t,0)}(),ir(1),Oe(x=>({...v,dragCancelled:x>0})));return l.complete(),b})).subscribe(({x:v,y:b,dragCancelled:x})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:v,y:b,dragCancelled:x})}),xC(this.renderer,this.element,this.dragActiveClass),a.complete()}),we(c,g).pipe(ir(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),u}),tt());we(e.pipe(ir(1),Oe(i=>[,i])),e.pipe(wp())).pipe(vn(([i,r])=>!i||i.x!==r.x||i.y!==r.y),Oe(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:c,target:u})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const f=`translate3d(${l}px, ${c}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:f,"-webkit-transform":f,"-ms-transform":f,"-moz-transform":f,"-o-transform":f})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:u})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){0===e.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){0===e.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=bp(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=bp(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(e,l,i)),(!this.touchStartLongPress||!s||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){const s=this.getScrollPosition(),o_top=Math.abs(s.top-r.top),o_left=Math.abs(s.left-r.left),a=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-o_left,l=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-o_top,u=this.touchStartLongPress;return(a+l>u.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=u.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const e=this.getScrollElement();return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(z(Yt),z(is),z(b4),z(it),z(Es),z(w4,8),z(Ct))},n.\u0275dir=Ke({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Vi]}),n})();function C4(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}let GA=(()=>{class n{constructor(e,i,r,s,o){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=o,this.dragEnter=new We,this.dragLeave=new We,this.dragOver=new We,this.drop=new We}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{WA(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const o=e.pipe(Oe(({clientX:c,clientY:u,dropData:f,target:g})=>{s={clientX:c,clientY:u,dropData:f,target:g},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const v=C4(c,u,i.rect),b=!this.validateDrop||this.validateDrop({clientX:c,clientY:u,target:g,dropData:f});return i.scrollContainerRect?v&&b&&C4(c,u,i.scrollContainerRect):v&&b})),a=o.pipe(Pi());let l;a.pipe(vn(c=>c)).subscribe(()=>{l=!0,WA(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(vn(c=>c)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(wp(),vn(([c,u])=>c&&!u)).subscribe(()=>{l=!1,xC(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),e.subscribe({complete:()=>{r(),xC(this.renderer,this.element,this.dragActiveClass),l&&(xC(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(z(Yt),z(b4),z(it),z(is),z(w4,8))},n.\u0275dir=Ke({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),EC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=vt({}),n})();class x4{}class Hse{}const Ol="*";function xp(n,t){return{type:7,name:n,definitions:t,options:{}}}function Fl(n,t=null){return{type:4,styles:t,timings:n}}function D4(n,t=null){return{type:2,steps:n,options:t}}function os(n){return{type:6,styles:n,offset:null}}function Jc(n,t,e){return{type:0,name:n,styles:t,options:e}}function Ba(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class K_{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class T4{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const Nd=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function S4(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let Wse=0;function I4(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Wse++}`)}function A4(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function k4(n,t,e,i){const r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}const M4=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function R4(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function DC({edges:n,initialRectangle:t,newRectangle:e}){const i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}const P4="resize-active";let O4=(()=>{class n{constructor(e,i,r,s){this.platformId=e,this.renderer=i,this.elm=r,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=M4,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new We,this.resizing=new We,this.resizeEnd=new We,this.mouseup=new se,this.mousedown=new se,this.mousemove=new se,this.destroy$=new se,this.pointerEventListeners=Ep.getInstance(i,s)}ngOnInit(){const e=we(this.pointerEventListeners.pointerDown,this.mousedown),i=we(this.pointerEventListeners.pointerMove,this.mousemove).pipe(Ei(({event:c})=>{s&&c.cancelable&&c.preventDefault()}),tt()),r=we(this.pointerEventListeners.pointerUp,this.mouseup);let s;const o=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>({...M4,...this.resizeCursors});e.pipe(In(c=>{function u(v){return{clientX:v.clientX-c.clientX,clientY:v.clientY-c.clientY}}const f=()=>{const v={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?v.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(v.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?v.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(v.y=+this.resizeSnapGrid.bottom)),v};function g(v,b){return{x:Math.ceil(v.clientX/b.x),y:Math.ceil(v.clientY/b.y)}}return we(i.pipe(ir(1)).pipe(Oe(v=>[,v])),i.pipe(wp())).pipe(Oe(([v,b])=>[v&&u(v),u(b)])).pipe(vn(([v,b])=>{if(!v)return!0;const x=f(),E=g(v,x),O=g(b,x);return E.x!==O.x||E.y!==O.y})).pipe(Oe(([,v])=>{const b=f();return{clientX:Math.round(v.clientX/b.x)*b.x,clientY:Math.round(v.clientY/b.y)*b.y}})).pipe(rr(we(r,e)))})).pipe(vn(()=>!!s)).pipe(Oe(({clientX:c,clientY:u})=>k4(s.startingRect,s.edges,c,u))).pipe(vn(c=>this.allowNegativeResizes||!!(c.height&&c.width&&c.height>0&&c.width>0))).pipe(vn(c=>!this.validateResize||this.validateResize({rectangle:c,edges:DC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c})})),rr(this.destroy$)).subscribe(c=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${c.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${c.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${c.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${c.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:DC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c}),rectangle:c})}),s.currentRect=c}),e.pipe(Oe(({edges:c})=>c||{}),vn(c=>Object.keys(c).length>0),rr(this.destroy$)).subscribe(c=>{s&&o();const u=function qse(n,t){let e=0,i=0;const r=n.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(o&&o.includes("translate")&&(e=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===t)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{const a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-e,right:a.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:c,startingRect:u,currentRect:u};const f=a(),g=R4(s.edges,f);this.renderer.setStyle(document.body,"cursor",g),this.setElementClass(this.elm,P4,!0),this.enableGhostResize&&(s.clonedNode=function $se(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),"canvas"===i?A4(n,t):("input"===i||"select"===i||"textarea"===i)&&I4(n,t),S4("canvas",n,t,A4),S4("input, textarea, select",n,t,I4),t}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",R4(s.edges,f)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:DC({edges:c,initialRectangle:u,newRectangle:u}),rectangle:k4(u,{},0,0)})})}),r.pipe(rr(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,P4),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:DC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),o(),s=null)})}ngOnDestroy(){P3(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)(z(Mo),z(is),z(Yt),z(it))},n.\u0275dir=Ke({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class Ep{constructor(t,e){this.pointerDown=new ft(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),Nd&&(s=t.listen("document","touchstart",o=>{i.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{r(),Nd&&s()}}).pipe(tt()),this.pointerMove=new ft(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),Nd&&(s=t.listen("document","touchmove",o=>{i.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{r(),Nd&&s()}}).pipe(tt()),this.pointerUp=new ft(i=>{let r,s,o;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),Nd&&(s=t.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),o=t.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),Nd&&(s(),o())}}).pipe(tt())}static getInstance(t,e){return Ep.instance||(Ep.instance=new Ep(t,e)),Ep.instance}}let Zse=(()=>{class n{constructor(e,i,r,s){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new se}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),Nd&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),we(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return bp(this.element.nativeElement,e).pipe(rr(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)(z(is),z(Yt),z(it),z(O4,8))},n.\u0275dir=Ke({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),F4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=vt({}),n})();const Kse=function(n){return{action:n}};function Qse(n,t){if(1&n){const e=je();y(0,"a",5),G("mwlClick",function(r){const o=J(e).$implicit,a=V(2).event;return ee(o.onClick({event:a,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=J(e).$implicit,a=V(2).event;return ee(o.onClick({event:a,sourceEvent:r}))}),Zt(1,"calendarA11y"),w()}if(2&n){const e=t.$implicit;R("ngClass",e.cssClass)("innerHtml",e.label,$0),zn("aria-label",ei(1,3,nn(6,Kse,e),"actionButtonLabel"))}}function Xse(n,t){if(1&n&&(y(0,"span",3),ce(1,Qse,2,8,"a",4),w()),2&n){const e=V(),i=e.event,r=e.trackByActionId;I(1),R("ngForOf",i.actions)("ngForTrackBy",r)}}function Jse(n,t){1&n&&ce(0,Xse,2,2,"span",2),2&n&&R("ngIf",t.event.actions)}function eoe(n,t){}const toe=function(n,t){return{event:n,trackByActionId:t}},Dp=function(){return{}};function noe(n,t){if(1&n&&($t(0,"span",2),Zt(1,"calendarEventTitle"),Zt(2,"calendarA11y")),2&n){const e=t.event;R("innerHTML",Fa(1,2,e.title,t.view,e),$0),zn("aria-hidden",ei(2,6,$n(9,Dp),"hideEventTitle"))}}function ioe(n,t){}const roe=function(n,t){return{event:n,view:t}};function soe(n,t){if(1&n&&(y(0,"div",2),$t(1,"div",3)(2,"div",4),w()),2&n){const e=t.contents;R("ngClass","cal-tooltip-"+t.placement),I(2),R("innerHtml",e,$0)}}function ooe(n,t){}const aoe=function(n,t,e){return{contents:n,placement:t,event:e}};function loe(n,t){if(1&n&&(y(0,"span",7),S(1),w()),2&n){const e=V().day;I(1),qe(e.badgeTotal)}}const QA=function(n){return{backgroundColor:n}},coe=function(n,t){return{event:n,draggedFrom:t}},Q_=function(n,t){return{x:n,y:t}},TC=function(){return{delay:300,delta:30}};function uoe(n,t){if(1&n){const e=je();y(0,"div",10),G("mouseenter",function(){const s=J(e).$implicit;return ee(V(2).highlightDay.emit({event:s}))})("mouseleave",function(){const s=J(e).$implicit;return ee(V(2).unhighlightDay.emit({event:s}))})("mwlClick",function(r){const o=J(e).$implicit;return ee(V(2).eventClicked.emit({event:o,sourceEvent:r}))}),Zt(1,"calendarEventTitle"),Zt(2,"calendarA11y"),w()}if(2&n){const e=t.$implicit,i=V(2),r=i.tooltipPlacement,s=i.tooltipTemplate,o=i.tooltipAppendToBody,a=i.tooltipDelay,l=i.day,c=i.validateDrag;Jn("cal-draggable",e.draggable),R("ngStyle",nn(22,QA,null==e.color?null:e.color.primary))("ngClass",null==e?null:e.cssClass)("mwlCalendarTooltip",Fa(1,15,e.title,"monthTooltip",e))("tooltipPlacement",r)("tooltipEvent",e)("tooltipTemplate",s)("tooltipAppendToBody",o)("tooltipDelay",a)("dropData",zi(24,coe,e,l))("dragAxis",zi(27,Q_,e.draggable,e.draggable))("validateDrag",c)("touchStartLongPress",$n(30,TC)),zn("aria-hidden",ei(2,19,$n(31,Dp),"hideMonthCellEvents"))}}function doe(n,t){if(1&n&&(y(0,"div",8),ce(1,uoe,3,32,"div",9),w()),2&n){const e=V(),i=e.day,r=e.trackByEventId;I(1),R("ngForOf",i.events)("ngForTrackBy",r)}}const hoe=function(n,t){return{day:n,locale:t}};function foe(n,t){if(1&n&&(y(0,"div",2),Zt(1,"calendarA11y"),y(2,"span",3),ce(3,loe,2,1,"span",4),y(4,"span",5),S(5),Zt(6,"calendarDate"),w()()(),ce(7,doe,2,2,"div",6)),2&n){const e=t.day,i=t.locale;zn("aria-label",ei(1,4,zi(11,hoe,e,i),"monthCell")),I(3),R("ngIf",e.badgeTotal>0),I(2),qe(Fa(6,7,e.date,"monthViewDayNumber",i)),I(2),R("ngIf",e.events.length>0)}}function poe(n,t){}const moe=function(n,t,e,i,r,s,o,a,l,c,u,f){return{day:n,openDay:t,locale:e,tooltipPlacement:i,highlightDay:r,unhighlightDay:s,eventClicked:o,tooltipTemplate:a,tooltipAppendToBody:l,tooltipDelay:c,trackByEventId:u,validateDrag:f}},goe=function(n){return{event:n}},N4=function(n,t){return{event:n,locale:t}};function _oe(n,t){if(1&n){const e=je();y(0,"div",7),$t(1,"span",8),S(2," "),y(3,"mwl-calendar-event-title",9),G("mwlClick",function(r){const o=J(e).$implicit;return ee(V(2).eventClicked.emit({event:o,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=J(e).$implicit;return ee(V(2).eventClicked.emit({event:o,sourceEvent:r}))}),Zt(4,"calendarA11y"),w(),S(5," "),$t(6,"mwl-calendar-event-actions",10),w()}if(2&n){const e=t.$implicit,i=V(2).validateDrag,r=V();Jn("cal-draggable",e.draggable),R("ngClass",null==e?null:e.cssClass)("dropData",nn(16,goe,e))("dragAxis",zi(18,Q_,e.draggable,e.draggable))("validateDrag",i)("touchStartLongPress",$n(21,TC)),I(1),R("ngStyle",nn(22,QA,null==e.color?null:e.color.primary)),I(2),R("event",e)("customTemplate",r.eventTitleTemplate),zn("aria-label",ei(4,13,zi(24,N4,e,r.locale),"eventDescription")),I(3),R("event",e)("customTemplate",r.eventActionsTemplate)}}const L4=function(n,t){return{date:n,locale:t}};function voe(n,t){if(1&n&&(y(0,"div",3),$t(1,"span",4),Zt(2,"calendarA11y"),$t(3,"span",5),Zt(4,"calendarA11y"),ce(5,_oe,7,27,"div",6),w()),2&n){const e=V(),i=e.events,r=e.trackByEventId,s=V();R("@collapse",void 0),I(1),zn("aria-label",ei(2,5,zi(11,L4,s.date,s.locale),"openDayEventsAlert")),I(2),zn("aria-label",ei(4,8,zi(14,L4,s.date,s.locale),"openDayEventsLandmark")),I(2),R("ngForOf",i)("ngForTrackBy",r)}}function yoe(n,t){1&n&&ce(0,voe,6,17,"div",2),2&n&&R("ngIf",t.isOpen)}function boe(n,t){}const woe=function(n,t,e,i,r){return{events:n,eventClicked:t,isOpen:e,trackByEventId:i,validateDrag:r}};function Coe(n,t){if(1&n){const e=je();y(0,"div",4),G("click",function(r){const o=J(e).$implicit;return ee(V(2).columnHeaderClicked.emit({isoDayNumber:o.day,sourceEvent:r}))}),S(1),Zt(2,"calendarDate"),w()}if(2&n){const e=t.$implicit,i=V().locale;Jn("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),R("ngClass",e.cssClass),I(1),On(" ",Fa(2,10,e.date,"monthViewColumnHeader",i)," ")}}function xoe(n,t){if(1&n&&(y(0,"div",2),ce(1,Coe,3,14,"div",3),w()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;I(1),R("ngForOf",e)("ngForTrackBy",i)}}function Eoe(n,t){}const Doe=function(n,t,e){return{days:n,locale:t,trackByWeekDayHeaderDate:e}};function Toe(n,t){if(1&n){const e=je();y(0,"mwl-calendar-month-cell",7),G("mwlClick",function(r){const o=J(e).$implicit;return ee(V(2).dayClicked.emit({day:o,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=J(e).$implicit;return ee(V(2).dayClicked.emit({day:o,sourceEvent:r}))})("highlightDay",function(r){return J(e),ee(V(2).toggleDayHighlight(r.event,!0))})("unhighlightDay",function(r){return J(e),ee(V(2).toggleDayHighlight(r.event,!1))})("drop",function(r){const o=J(e).$implicit;return ee(V(2).eventDropped(o,r.dropData.event,r.dropData.draggedFrom))})("eventClicked",function(r){return J(e),ee(V(2).eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))}),Zt(1,"calendarA11y"),w()}if(2&n){const e=t.$implicit,i=V(2);R("ngClass",null==e?null:e.cssClass)("day",e)("openDay",i.openDay)("locale",i.locale)("tooltipPlacement",i.tooltipPlacement)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipTemplate",i.tooltipTemplate)("tooltipDelay",i.tooltipDelay)("customTemplate",i.cellTemplate)("ngStyle",nn(15,QA,e.backgroundColor))("clickListenerDisabled",0===i.dayClicked.observers.length),zn("tabindex",ei(1,12,$n(17,Dp),"monthCellTabIndex"))}}function Soe(n,t){if(1&n){const e=je();y(0,"div")(1,"div",4),ce(2,Toe,2,18,"mwl-calendar-month-cell",5),Zt(3,"slice"),w(),y(4,"mwl-calendar-open-day-events",6),G("eventClicked",function(r){return J(e),ee(V().eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))})("drop",function(r){J(e);const s=V();return ee(s.eventDropped(s.openDay,r.dropData.event,r.dropData.draggedFrom))}),w()()}if(2&n){const e=t.$implicit,i=V();I(2),R("ngForOf",Fa(3,9,i.view.days,e,e+i.view.totalDaysVisibleInWeek))("ngForTrackBy",i.trackByDate),I(2),R("locale",i.locale)("isOpen",i.openRowIndex===e)("events",null==i.openDay?null:i.openDay.events)("date",null==i.openDay?null:i.openDay.date)("customTemplate",i.openDayEventsTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)}}function Ioe(n,t){if(1&n){const e=je();y(0,"div",4),G("mwlClick",function(r){const o=J(e).$implicit;return ee(V().dayHeaderClicked.emit({day:o,sourceEvent:r}))})("drop",function(r){const o=J(e).$implicit;return ee(V().eventDropped.emit({event:r.dropData.event,newStart:o.date}))})("dragEnter",function(){const s=J(e).$implicit;return ee(V().dragEnter.emit({date:s.date}))}),y(1,"b"),S(2),Zt(3,"calendarDate"),w(),$t(4,"br"),y(5,"span"),S(6),Zt(7,"calendarDate"),w()()}if(2&n){const e=t.$implicit,i=V().locale;Jn("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),R("ngClass",e.cssClass),I(2),qe(Fa(3,11,e.date,"weekViewColumnHeader",i)),I(4),qe(Fa(7,15,e.date,"weekViewColumnSubHeader",i))}}function Aoe(n,t){if(1&n&&(y(0,"div",2),ce(1,Ioe,8,19,"div",3),w()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;I(1),R("ngForOf",e)("ngForTrackBy",i)}}function koe(n,t){}const Moe=function(n,t,e,i,r,s){return{days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:s}},Roe=function(n,t,e){return{color:n,backgroundColor:t,borderColor:e}};function Poe(n,t){if(1&n){const e=je();y(0,"div",2),G("mwlClick",function(r){return ee(J(e).eventClicked.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){return ee(J(e).eventClicked.emit({sourceEvent:r}))}),Zt(1,"calendarEventTitle"),Zt(2,"calendarA11y"),$t(3,"mwl-calendar-event-actions",3),S(4," "),$t(5,"mwl-calendar-event-title",4),w()}if(2&n){const e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,s=t.tooltipAppendToBody,o=t.tooltipDisabled,a=t.tooltipDelay,l=t.daysInWeek,c=V();R("ngStyle",bw(20,Roe,null==e.event.color?null:e.event.color.secondaryText,null==e.event.color?null:e.event.color.secondary,null==e.event.color?null:e.event.color.primary))("mwlCalendarTooltip",o?"":Fa(1,13,e.event.title,1===l?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",s)("tooltipDelay",a),zn("aria-label",ei(2,17,zi(24,N4,e.tempEvent||e.event,c.locale),"eventDescription")),I(3),R("event",e.tempEvent||e.event)("customTemplate",c.eventActionsTemplate),I(2),R("event",e.tempEvent||e.event)("customTemplate",c.eventTitleTemplate)("view",1===l?"day":"week")}}function Ooe(n,t){}const Foe=function(n,t,e,i,r,s,o,a,l){return{weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:s,tooltipDelay:o,column:a,daysInWeek:l}};function Noe(n,t){if(1&n&&(y(0,"div",4),S(1),Zt(2,"calendarDate"),w()),2&n){const e=V(),i=e.segment,r=e.daysInWeek,s=e.locale;I(1),On(" ",Fa(2,1,i.displayDate,1===r?"dayViewHour":"weekViewHour",s)," ")}}function Loe(n,t){if(1&n&&(y(0,"div",2),Zt(1,"calendarA11y"),ce(2,Noe,3,5,"div",3),w()),2&n){const e=t.segment,r=t.isTimeLabel,s=t.daysInWeek;Cs("height",t.segmentHeight,"px"),Jn("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),R("ngClass",e.cssClass),zn("aria-hidden",ei(1,9,$n(12,Dp),1===s?"hideDayHourSegment":"hideWeekHourSegment")),I(2),R("ngIf",r)}}function Voe(n,t){}const Boe=function(n,t,e,i,r){return{segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r}};function joe(n,t){1&n&&$t(0,"div",3),2&n&&Cs("top",V().topPx,"px")}function Uoe(n,t){1&n&&ce(0,joe,1,2,"div",2),2&n&&R("ngIf",t.isVisible)}function zoe(n,t){}const Hoe=function(n,t,e,i,r,s,o){return{columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:s,topPx:o}};function $oe(n,t){1&n&&jS(0)}function Woe(n,t){if(1&n){const e=je();y(0,"div",14),G("drop",function(r){const o=J(e).$implicit;return ee(V(2).eventDropped(r,o.date,!0))})("dragEnter",function(){const s=J(e).$implicit;return ee(V(2).dateDragEnter(s.date))}),w()}}const qoe=function(){return{left:!0}};function Goe(n,t){1&n&&$t(0,"div",23),2&n&&R("resizeEdges",$n(1,qoe))}const Yoe=function(){return{right:!0}};function Zoe(n,t){1&n&&$t(0,"div",24),2&n&&R("resizeEdges",$n(1,Yoe))}const Koe=function(n,t){return{left:n,right:t}},V4=function(n,t){return{event:n,calendarId:t}},Qoe=function(n){return{x:n}};function Xoe(n,t){if(1&n){const e=je();y(0,"div",18,19),G("resizeStart",function(r){const o=J(e).$implicit;V();const a=er(1);return ee(V(2).allDayEventResizeStarted(a,o,r))})("resizing",function(r){const o=J(e).$implicit,a=V(3);return ee(a.allDayEventResizing(o,r,a.dayColumnWidth))})("resizeEnd",function(){const s=J(e).$implicit;return ee(V(3).allDayEventResizeEnded(s))})("dragStart",function(){const s=J(e).$implicit,o=er(1);V();const a=er(1);return ee(V(2).dragStarted(a,o,s,!1))})("dragging",function(){return J(e),ee(V(3).allDayEventDragMove())})("dragEnd",function(r){const o=J(e).$implicit,a=V(3);return ee(a.dragEnded(o,r,a.dayColumnWidth))}),ce(2,Goe,1,2,"div",20),y(3,"mwl-calendar-week-view-event",21),G("eventClicked",function(r){const o=J(e).$implicit;return ee(V(3).eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),w(),ce(4,Zoe,1,2,"div",22),w()}if(2&n){const e=t.$implicit,i=V(3);Cs("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),Jn("cal-draggable",e.event.draggable&&0===i.allDayEventResizes.size)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),R("ngClass",null==e.event?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",zi(33,Koe,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",zi(36,V4,e.event,i.calendarId))("dragAxis",zi(39,Q_,e.event.draggable&&0===i.allDayEventResizes.size,!i.snapDraggedEvents&&e.event.draggable&&0===i.allDayEventResizes.size))("dragSnapGrid",i.snapDraggedEvents?nn(42,Qoe,i.dayColumnWidth):$n(44,Dp))("validateDrag",i.validateDrag)("touchStartLongPress",$n(45,TC)),I(2),R("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),I(1),R("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),I(1),R("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function Joe(n,t){if(1&n&&(y(0,"div",15,16),ce(2,Xoe,5,46,"div",17),w()),2&n){const e=t.$implicit,i=V(2);I(2),R("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function eae(n,t){if(1&n){const e=je();y(0,"div",8,9),G("dragEnter",function(){return J(e),ee(V().dragEnter("allDay"))})("dragLeave",function(){return J(e),ee(V().dragLeave("allDay"))}),y(2,"div",5)(3,"div",10),ce(4,$oe,1,0,"ng-container",11),w(),ce(5,Woe,1,0,"div",12),w(),ce(6,Joe,3,2,"div",13),w()}if(2&n){const e=V();I(4),R("ngTemplateOutlet",e.allDayEventsLabelTemplate),I(1),R("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),I(1),R("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function tae(n,t){if(1&n&&$t(0,"mwl-calendar-week-view-hour-segment",28),2&n){const e=t.$implicit,i=V(3);Cs("height",i.hourSegmentHeight,"px"),R("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function nae(n,t){if(1&n&&(y(0,"div",26),ce(1,tae,1,8,"mwl-calendar-week-view-hour-segment",27),w()),2&n){const e=t.$implicit,i=t.odd,r=V(2);Jn("cal-hour-odd",i),I(1),R("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function iae(n,t){if(1&n&&(y(0,"div",10),ce(1,nae,2,4,"div",25),w()),2&n){const e=V();I(1),R("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}const rae=function(){return{left:!0,top:!0}};function sae(n,t){1&n&&$t(0,"div",23),2&n&&R("resizeEdges",$n(1,rae))}function oae(n,t){}function aae(n,t){if(1&n){const e=je();y(0,"mwl-calendar-week-view-event",36),G("eventClicked",function(r){J(e);const s=V().$implicit;return ee(V(2).eventClicked.emit({event:s.event,sourceEvent:r.sourceEvent}))}),w()}if(2&n){const e=V().$implicit,i=V().$implicit,r=V();R("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}const lae=function(){return{right:!0,bottom:!0}};function cae(n,t){1&n&&$t(0,"div",24),2&n&&R("resizeEdges",$n(1,lae))}const uae=function(n,t,e,i){return{left:n,right:t,top:e,bottom:i}};function dae(n,t){if(1&n){const e=je();y(0,"div",33,19),G("resizeStart",function(r){const o=J(e).$implicit,a=V(2),l=er(6);return ee(a.timeEventResizeStarted(l,o,r))})("resizing",function(r){const o=J(e).$implicit;return ee(V(2).timeEventResizing(o,r))})("resizeEnd",function(){const s=J(e).$implicit;return ee(V(2).timeEventResizeEnded(s))})("dragStart",function(){const s=J(e).$implicit,o=er(1),a=V(2),l=er(6);return ee(a.dragStarted(l,o,s,!0))})("dragging",function(r){const o=J(e).$implicit;return ee(V(2).dragMove(o,r))})("dragEnd",function(r){const o=J(e).$implicit,a=V(2);return ee(a.dragEnded(o,r,a.dayColumnWidth,!0))}),ce(2,sae,1,2,"div",20),ce(3,oae,0,0,"ng-template",34),ce(4,aae,1,12,"ng-template",null,35,uo),ce(6,cae,1,2,"div",22),w()}if(2&n){const e=t.$implicit,i=er(5),r=V(2);Cs("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),Jn("cal-draggable",e.event.draggable&&0===r.timeEventResizes.size)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),R("ngClass",e.event.cssClass)("hidden",0===e.height&&0===e.width)("resizeCursors",r.resizeCursors)("resizeSnapGrid",HL(30,uae,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",zi(35,V4,e.event,r.calendarId))("dragAxis",zi(38,Q_,e.event.draggable&&0===r.timeEventResizes.size,e.event.draggable&&0===r.timeEventResizes.size))("dragSnapGrid",r.snapDraggedEvents?zi(41,Q_,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):$n(44,Dp))("touchStartLongPress",$n(45,TC))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),I(2),R("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),I(1),R("ngTemplateOutlet",i),I(3),R("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function hae(n,t){if(1&n){const e=je();y(0,"mwl-calendar-week-view-hour-segment",38),G("mwlClick",function(r){const o=J(e).$implicit;return ee(V(3).hourSegmentClicked.emit({date:o.date,sourceEvent:r}))})("drop",function(r){const o=J(e).$implicit;return ee(V(3).eventDropped(r,o.date,!1))})("dragEnter",function(){const s=J(e).$implicit;return ee(V(3).dateDragEnter(s.date))}),w()}if(2&n){const e=t.$implicit,i=V(3);Cs("height",i.hourSegmentHeight,"px"),R("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",0===i.hourSegmentClicked.observers.length)("dragOverClass",i.dragActive&&i.snapDraggedEvents?null:"cal-drag-over")("isTimeLabel",1===i.daysInWeek)}}function fae(n,t){if(1&n&&(y(0,"div",26),ce(1,hae,1,10,"mwl-calendar-week-view-hour-segment",37),w()),2&n){const e=t.$implicit,i=t.odd,r=V(2);Jn("cal-hour-odd",i),I(1),R("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function pae(n,t){if(1&n&&(y(0,"div",29),$t(1,"mwl-calendar-week-view-current-time-marker",30),y(2,"div",31),ce(3,dae,7,46,"div",32),w(),ce(4,fae,2,4,"div",25),w()),2&n){const e=t.$implicit,i=V();I(1),R("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),I(2),R("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),I(1),R("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}let Ld=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new We,this.destroy$=new se}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(rr(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new ft(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)(z(is),z(Yt),z(Ct))},n.\u0275dir=Ke({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),SC=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new We,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(13===e.keyCode||13===e.which||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){null!==this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)(z(Yt),z(it),z(is))},n.\u0275dir=Ke({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),X_=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`\n        ${yr(e.date,"EEEE MMMM d",i)},\n        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${yr(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`\n      Beginning of expanded view for ${yr(e,"EEEE MMMM dd",i)}\n    `}openDayEventsAlert({date:e,locale:i}){return`${yr(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(!0===e.allDay)return this.allDayEventDescription({event:e,locale:i});const r=`\n      ${yr(e.start,"EEEE MMMM dd",i)},\n      ${e.title}, from ${yr(e.start,"hh:mm a",i)}\n    `;return e.end?r+` to ${yr(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){const r=`\n      ${e.title}, event spans multiple days:\n      start time ${yr(e.start,"MMMM dd hh:mm a",i)}\n    `;return e.end?r+`, stop time ${yr(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(ie(qI))},n.\u0275prov=Se({token:n,factory:n.\u0275fac}),n})(),Vd=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){const r=Object.getOwnPropertyNames(Object.getPrototypeOf(X_.prototype)).filter(s=>"constructor"!==s);throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)(z(X_,16),z(Ws,16))},n.\u0275pipe=Fi({name:"calendarA11y",type:n,pure:!0}),n})(),B4=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter"]],template:function(e,i){if(1&e&&(ce(0,Jse,1,1,"ng-template",null,0,uo),ce(2,eoe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",zi(2,toe,i.event,i.trackByActionId))}},dependencies:[Ir,Ci,nr,fo,Ld,SC,Vd],encapsulation:2}),n})();class IC{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}}let XA=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)(z(IC,16))},n.\u0275pipe=Fi({name:"calendarEventTitle",type:n,pure:!0}),n})(),j4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(1&e&&(ce(0,noe,3,10,"ng-template",null,0,uo),ce(2,ioe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",zi(2,roe,i.event,i.view))}},dependencies:[fo,XA,Vd],encapsulation:2}),n})(),mae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(1&e&&(ce(0,soe,3,2,"ng-template",null,0,uo),ce(2,ooe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",bw(2,aoe,i.contents,i.placement,i.event))}},dependencies:[Ir,fo],encapsulation:2}),n})(),U4=(()=>{class n{constructor(e,i,r,s,o,a){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=o,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new se,this.tooltipFactory=s.resolveComponentFactory(mae)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(null===this.delay?ve("now"):MA(this.delay)).pipe(rr(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=function cse(n,t,e,i,r){var s=Array.isArray(e)?e:e.split(lse),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,l=function(E){var O=E.split("-"),k=O[0],F=O[1],q=[];return r&&(q.push(r+"-"+k),F&&q.push(r+"-"+k+"-"+F),q.forEach(function(K){a.add(K)})),q};r&&o.forEach(function(E){a.remove(r+"-"+E)});var c=s.findIndex(function(E){return"auto"===E});c>=0&&o.forEach(function(E){null==s.find(function(O){return-1!==O.search("^"+E)})&&s.splice(c++,1,E)});var u=t.style;u.position="absolute",u.top="0",u.left="0",u["will-change"]="transform";for(var f,g=!1,v=0,b=s;v<b.length;v++){var x=l(f=b[v]);if(d4.positionElements(n,t,f,i)){g=!0;break}r&&x.forEach(function(E){a.remove(E)})}return g||(l(f=s[0]),d4.positionElements(n,t,f,i)),f}(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===e.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)(z(Yt),z(Ui),z(is),z(Ed),z(Es),z(Ct))},n.\u0275dir=Ke({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){1&e&&G("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:["mwlCalendarTooltip","contents"],placement:["tooltipPlacement","placement"],customTemplate:["tooltipTemplate","customTemplate"],event:["tooltipEvent","event"],appendToBody:["tooltipAppendToBody","appendToBody"],delay:["tooltipDelay","delay"]},features:[Vi]}),n})();var Bo=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(Bo||{});const z4=n=>function Cse(n,t){var e=!0;function i(r,s){t(r,s),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(yp.StartPropertyNotDate,r):i(yp.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(yp.EndPropertyNotDate,r),r.start>r.end&&i(yp.EndsBeforeStart,r))}),e):(t(yp.NotArray,n),!1)}(n,(...e)=>console.warn("angular-calendar",...e));function H4(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function $4(n,t){return Math.round(n/t)*t}const W4=(n,t)=>t.id?t.id:t,JA=(n,t)=>t.date.toISOString(),vae=(n,t)=>t.date.toISOString(),yae=(n,t)=>t.segments[0].date.toISOString(),bae=(n,t)=>t.event.id?t.event.id:t.event,wae=(n,t)=>t.event.id?t.event.id:t.event;function ek(n,t,e,i,r){const s=$4(n,i||e),o=function xae(n,t,e){return(e||60)/(n*t)}(t,e,r);return s*o}function q4(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Bd(n,t,e,i){let r=0,s=0;const o=e<0?n.subDays:n.addDays;let a=t;for(;s<=Math.abs(e);){a=o(t,r);const l=n.getDay(a);-1===i.indexOf(l)&&s++,r++}return a}function tk(n,t,e,i=[],r){let s=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e});const o=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(s))>-1&&s<o;)s=n.addDays(s,1);if(r)return{viewStart:s,viewEnd:n.endOfDay(Bd(n,s,r-1,i))};{let a=o;for(;i.indexOf(n.getDay(a))>-1&&a>s;)a=n.subDays(a,1);return{viewStart:s,viewEnd:a}}}function nk({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}class jd{}let Tae=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return yr(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return yr(e,"d",i)}monthViewTitle({date:e,locale:i}){return yr(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return yr(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return yr(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:s,daysInWeek:o}){const{viewStart:a,viewEnd:l}=tk(this.dateAdapter,e,r,s,o),c=(u,f)=>yr(u,"MMM d"+(f?", yyyy":""),i);return`${c(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${c(l,!0)}`}weekViewHour({date:e,locale:i}){return yr(e,"h a",i)}dayViewHour({date:e,locale:i}){return yr(e,"h a",i)}dayViewTitle({date:e,locale:i}){return yr(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(ie(jd))},n.\u0275prov=Se({token:n,factory:n.\u0275fac}),n})(),J_=(()=>{class n extends Tae{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=Ji(n)))(i||n)}}(),n.\u0275prov=Se({token:n,factory:n.\u0275fac}),n})(),AC=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,s=0,o=[],a){if(typeof this.dateFormatter[i]>"u"){const l=Object.getOwnPropertyNames(Object.getPrototypeOf(J_.prototype)).filter(c=>"constructor"!==c);throw new Error(`${i} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:s,excludeDays:o,daysInWeek:a})}}return n.\u0275fac=function(e){return new(e||n)(z(J_,16),z(Ws,16))},n.\u0275pipe=Fi({name:"calendarDate",type:n,pure:!0}),n})(),ev=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return function yse(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,o=t.excluded,a=void 0===o?[]:o,l=t.viewStart,c=void 0===l?n.startOfMonth(r):l,u=t.viewEnd,f=void 0===u?n.endOfMonth(r):u,g=t.weekendDays;i||(i=[]);for(var N,b=n.endOfWeek,x=n.differenceInDays,E=n.startOfDay,O=n.addHours,k=n.endOfDay,F=n.isSameMonth,q=n.getDay,K=(0,n.startOfWeek)(c,{weekStartsOn:s}),re=b(f,{weekStartsOn:s}),B=G_(n,{events:i,periodStart:K,periodEnd:re}),P=[],$=function(Ge){var Ye;if(N?(Ye=E(O(N,24)),N.getTime()===Ye.getTime()&&(Ye=E(O(N,25))),N=Ye):Ye=N=K,!a.some(function(un){return q(Ye)===un})){var Jt=f4(n,{date:Ye,weekendDays:g}),Tn=G_(n,{events:B,periodStart:E(Ye),periodEnd:k(Ye)});Jt.inMonth=F(Ye,r),Jt.events=Tn,Jt.badgeTotal=Tn.length,P.push(Jt)}},U=0;U<x(re,K)+1;U++)$();var W=[],Y=FA-a.length;if(Y<FA)for(U=0;U<P.length;U+=Y){var ut=P.slice(U,U+Y);ut.some(function(Ye){return c<=Ye.date&&Ye.date<f})&&(W=PA(PA([],W,!0),ut,!0))}else W=P;var Ne=Math.floor(W.length/Y),Le=[];for(U=0;U<Ne;U++)Le.push(U*Y);return{rowOffsets:Le,totalDaysVisibleInWeek:Y,days:W,period:{start:W[0].date,end:k(W[W.length-1].date),events:B}}}(this.dateAdapter,e)}getWeekViewHeader(e){return LA(this.dateAdapter,e)}getWeekView(e){return function vse(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,o=t.excluded,a=void 0===o?[]:o,l=t.precision,c=void 0===l?"days":l,u=t.absolutePositionedEvents,f=void 0!==u&&u,g=t.hourSegments,v=t.hourDuration,b=t.dayStart,x=t.dayEnd,E=t.weekendDays,O=t.segmentHeight,k=t.minimumEventHeight,F=t.viewStart,q=void 0===F?n.startOfWeek(r,{weekStartsOn:s}):F,K=t.viewEnd,re=void 0===K?n.endOfWeek(r,{weekStartsOn:s}):K;i||(i=[]);var P=n.endOfDay,N=G_(n,{events:i,periodStart:q=(0,n.startOfDay)(q),periodEnd:re=P(re)}),$=LA(n,{viewDate:r,weekStartsOn:s,excluded:a,weekendDays:E,viewStart:q,viewEnd:re});return{allDayEventRows:gse(n,{events:N,excluded:a,precision:c,absolutePositionedEvents:f,viewStart:q,viewEnd:re}),period:{events:N,start:$[0].date,end:P($[$.length-1].date)},hourColumns:_se(n,{events:i,viewDate:r,hourSegments:g,hourDuration:v,dayStart:b,dayEnd:x,weekStartsOn:s,excluded:a,weekendDays:E,segmentHeight:O,viewStart:q,viewEnd:re,minimumEventHeight:k})}}(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(ie(jd))},n.\u0275prov=Se({token:n,factory:n.\u0275fac}),n})();new Ce("Moment");var eu=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(eu||{});let Tp=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||IC,i.dateFormatter||J_,i.utils||ev,i.a11y||X_]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=vt({providers:[qI],imports:[Cn]}),n})(),Sae=(()=>{class n{constructor(){this.highlightDay=new We,this.unhighlightDay=new We,this.eventClicked=new We,this.trackByEventId=W4,this.validateDrag=nk}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(e,i){2&e&&Jn("cal-past",i.day.isPast)("cal-today",i.day.isToday)("cal-future",i.day.isFuture)("cal-weekend",i.day.isWeekend)("cal-in-month",i.day.inMonth)("cal-out-month",!i.day.inMonth)("cal-has-events",i.day.events.length>0)("cal-open",i.day===i.openDay)("cal-event-highlight",!!i.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:15,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"]],template:function(e,i){if(1&e&&(ce(0,foe,8,14,"ng-template",null,0,uo),ce(2,poe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",rI(2,moe,[i.day,i.openDay,i.locale,i.tooltipPlacement,i.highlightDay,i.unhighlightDay,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDelay,i.trackByEventId,i.validateDrag]))}},dependencies:[Ir,Ci,nr,fo,Lo,qA,U4,Ld,AC,XA,Vd],encapsulation:2}),n})();const Iae=xp("collapse",[Jc("void",os({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),Jc("*",os({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),Ba("* => void",Fl("150ms ease-out")),Ba("void => *",Fl("150ms ease-in"))]);let Aae=(()=>{class n{constructor(){this.isOpen=!1,this.eventClicked=new We,this.trackByEventId=W4,this.validateDrag=nk}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-open-day-events","role","application",4,"ngIf"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"event","customTemplate","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"]],template:function(e,i){if(1&e&&(ce(0,yoe,1,1,"ng-template",null,0,uo),ce(2,boe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",iI(2,woe,i.events,i.eventClicked,i.isOpen,i.trackByEventId,i.validateDrag))}},dependencies:[Ir,Ci,nr,fo,Lo,qA,B4,j4,Ld,SC,Vd],encapsulation:2,data:{animation:[Iae]}}),n})(),kae=(()=>{class n{constructor(){this.columnHeaderClicked=new We,this.trackByWeekDayHeaderDate=JA}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass","click"]],template:function(e,i){if(1&e&&(ce(0,xoe,2,2,"ng-template",null,0,uo),ce(2,Eoe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",bw(2,Doe,i.days,i.locale,i.trackByWeekDayHeaderDate))}},dependencies:[Ir,Ci,fo,AC],encapsulation:2}),n})(),Mae=(()=>{class n{constructor(e,i,r,s){this.cdr=e,this.utils=i,this.dateAdapter=s,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new We,this.dayClicked=new We,this.eventClicked=new We,this.columnHeaderClicked=new We,this.eventTimesChanged=new We,this.trackByRowOffset=(o,a)=>this.view.days.slice(a,this.view.totalDaysVisibleInWeek).map(l=>l.date.toISOString()).join("-"),this.trackByDate=(o,a)=>a.date.toISOString(),this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays,r=e.viewDate||e.events||e.excludeDays||e.weekendDays;i&&this.refreshHeader(),e.events&&z4(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender(),(e.activeDayIsOpen||e.viewDate||e.events||e.excludeDays||e.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(e,i){this.view.days.forEach(r=>{i&&r.events.indexOf(e)>-1?r.backgroundColor=e.color&&e.color.secondary||"#D1E8FF":delete r.backgroundColor})}eventDropped(e,i,r){if(e!==r){const s=this.dateAdapter.getYear(e.date),o=this.dateAdapter.getMonth(e.date),a=this.dateAdapter.getDate(e.date),l=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(i.start,s),o),a);let c;if(i.end){const u=this.dateAdapter.differenceInSeconds(l,i.start);c=this.dateAdapter.addSeconds(i.end,u)}this.eventTimesChanged.emit({event:i,newStart:l,newEnd:c,day:e,type:eu.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(!0===this.activeDayIsOpen){const e=this.activeDay||this.viewDate;this.openDay=this.view.days.find(r=>this.dateAdapter.isSameDay(r.date,e));const i=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(i/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}}return n.\u0275fac=function(e){return new(e||n)(z(Sl),z(ev),z(Ws),z(jd))},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[Vi],decls:4,vars:5,consts:[["role","grid",1,"cal-month-view"],[3,"days","locale","customTemplate","columnHeaderClicked"],[1,"cal-days"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate","eventClicked","drop"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked"]],template:function(e,i){1&e&&(y(0,"div",0)(1,"mwl-calendar-month-view-header",1),G("columnHeaderClicked",function(s){return i.columnHeaderClicked.emit(s)}),w(),y(2,"div",2),ce(3,Soe,5,13,"div",3),w()()),2&e&&(I(1),R("days",i.columnHeaders)("locale",i.locale)("customTemplate",i.headerTemplate),I(2),R("ngForOf",i.view.rowOffsets)("ngForTrackBy",i.trackByRowOffset))},dependencies:[Ir,Ci,Lo,GA,Ld,SC,Sae,Aae,kae,M3,Vd],encapsulation:2}),n})(),ik=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=vt({imports:[Cn,EC,Tp,EC]}),n})();class Rae{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:s}){const o=nk({x:t,y:e})||r;if(i){const a=Object.assign({},this.startPosition,{left:this.startPosition.left+s.x,right:this.startPosition.right+s.x,top:this.startPosition.top+s.y,bottom:this.startPosition.bottom+s.y});if(o){const l=this.dragContainerElement.getBoundingClientRect(),c=l.top<a.top&&a.top<l.bottom,u=l.top<a.bottom&&a.bottom<l.bottom;return H4(l,a)&&(c||u)}return!1}return o}}class Pae{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),!(this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth))&&function _ae(n,t){return H4(n,t)&&function gae(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}(n,t)}(this.resizeContainerElement.getBoundingClientRect(),t)}}let Oae=(()=>{class n{constructor(){this.dayHeaderClicked=new We,this.eventDropped=new We,this.dragEnter=new We,this.trackByWeekDayHeaderDate=JA}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"ngClass","mwlClick","drop","dragEnter"]],template:function(e,i){if(1&e&&(ce(0,Aoe,2,2,"ng-template",null,0,uo),ce(2,koe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",function $L(n,t,e,i,r,s,o,a,l){const c=Xi()+n,u=Te(),f=Ro(u,c,e,i,r,s);return Dd(u,c+4,o,a)||f?Ra(u,c+6,l?t.call(l,e,i,r,s,o,a):t(e,i,r,s,o,a)):l_(u,c+6)}(2,Moe,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[Ir,Ci,fo,GA,Ld,AC],encapsulation:2}),n})(),Fae=(()=>{class n{constructor(){this.eventClicked=new We}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(1&e&&(ce(0,Poe,6,27,"ng-template",null,0,uo),ce(2,Ooe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",rI(2,Foe,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[fo,Lo,B4,j4,U4,Ld,SC,XA,Vd],encapsulation:2}),n})(),Nae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(1&e&&(ce(0,Loe,3,13,"ng-template",null,0,uo),ce(2,Voe,0,0,"ng-template",1)),2&e){const r=er(1);I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",iI(2,Boe,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[Ir,nr,fo,AC,Vd],encapsulation:2}),n})(),Lae=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new le(void 0),this.marker$=this.zone.onStable.pipe(lt(()=>u4(6e4)),Vo(0),RA(this.columnDate$),Oe(r=>{const s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(r,l)&&l>=s&&l<=o,top:this.dateAdapter.differenceInMinutes(l,s)*a}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)(z(jd),z(it))},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[Vi],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(1&e&&(ce(0,Uoe,1,1,"ng-template",null,0,uo),ce(2,zoe,0,0,"ng-template",1),Zt(3,"async"),Zt(4,"async")),2&e){const r=er(1);let s;I(2),R("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",function WL(n,t,e,i,r,s,o,a,l,c){const u=Xi()+n,f=Te();let g=Ro(f,u,e,i,r,s);return cw(f,u+4,o,a,l)||g?Ra(f,u+7,c?t.call(c,e,i,r,s,o,a,l):t(e,i,r,s,o,a,l)):l_(f,u+7)}(6,Hoe,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,null==(s=sI(3,2,i.marker$))?null:s.isVisible,null==(s=sI(4,4,i.marker$))?null:s.top))}},dependencies:[nr,fo,A3],encapsulation:2}),n})(),G4=(()=>{class n{constructor(e,i,r,s,o){this.cdr=e,this.utils=i,this.dateAdapter=s,this.element=o,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new We,this.eventClicked=new We,this.eventTimesChanged=new We,this.beforeViewRender=new We,this.hourSegmentClicked=new We,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=JA,this.trackByHourSegment=vae,this.trackByHour=yae,this.trackByWeekAllDayEvent=bae,this.trackByWeekTimeEvent=wae,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&z4(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&"rtl"===getComputedStyle(this.element.nativeElement).direction,this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);const r=new Map,s=[...this.events];this.timeEventResizes.forEach((o,a)=>{const l=this.getTimeEventResizedDates(a,o),c={...a,...l};r.set(c,a);const u=s.indexOf(a);s[u]=c}),this.restoreOriginalEvents(s,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);const i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);const r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:eu.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){const s=this.allDayEventResizes.get(e),o=this.rtl?-1:1;if(typeof i.edges.left<"u"){const a=Math.round(+i.edges.left/r)*o;e.offset=s.originalOffset+a,e.span=s.originalSpan-a}else if(typeof i.edges.right<"u"){const a=Math.round(+i.edges.right/r)*o;e.span=s.originalSpan+a}}allDayEventResizeEnded(e){const i=this.allDayEventResizes.get(e);if(i){const r="left"===i.edge;let s;s=r?e.offset-i.originalOffset:e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;const o=this.getAllDayEventResizedDates(e.event,s,r);this.eventTimesChanged.emit({newStart:o.start,newEnd:o.end,event:e.event,type:eu.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){(function Dae(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)})(e,0,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:eu.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,s){this.dayColumnWidth=this.getDayColumnWidth(e);const o=new Rae(e,i);this.validateDrag=({x:a,y:l,transform:c})=>{const u=0===this.allDayEventResizes.size&&0===this.timeEventResizes.size&&o.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:c});if(u&&this.validateEventTimesChanged){const f=this.getDragMovedEventTimes(r,{x:a,y:l},this.dayColumnWidth,s);return this.validateEventTimesChanged({type:eu.Drag,event:r.event,newStart:f.start,newEnd:f.end})}return u},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&s&&this.view.hourColumns.forEach(a=>{const l=a.events.find(c=>c.event===r.event&&c!==r);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(e,i){const r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),s=e.event,o={...s,...r},a=this.events.map(l=>l===s?o:l);this.restoreOriginalEvents(a,new Map([[o,s]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,s=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;const{start:o,end:a}=this.getDragMovedEventTimes(e,i,r,s);(this.snapDraggedEvents||this.eventDragEnterByType[s?"time":"allDay"]>0)&&function Eae(n,t,e){const i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}(o,a,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:o,newEnd:a,event:e.event,type:eu.Drag,allDay:!s}))}refreshHeader(){this.days=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays,...tk(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit({header:this.days,...this.view})}getWeekView(e){return this.utils.getWeekView({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight,...tk(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}getDragMovedEventTimes(e,i,r,s){const o=$4(i.x,r)/r*(this.rtl?-1:1),a=s?ek(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(Bd(this.dateAdapter,e.event.start,o,this.excludeDays),a);let c;return e.event.end&&(c=this.dateAdapter.addMinutes(Bd(this.dateAdapter,e.event.end,o,this.excludeDays),a)),{start:l,end:c}}restoreOriginalEvents(e,i,r=!0){const s=this.view;r&&(this.view=this.getWeekView(e));const o=e.filter(a=>i.has(a));this.view.hourColumns.forEach((a,l)=>{s.hourColumns[l].hours.forEach((c,u)=>{c.segments.forEach((f,g)=>{a.hours[u].segments[g].cssClass=f.cssClass})}),o.forEach(c=>{const u=i.get(c),f=a.events.find(g=>g.event===(r?c:u));f?(f.event=u,f.tempEvent=c,r||(f.height=0,f.width=0)):a.events.push({event:u,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:c})})}),i.clear()}getTimeEventResizedDates(e,i){const r={start:e.start,end:q4(this.dateAdapter,e,this.minimumEventHeight)},{end:s,...o}=e,a={start:this.dateAdapter.addMinutes(r.end,-1*this.minimumEventHeight),end:q4(this.dateAdapter,o,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof i.edges.left<"u"){const c=Math.round(+i.edges.left/this.dayColumnWidth)*l,u=Bd(this.dateAdapter,r.start,c,this.excludeDays);r.start=u<a.start?u:a.start}else if(typeof i.edges.right<"u"){const c=Math.round(+i.edges.right/this.dayColumnWidth)*l,u=Bd(this.dateAdapter,r.end,c,this.excludeDays);r.end=u>a.end?u:a.end}if(typeof i.edges.top<"u"){const c=ek(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),u=this.dateAdapter.addMinutes(r.start,c);r.start=u<a.start?u:a.start}else if(typeof i.edges.bottom<"u"){const c=ek(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),u=this.dateAdapter.addMinutes(r.end,c);r.end=u>a.end?u:a.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);const s=new Pae(e,r,this.rtl);this.validateResize=({rectangle:o,edges:a})=>{const l=s.validateResize({rectangle:{...o},edges:a});if(l&&this.validateEventTimesChanged){let c;if(r){const u=this.rtl?-1:1;if(typeof a.left<"u"){const f=Math.round(+a.left/r)*u;c=this.getAllDayEventResizedDates(i.event,f,!this.rtl)}else{const f=Math.round(+a.right/r)*u;c=this.getAllDayEventResizedDates(i.event,f,this.rtl)}}else c=this.getTimeEventResizedDates(i.event,{rectangle:o,edges:a});return this.validateEventTimesChanged({type:eu.Resize,event:i.event,newStart:c.start,newEnd:c.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let s=e.start,o=e.end||e.start;return r?s=Bd(this.dateAdapter,s,i,this.excludeDays):o=Bd(this.dateAdapter,o,i,this.excludeDays),{start:s,end:o}}}return n.\u0275fac=function(e){return new(e||n)(z(Sl),z(ev),z(Ws),z(jd),z(Yt))},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[Vi],decls:8,vars:9,consts:[["role","grid",1,"cal-week-view"],[3,"days","locale","customTemplate","dayHeaderClicked","eventDropped","dragEnter"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["dayColumns",""],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],["allDayEventsContainer",""],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["eventRowContainer",""],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],["event",""],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek","eventClicked"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],[3,"ngTemplateOutlet"],["weekEventTemplate",""],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek","eventClicked"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter"]],template:function(e,i){1&e&&(y(0,"div",0)(1,"mwl-calendar-week-view-header",1),G("dayHeaderClicked",function(s){return i.dayHeaderClicked.emit(s)})("eventDropped",function(s){return i.eventDropped({dropData:s},s.newStart,!0)})("dragEnter",function(s){return i.dateDragEnter(s.date)}),w(),ce(2,eae,7,5,"div",2),y(3,"div",3),G("dragEnter",function(){return i.dragEnter("time")})("dragLeave",function(){return i.dragLeave("time")}),ce(4,iae,2,2,"div",4),y(5,"div",5,6),ce(7,pae,5,13,"div",7),w()()()),2&e&&(I(1),R("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),I(1),R("ngIf",i.view.allDayEventRows.length>0),I(2),R("ngIf",i.view.hourColumns.length>0&&1!==i.daysInWeek),I(1),Jn("cal-resize-active",i.timeEventResizes.size>0),I(2),R("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[Ir,Ci,nr,fo,O4,Zse,qA,GA,Ld,Oae,Fae,Nae,Lae],encapsulation:2}),n})(),kC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=vt({imports:[Cn,F4,EC,Tp,F4,EC]}),n})(),Vae=(()=>{class n{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new We,this.hourSegmentClicked=new We,this.eventTimesChanged=new We,this.beforeViewRender=new We}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dt({type:n,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender"]],template:function(e,i){1&e&&(y(0,"mwl-calendar-week-view",0),G("eventClicked",function(s){return i.eventClicked.emit(s)})("hourSegmentClicked",function(s){return i.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return i.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return i.beforeViewRender.emit(s)}),w()),2&e&&R("daysInWeek",1)("viewDate",i.viewDate)("events",i.events)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("minimumEventHeight",i.minimumEventHeight)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("refresh",i.refresh)("locale",i.locale)("eventSnapSize",i.eventSnapSize)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("resizeCursors",i.resizeCursors)("hourSegmentTemplate",i.hourSegmentTemplate)("eventTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("snapDraggedEvents",i.snapDraggedEvents)("allDayEventsLabelTemplate",i.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",i.currentTimeMarkerTemplate)("validateEventTimesChanged",i.validateEventTimesChanged)},dependencies:[G4],encapsulation:2}),n})(),rk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=vt({imports:[Cn,Tp,kC]}),n})(),Y4=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||IC,i.dateFormatter||J_,i.utils||ev,i.a11y||X_]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=vt({imports:[Tp,ik,kC,rk,Tp,ik,kC,rk]}),n})();var me=Et(861);let Z4=(()=>{class n{constructor(){this.apiUrl="https://holidays-jp.github.io/api/v1/date.json"}getHolidays(){var e=this;return(0,me.Z)(function*(){try{const i=yield fetch(e.apiUrl);if(!i.ok)throw new Error("Network response was not ok");return yield i.json()}catch(i){throw console.error("There was an error fetching the holidays:",i),i}})()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ft(n){const t=Object.prototype.toString.call(n);return n instanceof Date||"object"==typeof n&&"[object Date]"===t?new n.constructor(+n):"number"==typeof n||"[object Number]"===t||"string"==typeof n||"[object String]"===t?new Date(n):new Date(NaN)}function ha(n,t){return n instanceof Date?new n.constructor(t):new Date(t)}function Sp(n,t){const e=Ft(n);return isNaN(t)?ha(n,NaN):(t&&e.setDate(e.getDate()+t),e)}function sk(n,t){return ha(n,+Ft(n)+t)}Math.pow(10,8);const jae=6048e5,Uae=864e5,K4=6e4,zae=36e5;function $ae(n,t){return sk(n,t*zae)}function Wae(n,t){return sk(n,t*K4)}function qae(n,t){return sk(n,1e3*t)}function tv(n){const t=Ft(n);return t.setHours(0,0,0,0),t}function X4(n){const t=Ft(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Yae(n,t){const e=Ft(n),i=Ft(t),r=J4(e,i),s=Math.abs(function Gae(n,t){const e=tv(n),i=tv(t),r=+e-X4(e),s=+i-X4(i);return Math.round((r-s)/Uae)}(e,i));e.setDate(e.getDate()-r*s);const a=r*(s-+(J4(e,i)===-r));return 0===a?0:a}function J4(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function e5(n){return t=>{const i=(n?Math[n]:Math.trunc)(t);return 0===i?0:i}}function t5(n,t){return+Ft(n)-+Ft(t)}function Zae(n,t,e){const i=t5(n,t)/K4;return e5(e?.roundingMethod)(i)}function Kae(n,t,e){const i=t5(n,t)/1e3;return e5(e?.roundingMethod)(i)}function Qae(n){const t=Ft(n);return t.setHours(23,59,59,999),t}function MC(n){const t=Ft(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}let n5={};function r5(){return n5}function ok(n,t){const e=r5(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Ft(n),s=r.getDay(),o=6+(s<i?-7:0)-(s-i);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function Xae(n){return Ft(n).getDay()}function Jae(n){return Ft(n).getMonth()}function s5(n,t){return+tv(n)==+tv(t)}function ele(n,t){const e=Ft(n),i=Ft(t);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function o5(n){const t=Ft(n);return t.setMilliseconds(0),t}function tle(n,t){return+o5(n)==+o5(t)}function nle(n){let t;return n.forEach(function(e){const i=Ft(e);(void 0===t||t<i||isNaN(Number(i)))&&(t=i)}),t||new Date(NaN)}function ile(n,t){const e=Ft(n);return e.setHours(t),e}function rle(n,t){const e=Ft(n);return e.setMinutes(t),e}function sle(n){const t=Ft(n);return t.setSeconds(0,0),t}function RC(n){const t=Ft(n);return t.setDate(1),t.setHours(0,0,0,0),t}function ja(n,t){const e=r5(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Ft(n),s=r.getDay(),o=(s<i?7:0)+s-i;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function ole(n){return Ft(n).getHours()}function ale(n){return Ft(n).getMinutes()}function lle(n){return new Date(n).getTimezoneOffset()}function Ip(n,t){return Sp(n,7*t)}function Ud(n,t){const e=Ft(n);if(isNaN(t))return ha(n,NaN);if(!t)return e;const i=e.getDate(),r=ha(n,e.getTime());return r.setMonth(e.getMonth()+t+1,0),i>=r.getDate()?r:(e.setFullYear(r.getFullYear(),r.getMonth(),i),e)}function Ap(n,t){return Sp(n,-t)}function ule(n,t){return Ip(n,-t)}function dle(n,t){return Ud(n,-t)}function PC(n){return ja(n,{weekStartsOn:1})}function ple(n){const t=Ft(n),e=+PC(t)-+function fle(n){const t=function hle(n){const t=Ft(n),e=t.getFullYear(),i=ha(n,0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);const r=PC(i),s=ha(n,0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);const o=PC(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}(n),e=ha(n,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),PC(e)}(t);return Math.round(e/jae)+1}function mle(n,t){const e=Ft(n);return e.setDate(t),e}function a5(n,t){const e=Ft(n),i=e.getFullYear(),r=e.getDate(),s=ha(n,0);s.setFullYear(i,t,15),s.setHours(0,0,0,0);const o=function gle(n){const t=Ft(n),e=t.getFullYear(),i=t.getMonth(),r=ha(n,0);return r.setFullYear(e,i+1,0),r.setHours(0,0,0,0),r.getDate()}(s);return e.setMonth(t,Math.min(r,o)),e}function _le(n,t){const e=Ft(n);return isNaN(+e)?ha(n,NaN):(e.setFullYear(t),e)}function vle(n){return Ft(n).getDate()}function yle(n){return Ft(n).getFullYear()}function l5(){return(0,ot.pi)((0,ot.pi)({},function cle(){return{addDays:Sp,addHours:$ae,addMinutes:Wae,addSeconds:qae,differenceInDays:Yae,differenceInMinutes:Zae,differenceInSeconds:Kae,endOfDay:Qae,endOfMonth:MC,endOfWeek:ok,getDay:Xae,getMonth:Jae,isSameDay:s5,isSameMonth:ele,isSameSecond:tle,max:nle,setHours:ile,setMinutes:rle,startOfDay:tv,startOfMinute:sle,startOfMonth:RC,startOfWeek:ja,getHours:ole,getMinutes:ale,getTimezoneOffset:lle}}()),{addWeeks:Ip,addMonths:Ud,subDays:Ap,subWeeks:ule,subMonths:dle,getISOWeek:ple,setDate:mle,setMonth:a5,setYear:_le,getDate:vle,getYear:yle})}let u5=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||n)(z(is),z(Yt))};static#t=this.\u0275dir=Ke({type:n})}return n})(),zd=(()=>{class n extends u5{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275dir=Ke({type:n,features:[tn]})}return n})();const Ua=new Ce("NgValueAccessor"),ble={provide:Ua,useExisting:mn(()=>za),multi:!0};let za=(()=>{class n extends zd{writeValue(e){this.setProperty("checked",e)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275dir=Ke({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&G("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[ln([ble]),tn]})}return n})();const wle={provide:Ua,useExisting:mn(()=>sr),multi:!0},xle=new Ce("CompositionEventMode");let sr=(()=>{class n extends u5{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Cle(){const n=Gc()?Gc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||n)(z(is),z(Yt),z(xle,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&G("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[ln([wle]),tn]})}return n})();function tu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function d5(n){return null!=n&&"number"==typeof n.length}const as=new Ce("NgValidators"),nu=new Ce("NgAsyncValidators"),Ele=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Dle{static min(t){return h5(t)}static max(t){return function f5(n){return t=>{if(tu(t.value)||tu(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return p5(t)}static requiredTrue(t){return function m5(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function g5(n){return tu(n.value)||Ele.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function _5(n){return t=>tu(t.value)||!d5(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function v5(n){return t=>d5(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function y5(n){if(!n)return OC;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(tu(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return D5(t)}static composeAsync(t){return T5(t)}}function h5(n){return t=>{if(tu(t.value)||tu(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function p5(n){return tu(n.value)?{required:!0}:null}function OC(n){return null}function b5(n){return null!=n}function w5(n){return h_(n)?ne(n):n}function C5(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function x5(n,t){return t.map(e=>e(n))}function E5(n){return n.map(t=>function Tle(n){return!n.validate}(t)?t:e=>t.validate(e))}function D5(n){if(!n)return null;const t=n.filter(b5);return 0==t.length?null:function(e){return C5(x5(e,t))}}function ak(n){return null!=n?D5(E5(n)):null}function T5(n){if(!n)return null;const t=n.filter(b5);return 0==t.length?null:function(e){return function c5(...n){const t=cl(n),{args:e,keys:i}=nB(n),r=new ft(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let f=!1;ci(e[u]).subscribe(Pe(s,g=>{f||(f=!0,c--),a[u]=g},()=>l--,void 0,()=>{(!l||!f)&&(c||s.next(i?iB(i,a):a),s.complete())}))}});return t?r.pipe(aA(t)):r}(x5(e,t).map(w5)).pipe(Oe(C5))}}function lk(n){return null!=n?T5(E5(n)):null}function S5(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function I5(n){return n._rawValidators}function A5(n){return n._rawAsyncValidators}function ck(n){return n?Array.isArray(n)?n:[n]:[]}function FC(n,t){return Array.isArray(n)?n.includes(t):n===t}function k5(n,t){const e=ck(t);return ck(n).forEach(r=>{FC(e,r)||e.push(r)}),e}function M5(n,t){return ck(t).filter(e=>!FC(n,e))}class R5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ak(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=lk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Ss extends R5{get formDirective(){return null}get path(){return null}}class Nl extends R5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class P5{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let or=(()=>{class n extends P5{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Nl,2))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Jn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[tn]})}return n})(),Hd=(()=>{class n extends P5{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ss,10))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&Jn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[tn]})}return n})();const nv="VALID",LC="INVALID",kp="PENDING",iv="DISABLED";function hk(n){return(VC(n)?n.validators:n)||null}function fk(n,t){return(VC(t)?t.asyncValidators:n)||null}function VC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class L5{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===nv}get invalid(){return this.status===LC}get pending(){return this.status==kp}get disabled(){return this.status===iv}get enabled(){return this.status!==iv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(k5(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(k5(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(M5(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(M5(t,this._rawAsyncValidators))}hasValidator(t){return FC(this._rawValidators,t)}hasAsyncValidator(t){return FC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=kp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=iv,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=nv,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nv||this.status===kp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?iv:nv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=kp,this._hasOwnPendingAsyncValidator=!0;const e=w5(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?iv:this.errors?LC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kp)?kp:this._anyControlsHaveStatus(LC)?LC:nv}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){VC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function kle(n){return Array.isArray(n)?ak(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Mle(n){return Array.isArray(n)?lk(n):n||null}(this._rawAsyncValidators)}}class pk extends L5{constructor(t,e,i){super(hk(e),fk(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function N5(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new H(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function F5(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new H(1e3,"");if(!i[e])throw new H(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const $d=new Ce("CallSetDisabledState",{providedIn:"root",factory:()=>rv}),rv="always";function sv(n,t,e=rv){mk(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function Ole(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&V5(n,t)})}(n,t),function Nle(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Fle(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&V5(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Ple(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function jC(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),zC(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function UC(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function mk(n,t){const e=I5(n);null!==t.validator?n.setValidators(S5(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=A5(n);null!==t.asyncValidator?n.setAsyncValidators(S5(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();UC(t._rawValidators,r),UC(t._rawAsyncValidators,r)}function zC(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=I5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=A5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return UC(t._rawValidators,i),UC(t._rawAsyncValidators,i),e}function V5(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function B5(n,t){mk(n,t)}function j5(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const Ule={provide:Ss,useExisting:mn(()=>Ha)},ov=(()=>Promise.resolve())();let Ha=(()=>{class n extends Ss{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new We,this.form=new pk({},ak(e),lk(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ov.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),sv(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ov.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ov.then(()=>{const i=this._findContainer(e.path),r=new pk({});B5(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ov.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){ov.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,j5(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(z(as,10),z(nu,10),z($d,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&G("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ln([Ule]),tn]})}return n})();function U5(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function z5(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const H5=class extends L5{constructor(t=null,e,i){super(hk(e),fk(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),VC(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=z5(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){U5(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){U5(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){z5(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},$le={provide:Nl,useExisting:mn(()=>qi)},q5=(()=>Promise.resolve())();let qi=(()=>{class n extends Nl{constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new H5,this._registered=!1,this.name="",this.update=new We,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function vk(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===sr?e=s:function Ble(n){return Object.getPrototypeOf(n.constructor)===zd}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function _k(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){q5.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&ip(i);q5.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function BC(n,t){return[...t.path,n]}(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ss,9),z(as,10),z(nu,10),z(Ua,10),z(Sl,8),z($d,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ln([$le]),tn,Vi]})}return n})(),Wd=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const Wle={provide:Ua,useExisting:mn(()=>iu),multi:!0};let iu=(()=>{class n extends zd{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275dir=Ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){1&i&&G("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[ln([Wle]),tn]})}return n})(),G5=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})();const yk=new Ce("NgModelWithFormControlWarning"),Kle={provide:Ss,useExisting:mn(()=>HC)};let HC=(()=>{class n extends Ss{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new We,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return sv(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){jC(e.control||null,e,!1),function jle(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,j5(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(jC(i||null,e),(n=>n instanceof H5)(r)&&(sv(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);B5(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function Lle(n,t){return zC(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mk(this.form,this),this._oldForm&&zC(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(z(as,10),z(nu,10),z($d,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&G("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ln([Kle]),tn,Vi]})}return n})();const ece={provide:Ua,useExisting:mn(()=>fa),multi:!0};function J5(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let fa=(()=>{class n extends zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=J5(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function tce(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275dir=Ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&G("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ln([ece]),tn]})}return n})(),Ll=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(J5(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(is),z(fa,9))};static#t=this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const nce={provide:Ua,useExisting:mn(()=>Ck),multi:!0};function ej(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Ck=(()=>{class n extends zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);r.push(c)}}else{const o=i.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function ice(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275dir=Ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&G("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ln([nce]),tn]})}return n})(),Vl=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(ej(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(ej(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(is),z(Ck,9))};static#t=this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();let qd=(()=>{class n{constructor(){this._validator=OC}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):OC,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ke({type:n,features:[Vi]})}return n})();const sce={provide:as,useExisting:mn(()=>Mp),multi:!0};let Mp=(()=>{class n extends qd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>function nj(n){return"number"==typeof n?n:parseFloat(n)}(e),this.createValidator=e=>h5(e)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275dir=Ke({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&zn("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[ln([sce]),tn]})}return n})();const oce={provide:as,useExisting:mn(()=>Bl),multi:!0};let Bl=(()=>{class n extends qd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ip,this.createValidator=e=>p5}enabled(e){return e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ji(n)))(r||n)}}();static#t=this.\u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&zn("required",r._enabled?"":null)},inputs:{required:"required"},features:[ln([oce]),tn]})}return n})(),cj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[G5]})}return n})(),ar=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:$d,useValue:e.callSetDisabledState??rv}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[cj]})}return n})(),fce=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:yk,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:$d,useValue:e.callSetDisabledState??rv}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[cj]})}return n})();function jo(n){return null!=n&&"false"!=`${n}`}function $C(n,t=0){return function pce(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function av(n){return Array.isArray(n)?n:[n]}function lr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Gi(n){return n instanceof Yt?n.nativeElement:n}const lv={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=lv;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new St(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=lv;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=lv;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},uj=new class gce extends vC{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class mce extends _C{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=lv.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(lv.cancelAnimationFrame(e),t._scheduled=void 0)}});let xk,_ce=1;const WC={};function dj(n){return n in WC&&(delete WC[n],!0)}const vce={setImmediate(n){const t=_ce++;return WC[t]=!0,xk||(xk=Promise.resolve()),xk.then(()=>dj(t)&&n()),t},clearImmediate(n){dj(n)}},{setImmediate:yce,clearImmediate:bce}=vce,qC={setImmediate(...n){const{delegate:t}=qC;return(t?.setImmediate||yce)(...n)},clearImmediate(n){const{delegate:t}=qC;return(t?.clearImmediate||bce)(n)},delegate:void 0};new class Cce extends vC{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class wce extends _C{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=qC.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(qC.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}});function hj(n,t=vp){return function Ece(n){return ge((t,e)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Pe(e,c=>{i=!0,r=c,s||ci(n(c)).subscribe(s=Pe(e,a,l))},()=>{o=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>MA(n,t))}let Ek;try{Ek=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ek=!1}let Rp,po=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?P3(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ek)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Mo))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fj=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function pj(){if(Rp)return Rp;if("object"!=typeof document||!document)return Rp=new Set(fj),Rp;let n=document.createElement("input");return Rp=new Set(fj.filter(t=>(n.setAttribute("type",t),n.type===t))),Rp}let cv,Gd,Dk;function ru(n){return function Dce(){if(null==cv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cv=!0}))}finally{cv=cv||!1}return cv}()?n:!!n.capture}function Tce(){if(null==Gd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Gd=!1,Gd;if("scrollBehavior"in document.documentElement.style)Gd=!0;else{const n=Element.prototype.scrollTo;Gd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Gd}function Tk(n){if(function Sce(){if(null==Dk){const n=typeof document<"u"?document.head:null;Dk=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Dk}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Sk(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Uo(n){return n.composedPath?n.composedPath()[0]:n.target}function Ik(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Ice=new Ce("cdk-dir-doc",{providedIn:"root",factory:function Ace(){return Ve(Ct)}}),kce=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Pp=(()=>{class n{constructor(e){this.value="ltr",this.change=new We,e&&(this.value=function Mce(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?kce.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ice,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uv=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})(),mj=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ft(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(hj(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ve()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(vn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=Gi(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>bp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(it),ie(po),ie(Ct,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ak=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new se,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(hj(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(po),ie(it),ie(Ct,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YC=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})(),gj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[uv,YC,uv,YC]})}return n})();class kk{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Mk extends kk{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class _j extends kk{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Oce extends kk{constructor(t){super(),this.element=t instanceof Yt?t.nativeElement:t}}class Rk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Mk?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof _j?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Oce?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Fce extends Rk{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Ui.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Pk=(()=>{class n extends Rk{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new We,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(s,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ed),z(Es),z(Ct))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[tn]})}return n})(),dv=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})();const vj=Tce();class Nce{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=lr(-this._previousScrollPosition.left),t.style.top=lr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),vj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),vj&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class Lce{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(vn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class yj{enable(){}disable(){}attach(){}}function Ok(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function bj(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Vce{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Ok(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Bce=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new yj,this.close=o=>new Lce(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Nce(this._viewportRuler,this._document),this.reposition=o=>new Vce(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(ie(mj),ie(Ak),ie(it),ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class wj{constructor(t){if(this.scrollStrategy=new yj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class jce{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Cj=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uce=(()=>{class n extends Cj{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct),ie(it,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zce=(()=>{class n extends Cj{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Uo(s)},this._clickListener=s=>{const o=Uo(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct),ie(po),ie(it,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZC=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ik()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),Ik()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct),ie(po))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class hv{constructor(t,e,i,r,s,o,a,l,c,u=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new se,this._attachments=new se,this._detachments=new se,this._locationChanges=St.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new se,this._outsidePointerEvents=new se,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ir(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=lr(this._config.width),t.height=lr(this._config.height),t.minWidth=lr(this._config.minWidth),t.minHeight=lr(this._config.minHeight),t.maxWidth=lr(this._config.maxWidth),t.maxHeight=lr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=av(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(rr(we(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const xj="cdk-overlay-connected-position-bounding-box",Hce=/([A-Za-z%]+)$/;class $ce{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new se,this._resizeSubscription=St.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(xj),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(xj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==i.originX?o:a}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=Dj(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let g=0-a,v=a+s.height-i.height,b=this._subtractOverflows(s.width,0-o,o+s.width-i.width),x=this._subtractOverflows(s.height,g,v),E=b*x;return{visibleArea:E,isCompletelyWithinViewport:s.width*s.height===E,fitsInViewportVertically:x===s.height,fitsInViewportHorizontally:b==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,o=Ej(this._overlayRef.getConfig().minHeight),a=Ej(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Dj(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),c=Math.max(s.left-i.left-t.x,0);let u=0,f=0;return u=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-i.left-t.x:0,f=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:u,y:f},{x:t.x+u,y:t.y+f}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new jce(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,f,g;if("top"===e.overlayY)o=t.y,s=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const v=Math.min(i.bottom-t.y+i.top,t.y),b=this._lastBoundingBoxSize.height;s=2*v,o=t.y-v,s>b&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-b/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)g=i.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)f=t.x,u=i.right-t.x;else{const v=Math.min(i.right-t.x+i.left,t.x),b=this._lastBoundingBoxSize.width;u=2*v,f=t.x-v,u>b&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.x-b/2)}return{top:o,left:f,bottom:a,right:g,width:u,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=lr(i.height),r.top=lr(i.top),r.bottom=lr(i.bottom),r.width=lr(i.width),r.left=lr(i.left),r.right=lr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=lr(s)),o&&(r.maxWidth=lr(o))}this._lastBoundingBoxSize=i,Yd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Yd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Yd(i,this._getExactOverlayY(e,t,u)),Yd(i,this._getExactOverlayX(e,t,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=lr(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=lr(o.maxWidth):s&&(i.maxWidth="")),Yd(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=lr(s.y),r}_getExactOverlayX(t,e,i){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=lr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:bj(t,i),isOriginOutsideView:Ok(t,i),isOverlayClipped:bj(e,i),isOverlayOutsideView:Ok(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&av(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Yt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Yd(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ej(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(Hce);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Dj(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Tj="cdk-global-overlay-wrapper";class Wce{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Tj),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,g="rtl"===this._overlayRef.getConfig().direction;let v="",b="",x="";l?x="flex-start":"center"===u?(x="center",g?b=f:v=f):g?"left"===u||"end"===u?(x="flex-end",v=f):("right"===u||"start"===u)&&(x="flex-start",b=f):"left"===u||"start"===u?(x="flex-start",v=f):("right"===u||"end"===u)&&(x="flex-end",b=f),t.position=this._cssPosition,t.marginLeft=l?"0":v,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":b,e.justifyContent=x,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Tj),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let qce=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Wce}flexibleConnectedTo(e){return new $ce(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ak),ie(Ct),ie(po),ie(ZC))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gce=0,Zd=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,f,g,v){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=f,this._outsideClickDispatcher=g,this._animationsModuleType=v}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new wj(e);return o.direction=o.direction||this._directionality.value,new hv(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Gce++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(qc)),new Fce(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Bce),ie(ZC),ie(Ed),ie(qce),ie(Uce),ie(Ui),ie(it),ie(Ct),ie(Pp),ie(D_),ie(zce),ie(Nf,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Kce={provide:new Ce("cdk-connected-overlay-scroll-strategy"),deps:[Zd],useFactory:function Zce(n){return()=>n.scrollStrategies.reposition()}};let KC=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[Zd,Kce],imports:[uv,dv,gj,gj]})}return n})();function Ij(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Aj(n){return vn((t,e)=>n<=e)}let nue=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[nue]})}return n})();const Mj=new Set;let Kd,rue=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):oue}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function sue(n,t){if(!Mj.has(n))try{Kd||(Kd=document.createElement("style"),t&&(Kd.nonce=t),Kd.setAttribute("type","text/css"),document.head.appendChild(Kd)),Kd.sheet&&(Kd.sheet.insertRule(`@media ${n} {body{ }}`,0),Mj.add(n))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(po),ie(nS,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oue(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let aue=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new se}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Rj(av(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=Md(Rj(av(e)).map(o=>this._registerQuery(o).observable));return s=Zw(s.pipe(ir(1)),s.pipe(Aj(1),function iue(n,t=vp){return ge((e,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}e.subscribe(Pe(i,c=>{s=c,o=t.now(),r||(r=t.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(0))),s.pipe(Oe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new ft(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Vo(i),Oe(({matches:o})=>({query:e,matches:o})),rr(this._destroySubject)),mql:i};return this._queries.set(e,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(ie(rue),ie(it))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rj(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let QC=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function due(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function uue(n){try{return n.frameElement}catch{return null}}(function yue(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===Nj(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=Nj(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function _ue(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function vue(n){return!function fue(n){return function mue(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function hue(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function pue(n){return function gue(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Fj(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(po))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fj(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function Nj(n){if(!Fj(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class bue{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ir(1)).subscribe(t)}}let Fk=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new bue(e,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(QC),ie(it),ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nk(n){return 0===n.buttons||0===n.detail}function Lk(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const wue=new Ce("cdk-input-modality-detector-options"),Cue={ignoreKeys:[18,17,224,91,16]},Op=ru({passive:!0,capture:!0});let xue=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new le(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Uo(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Nk(o)?"keyboard":"mouse"),this._mostRecentTarget=Uo(o))},this._onTouchstart=o=>{Lk(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Uo(o))},this._options={...Cue,...s},this.modalityDetected=this._modality.pipe(Aj(1)),this.modalityChanged=this.modalityDetected.pipe(Pi()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Op),r.addEventListener("mousedown",this._onMousedown,Op),r.addEventListener("touchstart",this._onTouchstart,Op)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Op),document.removeEventListener("mousedown",this._onMousedown,Op),document.removeEventListener("touchstart",this._onTouchstart,Op))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(po),ie(it),ie(Ct),ie(wue,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Due=new Ce("cdk-focus-monitor-default-options"),XC=ru({passive:!0,capture:!0});let Vk=(()=>{class n{constructor(e,i,r,s,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new se,this._rootNodeFocusAndBlurListener=a=>{for(let c=Uo(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,i=!1){const r=Gi(e);if(!this._platform.isBrowser||1!==r.nodeType)return ve();const s=Tk(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new se,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=Gi(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=Gi(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Uo(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,XC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,XC)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(rr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,XC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,XC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(ie(it),ie(po),ie(xue),ie(Ct,8),ie(Due,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vj="cdk-high-contrast-black-on-white",Bj="cdk-high-contrast-white-on-black",Bk="cdk-high-contrast-active";let jj=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=Ve(aue).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Bk,Vj,Bj),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(Bk,Vj):2===i&&e.add(Bk,Bj)}}static#e=this.\u0275fac=function(i){return new(i||n)(ie(po),ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tue=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(jj))};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[kj]})}return n})();function Sue(n,t){}class JC{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let Uj=(()=>{class n extends Rk{constructor(e,i,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),f},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Sk(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=Sk();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Sk())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(Fk),z(Ct,8),z(JC),z(QC),z(it),z(hv),z(Vk))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Na(Pk,7),2&i){let s;Hi(s=$i())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&zn("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[tn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&ce(0,Sue,0,0,"ng-template",0)},dependencies:[Pk],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class jk{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new se,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Ij(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const zj=new Ce("DialogScrollStrategy"),Iue=new Ce("DialogData"),Aue=new Ce("DefaultDialogConfig"),Mue={provide:zj,deps:[Zd],useFactory:function kue(n){return()=>n.scrollStrategies.block()}};let Rue=0,Hj=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,r,s,o,a){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._ariaHiddenElements=new Map,this.afterAllClosed=Kw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Vo(void 0))),this._scrollStrategy=a}open(e,i){(i={...this._defaultOptions||new JC,...i}).id=i.id||"cdk-dialog-"+Rue++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new jk(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(e,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Uk(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){Uk(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),Uk(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new wj({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:JC,useValue:r},{provide:jk,useValue:i},{provide:hv,useValue:e}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=Uj;const l=new Mk(a,r.viewContainerRef,Ui.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,i,r,s){if(e instanceof Po){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new _j(e,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new Mk(e,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,s){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:Iue,useValue:e.data},{provide:jk,useValue:i}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Pp,null,{optional:!0}))&&a.push({provide:Pp,useValue:{value:e.direction,change:ve()}}),Ui.create({parent:o||s,providers:a})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Zd),ie(Ui),ie(Aue,8),ie(n,12),ie(ZC),ie(zj))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();function Uk(n,t){let e=n.length;for(;e--;)t(n[e])}let Pue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[Hj,Mue],imports:[KC,dv,Tue,dv]})}return n})();const Fue=new Ce("mat-sanity-checks",{providedIn:"root",factory:function Oue(){return!0}});let Ar=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Ik()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||n)(ie(jj),ie(Fue,8),ie(Ct))};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[uv,uv]})}return n})();function Nue(n){return class extends n{updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}let Vue=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const qj=ru({passive:!0,capture:!0});class jue{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=Uo(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){const s=this._events.get(e);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,qj)})}removeHandler(t,e,i){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(i),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,qj)))}}class zk{static#e=this._eventManager=new jue;constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Gi(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Gj,...i.animation},o=i.radius||function zue(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),v=f.transitionDuration,b="none"===f.transitionProperty||"0s"===v||"0s, 0s"===v||0===r.width&&0===r.height,x=new Bue(this,u,i,b);u.style.transform="scale3d(1, 1, 1)",x.state=0,i.persistent||(this._mostRecentTransientRipple=x);return!b&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const O=()=>this._finishRippleTransition(x),k=()=>this._destroyRipple(x);u.addEventListener("transitionend",O),u.addEventListener("transitioncancel",k)}),this._activeRipples.set(x,null),(b||!c)&&this._finishRippleTransition(x),x}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...Gj,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Gi(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Zj.forEach(i=>{zk._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Kj.forEach(e=>{this._triggerElement.addEventListener(e,this,Yj)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Nk(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Lk(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(Zj.forEach(e=>zk._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&Kj.forEach(e=>t.removeEventListener(e,this,Yj)))}}let Qj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[Ar,Ar]})}return n})(),Hue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[Ar]})}return n})(),Xj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[Qj,Cn,Ar,Hue]})}return n})();function $ue(n,t){}class ex{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Hk="mdc-dialog--open",Jj="mdc-dialog--opening",eU="mdc-dialog--closing";let Gue=(()=>{class n extends Uj{constructor(e,i,r,s,o,a,l,c){super(e,i,r,s,o,a,l,c),this._animationStateChanged=new We}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(Fk),z(Ct,8),z(ex),z(QC),z(it),z(hv),z(Vk))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["ng-component"]],features:[tn],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const tU="--mat-dialog-transition-duration";function nU(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?$C(n.substring(0,n.length-2)):n.endsWith("s")?1e3*$C(n.substring(0,n.length-1)):"0"===n?0:null}let Yue=(()=>{class n extends Gue{constructor(e,i,r,s,o,a,l,c,u){super(e,i,r,s,o,a,l,u),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?nU(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?nU(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(tU,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Jj,Hk)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Hk),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Hk),this._animationsEnabled?(this._hostElement.style.setProperty(tU,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(eU)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(Jj,eU)}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(Fk),z(Ct,8),z(ex),z(QC),z(it),z(hv),z(Nf,8),z(Vk))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(p_("id",r._config.id),zn("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Jn("_mat-animation-noopable",!r._animationsEnabled))},features:[tn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(y(0,"div",0)(1,"div",1),ce(2,$ue,0,0,"ng-template",2),w()())},dependencies:[Pk],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class $a{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new se,this._beforeClosed=new se,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(vn(r=>"opened"===r.state),ir(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(vn(r=>"closed"===r.state),ir(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),we(this.backdropClick(),this.keydownEvents().pipe(vn(r=>27===r.keyCode&&!this.disableClose&&!Ij(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function Zue(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(vn(e=>"closing"===e.state),ir(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const su=new Ce("MatMdcDialogData"),Kue=new Ce("mat-mdc-dialog-default-options"),iU=new Ce("mat-mdc-dialog-scroll-strategy"),Xue={provide:iU,deps:[Zd],useFactory:function Que(n){return()=>n.scrollStrategies.block()}};let Jue=0,ede=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,r,s,o,a,l,c,u,f){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._idPrefix="mat-dialog-",this.dialogConfigClass=ex,this.afterAllClosed=Kw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Vo(void 0))),this._scrollStrategy=a,this._dialog=i.get(Hj)}open(e,i){let r;(i={...this._defaultOptions||new ex,...i}).id=i.id||`${this._idPrefix}${Jue++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:JC,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static#e=this.\u0275fac=function(i){wS()};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})(),Fp=(()=>{class n extends ede{constructor(e,i,r,s,o,a,l,c){super(e,i,s,a,l,o,$a,Yue,su,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Zd),ie(Ui),ie(D_,8),ie(Kue,8),ie(iU),ie(n,12),ie(ZC),ie(Nf,8))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})(),tx=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[Fp,Xue],imports:[Pue,KC,dv,Ar,Ar]})}return n})(),$k=(()=>{class n{constructor(){this.reminders={},this.subtaskReminders={}}setReminder(e,i){const r=new Date(e.startDateTime).getTime(),s=r-i,o=Date.now();if(s>o){const a=window.setTimeout(()=>{const l=this.calculateTimeRemaining(r-Date.now());alert(`\u30bf\u30b9\u30af "${e.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${l}`),delete this.reminders[e.id]},s-o);this.reminders[e.id]=a}}clearReminder(e){this.reminders[e.id]&&(clearTimeout(this.reminders[e.id]),delete this.reminders[e.id])}setSubtaskReminder(e,i,r){const s=new Date(r).getTime(),o=s-i,a=Date.now();if(o>a){const l=window.setTimeout(()=>{const c=this.calculateTimeRemaining(s-Date.now());alert(`\u30b5\u30d6\u30bf\u30b9\u30af "${e.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${c}`),delete this.subtaskReminders[e.id]},o-a);this.subtaskReminders[e.id]=l}}clearSubtaskReminder(e){this.subtaskReminders[e.id]&&(clearTimeout(this.subtaskReminders[e.id]),delete this.subtaskReminders[e.id])}calculateTimeRemaining(e){const i=Math.floor(e/1e3),r=Math.floor(i/60),s=Math.floor(r/60),o=Math.floor(s/24);return o>0?`${o}\u65e5`:s>0?`${s}\u6642\u9593`:r>0?`${r}\u5206`:`${i}\u79d2`}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Is=Et(106);Is.Z.registerVersion("firebase","10.12.2","app-compat");var Np=Et(534);(0,Np.registerVersion)("firebase","10.12.2","app");const ade=new class ode extends vC{}(class sde extends _C{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(t,e,i):(t.flush(this),0)}}),nx=new Hc("ANGULARFIRE2_VERSION");class sU{constructor(){return((n,t)=>{const e=(0,Np.getApps)(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(cde)}}const cde="app-check";function Lp(){}class oU{zone;delegate;constructor(t,e=ade){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{t.apply(this,[o])})},e,i)}}class ude{zone;task=null;constructor(t){this.zone=t}call(t,e){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lp,{},Lp,Lp)),e.pipe(Ei({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let aU=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new oU(Zone.current)),this.insideAngular=e.run(()=>new oU(Zone.current,vp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(ie(it))};static \u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mo(n){return function hde(n){return function(e){return(e=e.lift(new ude(n.ngZone))).pipe(Zr(n.outsideAngular),ys(n.insideAngular))}}(function Vp(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}const pde=["ngOnDestroy"];class lU{constructor(t){return t}}const ix=new Ce("angularfire2.app.options"),rx=new Ce("angularfire2.app.name");function Wk(n,t,e){const r="object"==typeof e&&e||{};r.name=r.name||"string"==typeof e&&e||"[DEFAULT]";const o=Is.Z.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>Is.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;_de("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new lU(o)}const _de=(n,...t)=>{},vde={provide:lU,useFactory:Wk,deps:[ix,it,[new ia,rx]]};let yde=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:ix,useValue:e},{provide:rx,useValue:i}]}}constructor(e){Is.Z.registerVersion("angularfire",nx.full,"core"),Is.Z.registerVersion("angularfire",nx.full,"app-compat"),Is.Z.registerVersion("angular",t2.full,e.toString())}static \u0275fac=function(i){return new(i||n)(ie(Mo))};static \u0275mod=gt({type:n});static \u0275inj=vt({providers:[vde]})}return n})();function cU(n,t,e,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function bde(n,t){try{return n.toString()===t.toString()}catch{return n===t}}(r,o)||(uU("error",`${t} was already initialized on the ${e} Firebase App with different settings.${wde?" You may need to reload as Firebase is not HMR aware.":""}`),uU("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const wde=typeof module<"u"&&!!module.hot,uU=(n,...t)=>{};function qk(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,tt({connector:()=>new p4(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}globalThis.\u0275AngularfireInstanceCache||=[],Et(985);const dU=new Ce("angularfire2.auth.use-emulator"),hU=new Ce("angularfire2.auth.settings"),fU=new Ce("angularfire2.auth.tenant-id"),pU=new Ce("angularfire2.auth.langugage-code"),mU=new Ce("angularfire2.auth.use-device-language"),gU=new Ce("angularfire.auth.persistence"),_U=(n,t,e,i,r,s,o,a)=>cU(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=t.runOutsideAngular(()=>n.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[e,i,r,s,o,a]);let sx=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,s,o,a,l,c,u,f,g,v){const b=new se,x=ve(void 0).pipe(ys(o.outsideAngular),lt(()=>s.runOutsideAngular(()=>Promise.resolve().then(Et.bind(Et,985)))),Oe(()=>Wk(e,s,i)),Oe(E=>_U(E,s,a,c,u,f,l,g)),qk({bufferSize:1,refCount:!1}));if($w(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ve(null);else{x.pipe(Zc()).subscribe();const E=x.pipe(lt(F=>F.getRedirectResult().then(q=>q,()=>null)),mo,qk({bufferSize:1,refCount:!1})),O=x.pipe(lt(F=>new ft(q=>({unsubscribe:s.runOutsideAngular(()=>F.onAuthStateChanged(K=>q.next(K),K=>q.error(K),()=>q.complete()))})))),k=x.pipe(lt(F=>new ft(q=>({unsubscribe:s.runOutsideAngular(()=>F.onIdTokenChanged(K=>q.next(K),K=>q.error(K),()=>q.complete()))}))));this.authState=E.pipe(RA(O),Zr(o.outsideAngular),ys(o.insideAngular)),this.user=E.pipe(RA(k),Zr(o.outsideAngular),ys(o.insideAngular)),this.idToken=this.user.pipe(lt(F=>F?ne(F.getIdToken()):ve(null))),this.idTokenResult=this.user.pipe(lt(F=>F?ne(F.getIdTokenResult()):ve(null))),this.credential=we(E,b,this.authState.pipe(vn(F=>!F))).pipe(Oe(F=>F?.user?F:null),Zr(o.outsideAngular),ys(o.insideAngular))}return((n,t,e,i={})=>new Proxy(n,{get:(r,s)=>e.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(pde.indexOf(s)>-1)return()=>{};const o=t.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>e.run(()=>c)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const f=u?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,f),f})})})}))(this,x,s,{spy:{apply:(E,O,k)=>{(E.startsWith("signIn")||E.startsWith("createUser"))&&k.then(F=>b.next(F))}}})}static \u0275fac=function(i){return new(i||n)(ie(ix),ie(rx,8),ie(Mo),ie(it),ie(aU),ie(dU,8),ie(hU,8),ie(fU,8),ie(pU,8),ie(mU,8),ie(gU,8),ie(sU,8))};static \u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),xde=(()=>{class n{constructor(){Is.Z.registerVersion("angularfire",nx.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=gt({type:n});static \u0275inj=vt({providers:[sx]})}return n})();var Xd,wU,vU=Et(537),Wa=Et(879),yn=Et(58),yU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bU={};(function(){var n;function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function r(B,P,N){N||(N=0);var $=Array(16);if("string"==typeof P)for(var U=0;16>U;++U)$[U]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(U=0;16>U;++U)$[U]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;var W=B.g[3],Y=(P=B.g[0])+(W^(N=B.g[1])&((U=B.g[2])^W))+$[0]+3614090360&4294967295;Y=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=(N=(U=(W=(P=N+(Y<<7&4294967295|Y>>>25))+((Y=W+(U^P&(N^U))+$[1]+3905402710&4294967295)<<12&4294967295|Y>>>20))+((Y=U+(N^W&(P^N))+$[2]+606105819&4294967295)<<17&4294967295|Y>>>15))+((Y=N+(P^U&(W^P))+$[3]+3250441966&4294967295)<<22&4294967295|Y>>>10))+((Y=P+(W^N&(U^W))+$[4]+4118548399&4294967295)<<7&4294967295|Y>>>25))+((Y=W+(U^P&(N^U))+$[5]+1200080426&4294967295)<<12&4294967295|Y>>>20))+((Y=U+(N^W&(P^N))+$[6]+2821735955&4294967295)<<17&4294967295|Y>>>15))+((Y=N+(P^U&(W^P))+$[7]+4249261313&4294967295)<<22&4294967295|Y>>>10))+((Y=P+(W^N&(U^W))+$[8]+1770035416&4294967295)<<7&4294967295|Y>>>25))+((Y=W+(U^P&(N^U))+$[9]+2336552879&4294967295)<<12&4294967295|Y>>>20))+((Y=U+(N^W&(P^N))+$[10]+4294925233&4294967295)<<17&4294967295|Y>>>15))+((Y=N+(P^U&(W^P))+$[11]+2304563134&4294967295)<<22&4294967295|Y>>>10))+((Y=P+(W^N&(U^W))+$[12]+1804603682&4294967295)<<7&4294967295|Y>>>25))+((Y=W+(U^P&(N^U))+$[13]+4254626195&4294967295)<<12&4294967295|Y>>>20))+((Y=U+(N^W&(P^N))+$[14]+2792965006&4294967295)<<17&4294967295|Y>>>15))+((Y=N+(P^U&(W^P))+$[15]+1236535329&4294967295)<<22&4294967295|Y>>>10))+((Y=P+(U^W&(N^U))+$[1]+4129170786&4294967295)<<5&4294967295|Y>>>27))+((Y=W+(N^U&(P^N))+$[6]+3225465664&4294967295)<<9&4294967295|Y>>>23))+((Y=U+(P^N&(W^P))+$[11]+643717713&4294967295)<<14&4294967295|Y>>>18))+((Y=N+(W^P&(U^W))+$[0]+3921069994&4294967295)<<20&4294967295|Y>>>12))+((Y=P+(U^W&(N^U))+$[5]+3593408605&4294967295)<<5&4294967295|Y>>>27))+((Y=W+(N^U&(P^N))+$[10]+38016083&4294967295)<<9&4294967295|Y>>>23))+((Y=U+(P^N&(W^P))+$[15]+3634488961&4294967295)<<14&4294967295|Y>>>18))+((Y=N+(W^P&(U^W))+$[4]+3889429448&4294967295)<<20&4294967295|Y>>>12))+((Y=P+(U^W&(N^U))+$[9]+568446438&4294967295)<<5&4294967295|Y>>>27))+((Y=W+(N^U&(P^N))+$[14]+3275163606&4294967295)<<9&4294967295|Y>>>23))+((Y=U+(P^N&(W^P))+$[3]+4107603335&4294967295)<<14&4294967295|Y>>>18))+((Y=N+(W^P&(U^W))+$[8]+1163531501&4294967295)<<20&4294967295|Y>>>12))+((Y=P+(U^W&(N^U))+$[13]+2850285829&4294967295)<<5&4294967295|Y>>>27))+((Y=W+(N^U&(P^N))+$[2]+4243563512&4294967295)<<9&4294967295|Y>>>23))+((Y=U+(P^N&(W^P))+$[7]+1735328473&4294967295)<<14&4294967295|Y>>>18))+((Y=N+(W^P&(U^W))+$[12]+2368359562&4294967295)<<20&4294967295|Y>>>12))+((Y=P+(N^U^W)+$[5]+4294588738&4294967295)<<4&4294967295|Y>>>28))+((Y=W+(P^N^U)+$[8]+2272392833&4294967295)<<11&4294967295|Y>>>21))+((Y=U+(W^P^N)+$[11]+1839030562&4294967295)<<16&4294967295|Y>>>16))+((Y=N+(U^W^P)+$[14]+4259657740&4294967295)<<23&4294967295|Y>>>9))+((Y=P+(N^U^W)+$[1]+2763975236&4294967295)<<4&4294967295|Y>>>28))+((Y=W+(P^N^U)+$[4]+1272893353&4294967295)<<11&4294967295|Y>>>21))+((Y=U+(W^P^N)+$[7]+4139469664&4294967295)<<16&4294967295|Y>>>16))+((Y=N+(U^W^P)+$[10]+3200236656&4294967295)<<23&4294967295|Y>>>9))+((Y=P+(N^U^W)+$[13]+681279174&4294967295)<<4&4294967295|Y>>>28))+((Y=W+(P^N^U)+$[0]+3936430074&4294967295)<<11&4294967295|Y>>>21))+((Y=U+(W^P^N)+$[3]+3572445317&4294967295)<<16&4294967295|Y>>>16))+((Y=N+(U^W^P)+$[6]+76029189&4294967295)<<23&4294967295|Y>>>9))+((Y=P+(N^U^W)+$[9]+3654602809&4294967295)<<4&4294967295|Y>>>28))+((Y=W+(P^N^U)+$[12]+3873151461&4294967295)<<11&4294967295|Y>>>21))+((Y=U+(W^P^N)+$[15]+530742520&4294967295)<<16&4294967295|Y>>>16))+((Y=N+(U^W^P)+$[2]+3299628645&4294967295)<<23&4294967295|Y>>>9))+((Y=P+(U^(N|~W))+$[0]+4096336452&4294967295)<<6&4294967295|Y>>>26))+((Y=W+(N^(P|~U))+$[7]+1126891415&4294967295)<<10&4294967295|Y>>>22))+((Y=U+(P^(W|~N))+$[14]+2878612391&4294967295)<<15&4294967295|Y>>>17))+((Y=N+(W^(U|~P))+$[5]+4237533241&4294967295)<<21&4294967295|Y>>>11))+((Y=P+(U^(N|~W))+$[12]+1700485571&4294967295)<<6&4294967295|Y>>>26))+((Y=W+(N^(P|~U))+$[3]+2399980690&4294967295)<<10&4294967295|Y>>>22))+((Y=U+(P^(W|~N))+$[10]+4293915773&4294967295)<<15&4294967295|Y>>>17))+((Y=N+(W^(U|~P))+$[1]+2240044497&4294967295)<<21&4294967295|Y>>>11))+((Y=P+(U^(N|~W))+$[8]+1873313359&4294967295)<<6&4294967295|Y>>>26))+((Y=W+(N^(P|~U))+$[15]+4264355552&4294967295)<<10&4294967295|Y>>>22))+((Y=U+(P^(W|~N))+$[6]+2734768916&4294967295)<<15&4294967295|Y>>>17))+((Y=N+(W^(U|~P))+$[13]+1309151649&4294967295)<<21&4294967295|Y>>>11))+((W=(P=N+((Y=P+(U^(N|~W))+$[4]+4149444226&4294967295)<<6&4294967295|Y>>>26))+((Y=W+(N^(P|~U))+$[11]+3174756917&4294967295)<<10&4294967295|Y>>>22))^((U=W+((Y=U+(P^(W|~N))+$[2]+718787259&4294967295)<<15&4294967295|Y>>>17))|~P))+$[9]+3951481745&4294967295,B.g[0]=B.g[0]+P&4294967295,B.g[1]=B.g[1]+(U+(Y<<21&4294967295|Y>>>11))&4294967295,B.g[2]=B.g[2]+U&4294967295,B.g[3]=B.g[3]+W&4294967295}function o(B,P){this.h=P;for(var N=[],$=!0,U=B.length-1;0<=U;U--){var W=0|B[U];$&&W==P||(N[U]=W,$=!1)}this.g=N}(function t(B,P){function N(){}N.prototype=P.prototype,B.D=P.prototype,B.prototype=new N,B.prototype.constructor=B,B.C=function($,U,W){for(var Y=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Y[ut-2]=arguments[ut];return P.prototype[U].apply($,Y)}})(i,function e(){this.blockSize=-1}),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},i.prototype.u=function(B,P){void 0===P&&(P=B.length);for(var N=P-this.blockSize,$=this.B,U=this.h,W=0;W<P;){if(0==U)for(;W<=N;)r(this,B,W),W+=this.blockSize;if("string"==typeof B){for(;W<P;)if($[U++]=B.charCodeAt(W++),U==this.blockSize){r(this,$),U=0;break}}else for(;W<P;)if($[U++]=B[W++],U==this.blockSize){r(this,$),U=0;break}}this.h=U,this.o+=P},i.prototype.v=function(){var B=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);B[0]=128;for(var P=1;P<B.length-8;++P)B[P]=0;var N=8*this.o;for(P=B.length-8;P<B.length;++P)B[P]=255&N,N/=256;for(this.u(B),B=Array(16),P=N=0;4>P;++P)for(var $=0;32>$;$+=8)B[N++]=this.g[P]>>>$&255;return B};var a={};function l(B){return-128<=B&&128>B?function s(B,P){var N=a;return Object.prototype.hasOwnProperty.call(N,B)?N[B]:N[B]=P(B)}(B,function(P){return new o([0|P],0>P?-1:0)}):new o([0|B],0>B?-1:0)}function c(B){if(isNaN(B)||!isFinite(B))return f;if(0>B)return E(c(-B));for(var P=[],N=1,$=0;B>=N;$++)P[$]=B/N|0,N*=4294967296;return new o(P,0)}var f=l(0),g=l(1),v=l(16777216);function b(B){if(0!=B.h)return!1;for(var P=0;P<B.g.length;P++)if(0!=B.g[P])return!1;return!0}function x(B){return-1==B.h}function E(B){for(var P=B.g.length,N=[],$=0;$<P;$++)N[$]=~B.g[$];return new o(N,~B.h).add(g)}function O(B,P){return B.add(E(P))}function k(B,P){for(;(65535&B[P])!=B[P];)B[P+1]+=B[P]>>>16,B[P]&=65535,P++}function F(B,P){this.g=B,this.h=P}function q(B,P){if(b(P))throw Error("division by zero");if(b(B))return new F(f,f);if(x(B))return P=q(E(B),P),new F(E(P.g),E(P.h));if(x(P))return P=q(B,E(P)),new F(E(P.g),P.h);if(30<B.g.length){if(x(B)||x(P))throw Error("slowDivide_ only works with positive integers.");for(var N=g,$=P;0>=$.l(B);)N=K(N),$=K($);var U=re(N,1),W=re($,1);for($=re($,2),N=re(N,2);!b($);){var Y=W.add($);0>=Y.l(B)&&(U=U.add(N),W=Y),$=re($,1),N=re(N,1)}return P=O(B,U.j(P)),new F(U,P)}for(U=f;0<=B.l(P);){for(N=Math.max(1,Math.floor(B.m()/P.m())),$=48>=($=Math.ceil(Math.log(N)/Math.LN2))?1:Math.pow(2,$-48),Y=(W=c(N)).j(P);x(Y)||0<Y.l(B);)Y=(W=c(N-=$)).j(P);b(W)&&(W=g),U=U.add(W),B=O(B,Y)}return new F(U,B)}function K(B){for(var P=B.g.length+1,N=[],$=0;$<P;$++)N[$]=B.i($)<<1|B.i($-1)>>>31;return new o(N,B.h)}function re(B,P){var N=P>>5;P%=32;for(var $=B.g.length-N,U=[],W=0;W<$;W++)U[W]=0<P?B.i(W+N)>>>P|B.i(W+N+1)<<32-P:B.i(W+N);return new o(U,B.h)}(n=o.prototype).m=function(){if(x(this))return-E(this).m();for(var B=0,P=1,N=0;N<this.g.length;N++){var $=this.i(N);B+=(0<=$?$:4294967296+$)*P,P*=4294967296}return B},n.toString=function(B){if(2>(B=B||10)||36<B)throw Error("radix out of range: "+B);if(b(this))return"0";if(x(this))return"-"+E(this).toString(B);for(var P=c(Math.pow(B,6)),N=this,$="";;){var U=q(N,P).g,W=((0<(N=O(N,U.j(P))).g.length?N.g[0]:N.h)>>>0).toString(B);if(b(N=U))return W+$;for(;6>W.length;)W="0"+W;$=W+$}},n.i=function(B){return 0>B?0:B<this.g.length?this.g[B]:this.h},n.l=function(B){return x(B=O(this,B))?-1:b(B)?0:1},n.abs=function(){return x(this)?E(this):this},n.add=function(B){for(var P=Math.max(this.g.length,B.g.length),N=[],$=0,U=0;U<=P;U++){var W=$+(65535&this.i(U))+(65535&B.i(U)),Y=(W>>>16)+(this.i(U)>>>16)+(B.i(U)>>>16);$=Y>>>16,N[U]=(Y&=65535)<<16|(W&=65535)}return new o(N,-2147483648&N[N.length-1]?-1:0)},n.j=function(B){if(b(this)||b(B))return f;if(x(this))return x(B)?E(this).j(E(B)):E(E(this).j(B));if(x(B))return E(this.j(E(B)));if(0>this.l(v)&&0>B.l(v))return c(this.m()*B.m());for(var P=this.g.length+B.g.length,N=[],$=0;$<2*P;$++)N[$]=0;for($=0;$<this.g.length;$++)for(var U=0;U<B.g.length;U++){var W=this.i($)>>>16,Y=65535&this.i($),ut=B.i(U)>>>16,Nt=65535&B.i(U);N[2*$+2*U]+=Y*Nt,k(N,2*$+2*U),N[2*$+2*U+1]+=W*Nt,k(N,2*$+2*U+1),N[2*$+2*U+1]+=Y*ut,k(N,2*$+2*U+1),N[2*$+2*U+2]+=W*ut,k(N,2*$+2*U+2)}for($=0;$<P;$++)N[$]=N[2*$+1]<<16|N[2*$];for($=P;$<2*P;$++)N[$]=0;return new o(N,0)},n.A=function(B){return q(this,B).h},n.and=function(B){for(var P=Math.max(this.g.length,B.g.length),N=[],$=0;$<P;$++)N[$]=this.i($)&B.i($);return new o(N,this.h&B.h)},n.or=function(B){for(var P=Math.max(this.g.length,B.g.length),N=[],$=0;$<P;$++)N[$]=this.i($)|B.i($);return new o(N,this.h|B.h)},n.xor=function(B){for(var P=Math.max(this.g.length,B.g.length),N=[],$=0;$<P;$++)N[$]=this.i($)^B.i($);return new o(N,this.h^B.h)},i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,wU=bU.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(B,P){if(0==B.length)throw Error("number format error: empty string");if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if("-"==B.charAt(0))return E(u(B.substring(1),P));if(0<=B.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(P,8)),$=f,U=0;U<B.length;U+=8){var W=Math.min(8,B.length-U),Y=parseInt(B.substring(U,U+W),P);8>W?(W=c(Math.pow(P,W)),$=$.j(W).add(c(Y))):$=($=$.j(N)).add(c(Y))}return $},Xd=bU.Integer=o}).apply(typeof yU<"u"?yU:typeof self<"u"?self:typeof window<"u"?window:{});var CU,xU,pv,EU,ax,Gk,DU,TU,SU,ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jl={};(function(){var n,t="function"==typeof Object.defineProperties?Object.defineProperty:function(p,C,T){return p==Array.prototype||p==Object.prototype||(p[C]=T.value),p},i=function e(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ox&&ox];for(var C=0;C<p.length;++C){var T=p[C];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}(this);!function r(p,C){if(C)e:{var T=i;p=p.split(".");for(var L=0;L<p.length-1;L++){var ue=p[L];if(!(ue in T))break e;T=T[ue]}(C=C(L=T[p=p[p.length-1]]))!=L&&null!=C&&t(T,p,{configurable:!0,writable:!0,value:C})}}("Array.prototype.values",function(p){return p||function(){return function s(p,C){p instanceof String&&(p+="");var T=0,L=!1,ue={next:function(){if(!L&&T<p.length){var ye=T++;return{value:C(ye,p[ye]),done:!1}}return L=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}(this,function(C,T){return T})}});var o=o||{},a=this||self;function l(p){var C=typeof p;return"array"==(C="object"!=C?C:p?Array.isArray(p)?"array":C:"null")||"object"==C&&"number"==typeof p.length}function c(p){var C=typeof p;return"object"==C&&null!=p||"function"==C}function u(p,C,T){return p.call.apply(p.bind,arguments)}function f(p,C,T){if(!p)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,L),p.apply(C,ue)}}return function(){return p.apply(C,arguments)}}function g(p,C,T){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:f).apply(null,arguments)}function v(p,C){var T=Array.prototype.slice.call(arguments,1);return function(){var L=T.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function b(p,C){function T(){}T.prototype=C.prototype,p.aa=C.prototype,p.prototype=new T,p.prototype.constructor=p,p.Qb=function(L,ue,ye){for(var ze=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)ze[Bn-2]=arguments[Bn];return C.prototype[ue].apply(L,ze)}}function x(p){const C=p.length;if(0<C){const T=Array(C);for(let L=0;L<C;L++)T[L]=p[L];return T}return[]}function E(p,C){for(let T=1;T<arguments.length;T++){const L=arguments[T];if(l(L)){const ue=p.length||0,ye=L.length||0;p.length=ue+ye;for(let ze=0;ze<ye;ze++)p[ue+ze]=L[ze]}else p.push(L)}}function k(p){return/^[\s\xa0]*$/.test(p)}function F(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function q(p){return q[" "](p),p}q[" "]=function(){};var K=!(-1==F().indexOf("Gecko")||-1!=F().toLowerCase().indexOf("webkit")&&-1==F().indexOf("Edge")||-1!=F().indexOf("Trident")||-1!=F().indexOf("MSIE")||-1!=F().indexOf("Edge"));function re(p,C,T){for(const L in p)C.call(T,p[L],L,p)}function P(p){const C={};for(const T in p)C[T]=p[T];return C}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(p,C){let T,L;for(let ue=1;ue<arguments.length;ue++){for(T in L=arguments[ue],L)p[T]=L[T];for(let ye=0;ye<N.length;ye++)T=N[ye],Object.prototype.hasOwnProperty.call(L,T)&&(p[T]=L[T])}}function U(p){var C=1;p=p.split(":");const T=[];for(;0<C&&p.length;)T.push(p.shift()),C--;return p.length&&T.push(p.join(":")),T}function W(p){a.setTimeout(()=>{throw p},0)}function Y(){var p=Ye;let C=null;return p.g&&(C=p.g,p.g=p.g.next,p.g||(p.h=null),C.next=null),C}var Nt=new class O{constructor(C,T){this.i=C,this.j=T,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}(()=>new Ne,p=>p.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(C,T){this.h=C,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,Ge=!1,Ye=new class ut{constructor(){this.h=this.g=null}add(C,T){const L=Nt.get();L.set(C,T),this.h?this.h.next=L:this.g=L,this.h=L}},Jt=()=>{const p=a.Promise.resolve(void 0);Le=()=>{p.then(Tn)}};var Tn=()=>{for(var p;p=Y();){try{p.h.call(p.g)}catch(T){W(T)}var C=Nt;C.j(p),100>C.h&&(C.h++,p.next=C.g,C.g=p)}Ge=!1};function un(){this.s=this.s,this.C=this.C}function dn(p,C){this.type=p,this.g=this.target=C,this.defaultPrevented=!1}un.prototype.s=!1,un.prototype.ma=function(){this.s||(this.s=!0,this.N())},un.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},dn.prototype.h=function(){this.defaultPrevented=!0};var Gt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,C=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const T=()=>{};a.addEventListener("test",T,C),a.removeEventListener("test",T,C)}catch{}return p}();function Wr(p,C){if(dn.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var T=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=C,C=p.relatedTarget){if(K){e:{try{q(C.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(C=null)}}else"mouseover"==T?C=p.fromElement:"mouseout"==T&&(C=p.toElement);this.relatedTarget=C,L?(this.clientX=void 0!==L.clientX?L.clientX:L.pageX,this.clientY=void 0!==L.clientY?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:Co[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Wr.aa.h.call(this)}}b(Wr,dn);var Co={2:"touch",3:"pen",4:"mouse"};Wr.prototype.h=function(){Wr.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ii="closure_listenable_"+(1e6*Math.random()|0),lc=0;function Js(p,C,T,L,ue){this.listener=p,this.proxy=null,this.src=C,this.type=T,this.capture=!!L,this.ha=ue,this.key=++lc,this.da=this.fa=!1}function cc(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Lu(p){this.src=p,this.g={},this.h=0}function JP(p,C){var T=C.type;if(T in p.g){var ye,L=p.g[T],ue=Array.prototype.indexOf.call(L,C,void 0);(ye=0<=ue)&&Array.prototype.splice.call(L,ue,1),ye&&(cc(C),0==p.g[T].length&&(delete p.g[T],p.h--))}}function eO(p,C,T,L){for(var ue=0;ue<p.length;++ue){var ye=p[ue];if(!ye.da&&ye.listener==C&&ye.capture==!!T&&ye.ha==L)return ue}return-1}Lu.prototype.add=function(p,C,T,L,ue){var ye=p.toString();(p=this.g[ye])||(p=this.g[ye]=[],this.h++);var ze=eO(p,C,L,ue);return-1<ze?(C=p[ze],T||(C.fa=!1)):((C=new Js(C,this.src,ye,!!L,ue)).fa=T,p.push(C)),C};var tO="closure_lm_"+(1e6*Math.random()|0),nO={};function k7(p,C,T,L,ue){if(L&&L.once)return R7(p,C,T,L,ue);if(Array.isArray(C)){for(var ye=0;ye<C.length;ye++)k7(p,C[ye],T,L,ue);return null}return T=oO(T),p&&p[Ii]?p.K(C,T,c(L)?!!L.capture:!!L,ue):M7(p,C,T,!1,L,ue)}function M7(p,C,T,L,ue,ye){if(!C)throw Error("Invalid event type");var ze=c(ue)?!!ue.capture:!!ue,Bn=rO(p);if(Bn||(p[tO]=Bn=new Lu(p)),(T=Bn.add(C,T,L,ze,ye)).proxy)return T;if(L=function GTe(){const C=YTe;return function p(T){return C.call(p.src,p.listener,T)}}(),T.proxy=L,L.src=p,L.listener=T,p.addEventListener)Gt||(ue=ze),void 0===ue&&(ue=!1),p.addEventListener(C.toString(),L,ue);else if(p.attachEvent)p.attachEvent(O7(C.toString()),L);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(L)}return T}function R7(p,C,T,L,ue){if(Array.isArray(C)){for(var ye=0;ye<C.length;ye++)R7(p,C[ye],T,L,ue);return null}return T=oO(T),p&&p[Ii]?p.L(C,T,c(L)?!!L.capture:!!L,ue):M7(p,C,T,!0,L,ue)}function P7(p,C,T,L,ue){if(Array.isArray(C))for(var ye=0;ye<C.length;ye++)P7(p,C[ye],T,L,ue);else L=c(L)?!!L.capture:!!L,T=oO(T),p&&p[Ii]?(p=p.i,(C=String(C).toString())in p.g&&-1<(T=eO(ye=p.g[C],T,L,ue))&&(cc(ye[T]),Array.prototype.splice.call(ye,T,1),0==ye.length&&(delete p.g[C],p.h--))):p&&(p=rO(p))&&(C=p.g[C.toString()],p=-1,C&&(p=eO(C,T,L,ue)),(T=-1<p?C[p]:null)&&iO(T))}function iO(p){if("number"!=typeof p&&p&&!p.da){var C=p.src;if(C&&C[Ii])JP(C.i,p);else{var T=p.type,L=p.proxy;C.removeEventListener?C.removeEventListener(T,L,p.capture):C.detachEvent?C.detachEvent(O7(T),L):C.addListener&&C.removeListener&&C.removeListener(L),(T=rO(C))?(JP(T,p),0==T.h&&(T.src=null,C[tO]=null)):cc(p)}}}function O7(p){return p in nO?nO[p]:nO[p]="on"+p}function YTe(p,C){if(p.da)p=!0;else{C=new Wr(C,this);var T=p.listener,L=p.ha||p.src;p.fa&&iO(p),p=T.call(L,C)}return p}function rO(p){return(p=p[tO])instanceof Lu?p:null}var sO="__closure_events_fn_"+(1e9*Math.random()>>>0);function oO(p){return"function"==typeof p?p:(p[sO]||(p[sO]=function(C){return p.handleEvent(C)}),p[sO])}function ms(){un.call(this),this.i=new Lu(this),this.M=this,this.F=null}function Ms(p,C){var T,L=p.F;if(L)for(T=[];L;L=L.F)T.push(L);if(p=p.M,L=C.type||C,"string"==typeof C)C=new dn(C,p);else if(C instanceof dn)C.target=C.target||p;else{var ue=C;$(C=new dn(L,p),ue)}if(ue=!0,T)for(var ye=T.length-1;0<=ye;ye--){var ze=C.g=T[ye];ue=hD(ze,L,!0,C)&&ue}if(ue=hD(ze=C.g=p,L,!0,C)&&ue,ue=hD(ze,L,!1,C)&&ue,T)for(ye=0;ye<T.length;ye++)ue=hD(ze=C.g=T[ye],L,!1,C)&&ue}function hD(p,C,T,L){if(!(C=p.i.g[String(C)]))return!0;C=C.concat();for(var ue=!0,ye=0;ye<C.length;++ye){var ze=C[ye];if(ze&&!ze.da&&ze.capture==T){var Bn=ze.listener,qr=ze.ha||ze.src;ze.fa&&JP(p.i,ze),ue=!1!==Bn.call(qr,L)&&ue}}return ue&&!L.defaultPrevented}function F7(p,C,T){if("function"==typeof p)T&&(p=g(p,T));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=g(p.handleEvent,p)}return 2147483647<Number(C)?-1:a.setTimeout(p,C||0)}function N7(p){p.g=F7(()=>{p.g=null,p.i&&(p.i=!1,N7(p))},p.l);const C=p.h;p.h=null,p.m.apply(null,C)}b(ms,un),ms.prototype[Ii]=!0,ms.prototype.removeEventListener=function(p,C,T,L){P7(this,p,C,T,L)},ms.prototype.N=function(){if(ms.aa.N.call(this),this.i){var C,p=this.i;for(C in p.g){for(var T=p.g[C],L=0;L<T.length;L++)cc(T[L]);delete p.g[C],p.h--}}this.F=null},ms.prototype.K=function(p,C,T,L){return this.i.add(String(p),C,!1,T,L)},ms.prototype.L=function(p,C,T,L){return this.i.add(String(p),C,!0,T,L)};class ZTe extends un{constructor(C,T){super(),this.m=C,this.l=T,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:N7(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ny(p){un.call(this),this.h=p,this.g={}}b(Ny,un);var L7=[];function V7(p){re(p.g,function(C,T){this.g.hasOwnProperty(T)&&iO(C)},p),p.g={}}Ny.prototype.N=function(){Ny.aa.N.call(this),V7(this)},Ny.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var aO=a.JSON.stringify,KTe=a.JSON.parse,QTe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function lO(){}function j7(){}lO.prototype.h=null;var Ly={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cO(){dn.call(this,"d")}function uO(){dn.call(this,"c")}b(cO,dn),b(uO,dn);var Nh={},U7=null;function fD(){return U7=U7||new ms}function z7(p){dn.call(this,Nh.La,p)}function Vy(p){const C=fD();Ms(C,new z7(C))}function H7(p,C){dn.call(this,Nh.STAT_EVENT,p),this.stat=C}function Rs(p){const C=fD();Ms(C,new H7(C,p))}function $7(p,C){dn.call(this,Nh.Ma,p),this.size=C}function By(p,C){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},C)}function jy(){this.g=!0}function Fm(p,C,T,L){p.info(function(){return"XMLHTTP TEXT ("+C+"): "+function tSe(p,C){if(!p.g)return C;if(!C)return null;try{var T=JSON.parse(C);if(T)for(p=0;p<T.length;p++)if(Array.isArray(T[p])){var L=T[p];if(!(2>L.length)){var ue=L[1];if(Array.isArray(ue)&&!(1>ue.length)){var ye=ue[0];if("noop"!=ye&&"stop"!=ye&&"close"!=ye)for(var ze=1;ze<ue.length;ze++)ue[ze]=""}}}return aO(T)}catch{return C}}(p,T)+(L?" "+L:"")})}Nh.La="serverreachability",b(z7,dn),Nh.STAT_EVENT="statevent",b(H7,dn),Nh.Ma="timingevent",b($7,dn),jy.prototype.xa=function(){this.g=!1},jy.prototype.info=function(){};var dO,pD={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},W7={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function mD(){}function Vu(p,C,T,L){this.j=p,this.i=C,this.l=T,this.R=L||1,this.U=new Ny(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new q7}function q7(){this.i=null,this.g="",this.h=!1}b(mD,lO),mD.prototype.g=function(){return new XMLHttpRequest},mD.prototype.i=function(){return{}},dO=new mD;var G7={},hO={};function fO(p,C,T){p.L=1,p.v=yD(uc(C)),p.m=T,p.P=!0,Y7(p,null)}function Y7(p,C){p.F=Date.now(),gD(p),p.A=uc(p.v);var T=p.A,L=p.R;Array.isArray(L)||(L=[String(L)]),lq(T.i,"t",L),p.C=0,T=p.j.J,p.h=new q7,p.g=Tq(p.j,T?C:null,!p.m),0<p.O&&(p.M=new ZTe(g(p.Y,p,p.g),p.O)),C=p.U,T=p.g,L=p.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(L7[0]=ue.toString()),ue=L7);for(var ye=0;ye<ue.length;ye++){var ze=k7(T,ue[ye],L||C.handleEvent,!1,C.h||C);if(!ze)break;C.g[ze.key]=ze}C=p.H?P(p.H):{},p.m?(p.u||(p.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,C)):(p.u="GET",p.g.ea(p.A,p.u,null,C)),Vy(),function XTe(p,C,T,L,ue,ye){p.info(function(){if(p.g)if(ye)for(var ze="",Bn=ye.split("&"),qr=0;qr<Bn.length;qr++){var pn=Bn[qr].split("=");if(1<pn.length){var gs=pn[0];pn=pn[1];var _s=gs.split("_");ze=2<=_s.length&&"type"==_s[1]?ze+(gs+"=")+pn+"&":ze+(gs+"=redacted&")}}else ze=null;else ze=ye;return"XMLHTTP REQ ("+L+") [attempt "+ue+"]: "+C+"\n"+T+"\n"+ze})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Z7(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function nSe(p,C){var T=p.C,L=C.indexOf("\n",T);return-1==L?hO:(T=Number(C.substring(T,L)),isNaN(T)?G7:(L+=1)+T>C.length?hO:(C=C.slice(L,L+T),p.C=L+T,C))}function gD(p){p.S=Date.now()+p.I,K7(p,p.I)}function K7(p,C){if(null!=p.B)throw Error("WatchDog timer not null");p.B=By(g(p.ba,p),C)}function pO(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function Uy(p){0==p.j.G||p.J||Cq(p.j,p)}function Lh(p){pO(p);var C=p.M;C&&"function"==typeof C.ma&&C.ma(),p.M=null,V7(p.U),p.g&&(C=p.g,p.g=null,C.abort(),C.ma())}function mO(p,C){try{var T=p.j;if(0!=T.G&&(T.g==p||gO(T.h,p)))if(!p.K&&gO(T.h,p)&&3==T.G){try{var L=T.Da.g.parse(C)}catch{L=null}if(Array.isArray(L)&&3==L.length){var ue=L;if(0==ue[0]){e:if(!T.u){if(T.g){if(!(T.g.F+3e3<p.F))break e;ED(T),CD(T)}bO(T),Rs(18)}}else T.za=ue[1],0<T.za-T.T&&37500>ue[2]&&T.F&&0==T.v&&!T.C&&(T.C=By(g(T.Za,T),6e3));if(1>=J7(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Bh(T,11)}else if((p.K||T.g==p)&&ED(T),!k(C))for(ue=T.Da.g.parse(C),C=0;C<ue.length;C++){let pn=ue[C];if(T.T=pn[0],pn=pn[1],2==T.G)if("c"==pn[0]){T.K=pn[1],T.ia=pn[2];const gs=pn[3];null!=gs&&(T.la=gs,T.j.info("VER="+T.la));const _s=pn[4];null!=_s&&(T.Aa=_s,T.j.info("SVER="+T.Aa));const Vm=pn[5];null!=Vm&&"number"==typeof Vm&&0<Vm&&(T.L=L=1.5*Vm,T.j.info("backChannelRequestTimeoutMs_="+L)),L=T;const ga=p.g;if(ga){const TD=ga.g?ga.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(TD){var ye=L.h;ye.g||-1==TD.indexOf("spdy")&&-1==TD.indexOf("quic")&&-1==TD.indexOf("h2")||(ye.j=ye.l,ye.g=new Set,ye.h&&(_O(ye,ye.h),ye.h=null))}if(L.D){const CO=ga.g?ga.g.getResponseHeader("X-HTTP-Session-Id"):null;CO&&(L.ya=CO,ai(L.I,L.D,CO))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-p.F,T.j.info("Handshake RTT: "+T.R+"ms"));var ze=p;if((L=T).qa=Dq(L,L.J?L.ia:null,L.W),ze.K){eq(L.h,ze);var Bn=ze,qr=L.L;qr&&(Bn.I=qr),Bn.B&&(pO(Bn),gD(Bn)),L.g=ze}else bq(L);0<T.i.length&&xD(T)}else"stop"!=pn[0]&&"close"!=pn[0]||Bh(T,7);else 3==T.G&&("stop"==pn[0]||"close"==pn[0]?"stop"==pn[0]?Bh(T,7):yO(T):"noop"!=pn[0]&&T.l&&T.l.ta(pn),T.v=0)}Vy()}catch{}}function Q7(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function X7(p){return!!p.h||!!p.g&&p.g.size>=p.j}function J7(p){return p.h?1:p.g?p.g.size:0}function gO(p,C){return p.h?p.h==C:!!p.g&&p.g.has(C)}function _O(p,C){p.g?p.g.add(C):p.h=C}function eq(p,C){p.h&&p.h==C?p.h=null:p.g&&p.g.has(C)&&p.g.delete(C)}function tq(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let C=p.i;for(const T of p.g.values())C=C.concat(T.D);return C}return x(p.i)}function nq(p,C){if(p.forEach&&"function"==typeof p.forEach)p.forEach(C,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,C,void 0);else for(var T=function sSe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var C=[];p=p.length;for(var T=0;T<p;T++)C.push(T);return C}C=[],T=0;for(const L in p)C[T++]=L;return C}}}(p),L=function rSe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var C=[],T=p.length,L=0;L<T;L++)C.push(p[L]);return C}for(L in C=[],T=0,p)C[T++]=p[L];return C}(p),ue=L.length,ye=0;ye<ue;ye++)C.call(void 0,L[ye],T&&T[ye],p)}Vu.prototype.ca=function(p){p=p.target;const C=this.M;C&&3==dc(p)?C.j():this.Y(p)},Vu.prototype.Y=function(p){try{if(p==this.g)e:{const _s=dc(this.g);var C=this.g.Ba();if(this.g.Z(),!(3>_s)&&(3!=_s||this.g&&(this.h.h||this.g.oa()||mq(this.g)))){this.J||4!=_s||7==C||Vy(),pO(this);var T=this.g.Z();this.X=T;t:if(Z7(this)){var L=mq(this.g);p="";var ue=L.length,ye=4==dc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Lh(this),Uy(this);var ze="";break t}this.h.i=new a.TextDecoder}for(C=0;C<ue;C++)this.h.h=!0,p+=this.h.i.decode(L[C],{stream:!(ye&&C==ue-1)});L.length=0,this.h.g+=p,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=200==T,function JTe(p,C,T,L,ue,ye,ze){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+ue+"]: "+C+"\n"+T+"\n"+ye+" "+ze})}(this.i,this.u,this.A,this.l,this.R,_s,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Bn,qr=this.g;if((Bn=qr.g?qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Bn)){var pn=Bn;break t}}pn=null}if(!(T=pn)){this.o=!1,this.s=3,Rs(12),Lh(this),Uy(this);break e}Fm(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mO(this,T)}if(this.P){let ga;for(T=!0;!this.J&&this.C<ze.length;){if(ga=nSe(this,ze),ga==hO){4==_s&&(this.s=4,Rs(14),T=!1),Fm(this.i,this.l,null,"[Incomplete Response]");break}if(ga==G7){this.s=4,Rs(15),Fm(this.i,this.l,ze,"[Invalid Chunk]"),T=!1;break}Fm(this.i,this.l,ga,null),mO(this,ga)}if(Z7(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=_s||0!=ze.length||this.h.h||(this.s=1,Rs(16),T=!1),this.o=this.o&&T,T){if(0<ze.length&&!this.W){this.W=!0;var gs=this.j;gs.g==this&&gs.ba&&!gs.M&&(gs.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),wO(gs),gs.M=!0,Rs(11))}}else Fm(this.i,this.l,ze,"[Invalid Chunked Response]"),Lh(this),Uy(this)}else Fm(this.i,this.l,ze,null),mO(this,ze);4==_s&&Lh(this),this.o&&!this.J&&(4==_s?Cq(this.j,this):(this.o=!1,gD(this)))}else(function ySe(p){const C={};p=(p.g&&2<=dc(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let L=0;L<p.length;L++){if(k(p[L]))continue;var T=U(p[L]);const ue=T[0];if("string"!=typeof(T=T[1]))continue;T=T.trim();const ye=C[ue]||[];C[ue]=ye,ye.push(T)}!function B(p,C){for(const T in p)C.call(void 0,p[T],T,p)}(C,function(L){return L.join(", ")})})(this.g),400==T&&0<ze.indexOf("Unknown SID")?(this.s=3,Rs(12)):(this.s=0,Rs(13)),Lh(this),Uy(this)}}}catch{}},Vu.prototype.cancel=function(){this.J=!0,Lh(this)},Vu.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function eSe(p,C){p.info(function(){return"TIMEOUT: "+C})}(this.i,this.A),2!=this.L&&(Vy(),Rs(17)),Lh(this),this.s=2,Uy(this)):K7(this,this.S-p)},Q7.prototype.cancel=function(){if(this.i=tq(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var iq=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vh(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Vh){this.h=p.h,_D(this,p.j),this.o=p.o,this.g=p.g,vD(this,p.s),this.l=p.l;var C=p.i,T=new $y;T.i=C.i,C.g&&(T.g=new Map(C.g),T.h=C.h),rq(this,T),this.m=p.m}else p&&(C=String(p).match(iq))?(this.h=!1,_D(this,C[1]||"",!0),this.o=zy(C[2]||""),this.g=zy(C[3]||"",!0),vD(this,C[4]),this.l=zy(C[5]||"",!0),rq(this,C[6]||"",!0),this.m=zy(C[7]||"")):(this.h=!1,this.i=new $y(null,this.h))}function uc(p){return new Vh(p)}function _D(p,C,T){p.j=T?zy(C,!0):C,p.j&&(p.j=p.j.replace(/:$/,""))}function vD(p,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);p.s=C}else p.s=null}function rq(p,C,T){C instanceof $y?(p.i=C,function hSe(p,C){C&&!p.j&&(Bu(p),p.i=null,p.g.forEach(function(T,L){var ue=L.toLowerCase();L!=ue&&(oq(this,L),lq(this,ue,T))},p)),p.j=C}(p.i,p.h)):(T||(C=Hy(C,uSe)),p.i=new $y(C,p.h))}function ai(p,C,T){p.i.set(C,T)}function yD(p){return ai(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function zy(p,C){return p?C?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Hy(p,C,T){return"string"==typeof p?(p=encodeURI(p).replace(C,aSe),T&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function aSe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Vh.prototype.toString=function(){var p=[],C=this.j;C&&p.push(Hy(C,sq,!0),":");var T=this.g;return(T||"file"==C)&&(p.push("//"),(C=this.o)&&p.push(Hy(C,sq,!0),"@"),p.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(T=this.s)&&p.push(":",String(T))),(T=this.l)&&(this.g&&"/"!=T.charAt(0)&&p.push("/"),p.push(Hy(T,"/"==T.charAt(0)?cSe:lSe,!0))),(T=this.i.toString())&&p.push("?",T),(T=this.m)&&p.push("#",Hy(T,dSe)),p.join("")};var p,sq=/[#\/\?@]/g,lSe=/[#\?:]/g,cSe=/[#\?]/g,uSe=/[#\?@]/g,dSe=/#/g;function $y(p,C){this.h=this.g=null,this.i=p||null,this.j=!!C}function Bu(p){p.g||(p.g=new Map,p.h=0,p.i&&function oSe(p,C){if(p){p=p.split("&");for(var T=0;T<p.length;T++){var L=p[T].indexOf("="),ue=null;if(0<=L){var ye=p[T].substring(0,L);ue=p[T].substring(L+1)}else ye=p[T];C(ye,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}(p.i,function(C,T){p.add(decodeURIComponent(C.replace(/\+/g," ")),T)}))}function oq(p,C){Bu(p),C=Nm(p,C),p.g.has(C)&&(p.i=null,p.h-=p.g.get(C).length,p.g.delete(C))}function aq(p,C){return Bu(p),C=Nm(p,C),p.g.has(C)}function lq(p,C,T){oq(p,C),0<T.length&&(p.i=null,p.g.set(Nm(p,C),x(T)),p.h+=T.length)}function Nm(p,C){return C=String(C),p.j&&(C=C.toLowerCase()),C}function ju(p,C,T,L,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),L(T)}catch{}}function mSe(){this.g=new QTe}function gSe(p,C,T){const L=T||"";try{nq(p,function(ue,ye){let ze=ue;c(ue)&&(ze=aO(ue)),C.push(L+ye+"="+encodeURIComponent(ze))})}catch(ue){throw C.push(L+"type="+encodeURIComponent("_badmap")),ue}}function Wy(p){this.l=p.Ub||null,this.j=p.eb||!1}function bD(p,C){ms.call(this),this.D=p,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function cq(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function qy(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Gy(p)}function Gy(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function uq(p){let C="";return re(p,function(T,L){C+=L,C+=":",C+=T,C+="\r\n"}),C}function vO(p,C,T){e:{for(L in T){var L=!1;break e}L=!0}L||(T=uq(T),"string"==typeof p?null!=T&&encodeURIComponent(String(T)):ai(p,C,T))}function Ai(p){ms.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=$y.prototype).add=function(p,C){Bu(this),this.i=null,p=Nm(this,p);var T=this.g.get(p);return T||this.g.set(p,T=[]),T.push(C),this.h+=1,this},n.forEach=function(p,C){Bu(this),this.g.forEach(function(T,L){T.forEach(function(ue){p.call(C,ue,L,this)},this)},this)},n.na=function(){Bu(this);const p=Array.from(this.g.values()),C=Array.from(this.g.keys()),T=[];for(let L=0;L<C.length;L++){const ue=p[L];for(let ye=0;ye<ue.length;ye++)T.push(C[L])}return T},n.V=function(p){Bu(this);let C=[];if("string"==typeof p)aq(this,p)&&(C=C.concat(this.g.get(Nm(this,p))));else{p=Array.from(this.g.values());for(let T=0;T<p.length;T++)C=C.concat(p[T])}return C},n.set=function(p,C){return Bu(this),this.i=null,aq(this,p=Nm(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[C]),this.h+=1,this},n.get=function(p,C){return p&&0<(p=this.V(p)).length?String(p[0]):C},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],C=Array.from(this.g.keys());for(var T=0;T<C.length;T++){var L=C[T];const ye=encodeURIComponent(String(L)),ze=this.V(L);for(L=0;L<ze.length;L++){var ue=ye;""!==ze[L]&&(ue+="="+encodeURIComponent(String(ze[L]))),p.push(ue)}}return this.i=p.join("&")},b(Wy,lO),Wy.prototype.g=function(){return new bD(this.l,this.j)},Wy.prototype.i=(p={},function(){return p}),b(bD,ms),(n=bD.prototype).open=function(p,C){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=C,this.readyState=1,Gy(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(C.body=p),(this.D||a).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qy(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Gy(this)),this.g&&(this.readyState=3,Gy(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cq(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var C=p.value?p.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!p.done}))&&(this.response=this.responseText+=C)}p.done?qy(this):Gy(this),3==this.readyState&&cq(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,qy(this))},n.Qa=function(p){this.g&&(this.response=p,qy(this))},n.ga=function(){this.g&&qy(this)},n.setRequestHeader=function(p,C){this.u.append(p,C)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],C=this.h.entries();for(var T=C.next();!T.done;)p.push((T=T.value)[0]+": "+T[1]),T=C.next();return p.join("\r\n")},Object.defineProperty(bD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),b(Ai,ms);var _Se=/^https?$/i,vSe=["POST","PUT"];function dq(p,C){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=C,p.m=5,hq(p),wD(p)}function hq(p){p.A||(p.A=!0,Ms(p,"complete"),Ms(p,"error"))}function fq(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=dc(p)||2!=p.Z()))if(p.u&&4==dc(p))F7(p.Ea,0,p);else if(Ms(p,"readystatechange"),4==dc(p)){p.h=!1;try{const ze=p.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var T;if(!(T=C)){var L;if(L=0===ze){var ue=String(p.D).match(iq)[1]||null;!ue&&a.self&&a.self.location&&(ue=a.self.location.protocol.slice(0,-1)),L=!_Se.test(ue?ue.toLowerCase():"")}T=L}if(T)Ms(p,"complete"),Ms(p,"success");else{p.m=6;try{var ye=2<dc(p)?p.g.statusText:""}catch{ye=""}p.l=ye+" ["+p.Z()+"]",hq(p)}}finally{wD(p)}}}function wD(p,C){if(p.g){pq(p);const T=p.g,L=p.v[0]?()=>{}:null;p.g=null,p.v=null,C||Ms(p,"ready");try{T.onreadystatechange=L}catch{}}}function pq(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function dc(p){return p.g?p.g.readyState:0}function mq(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Yy(p,C,T){return T&&T.internalChannelParams&&T.internalChannelParams[p]||C}function gq(p){this.Aa=0,this.i=[],this.j=new jy,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yy("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yy("baseRetryDelayMs",5e3,p),this.cb=Yy("retryDelaySeedMs",1e4,p),this.Wa=Yy("forwardChannelMaxRetries",2,p),this.wa=Yy("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Q7(p&&p.concurrentRequestLimit),this.Da=new mSe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function yO(p){if(_q(p),3==p.G){var C=p.U++,T=uc(p.I);if(ai(T,"SID",p.K),ai(T,"RID",C),ai(T,"TYPE","terminate"),Zy(p,T),(C=new Vu(p,p.j,C)).L=2,C.v=yD(uc(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(C.v.toString(),"")}catch{}!T&&a.Image&&((new Image).src=C.v,T=!0),T||(C.g=Tq(C.j,null),C.g.ea(C.v)),C.F=Date.now(),gD(C)}Eq(p)}function CD(p){p.g&&(wO(p),p.g.cancel(),p.g=null)}function _q(p){CD(p),p.u&&(a.clearTimeout(p.u),p.u=null),ED(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function xD(p){if(!X7(p.h)&&!p.s){p.s=!0;var C=p.Ga;Le||Jt(),Ge||(Le(),Ge=!0),Ye.add(C,p),p.B=0}}function vq(p,C){var T;T=C?C.l:p.U++;const L=uc(p.I);ai(L,"SID",p.K),ai(L,"RID",T),ai(L,"AID",p.T),Zy(p,L),p.m&&p.o&&vO(L,p.m,p.o),T=new Vu(p,p.j,T,p.B+1),null===p.m&&(T.H=p.o),C&&(p.i=C.D.concat(p.i)),C=yq(p,T,1e3),T.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),_O(p.h,T),fO(T,L,C)}function Zy(p,C){p.H&&re(p.H,function(T,L){ai(C,L,T)}),p.l&&nq({},function(T,L){ai(C,L,T)})}function yq(p,C,T){T=Math.min(p.i.length,T);var L=p.l?g(p.l.Na,p.l,p):null;e:{var ue=p.i;let ye=-1;for(;;){const ze=["count="+T];-1==ye?0<T?(ye=ue[0].g,ze.push("ofs="+ye)):ye=0:ze.push("ofs="+ye);let Bn=!0;for(let qr=0;qr<T;qr++){let pn=ue[qr].g;const gs=ue[qr].map;if(pn-=ye,0>pn)ye=Math.max(0,ue[qr].g-100),Bn=!1;else try{gSe(gs,ze,"req"+pn+"_")}catch{L&&L(gs)}}if(Bn){L=ze.join("&");break e}}}return p=p.i.splice(0,T),C.D=p,L}function bq(p){if(!p.g&&!p.u){p.Y=1;var C=p.Fa;Le||Jt(),Ge||(Le(),Ge=!0),Ye.add(C,p),p.v=0}}function bO(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=By(g(p.Fa,p),xq(p,p.v)),p.v++,0))}function wO(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function wq(p){p.g=new Vu(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var C=uc(p.qa);ai(C,"RID","rpc"),ai(C,"SID",p.K),ai(C,"AID",p.T),ai(C,"CI",p.F?"0":"1"),!p.F&&p.ja&&ai(C,"TO",p.ja),ai(C,"TYPE","xmlhttp"),Zy(p,C),p.m&&p.o&&vO(C,p.m,p.o),p.L&&(p.g.I=p.L);var T=p.g;p=p.ia,T.L=1,T.v=yD(uc(C)),T.m=null,T.P=!0,Y7(T,p)}function ED(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function Cq(p,C){var T=null;if(p.g==C){ED(p),wO(p),p.g=null;var L=2}else{if(!gO(p.h,C))return;T=C.D,eq(p.h,C),L=1}if(0!=p.G)if(C.o)if(1==L){T=C.m?C.m.length:0,C=Date.now()-C.F;var ue=p.B;Ms(L=fD(),new $7(L,T)),xD(p)}else bq(p);else if(3==(ue=C.s)||0==ue&&0<C.X||!(1==L&&function bSe(p,C){return!(J7(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=C.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=By(g(p.Ga,p,C),xq(p,p.B)),p.B++,0)))}(p,C)||2==L&&bO(p)))switch(T&&0<T.length&&(C=p.h,C.i=C.i.concat(T)),ue){case 1:Bh(p,5);break;case 4:Bh(p,10);break;case 3:Bh(p,6);break;default:Bh(p,2)}}function xq(p,C){let T=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(T*=2),T*C}function Bh(p,C){if(p.j.info("Error code "+C),2==C){var T=g(p.fb,p),L=p.Xa;const ue=!L;L=new Vh(L||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||_D(L,"https"),yD(L),ue?function fSe(p,C){const T=new jy;if(a.Image){const L=new Image;L.onload=v(ju,T,"TestLoadImage: loaded",!0,C,L),L.onerror=v(ju,T,"TestLoadImage: error",!1,C,L),L.onabort=v(ju,T,"TestLoadImage: abort",!1,C,L),L.ontimeout=v(ju,T,"TestLoadImage: timeout",!1,C,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else C(!1)}(L.toString(),T):function pSe(p,C){new jy;const L=new AbortController,ue=setTimeout(()=>{L.abort(),ju(0,0,!1,C)},1e4);fetch(p,{signal:L.signal}).then(ye=>{clearTimeout(ue),ju(0,0,!!ye.ok,C)}).catch(()=>{clearTimeout(ue),ju(0,0,!1,C)})}(L.toString(),T)}else Rs(2);p.G=0,p.l&&p.l.sa(C),Eq(p),_q(p)}function Eq(p){if(p.G=0,p.ka=[],p.l){const C=tq(p.h);(0!=C.length||0!=p.i.length)&&(E(p.ka,C),E(p.ka,p.i),p.h.i.length=0,x(p.i),p.i.length=0),p.l.ra()}}function Dq(p,C,T){var L=T instanceof Vh?uc(T):new Vh(T);if(""!=L.g)C&&(L.g=C+"."+L.g),vD(L,L.s);else{var ue=a.location;L=ue.protocol,C=C?C+"."+ue.hostname:ue.hostname,ue=+ue.port;var ye=new Vh(null);L&&_D(ye,L),C&&(ye.g=C),ue&&vD(ye,ue),T&&(ye.l=T),L=ye}return C=p.ya,(T=p.D)&&C&&ai(L,T,C),ai(L,"VER",p.la),Zy(p,L),L}function Tq(p,C,T){if(C&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(C=new Ai(p.Ca&&!p.pa?new Wy({eb:T}):p.pa)).Ha(p.J),C}function Sq(){}function DD(){}function xo(p,C){ms.call(this),this.g=new gq(C),this.l=p,this.h=C&&C.messageUrlParams||null,p=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(p?p["X-WebChannel-Content-Type"]=C.messageContentType:p={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(p?p["X-WebChannel-Client-Profile"]=C.va:p={"X-WebChannel-Client-Profile":C.va}),this.g.S=p,(p=C&&C.Sb)&&!k(p)&&(this.g.m=p),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!k(C)&&(this.g.D=C,null!==(p=this.h)&&C in p&&C in(p=this.h)&&delete p[C]),this.j=new Lm(this)}function Iq(p){cO.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var C=p.__sm__;if(C){e:{for(const T in C){p=T;break e}p=void 0}(this.i=p)&&(p=this.i,C=null!==C&&p in C?C[p]:void 0),this.data=C}else this.data=p}function Aq(){uO.call(this),this.status=1}function Lm(p){this.g=p}(n=Ai.prototype).Ha=function(p){this.J=p},n.ea=function(p,C,T,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);C=C?C.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dO.g(),this.v=function B7(p){return p.h||(p.h=p.i())}(this.o?this.o:dO),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(C,String(p),!0),this.B=!1}catch(ye){return void dq(this,ye)}if(p=T||"",T=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var ue in L)T.set(ue,L[ue]);else{if("function"!=typeof L.keys||"function"!=typeof L.get)throw Error("Unknown input type for opt_headers: "+String(L));for(const ye of L.keys())T.set(ye,L.get(ye))}L=Array.from(T.keys()).find(ye=>"content-type"==ye.toLowerCase()),ue=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vSe,C,void 0))||L||ue||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,ze]of T)this.g.setRequestHeader(ye,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pq(this),this.u=!0,this.g.send(p),this.u=!1}catch(ye){dq(this,ye)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ms(this,"complete"),Ms(this,"abort"),wD(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wD(this,!0)),Ai.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fq(this):this.bb())},n.bb=function(){fq(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<dc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var C=this.g.responseText;return p&&0==C.indexOf(p)&&(C=C.substring(p.length)),KTe(C)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=gq.prototype).la=8,n.G=1,n.connect=function(p,C,T,L){Rs(0),this.W=p,this.H=C||{},T&&void 0!==L&&(this.H.OSID=T,this.H.OAID=L),this.F=this.X,this.I=Dq(this,null,this.W),xD(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ue=new Vu(this,this.j,p);let ye=this.o;if(this.S&&(ye?(ye=P(ye),$(ye,this.S)):ye=this.S),null!==this.m||this.O||(ue.H=ye,ye=null),this.P)e:{for(var C=0,T=0;T<this.i.length;T++){var L=this.i[T];if(void 0===(L="__data__"in L.map&&"string"==typeof(L=L.map.__data__)?L.length:void 0))break;if(4096<(C+=L)){C=T;break e}if(4096===C||T===this.i.length-1){C=T+1;break e}}C=1e3}else C=1e3;C=yq(this,ue,C),ai(T=uc(this.I),"RID",p),ai(T,"CVER",22),this.D&&ai(T,"X-HTTP-Session-Id",this.D),Zy(this,T),ye&&(this.O?C="headers="+encodeURIComponent(String(uq(ye)))+"&"+C:this.m&&vO(T,this.m,ye)),_O(this.h,ue),this.Ua&&ai(T,"TYPE","init"),this.P?(ai(T,"$req",C),ai(T,"SID","null"),ue.T=!0,fO(ue,T,null)):fO(ue,T,C),this.G=2}}else 3==this.G&&(p?vq(this,p):0==this.i.length||X7(this.h)||vq(this))},n.Fa=function(){if(this.u=null,wq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=By(g(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rs(10),CD(this),wq(this))},n.Za=function(){null!=this.C&&(this.C=null,CD(this),bO(this),Rs(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Rs(2)):(this.j.info("Failed to ping google.com"),Rs(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Sq.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},DD.prototype.g=function(p,C){return new xo(p,C)},b(xo,ms),xo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xo.prototype.close=function(){yO(this.g)},xo.prototype.o=function(p){var C=this.g;if("string"==typeof p){var T={};T.__data__=p,p=T}else this.u&&((T={}).__data__=aO(p),p=T);C.i.push(new class{constructor(p,C){this.g=p,this.map=C}}(C.Ya++,p)),3==C.G&&xD(C)},xo.prototype.N=function(){this.g.l=null,delete this.j,yO(this.g),delete this.g,xo.aa.N.call(this)},b(Iq,cO),b(Aq,uO),b(Lm,Sq),Lm.prototype.ua=function(){Ms(this.g,"a")},Lm.prototype.ta=function(p){Ms(this.g,new Iq(p))},Lm.prototype.sa=function(p){Ms(this.g,new Aq)},Lm.prototype.ra=function(){Ms(this.g,"b")},DD.prototype.createWebChannel=DD.prototype.g,xo.prototype.send=xo.prototype.o,xo.prototype.open=xo.prototype.m,xo.prototype.close=xo.prototype.close,SU=jl.createWebChannelTransport=function(){return new DD},TU=jl.getStatEventTarget=function(){return fD()},DU=jl.Event=Nh,Gk=jl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pD.NO_ERROR=0,pD.TIMEOUT=8,pD.HTTP_ERROR=6,ax=jl.ErrorCode=pD,W7.COMPLETE="complete",EU=jl.EventType=W7,j7.EventType=Ly,Ly.OPEN="a",Ly.CLOSE="b",Ly.ERROR="c",Ly.MESSAGE="d",ms.prototype.listen=ms.prototype.K,pv=jl.WebChannel=j7,xU=jl.FetchXmlHttpFactory=Wy,Ai.prototype.listenOnce=Ai.prototype.L,Ai.prototype.getLastError=Ai.prototype.Ka,Ai.prototype.getLastErrorCode=Ai.prototype.Ba,Ai.prototype.getStatus=Ai.prototype.Z,Ai.prototype.getResponseJson=Ai.prototype.Oa,Ai.prototype.getResponseText=Ai.prototype.oa,Ai.prototype.send=Ai.prototype.ea,Ai.prototype.setWithCredentials=Ai.prototype.Ha,CU=jl.XhrIo=Ai}).apply(typeof ox<"u"?ox:typeof self<"u"?self:typeof window<"u"?window:{});const IU="@firebase/firestore";class kr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let Bp="10.12.1";const ou=new Wa.Yd("@firebase/firestore");function jp(){return ou.logLevel}function Me(n,...t){if(ou.logLevel<=Wa.in.DEBUG){const e=t.map(Yk);ou.debug(`Firestore (${Bp}): ${n}`,...e)}}function Yi(n,...t){if(ou.logLevel<=Wa.in.ERROR){const e=t.map(Yk);ou.error(`Firestore (${Bp}): ${n}`,...e)}}function Gs(n,...t){if(ou.logLevel<=Wa.in.WARN){const e=t.map(Yk);ou.warn(`Firestore (${Bp}): ${n}`,...e)}}function Yk(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const t=`FIRESTORE (${Bp}) INTERNAL ASSERTION FAILED: `+n;throw Yi(t),new Error(t)}function rt(n,t){n||et()}function Ue(n,t){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends yn.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class AU{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Tde{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(kr.UNAUTHENTICATED))}shutdown(){}}class Sde{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Ide{constructor(t){this.t=t,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let o=new br;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new br,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;t.enqueueRetryable((0,me.Z)(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new br)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(rt("string"==typeof i.accessToken),new AU(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return rt(null===t||"string"==typeof t),new kr(t)}}class Ade{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kde{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Ade(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mde{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const i=s=>{null!=s.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(rt("string"==typeof e.token),this.R=e.token,new kU(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Rde(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class MU{static newId(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=Rde(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function xt(n,t){return n<t?-1:n>t?1:0}function Up(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function RU(n){return n+"\0"}class hi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return hi.fromMillis(Date.now())}static fromDate(t){return hi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new hi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class st{constructor(t){this.timestamp=t}static fromTimestamp(t){return new st(t)}static min(){return new st(new hi(0,0))}static max(){return new st(new hi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mv{constructor(t,e,i){void 0===e?e=0:e>t.length&&et(),void 0===i?i=t.length-e:i>t.length-e&&et(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===mv.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof mv?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Kt extends mv{construct(t,e,i){return new Kt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Kt(e)}static emptyPath(){return new Kt([])}}const Pde=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ti extends mv{construct(t,e,i){return new ti(t,e,i)}static isValidIdentifier(t){return Pde.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ti.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ti(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ie(pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if("\\"===a){if(r+1===t.length)throw new Ie(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ie(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ie(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ti(e)}static emptyPath(){return new ti([])}}class He{constructor(t){this.path=t}static fromPath(t){return new He(Kt.fromString(t))}static fromName(t){return new He(Kt.fromString(t).popFirst(5))}static empty(){return new He(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Kt.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Kt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new He(new Kt(t.slice()))}}class zp{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function Zk(n){return n.fields.find(t=>2===t.kind)}function Jd(n){return n.fields.filter(t=>2!==t.kind)}zp.UNKNOWN_ID=-1;class eh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Hp{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Hp(0,go.min())}}function PU(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=st.fromTimestamp(1e9===i?new hi(e+1,0):new hi(e,i));return new go(r,He.empty(),t)}function OU(n){return new go(n.readTime,n.key,-1)}class go{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new go(st.min(),He.empty(),-1)}static max(){return new go(st.max(),He.empty(),-1)}}function Kk(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=He.comparator(n.documentKey,t.documentKey),0!==e?e:xt(n.largestBatchId,t.largestBatchId))}const FU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function au(n){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,me.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==FU)throw n;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class he{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new he((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof he?e:he.resolve(e)}catch(e){return he.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):he.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):he.reject(e)}static resolve(t){return new he((e,i)=>{e(t)})}static reject(t){return new he((e,i)=>{i(t)})}static waitFor(t){return new he((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},l=>i(l))}),o=!0,s===r&&e()})}static or(t){let e=he.resolve(!1);for(const i of t)e=e.next(r=>r?he.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new he((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;e(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,e){return new he((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class lx{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new br,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new gv(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=Xk(i.target.error);this.V.reject(new gv(t,r))}}static open(t,e,i,r){try{return new lx(e,t.transaction(r,i))}catch(s){throw new gv(e,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Me("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Lde(e)}}class qa{constructor(t,e,i){this.name=t,this.version=e,this.p=i,12.2===qa.S((0,yn.z$)())&&Yi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Me("SimpleDb","Removing database:",t),th(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,yn.hl)())return!1;if(qa.C())return!0;const t=(0,yn.z$)(),e=qa.S(t),i=0<e&&e<10,r=LU(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.v)}static F(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(t){var e=this;return(0,me.Z)(function*(){return e.db||(Me("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new gv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new Ie(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ie(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new gv(t,a))},s.onupgradeneeded=o=>{Me("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',o.oldVersion),e.p.O(o.target.result,s.transaction,o.oldVersion,e.version).next(()=>{Me("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.N&&(e.db.onversionchange=i=>e.N(i)),e.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,me.Z)(function*(){const o="readonly"===e;let a=0;for(;;){++a;try{s.db=yield s.M(t);const l=lx.open(s.db,t,o?"readonly":"readwrite",i),c=r(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),he.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Me("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function LU(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class Nde{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return th(this.B.delete())}}class gv extends Ie{constructor(t,e){super(pe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function lu(n){return"IndexedDbTransactionError"===n.name}class Lde{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Me("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),th(i)}add(t){return Me("SimpleDb","ADD",this.store.name,t,t),th(this.store.add(t))}get(t){return th(this.store.get(t)).next(e=>(void 0===e&&(e=null),Me("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Me("SimpleDb","DELETE",this.store.name,t),th(this.store.delete(t))}count(){return Me("SimpleDb","COUNT",this.store.name),th(this.store.count())}U(t,e){const i=this.options(t,e),r=i.index?this.store.index(i.index):this.store;if("function"==typeof r.getAll){const s=r.getAll(i.range);return new he((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new he((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(t,e){Me("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Y(t){const e=this.cursor({});return new he((i,r)=>{e.onerror=s=>{const o=Xk(s.target.error);r(o)},e.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(t,e){const i=[];return new he((r,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new Nde(a),c=e(a.primaryKey,a.value,l);if(c instanceof he){const u=c.catch(f=>(l.done(),he.reject(f)));i.push(u)}l.isDone?r():null===l.K?a.continue():a.continue(l.K)}}).next(()=>he.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function th(n){return new he((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=Xk(i.target.error);e(r)}})}let VU=!1;function Xk(n){const t=qa.S((0,yn.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VU||(VU=!0,setTimeout(()=>{throw i},0)),i}}return n}class Vde{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var e=this;Me("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,me.Z)(function*(){e.task=null;try{Me("IndexBackfiller",`Documents written: ${yield e.Z.ee()}`)}catch(i){lu(i)?Me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield au(i)}yield e.X(6e4)}))}}class Bde{constructor(t,e){this.localStore=t,this.persistence=e}ee(t=50){var e=this;return(0,me.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.te(i,t))})()}te(t,e){const i=new Set;let r=e,s=!0;return he.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(null!==o&&!i.has(o))return Me("IndexBackfiller",`Processing collection: ${o}`),this.ne(t,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>e-r)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.re(r,s)).next(a=>(Me("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}re(t,e){let i=t;return e.changes.forEach((r,s)=>{const o=OU(s);Kk(o,i)>0&&(i=o)}),new go(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let _o=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function _v(n){return null==n}function vv(n){return 0===n&&1/n==-1/0}function BU(n){return"number"==typeof n&&Number.isInteger(n)&&!vv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ls(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=jU(t)),t=jde(n.get(e),t);return jU(t)}function jde(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function jU(n){return n+"\x01\x01"}function Ga(n){const t=n.length;if(rt(t>=2),2===t)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const o=n.indexOf("\x01",s);switch((o<0||o>e)&&et(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:et()}s=o+2}return new Kt(i)}const UU=["userId","batchId"];function cx(n,t){return[n,ls(t)]}function zU(n,t,e){return[n,ls(t),e]}const Ude={},zde=["prefixPath","collectionGroup","readTime","documentId"],Hde=["prefixPath","collectionGroup","documentId"],$de=["collectionGroup","readTime","prefixPath","documentId"],Wde=["canonicalId","targetId"],qde=["targetId","path"],Gde=["path","targetId"],Yde=["collectionId","parent"],Zde=["indexId","uid"],Kde=["uid","sequenceNumber"],Qde=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xde=["indexId","uid","orderedDocumentKey"],Jde=["userId","collectionPath","documentId"],ehe=["userId","collectionPath","largestBatchId"],the=["userId","collectionGroup","largestBatchId"],HU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nhe=[...HU,"documentOverlays"],$U=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WU=$U,qU=[...WU,"indexConfiguration","indexState","indexEntries"],ihe=qU;class Jk extends NU{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function Mr(n,t){const e=Ue(n);return qa.F(e._e,t)}function GU(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function cu(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function ZU(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class qn{constructor(t,e){this.comparator=t,this.root=e||Ur.EMPTY}insert(t,e){return new qn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(t){return new qn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ux(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ux(this.root,t,this.comparator,!1)}getReverseIterator(){return new ux(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ux(this.root,t,this.comparator,!0)}}class ux{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ur{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Ur.RED,this.left=r??Ur.EMPTY,this.right=s??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Ur(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ur.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const t=this.left.check();if(t!==this.right.check())throw et();return t+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1,Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Ur(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(t){this.comparator=t,this.data=new qn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new KU(this.data.getIterator())}getIteratorFrom(t){return new KU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Fn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Fn(this.comparator);return e.data=t,e}}class KU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $p(n){return n.hasNext()?n.getNext():void 0}class Ys{constructor(t){this.fields=t,t.sort(ti.comparator)}static empty(){return new Ys([])}unionWith(t){let e=new Fn(ti.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Ys(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Up(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class QU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QU("Invalid base64 string: "+s):s}}(t);return new wr(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new wr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const she=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ul(n){if(rt(!!n),"string"==typeof n){let t=0;const e=she.exec(n);if(rt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Di(n.seconds),nanos:Di(n.nanos)}}function Di(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zl(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function dx(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function hx(n){const t=n.mapValue.fields.__previous_value__;return dx(t)?hx(t):t}function yv(n){const t=Ul(n.mapValue.fields.__local_write_time__.timestampValue);return new hi(t.seconds,t.nanos)}class ohe{constructor(t,e,i,r,s,o,a,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class uu{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof uu&&t.projectId===this.projectId&&t.database===this.database}}const du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fx={nullValue:"NULL_VALUE"};function hu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dx(n)?4:tz(n)?9007199254740991:10:et()}function Ya(n,t){if(n===t)return!0;const e=hu(n);if(e!==hu(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return yv(n).isEqual(yv(t));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Ul(r.timestampValue),a=Ul(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return s=t,zl(n.bytesValue).isEqual(zl(s.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return Di(r.geoPointValue.latitude)===Di(s.geoPointValue.latitude)&&Di(r.geoPointValue.longitude)===Di(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Di(r.integerValue)===Di(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Di(r.doubleValue),a=Di(s.doubleValue);return o===a?vv(o)===vv(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return Up(n.arrayValue.values||[],t.arrayValue.values||[],Ya);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(GU(o)!==GU(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ya(o[l],a[l])))return!1;return!0}(n,t);default:return et()}var s}function bv(n,t){return void 0!==(n.values||[]).find(e=>Ya(e,t))}function fu(n,t){if(n===t)return 0;const e=hu(n),i=hu(t);if(e!==i)return xt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Di(s.integerValue||s.doubleValue),l=Di(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return XU(n.timestampValue,t.timestampValue);case 4:return XU(yv(n),yv(t));case 5:return xt(n.stringValue,t.stringValue);case 6:return function(s,o){const a=zl(s),l=zl(o);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=xt(a[c],l[c]);if(0!==u)return u}return xt(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){const a=xt(Di(s.latitude),Di(o.latitude));return 0!==a?a:xt(Di(s.longitude),Di(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=fu(a[c],l[c]);if(u)return u}return xt(a.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===du.mapValue&&o===du.mapValue)return 0;if(s===du.mapValue)return 1;if(o===du.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const g=xt(l[f],u[f]);if(0!==g)return g;const v=fu(a[l[f]],c[u[f]]);if(0!==v)return v}return xt(l.length,u.length)}(n.mapValue,t.mapValue);default:throw et()}}function XU(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return xt(n,t);const e=Ul(n),i=Ul(t),r=xt(e.seconds,i.seconds);return 0!==r?r:xt(e.nanos,i.nanos)}function Wp(n){return eM(n)}function eM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Ul(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zl(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const s of e.values||[])r?r=!1:i+=",",i+=eM(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${eM(e.fields[o])}`;return r+"}"}(n.mapValue):et()}function nh(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function tM(n){return!!n&&"integerValue"in n}function wv(n){return!!n&&"arrayValue"in n}function JU(n){return!!n&&"nullValue"in n}function ez(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mx(n){return!!n&&"mapValue"in n}function Cv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return cu(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Cv(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Cv(n.arrayValue.values[e]);return t}return Object.assign({},n)}function tz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ahe(n){return"nullValue"in n?fx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nh(uu.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function lhe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nh(uu.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?du:et()}function nz(n,t){const e=fu(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function iz(n,t){const e=fu(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class zr{constructor(t){this.value=t}static empty(){return new zr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!mx(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cv(e)}setAll(t){let e=ti.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=Cv(o):r.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());mx(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ya(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];mx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){cu(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new zr(Cv(this.value))}}function rz(n){const t=[];return cu(n.fields,(e,i)=>{const r=new ti([e]);if(mx(i)){const s=rz(i.mapValue).fields;if(0===s.length)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Ys(t)}class ni{constructor(t,e,i,r,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ni(t,0,st.min(),st.min(),st.min(),zr.empty(),0)}static newFoundDocument(t,e,i,r){return new ni(t,1,e,st.min(),i,r,0)}static newNoDocument(t,e){return new ni(t,2,e,st.min(),st.min(),zr.empty(),0)}static newUnknownDocument(t,e){return new ni(t,3,e,st.min(),st.min(),zr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(st.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ni&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pu{constructor(t,e){this.position=t,this.inclusive=e}}function sz(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],o=n.position[r];if(i=s.field.isKeyField()?He.comparator(He.fromName(o.referenceValue),e.key):fu(o,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function oz(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ya(n.position[e],t.position[e]))return!1;return!0}class xv{constructor(t,e="asc"){this.field=t,this.dir=e}}function che(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class az{}class Qt extends az{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new uhe(t,e,i):"array-contains"===e?new fhe(t,i):"in"===e?new fz(t,i):"not-in"===e?new phe(t,i):"array-contains-any"===e?new mhe(t,i):new Qt(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new dhe(t,i):new hhe(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(fu(e,this.value)):null!==e&&hu(this.value)===hu(e)&&this.matchesComparison(fu(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends az{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new En(t,e)}matches(t){return qp(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qp(n){return"and"===n.op}function nM(n){return"or"===n.op}function iM(n){return lz(n)&&qp(n)}function lz(n){for(const t of n.filters)if(t instanceof En)return!1;return!0}function rM(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+Wp(n.value);if(iM(n))return n.filters.map(t=>rM(t)).join(",");{const t=n.filters.map(e=>rM(e)).join(",");return`${n.op}(${t})`}}function cz(n,t){return n instanceof Qt?(i=n,(r=t)instanceof Qt&&i.op===r.op&&i.field.isEqual(r.field)&&Ya(i.value,r.value)):n instanceof En?function(i,r){return r instanceof En&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((s,o,a)=>s&&cz(o,r.filters[a]),!0)}(n,t):void et();var i,r}function uz(n,t){const e=n.filters.concat(t);return En.create(e,n.op)}function dz(n){return n instanceof Qt?`${(e=n).field.canonicalString()} ${e.op} ${Wp(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(dz).join(" ,")+"}"}(n):"Filter";var e}class uhe extends Qt{constructor(t,e,i){super(t,e,i),this.key=He.fromName(i.referenceValue)}matches(t){const e=He.comparator(t.key,this.key);return this.matchesComparison(e)}}class dhe extends Qt{constructor(t,e){super(t,"in",e),this.keys=hz(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class hhe extends Qt{constructor(t,e){super(t,"not-in",e),this.keys=hz(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hz(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>He.fromName(i.referenceValue))}class fhe extends Qt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return wv(e)&&bv(e.arrayValue,this.value)}}class fz extends Qt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&bv(this.value.arrayValue,e)}}class phe extends Qt{constructor(t,e){super(t,"not-in",e)}matches(t){if(bv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!bv(this.value.arrayValue,e)}}class mhe extends Qt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!wv(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>bv(this.value.arrayValue,i))}}class ghe{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function sM(n,t=null,e=[],i=[],r=null,s=null,o=null){return new ghe(n,t,e,i,r,s,o)}function ih(n){const t=Ue(n);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>rM(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),_v(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Wp(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Wp(i)).join(",")),t.ue=e}return t.ue}function Ev(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!che(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!cz(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!oz(n.startAt,t.startAt)&&oz(n.endAt,t.endAt)}function gx(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _x(n,t){return n.filters.filter(e=>e instanceof Qt&&e.field.isEqual(t))}function pz(n,t,e){let i=fx,r=!0;for(const s of _x(n,t)){let o=fx,a=!0;switch(s.op){case"<":case"<=":o=ahe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=fx}nz({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const o=e.position[s];nz({value:i,inclusive:r},{value:o,inclusive:e.inclusive})<0&&(i=o,r=e.inclusive);break}return{value:i,inclusive:r}}function mz(n,t,e){let i=du,r=!0;for(const s of _x(n,t)){let o=du,a=!0;switch(s.op){case">=":case">":o=lhe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=du}iz({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const o=e.position[s];iz({value:i,inclusive:r},{value:o,inclusive:e.inclusive})>0&&(i=o,r=e.inclusive);break}return{value:i,inclusive:r}}class Hl{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function gz(n,t,e,i,r,s,o,a){return new Hl(n,t,e,i,r,s,o,a)}function Gp(n){return new Hl(n)}function _z(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function oM(n){return null!==n.collectionGroup}function Yp(n){const t=Ue(n);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fn(ti.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new xv(s,i))}),e.has(ti.keyField().canonicalString())||t.ce.push(new xv(ti.keyField(),i))}return t.ce}function cs(n){const t=Ue(n);return t.le||(t.le=function yz(n,t){if("F"===n.limitType)return sM(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>new xv(r.field,"desc"===r.dir?"asc":"desc"));const e=n.endAt?new pu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new pu(n.startAt.position,n.startAt.inclusive):null;return sM(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}(t,Yp(n))),t.le}function aM(n,t){const e=n.filters.concat([t]);return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function vx(n,t,e){return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Dv(n,t){return Ev(cs(n),cs(t))&&n.limitType===t.limitType}function bz(n){return`${ih(cs(n))}|lt:${n.limitType}`}function Zp(n){return`Query(target=${function(e){let i=e.path.canonicalString();return null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>dz(r)).join(", ")}]`),_v(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Wp(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Wp(r)).join(",")),`Target(${i})`}(cs(n))}; limitType=${n.limitType})`}function Tv(n,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):He.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(const s of Yp(i))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&(r=t,!((i=n).startAt&&!function(o,a,l){const c=sz(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Yp(i),r)||i.endAt&&!function(o,a,l){const c=sz(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Yp(i),r)));var i,r}function wz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Cz(n){return(t,e)=>{let i=!1;for(const r of Yp(n)){const s=_he(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function _he(n,t,e){const i=n.field.isKeyField()?He.comparator(t.key,e.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?fu(l,c):et()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return et()}}class $l{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){cu(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return ZU(this.inner)}size(){return this.innerSize}}const vhe=new qn(He.comparator);function Zs(){return vhe}const xz=new qn(He.comparator);function Sv(...n){let t=xz;for(const e of n)t=t.insert(e.key,e);return t}function Ez(n){let t=xz;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Za(){return Iv()}function Dz(){return Iv()}function Iv(){return new $l(n=>n.toString(),(n,t)=>n.isEqual(t))}const yhe=new qn(He.comparator),bhe=new Fn(He.comparator);function Mt(...n){let t=bhe;for(const e of n)t=t.add(e);return t}const whe=new Fn(xt);function lM(){return whe}function Tz(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vv(t)?"-0":t}}function Sz(n){return{integerValue:""+n}}function Iz(n,t){return BU(t)?Sz(t):Tz(n,t)}class yx{constructor(){this._=void 0}}function Che(n,t,e){return n instanceof Kp?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&dx(s)&&(s=hx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof rh?kz(n,t):n instanceof sh?Mz(n,t):function(r,s){const o=Az(r,s),a=Rz(o)+Rz(r.Pe);return tM(o)&&tM(r.Pe)?Sz(a):Tz(r.serializer,a)}(n,t)}function xhe(n,t,e){return n instanceof rh?kz(n,t):n instanceof sh?Mz(n,t):e}function Az(n,t){return n instanceof Qp?tM(i=t)||(s=i)&&"doubleValue"in s?t:{integerValue:0}:null;var i,s}class Kp extends yx{}class rh extends yx{constructor(t){super(),this.elements=t}}function kz(n,t){const e=Pz(t);for(const i of n.elements)e.some(r=>Ya(r,i))||e.push(i);return{arrayValue:{values:e}}}class sh extends yx{constructor(t){super(),this.elements=t}}function Mz(n,t){let e=Pz(t);for(const i of n.elements)e=e.filter(r=>!Ya(r,i));return{arrayValue:{values:e}}}class Qp extends yx{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Rz(n){return Di(n.integerValue||n.doubleValue)}function Pz(n){return wv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Av{constructor(t,e){this.field=t,this.transform=e}}class Dhe{constructor(t,e){this.version=t,this.transformResults=e}}class fi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new fi}static exists(t){return new fi(void 0,t)}static updateTime(t){return new fi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bx(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class wx{}function Oz(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Jp(n.key,fi.none()):new Xp(n.key,n.data,fi.none());{const e=n.data,i=zr.empty();let r=new Fn(ti.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);null===o&&s.length>1&&(s=s.popLast(),o=e.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new Wl(n.key,i,new Ys(r.toArray()),fi.none())}}function The(n,t,e){n instanceof Xp?function(r,s,o){const a=r.value.clone(),l=Lz(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Wl?function(r,s,o){if(!bx(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Lz(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Nz(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function kv(n,t,e,i){return n instanceof Xp?function(s,o,a,l){if(!bx(s.precondition,o))return a;const c=s.value.clone(),u=Vz(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,t,e,i):n instanceof Wl?function(s,o,a,l){if(!bx(s.precondition,o))return a;const c=Vz(s.fieldTransforms,l,o),u=o.data;return u.setAll(Nz(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,t,e,i):(a=e,bx(n.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function She(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=Az(i.transform,r||null);null!=s&&(null===e&&(e=zr.empty()),e.set(i.field,s))}return e||null}function Fz(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&Up(i,r,(s,o)=>function Ehe(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(i=n.transform)instanceof rh&&r instanceof rh||i instanceof sh&&r instanceof sh?Up(i.elements,r.elements,Ya):i instanceof Qp&&r instanceof Qp?Ya(i.Pe,r.Pe):i instanceof Kp&&r instanceof Kp);var i,r}(s,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var i,r}class Xp extends wx{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wl extends wx{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Nz(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Lz(n,t,e){const i=new Map;rt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,xhe(o,a,e[r]))}return i}function Vz(n,t,e){const i=new Map;for(const r of n){const s=r.transform,o=e.data.field(r.field);i.set(r.field,Che(s,o,t))}return i}class Jp extends wx{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cM extends wx{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uM{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&The(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=kv(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=kv(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=Dz();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;const l=Oz(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(st.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Mt())}isEqual(t){return this.batchId===t.batchId&&Up(this.mutations,t.mutations,(e,i)=>Fz(e,i))&&Up(this.baseMutations,t.baseMutations,(e,i)=>Fz(e,i))}}class dM{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){rt(t.mutations.length===i.length);let r=yhe;const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new dM(t,e,i,r)}}class hM{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ihe{constructor(t,e){this.count=t,this.unchangedNames=e}}var cr,rn;function jz(n){switch(n){default:return et();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function Uz(n){if(void 0===n)return Yi("GRPC error has no .code"),pe.UNKNOWN;switch(n){case cr.OK:return pe.OK;case cr.CANCELLED:return pe.CANCELLED;case cr.UNKNOWN:return pe.UNKNOWN;case cr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case cr.INTERNAL:return pe.INTERNAL;case cr.UNAVAILABLE:return pe.UNAVAILABLE;case cr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case cr.NOT_FOUND:return pe.NOT_FOUND;case cr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case cr.ABORTED:return pe.ABORTED;case cr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case cr.DATA_LOSS:return pe.DATA_LOSS;default:return et()}}(rn=cr||(cr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";function zz(){return new TextEncoder}const Ahe=new Xd([4294967295,4294967295],0);function Hz(n){const t=zz().encode(n),e=new wU;return e.update(t),new Uint8Array(e.digest())}function $z(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Xd([e,i],0),new Xd([r,s],0)]}class fM{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Mv(`Invalid padding: ${e}`);if(i<0)throw new Mv(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new Mv(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new Mv(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Xd.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(Xd.fromNumber(i)));return 1===r.compare(Ahe)&&(r=new Xd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=Hz(t),[i,r]=$z(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new fM(s,r,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(0===this.Ie)return;const e=Hz(t),[i,r]=$z(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class Mv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rv{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Pv.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Rv(st.min(),r,new qn(xt),Zs(),Mt())}}class Pv{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Pv(i,e,Mt(),Mt(),Mt())}}class xx{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}}class Wz{constructor(t,e){this.targetId=t,this.me=e}}class qz{constructor(t,e,i=wr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class Gz{constructor(){this.fe=0,this.ge=Zz(),this.pe=wr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Mt(),e=Mt(),i=Mt();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:et()}}),new Pv(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=Zz()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class khe{constructor(t){this.Le=t,this.Be=new Map,this.ke=Zs(),this.qe=Yz(),this.Qe=new qn(xt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:et()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,i=t.me.count,r=this.Je(e);if(r){const s=r.target;if(gx(s))if(0===i){const o=new He(s.path);this.Ue(e,o,ni.newNoDocument(o,st.min()))}else rt(1===i);else{const o=this.Ye(e);if(o!==i){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;0!==l&&(this.je(e),this.Qe=this.Qe.insert(e,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e;let o,a;try{o=zl(i).toUint8Array()}catch(l){if(l instanceof QU)return Gs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fM(o,r,s)}catch(l){return Gs(l instanceof Mv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&gx(a.target)){const l=new He(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,ni.newNoDocument(l,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let i=Mt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new Rv(t,e,this.Qe,this.ke,i);return this.ke=Zs(),this.qe=Yz(),this.Qe=new qn(xt),r}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Gz,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Fn(xt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||Me("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Gz),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Yz(){return new qn(He.comparator)}function Zz(){return new qn(He.comparator)}const Mhe={asc:"ASCENDING",desc:"DESCENDING"},Rhe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Phe={and:"AND",or:"OR"};class Ohe{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function pM(n,t){return n.useProto3Json||_v(t)?t:{value:t}}function em(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Kz(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Fhe(n,t){return em(n,t.toTimestamp())}function Zi(n){return rt(!!n),st.fromTimestamp(function(e){const i=Ul(e);return new hi(i.seconds,i.nanos)}(n))}function mM(n,t){return gM(n,t).canonicalString()}function gM(n,t){const e=(r=n,new Kt(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?e:e.child(t)}function Qz(n){const t=Kt.fromString(n);return rt(lH(t)),t}function Ov(n,t){return mM(n.databaseId,t.path)}function Ka(n,t){const e=Qz(t);if(e.get(1)!==n.databaseId.projectId)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new He(eH(e))}function Xz(n,t){return mM(n.databaseId,t)}function Jz(n){const t=Qz(n);return 4===t.length?Kt.emptyPath():eH(t)}function _M(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eH(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tH(n,t,e){return{name:Ov(n,t),fields:e.value.mapValue.fields}}function nH(n,t,e){const i=Ka(n,t.name),r=Zi(t.updateTime),s=t.createTime?Zi(t.createTime):st.min(),o=new zr({mapValue:{fields:t.fields}}),a=ni.newFoundDocument(i,r,s,o);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function Fv(n,t){let e;if(t instanceof Xp)e={update:tH(n,t.key,t.value)};else if(t instanceof Jp)e={delete:Ov(n,t.key)};else if(t instanceof Wl)e={update:tH(n,t.key,t.data),updateMask:Hhe(t.fieldMask)};else{if(!(t instanceof cM))return et();e={verify:Ov(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Kp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw et()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(s=t.precondition).updateTime?{updateTime:Fhe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:et()),e;var s}function vM(n,t){const e=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?fi.updateTime(Zi(s.updateTime)):void 0!==s.exists?fi.exists(s.exists):fi.none():fi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,a){let l=null;"setToServerValue"in a?(rt("REQUEST_TIME"===a.setToServerValue),l=new Kp):"appendMissingElements"in a?l=new rh(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new sh(a.removeAllFromArray.values||[]):"increment"in a?l=new Qp(o,a.increment):et();const c=ti.fromServerFormat(a.fieldPath);return new Av(c,l)}(n,r)):[];var s;if(t.update){const r=Ka(n,t.update.name),s=new zr({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=new Ys((t.updateMask.fieldPaths||[]).map(u=>ti.fromServerFormat(u)));return new Wl(r,s,o,e,i)}return new Xp(r,s,e,i)}if(t.delete){const r=Ka(n,t.delete);return new Jp(r,e)}if(t.verify){const r=Ka(n,t.verify);return new cM(r,e)}return et()}function iH(n,t){return{documents:[Xz(n,t.path)]}}function Ex(n,t){const e={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Xz(n,r);const s=function(c){if(0!==c.length)return aH(En.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:mu((g=u).field),direction:jhe(g.dir)};var g})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=pM(n,t.limit);return null!==a&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r};var c}function sH(n){let t=Jz(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){rt(1===i);const u=e.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];e.where&&(s=function(f){const g=oH(f);return g instanceof En&&iM(g)?g.getFilters():[g]}(e.where));let o=[];e.orderBy&&(o=e.orderBy.map(g=>{return new xv(tm((b=g).field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;e.limit&&(a=function(f){let g;return g="object"==typeof f?f.value:f,_v(g)?null:g}(e.limit));let l=null;var f;e.startAt&&(l=new pu((f=e.startAt).values||[],!!f.before));let c=null;return e.endAt&&(c=function(f){return new pu(f.values||[],!f.before)}(e.endAt)),gz(t,r,o,s,a,"F",l,c)}function oH(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=tm(e.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=tm(e.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=tm(e.unaryFilter.field);return Qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tm(e.unaryFilter.field);return Qt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Qt.create(tm((e=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(i=>oH(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function jhe(n){return Mhe[n]}function Uhe(n){return Rhe[n]}function zhe(n){return Phe[n]}function mu(n){return{fieldPath:n.canonicalString()}}function tm(n){return ti.fromServerFormat(n.fieldPath)}function aH(n){return n instanceof Qt?function(e){if("=="===e.op){if(ez(e.value))return{unaryFilter:{field:mu(e.field),op:"IS_NAN"}};if(JU(e.value))return{unaryFilter:{field:mu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ez(e.value))return{unaryFilter:{field:mu(e.field),op:"IS_NOT_NAN"}};if(JU(e.value))return{unaryFilter:{field:mu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mu(e.field),op:Uhe(e.op),value:e.value}}}(n):n instanceof En?function(e){const i=e.getFilters().map(r=>aH(r));return 1===i.length?i[0]:{compositeFilter:{op:zhe(e.op),filters:i}}}(n):et()}function Hhe(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function lH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ql{constructor(t,e,i,r,s=st.min(),o=st.min(),a=wr.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new ql(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class cH{constructor(t){this.ct=t}}function uH(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Dx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:Ov(s=n.ct,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:em(s,o.version.toTimestamp()),createTime:em(s,o.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:oh(t.version)};else{if(!t.isUnknownDocument())return et();i.unknownDocument={path:e.path.toArray(),version:oh(t.version)}}var s,o;return i}function Dx(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function oh(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ah(n){const t=new hi(n.seconds,n.nanoseconds);return st.fromTimestamp(t)}function lh(n,t){const e=(t.baseMutations||[]).map(s=>vM(n.ct,s));for(let s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);const i=t.mutations.map(s=>vM(n.ct,s)),r=hi.fromMillis(t.localWriteTimeMs);return new uM(t.batchId,r,e,i)}function Nv(n){const t=ah(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?ah(n.lastLimboFreeSnapshotVersion):st.min();let i;return i=void 0!==n.query.documents?(rt(1===(s=n.query).documents.length),cs(Gp(Jz(s.documents[0])))):function(s){return cs(sH(s))}(n.query),new ql(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,wr.fromBase64String(n.resumeToken));var s}function dH(n,t){const e=oh(t.snapshotVersion),i=oh(t.lastLimboFreeSnapshotVersion);let r;r=gx(t.target)?iH(n.ct,t.target):Ex(n.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ih(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function yM(n){const t=sH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?vx(t,t.limit,"L"):t}function bM(n,t){return new hM(t.largestBatchId,vM(n.ct,t.overlayMutation))}function hH(n,t){const e=t.path.lastSegment();return[n,ls(t.path.popLast()),e]}function fH(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:oh(i.readTime),documentKey:ls(i.documentKey.path),largestBatchId:i.largestBatchId}}class Whe{getBundleMetadata(t,e){return pH(t).get(e).next(i=>{if(i)return{id:(s=i).bundleId,createTime:ah(s.createTime),version:s.version};var s})}saveBundleMetadata(t,e){return pH(t).put({bundleId:(r=e).id,createTime:oh(Zi(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return mH(t).get(e).next(i=>{if(i)return{name:(s=i).name,query:yM(s.bundledQuery),readTime:ah(s.readTime)};var s})}saveNamedQuery(t,e){return mH(t).put({name:(r=e).name,readTime:oh(Zi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function pH(n){return Mr(n,"bundles")}function mH(n){return Mr(n,"namedQueries")}class Tx{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){return new Tx(t,e.uid||"")}getOverlay(t,e){return Lv(t).get(hH(this.userId,e)).next(i=>i?bM(this.serializer,i):null)}getOverlays(t,e){const i=Za();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,o)=>{const a=new hM(e,o);r.push(this.ht(t,a))}),he.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(o=>r.add(ls(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Lv(t).j("collectionPathOverlayIndex",a))}),he.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Za(),s=ls(e),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Lv(t).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=bM(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Za();let o;const a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Lv(t).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const f=bM(this.serializer,c);s.size()<r||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):u.done()}).next(()=>s)}ht(t,e){return Lv(t).put(function(r,s,o){const[a,l,c]=hH(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Fv(r.ct,o.mutation)}}(this.serializer,this.userId,e))}}function Lv(n){return Mr(n,"documentOverlays")}class ch{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Di(t.integerValue));else if("doubleValue"in t){const i=Di(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),vv(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),"string"==typeof i&&(i=Ul(i)),e.At(`${i.seconds||""}`),e.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(zl(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?tz(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):et()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const i=t.fields||{};this.Et(e,55);for(const r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){const i=t.values||[];this.Et(e,50);for(const r of i)this.It(r,e)}gt(t,e){this.Et(e,37),He.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}function qhe(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function gH(n){const t=64-function(i){let r=0;for(let s=0;s<8;++s){const o=qhe(255&i[s]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(t/8)}ch.bt=new ch;class Ghe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ct(i.value),i=e.next();this.vt()}Ft(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Mt(i.value),i=e.next();this.xt()}Ot(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{const r=e.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{const r=e.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(t){const e=this.Bt(t),i=gH(e);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}qt(t){const e=this.Bt(t),i=gH(e);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Bt(t){const e=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ct(t){const e=255&t;0===e?(this.Kt(0),this.Kt(255)):255===e?(this.Kt(255),this.Kt(0)):this.Kt(e)}Mt(t){const e=255&t;0===e?(this.Ut(0),this.Ut(255)):255===e?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Yhe{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Lt(t)}Tt(){this.Gt.Qt()}}class Zhe{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}}class Vv{constructor(){this.Gt=new Ghe,this.zt=new Yhe(this.Gt),this.jt=new Zhe(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return 0===t?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class uh{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Jt(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new uh(this.indexId,this.documentKey,this.arrayValue,i)}}function gu(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=_H(n.arrayValue,t.arrayValue),0!==e?e:(e=_H(n.directionalValue,t.directionalValue),0!==e?e:He.comparator(n.documentKey,t.documentKey)))}function _H(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class vH{constructor(t){this.Yt=new Fn((e,i)=>ti.comparator(e.field,i.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(const e of t.filters){const i=e;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(t){if(rt(t.collectionGroup===this.collectionId),this.en)return!1;const e=Zk(t);if(void 0!==e&&!this.nn(e))return!1;const i=Jd(t);let r=new Set,s=0,o=0;for(;s<i.length&&this.nn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<i.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],i[s]))return!1;return!0}on(){if(this.en)return null;let t=new Fn(ti.comparator);const e=[];for(const i of this.Xt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)e.push(new eh(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new eh(i.field,0))}for(const i of this.Zt)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new eh(i.field,"asc"===i.dir?0:1)));return new zp(zp.UNKNOWN_ID,this.collectionId,e,Hp.empty())}nn(t){for(const e of this.Xt)if(this.rn(e,t))return!0;return!1}rn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function yH(n){var t,e;if(rt(n instanceof Qt||n instanceof En),n instanceof Qt){if(n instanceof fz){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>Qt.create(n.field,"==",s)))||[];return En.create(r,"or")}return n}const i=n.filters.map(r=>yH(r));return En.create(i,n.op)}function Khe(n){if(0===n.getFilters().length)return[];const t=xM(yH(n));return rt(bH(t)),wM(t)||CM(t)?[t]:t.getFilters()}function wM(n){return n instanceof Qt}function CM(n){return n instanceof En&&iM(n)}function bH(n){return wM(n)||CM(n)||function(e){if(e instanceof En&&nM(e)){for(const i of e.getFilters())if(!wM(i)&&!CM(i))return!1;return!0}return!1}(n)}function xM(n){if(rt(n instanceof Qt||n instanceof En),n instanceof Qt)return n;if(1===n.filters.length)return xM(n.filters[0]);const t=n.filters.map(i=>xM(i));let e=En.create(t,n.op);return e=Sx(e),bH(e)?e:(rt(e instanceof En),rt(qp(e)),rt(e.filters.length>1),e.filters.reduce((i,r)=>EM(i,r)))}function EM(n,t){let e;return rt(n instanceof Qt||n instanceof En),rt(t instanceof Qt||t instanceof En),e=n instanceof Qt?t instanceof Qt?En.create([n,t],"and"):wH(n,t):t instanceof Qt?wH(t,n):function(r,s){if(rt(r.filters.length>0&&s.filters.length>0),qp(r)&&qp(s))return uz(r,s.getFilters());const o=nM(r)?r:s,a=nM(r)?s:r,l=o.filters.map(c=>EM(c,a));return En.create(l,"or")}(n,t),Sx(e)}function wH(n,t){if(qp(t))return uz(t,n.getFilters());{const e=t.filters.map(i=>EM(n,i));return En.create(e,"or")}}function Sx(n){if(rt(n instanceof Qt||n instanceof En),n instanceof Qt)return n;const t=n.getFilters();if(1===t.length)return Sx(t[0]);if(lz(n))return n;const e=t.map(r=>Sx(r)),i=[];return e.forEach(r=>{r instanceof Qt?i.push(r):r instanceof En&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:En.create(i,n.op)}class Qhe{constructor(){this._n=new DM}addToCollectionParentIndex(t,e){return this._n.add(e),he.resolve()}getCollectionParents(t,e){return he.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return he.resolve()}deleteFieldIndex(t,e){return he.resolve()}deleteAllFieldIndexes(t){return he.resolve()}createTargetIndexes(t,e){return he.resolve()}getDocumentsMatchingTarget(t,e){return he.resolve(null)}getIndexType(t,e){return he.resolve(0)}getFieldIndexes(t,e){return he.resolve([])}getNextCollectionGroupToUpdate(t){return he.resolve(null)}getMinOffset(t,e){return he.resolve(go.min())}getMinOffsetFromCollectionGroup(t,e){return he.resolve(go.min())}updateCollectionGroup(t,e,i){return he.resolve()}updateIndexEntries(t,e){return he.resolve()}}class DM{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Fn(Kt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Fn(Kt.comparator)).toArray()}}const Ix=new Uint8Array(0);class Xhe{constructor(t,e){this.databaseId=e,this.an=new DM,this.un=new $l(i=>ih(i),(i,r)=>Ev(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.an.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.an.add(e)});const s={collectionId:i,parent:ls(r)};return CH(t).put(s)}return he.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[RU(e),""],!1,!0);return CH(t).U(r).next(s=>{for(const o of s){if(o.collectionId!==e)break;i.push(Ga(o.parent))}return i})}addFieldIndex(t,e){const i=Bv(t),r={indexId:(a=e).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const s=i.add(r);if(e.indexState){const o=im(t);return s.next(a=>{o.put(fH(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=Bv(t),r=im(t),s=nm(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Bv(t),i=nm(t),r=im(t);return e.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(t,e){return he.forEach(this.cn(e),i=>this.getIndexType(t,i).next(r=>{if(0===r||1===r){const s=new vH(i).on();if(null!=s)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const i=nm(t);let r=!0;const s=new Map;return he.forEach(this.cn(e),o=>this.ln(t,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Mt();const a=[];return he.forEach(s,(l,c)=>{var F;Me("IndexedDbIndexManager",`Using index ${F=l,`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(q=>`${q.fieldPath}:${q.kind}`).join(",")}`} to execute ${ih(e)}`);const u=function(F,q){const K=Zk(q);if(void 0===K)return null;for(const re of _x(F,K.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(c,l),f=function(F,q){const K=new Map;for(const re of Jd(q))for(const B of _x(F,re.fieldPath))switch(B.op){case"==":case"in":K.set(re.fieldPath.canonicalString(),B.value);break;case"not-in":case"!=":return K.set(re.fieldPath.canonicalString(),B.value),Array.from(K.values())}return null}(c,l),g=function(F,q){const K=[];let re=!0;for(const B of Jd(q)){const P=0===B.kind?pz(F,B.fieldPath,F.startAt):mz(F,B.fieldPath,F.startAt);K.push(P.value),re&&(re=P.inclusive)}return new pu(K,re)}(c,l),v=function(F,q){const K=[];let re=!0;for(const B of Jd(q)){const P=0===B.kind?mz(F,B.fieldPath,F.endAt):pz(F,B.fieldPath,F.endAt);K.push(P.value),re&&(re=P.inclusive)}return new pu(K,re)}(c,l),b=this.hn(l,c,g),x=this.hn(l,c,v),E=this.Pn(l,c,f),O=this.In(l.indexId,u,b,g.inclusive,x,v.inclusive,E);return he.forEach(O,k=>i.G(k,e.limit).next(F=>{F.forEach(q=>{const K=He.fromSegments(q.documentKey);o.has(K)||(o=o.add(K),a.push(K))})}))}).next(()=>a)}return he.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:Khe(En.create(t.filters,"and")).map(i=>sM(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}In(t,e,i,r,s,o,a){const l=(null!=e?e.length:1)*Math.max(i.length,s.length),c=l/(null!=e?e.length:1),u=[];for(let f=0;f<l;++f){const g=e?this.Tn(e[f/c]):Ix,v=this.En(t,g,i[f%c],r),b=this.dn(t,g,s[f%c],o),x=a.map(E=>this.En(t,g,E,!0));u.push(...this.createRange(v,b,x))}return u}En(t,e,i,r){const s=new uh(t,He.empty(),e,i);return r?s:s.Jt()}dn(t,e,i,r){const s=new uh(t,He.empty(),e,i);return r?s.Jt():s}ln(t,e){const i=new vH(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let o=null;for(const a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let i=2;const r=this.cn(e);return he.forEach(r,s=>this.ln(t,s).next(o=>{o?0!==i&&o.fields.length<function(l){let c=new Fn(ti.comparator),u=!1;for(const f of l.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?u=!0:c=c.add(g.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}An(t,e){const i=new Vv;for(const r of Jd(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const o=i.Ht(r.kind);ch.bt.Pt(s,o)}return i.Wt()}Tn(t){const e=new Vv;return ch.bt.Pt(t,e.Ht(0)),e.Wt()}Rn(t,e){const i=new Vv;return ch.bt.Pt(nh(this.databaseId,e),i.Ht(function(s){const o=Jd(s);return 0===o.length?0:o[o.length-1].kind}(t))),i.Wt()}Pn(t,e,i){if(null===i)return[];let r=[];r.push(new Vv);let s=0;for(const o of Jd(t)){const a=i[s++];for(const l of r)if(this.Vn(e,o.fieldPath)&&wv(a))r=this.mn(r,o,a);else{const c=l.Ht(o.kind);ch.bt.Pt(a,c)}}return this.fn(r)}hn(t,e,i){return this.Pn(t,e,i.position)}fn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Wt();return e}mn(t,e,i){const r=[...t],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new Vv;l.seed(a.Wt()),ch.bt.Pt(o,l.Ht(e.kind)),s.push(l)}return s}Vn(t,e){return!!t.filters.find(i=>i instanceof Qt&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=Bv(t),r=im(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(s=>{const o=[];return he.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(u,f){const g=f?new Hp(f.sequenceNumber,new go(ah(f.readTime),new He(Ga(f.documentKey)),f.largestBatchId)):Hp.empty(),v=u.fields.map(([b,x])=>new eh(ti.fromServerFormat(b),x));return new zp(u.indexId,u.collectionGroup,v,g)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:xt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=Bv(t),s=im(t);return this.gn(t).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>he.forEach(a,l=>s.put(fH(l.indexId,this.uid,o,i)))))}updateIndexEntries(t,e){const i=new Map;return he.forEach(e,(r,s)=>{const o=i.get(r.collectionGroup);return(o?he.resolve(o):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),he.forEach(a,l=>this.pn(t,r,l).next(c=>{const u=this.yn(s,l);return c.isEqual(u)?he.resolve():this.wn(t,s,l,c,u)}))))})}Sn(t,e,i,r){return nm(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,e.key),documentKey:e.key.path.toArray()})}bn(t,e,i,r){return nm(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,e.key),e.key.path.toArray()])}pn(t,e,i){const r=nm(t);let s=new Fn(gu);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,e)])},(o,a)=>{s=s.add(new uh(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(t,e){let i=new Fn(gu);const r=this.An(e,t);if(null==r)return i;const s=Zk(e);if(null!=s){const o=t.data.field(s.fieldPath);if(wv(o))for(const a of o.arrayValue.values||[])i=i.add(new uh(e.indexId,t.key,this.Tn(a),r))}else i=i.add(new uh(e.indexId,t.key,Ix,r));return i}wn(t,e,i,r,s){Me("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const o=[];return function(l,c,u,f,g){const v=l.getIterator(),b=c.getIterator();let x=$p(v),E=$p(b);for(;x||E;){let O=!1,k=!1;if(x&&E){const F=u(x,E);F<0?k=!0:F>0&&(O=!0)}else null!=x?k=!0:O=!0;O?(f(E),E=$p(b)):k?(g(x),x=$p(v)):(x=$p(v),E=$p(b))}}(r,s,gu,a=>{o.push(this.Sn(t,e,i,a))},a=>{o.push(this.bn(t,e,i,a))}),he.waitFor(o)}gn(t){let e=1;return im(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,a)=>gu(o,a)).filter((o,a,l)=>!a||0!==gu(o,l[a-1]));const r=[];r.push(t);for(const o of i){const a=gu(o,t),l=gu(o,e);if(0===a)r[0]=t.Jt();else if(a>0&&l<0)r.push(o),r.push(o.Jt());else if(l>0)break}r.push(e);const s=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Ix,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Ix,[]]))}return s}Dn(t,e){return gu(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(xH)}getMinOffset(t,e){return he.mapArray(this.cn(e),i=>this.ln(t,i).next(r=>r||et())).next(xH)}}function CH(n){return Mr(n,"collectionParents")}function nm(n){return Mr(n,"indexEntries")}function Bv(n){return Mr(n,"indexConfiguration")}function im(n){return Mr(n,"indexState")}function xH(n){rt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Kk(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new go(t.readTime,t.documentKey,e)}const EH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class us{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new us(t,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function DH(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(e.batchId);let a=0;const l=i.J({range:o},(u,f,g)=>(a++,g.delete()));s.push(l.next(()=>{rt(1===a)}));const c=[];for(const u of e.mutations){const f=zU(t,u.key.path,e.batchId);s.push(r.delete(f)),c.push(u.key)}return he.waitFor(s).next(()=>c)}function Ax(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw et();t=n.noDocument}return JSON.stringify(t).length}us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(41943040,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);class kx{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(t,e,i,r){rt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new kx(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _u(t).J({index:"userMutationsIndex",range:i},(r,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=rm(t),o=_u(t);return o.add({}).next(a=>{rt("number"==typeof a);const l=new uM(a,e,i,r),c=function(v,b,x){const E=x.baseMutations.map(k=>Fv(v.ct,k)),O=x.mutations.map(k=>Fv(v.ct,k));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:E,mutations:O}}(this.serializer,this.userId,l),u=[];let f=new Fn((g,v)=>xt(g.canonicalString(),v.canonicalString()));for(const g of r){const v=zU(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),u.push(o.put(c)),u.push(s.put(v,Ude))}return f.forEach(g=>{u.push(this.indexManager.addToCollectionParentIndex(t,g))}),t.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),he.waitFor(u).next(()=>l)})}lookupMutationBatch(t,e){return _u(t).get(e).next(i=>i?(rt(i.userId===this.userId),lh(this.serializer,i)):null)}vn(t,e){return this.Cn[e]?he.resolve(this.Cn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Cn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return _u(t).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(rt(a.batchId>=i),s=lh(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return _u(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _u(t).U("userMutationsIndex",e).next(i=>i.map(r=>lh(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=cx(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return rm(t).J({range:r},(o,a,l)=>{const[c,u,f]=o,g=Ga(u);if(c===this.userId&&e.path.isEqual(g))return _u(t).get(f).next(v=>{if(!v)throw et();rt(v.userId===this.userId),s.push(lh(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Fn(xt);const r=[];return e.forEach(s=>{const o=cx(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=rm(t).J({range:a},(c,u,f)=>{const[g,v,b]=c,x=Ga(v);g===this.userId&&s.path.isEqual(x)?i=i.add(b):f.done()});r.push(l)}),he.waitFor(r).next(()=>this.Fn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=cx(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Fn(xt);return rm(t).J({range:o},(l,c,u)=>{const[f,g,v]=l,b=Ga(g);f===this.userId&&i.isPrefixOf(b)?b.length===r&&(a=a.add(v)):u.done()}).next(()=>this.Fn(t,a))}Fn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(_u(t).get(s).next(o=>{if(null===o)throw et();rt(o.userId===this.userId),i.push(lh(this.serializer,o))}))}),he.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return DH(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Mn(e.batchId)}),he.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return he.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return rm(t).J({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Ga(s[1]);r.push(l)}else a.done()}).next(()=>{rt(0===r.length)})})}containsKey(t,e){return TH(t,this.userId,e)}xn(t){return SH(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function TH(n,t,e){const i=cx(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return rm(n).J({range:s,H:!0},(a,l,c)=>{const[u,f,g]=a;u===t&&f===r&&(o=!0),c.done()}).next(()=>o)}function _u(n){return Mr(n,"mutations")}function rm(n){return Mr(n,"documentMutations")}function SH(n){return Mr(n,"mutationQueues")}class dh{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new dh(0)}static Ln(){return new dh(-1)}}class Jhe{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Bn(t).next(e=>{const i=new dh(e.highestTargetId);return e.highestTargetId=i.next(),this.kn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(e=>st.fromTimestamp(new hi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.kn(t,r)))}addTargetData(t,e){return this.qn(t,e).next(()=>this.Bn(t).next(i=>(i.targetCount+=1,this.Qn(e,i),this.kn(t,i))))}updateTargetData(t,e){return this.qn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>sm(t).delete(e.targetId)).next(()=>this.Bn(t)).next(i=>(rt(i.targetCount>0),i.targetCount-=1,this.kn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return sm(t).J((o,a)=>{const l=Nv(a);l.sequenceNumber<=e&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(t,l)))}).next(()=>he.waitFor(s)).next(()=>r)}forEachTarget(t,e){return sm(t).J((i,r)=>{const s=Nv(r);e(s)})}Bn(t){return IH(t).get("targetGlobalKey").next(e=>(rt(null!==e),e))}kn(t,e){return IH(t).put("targetGlobalKey",e)}qn(t,e){return sm(t).put(dH(this.serializer,e))}Qn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=ih(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return sm(t).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=Nv(a);Ev(e,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=vu(t);return e.forEach(o=>{const a=ls(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,o))}),he.waitFor(r)}removeMatchingKeys(t,e,i){const r=vu(t);return he.forEach(e,s=>{const o=ls(s.path);return he.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=vu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=vu(t);let s=Mt();return r.J({range:i,H:!0},(o,a,l)=>{const c=Ga(o[1]),u=new He(c);s=s.add(u)}).next(()=>s)}containsKey(t,e){const i=ls(e.path),r=IDBKeyRange.bound([i],[RU(i)],!1,!0);let s=0;return vu(t).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(t,e){return sm(t).get(e).next(i=>i?Nv(i):null)}}function sm(n){return Mr(n,"targets")}function IH(n){return Mr(n,"targetGlobal")}function vu(n){return Mr(n,"targetDocuments")}function AH([n,t],[e,i]){const r=xt(n,e);return 0===r?xt(t,i):r}class efe{constructor(t){this.Kn=t,this.buffer=new Fn(AH),this.$n=0}Un(){return++this.$n}Wn(t){const e=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();AH(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class kH{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(t){var e=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,me.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){lu(i)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield au(i)}yield e.zn(3e5)}))}}class tfe{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.Hn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return he.resolve(_o.oe);const i=new efe(e);return this.jn.forEachTarget(t,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(t,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(EH)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EH):this.Yn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,e){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(t,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(t,i,e))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(f=>(c=Date.now(),jp()<=Wa.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${f} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}class nfe{constructor(t,e){this.db=t,this.garbageCollector=function MH(n,t){return new tfe(n,t)}(this,e)}Hn(t){const e=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Zn(t){let e=0;return this.Jn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Jn(t,e){return this.Xn(t,(i,r)=>e(r))}addReference(t,e,i){return Mx(t,i)}removeReference(t,e,i){return Mx(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Mx(t,e)}er(t,e){return function(r,s){let o=!1;return SH(r).Y(a=>TH(r,a,s).next(l=>(l&&(o=!0),he.resolve(!l)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Xn(t,(o,a)=>{if(a<=e){const l=this.er(t,o).next(c=>{if(!c)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,st.min()),vu(t).delete([0,ls(o.path)])))});r.push(l)}}).next(()=>he.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Mx(t,e)}Xn(t,e){const i=vu(t);let r,s=_o.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==_o.oe&&e(new He(Ga(r)),s),s=c,r=l):s=_o.oe}).next(()=>{s!==_o.oe&&e(new He(Ga(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Mx(n,t){return vu(n).put((r=n.currentSequenceNumber,{targetId:0,path:ls(t.path),sequenceNumber:r}));var r}class RH{constructor(){this.changes=new $l(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ni.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?he.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ife{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return hh(t).put(i)}removeEntry(t,e,i){return hh(t).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Dx(o),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.tr(t,i)))}getEntry(t,e){let i=ni.newInvalidDocument(e);return hh(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(jv(e))},(r,s)=>{i=this.nr(e,s)}).next(()=>i)}rr(t,e){let i={size:0,document:ni.newInvalidDocument(e)};return hh(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(jv(e))},(r,s)=>{i={document:this.nr(e,s),size:Ax(s)}}).next(()=>i)}getEntries(t,e){let i=Zs();return this.ir(t,e,(r,s)=>{const o=this.nr(r,s);i=i.insert(r,o)}).next(()=>i)}sr(t,e){let i=Zs(),r=new qn(He.comparator);return this.ir(t,e,(s,o)=>{const a=this.nr(s,o);i=i.insert(s,a),r=r.insert(s,Ax(o))}).next(()=>({documents:i,_r:r}))}ir(t,e,i){if(e.isEmpty())return he.resolve();let r=new Fn(NH);e.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(jv(r.first()),jv(r.last())),o=r.getIterator();let a=o.getNext();return hh(t).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const f=He.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&NH(a,f)<0;)i(a,null),a=o.getNext();a&&a.isEqual(f)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.$(jv(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,s){const o=e.path,a=[o.popLast().toArray(),o.lastSegment(),Dx(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hh(t).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=Zs();for(const f of c){const g=this.nr(He.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Tv(e,g)||r.has(g.key))&&(u=u.insert(g.key,g))}return u})}getAllFromCollectionGroup(t,e,i,r){let s=Zs();const o=FH(e,i),a=FH(e,go.max());return hh(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const f=this.nr(He.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(t){return new rfe(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return OH(t).get("remoteDocumentGlobalKey").next(e=>(rt(!!e),e))}tr(t,e){return OH(t).put("remoteDocumentGlobalKey",e)}nr(t,e){if(e){const i=function $he(n,t){let e;if(t.document)e=nH(n.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=He.fromSegments(t.noDocument.path),r=ah(t.noDocument.readTime);e=ni.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return et();{const i=He.fromSegments(t.unknownDocument.path),r=ah(t.unknownDocument.version);e=ni.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){const s=new hi(r[0],r[1]);return st.fromTimestamp(s)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(st.min()))return i}return ni.newInvalidDocument(t)}}function PH(n){return new ife(n)}class rfe extends RH{constructor(t,e){super(),this.ar=t,this.trackRemovals=e,this.ur=new $l(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Fn((s,o)=>xt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(e.push(this.ar.removeEntry(t,s,a.readTime)),o.isValidDocument()){const l=uH(this.ar.serializer,o);r=r.add(s.path.popLast());const c=Ax(l);i+=c-a.size,e.push(this.ar.addEntry(t,s,l))}else if(i-=a.size,this.trackRemovals){const l=uH(this.ar.serializer,o.convertToNoDocument(st.min()));e.push(this.ar.addEntry(t,s,l))}}),r.forEach(s=>{e.push(this.ar.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.ar.updateMetadata(t,i)),he.waitFor(e)}getFromCache(t,e){return this.ar.rr(t,e).next(i=>(this.ur.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.ar.sr(t,e).next(({documents:i,_r:r})=>(r.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function OH(n){return Mr(n,"remoteDocumentGlobal")}function hh(n){return Mr(n,"remoteDocumentsV14")}function jv(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function FH(n,t){const e=t.documentKey.path.toArray();return[n,Dx(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function NH(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=xt(e[s],i[s]),r)return r;return r=xt(e.length,i.length),r||(r=xt(e[e.length-2],i[i.length-2]),r||xt(e[e.length-1],i[i.length-1]))}class sfe{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class LH{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&kv(i.mutation,r,Ys.empty(),hi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Mt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Mt()){const r=Za();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=Sv();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Za();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Mt()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=Zs();const o=Iv(),a=Iv();return e.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof Wl)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),kv(u.mutation,c,u.mutation.getFieldMask(),hi.now())):o.set(c.key,Ys.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),e.forEach((c,u)=>{var f;return a.set(c,new sfe(u,null!==(f=o.get(c))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(t,e){const i=Iv();let r=new qn((o,a)=>o-a),s=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=e.get(l);if(null===c)return;let u=i.get(l)||Ys.empty();u=a.applyToLocalView(c,u),i.set(l,u);const f=(r.get(a.batchId)||Mt()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=Dz();u.forEach(g=>{if(!s.has(g)){const v=Oz(e.get(g),i.get(g));null!==v&&f.set(g,v),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return he.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return He.isDocumentKey((o=e).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):oM(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r);var o}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):he.resolve(Za());let a=-1,l=s;return o.next(c=>he.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?he.resolve():this.remoteDocumentCache.getEntry(t,u).next(g=>{l=l.insert(u,g)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,Mt())).next(u=>({batchId:a,changes:Ez(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new He(e)).next(i=>{let r=Sv();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const s=e.collectionGroup;let o=Sv();return this.indexManager.getCollectionParents(t,s).next(a=>he.forEach(a,l=>{const c=(f=e,g=l.child(s),new Hl(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,g;return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,ni.newInvalidDocument(u)))});let a=Sv();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&kv(u.mutation,c,Ys.empty(),hi.now()),Tv(e,c)&&(a=a.insert(l,c))}),a})}}class ofe{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return he.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,{id:(r=e).id,version:r.version,createTime:Zi(r.createTime)}),he.resolve();var r}getNamedQuery(t,e){return he.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,{name:(r=e).name,query:yM(r.bundledQuery),readTime:Zi(r.readTime)}),he.resolve();var r}}class afe{constructor(){this.overlays=new qn(He.comparator),this.hr=new Map}getOverlay(t,e){return he.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Za();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),he.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.hr.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),he.resolve()}getOverlaysForCollection(t,e,i){const r=Za(),s=e.length+1,o=new He(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return he.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new qn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>i){let u=s.get(c.largestBatchId);null===u&&(u=Za(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Za(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return he.resolve(a)}ht(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new hM(e,i));let s=this.hr.get(e);void 0===s&&(s=Mt(),this.hr.set(e,s)),this.hr.set(e,s.add(i.key))}}class TM{constructor(){this.Pr=new Fn(Rr.Ir),this.Tr=new Fn(Rr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const i=new Rr(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new Rr(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){const e=new He(new Kt([])),i=new Rr(e,t),r=new Rr(e,t+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new He(new Kt([])),i=new Rr(e,t),r=new Rr(e,t+1);let s=Mt();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Rr(t,0),i=this.Pr.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Rr{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return He.comparator(t.key,e.key)||xt(t.pr,e.pr)}static Er(t,e){return xt(t.pr,e.pr)||He.comparator(t.key,e.key)}}class lfe{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Fn(Rr.Ir)}checkEmpty(t){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.yr;this.yr++;const o=new uM(s,e,i,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new Rr(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return he.resolve(o)}lookupMutationBatch(t,e){return he.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.br(e+1),s=r<0?0:r;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Rr(e,0),r=new Rr(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{const a=this.Sr(o.pr);s.push(a)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Fn(xt);return e.forEach(r=>{const s=new Rr(r,0),o=new Rr(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),he.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;He.isDocumentKey(s)||(s=s.child(""));const o=new Rr(new He(s),0);let a=new Fn(xt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.pr)),!0)},o),he.resolve(this.Dr(a))}Dr(t){const e=[];return t.forEach(i=>{const r=this.Sr(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){rt(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let i=this.wr;return he.forEach(e.mutations,r=>{const s=new Rr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){const i=new Rr(e,0),r=this.wr.firstAfterOrEqual(i);return he.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return he.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class cfe{constructor(t){this.vr=t,this.docs=new qn(He.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return he.resolve(i?i.document.mutableCopy():ni.newInvalidDocument(e))}getEntries(t,e){let i=Zs();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ni.newInvalidDocument(r))}),he.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=Zs();const o=e.path,a=new He(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Kk(OU(u),i)<=0||(r.has(u.key)||Tv(e,u))&&(s=s.insert(u.key,u.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(t,e,i,r){et()}Fr(t,e){return he.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new ufe(this)}getSize(t){return he.resolve(this.size)}}class ufe extends RH{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),he.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class dfe{constructor(t){this.persistence=t,this.Mr=new $l(e=>ih(e),Ev),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.Or=0,this.Nr=new TM,this.targetCount=0,this.Lr=dh.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),he.resolve()}getLastRemoteSnapshotVersion(t){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return he.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),he.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new dh(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,he.resolve()}updateTargetData(t,e){return this.qn(e),he.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,he.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=e&&null===i.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),he.waitFor(s).next(()=>r)}getTargetCount(t){return he.resolve(this.targetCount)}getTargetData(t,e){const i=this.Mr.get(e)||null;return he.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),he.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),he.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),he.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Nr.gr(e);return he.resolve(i)}containsKey(t,e){return he.resolve(this.Nr.containsKey(e))}}class SM{constructor(t,e){this.Br={},this.overlays={},this.kr=new _o(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new dfe(this),this.indexManager=new Qhe,this.remoteDocumentCache=new cfe(i=>this.referenceDelegate.Kr(i)),this.serializer=new cH(e),this.$r=new ofe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new afe,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new lfe(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){Me("MemoryPersistence","Starting transaction:",t);const r=new hfe(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return he.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}}class hfe extends NU{constructor(t){super(),this.currentSequenceNumber=t}}class Rx{constructor(t){this.persistence=t,this.zr=new TM,this.jr=null}static Hr(t){return new Rx(t)}get Jr(){if(this.jr)return this.jr;throw et()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),he.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),he.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),he.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Jr,i=>{const r=He.fromPath(i);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,st.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return he.or([()=>he.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class ffe{constructor(t){this.serializer=t}O(t,e,i,r){const s=new lx("createOrUpgrade",e);var l;i<1&&r>=1&&(t.createObjectStore("owner"),(l=t).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UU,{unique:!0}),l.createObjectStore("documentMutations"),VH(t),function(l){l.createObjectStore("remoteDocuments")}(t));let o=he.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),VH(t)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:st.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UU,{unique:!0});const f=c.store("mutations"),g=u.map(v=>f.put(v));return he.waitFor(g)})}(t,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(o=o.next(()=>this.Xr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.ei(s)))),i<7&&r>=7&&(o=o.next(()=>this.ti(s))),i<8&&r>=8&&(o=o.next(()=>this.ni(t,s))),i<9&&r>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(o=o.next(()=>this.ri(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Jde});c.createIndex("collectionPathOverlayIndex",ehe,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",the,{unique:!1})}(t)})),i<13&&r>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:zde});c.createIndex("documentKeyIndex",Hde),c.createIndex("collectionGroupIndex",$de)}(t)).next(()=>this.ii(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(t,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Zde}).createIndex("sequenceNumberIndex",Kde,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Qde}).createIndex("documentKeyIndex",Xde,{unique:!1})}(t))),i<16&&r>=16&&(o=o.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),o}ei(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=Ax(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(r=>he.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>he.forEach(a,l=>{rt(l.userId===s.userId);const c=lh(this.serializer,l);return DH(t,s.userId,c).next(()=>{})}))}))}ti(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((o,a)=>{const l=new Kt(o),c=[0,ls(l)];s.push(e.get(c).next(u=>u?he.resolve():e.put({targetId:0,path:ls(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}ni(t,e){t.createObjectStore("collectionParents",{keyPath:Yde});const i=e.store("collectionParents"),r=new DM,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:ls(l)})}};return e.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Kt(o);return s(l.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Ga(a);return s(u.popLast())}))}ri(t){const e=t.store("targets");return e.J((i,r)=>{const s=Nv(r),o=dH(this.serializer,s);return e.put(o)})}ii(t,e){const i=e.store("remoteDocuments"),r=[];return i.J((s,o)=>{const a=e.store("remoteDocumentsV14"),l=(f=o,f.document?new He(Kt.fromString(f.document.name).popFirst(5)):f.noDocument?He.fromSegments(f.noDocument.path):f.unknownDocument?He.fromSegments(f.unknownDocument.path):et()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var f;r.push(a.put(c))}).next(()=>he.waitFor(r))}si(t,e){const i=e.store("mutations"),r=PH(this.serializer),s=new SM(Rx.Hr,this.serializer.ct);return i.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Mt();lh(this.serializer,l).keys().forEach(f=>u=u.add(f)),a.set(l.userId,u)}),he.forEach(a,(l,c)=>{const u=new kr(c),f=Tx.lt(this.serializer,u),g=s.getIndexManager(u),v=kx.lt(u,this.serializer,g,s.referenceDelegate);return new LH(r,v,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Jk(e,_o.oe),l).next()})})}}function VH(n){n.createObjectStore("targetDocuments",{keyPath:qde}).createIndex("documentTargetsIndex",Gde,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wde,{unique:!0}),n.createObjectStore("targetGlobal")}const IM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AM{constructor(t,e,i,r,s,o,a,l,c,u,f=16){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=u,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!AM.D())throw new Ie(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nfe(this,r),this.Ti=e+"main",this.serializer=new cH(l),this.Ei=new qa(this.Ti,this.ui,new ffe(this.serializer)),this.Qr=new Jhe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PH(this.serializer),this.$r=new Whe,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Yi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(pe.FAILED_PRECONDITION,IM);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new _o(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){var e=this;return this.Ii=function(){var i=(0,me.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.L(function(){var e=(0,me.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget((0,me.Z)(function*(){e.started&&(yield e.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ox(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(e=>this.isPrimary&&!e?this.yi(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(lu(t))return Me("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return Uv(t).get("owner").next(e=>he.resolve(this.Si(e)))}bi(t){return Ox(t).delete(this.clientId)}Di(){var t=this;return(0,me.Z)(function*(){if(t.isPrimary&&!t.Ci(t.Pi,18e5)){t.Pi=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Mr(i,"clientMetadata");return r.U().next(s=>{const o=t.vi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return he.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(t.di)for(const i of e)t.di.removeItem(t.Fi(i.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?he.resolve(!0):Uv(t).get("owner").next(e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)){if(this.Si(e)&&this.networkEnabled)return!0;if(!this.Si(e)){if(!e.allowTabSynchronization)throw new Ie(pe.FAILED_PRECONDITION,IM);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ox(t).U().next(i=>void 0===this.vi(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Me("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,me.Z)(function*(){t.qr=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Oi(),t.Ni(),yield t.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new Jk(e,_o.oe);return t.yi(i).next(()=>t.bi(i))}),t.Ei.close(),t.Li()})()}vi(t,e){return t.filter(i=>this.Ci(i.updateTimeMs,e)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>Ox(t).U().next(e=>this.vi(e,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(t,e){return kx.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Xhe(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Tx.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,e,i){Me("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=16===(l=this.ui)?ihe:15===l?qU:14===l?WU:13===l?$U:12===l?nhe:11===l?HU:void et();var l;let o;return this.Ei.runTransaction(t,r,s,a=>(o=new Jk(a,this.kr?this.kr.next():_o.oe),"readwrite-primary"===e?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw Yi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ie(pe.FAILED_PRECONDITION,FU);return i(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(t){return Uv(t).get("owner").next(e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ie(pe.FAILED_PRECONDITION,IM)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uv(t).put("owner",e)}static D(){return qa.D()}yi(t){const e=Uv(t);return e.get("owner").next(i=>this.Si(i)?(Me("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):he.resolve())}Ci(t,e){const i=Date.now();return!(t<i-e||t>i&&(Yi(`Detected an update time that is in the future: ${t} > ${i}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,yn.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var e;try{const i=null!==(null===(e=this.di)||void 0===e?void 0:e.getItem(this.Fi(t)));return Me("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Yi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){Yi("Failed to set zombie client id.",t)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Uv(n){return Mr(n,"owner")}function Ox(n){return Mr(n,"clientMetadata")}function kM(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class MM{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=Mt(),r=Mt();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new MM(t,e.fromCache,i,r)}}class pfe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class BH{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,yn.G6)()?8:LU((0,yn.z$)())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new pfe;return this.Ji(t,e,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,e,o,a.size)})}).next(()=>s.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(jp()<=Wa.in.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Zp(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),he.resolve()):(jp()<=Wa.in.DEBUG&&Me("QueryEngine","Query:",Zp(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(jp()<=Wa.in.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Zp(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,cs(e))):he.resolve())}ji(t,e){if(_z(e))return he.resolve(null);let i=cs(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=vx(e,null,"F"),i=cs(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=Mt(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.Zi(e,a);return this.Xi(e,c,o,l.readTime)?this.ji(t,vx(e,null,"F")):this.es(t,c,e,l)}))})))}Hi(t,e,i,r){return _z(e)||r.isEqual(st.min())?he.resolve(null):this.zi.getDocuments(t,i).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,i,r)?he.resolve(null):(jp()<=Wa.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zp(e)),this.es(t,o,e,PU(r,-1)).next(a=>a))})}Zi(t,e){let i=new Fn(Cz(t));return e.forEach((r,s)=>{Tv(t,s)&&(i=i.add(s))}),i}Xi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,i){return jp()<=Wa.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Zp(e)),this.zi.getDocumentsMatchingQuery(t,e,go.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}class mfe{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new qn(xt),this.rs=new $l(s=>ih(s),Ev),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new LH(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function jH(n,t,e,i){return new mfe(n,t,e,i)}function UH(n,t){return RM.apply(this,arguments)}function RM(){return RM=(0,me.Z)(function*(n,t){const e=Ue(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Mt();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}),RM.apply(this,arguments)}function zH(n){const t=Ue(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function HH(n,t,e){let i=Mt(),r=Mt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=Zs();return e.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(st.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:r}})}function vfe(n,t){const e=Ue(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function om(n,t){const e=Ue(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(s=>s?(r=s,he.resolve(r)):e.Qr.allocateTargetId(i).next(o=>(r=new ql(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ns.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function am(n,t,e){return PM.apply(this,arguments)}function PM(){return PM=(0,me.Z)(function*(n,t,e){const i=Ue(n),r=i.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!lu(o))throw o;Me("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)}),PM.apply(this,arguments)}function Fx(n,t,e){const i=Ue(n);let r=st.min(),s=Mt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Ue(l),g=f.rs.get(u);return void 0!==g?he.resolve(f.ns.get(g)):f.Qr.getTargetData(c,u)}(i,o,cs(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,e?r:st.min(),e?s:Mt())).next(a=>(qH(i,wz(t),a),{documents:a,hs:s})))}function $H(n,t){const e=Ue(n),i=Ue(e.Qr),r=e.ns.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,t).next(o=>o?o.target:null))}function WH(n,t){const e=Ue(n),i=e.ss.get(t)||st.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.os.getAllFromCollectionGroup(r,t,PU(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(qH(e,t,r),r))}function qH(n,t,e){let i=n.ss.get(t)||st.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(t,i)}function OM(){return OM=(0,me.Z)(function*(n,t,e,i){const r=Ue(n);let s=Mt(),o=Zs();for(const c of e){const u=t.Ps(c.metadata.name);c.document&&(s=s.add(u));const f=t.Is(c);f.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(u,f)}const a=r.os.newChangeBuffer({trackRemovals:!0}),l=yield om(r,(u=i,cs(Gp(Kt.fromString(`__bundle__/docs/${u}`)))));var u;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>HH(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.cs,u.ls)).next(()=>u.cs)))}),OM.apply(this,arguments)}function bfe(n,t){return FM.apply(this,arguments)}function FM(){return FM=(0,me.Z)(function*(n,t,e=Mt()){const i=yield om(n,cs(yM(t.bundledQuery))),r=Ue(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=Zi(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.$r.saveNamedQuery(s,t);const a=i.withResumeToken(wr.EMPTY_BYTE_STRING,o);return r.ns=r.ns.insert(a.targetId,a),r.Qr.updateTargetData(s,a).next(()=>r.Qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Qr.addMatchingKeys(s,e,i.targetId)).next(()=>r.$r.saveNamedQuery(s,t))})}),FM.apply(this,arguments)}function GH(n,t){return`firestore_clients_${n}_${t}`}function YH(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function NM(n,t){return`firestore_targets_${n}_${t}`}class Nx{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Es(t,e,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new Ie(r.error.code,r.error.message))),o?new Nx(t,e,r.state,s):(Yi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class zv{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Es(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ie(i.error.code,i.error.message))),s?new zv(t,i.state,r):(Yi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Lx{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Es(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=lM();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=BU(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new Lx(t,s):(Yi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class LM{constructor(t,e){this.clientId=t,this.onlineState=e}static Es(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new LM(e.clientId,e.onlineState):(Yi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class VM{constructor(){this.activeTargetIds=lM()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class BM{constructor(t,e,i,r,s){this.window=t,this.oi=e,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new qn(xt),this.started=!1,this.ys=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=GH(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new VM),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,me.Z)(function*(){const e=yield t.syncEngine.Bi();for(const r of e){if(r===t.Vs)continue;const s=t.getItem(GH(t.persistenceKey,r));if(s){const o=Lx.Es(r,s);o&&(t.ps=t.ps.insert(o.clientId,o))}}t.Ms();const i=t.storage.getItem(t.vs);if(i){const r=t.xs(i);r&&t.Os(r)}for(const r of t.ys)t.gs(r);t.ys=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let e=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Ls(t,"pending")}updateMutationState(t,e,i){this.Ls(t,e,i),this.Bs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(NM(this.persistenceKey,t));if(i){const r=zv.Es(t,i);r&&(e=r.state)}}return this.ks.As(t),this.Ms(),e}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(NM(this.persistenceKey,t))}updateQueryState(t,e,i){this.qs(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Bs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Me("SharedClientState","READ",t,e),e}setItem(t,e){Me("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Me("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Me("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ws)return void Yi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,me.Z)(function*(){if(e.started){if(null!==i.key)if(e.bs.test(i.key)){if(null==i.newValue){const r=e.$s(i.key);return e.Us(r,null)}{const r=e.Ws(i.key,i.newValue);if(r)return e.Us(r.clientId,r)}}else if(e.Ds.test(i.key)){if(null!==i.newValue){const r=e.Gs(i.key,i.newValue);if(r)return e.zs(r)}}else if(e.Cs.test(i.key)){if(null!==i.newValue){const r=e.js(i.key,i.newValue);if(r)return e.Hs(r)}}else if(i.key===e.vs){if(null!==i.newValue){const r=e.xs(i.newValue);if(r)return e.Os(r)}}else if(i.key===e.Ss){const r=function(o){let a=_o.oe;if(null!=o)try{const l=JSON.parse(o);rt("number"==typeof l),a=l}catch(l){Yi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==_o.oe&&e.sequenceNumberHandler(r)}else if(i.key===e.Fs){const r=e.Js(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Ys(s)))}}else e.ys.push(i)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(t,e,i){const r=new Nx(this.currentUser,t,e,i),s=YH(this.persistenceKey,this.currentUser,t);this.setItem(s,r.ds())}Bs(t){const e=YH(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Qs(t){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:t}))}qs(t,e,i){const r=NM(this.persistenceKey,t),s=new zv(t,e,i);this.setItem(r,s.ds())}Ks(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Fs,e)}$s(t){const e=this.bs.exec(t);return e?e[1]:null}Ws(t,e){const i=this.$s(t);return Lx.Es(i,e)}Gs(t,e){const i=this.Ds.exec(t),r=Number(i[1]);return Nx.Es(new kr(void 0!==i[2]?i[2]:null),r,e)}js(t,e){const i=this.Cs.exec(t),r=Number(i[1]);return zv.Es(r,e)}xs(t){return LM.Es(t)}Js(t){return JSON.parse(t)}zs(t){var e=this;return(0,me.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Zs(t.batchId,t.state,t.error);Me("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,e){const i=e?this.ps.insert(t,e):this.ps.remove(t),r=this.Ns(this.ps),s=this.Ns(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=i})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let e=lM();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class ZH{constructor(){this.no=new VM,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new VM,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class wfe{io(t){}shutdown(){}}class KH{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vx=null;function jM(){return null===Vx?Vx=268435456+Math.round(2147483648*Math.random()):Vx++,"0x"+Vx.toString(16)}const Cfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xfe{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}const ds="WebChannelConnection";class Efe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,i,r,s,o){const a=jM(),l=this.vo(e,i.toUriEncodedString());Me("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,l,c,r).then(u=>(Me("RestConnection",`Received RPC '${e}' ${a}: `,u),u),u=>{throw Gs("RestConnection",`RPC '${e}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}xo(e,i,r,s,o,a){return this.Co(e,i,r,s,o)}Fo(e,i,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,i){return`${this.wo}/v1/${i}:${Cfe[e]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,i,r){const s=jM();return new Promise((o,a)=>{const l=new CU;l.setWithCredentials(!0),l.listenOnce(EU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ax.NO_ERROR:const u=l.getResponseJson();Me(ds,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case ax.TIMEOUT:Me(ds,`RPC '${t}' ${s} timed out`),a(new Ie(pe.DEADLINE_EXCEEDED,"Request time out"));break;case ax.HTTP_ERROR:const f=l.getStatus();if(Me(ds,`RPC '${t}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g?.error;if(v&&v.status&&v.message){const b=function(E){const O=E.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(O)>=0?O:pe.UNKNOWN}(v.status);a(new Ie(b,v.message))}else a(new Ie(pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ie(pe.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Me(ds,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);Me(ds,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",c,i,15)})}Oo(t,e,i){const r=jM(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=SU(),a=TU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new xU({})),this.Fo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;const u=s.join("");Me(ds,`Creating RPC '${t}' stream ${r}: ${u}`,l);const f=o.createWebChannel(u,l);let g=!1,v=!1;const b=new xfe({lo:E=>{v?Me(ds,`Not sending because RPC '${t}' stream ${r} is closed:`,E):(g||(Me(ds,`Opening RPC '${t}' stream ${r} transport.`),f.open(),g=!0),Me(ds,`RPC '${t}' stream ${r} sending:`,E),f.send(E))},ho:()=>f.close()}),x=(E,O,k)=>{E.listen(O,F=>{try{k(F)}catch(q){setTimeout(()=>{throw q},0)}})};return x(f,pv.EventType.OPEN,()=>{v||(Me(ds,`RPC '${t}' stream ${r} transport opened.`),b.mo())}),x(f,pv.EventType.CLOSE,()=>{v||(v=!0,Me(ds,`RPC '${t}' stream ${r} transport closed`),b.po())}),x(f,pv.EventType.ERROR,E=>{v||(v=!0,Gs(ds,`RPC '${t}' stream ${r} transport errored:`,E),b.po(new Ie(pe.UNAVAILABLE,"The operation could not be completed")))}),x(f,pv.EventType.MESSAGE,E=>{var O;if(!v){const k=E.data[0];rt(!!k);const q=k.error||(null===(O=k[0])||void 0===O?void 0:O.error);if(q){Me(ds,`RPC '${t}' stream ${r} received error:`,q);const K=q.status;let re=function(N){const $=cr[N];if(void 0!==$)return Uz($)}(K),B=q.message;void 0===re&&(re=pe.INTERNAL,B="Unknown error status: "+K+" with message "+q.message),v=!0,b.po(new Ie(re,B)),f.close()}else Me(ds,`RPC '${t}' stream ${r} received:`,k),b.yo(k)}}),x(a,DU.STAT_EVENT,E=>{E.stat===Gk.PROXY?Me(ds,`RPC '${t}' stream ${r} detected buffering proxy`):E.stat===Gk.NOPROXY&&Me(ds,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}}function QH(){return typeof window<"u"?window:null}function Bx(){return typeof document<"u"?document:null}function Hv(n){return new Ohe(n,!0)}class UM{constructor(t,e,i=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-i);r>0&&Me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class XH{constructor(t,e,i,r,s,o,a,l){this.oi=t,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new UM(t,e)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var t=this;return(0,me.Z)(function*(){t.Zo()&&(yield t.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){var t=this;return(0,me.Z)(function*(){if(t.Xo())return t.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){var i=this;return(0,me.Z)(function*(){i.s_(),i.o_(),i.Yo.cancel(),i.jo++,4!==t?i.Yo.reset():e&&e.code===pe.RESOURCE_EXHAUSTED?(Yi(e.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),i.Yo.Ko()):e&&e.code===pe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.__(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Ao(e)})()}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===e&&this.u_(i,r)},i=>{t(()=>{const r=new Ie(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(t,e){const i=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){var t=this;this.state=5,this.Yo.$o((0,me.Z)(function*(){t.state=0,t.start()}))}c_(t){return Me("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dfe extends XH{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=function Lhe(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(c=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:et(),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(rt(void 0===u||"string"==typeof u),wr.fromBase64String(u||"")):(rt(void 0===u||u instanceof Buffer||u instanceof Uint8Array),wr.fromUint8Array(u||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=void 0===c.code?pe.UNKNOWN:Uz(c.code);return new Ie(u,c.message||"")}(o);e=new qz(i,r,s,a||null)}else if("documentChange"in t){const i=t.documentChange,r=Ka(n,i.document.name),s=Zi(i.document.updateTime),o=i.document.createTime?Zi(i.document.createTime):st.min(),a=new zr({mapValue:{fields:i.document.fields}}),l=ni.newFoundDocument(r,s,o,a);e=new xx(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){const i=t.documentDelete,r=Ka(n,i.document),s=i.readTime?Zi(i.readTime):st.min(),o=ni.newNoDocument(r,s);e=new xx([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const i=t.documentRemove,r=Ka(n,i.document);e=new xx([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return et();{const i=t.filter,{count:r=0,unchangedNames:s}=i,o=new Ihe(r,s);e=new Wz(i.targetId,o)}}var c;return e}(this.serializer,t),i=function(s){if(!("targetChange"in s))return st.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?st.min():o.readTime?Zi(o.readTime):st.min()}(t);return this.listener.h_(e,i)}P_(t){const e={};e.database=_M(this.serializer),e.addTarget=function(s,o){let a;const l=o.target;if(a=gx(l)?{documents:iH(s,l)}:{query:Ex(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Kz(s,o.resumeToken);const c=pM(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(st.min())>0){a.readTime=em(s,o.snapshotVersion.toTimestamp());const c=pM(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,t);const i=function Bhe(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.i_(e)}I_(t){const e={};e.database=_M(this.serializer),e.removeTarget=t,this.i_(e)}}class Tfe extends XH{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(rt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=function Vhe(n,t){return n&&n.length>0?(rt(void 0!==t),n.map(e=>function(r,s){let o=Zi(r.updateTime?r.updateTime:s);return o.isEqual(st.min())&&(o=Zi(s)),new Dhe(o,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Zi(t.commitTime);return this.listener.A_(i,e)}return rt(!t.writeResults||0===t.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=_M(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Fv(this.serializer,i))};this.i_(e)}}class Sfe extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,gM(e,i),r,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(pe.UNKNOWN,s.toString())})}xo(t,e,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,gM(e,i),r,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(pe.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Ife{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,"Online"===t&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Yi(e),this.y_=!1):Me("OnlineStateTracker",e)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Afe{constructor(t,e,i,r,s){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{i.enqueueAndForget((0,me.Z)(function*(){var l;yu(o)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,me.Z)(function*(u){const f=Ue(u);f.M_.add(4),yield lm(f),f.N_.set("Unknown"),f.M_.delete(4),yield $v(f)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.N_=new Ife(i,r)}}function $v(n){return zM.apply(this,arguments)}function zM(){return zM=(0,me.Z)(function*(n){if(yu(n))for(const t of n.x_)yield t(!0)}),zM.apply(this,arguments)}function lm(n){return HM.apply(this,arguments)}function HM(){return HM=(0,me.Z)(function*(n){for(const t of n.x_)yield t(!1)}),HM.apply(this,arguments)}function jx(n,t){const e=Ue(n);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),qM(e)?WM(e):dm(e).Xo()&&$M(e,t))}function cm(n,t){const e=Ue(n),i=dm(e);e.F_.delete(t),i.Xo()&&JH(e,t),0===e.F_.size&&(i.Xo()?i.n_():yu(e)&&e.N_.set("Unknown"))}function $M(n,t){if(n.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(st.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}dm(n).P_(t)}function JH(n,t){n.L_.xe(t),dm(n).I_(t)}function WM(n){n.L_=new khe({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.F_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),dm(n).start(),n.N_.w_()}function qM(n){return yu(n)&&!dm(n).Zo()&&n.F_.size>0}function yu(n){return 0===Ue(n).M_.size}function e6(n){n.L_=void 0}function kfe(n){return GM.apply(this,arguments)}function GM(){return(GM=(0,me.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function Mfe(n){return YM.apply(this,arguments)}function YM(){return YM=(0,me.Z)(function*(n){n.F_.forEach((t,e)=>{$M(n,t)})}),YM.apply(this,arguments)}function Rfe(n,t){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,me.Z)(function*(n,t){e6(n),qM(n)?(n.N_.D_(t),WM(n)):n.N_.set("Unknown")}),ZM.apply(this,arguments)}function Pfe(n,t,e){return KM.apply(this,arguments)}function KM(){return KM=(0,me.Z)(function*(n,t,e){if(n.N_.set("Online"),t instanceof qz&&2===t.state&&t.cause)try{yield(i=(0,me.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.F_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.F_.delete(l),s.L_.removeTarget(l))}),function r(s,o){return i.apply(this,arguments)})(n,t)}catch(i){Me("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Ux(n,i)}else if(t instanceof xx?n.L_.Ke(t):t instanceof Wz?n.L_.He(t):n.L_.We(t),!e.isEqual(st.min()))try{const i=yield zH(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.F_.get(c);u&&s.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.F_.get(l);if(!u)return;s.F_.set(l,u.withResumeToken(wr.EMPTY_BYTE_STRING,u.snapshotVersion)),JH(s,l);const f=new ql(u.target,l,c,u.sequenceNumber);$M(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){Me("RemoteStore","Failed to raise snapshot:",i),yield Ux(n,i)}var i}),KM.apply(this,arguments)}function Ux(n,t,e){return QM.apply(this,arguments)}function QM(){return QM=(0,me.Z)(function*(n,t,e){if(!lu(t))throw t;n.M_.add(1),yield lm(n),n.N_.set("Offline"),e||(e=()=>zH(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield e(),n.M_.delete(1),yield $v(n)}))}),QM.apply(this,arguments)}function t6(n,t){return t().catch(e=>Ux(n,e,t))}function um(n){return XM.apply(this,arguments)}function XM(){return XM=(0,me.Z)(function*(n){const t=Ue(n),e=bu(t);let i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Ofe(t);)try{const r=yield vfe(t.localStore,i);if(null===r){0===t.v_.length&&e.n_();break}i=r.batchId,Ffe(t,r)}catch(r){yield Ux(t,r)}n6(t)&&i6(t)}),XM.apply(this,arguments)}function Ofe(n){return yu(n)&&n.v_.length<10}function Ffe(n,t){n.v_.push(t);const e=bu(n);e.Xo()&&e.E_&&e.d_(t.mutations)}function n6(n){return yu(n)&&!bu(n).Zo()&&n.v_.length>0}function i6(n){bu(n).start()}function Nfe(n){return JM.apply(this,arguments)}function JM(){return(JM=(0,me.Z)(function*(n){bu(n).V_()})).apply(this,arguments)}function Lfe(n){return e1.apply(this,arguments)}function e1(){return e1=(0,me.Z)(function*(n){const t=bu(n);for(const e of n.v_)t.d_(e.mutations)}),e1.apply(this,arguments)}function Vfe(n,t,e){return t1.apply(this,arguments)}function t1(){return t1=(0,me.Z)(function*(n,t,e){const i=n.v_.shift(),r=dM.from(i,t,e);yield t6(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield um(n)}),t1.apply(this,arguments)}function Bfe(n,t){return n1.apply(this,arguments)}function n1(){return n1=(0,me.Z)(function*(n,t){var e;t&&bu(n).E_&&(yield(e=(0,me.Z)(function*(r,s){if(jz(a=s.code)&&a!==pe.ABORTED){const o=r.v_.shift();bu(r).t_(),yield t6(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield um(r)}var a}),function i(r,s){return e.apply(this,arguments)})(n,t)),n6(n)&&i6(n)}),n1.apply(this,arguments)}function r6(n,t){return r1.apply(this,arguments)}function r1(){return r1=(0,me.Z)(function*(n,t){const e=Ue(n);e.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const i=yu(e);e.M_.add(3),yield lm(e),i&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield $v(e)}),r1.apply(this,arguments)}function s1(n,t){return o1.apply(this,arguments)}function o1(){return o1=(0,me.Z)(function*(n,t){const e=Ue(n);t?(e.M_.delete(2),yield $v(e)):t||(e.M_.add(2),yield lm(e),e.N_.set("Unknown"))}),o1.apply(this,arguments)}function dm(n){return n.B_||(n.B_=function(e,i,r){const s=Ue(e);return s.f_(),new Dfe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:kfe.bind(null,n),To:Mfe.bind(null,n),Ao:Rfe.bind(null,n),h_:Pfe.bind(null,n)}),n.x_.push(function(){var t=(0,me.Z)(function*(e){e?(n.B_.t_(),qM(n)?WM(n):n.N_.set("Unknown")):(yield n.B_.stop(),e6(n))});return function(e){return t.apply(this,arguments)}}())),n.B_}function bu(n){return n.k_||(n.k_=function(e,i,r){const s=Ue(e);return s.f_(),new Tfe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:Nfe.bind(null,n),Ao:Bfe.bind(null,n),R_:Lfe.bind(null,n),A_:Vfe.bind(null,n)}),n.x_.push(function(){var t=(0,me.Z)(function*(e){e?(n.k_.t_(),yield um(n)):(yield n.k_.stop(),n.v_.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(e){return t.apply(this,arguments)}}())),n.k_}class a1{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){const o=Date.now()+i,a=new a1(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(n,t){if(Yi("AsyncQueue",`${t}: ${n}`),lu(n))return new Ie(pe.UNAVAILABLE,`${t}: ${n}`);throw n}class fm{constructor(t){this.comparator=t?(e,i)=>t(e,i)||He.comparator(e.key,i.key):(e,i)=>He.comparator(e.key,i.key),this.keyedMap=Sv(),this.sortedSet=new qn(this.comparator)}static emptySet(t){return new fm(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof fm)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new fm;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class s6{constructor(){this.q_=new qn(He.comparator)}track(t){const e=t.doc.key,i=this.q_.get(e);i?0!==t.type&&3===i.type?this.q_=this.q_.insert(e,t):3===t.type&&1!==i.type?this.q_=this.q_.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.q_=this.q_.remove(e):1===t.type&&2===i.type?this.q_=this.q_.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):et():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,i)=>{t.push(i)}),t}}class pm{constructor(t,e,i,r,s,o,a,l,c){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,i,r,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new pm(t,e,fm.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Dv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class jfe{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Ufe{constructor(){this.queries=new $l(t=>bz(t),Dv),this.onlineState="Unknown",this.z_=new Set}}function l1(n,t){return c1.apply(this,arguments)}function c1(){return c1=(0,me.Z)(function*(n,t){const e=Ue(n);let i=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new jfe,i=t.G_()?0:1);try{switch(i){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){const a=hm(o,`Initialization of query '${Zp(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&h1(e)}),c1.apply(this,arguments)}function u1(n,t){return d1.apply(this,arguments)}function d1(){return d1=(0,me.Z)(function*(n,t){const e=Ue(n),i=t.query;let r=3;const s=e.queries.get(i);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),0===s.U_.length?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}),d1.apply(this,arguments)}function zfe(n,t){const e=Ue(n);let i=!1;for(const r of t){const o=e.queries.get(r.query);if(o){for(const a of o.U_)a.H_(r)&&(i=!0);o.K_=r}}i&&h1(e)}function Hfe(n,t,e){const i=Ue(n),r=i.queries.get(t);if(r)for(const s of r.U_)s.onError(e);i.queries.delete(t)}function h1(n){n.z_.forEach(t=>{t.next()})}var f1,o6;(o6=f1||(f1={})).J_="default",o6.Cache="cache";class p1{constructor(t,e,i){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new pm(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){return!t.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ea(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(t){t=pm.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==f1.Cache}}class $fe{constructor(t,e){this.ia=t,this.byteLength=e}sa(){return"metadata"in this.ia}}class a6{constructor(t){this.serializer=t}Ps(t){return Ka(this.serializer,t)}Is(t){return t.metadata.exists?nH(this.serializer,t.document,!1):ni.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return Zi(t)}}class Wfe{constructor(t,e,i){this.oa=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=l6(t)}_a(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ia.namedQuery)this.queries.push(t.ia.namedQuery);else if(t.ia.documentMetadata){this.documents.push({metadata:t.ia.documentMetadata}),t.ia.documentMetadata.exists||++e;const i=Kt.fromString(t.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ia.document&&(this.documents[this.documents.length-1].document=t.ia.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}aa(t){const e=new Map,i=new a6(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.Ps(r.metadata.name);for(const o of r.metadata.queries){const a=(e.get(o)||Mt()).add(s);e.set(o,a)}}return e}complete(){var t=this;return(0,me.Z)(function*(){const e=yield function yfe(n,t,e,i){return OM.apply(this,arguments)}(t.localStore,new a6(t.serializer),t.documents,t.oa.id),i=t.aa(t.documents);for(const r of t.queries)yield bfe(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,ua:t.collectionGroups,ca:e}})()}}function l6(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class c6{constructor(t){this.key=t}}class u6{constructor(t){this.key=t}}class d6{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Mt(),this.mutatedKeys=Mt(),this.Ia=Cz(t),this.Ta=new fm(this.Ia)}get Ea(){return this.la}da(t,e){const i=e?e.Aa:new s6,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,f)=>{const g=r.get(u),v=Tv(this.query,f)?f:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let E=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(i.track({type:3,doc:v}),E=!0):this.Ra(g,v)||(i.track({type:2,doc:v}),E=!0,(l&&this.Ia(v,l)>0||c&&this.Ia(v,c)<0)&&(a=!0)):!g&&v?(i.track({type:0,doc:v}),E=!0):g&&!v&&(i.track({type:1,doc:g}),E=!0,(l||c)&&(a=!0)),E&&(v?(o=o.add(v),s=x?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ta:o,Aa:i,Xi:a,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((u,f)=>function(v,b){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return x(v)-x(b)}(u.type,f.type)||this.Ia(u.doc,f.doc)),this.Va(i),r=null!=r&&r;const a=e&&!r?this.ma():[],l=0===this.Pa.size&&this.current&&!r?1:0,c=l!==this.ha;return this.ha=l,0!==o.length||c?{snapshot:new pm(this.query,t.Ta,s,o,t.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new s6,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Mt(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const e=[];return t.forEach(i=>{this.Pa.has(i)||e.push(new u6(i))}),this.Pa.forEach(i=>{t.has(i)||e.push(new c6(i))}),e}pa(t){this.la=t.hs,this.Pa=Mt();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return pm.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class qfe{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Gfe{constructor(t){this.key=t,this.wa=!1}}class Yfe{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new $l(a=>bz(a),Dv),this.Da=new Map,this.Ca=new Set,this.va=new qn(He.comparator),this.Fa=new Map,this.Ma=new TM,this.xa={},this.Oa=new Map,this.Na=dh.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Zfe(n,t){return m1.apply(this,arguments)}function m1(){return m1=(0,me.Z)(function*(n,t,e=!0){const i=zx(n);let r;const s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield h6(i,t,e,!0),r}),m1.apply(this,arguments)}function Kfe(n,t){return g1.apply(this,arguments)}function g1(){return g1=(0,me.Z)(function*(n,t){const e=zx(n);yield h6(e,t,!0,!1)}),g1.apply(this,arguments)}function h6(n,t,e,i){return _1.apply(this,arguments)}function _1(){return _1=(0,me.Z)(function*(n,t,e,i){const r=yield om(n.localStore,cs(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=yield v1(n,t,s,"current"===o,r.resumeToken)),n.isPrimaryClient&&e&&jx(n.remoteStore,r),a}),_1.apply(this,arguments)}function v1(n,t,e,i,r){return y1.apply(this,arguments)}function y1(){return y1=(0,me.Z)(function*(n,t,e,i,r){n.Ba=(f,g,v)=>{return(b=(0,me.Z)(function*(E,O,k,F){let q=O.view.da(k);q.Xi&&(q=yield Fx(E.localStore,O.query,!1).then(({documents:P})=>O.view.da(P,q)));const K=F&&F.targetChanges.get(O.targetId),re=F&&null!=F.targetMismatches.get(O.targetId),B=O.view.applyChanges(q,E.isPrimaryClient,K,re);return k1(E,O.targetId,B.fa),B.snapshot}),function x(E,O,k,F){return b.apply(this,arguments)})(n,f,g,v);var b};const s=yield Fx(n.localStore,t,!0),o=new d6(t,s.hs),a=o.da(s.documents),l=Pv.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),c=o.applyChanges(a,n.isPrimaryClient,l);k1(n,e,c.fa);const u=new qfe(t,e,o);return n.ba.set(t,u),n.Da.has(e)?n.Da.get(e).push(t):n.Da.set(e,[t]),c.snapshot}),y1.apply(this,arguments)}function Qfe(n,t,e){return b1.apply(this,arguments)}function b1(){return b1=(0,me.Z)(function*(n,t,e){const i=Ue(n),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!Dv(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield am(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&cm(i.remoteStore,r.targetId),mm(i,r.targetId)}).catch(au))):(mm(i,r.targetId),yield am(i.localStore,r.targetId,!0))}),b1.apply(this,arguments)}function Xfe(n,t){return w1.apply(this,arguments)}function w1(){return w1=(0,me.Z)(function*(n,t){const e=Ue(n),i=e.ba.get(t),r=e.Da.get(i.targetId);e.isPrimaryClient&&1===r.length&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),cm(e.remoteStore,i.targetId))}),w1.apply(this,arguments)}function C1(){return C1=(0,me.Z)(function*(n,t,e){const i=U1(n);try{const r=yield function(o,a){const l=Ue(o),c=hi.now(),u=a.reduce((v,b)=>v.add(b.key),Mt());let f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Zs(),x=Mt();return l.os.getEntries(v,u).next(E=>{b=E,b.forEach((O,k)=>{k.isValidDocument()||(x=x.add(O))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,b)).next(E=>{f=E;const O=[];for(const k of a){const F=She(k,f.get(k.key).overlayedDocument);null!=F&&O.push(new Wl(k.key,F,rz(F.value.mapValue),fi.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,O,a)}).next(E=>{g=E;const O=E.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(v,E.batchId,O)})}).then(()=>({batchId:g.batchId,changes:Ez(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new qn(xt)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(i,r.batchId,e),yield Gl(i,r.changes),yield um(i.remoteStore)}catch(r){const s=hm(r,"Failed to persist write");e.reject(s)}}),C1.apply(this,arguments)}function f6(n,t){return x1.apply(this,arguments)}function x1(){return x1=(0,me.Z)(function*(n,t){const e=Ue(n);try{const i=yield function _fe(n,t){const e=Ue(n),i=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const a=[];t.targetChanges.forEach((u,f)=>{const g=r.get(f);if(!g)return;a.push(e.Qr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>e.Qr.addMatchingKeys(s,u.addedDocuments,f)));let v=g.withSequenceNumber(s.currentSequenceNumber);var x,E,O;null!==t.targetMismatches.get(f)?v=v.withResumeToken(wr.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):u.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(u.resumeToken,i)),r=r.insert(f,v),E=v,O=u,(0===(x=g).resumeToken.approximateByteSize()||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(e.Qr.updateTargetData(s,v))});let l=Zs(),c=Mt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(HH(s,o,t.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!i.isEqual(st.min())){const u=e.Qr.getLastRemoteSnapshotVersion(s).next(f=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return he.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(e.ns=r,s))}(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(rt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?rt(o.wa):r.removedDocuments.size>0&&(rt(o.wa),o.wa=!1))}),yield Gl(e,i,t)}catch(i){yield au(i)}}),x1.apply(this,arguments)}function p6(n,t,e){const i=Ue(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Ue(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const g of f.U_)g.j_(a)&&(c=!0)}),c&&h1(l)}(i.eventManager,t),r.length&&i.Sa.h_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function epe(n,t,e){return E1.apply(this,arguments)}function E1(){return E1=(0,me.Z)(function*(n,t,e){const i=Ue(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Fa.get(t),s=r&&r.key;if(s){let o=new qn(He.comparator);o=o.insert(s,ni.newNoDocument(s,st.min()));const a=Mt().add(s),l=new Rv(st.min(),new Map,new qn(xt),o,a);yield f6(i,l),i.va=i.va.remove(s),i.Fa.delete(t),M1(i)}else yield am(i.localStore,t,!1).then(()=>mm(i,t,e)).catch(au)}),E1.apply(this,arguments)}function tpe(n,t){return D1.apply(this,arguments)}function D1(){return D1=(0,me.Z)(function*(n,t){const e=Ue(n),i=t.batch.batchId;try{const r=yield function gfe(n,t){const e=Ue(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,g=f.keys();let v=he.resolve();return g.forEach(b=>{v=v.next(()=>u.getEntry(l,b)).next(x=>{const E=c.docVersions.get(b);rt(null!==E),x.version.compareTo(E)<0&&(f.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),u.addEntry(x)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Mt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);A1(e,i,null),I1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Gl(e,r)}catch(r){yield au(r)}}),D1.apply(this,arguments)}function npe(n,t,e){return T1.apply(this,arguments)}function T1(){return T1=(0,me.Z)(function*(n,t,e){const i=Ue(n);try{const r=yield function(o,a){const l=Ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(rt(null!==f),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);A1(i,t,e),I1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Gl(i,r)}catch(r){yield au(r)}}),T1.apply(this,arguments)}function S1(){return S1=(0,me.Z)(function*(n,t){const e=Ue(n);yu(e.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const a=Ue(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Oa.get(i)||[];r.push(t),e.Oa.set(i,r)}catch(i){const r=hm(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),S1.apply(this,arguments)}function I1(n,t){(n.Oa.get(t)||[]).forEach(e=>{e.resolve()}),n.Oa.delete(t)}function A1(n,t,e){const i=Ue(n);let r=i.xa[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function mm(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Da.get(t))n.ba.delete(i),e&&n.Sa.ka(i,e);n.Da.delete(t),n.isPrimaryClient&&n.Ma.Vr(t).forEach(i=>{n.Ma.containsKey(i)||m6(n,i)})}function m6(n,t){n.Ca.delete(t.path.canonicalString());const e=n.va.get(t);null!==e&&(cm(n.remoteStore,e),n.va=n.va.remove(t),n.Fa.delete(e),M1(n))}function k1(n,t,e){for(const i of e)i instanceof c6?(n.Ma.addReference(i.key,t),rpe(n,i)):i instanceof u6?(Me("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,t),n.Ma.containsKey(i.key)||m6(n,i.key)):et()}function rpe(n,t){const e=t.key,i=e.path.canonicalString();n.va.get(e)||n.Ca.has(i)||(Me("SyncEngine","New document in limbo: "+e),n.Ca.add(i),M1(n))}function M1(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const t=n.Ca.values().next().value;n.Ca.delete(t);const e=new He(Kt.fromString(t)),i=n.Na.next();n.Fa.set(i,new Gfe(e)),n.va=n.va.insert(e,i),jx(n.remoteStore,new ql(cs(Gp(e.path)),i,"TargetPurposeLimboResolution",_o.oe))}}function Gl(n,t,e){return R1.apply(this,arguments)}function R1(){return R1=(0,me.Z)(function*(n,t,e){const i=Ue(n),r=[],s=[],o=[];var a;i.ba.isEmpty()||(i.ba.forEach((a,l)=>{o.push(i.Ba(l,t,e).then(c=>{if((c||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c&&!c.fromCache?"current":"not-current"),c){r.push(c);const u=MM.Ki(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.Sa.h_(r),yield(a=(0,me.Z)(function*(c,u){const f=Ue(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>he.forEach(u,v=>he.forEach(v.qi,b=>f.persistence.referenceDelegate.addReference(g,v.targetId,b)).next(()=>he.forEach(v.Qi,b=>f.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))}catch(g){if(!lu(g))throw g;Me("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const v=g.targetId;if(!g.fromCache){const b=f.ns.get(v),E=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);f.ns=f.ns.insert(v,E)}}}),function l(c,u){return a.apply(this,arguments)})(i.localStore,s))}),R1.apply(this,arguments)}function spe(n,t){return P1.apply(this,arguments)}function P1(){return P1=(0,me.Z)(function*(n,t){const e=Ue(n);if(!e.currentUser.isEqual(t)){Me("SyncEngine","User change. New user:",t.toKey());const i=yield UH(e.localStore,t);e.currentUser=t,(s=e).Oa.forEach(a=>{a.forEach(l=>{l.reject(new Ie(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Gl(e,i.us)}var s}),P1.apply(this,arguments)}function ope(n,t){const e=Ue(n),i=e.Fa.get(t);if(i&&i.wa)return Mt().add(i.key);{let r=Mt();const s=e.Da.get(t);if(!s)return r;for(const o of s){const a=e.ba.get(o);r=r.unionWith(a.view.Ea)}return r}}function ape(n,t){return O1.apply(this,arguments)}function O1(){return O1=(0,me.Z)(function*(n,t){const e=Ue(n),i=yield Fx(e.localStore,t.query,!0),r=t.view.pa(i);return e.isPrimaryClient&&k1(e,t.targetId,r.fa),r}),O1.apply(this,arguments)}function lpe(n,t){return F1.apply(this,arguments)}function F1(){return F1=(0,me.Z)(function*(n,t){const e=Ue(n);return WH(e.localStore,t).then(i=>Gl(e,i))}),F1.apply(this,arguments)}function cpe(n,t,e,i){return N1.apply(this,arguments)}function N1(){return N1=(0,me.Z)(function*(n,t,e,i){const r=Ue(n),s=yield function(a,l){const c=Ue(a),u=Ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>u.vn(f,l).next(g=>g?c.localDocuments.getDocuments(f,g):he.resolve(null)))}(r.localStore,t);var l;null!==s?("pending"===e?yield um(r.remoteStore):"acknowledged"===e||"rejected"===e?(A1(r,t,i||null),I1(r,t),l=t,Ue(Ue(r.localStore).mutationQueue).Mn(l)):et(),yield Gl(r,s)):Me("SyncEngine","Cannot apply mutation batch with id: "+t)}),N1.apply(this,arguments)}function L1(){return L1=(0,me.Z)(function*(n,t){const e=Ue(n);if(zx(e),U1(e),!0===t&&!0!==e.La){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield g6(e,i.toArray());e.La=!0,yield s1(e.remoteStore,!0);for(const s of r)jx(e.remoteStore,s)}else if(!1===t&&!1!==e.La){const i=[];let r=Promise.resolve();e.Da.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(mm(e,o),am(e.localStore,o,!0))),cm(e.remoteStore,o)}),yield r,yield g6(e,i),function(o){const a=Ue(o);a.Fa.forEach((l,c)=>{cm(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new qn(He.comparator)}(e),e.La=!1,yield s1(e.remoteStore,!1)}}),L1.apply(this,arguments)}function g6(n,t,e){return V1.apply(this,arguments)}function V1(){return V1=(0,me.Z)(function*(n,t,e){const i=Ue(n),r=[],s=[];for(const o of t){let a;const l=i.Da.get(o);if(l&&0!==l.length){a=yield om(i.localStore,cs(l[0]));for(const c of l){const u=i.ba.get(c),f=yield ape(i,u);f.snapshot&&s.push(f.snapshot)}}else{const c=yield $H(i.localStore,o);a=yield om(i.localStore,c),yield v1(i,_6(c),o,!1,a.resumeToken)}r.push(a)}return i.Sa.h_(s),r}),V1.apply(this,arguments)}function _6(n){return gz(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dpe(n){return e=Ue(n).localStore,Ue(Ue(e).persistence).Bi();var e}function hpe(n,t,e,i){return B1.apply(this,arguments)}function B1(){return B1=(0,me.Z)(function*(n,t,e,i){const r=Ue(n);if(r.La)return void Me("SyncEngine","Ignoring unexpected query state notification.");const s=r.Da.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const o=yield WH(r.localStore,wz(s[0])),a=Rv.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,wr.EMPTY_BYTE_STRING);yield Gl(r,o,a);break}case"rejected":yield am(r.localStore,t,!0),mm(r,t,i);break;default:et()}}),B1.apply(this,arguments)}function fpe(n,t,e){return j1.apply(this,arguments)}function j1(){return j1=(0,me.Z)(function*(n,t,e){const i=zx(n);if(i.La){for(const r of t){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Me("SyncEngine","Adding an already active target "+r);continue}const s=yield $H(i.localStore,r),o=yield om(i.localStore,s);yield v1(i,_6(s),o.targetId,!1,o.resumeToken),jx(i.remoteStore,o)}for(const r of e)i.Da.has(r)&&(yield am(i.localStore,r,!1).then(()=>{cm(i.remoteStore,r),mm(i,r)}).catch(au))}}),j1.apply(this,arguments)}function zx(n){const t=Ue(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=f6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ope.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=epe.bind(null,t),t.Sa.h_=zfe.bind(null,t.eventManager),t.Sa.ka=Hfe.bind(null,t.eventManager),t}function U1(n){const t=Ue(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tpe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=npe.bind(null,t),t}class Wv{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,me.Z)(function*(){e.serializer=Hv(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return jH(this.persistence,new BH,t.initialUser,this.serializer)}createPersistence(t){return new SM(Rx.Hr,this.serializer)}createSharedClientState(t){return new ZH}terminate(){var t=this;return(0,me.Z)(function*(){var e,i;null===(e=t.gcScheduler)||void 0===e||e.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class z1 extends Wv{constructor(t,e,i){super(),this.Qa=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,me.Z)(function*(){yield e().call(i,t),yield i.Qa.initialize(i,t),yield U1(i.Qa.syncEngine),yield um(i.Qa.remoteStore),yield i.persistence.fi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return jH(this.persistence,new BH,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new kH(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new Bde(e,this.persistence);return new Vde(t.asyncQueue,i)}createPersistence(t){const e=kM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new AM(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,QH(),Bx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new ZH}}class v6 extends z1{constructor(t,e){super(t,e,!1),this.Qa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,me.Z)(function*(){yield e().call(i,t);const r=i.Qa.syncEngine;i.sharedClientState instanceof BM&&(i.sharedClientState.syncEngine={Zs:cpe.bind(null,r),Xs:hpe.bind(null,r),eo:fpe.bind(null,r),Bi:dpe.bind(null,r),Ys:lpe.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.fi(function(){var s=(0,me.Z)(function*(o){yield function upe(n,t){return L1.apply(this,arguments)}(i.Qa.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=QH();if(!BM.D(e))throw new Ie(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=kM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new BM(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class gm{initialize(t,e){var i=this;return(0,me.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>p6(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=spe.bind(null,i.syncEngine),yield s1(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Ufe}createDatastore(t){const e=Hv(t.databaseInfo.databaseId),i=new Efe(t.databaseInfo);return new Sfe(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return i=this.localStore,r=this.datastore,s=t.asyncQueue,o=e=>p6(this.syncEngine,e,0),a=KH.D()?new KH:new wfe,new Afe(i,r,s,o,a);var i,r,s,o,a}createSyncEngine(t,e){return function(r,s,o,a,l,c,u){const f=new Yfe(r,s,o,a,l,c);return u&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){var t=this;return(0,me.Z)(function*(){var e,i;yield(i=(0,me.Z)(function*(s){const o=Ue(s);Me("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield lm(o),o.O_.shutdown(),o.N_.set("Unknown")}),function r(s){return i.apply(this,arguments)})(t.remoteStore),null===(e=t.datastore)||void 0===e||e.terminate()})()}}function y6(n,t=10240){let e=0;return{read:()=>(0,me.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Hx{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Yi("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class gpe{constructor(t,e){this.Ua=t,this.serializer=e,this.metadata=new br,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){var t=this;return(0,me.Z)(function*(){return t.metadata.promise})()}qa(){var t=this;return(0,me.Z)(function*(){return yield t.getMetadata(),t.Ga()})()}Ga(){var t=this;return(0,me.Z)(function*(){const e=yield t.za();if(null===e)return null;const i=t.Wa.decode(e),r=Number(i);isNaN(r)&&t.ja(`length string (${i}) is not valid number`);const s=yield t.Ha(r);return new $fe(JSON.parse(s),e.length+r)})()}Ja(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}za(){var t=this;return(0,me.Z)(function*(){for(;t.Ja()<0&&!(yield t.Ya()););if(0===t.buffer.length)return null;const e=t.Ja();e<0&&t.ja("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Ha(t){var e=this;return(0,me.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ya())&&e.ja("Reached the end of bundle when more is expected.");const i=e.Wa.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}ja(t){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${t}`)}Ya(){var t=this;return(0,me.Z)(function*(){const e=yield t.Ua.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class _pe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw e.lastTransactionError=new Ie(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),e.lastTransactionError;const i=yield(r=(0,me.Z)(function*(o,a){const l=Ue(o),c={documents:a.map(v=>Ov(l.serializer,v))},u=yield l.xo("BatchGetDocuments",l.serializer.databaseId,Kt.emptyPath(),c,a.length),f=new Map;u.forEach(v=>{const b=function Nhe(n,t){return"found"in t?function(i,r){rt(!!r.found);const s=Ka(i,r.found.name),o=Zi(r.found.updateTime),a=r.found.createTime?Zi(r.found.createTime):st.min(),l=new zr({mapValue:{fields:r.found.fields}});return ni.newFoundDocument(s,o,a,l)}(n,t):"missing"in t?function(i,r){rt(!!r.missing),rt(!!r.readTime);const s=Ka(i,r.missing),o=Zi(r.readTime);return ni.newNoDocument(s,o)}(n,t):et()}(l.serializer,v);f.set(b.key.toString(),b)});const g=[];return a.forEach(v=>{const b=f.get(v.toString());rt(!!b),g.push(b)}),g}),function s(o,a){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Jp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=He.fromPath(r);t.mutations.push(new cM(s,t.precondition(s)))}),yield(i=(0,me.Z)(function*(s,o){const a=Ue(s),l={writes:o.map(c=>Fv(a.serializer,c))};yield a.Co("Commit",a.serializer.databaseId,Kt.emptyPath(),l)}),function r(s,o){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw et();e=st.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ie(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(st.min())?fi.exists(!1):fi.updateTime(e):fi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(st.min()))throw new Ie(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fi.updateTime(e)}return fi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class vpe{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Za=i.maxAttempts,this.Yo=new UM(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var t=this;this.Yo.$o((0,me.Z)(function*(){const e=new _pe(t.datastore),i=t.tu(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.nu(s)}))}).catch(r=>{t.nu(r)})}))}tu(t){try{const e=this.updateFunction(t);return!_v(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(t){this.Za>0&&this.ru(t)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(t)}ru(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!jz(e)}return!1}}class ype{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=kr.UNAUTHENTICATED,this.clientId=MU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,me.Z)(function*(a){Me("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(Me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=hm(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function $x(n,t){return H1.apply(this,arguments)}function H1(){return H1=(0,me.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,me.Z)(function*(s){i.isEqual(s)||(yield UH(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),H1.apply(this,arguments)}function $1(n,t){return W1.apply(this,arguments)}function W1(){return W1=(0,me.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield q1(n);Me("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>r6(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>r6(t.remoteStore,r)),n._onlineComponents=t}),W1.apply(this,arguments)}function b6(n){return"FirebaseError"===n.name?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function q1(n){return G1.apply(this,arguments)}function G1(){return G1=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $x(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!b6(e))throw e;Gs("Error using user provided cache. Falling back to memory cache: "+e),yield $x(n,new Wv)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),yield $x(n,new Wv);return n._offlineComponents}),G1.apply(this,arguments)}function Wx(n){return Y1.apply(this,arguments)}function Y1(){return(Y1=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),yield $1(n,n._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),yield $1(n,new gm))),n._onlineComponents})).apply(this,arguments)}function w6(n){return q1(n).then(t=>t.persistence)}function _m(n){return q1(n).then(t=>t.localStore)}function C6(n){return Wx(n).then(t=>t.remoteStore)}function Z1(n){return Wx(n).then(t=>t.syncEngine)}function vm(n){return K1.apply(this,arguments)}function K1(){return K1=(0,me.Z)(function*(n){const t=yield Wx(n),e=t.eventManager;return e.onListen=Zfe.bind(null,t.syncEngine),e.onUnlisten=Qfe.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Kfe.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Xfe.bind(null,t.syncEngine),e}),K1.apply(this,arguments)}function E6(n,t,e={}){const i=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,o,a,l,c){const u=new Hx({next:g=>{o.enqueueAndForget(()=>u1(s,f));const v=g.docs.has(a);!v&&g.fromCache?c.reject(new Ie(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&l&&"server"===l.source?c.reject(new Ie(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new p1(Gp(a.path),u,{includeMetadataChanges:!0,ra:!0});return l1(s,f)}(yield vm(n),n.asyncQueue,t,e,i)})),i.promise}function D6(n,t,e={}){const i=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,o,a,l,c){const u=new Hx({next:g=>{o.enqueueAndForget(()=>u1(s,f)),g.fromCache&&"server"===l.source?c.reject(new Ie(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new p1(a,u,{includeMetadataChanges:!0,ra:!0});return l1(s,f)}(yield vm(n),n.asyncQueue,t,e,i)})),i.promise}function T6(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const S6=new Map;function Q1(n,t,e){if(!e)throw new Ie(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function I6(n,t,e,i){if(!0===t&&!0===i)throw new Ie(pe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function A6(n){if(!He.isDocumentKey(n))throw new Ie(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function k6(n){if(He.isDocumentKey(n))throw new Ie(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(i=n).constructor?i.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var i;return"function"==typeof n?"a function":et()}function Ht(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ie(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qx(n);throw new Ie(pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function M6(n,t){if(t<=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class R6{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ie(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ie(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}I6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=T6(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qv{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R6(t),void 0!==t.credentials&&(this._authCredentials=function(i){if(!i)return new Tde;switch(i.type){case"firstParty":return new kde(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ie(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=S6.get(e);i&&(Me("ComponentProvider","Removing Datastore"),S6.delete(e),i.terminate())}(this),Promise.resolve()}}class Hr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Hr(this.firestore,t,this._query)}}class ii{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ii(this.firestore,t,this._key)}}class Qa extends Hr{constructor(t,e,i){super(t,e,Gp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ii(this.firestore,null,new He(t))}withConverter(t){return new Qa(this.firestore,t,this._path)}}function O6(n,t,...e){if(n=(0,yn.m9)(n),Q1("collection","path",t),n instanceof qv){const i=Kt.fromString(t,...e);return k6(i),new Qa(n,null,i)}{if(!(n instanceof ii||n instanceof Qa))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(t,...e));return k6(i),new Qa(n.firestore,null,i)}}function Gx(n,t,...e){if(n=(0,yn.m9)(n),1===arguments.length&&(t=MU.newId()),Q1("doc","path",t),n instanceof qv){const i=Kt.fromString(t,...e);return A6(i),new ii(n,null,new He(i))}{if(!(n instanceof ii||n instanceof Qa))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(t,...e));return A6(i),new ii(n.firestore,n instanceof Qa?n.converter:null,new He(i))}}function F6(n,t){return n=(0,yn.m9)(n),t=(0,yn.m9)(t),(n instanceof ii||n instanceof Qa)&&(t instanceof ii||t instanceof Qa)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function X1(n,t){return n=(0,yn.m9)(n),t=(0,yn.m9)(t),n instanceof Hr&&t instanceof Hr&&n.firestore===t.firestore&&Dv(n._query,t._query)&&n.converter===t.converter}class Rpe{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new UM(this,"async_queue_retry"),this.hu=()=>{const e=Bx();e&&Me("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=Bx();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=Bx();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new br;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){var t=this;return(0,me.Z)(function*(){if(0!==t.su.length){try{yield t.su[0](),t.su.shift(),t.Yo.reset()}catch(e){if(!lu(e))throw e;Me("AsyncQueue","Operation failed with retryable error: "+e)}t.su.length>0&&t.Yo.$o(()=>t.Tu())}})()}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(i=>{throw this.au=i,this.uu=!1,Yi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(i)),i}).then(i=>(this.uu=!1,i))));return this.iu=e,e}enqueueAfterDelay(t,e,i){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=a1.createAndSchedule(this,t,e,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&et()}verifyOperationInProgress(){}du(){var t=this;return(0,me.Z)(function*(){let e;do{e=t.iu,yield e}while(e!==t.iu)})()}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this._u)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function J1(n){return function(e,i){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Ppe{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Nn extends qv{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Rpe,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||N6(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||N6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function N6(n){var t,e,i;const r=n._freezeSettings(),s=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new ohe(n._databaseId,l,n._persistenceKey,(u=r).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,T6(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._firestoreClient=new ype(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(e=r.localCache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function L6(n,t,e){const i=new br;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield $x(n,e),yield $1(n,t),i.resolve()}catch(r){const s=r;if(!b6(s))throw s;Gs("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function V6(n){if(n._initialized||n._terminated)throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xa{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xa(wr.fromBase64String(t))}catch(e){throw new Ie(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Xa(wr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Yl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ti(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class fh{constructor(t){this._methodName=t}}class Yx{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ie(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ie(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}}const $pe=/^__.*__$/;class Wpe{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Wl(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xp(t,this.data,e,this.fieldTransforms)}}class B6{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Wl(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function j6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class Zx{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Zx(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Xx(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(0===t.length)throw this.Du("Document fields must not be empty");if(j6(this.fu)&&$pe.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class qpe{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Hv(t)}Fu(t,e,i,r=!1){return new Zx({fu:t,methodName:e,vu:i,path:ti.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ph(n){const t=n._freezeSettings(),e=Hv(n._databaseId);return new qpe(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Kx(n,t,e,i,r,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,t,e,r);oR("Data must be an object, but it was:",o,i);const a=H6(i,o);let l,c;if(s.merge)l=new Ys(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const g=Zv(t,f,e);if(!o.contains(g))throw new Ie(pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);W6(u,g)||u.push(g)}l=new Ys(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Wpe(new zr(a),l,c)}class Yv extends fh{_toFieldTransform(t){if(2!==t.fu)throw t.Du(1===t.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Yv}}function U6(n,t,e){return new Zx({fu:3,vu:t.settings.vu,methodName:n._methodName,yu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class eR extends fh{_toFieldTransform(t){return new Av(t.path,new Kp)}isEqual(t){return t instanceof eR}}class tR extends fh{constructor(t,e){super(t),this.Mu=e}_toFieldTransform(t){const e=U6(this,t,!0),i=this.Mu.map(s=>mh(s,e)),r=new rh(i);return new Av(t.path,r)}isEqual(t){return t instanceof tR&&(0,yn.vZ)(this.Mu,t.Mu)}}class nR extends fh{constructor(t,e){super(t),this.Mu=e}_toFieldTransform(t){const e=U6(this,t,!0),i=this.Mu.map(s=>mh(s,e)),r=new sh(i);return new Av(t.path,r)}isEqual(t){return t instanceof nR&&(0,yn.vZ)(this.Mu,t.Mu)}}class iR extends fh{constructor(t,e){super(t),this.xu=e}_toFieldTransform(t){const e=new Qp(t.serializer,Iz(t.serializer,this.xu));return new Av(t.path,e)}isEqual(t){return t instanceof iR&&this.xu===t.xu}}function rR(n,t,e,i){const r=n.Fu(1,t,e);oR("Data must be an object, but it was:",r,i);const s=[],o=zr.empty();cu(i,(l,c)=>{const u=Qx(t,l,e);c=(0,yn.m9)(c);const f=r.Su(u);if(c instanceof Yv)s.push(u);else{const g=mh(c,f);null!=g&&(s.push(u),o.set(u,g))}});const a=new Ys(s);return new B6(o,a,r.fieldTransforms)}function sR(n,t,e,i,r,s){const o=n.Fu(1,t,e),a=[Zv(t,i,e)],l=[r];if(s.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(Zv(t,s[g])),l.push(s[g+1]);const c=[],u=zr.empty();for(let g=a.length-1;g>=0;--g)if(!W6(c,a[g])){const v=a[g];let b=l[g];b=(0,yn.m9)(b);const x=o.Su(v);if(b instanceof Yv)c.push(v);else{const E=mh(b,x);null!=E&&(c.push(v),u.set(v,E))}}const f=new Ys(c);return new B6(u,f,o.fieldTransforms)}function z6(n,t,e,i=!1){return mh(e,n.Fu(i?4:3,t))}function mh(n,t){if($6(n=(0,yn.m9)(n)))return oR("Unsupported field value:",t,n),H6(n,t);if(n instanceof fh)return function(i,r){if(!j6(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=mh(a,r.bu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if(null===(i=(0,yn.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return Iz(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const s=hi.fromDate(i);return{timestampValue:em(r.serializer,s)}}if(i instanceof hi){const s=new hi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:em(r.serializer,s)}}if(i instanceof Yx)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xa)return{bytesValue:Kz(r.serializer,i._byteString)};if(i instanceof ii){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mM(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${qx(i)}`)}(n,t)}function H6(n,t){const e={};return ZU(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cu(n,(i,r)=>{const s=mh(r,t.pu(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function $6(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hi||n instanceof Yx||n instanceof Xa||n instanceof ii||n instanceof fh)}function oR(n,t,e){if(!$6(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=qx(e);throw t.Du("an object"===i?n+" a custom object":n+" "+i)}var r}function Zv(n,t,e){if((t=(0,yn.m9)(t))instanceof Yl)return t._internalPath;if("string"==typeof t)return Qx(n,t);throw Xx("Field path arguments must be of type string or ",n,!1,void 0,e)}const Gpe=new RegExp("[~\\*/\\[\\]]");function Qx(n,t,e){if(t.search(Gpe)>=0)throw Xx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Yl(...t.split("."))._internalPath}catch{throw Xx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Xx(n,t,e,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Ie(pe.INVALID_ARGUMENT,a+n+l)}function W6(n,t){return n.some(e=>e.isEqual(t))}class Kv{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Ype(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Jx("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Ype extends Kv{data(){return super.data()}}function Jx(n,t){return"string"==typeof t?Qx(n,t):t instanceof Yl?t._internalPath:t._delegate._internalPath}function q6(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aR{}class Qv extends aR{}function wu(n,t,...e){let i=[];t instanceof aR&&i.push(t),i=i.concat(e),function(s){const o=s.filter(l=>l instanceof ym).length,a=s.filter(l=>l instanceof Xv).length;if(o>1||o>0&&a>0)throw new Ie(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Xv extends Qv{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Xv(t,e,i)}_apply(t){const e=this._parse(t);return K6(t._query,e),new Hr(t.firestore,t.converter,aM(t._query,e))}_parse(t){const e=ph(t.firestore);return function(s,o,a,l,c,u,f){let g;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){Z6(f,u);const v=[];for(const b of f)v.push(Y6(l,s,b));g={arrayValue:{values:v}}}else g=Y6(l,s,f)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||Z6(f,u),g=z6(a,"where",f,"in"===u||"not-in"===u);return Qt.create(c,u,g)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class ym extends aR{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ym(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:En.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)K6(o,l),o=aM(o,l)}(t._query,e),new Hr(t.firestore,t.converter,aM(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lR extends Qv{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new lR(t,e)}_apply(t){const e=function(r,s,o){if(null!==r.startAt)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xv(s,o)}(t._query,this._field,this._direction);return new Hr(t.firestore,t.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Hl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class eE extends Qv{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new eE(t,e,i)}_apply(t){return new Hr(t.firestore,t.converter,vx(t._query,this._limit,this._limitType))}}class tE extends Qv{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new tE(t,e,i)}_apply(t){const e=G6(t,this.type,this._docOrFields,this._inclusive);return new Hr(t.firestore,t.converter,(s=e,new Hl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class nE extends Qv{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new nE(t,e,i)}_apply(t){const e=G6(t,this.type,this._docOrFields,this._inclusive);return new Hr(t.firestore,t.converter,(s=e,new Hl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function G6(n,t,e,i){if(e[0]=(0,yn.m9)(e[0]),e[0]instanceof Kv)return function(s,o,a,l,c){if(!l)throw new Ie(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const f of Yp(s))if(f.field.isKeyField())u.push(nh(o,l.key));else{const g=l.data.field(f.field);if(dx(g))throw new Ie(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const v=f.field.canonicalString();throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}u.push(g)}return new pu(u,c)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=ph(n.firestore);return function(o,a,l,c,u,f){const g=o.explicitOrderBy;if(u.length>g.length)throw new Ie(pe.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let b=0;b<u.length;b++){const x=u[b];if(g[b].field.isKeyField()){if("string"!=typeof x)throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!oM(o)&&-1!==x.indexOf("/"))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const E=o.path.child(Kt.fromString(x));if(!He.isDocumentKey(E))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const O=new He(E);v.push(nh(a,O))}else{const E=z6(l,c,x);v.push(E)}}return new pu(v,f)}(n._query,n.firestore._databaseId,r,t,e,i)}}function Y6(n,t,e){if("string"==typeof(e=(0,yn.m9)(e))){if(""===e)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oM(t)&&-1!==e.indexOf("/"))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Kt.fromString(e));if(!He.isDocumentKey(i))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return nh(n,new He(i))}if(e instanceof ii)return nh(n,e._key);throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qx(e)}.`)}function Z6(n,t){if(!Array.isArray(n)||0===n.length)throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function K6(n,t){const e=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Ie(pe.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class cR{convertValue(t,e="none"){switch(hu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Di(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(zl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw et()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return cu(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Yx(Di(t.latitude),Di(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=hx(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(yv(t));default:return null}}convertTimestamp(t){const e=Ul(t);return new hi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Kt.fromString(t);rt(lH(i));const r=new uu(i.get(1),i.get(3)),s=new He(i.popFirst(5));return r.isEqual(e)||Yi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function iE(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class ime extends cR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xa(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ii(this.firestore,null,e)}}class gh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zl extends Kv{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Jv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Jx("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Jv extends Zl{data(t={}){return super.data(t)}}class Cu{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new gh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Jv(this._firestore,this._userDataWriter,i.key,i,new gh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ie(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new Jv(r._firestore,r._userDataWriter,a.doc.key,a.doc,new gh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new Jv(r._firestore,r._userDataWriter,a.doc.key,a.doc,new gh(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:sme(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function sme(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function X6(n,t){return n instanceof Zl&&t instanceof Zl?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Cu&&t instanceof Cu&&n._firestore===t._firestore&&X1(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class xu extends cR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xa(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ii(this.firestore,null,e)}}function J6(n,t,e){n=Ht(n,ii);const i=Ht(n.firestore,Nn),r=iE(n.converter,t,e);return bm(i,[Kx(ph(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,fi.none())])}function e$(n,t,e,...i){n=Ht(n,ii);const r=Ht(n.firestore,Nn),s=ph(r);let o;return o="string"==typeof(t=(0,yn.m9)(t))||t instanceof Yl?sR(s,"updateDoc",n._key,t,e,i):rR(s,"updateDoc",n._key,t),bm(r,[o.toMutation(n._key,fi.exists(!0))])}function t$(n,...t){var e,i,r;n=(0,yn.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||J1(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(J1(t[o])){const f=t[o];t[o]=null===(e=f.next)||void 0===e?void 0:e.bind(f),t[o+1]=null===(i=f.error)||void 0===i?void 0:i.bind(f),t[o+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}let l,c,u;if(n instanceof ii)c=Ht(n.firestore,Nn),u=Gp(n._key.path),l={next:f=>{t[o]&&t[o](uR(c,n,f))},error:t[o+1],complete:t[o+2]};else{const f=Ht(n,Hr);c=Ht(f.firestore,Nn),u=f._query;const g=new xu(c);l={next:v=>{t[o]&&t[o](new Cu(c,g,f,v))},error:t[o+1],complete:t[o+2]},q6(n._query)}return function(g,v,b,x){const E=new Hx(x),O=new p1(v,E,b);return g.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return l1(yield vm(g),O)})),()=>{E.$a(),g.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return u1(yield vm(g),O)}))}}(pi(c),u,a,l)}function bm(n,t){return function(i,r){const s=new br;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Jfe(n,t,e){return C1.apply(this,arguments)}(yield Z1(i),r,s)})),s.promise}(pi(n),t)}function uR(n,t,e){const i=e.docs.get(t._key),r=new xu(n);return new Zl(n,r,t._key,i,new gh(e.hasPendingWrites,e.fromCache),t.converter)}const xme={maxAttempts:5};class n${constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ph(t)}set(t,e,i){this._verifyNotCommitted();const r=Eu(t,this._firestore),s=iE(r.converter,e,i),o=Kx(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,fi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Eu(t,this._firestore);let o;return o="string"==typeof(e=(0,yn.m9)(e))||e instanceof Yl?sR(this._dataReader,"WriteBatch.update",s._key,e,i,r):rR(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,fi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Eu(t,this._firestore);return this._mutations=this._mutations.concat(new Jp(e._key,fi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eu(n,t){if((n=(0,yn.m9)(n)).firestore!==t)throw new Ie(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Eme extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=ph(e)}get(e){const i=Eu(e,this._firestore),r=new ime(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||1!==s.length)return et();const o=s[0];if(o.isFoundDocument())return new Kv(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Kv(this._firestore,r,i._key,null,i.converter);throw et()})}set(e,i,r){const s=Eu(e,this._firestore),o=iE(s.converter,i,r),a=Kx(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,r);return this._transaction.set(s._key,a),this}update(e,i,r,...s){const o=Eu(e,this._firestore);let a;return a="string"==typeof(i=(0,yn.m9)(i))||i instanceof Yl?sR(this._dataReader,"Transaction.update",o._key,i,r,s):rR(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(e){const i=Eu(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Eu(t,this._firestore),i=new xu(this._firestore);return super.get(t).then(r=>new Zl(this._firestore,i,e._key,r._document,new gh(!1,!1),e.converter))}}function hR(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function o$(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function a$(){if(!function rhe(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){Bp=Np.SDK_VERSION,(0,Np._registerComponent)(new vU.wA("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Nn(new Ide(i.getProvider("auth-internal")),new Mde(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ie(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Np.registerVersion)(IU,"4.6.3",t),(0,Np.registerVersion)(IU,"4.6.3","esm2017")}();class ey{constructor(t){this._delegate=t}static fromBase64String(t){return a$(),new ey(Xa.fromBase64String(t))}static fromUint8Array(t){return o$(),new ey(Xa.fromUint8Array(t))}toBase64(){return a$(),this._delegate.toBase64()}toUint8Array(){return o$(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fR(n){return function Ome(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class Fme{enableIndexedDbPersistence(t,e){return function Fpe(n,t){V6(n=Ht(n,Nn));const e=pi(n);if(e._uninitializedComponentsProvider)throw new Ie(pe.FAILED_PRECONDITION,"SDK cache is already specified.");Gs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new gm;return L6(e,r,new z1(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Npe(n){V6(n=Ht(n,Nn));const t=pi(n);if(t._uninitializedComponentsProvider)throw new Ie(pe.FAILED_PRECONDITION,"SDK cache is already specified.");Gs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new gm;return L6(t,i,new v6(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function Lpe(n){if(n._initialized&&!n._terminated)throw new Ie(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(e=(0,me.Z)(function*(r){if(!qa.D())return Promise.resolve();const s=r+"main";yield qa.delete(s)}),function i(r){return e.apply(this,arguments)})(kM(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class l${constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof uu||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Gs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function P6(n,t,e,i={}){var r;const s=(n=Ht(n,qv))._getSettings(),o=`${t}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=kr.MOCK_USER;else{a=(0,yn.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ie(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new kr(c)}n._authCredentials=new Sde(new AU(a,l))}}(this._delegate,t,e,i)}enableNetwork(){return function Bpe(n){return function bpe(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const t=yield w6(n),e=yield C6(n);return t.setNetworkEnabled(!0),function(r){const s=Ue(r);return s.M_.delete(0),$v(s)}(e)}))}(pi(n=Ht(n,Nn)))}(this._delegate)}disableNetwork(){return function jpe(n){return function wpe(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const t=yield w6(n),e=yield C6(n);return t.setNetworkEnabled(!1),(i=(0,me.Z)(function*(s){const o=Ue(s);o.M_.add(0),yield lm(o),o.N_.set("Offline")}),function r(s){return i.apply(this,arguments)})(e);var i}))}(pi(n=Ht(n,Nn)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,I6("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Vpe(n){return function(e){const i=new br;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function ipe(n,t){return S1.apply(this,arguments)}(yield Z1(e),i)})),i.promise}(pi(n=Ht(n,Nn)))}(this._delegate)}onSnapshotsInSync(t){return function pme(n,t){return function Dpe(n,t){const e=new Hx(t);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield vm(n),s=e,Ue(r).z_.add(s),void s.next();var r,s})),()=>{e.$a(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield vm(n),s=e,void Ue(r).z_.delete(s);var r,s}))}}(pi(n=Ht(n,Nn)),J1(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new wm(this,O6(this._delegate,t))}catch(e){throw As(e,"collection()","Firestore.collection()")}}doc(t){try{return new zo(this,Gx(this._delegate,t))}catch(e){throw As(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ks(this,function Mpe(n,t){if(n=Ht(n,qv),Q1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hr(n,null,(i=t,new Hl(Kt.emptyPath(),i)));var i}(this._delegate,t))}catch(e){throw As(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function Dme(n,t,e){n=Ht(n,Nn);const i=Object.assign(Object.assign({},xme),e);return function(s){if(s.maxAttempts<1)throw new Ie(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new br;return s.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const c=yield function x6(n){return Wx(n).then(t=>t.datastore)}(s);new vpe(s.asyncQueue,c,a,o,l).Xa()})),l.promise}(pi(n),r=>t(new Eme(n,r)),i)}(this._delegate,e=>t(new c$(this,e)))}batch(){return pi(this._delegate),new u$(new n$(this._delegate,t=>bm(this._delegate,t)))}loadBundle(t){return function Upe(n,t){const e=pi(n=Ht(n,Nn)),i=new Ppe;return function Tpe(n,t,e,i){const r=function(o,a){let l;return l="string"==typeof o?zz().encode(o):o,u=function(u,f){if(u instanceof Uint8Array)return y6(u,f);if(u instanceof ArrayBuffer)return y6(new Uint8Array(u),f);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new gpe(u,a);var u}(e,Hv(t));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function ppe(n,t,e){const i=Ue(n);var r;(r=(0,me.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(b,x){const E=Ue(b),O=Zi(x.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",k=>E.$r.getBundleMetadata(k,x.id)).then(k=>!!k&&k.createTime.compareTo(O)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(b=c).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);l._updateProgress(l6(c));const u=new Wfe(c,o.localStore,a.serializer);let f=yield a.qa();for(;f;){const v=yield u._a(f);v&&l._updateProgress(v),f=yield a.qa()}const g=yield u.complete();return yield Gl(o,g.ca,void 0),yield function(b,x){const E=Ue(b);return E.persistence.runTransaction("Save bundle","readwrite",O=>E.$r.saveBundleMetadata(O,x))}(o.localStore,c),l._completeWith(g.progress),Promise.resolve(g.ua)}catch(c){return Gs("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var b}),function s(o,a,l){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield Z1(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function zpe(n,t){return function Spe(n,t){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(i,r){const s=Ue(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,r))}(yield _m(n),t)}))}(pi(n=Ht(n,Nn)),t).then(e=>e?new Hr(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ks(this,e):null)}}class sE extends cR{constructor(t){super(),this.firestore=t}convertBytes(t){return new ey(new Xa(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return zo.forKey(e,this.firestore,null)}}class c${constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new sE(t)}get(t){const e=vh(t);return this._delegate.get(e).then(i=>new ty(this._firestore,new Zl(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=vh(t);return i?(hR("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=vh(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=vh(t);return this._delegate.delete(e),this}}class u${constructor(t){this._delegate=t}set(t,e,i){const r=vh(t);return i?(hR("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=vh(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=vh(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class _h{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Jv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ny(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=_h.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new _h(t,new sE(t),e),r.set(e,s)),s}}_h.INSTANCES=new WeakMap;class zo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sE(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new zo(e,new ii(e._delegate,i,new He(t)))}static forKey(t,e,i){return new zo(e,new ii(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new wm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new wm(this.firestore,O6(this._delegate,t))}catch(e){throw As(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,yn.m9)(t))instanceof ii&&F6(this._delegate,t)}set(t,e){e=hR("DocumentReference.set",e);try{return e?J6(this._delegate,t,e):J6(this._delegate,t)}catch(i){throw As(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?e$(this._delegate,t):e$(this._delegate,t,e,...i)}catch(r){throw As(r,"updateDoc()","DocumentReference.update()")}}delete(){return function hme(n){return bm(Ht(n.firestore,Nn),[new Jp(n._key,fi.none())])}(this._delegate)}onSnapshot(...t){const e=d$(t),i=h$(t,r=>new ty(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return t$(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function ame(n){n=Ht(n,ii);const t=Ht(n.firestore,Nn),e=pi(t),i=new xu(t);return function Cpe(n,t){const e=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(i=(0,me.Z)(function*(s,o,a){try{const l=yield function(u,f){const g=Ue(u);return g.persistence.runTransaction("read document","readonly",v=>g.localDocuments.getDocument(v,f))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ie(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=hm(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield _m(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Zl(t,i,n._key,r,new gh(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function lme(n){n=Ht(n,ii);const t=Ht(n.firestore,Nn);return E6(pi(t),n._key,{source:"server"}).then(e=>uR(t,n,e))}(this._delegate):function ome(n){n=Ht(n,ii);const t=Ht(n.firestore,Nn);return E6(pi(t),n._key).then(e=>uR(t,n,e))}(this._delegate),e.then(i=>new ty(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new zo(this.firestore,this._delegate.withConverter(t?_h.getInstance(this.firestore,t):null))}}function As(n,t,e){return n.message=n.message.replace(t,e),n}function d$(n){for(const t of n)if("object"==typeof t&&!fR(t))return t;return{}}function h$(n,t){var e,i;let r;return r=fR(n[0])?n[0]:fR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class ty{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return X6(this._delegate,t._delegate)}}class ny extends ty{data(t){const e=this._delegate.data(t);return this._delegate._converter||function Dde(n,t){n||et()}(void 0!==e),e}}class ks{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sE(t)}where(t,e,i){try{return new ks(this.firestore,wu(this._delegate,function Zpe(n,t,e){const i=t,r=Jx("where",n);return Xv._create(r,i,e)}(t,e,i)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ks(this.firestore,wu(this._delegate,function Kpe(n,t="asc"){const e=t,i=Jx("orderBy",n);return lR._create(i,e)}(t,e)))}catch(i){throw As(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ks(this.firestore,wu(this._delegate,function Qpe(n){return M6("limit",n),eE._create("limit",n,"F")}(t)))}catch(e){throw As(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ks(this.firestore,wu(this._delegate,function Xpe(n){return M6("limitToLast",n),eE._create("limitToLast",n,"L")}(t)))}catch(e){throw As(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ks(this.firestore,wu(this._delegate,function Jpe(...n){return tE._create("startAt",n,!0)}(...t)))}catch(e){throw As(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ks(this.firestore,wu(this._delegate,function eme(...n){return tE._create("startAfter",n,!1)}(...t)))}catch(e){throw As(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ks(this.firestore,wu(this._delegate,function tme(...n){return nE._create("endBefore",n,!1)}(...t)))}catch(e){throw As(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ks(this.firestore,wu(this._delegate,function nme(...n){return nE._create("endAt",n,!0)}(...t)))}catch(e){throw As(e,"endAt()","Query.endAt()")}}isEqual(t){return X1(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function ume(n){n=Ht(n,Hr);const t=Ht(n.firestore,Nn),e=pi(t),i=new xu(t);return function xpe(n,t){const e=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(i=(0,me.Z)(function*(s,o,a){try{const l=yield Fx(s,o,!0),c=new d6(o,l.hs),u=c.da(l.documents),f=c.applyChanges(u,!1);a.resolve(f.snapshot)}catch(l){const c=hm(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield _m(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Cu(t,i,n,r))}(this._delegate):"server"===t?.source?function dme(n){n=Ht(n,Hr);const t=Ht(n.firestore,Nn),e=pi(t),i=new xu(t);return D6(e,n._query,{source:"server"}).then(r=>new Cu(t,i,n,r))}(this._delegate):function cme(n){n=Ht(n,Hr);const t=Ht(n.firestore,Nn),e=pi(t),i=new xu(t);return q6(n._query),D6(e,n._query).then(r=>new Cu(t,i,n,r))}(this._delegate),e.then(i=>new pR(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=d$(t),i=h$(t,r=>new pR(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return t$(this._delegate,e,i)}withConverter(t){return new ks(this.firestore,this._delegate.withConverter(t?_h.getInstance(this.firestore,t):null))}}class Lme{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new ny(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pR{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new ny(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new Lme(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new ny(this._firestore,i))})}isEqual(t){return X6(this._delegate,t._delegate)}}class wm extends ks{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new zo(this.firestore,t):null}doc(t){try{return new zo(this.firestore,void 0===t?Gx(this._delegate):Gx(this._delegate,t))}catch(e){throw As(e,"doc()","CollectionReference.doc()")}}add(t){return function fme(n,t){const e=Ht(n.firestore,Nn),i=Gx(n),r=iE(n.converter,t);return bm(e,[Kx(ph(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,fi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new zo(this.firestore,e))}isEqual(t){return F6(this._delegate,t._delegate)}withConverter(t){return new wm(this.firestore,this._delegate.withConverter(t?_h.getInstance(this.firestore,t):null))}}function vh(n){return Ht(n,ii)}class mR{constructor(...t){this._delegate=new Yl(...t)}static documentId(){return new mR(ti.keyField().canonicalString())}isEqual(t){return(t=(0,yn.m9)(t))instanceof Yl&&this._delegate._internalPath.isEqual(t._internalPath)}}class yh{constructor(t){this._delegate=t}static serverTimestamp(){const t=function Sme(){return new eR("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new yh(t)}static delete(){const t=function Tme(){return new Yv("deleteField")}();return t._methodName="FieldValue.delete",new yh(t)}static arrayUnion(...t){const e=function Ime(...n){return new tR("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new yh(e)}static arrayRemove(...t){const e=function Ame(...n){return new nR("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new yh(e)}static increment(t){const e=function kme(n){return new iR("increment",n)}(t);return e._methodName="FieldValue.increment",new yh(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Vme={Firestore:l$,GeoPoint:Yx,Timestamp:hi,Blob:ey,Transaction:c$,WriteBatch:u$,DocumentReference:zo,DocumentSnapshot:ty,Query:ks,QueryDocumentSnapshot:ny,QuerySnapshot:pR,CollectionReference:wm,FieldPath:mR,FieldValue:yh,setLogLevel:function Nme(n){!function Ede(n){ou.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function f$(n,t){return function Ume(n,t=vp){return new ft(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function gR(n,t){return f$(n,t).pipe(Oe(e=>({payload:e,type:"query"})))}!function jme(n){(function Bme(n,t){n.INTERNAL.registerComponent(new vU.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},Vme)))})(n,(t,e)=>new l$(t,e,new Fme)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Is.Z);class p${ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=b$(i,e);return new _$(r,s,this.afs)}snapshotChanges(){return function zme(n,t){return f$(n,t).pipe(Vo(void 0),wp(),Oe(e=>{const[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mo)}valueChanges(t={}){return this.snapshotChanges().pipe(Oe(({payload:e})=>t.idField?{...e.data(),[t.idField]:e.id}:e.data()))}get(t){return ne(this.ref.get(t)).pipe(mo)}}function oE(n,t){return gR(n,t).pipe(Vo(void 0),wp(),Oe(e=>{const[i,r]=e,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=s.find(f=>f.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function m$(n,t,e){return oE(n,e).pipe(Xw((i,r)=>function Hme(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function $me(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return _R(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return _R(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return _R(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Pi(),Oe(i=>i.map(r=>({type:r.type,payload:r}))))}function _R(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function g$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class _${ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=oE(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Oe(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Vo(void 0),wp(),vn(([i,r])=>r.length>0||!i),Oe(([,i])=>i),mo)}auditTrail(t){return this.stateChanges(t).pipe(Xw((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=g$(t);return m$(this.query,e,this.afs.schedulers.outsideAngular).pipe(mo)}valueChanges(t={}){return gR(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(e=>e.payload.docs.map(i=>t.idField?{...i.data(),[t.idField]:i.id}:i.data())),mo)}get(t){return ne(this.query.get(t)).pipe(mo)}add(t){return this.ref.add(t)}doc(t){return new p$(this.ref.doc(t),this.afs)}}class Wme{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?oE(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(e=>e.filter(i=>t.indexOf(i.type)>-1)),vn(e=>e.length>0),mo):oE(this.query,this.afs.schedulers.outsideAngular).pipe(mo)}auditTrail(t){return this.stateChanges(t).pipe(Xw((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=g$(t);return m$(this.query,e,this.afs.schedulers.outsideAngular).pipe(mo)}valueChanges(t={}){return gR(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(i=>i.payload.docs.map(r=>t.idField?{[t.idField]:r.id,...r.data()}:r.data())),mo)}get(t){return ne(this.query.get(t)).pipe(mo)}}const v$=new Ce("angularfire2.enableFirestorePersistence"),y$=new Ce("angularfire2.firestore.persistenceSettings"),qme=new Ce("angularfire2.firestore.settings"),Gme=new Ce("angularfire2.firestore.use-emulator");function b$(n,t=(e=>e)){return{query:t(n),ref:n}}let Ja=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,s,o,a,l,c,u,f,g,v,b,x,E,O,k){this.schedulers=l;const F=Wk(e,a,i),q=u;f&&_U(F,a,g,b,x,E,v,O),[this.firestore,this.persistenceEnabled$]=cU(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{const K=a.runOutsideAngular(()=>F.firestore());if(s&&K.settings(s),q&&K.useEmulator(...q),r&&!$w(o)){const re=()=>{try{return ne(K.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(B){return typeof console<"u"&&console.warn(B),ve(!1)}};return[K,a.runOutsideAngular(re)]}return[K,ve(!1)]},[s,q,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:o}=b$(r,i),a=this.schedulers.ngZone.run(()=>s);return new _$(a,o,this)}collectionGroup(e,i){const r=i||(o=>o),s=this.firestore.collectionGroup(e);return new Wme(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new p$(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(ie(ix),ie(rx,8),ie(v$,8),ie(qme,8),ie(Mo),ie(it),ie(aU),ie(y$,8),ie(Gme,8),ie(sx,8),ie(dU,8),ie(hU,8),ie(fU,8),ie(pU,8),ie(mU,8),ie(gU,8),ie(sU,8))};static \u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Yme=(()=>{class n{constructor(){Is.Z.registerVersion("angularfire",nx.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:v$,useValue:!0},{provide:y$,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=gt({type:n});static \u0275inj=vt({providers:[Ja]})}return n})(),Ks=(()=>{class n{constructor(e,i){this.afAuth=e,this.firestore=i,this.user$=this.afAuth.authState}login(e,i){var r=this;return(0,me.Z)(function*(){yield r.afAuth.signInWithEmailAndPassword(e,i)})()}register(e,i){var r=this;return(0,me.Z)(function*(){yield r.afAuth.createUserWithEmailAndPassword(e,i)})()}resetPassword(e){var i=this;return(0,me.Z)(function*(){yield i.afAuth.sendPasswordResetEmail(e)})()}logout(){var e=this;return(0,me.Z)(function*(){yield e.afAuth.signOut()})()}updateProfile(e,i,r,s,o){var a=this;return(0,me.Z)(function*(){const l=Is.Z.auth().currentUser;return l?(yield l.updateProfile({displayName:e}),a.firestore.collection("users").doc(l.uid).set({displayName:e,bio:i||"",company:r||"",position:s||"",team:o||""},{merge:!0})):Promise.reject("\u30e6\u30fc\u30b6\u30fc\u304c\u8a8d\u8a3c\u3055\u308c\u3066\u3044\u307e\u305b\u3093")})()}getUserById(e){return this.firestore.collection("users").doc(e).valueChanges()}getCurrentUser(){return Is.Z.auth().currentUser}getCurrentUserId(){const e=this.getCurrentUser();return e?e.uid:null}static#e=this.\u0275fac=function(i){return new(i||n)(ie(sx),ie(Ja))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Du=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i}getProjects(){return console.log("Fetching all projects from Firestore..."),this.firestore.collection("projects").valueChanges({idField:"id"})}getProjectById(e){return console.log(`Fetching project by ID: ${e}`),this.firestore.collection("projects").doc(e).valueChanges()}addProject(e){return this.firestore.collection("projects").doc(e.id).set(e).then(()=>{console.log(`Project with ID: ${e.id} successfully added.`)}).catch(i=>{throw console.error(`Error adding project with ID: ${e.id}`,i),i})}updateProject(e){return this.firestore.collection("projects").doc(e.id).update(e).then(()=>{console.log(`Project with ID: ${e.id} successfully updated.`)}).catch(i=>{throw console.error(`Error updating project with ID: ${e.id}`,i),i})}deleteProject(e){return e.id?(console.log(`Deleting project with ID: ${e.id}`),this.firestore.collection("projects").doc(e.id).delete().then(()=>console.log(`Project deleted successfully with ID: ${e.id}`)).catch(i=>{throw console.error(`Error deleting project with ID: ${e.id}`,i),i})):(console.error("Project ID is missing, cannot delete project",e),Promise.reject("Project ID is missing"))}addMemberToProject(e,i){return i?(console.log(`Adding member with ID: ${i} to project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({members:Is.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>{console.log(`Member with ID: ${i} added to project with ID: ${e} successfully`)}).catch(r=>{throw console.error(`Error adding member with ID: ${i} to project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot add member to project",e),Promise.reject("User ID is undefined"))}removeMemberFromProject(e,i){return i?(console.log(`Removing member with ID: ${i} from project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({members:Is.Z.firestore.FieldValue.arrayRemove(i)}).then(()=>console.log(`Member with ID: ${i} removed from project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error removing member with ID: ${i} from project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot remove member from project",e),Promise.reject("User ID is undefined"))}addOwnerToProject(e,i){return i?(console.log(`Adding owner with ID: ${i} to project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({owners:Is.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>{console.log(`Owner with ID: ${i} added to project with ID: ${e} successfully`)}).catch(r=>{throw console.error(`Error adding owner with ID: ${i} to project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot add owner to project",e),Promise.reject("User ID is undefined"))}removeOwnerFromProject(e,i){return i?(console.log(`Removing owner with ID: ${i} from project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({owners:Is.Z.firestore.FieldValue.arrayRemove(i)}).then(()=>console.log(`Owner with ID: ${i} removed from project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error removing owner with ID: ${i} from project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot remove owner from project",e),Promise.reject("User ID is undefined"))}getProjectsByOwnerOrMember(){return this.authService.user$.pipe(lt(e=>e?Md([this.firestore.collection("projects",s=>s.where("owners","array-contains",e.uid)).valueChanges({idField:"id"}),this.firestore.collection("projects",s=>s.where("members","array-contains",e.uid)).valueChanges({idField:"id"})]).pipe(Oe(([s,o])=>{const a=[...s,...o];return Array.from(new Set(a.map(c=>c.id))).map(c=>a.find(u=>u.id===c))})):ve([])))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ja),ie(Ks))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zme(n,t){1&n&&$t(0,"div",2)}function Kme(n,t){if(1&n){const e=je();y(0,"button",32),G("click",function(){return J(e),ee(V(2).saveTask())}),S(1,"\u4fdd\u5b58"),w()}}function Qme(n,t){if(1&n){const e=je();y(0,"button",32),G("click",function(){return J(e),ee(V(2).duplicateTask())}),S(1,"\u8907\u88fd"),w()}}function Xme(n,t){if(1&n){const e=je();y(0,"button",32),G("click",function(){return J(e),ee(V(2).cancel())}),S(1,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()}}function Jme(n,t){if(1&n){const e=je();y(0,"button",32),G("click",function(){return J(e),ee(V(2).duplicateAsMyTask())}),S(1,"\u81ea\u5206\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u8907\u88fd"),w()}}function ege(n,t){if(1&n){const e=je();y(0,"button",32),G("click",function(){return J(e),ee(V(2).cancel())}),S(1,"\u9589\u3058\u308b"),w()}}function tge(n,t){if(1&n&&(y(0,"option",33),S(1),w()),2&n){const e=t.$implicit;R("value",e.id),I(1),qe(e.name)}}function nge(n,t){if(1&n&&(y(0,"option",33),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}const Kl=function(n){return{"read-only":n}};function ige(n,t){if(1&n){const e=je();y(0,"div")(1,"label"),S(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),w(),y(3,"input",45),G("ngModelChange",function(r){return J(e),ee(V(3).editedTask.repeatSettings.daysOffsetFromEnd=r)}),w()()}if(2&n){const e=V(3);I(3),R("ngModel",e.editedTask.repeatSettings.daysOffsetFromEnd)("readonly",e.isReadOnly)("ngClass",nn(3,Kl,e.isReadOnly))}}function rge(n,t){if(1&n){const e=je();y(0,"div"),S(1),y(2,"button",30),G("click",function(){const s=J(e).$implicit;return ee(V(3).removeExcludeDate(s))}),S(3,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit,i=V(3);I(1),On(" ",e," "),I(1),R("disabled",i.isReadOnly)}}const iy=function(n){return{"read-only-select":n}};function sge(n,t){if(1&n){const e=je();y(0,"div",8)(1,"span",9),S(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),w(),y(3,"span",10)(4,"div",34)(5,"div")(6,"label"),S(7,"\u983b\u5ea6:"),w(),y(8,"select",12),G("ngModelChange",function(r){return J(e),ee(V(2).editedTask.repeatSettings.frequency=r)}),y(9,"option",35),S(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),w(),y(11,"option",36),S(12,"\u6bce\u65e5"),w(),y(13,"option",37),S(14,"\u6bce\u9031"),w(),y(15,"option",38),S(16,"\u6bce\u6708"),w(),y(17,"option",39),S(18,"\u6bce\u5e74"),w(),y(19,"option",40),S(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),w()()(),ce(21,ige,4,5,"div",41),y(22,"div")(23,"label"),S(24,"\u7d42\u4e86\u65e5:"),w(),y(25,"input",42),G("ngModelChange",function(r){return J(e),ee(V(2).editedTask.repeatSettings.endDate=r)}),w()(),y(26,"div")(27,"label"),S(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),w(),y(29,"input",43),G("ngModelChange",function(r){return J(e),ee(V(2).editedTask.repeatSettings.businessDaysOnly=r)}),w()(),y(30,"div")(31,"label"),S(32,"\u9664\u5916\u65e5:"),w(),y(33,"input",42),G("ngModelChange",function(r){return J(e),ee(V(2).excludeDate=r)}),w(),y(34,"button",30),G("click",function(){return J(e),ee(V(2).addExcludeDate())}),S(35,"\u8ffd\u52a0"),w(),ce(36,rge,4,2,"div",44),w()()()()}if(2&n){const e=V(2);I(8),R("ngModel",e.editedTask.repeatSettings.frequency)("disabled",e.isReadOnly)("ngClass",nn(14,iy,e.isReadOnly)),I(13),R("ngIf","monthlyFromEnd"===e.editedTask.repeatSettings.frequency),I(4),R("ngModel",e.editedTask.repeatSettings.endDate)("readonly",e.isReadOnly)("ngClass",nn(16,Kl,e.isReadOnly)),I(4),R("ngModel",e.editedTask.repeatSettings.businessDaysOnly)("disabled",e.isReadOnly),I(4),R("ngModel",e.excludeDate)("readonly",e.isReadOnly)("ngClass",nn(18,Kl,e.isReadOnly)),I(1),R("disabled",e.isReadOnly),I(2),R("ngForOf",e.editedTask.repeatSettings.excludeDates)}}const oge=function(n,t){return{selected:n,"read-only":t}},age=function(n){return{"background-color":n}};function lge(n,t){if(1&n){const e=je();y(0,"div",46),G("click",function(){const s=J(e).$implicit;return ee(V(2).selectColor(s))}),w()}if(2&n){const e=t.$implicit,i=V(2);Cs("cursor",i.isReadOnly?"not-allowed":"pointer"),R("ngClass",zi(4,oge,i.editedTask.tagColor===e,i.isReadOnly))("ngStyle",nn(7,age,e))}}function cge(n,t){if(1&n){const e=je();y(0,"li",47)(1,"span",48),S(2),w(),y(3,"button",30),G("click",function(){const s=J(e).index;return ee(V(2).deleteSubtask(s))}),S(4,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit,i=V(2);I(2),qe(e.title),I(1),R("disabled",i.isReadOnly)}}function uge(n,t){if(1&n){const e=je();y(0,"div",3)(1,"div",4)(2,"h2",5),S(3),w(),y(4,"div",6),ce(5,Kme,2,0,"button",7),ce(6,Qme,2,0,"button",7),ce(7,Xme,2,0,"button",7),ce(8,Jme,2,0,"button",7),ce(9,ege,2,0,"button",7),w()(),y(10,"div",8)(11,"span",9),S(12,"\u30bf\u30a4\u30c8\u30eb:"),w(),y(13,"span",10)(14,"input",11),G("ngModelChange",function(r){return J(e),ee(V().editedTask.title=r)}),w()()(),y(15,"div",8)(16,"span",9),S(17,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),w(),y(18,"span",10)(19,"select",12),G("ngModelChange",function(r){return J(e),ee(V().editedTask.projectId=r)}),y(20,"option",13),S(21,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),w(),ce(22,tge,2,2,"option",14),w()()(),y(23,"div",8)(24,"span",9),S(25,"\u8aac\u660e:"),w(),y(26,"span",10)(27,"textarea",15),G("ngModelChange",function(r){return J(e),ee(V().editedTask.description=r)}),w()()(),y(28,"div",8)(29,"span",9),S(30,"\u958b\u59cb\u65e5\u6642:"),w(),y(31,"span",10)(32,"input",16),G("ngModelChange",function(r){return J(e),ee(V().editedTask.startDateTime=r)}),w()()(),y(33,"div",8)(34,"span",9),S(35,"\u7d42\u4e86\u65e5\u6642:"),w(),y(36,"span",10)(37,"input",16),G("ngModelChange",function(r){return J(e),ee(V().editedTask.endDateTime=r)}),w()()(),y(38,"div",8)(39,"span",9),S(40,"\u901a\u77e5"),w(),y(41,"span",10)(42,"input",17),G("ngModelChange",function(r){return J(e),ee(V().editedTask.reminderTime.value=r)}),w(),y(43,"select",18),G("ngModelChange",function(r){return J(e),ee(V().editedTask.reminderTime.unit=r)}),ce(44,nge,2,2,"option",14),w()()(),ce(45,sge,37,20,"div",19),y(46,"div",8)(47,"span",9),S(48,"\u512a\u5148\u5ea6:"),w(),y(49,"span",10)(50,"select",12),G("ngModelChange",function(r){return J(e),ee(V().editedTask.priority=r)}),y(51,"option",20),S(52,"\u4f4e"),w(),y(53,"option",21),S(54,"\u4e2d"),w(),y(55,"option",22),S(56,"\u9ad8"),w()()()(),y(57,"div",8)(58,"span",9),S(59,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),w(),y(60,"span",10)(61,"select",12),G("ngModelChange",function(r){return J(e),ee(V().editedTask.status=r)}),y(62,"option",23),S(63,"\u672a\u7740\u624b"),w(),y(64,"option",24),S(65,"\u9032\u884c\u4e2d"),w(),y(66,"option",25),S(67,"\u5b8c\u4e86"),w()()()(),y(68,"div",8)(69,"span",9),S(70,"\u30bf\u30b0:"),w(),y(71,"span",10)(72,"input",26),G("ngModelChange",function(r){return J(e),ee(V().editedTask.tag=r)}),w()()(),y(73,"div",8)(74,"span",9),S(75,"\u30bf\u30b0\u306e\u8272:"),w(),y(76,"span",10)(77,"div",27),ce(78,lge,1,9,"div",28),w()()(),y(79,"div",29)(80,"h6"),S(81,"\u30b5\u30d6\u30bf\u30b9\u30af"),w(),y(82,"button",30),G("click",function(){return J(e),ee(V().addSubtask())}),S(83,"\u30b5\u30d6\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w(),y(84,"ul"),ce(85,cge,5,2,"li",31),w()()()}if(2&n){const e=V();I(3),On("",e.task.title," \u306e\u8a73\u7d30"),I(2),R("ngIf",!e.isReadOnly),I(1),R("ngIf",!e.isReadOnly),I(1),R("ngIf",!e.isReadOnly),I(1),R("ngIf",e.isReadOnly),I(1),R("ngIf",e.isReadOnly),I(5),R("ngModel",e.editedTask.title)("readonly",e.isReadOnly)("ngClass",nn(42,Kl,e.isReadOnly)),I(5),R("ngModel",e.editedTask.projectId)("disabled",e.isReadOnly)("ngClass",nn(44,iy,e.isReadOnly)),I(3),R("ngForOf",e.projects),I(5),R("ngModel",e.editedTask.description)("readonly",e.isReadOnly)("ngClass",nn(46,Kl,e.isReadOnly)),I(5),R("ngModel",e.editedTask.startDateTime)("disabled",e.isReadOnly)("ngClass",nn(48,Kl,e.isReadOnly)),I(5),R("ngModel",e.editedTask.endDateTime)("disabled",e.isReadOnly)("ngClass",nn(50,Kl,e.isReadOnly)),I(5),R("ngModel",e.editedTask.reminderTime.value)("readonly",e.isReadOnly)("ngClass",nn(52,Kl,e.isReadOnly)),I(1),R("ngModel",e.editedTask.reminderTime.unit)("disabled",e.isReadOnly)("ngClass",nn(54,iy,e.isReadOnly)),I(1),R("ngForOf",e.reminderUnits),I(1),R("ngIf",e.editedTask.repeatSettings),I(5),R("ngModel",e.editedTask.priority)("disabled",e.isReadOnly)("ngClass",nn(56,iy,e.isReadOnly)),I(11),R("ngModel",e.editedTask.status)("disabled",e.isReadOnly)("ngClass",nn(58,iy,e.isReadOnly)),I(11),R("ngModel",e.editedTask.tag)("readonly",e.isReadOnly)("ngClass",nn(60,Kl,e.isReadOnly)),I(6),R("ngForOf",e.colors),I(4),R("disabled",e.isReadOnly),I(3),R("ngForOf",e.editedTask.subtasks)}}let ry=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.reminderService=i,this.projectService=r,this.dialogRef=s,this.data=o,this.isReadOnly=!1,this.originalExcludeDates=[],this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",o&&o.task?(this.task=o.task,this.isReadOnly=o.isReadOnly,this.originalTask={...o.task},this.originalExcludeDates=o.task.repeatSettings?.excludeDates?[...o.task.repeatSettings.excludeDates]:[],this.editedTask=this.deepCopyTask(o.task)):(this.task={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:"",duration:0},this.originalTask={...this.task},this.editedTask=this.deepCopyTask(this.task))}ngOnInit(){this.projects$=this.projectService.getProjectsByOwnerOrMember(),this.projects$.subscribe(e=>{this.projects=e}),this.editedTask.reminderTime||(this.editedTask.reminderTime={value:null,unit:"\u5206"}),this.editedTask.subtasks||(this.editedTask.subtasks=[])}saveTask(){var e=this;return(0,me.Z)(function*(){if(!e.isReadOnly){if(e.editedTask.reminderTime&&null!==e.editedTask.reminderTime.value){const i=e.calculateReminderTime({value:e.editedTask.reminderTime.value,unit:e.editedTask.reminderTime.unit});e.reminderService.setReminder(e.editedTask,i)}try{e.editedTask.id?yield e.taskService.updateTask(e.editedTask):yield e.taskService.addTask(e.editedTask),e.dialogRef.close(e.editedTask)}catch(i){console.error("Error updating task:",i)}}})()}duplicateTask(){var e=this;return(0,me.Z)(function*(){const i={...e.editedTask,id:e.generateId(),userId:e.data.currentUserId,duration:e.editedTask.duration??0};yield e.taskService.addTask(i),e.dialogRef.close(i)})()}duplicateAsMyTask(){var e=this;return(0,me.Z)(function*(){const i={...e.editedTask,id:e.generateId(),userId:e.data.currentUserId,projectId:"",duration:e.editedTask.duration??0};yield e.taskService.addTask(i),e.dialogRef.close()})()}addSubtask(){if(this.isReadOnly)return;this.editedTask.subtasks||(this.editedTask.subtasks=[]);const e={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"};this.editedTask.subtasks.push(e)}deleteSubtask(e){this.isReadOnly||this.editedTask.subtasks&&this.editedTask.subtasks.splice(e,1)}cancel(){this.editedTask=this.deepCopyTask(this.originalTask),this.dialogRef.close(this.originalTask)}selectColor(e){this.isReadOnly||(this.editedTask.tagColor=e)}addExcludeDate(){this.isReadOnly||(this.editedTask.repeatSettings||(this.editedTask.repeatSettings={frequency:"none",businessDaysOnly:!1,excludeDates:[]}),this.editedTask.repeatSettings.excludeDates||(this.editedTask.repeatSettings.excludeDates=[]),this.excludeDate&&(this.editedTask.repeatSettings.excludeDates.push(this.excludeDate),this.excludeDate=""))}removeExcludeDate(e){this.isReadOnly||this.editedTask.repeatSettings&&this.editedTask.repeatSettings.excludeDates&&(this.editedTask.repeatSettings.excludeDates=this.editedTask.repeatSettings.excludeDates.filter(i=>i!==e))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}deepCopyTask(e){return{...e,subtasks:e.subtasks?e.subtasks.map(i=>({...i})):[],repeatSettings:e.repeatSettings?{...e.repeatSettings,excludeDates:e.repeatSettings.excludeDates?[...e.repeatSettings.excludeDates]:[]}:void 0,reminderTime:e.reminderTime?{...e.reminderTime}:void 0}}static#e=this.\u0275fac=function(i){return new(i||n)(z(el),z($k),z(Du),z($a),z(su))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-task-detail"]],inputs:{task:"task",isReadOnly:"isReadOnly"},standalone:!0,features:[wi],decls:2,vars:2,consts:[["class","modal-overlay",4,"ngIf"],["class","task-detail-container",4,"ngIf"],[1,"modal-overlay"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click",4,"ngIf"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","readonly","ngClass","ngModelChange"],[3,"ngModel","disabled","ngClass","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","readonly","ngClass","ngModelChange"],["type","datetime-local",3,"ngModel","disabled","ngClass","ngModelChange"],["type","number","min","1",1,"reminder-input",3,"ngModel","readonly","ngClass","ngModelChange"],[1,"reminder-select",3,"ngModel","disabled","ngClass","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],["placeholder","\u30bf\u30b0",3,"ngModel","readonly","ngClass","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","cursor","click",4,"ngFor","ngForOf"],[1,"subtask-container"],[3,"disabled","click"],["class","subtask-item",4,"ngFor","ngForOf"],[3,"click"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","readonly","ngClass","ngModelChange"],["type","checkbox",3,"ngModel","disabled","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","readonly","ngClass","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"],[1,"subtask-item"],[1,"subtask-title"]],template:function(i,r){1&i&&(ce(0,Zme,1,0,"div",0),ce(1,uge,86,62,"div",1)),2&i&&(R("ngIf",r.editedTask),I(1),R("ngIf",r.editedTask))},dependencies:[Cn,Ir,Ci,nr,Lo,ar,Ll,Vl,sr,iu,za,fa,or,Mp,qi],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}.read-only[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed}.read-only-select[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed;pointer-events:none}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})(),el=(()=>{class n{constructor(e,i,r,s){this.firestore=e,this.holidayService=i,this.dialog=r,this.authService=s,this.currentDialogRefs={},this.taskUpdatedSource=new le(null),this.taskUpdated$=this.taskUpdatedSource.asObservable()}getCurrentUserId(){return this.authService.getCurrentUserId()}getUserTasks(){return this.authService.user$.pipe(lt(e=>e?this.firestore.collection(`users/${e.uid}/tasks`).snapshotChanges().pipe(Oe(i=>i.map(r=>{const s=r.payload.doc.data();return{id:r.payload.doc.id,title:s.title,completed:s.completed,description:s.description,priority:s.priority,startDateTime:s.startDateTime,endDateTime:s.endDateTime,tag:s.tag,selected:s.selected,tagColor:s.tagColor,status:s.status,subtasks:s.subtasks,reminderTime:s.reminderTime,projectId:s.projectId,repeatSettings:s.repeatSettings,userId:s.userId,duration:s.duration}}))):ve([])))}getTasksByUserId(e){return this.firestore.collection(`users/${e}/tasks`).valueChanges()}getTasks(){const e=this.getCurrentUserId();return e?this.firestore.collection(`users/${e}/tasks`).valueChanges():ve([])}addTask(e){const i=this.getCurrentUserId();if(i){const r=this.firestore.createId(),s={...e,id:r,userId:i,duration:e.duration};return this.firestore.collection(`users/${i}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}return Promise.reject("User not authenticated")}updateTask(e){const i=this.getCurrentUserId();if(i)return console.log("Updating task for user:",i,e),console.log("Exclude dates before update:",e.repeatSettings?.excludeDates),this.firestore.collection(`users/${e.userId}/tasks`).doc(e.id).set(e,{merge:!0}).then(()=>{console.log("Task successfully updated in Firestore:",e),console.log("Exclude dates after update:",e.repeatSettings?.excludeDates),this.taskUpdatedSource.next()}).catch(r=>{throw console.error("Error updating task in Firestore:",r),r});{const r="User not authenticated";return console.error(r),Promise.reject(r)}}duplicateTask(e){const i=this.getCurrentUserId();if(i){const r=this.generateId(),s={...e,id:r,userId:i};return this.firestore.collection(`users/${i}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}return Promise.reject("User not authenticated")}deleteTask(e){return this.firestore.collection(`users/${e.userId}/tasks`).doc(e.id).delete().then(()=>{this.taskUpdatedSource.next()})}openTaskDetail(e){if(console.log("openTaskDetail called"),this.currentDialogRefs[e.id])return void console.log("Task detail is already open for this task:",e.id);const i=this.dialog.open(ry,{data:{task:e}});this.currentDialogRefs[e.id]=i,i.afterClosed().subscribe(()=>{console.log("Dialog closed for task:",e.id),delete this.currentDialogRefs[e.id]})}generateRecurringTasks(){var e=this;return(0,me.Z)(function*(){const i=(new Date).toISOString().split("T")[0];try{const r=yield e.holidayService.getHolidays(),s=yield e.firestore.collection("tasks").get().toPromise();s&&!s.empty&&s.forEach(o=>{const a=o.data();a.repeatSettings&&"monthlyFromEnd"===a.repeatSettings.frequency&&e.generateMonthlyFromEndTasks(a,i,r)})}catch(r){console.error("Failed to generate recurring tasks:",r)}})()}generateMonthlyFromEndTasks(e,i,r){let s=new Date(e.startDateTime);const o=e.repeatSettings.endDate?new Date(e.repeatSettings.endDate):null;for(;s.toISOString().split("T")[0]<=i&&(!o||s<=o);){let l=Ap(MC(s),e.repeatSettings.daysOffsetFromEnd);e.repeatSettings.businessDaysOnly&&(l=this.adjustForHolidaysAndWeekends(l,r)),l.toISOString().split("T")[0]<=i&&this.createTaskInstance(e,l.toISOString()),s.setMonth(s.getMonth()+1)}}adjustForHolidaysAndWeekends(e,i){for(;i.includes(e.toISOString().split("T")[0])||0===e.getDay()||6===e.getDay();)e.setDate(e.getDate()-1);return e}createTaskInstance(e,i){const r=this.generateId(),s={...e,id:r,startDateTime:i};this.firestore.collection(`users/${e.userId}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}generateId(){return Math.random().toString(36).substr(2,9)}getTasksByProjectIds(e){return 0===e.length?ve([]):(console.log("Fetching tasks for project IDs:",e),this.authService.user$.pipe(lt(i=>i?Md(e.map(s=>this.firestore.collection(`users/${i.uid}/tasks`,o=>(console.log(`Querying tasks for projectId: ${s}`),o.where("projectId","==",s))).valueChanges())).pipe(Oe(s=>{const o=s.flat();return console.log("Fetched tasks:",o),o})):ve([]))))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ja),ie(Z4),ie(Fp),ie(Ks))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dge(n,t){if(1&n&&(y(0,"option",22),S(1),w()),2&n){const e=t.$implicit;R("value",e.id),I(1),qe(e.name)}}function hge(n,t){if(1&n&&(y(0,"option",22),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function fge(n,t){if(1&n){const e=je();y(0,"div",6)(1,"span",7),S(2,"\u901a\u77e5:"),w(),y(3,"span",8)(4,"input",23),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.reminderTime.value=r)}),w(),y(5,"select",24),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.reminderTime.unit=r)}),ce(6,hge,2,2,"option",12),w()()()}if(2&n){const e=V(2);I(4),R("ngModel",e.newTask.reminderTime.value),I(1),R("ngModel",e.newTask.reminderTime.unit),I(1),R("ngForOf",e.reminderUnits)}}function pge(n,t){if(1&n){const e=je();y(0,"div")(1,"label"),S(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),w(),y(3,"input",36),G("ngModelChange",function(r){return J(e),ee(V(3).newTask.repeatSettings.daysOffsetFromEnd=r)}),w()()}if(2&n){const e=V(3);I(3),R("ngModel",e.newTask.repeatSettings.daysOffsetFromEnd)}}function mge(n,t){if(1&n){const e=je();y(0,"div"),S(1),y(2,"button",5),G("click",function(){const s=J(e).$implicit;return ee(V(3).removeExcludeDate(s))}),S(3,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e," ")}}function gge(n,t){if(1&n){const e=je();y(0,"div",6)(1,"span",7),S(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),w(),y(3,"span",8)(4,"div",25)(5,"div")(6,"label"),S(7,"\u983b\u5ea6:"),w(),y(8,"select",10),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.repeatSettings.frequency=r)}),y(9,"option",26),S(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),w(),y(11,"option",27),S(12,"\u6bce\u65e5"),w(),y(13,"option",28),S(14,"\u6bce\u9031"),w(),y(15,"option",29),S(16,"\u6bce\u6708"),w(),y(17,"option",30),S(18,"\u6bce\u5e74"),w(),y(19,"option",31),S(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),w()()(),ce(21,pge,4,1,"div",32),y(22,"div")(23,"label"),S(24,"\u7d42\u4e86\u65e5:"),w(),y(25,"input",33),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.repeatSettings.endDate=r)}),w()(),y(26,"div")(27,"label"),S(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),w(),y(29,"input",34),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.repeatSettings.businessDaysOnly=r)}),w()(),y(30,"div")(31,"label"),S(32,"\u9664\u5916\u65e5:"),w(),y(33,"input",33),G("ngModelChange",function(r){return J(e),ee(V(2).excludeDate=r)}),w(),y(34,"button",5),G("click",function(){return J(e),ee(V(2).addExcludeDate())}),S(35,"\u8ffd\u52a0"),w(),ce(36,mge,4,1,"div",35),w()()()()}if(2&n){const e=V(2);I(8),R("ngModel",e.newTask.repeatSettings.frequency),I(13),R("ngIf","monthlyFromEnd"===e.newTask.repeatSettings.frequency),I(4),R("ngModel",e.newTask.repeatSettings.endDate),I(4),R("ngModel",e.newTask.repeatSettings.businessDaysOnly),I(4),R("ngModel",e.excludeDate),I(3),R("ngForOf",e.newTask.repeatSettings.excludeDates)}}const _ge=function(n){return{selected:n}},vge=function(n){return{"background-color":n}};function yge(n,t){if(1&n){const e=je();y(0,"div",37),G("click",function(){const s=J(e).$implicit;return ee(V(2).selectColor(s))}),w()}if(2&n){const e=t.$implicit,i=V(2);R("ngClass",nn(2,_ge,i.newTask.tagColor===e))("ngStyle",nn(4,vge,e))}}function bge(n,t){if(1&n){const e=je();y(0,"div",1)(1,"div",2)(2,"h2",3),S(3,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w(),y(4,"div",4)(5,"button",5),G("click",function(){return J(e),ee(V().saveTask())}),S(6,"\u4fdd\u5b58"),w(),y(7,"button",5),G("click",function(){return J(e),ee(V().cancel())}),S(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()(),y(9,"div",6)(10,"span",7),S(11,"\u30bf\u30a4\u30c8\u30eb:"),w(),y(12,"span",8)(13,"input",9),G("ngModelChange",function(r){return J(e),ee(V().newTask.title=r)}),w()()(),y(14,"div",6)(15,"span",7),S(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),w(),y(17,"span",8)(18,"select",10),G("ngModelChange",function(r){return J(e),ee(V().newTask.projectId=r)}),y(19,"option",11),S(20,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),w(),ce(21,dge,2,2,"option",12),w()()(),y(22,"div",6)(23,"span",7),S(24,"\u8aac\u660e:"),w(),y(25,"span",8)(26,"textarea",13),G("ngModelChange",function(r){return J(e),ee(V().newTask.description=r)}),w()()(),y(27,"div",6)(28,"span",7),S(29,"\u958b\u59cb\u65e5\u6642:"),w(),y(30,"span",8)(31,"input",14),G("ngModelChange",function(r){return J(e),ee(V().newTask.startDateTime=r)}),w()()(),y(32,"div",6)(33,"span",7),S(34,"\u7d42\u4e86\u65e5\u6642:"),w(),y(35,"span",8)(36,"input",14),G("ngModelChange",function(r){return J(e),ee(V().newTask.endDateTime=r)}),w()()(),ce(37,fge,7,3,"div",15),ce(38,gge,37,6,"div",15),y(39,"div",6)(40,"span",7),S(41,"\u512a\u5148\u5ea6:"),w(),y(42,"span",8)(43,"select",10),G("ngModelChange",function(r){return J(e),ee(V().newTask.priority=r)}),y(44,"option",16),S(45,"\u4f4e"),w(),y(46,"option",17),S(47,"\u4e2d"),w(),y(48,"option",18),S(49,"\u9ad8"),w()()()(),y(50,"div",6)(51,"span",7),S(52,"\u30bf\u30b0:"),w(),y(53,"span",8)(54,"input",19),G("ngModelChange",function(r){return J(e),ee(V().newTask.tag=r)}),w()()(),y(55,"div",6)(56,"span",7),S(57,"\u30bf\u30b0\u306e\u8272:"),w(),y(58,"span",8)(59,"div",20),ce(60,yge,1,6,"div",21),w()()()()}if(2&n){const e=V();I(13),R("ngModel",e.newTask.title),I(5),R("ngModel",e.newTask.projectId),I(3),R("ngForOf",e.projects),I(5),R("ngModel",e.newTask.description),I(5),R("ngModel",e.newTask.startDateTime),I(5),R("ngModel",e.newTask.endDateTime),I(1),R("ngIf",e.newTask.reminderTime),I(1),R("ngIf",e.newTask.repeatSettings),I(5),R("ngModel",e.newTask.priority),I(11),R("ngModel",e.newTask.tag),I(6),R("ngForOf",e.colors)}}let vR=(()=>{class n{constructor(e,i,r,s){this.dialogRef=e,this.reminderService=i,this.projectService=r,this.taskService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",this.currentUserUid=null,this.newTask={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",daysOffsetFromEnd:1,endDate:"",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:0,unit:"\u5206"},userId:"",duration:0}}ngOnInit(){const e=this.taskService.getCurrentUserId();e&&(this.newTask.userId=e,this.currentUserUid=e),this.projects$=this.projectService.getProjects(),this.projects$.subscribe(i=>{this.projects=i.filter(r=>r.members.includes(this.currentUserUid)||r.owners.includes(this.currentUserUid))})}saveTask(){var e=this;return(0,me.Z)(function*(){try{if(e.newTask.startDateTime&&e.newTask.reminderTime&&null!==e.newTask.reminderTime.value){const i=e.calculateReminderTime({value:e.newTask.reminderTime.value,unit:e.newTask.reminderTime.unit});e.reminderService.setReminder(e.newTask,i)}yield e.taskService.addTask(e.newTask),e.dialogRef.close(e.newTask)}catch(i){console.error("Failed to save task:",i)}})()}cancel(){this.dialogRef.close()}selectColor(e){this.newTask.tagColor=e}addExcludeDate(){this.excludeDate&&(this.newTask.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(e){this.newTask.repeatSettings?.excludeDates&&(this.newTask.repeatSettings.excludeDates=this.newTask.repeatSettings.excludeDates.filter(i=>i!==e))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(i){return new(i||n)(z($a),z($k),z(Du),z(el))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-task-add"]],standalone:!0,features:[wi],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"]],template:function(i,r){1&i&&ce(0,bge,61,11,"div",0),2&i&&R("ngIf",r.newTask)},dependencies:[Cn,Ir,Ci,nr,Lo,ar,Ll,Vl,sr,iu,za,fa,or,Mp,qi],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})();function aE(n,t){let e=Ft(n);return isNaN(+e)?ha(n,NaN):(null!=t.year&&e.setFullYear(t.year),null!=t.month&&(e=a5(e,t.month)),null!=t.date&&e.setDate(t.date),null!=t.hours&&e.setHours(t.hours),null!=t.minutes&&e.setMinutes(t.minutes),null!=t.seconds&&e.setSeconds(t.seconds),null!=t.milliseconds&&e.setMilliseconds(t.milliseconds),e)}function w$(n,t){return Ud(n,12*t)}function yR(n){const t=Ft(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function Ege(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function Dge(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function Tge(n,t){if(1&n){const e=je();y(0,"div",18)(1,"h3"),S(2),Zt(3,"date"),w(),y(4,"mwl-calendar-month-view",15),G("eventClicked",function(r){return J(e),ee(V(2).handleEvent("Clicked",r.event))}),w()()}if(2&n){const e=V(2);I(2),qe(ei(3,3,e.compareDate,"yyyy\u5e74MM\u6708")),I(2),R("viewDate",e.compareDate)("events",e.allEvents)}}const bR=function(n){return{"compare-active":n}},wR=function(n){return{"full-width":n}};function Sge(n,t){if(1&n){const e=je();y(0,"div")(1,"div",5)(2,"label",6),S(3,"\u5e74:"),w(),y(4,"select",7),G("ngModelChange",function(r){return J(e),ee(V().selectedYear=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(5,Ege,2,2,"option",8),w(),y(6,"label",9),S(7,"\u6708:"),w(),y(8,"select",10),G("ngModelChange",function(r){return J(e),ee(V().selectedMonth=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(9,Dge,2,2,"option",8),w(),y(10,"label",11),S(11,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),w(),y(12,"input",12),G("ngModelChange",function(r){return J(e),ee(V().compareMode=r)})("change",function(){return J(e),ee(V().toggleCompareMode())}),w()(),y(13,"div",13)(14,"div",14)(15,"h3"),S(16),Zt(17,"date"),w(),y(18,"mwl-calendar-month-view",15),G("eventClicked",function(r){return J(e),ee(V().handleEvent("Clicked",r.event))}),w()(),ce(19,Tge,5,6,"div",16),w()()}if(2&n){const e=V();I(4),R("ngModel",e.selectedYear),I(1),R("ngForOf",e.years),I(3),R("ngModel",e.selectedMonth),I(1),R("ngForOf",e.months),I(3),R("ngModel",e.compareMode),I(1),R("ngClass",nn(14,bR,e.compareMode)),I(1),R("ngClass",nn(16,wR,!e.compareMode)),I(2),qe(ei(17,11,e.viewDate,"yyyy\u5e74MM\u6708")),I(2),R("viewDate",e.viewDate)("events",e.allEvents),I(1),R("ngIf",e.compareMode)}}function Ige(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function Age(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function kge(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function Mge(n,t){if(1&n){const e=je();y(0,"div",18)(1,"h3"),S(2),w(),y(3,"mwl-calendar-week-view",15),G("eventClicked",function(r){return J(e),ee(V(2).handleEvent("Clicked",r.event))}),w()()}if(2&n){const e=V(2);I(2),qe(e.getCompareWeekRange()),I(1),R("viewDate",e.compareDate)("events",e.getNonHolidayEvents())}}function Rge(n,t){if(1&n){const e=je();y(0,"div")(1,"div",5)(2,"label",6),S(3,"\u5e74:"),w(),y(4,"select",7),G("ngModelChange",function(r){return J(e),ee(V().selectedYear=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(5,Ige,2,2,"option",8),w(),y(6,"label",9),S(7,"\u6708:"),w(),y(8,"select",10),G("ngModelChange",function(r){return J(e),ee(V().selectedMonth=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(9,Age,2,2,"option",8),w(),y(10,"label",19),S(11,"\u9031\u76ee:"),w(),y(12,"select",20),G("ngModelChange",function(r){return J(e),ee(V().selectedWeek=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(13,kge,2,2,"option",8),w(),y(14,"label",11),S(15,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),w(),y(16,"input",12),G("ngModelChange",function(r){return J(e),ee(V().compareMode=r)})("change",function(){return J(e),ee(V().toggleCompareMode())}),w()(),y(17,"div",13)(18,"div",14)(19,"h3"),S(20),w(),y(21,"mwl-calendar-week-view",15),G("eventClicked",function(r){return J(e),ee(V().handleEvent("Clicked",r.event))}),w()(),ce(22,Mge,4,3,"div",16),w()()}if(2&n){const e=V();I(4),R("ngModel",e.selectedYear),I(1),R("ngForOf",e.years),I(3),R("ngModel",e.selectedMonth),I(1),R("ngForOf",e.months),I(3),R("ngModel",e.selectedWeek),I(1),R("ngForOf",e.monthWeeks),I(3),R("ngModel",e.compareMode),I(1),R("ngClass",nn(13,bR,e.compareMode)),I(1),R("ngClass",nn(15,wR,!e.compareMode)),I(2),qe(e.getWeekRange()),I(1),R("viewDate",e.viewDate)("events",e.getNonHolidayEvents()),I(1),R("ngIf",e.compareMode)}}function Pge(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function Oge(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function Fge(n,t){if(1&n&&(y(0,"option",17),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function Nge(n,t){if(1&n){const e=je();y(0,"div",18)(1,"h3"),S(2),Zt(3,"date"),w(),y(4,"mwl-calendar-day-view",15),G("eventClicked",function(r){return J(e),ee(V(2).handleEvent("Clicked",r.event))}),w()()}if(2&n){const e=V(2);I(2),qe(ei(3,3,e.compareDate,"yyyy\u5e74MM\u6708dd\u65e5")),I(2),R("viewDate",e.compareDate)("events",e.getNonHolidayEvents())}}function Lge(n,t){if(1&n){const e=je();y(0,"div")(1,"div",5)(2,"label",6),S(3,"\u5e74:"),w(),y(4,"select",7),G("ngModelChange",function(r){return J(e),ee(V().selectedYear=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(5,Pge,2,2,"option",8),w(),y(6,"label",9),S(7,"\u6708:"),w(),y(8,"select",10),G("ngModelChange",function(r){return J(e),ee(V().selectedMonth=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(9,Oge,2,2,"option",8),w(),y(10,"label",21),S(11,"\u65e5:"),w(),y(12,"select",22),G("ngModelChange",function(r){return J(e),ee(V().selectedDay=r)})("change",function(){return J(e),ee(V().onYearMonthOrWeekChange())}),ce(13,Fge,2,2,"option",8),w(),y(14,"label",11),S(15,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),w(),y(16,"input",12),G("ngModelChange",function(r){return J(e),ee(V().compareMode=r)})("change",function(){return J(e),ee(V().toggleCompareMode())}),w()(),y(17,"div",13)(18,"div",14)(19,"h3"),S(20),Zt(21,"date"),w(),y(22,"mwl-calendar-day-view",15),G("eventClicked",function(r){return J(e),ee(V().handleEvent("Clicked",r.event))}),w()(),ce(23,Nge,5,6,"div",16),w()()}if(2&n){const e=V();I(4),R("ngModel",e.selectedYear),I(1),R("ngForOf",e.years),I(3),R("ngModel",e.selectedMonth),I(1),R("ngForOf",e.months),I(3),R("ngModel",e.selectedDay),I(1),R("ngForOf",e.daysInMonth),I(3),R("ngModel",e.compareMode),I(1),R("ngClass",nn(16,bR,e.compareMode)),I(1),R("ngClass",nn(18,wR,!e.compareMode)),I(2),qe(ei(21,13,e.viewDate,"yyyy\u5e74MM\u6708dd\u65e5")),I(2),R("viewDate",e.viewDate)("events",e.getNonHolidayEvents()),I(1),R("ngIf",e.compareMode)}}let Vge=(()=>{class n{constructor(e,i,r){this.taskService=e,this.holidayService=i,this.dialog=r,this.view=Bo.Week,this.viewDate=new Date,this.compareDate=new Date,this.events=[],this.holidayEvents=[],this.allEvents=[],this.holidays=[],this.compareMode=!1,this.selectedYear=(new Date).getFullYear(),this.selectedMonth=(new Date).getMonth()+1,this.selectedDay=(new Date).getDate(),this.selectedWeek=1,this.years=[2023,2024,2025],this.months=[1,2,3,4,5,6,7,8,9,10,11,12],this.daysInMonth=[],this.monthWeeks=[],this.CalendarView=Bo}ngOnInit(){console.log("Initializing CalendarComponent..."),this.loadHolidays(),this.updateMonthWeeks(),this.updateDaysInMonth(),this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay)}loadHolidays(){console.log("Loading holidays..."),ne(this.holidayService.getHolidays()).subscribe(e=>{this.holidays=Object.keys(e).map(i=>new Date(i)),this.holidayEvents=this.holidays.map(i=>({start:i,title:e[i.toISOString().split("T")[0]],color:{primary:"#e3bc08",secondary:"#FDF1BA"}})),console.log("Holidays loaded:",this.holidayEvents),this.loadEvents(),this.updateAllEvents()},e=>{console.error("Failed to load holidays:",e)})}loadEvents(){console.log("Loading events..."),this.taskService.getTasks().subscribe(e=>{this.events=this.generateEventsFromTasks(e),console.log("Events loaded:",this.events),this.updateAllEvents()})}generateEventsFromTasks(e){console.log("Generating events from tasks...");const i=[];return e.forEach(r=>{if(r.repeatSettings)i.push(...this.generateRecurringEvents(r));else{const s=new Date(r.startDateTime),o=new Date(r.endDateTime);if(isNaN(s.getTime())||isNaN(o.getTime()))return void console.error(`Invalid date for task: ${r.title}`);if(s>o)return void console.warn(`Start date is after end date for task: ${r.title}`);i.push({start:s,end:o,title:r.title,color:r.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:r})}}),console.log("Events generated:",i),i}generateRecurringEvents(e){console.log("Generating recurring events for task:",e.title);const i=[],r=new Date(e.startDateTime),s=new Date(e.endDateTime),o=e.repeatSettings;if(isNaN(r.getTime())||isNaN(s.getTime())||!o)return console.error(`Invalid date or repeat settings for task: ${e.title}`),i;if("none"===o.frequency)return i.push({start:r,end:s,title:e.title,color:e.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:e}),i;let a=r,l=s;const c=o.endDate?new Date(o.endDate):null,u=1e3;let f=0;for(;(!c||a<=c)&&f<u;){if("monthlyFromEnd"===o.frequency&&void 0!==o.daysOffsetFromEnd&&(a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd),a=aE(a,{hours:r.getHours(),minutes:r.getMinutes()}),l=aE(a,{hours:s.getHours(),minutes:s.getMinutes()})),a>l)return console.warn(`Start date is after end date for recurring task: ${e.title}`),i;!this.isExcludedDate(a,o.excludeDates)&&(!o.businessDaysOnly||!this.isHolidayOrWeekend(a))&&i.push({start:a,end:l,title:e.title,color:e.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:e});let g=!1;for(;!g;){switch(o.frequency){case"daily":a=Sp(a,1),l=Sp(l,1),g=!0;break;case"weekly":a=Ip(a,1),l=Ip(l,1),g=!0;break;case"monthly":a=Ud(a,1),l=Ud(l,1),g=!0;break;case"yearly":a=w$(a,1),l=w$(l,1),g=!0;break;case"monthlyFromEnd":a=Ud(a,1),l=Ud(l,1),a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd??0),a=aE(a,{hours:r.getHours(),minutes:r.getMinutes()}),l=aE(a,{hours:s.getHours(),minutes:s.getMinutes()}),g=!0;break;default:console.warn(`Unknown repeat frequency: ${o.frequency}`),f=u,g=!0}o.businessDaysOnly&&this.isHolidayOrWeekend(a)&&(g=!1)}f++}return f===u&&console.warn(`Max iterations reached for task: ${e.title}`),console.log("Recurring events generated:",i),i}isExcludedDate(e,i){return!!i&&i.some(r=>{const s=new Date(r);return e.getFullYear()===s.getFullYear()&&e.getMonth()===s.getMonth()&&e.getDate()===s.getDate()})}calculateMonthlyFromEndDate(e,i){let r=Ap(yR(e),i),s=0;for(let o=Ap(yR(e),i);o<=yR(e);o=Sp(o,1))this.isHolidayOrWeekend(o)&&s++;for(r=Ap(r,s);this.isHolidayOrWeekend(r);)r=Ap(r,1);return console.log(`Final target date: ${r}`),r}isHolidayOrWeekend(e){const i=e.getDay(),r=0===i||6===i,s=this.holidays.some(o=>o.getFullYear()===e.getFullYear()&&o.getMonth()===e.getMonth()&&o.getDate()===e.getDate());return console.log(`Date: ${e}, isWeekend: ${r}, isHoliday: ${s}`),r||s}updateAllEvents(){this.allEvents=[...this.events,...this.holidayEvents],console.log("All events updated:",this.allEvents)}getNonHolidayEvents(){return this.allEvents.filter(e=>!this.holidayEvents.some(i=>i.start.getTime()===e.start.getTime()))}handleEvent(e,i){console.log(`Event ${e} - ${i.title}`),i.meta&&(this.dialog.closeAll(),this.dialog.open(ry,{width:"600px",data:{task:i.meta}}).afterClosed().subscribe(s=>{s&&(console.log("Event details updated:",s),this.taskService.updateTask(s).then(()=>{this.loadEvents()}))}))}setView(e){console.log(`View changed to ${e}`),this.view=e}addTask(){console.log("Adding new task..."),this.dialog.open(vR,{width:"600px",maxHeight:"80vh",panelClass:"custom-dialog-container"}).afterClosed().subscribe(i=>{i&&(console.log("New task added:",i),this.loadEvents())})}previousPeriod(){switch(console.log("Moving to previous period..."),this.view){case Bo.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()-1));break;case Bo.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-7));break;case Bo.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-1))}console.log("New view date:",this.viewDate)}nextPeriod(){switch(console.log("Moving to next period..."),this.view){case Bo.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()+1));break;case Bo.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+7));break;case Bo.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+1))}console.log("New view date:",this.viewDate)}getWeekRange(){const e=ja(this.viewDate),i=ok(this.viewDate);return`${e.getFullYear()}\u5e74${("0"+(e.getMonth()+1)).slice(-2)}\u6708${("0"+e.getDate()).slice(-2)}\u65e5\uff5e${i.getFullYear()}\u5e74${("0"+(i.getMonth()+1)).slice(-2)}\u6708${("0"+i.getDate()).slice(-2)}\u65e5`}getCompareWeekRange(){const e=ja(this.compareDate),i=ok(this.compareDate);return`${e.getFullYear()}\u5e74${("0"+(e.getMonth()+1)).slice(-2)}\u6708${("0"+e.getDate()).slice(-2)}\u65e5\uff5e${i.getFullYear()}\u5e74${("0"+(i.getMonth()+1)).slice(-2)}\u6708${("0"+i.getDate()).slice(-2)}\u65e5`}updateMonthWeeks(){const e=RC(new Date(this.selectedYear,this.selectedMonth-1)),i=MC(new Date(this.selectedYear,this.selectedMonth-1));this.monthWeeks=function wge(n,t){const e=Ft(n.start),i=Ft(n.end);let r=+e>+i;const s=ja(r?i:e,t),o=ja(r?e:i,t);s.setHours(15),o.setHours(15);const a=+o.getTime();let l=s,c=t?.step??1;if(!c)return[];c<0&&(c=-c,r=!r);const u=[];for(;+l<=a;)l.setHours(0),u.push(Ft(l)),l=Ip(l,c),l.setHours(15);return r?u.reverse():u}({start:e,end:i},{weekStartsOn:0}).map((r,s)=>s+1)}updateDaysInMonth(){const e=RC(new Date(this.selectedYear,this.selectedMonth-1)),i=MC(new Date(this.selectedYear,this.selectedMonth-1));this.daysInMonth=function Cge(n,t){const e=Ft(n.start),i=Ft(n.end);let r=+e>+i;const s=r?+e:+i,o=r?i:e;o.setHours(0,0,0,0);let a=t?.step??1;if(!a)return[];a<0&&(a=-a,r=!r);const l=[];for(;+o<=s;)l.push(Ft(o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return r?l.reverse():l}({start:e,end:i}).map(r=>r.getDate())}onYearMonthOrWeekChange(){if(this.updateMonthWeeks(),this.updateDaysInMonth(),this.compareMode)switch(this.view){case Bo.Month:this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,1);break;case Bo.Week:const e=RC(new Date(this.selectedYear,this.selectedMonth-1));this.compareDate=Ip(e,this.selectedWeek-1);break;case Bo.Day:this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay)}}toggleCompareMode(){this.compareMode&&this.onYearMonthOrWeekChange()}getWeekNumber(e){const i=new Date(e.getFullYear(),0,1),r=Math.floor((e.getTime()-i.getTime())/864e5);return Math.ceil((r+i.getDay()+1)/7)}isSameWeek(e,i){return function xge(n,t,e){return+ja(n,e)==+ja(t,e)}(e,i)}isSameDay(e,i){return s5(e,i)}static#e=this.\u0275fac=function(i){return new(i||n)(z(el),z(Z4),z(Fp))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-calendar"]],standalone:!0,features:[ln([ev,X_,J_,IC,{provide:jd,useFactory:l5}]),wi],decls:19,vars:3,consts:[[1,"container"],[1,"button-container"],[1,"action-button",3,"click"],[1,"action-button","add-task-button",3,"click"],[4,"ngIf"],[1,"comparison-settings"],["for","year"],["id","year",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","month"],["id","month",3,"ngModel","ngModelChange","change"],["for","compare"],["type","checkbox","id","compare",3,"ngModel","ngModelChange","change"],[1,"calendar-comparison",3,"ngClass"],[1,"calendar-left",3,"ngClass"],[3,"viewDate","events","eventClicked"],["class","calendar-right",4,"ngIf"],[3,"value"],[1,"calendar-right"],["for","week"],["id","week",3,"ngModel","ngModelChange","change"],["for","day"],["id","day",3,"ngModel","ngModelChange","change"]],template:function(i,r){1&i&&(y(0,"div",0)(1,"h2"),S(2,"\u30ab\u30ec\u30f3\u30c0\u30fc"),w(),y(3,"div",1)(4,"button",2),G("click",function(){return r.setView(r.CalendarView.Month)}),S(5,"\u6708\u30d3\u30e5\u30fc"),w(),y(6,"button",2),G("click",function(){return r.setView(r.CalendarView.Week)}),S(7,"\u9031\u30d3\u30e5\u30fc"),w(),y(8,"button",2),G("click",function(){return r.setView(r.CalendarView.Day)}),S(9,"\u65e5\u30d3\u30e5\u30fc"),w(),y(10,"button",2),G("click",function(){return r.previousPeriod()}),S(11,"\u524d\u306e\u671f\u9593"),w(),y(12,"button",2),G("click",function(){return r.nextPeriod()}),S(13,"\u6b21\u306e\u671f\u9593"),w(),y(14,"button",3),G("click",function(){return r.addTask()}),S(15,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w()(),ce(16,Sge,20,18,"div",4),ce(17,Rge,23,17,"div",4),ce(18,Lge,24,20,"div",4),w()),2&i&&(I(16),R("ngIf",r.view===r.CalendarView.Month),I(1),R("ngIf",r.view===r.CalendarView.Week),I(1),R("ngIf",r.view===r.CalendarView.Day))},dependencies:[Cn,Ir,Ci,nr,I_,Y4,Mae,G4,Vae,Tp,ik,rk,kC,ar,Ll,Vl,za,fa,or,qi,fce],styles:[".container[_ngcontent-%COMP%]{max-width:100%;margin:0;padding:20px;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:8px;height:98%;width:95%}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-start;margin-bottom:20px}.action-button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}.action-button[_ngcontent-%COMP%]:hover{background-color:#bbb}.add-task-button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}.add-task-button[_ngcontent-%COMP%]:hover{background-color:#bbb}.comparison-settings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.comparison-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:4px;font-size:12px;width:auto}.comparison-settings[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px}.calendar-comparison[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;align-items:flex-start}.calendar-left[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.calendar-right[_ngcontent-%COMP%]{width:46%;display:flex;flex-direction:column}.compare-active[_ngcontent-%COMP%]   .calendar-left[_ngcontent-%COMP%]{width:46%}.full-width[_ngcontent-%COMP%]{width:95%}"]})}return n})();function Bge(n,t){if(1&n){const e=je();y(0,"li"),S(1),y(2,"button",2),G("click",function(){const s=J(e).$implicit;return ee(V().addMember(s))}),S(3,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),w(),y(4,"button",2),G("click",function(){const s=J(e).$implicit;return ee(V().addOwner(s))}),S(5,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e.displayName," ")}}let C$=(()=>{class n{constructor(e){this.firestore=e,this.searchTerm="",this.users=[],this.userSelected=new We}searchUsers(){this.users=[],this.firestore.collection("users",e=>e.where("displayName","==",this.searchTerm).limit(10)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("email","==",this.searchTerm).limit(10)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("uid","==",this.searchTerm).limit(10)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})})}addMember(e){this.userSelected.emit({user:e,role:"member"})}addOwner(e){this.userSelected.emit({user:e,role:"owner"})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ja))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-project-user-search"]],outputs:{userSelected:"userSelected"},standalone:!0,features:[wi],decls:6,vars:2,consts:[[1,"search-container"],["placeholder","\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b",1,"input-field",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(i,r){1&i&&(y(0,"div",0)(1,"input",1),G("ngModelChange",function(o){return r.searchTerm=o}),w(),y(2,"button",2),G("click",function(){return r.searchUsers()}),S(3,"\u691c\u7d22"),w()(),y(4,"ul"),ce(5,Bge,6,1,"li",3),w()),2&i&&(I(1),R("ngModel",r.searchTerm),I(4),R("ngForOf",r.users))},dependencies:[Cn,Ci,ar,sr,or,qi],styles:[".search-container[_ngcontent-%COMP%]{display:flex;gap:5px;margin:10px 0;width:100%}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px;border-radius:5px;border:1px solid #ccc;width:100%;box-sizing:border-box}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#bbb}"]})}return n})(),CR=(()=>{class n{constructor(e){this.firestore=e}getUserById(e){return this.firestore.collection("users").doc(e).valueChanges()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ja))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jge=function(n,t){return{"background-color":n,border:t}};function Uge(n,t){if(1&n){const e=je();y(0,"div",13),G("click",function(){const s=J(e).$implicit;return ee(V().newProject.color=s)}),w()}if(2&n){const e=t.$implicit,i=V();R("ngStyle",zi(1,jge,e,i.newProject.color===e?"3px solid black":"1px solid #000"))}}function zge(n,t){if(1&n){const e=je();y(0,"button",3),G("click",function(){J(e);const r=V().$implicit;return ee(V().removeOwner(r))}),S(1,"\u524a\u9664"),w()}}function Hge(n,t){if(1&n&&(y(0,"li"),S(1),ce(2,zge,2,0,"button",14),w()),2&n){const e=t.$implicit,i=V();I(1),On(" ",e.displayName," "),I(1),R("ngIf",e.uid!==i.currentUserUid)}}function $ge(n,t){if(1&n){const e=je();y(0,"li"),S(1),y(2,"button",3),G("click",function(){const s=J(e).$implicit;return ee(V().removeMember(s))}),S(3,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e.displayName," ")}}function Wge(n,t){if(1&n){const e=je();y(0,"li"),S(1),y(2,"button",3),G("click",function(){const s=J(e).$implicit;return ee(V().addMember(s))}),S(3,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),w(),y(4,"button",3),G("click",function(){const s=J(e).$implicit;return ee(V().addOwner(s))}),S(5,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e.displayName," ")}}let x$=(()=>{class n{constructor(e,i,r,s){this.dialogRef=e,this.projectService=i,this.authService=r,this.userService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.newProject={id:this.generateId(),name:"",description:"",startDate:"",endDate:"",color:"white",tasks:[],members:[],owners:[]},this.members=[],this.owners=[],this.searchedUsers=[]}ngOnInit(){this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid,this.currentUserUid&&(this.newProject.owners.push(this.currentUserUid),this.userService.getUserById(this.currentUserUid).subscribe(i=>{i&&this.owners.push({...i,uid:this.currentUserUid})}))})}saveProject(){var e=this;return(0,me.Z)(function*(){try{yield e.projectService.addProject(e.newProject),e.dialogRef.close(e.newProject)}catch(i){console.error("Error saving project:",i)}})()}cancel(){this.dialogRef.close()}handleUserSelected(e){const{user:i,role:r}=e;"member"===r?this.addMember(i):"owner"===r&&this.addOwner(i)}addMember(e){this.newProject.members.includes(e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002"):(this.newProject.members.push(e.uid),this.members.push(e))}addOwner(e){this.newProject.owners.includes(e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002"):(this.newProject.owners.push(e.uid),this.owners.push(e))}removeMember(e){this.newProject.members=this.newProject.members.filter(i=>i!==e.uid),this.members=this.members.filter(i=>i.uid!==e.uid)}removeOwner(e){e.uid!==this.currentUserUid&&(this.newProject.owners=this.newProject.owners.filter(i=>i!==e.uid),this.owners=this.owners.filter(i=>i.uid!==e.uid))}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(i){return new(i||n)(z($a),z(Du),z(Ks),z(CR))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-project-add"]],standalone:!0,features:[wi],decls:42,vars:8,consts:[[1,"project-detail-container"],[1,"header"],[1,"buttons"],[3,"click"],[1,"form-group"],["placeholder","\u540d\u524d",1,"input-field",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",1,"input-field",3,"ngModel","ngModelChange"],[1,"form-group","dates"],["type","date",1,"input-field",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[1,"color-option",3,"ngStyle","click"],[3,"click",4,"ngIf"]],template:function(i,r){1&i&&(y(0,"div",0)(1,"div",1)(2,"h2"),S(3,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),w(),y(4,"div",2)(5,"button",3),G("click",function(){return r.saveProject()}),S(6,"\u4fdd\u5b58"),w(),y(7,"button",3),G("click",function(){return r.cancel()}),S(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()(),y(9,"div",4)(10,"label"),S(11,"\u540d\u524d: "),y(12,"input",5),G("ngModelChange",function(o){return r.newProject.name=o}),w()()(),y(13,"div",4)(14,"label"),S(15,"\u8aac\u660e: "),y(16,"textarea",6),G("ngModelChange",function(o){return r.newProject.description=o}),w()()(),y(17,"div",7)(18,"label"),S(19,"\u958b\u59cb\u65e5: "),y(20,"input",8),G("ngModelChange",function(o){return r.newProject.startDate=o}),w()(),y(21,"label"),S(22,"\u7d42\u4e86\u65e5: "),y(23,"input",8),G("ngModelChange",function(o){return r.newProject.endDate=o}),w()()(),y(24,"div",4)(25,"label"),S(26,"\u8272:"),w(),y(27,"div",9),ce(28,Uge,1,4,"div",10),w()(),y(29,"h4"),S(30,"\u30aa\u30fc\u30ca\u30fc"),w(),y(31,"ul"),ce(32,Hge,3,2,"li",11),w(),y(33,"h4"),S(34,"\u30e1\u30f3\u30d0\u30fc"),w(),y(35,"ul"),ce(36,$ge,4,1,"li",11),w(),y(37,"h4"),S(38,"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22"),w(),y(39,"app-project-user-search",12),G("userSelected",function(o){return r.handleUserSelected(o)}),w(),y(40,"ul"),ce(41,Wge,6,1,"li",11),w()()),2&i&&(I(12),R("ngModel",r.newProject.name),I(4),R("ngModel",r.newProject.description),I(4),R("ngModel",r.newProject.startDate),I(3),R("ngModel",r.newProject.endDate),I(5),R("ngForOf",r.colors),I(4),R("ngForOf",r.owners),I(4),R("ngForOf",r.members),I(5),R("ngForOf",r.searchedUsers))},dependencies:[Cn,Ci,nr,Lo,ar,sr,or,qi,C$],styles:[".project-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}button[_ngcontent-%COMP%]{margin:0;padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#bbb}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:10px 0}ul[_ngcontent-%COMP%]{padding-left:20px;margin:5px 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin:10px 0}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group.dates[_ngcontent-%COMP%]{display:flex;gap:10px}.input-field[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})();function qge(n,t){1&n&&$t(0,"div",2)}function Gge(n,t){if(1&n){const e=je();y(0,"div",15)(1,"button",16),G("click",function(){return J(e),ee(V(2).updateProject())}),S(2,"\u4fdd\u5b58"),w(),y(3,"button",16),G("click",function(){return J(e),ee(V(2).cancel())}),S(4,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()}}const Yge=function(n,t){return{"background-color":n,border:t}};function Zge(n,t){if(1&n){const e=je();y(0,"div",17),G("click",function(){const s=J(e).$implicit;return ee(V(2).projectCopy.color=s)}),w()}if(2&n){const e=t.$implicit,i=V(2);R("ngStyle",zi(1,Yge,e,i.projectCopy.color===e?"3px solid black":"1px solid #000"))}}function Kge(n,t){if(1&n){const e=je();y(0,"button",16),G("click",function(){J(e);const r=V().$implicit;return ee(V(2).removeOwner(r))}),S(1,"\u524a\u9664"),w()}}function Qge(n,t){if(1&n&&(y(0,"li"),S(1),ce(2,Kge,2,0,"button",18),w()),2&n){const e=t.$implicit,i=V(2);I(1),On(" ",e.displayName," "),I(1),R("ngIf",i.isOwner&&e.uid!==i.currentUserUid)}}function Xge(n,t){if(1&n){const e=je();y(0,"li"),S(1),y(2,"button",16),G("click",function(){const s=J(e).$implicit;return ee(V(2).removeMember(s))}),S(3,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e.displayName," ")}}function Jge(n,t){if(1&n){const e=je();y(0,"li"),S(1),y(2,"button",16),G("click",function(){const s=J(e).$implicit;return ee(V(2).addMember(s))}),S(3,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),w(),y(4,"button",16),G("click",function(){const s=J(e).$implicit;return ee(V(2).addOwner(s))}),S(5,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e.displayName," ")}}function e_e(n,t){if(1&n){const e=je();y(0,"div",3)(1,"div",4)(2,"h2"),S(3,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a73\u7d30"),w(),ce(4,Gge,5,0,"div",5),w(),y(5,"div",6)(6,"label"),S(7,"\u540d\u524d: "),y(8,"input",7),G("ngModelChange",function(r){return J(e),ee(V().projectCopy.name=r)}),w()()(),y(9,"div",6)(10,"label"),S(11,"\u8aac\u660e: "),y(12,"textarea",8),G("ngModelChange",function(r){return J(e),ee(V().projectCopy.description=r)}),w()()(),y(13,"div",9)(14,"label"),S(15,"\u958b\u59cb\u65e5: "),y(16,"input",10),G("ngModelChange",function(r){return J(e),ee(V().projectCopy.startDate=r)}),w()(),y(17,"label"),S(18,"\u7d42\u4e86\u65e5: "),y(19,"input",10),G("ngModelChange",function(r){return J(e),ee(V().projectCopy.endDate=r)}),w()()(),y(20,"div",6)(21,"label"),S(22,"\u8272:"),w(),y(23,"div",11),ce(24,Zge,1,4,"div",12),w()(),y(25,"h4"),S(26,"\u30aa\u30fc\u30ca\u30fc"),w(),y(27,"ul"),ce(28,Qge,3,2,"li",13),w(),y(29,"h4"),S(30,"\u30e1\u30f3\u30d0\u30fc"),w(),y(31,"ul"),ce(32,Xge,4,1,"li",13),w(),y(33,"h4"),S(34,"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22"),w(),y(35,"app-project-user-search",14),G("userSelected",function(r){return J(e),ee(V().handleUserSelected(r))}),w(),y(36,"ul"),ce(37,Jge,6,1,"li",13),w()()}if(2&n){const e=V();I(4),R("ngIf",e.isOwner),I(4),R("ngModel",e.projectCopy.name),I(4),R("ngModel",e.projectCopy.description),I(4),R("ngModel",e.projectCopy.startDate),I(3),R("ngModel",e.projectCopy.endDate),I(5),R("ngForOf",e.colors),I(4),R("ngForOf",e.ownersCopy),I(4),R("ngForOf",e.membersCopy),I(5),R("ngForOf",e.searchedUsers)}}let E$=(()=>{class n{constructor(e,i,r,s,o){this.dialogRef=e,this.data=i,this.projectService=r,this.userService=s,this.authService=o,this.members=[],this.membersCopy=[],this.owners=[],this.ownersCopy=[],this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.isOwner=!1,this.searchedUsers=[],this.project=i.project,this.projectCopy=JSON.parse(JSON.stringify(this.project))}ngOnInit(){this.loadMembers(),this.loadOwners(),this.checkIfOwner(),this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid})}loadMembers(){this.members=[],this.membersCopy=[],this.projectCopy.members.forEach(e=>{this.userService.getUserById(e).subscribe(i=>{i&&(this.members.push({...i,uid:e}),this.membersCopy.push({...i,uid:e}))})})}loadOwners(){this.owners=[],this.ownersCopy=[],this.projectCopy.owners.forEach(e=>{this.userService.getUserById(e).subscribe(i=>{i&&(this.owners.push({...i,uid:e}),this.ownersCopy.push({...i,uid:e}))})})}checkIfOwner(){this.authService.user$.subscribe(e=>{e&&(this.isOwner=this.projectCopy.owners.includes(e.uid))})}updateProject(){var e=this;return(0,me.Z)(function*(){try{e.projectCopy.members=e.membersCopy.map(i=>i.uid),e.projectCopy.owners=e.ownersCopy.map(i=>i.uid),yield e.projectService.updateProject(e.projectCopy),e.dialogRef.close(e.projectCopy)}catch(i){console.error("Error saving project:",i),alert(`\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4fdd\u5b58\u306b\u5931\u6557\u3057\u307e\u3057\u305f: ${i.message}`)}})()}handleUserSelected(e){const{user:i,role:r}=e;"member"===r?this.addMember(i):"owner"===r&&this.addOwner(i)}addMember(e){this.membersCopy.some(i=>i.uid===e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002"):this.membersCopy.push(e)}addOwner(e){this.ownersCopy.some(i=>i.uid===e.uid)?alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002"):this.ownersCopy.push(e)}removeMember(e){this.membersCopy=this.membersCopy.filter(i=>i.uid!==e.uid)}removeOwner(e){e.uid!==this.currentUserUid&&(this.ownersCopy=this.ownersCopy.filter(i=>i.uid!==e.uid))}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(i){return new(i||n)(z($a),z(su),z(Du),z(CR),z(Ks))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-project-detail"]],standalone:!0,features:[wi],decls:2,vars:2,consts:[["class","modal-overlay",4,"ngIf"],["class","project-detail-container",4,"ngIf"],[1,"modal-overlay"],[1,"project-detail-container"],[1,"header"],["class","buttons",4,"ngIf"],[1,"form-group"],["placeholder","\u540d\u524d",1,"input-field",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",1,"input-field",3,"ngModel","ngModelChange"],[1,"form-group","dates"],["type","date",1,"input-field",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[1,"buttons"],[3,"click"],[1,"color-option",3,"ngStyle","click"],[3,"click",4,"ngIf"]],template:function(i,r){1&i&&(ce(0,qge,1,0,"div",0),ce(1,e_e,38,9,"div",1)),2&i&&(R("ngIf",r.project),I(1),R("ngIf",r.project))},dependencies:[Cn,Ci,nr,Lo,ar,sr,or,qi,C$],styles:[".project-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}button[_ngcontent-%COMP%]{margin:0;padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#bbb}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:10px 0}ul[_ngcontent-%COMP%]{padding-left:20px;margin:5px 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin:10px 0}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group.dates[_ngcontent-%COMP%]{display:flex;gap:10px}.input-field[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})();function t_e(n,t){if(1&n&&(y(0,"span"),S(1),w()),2&n){const e=t.$implicit,i=V(2);I(1),On(" ",(null==i.ownersMap[e]?null:i.ownersMap[e].displayName)||"Unknown Owner"," ")}}function n_e(n,t){if(1&n&&(y(0,"span"),S(1),w()),2&n){const e=t.$implicit,i=V(2);I(1),On(" ",(null==i.membersMap[e]?null:i.membersMap[e].displayName)||"Unknown Member"," ")}}function i_e(n,t){if(1&n){const e=je();y(0,"li",18)(1,"div",19)(2,"input",20),G("ngModelChange",function(r){return ee(J(e).$implicit.selected=r)}),w(),y(3,"a",21),G("click",function(){const s=J(e).$implicit;return ee(V(2).openTaskDetailDialog(s))}),y(4,"div",22),S(5),w(),y(6,"div",23)(7,"span",24),S(8),w(),y(9,"span",25),S(10),w(),y(11,"span",26),S(12),Zt(13,"date"),w(),y(14,"span",27),S(15),Zt(16,"date"),w(),y(17,"span",28),S(18),w(),$t(19,"span",29),w()()()()}if(2&n){const e=t.$implicit,i=V().$implicit,r=V();I(2),R("ngModel",e.selected)("disabled",!r.canEdit(i)),I(3),qe(e.title),I(3),qe(e.status),I(1),R("ngClass",e.priority),I(1),qe(r.getPriorityLabel(e.priority)),I(2),qe(ei(13,11,e.startDateTime,"short")),I(3),qe(ei(16,14,e.endDateTime,"short")),I(3),qe(e.tag),I(1),Cs("background-color",e.tagColor)}}function r_e(n,t){if(1&n){const e=je();y(0,"li")(1,"div",6)(2,"input",12),G("ngModelChange",function(r){return ee(J(e).$implicit.selected=r)}),w(),y(3,"h3",13),G("click",function(){const s=J(e).$implicit;return ee(V().openProjectDetailDialog(s))}),S(4),w(),y(5,"span",14),S(6),w(),$t(7,"span",15),y(8,"span",16),S(9,"\u30aa\u30fc\u30ca\u30fc: "),ce(10,t_e,2,1,"span",5),w(),y(11,"span",17),S(12,"\u30e1\u30f3\u30d0\u30fc: "),ce(13,n_e,2,1,"span",5),w()(),y(14,"ul",7)(15,"li",8)(16,"div",9)(17,"span",10),S(18,"\u9078\u629e"),w(),y(19,"span",10),S(20,"\u30bf\u30a4\u30c8\u30eb"),w(),y(21,"span",10),S(22,"\u30b9\u30c6\u30fc\u30bf\u30b9"),w(),y(23,"span",10),S(24,"\u512a\u5148\u5ea6"),w(),y(25,"span",10),S(26,"\u958b\u59cb\u65e5\u6642"),w(),y(27,"span",10),S(28,"\u7d42\u4e86\u65e5\u6642"),w(),y(29,"span",10),S(30,"\u30bf\u30b0"),w(),y(31,"span",10),S(32,"\u30bf\u30b0\u306e\u8272"),w()()(),ce(33,i_e,20,17,"li",11),w()()}if(2&n){const e=t.$implicit,i=V();I(2),R("ngModel",e.selected)("disabled",!i.canEdit(e)),I(2),qe(e.name),I(2),mw("",e.startDate," - ",e.endDate,""),I(1),Cs("background-color",e.color),I(3),R("ngForOf",e.owners),I(3),R("ngForOf",e.members),I(20),R("ngForOf",i.getTasksForProject(e.id))}}function s_e(n,t){if(1&n){const e=je();y(0,"li",18)(1,"div",19)(2,"input",30),G("ngModelChange",function(r){return ee(J(e).$implicit.selected=r)}),w(),y(3,"a",21),G("click",function(){const s=J(e).$implicit;return ee(V().openTaskDetailDialog(s))}),y(4,"div",22),S(5),w(),y(6,"div",23)(7,"span",24),S(8),w(),y(9,"span",25),S(10),w(),y(11,"span",26),S(12),Zt(13,"date"),w(),y(14,"span",27),S(15),Zt(16,"date"),w(),y(17,"span",28),S(18),w(),$t(19,"span",29),w()()()()}if(2&n){const e=t.$implicit,i=V();I(2),R("ngModel",e.selected),I(3),qe(e.title),I(3),qe(e.status),I(1),R("ngClass",e.priority),I(1),qe(i.getPriorityLabel(e.priority)),I(2),qe(ei(13,10,e.startDateTime,"short")),I(3),qe(ei(16,13,e.endDateTime,"short")),I(3),qe(e.tag),I(1),Cs("background-color",e.tagColor)}}let o_e=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.projectService=i,this.userService=r,this.authService=s,this.dialog=o,this.projects=[],this.tasks=[],this.membersMap={},this.ownersMap={},this.currentUserUid=null,this.uniqueTaskIds=new Set}ngOnInit(){this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid||null,this.loadProjects()})}loadProjects(){console.log("Loading projects..."),this.projectService.getProjects().subscribe(e=>{this.projects=e.filter(i=>i.members.includes(this.currentUserUid)||i.owners.includes(this.currentUserUid)),console.log("Projects loaded:",this.projects),this.loadUsers(),this.loadTasksForProjects()})}loadTasksForProjects(){console.log("Loading tasks for each project..."),this.tasks=[],this.uniqueTaskIds.clear(),this.currentUserUid&&(this.projects.forEach(e=>{console.log(`User is a member or owner of project: ${e.id}`),this.loadTasksForUsersInProject(e.id,e.members.concat(e.owners))}),this.loadUnassignedTasks())}loadTasksForUsersInProject(e,i){i.forEach(r=>{this.taskService.getTasksByUserId(r).subscribe(s=>{s.forEach(o=>{o.projectId===e&&!this.uniqueTaskIds.has(o.id)&&(this.uniqueTaskIds.add(o.id),this.tasks.push(o))})})})}loadUnassignedTasks(){console.log("Loading unassigned tasks..."),this.taskService.getTasksByUserId(this.currentUserUid).subscribe(e=>{e.forEach(i=>{!i.projectId&&!this.uniqueTaskIds.has(i.id)&&(this.uniqueTaskIds.add(i.id),this.tasks.push(i))}),console.log("Unassigned tasks loaded:",this.tasks)})}loadUsers(){console.log("Loading users...");const e=new Set,i=new Set;this.projects.forEach(o=>{o.members&&o.members.forEach(a=>e.add(a)),o.owners&&o.owners.forEach(a=>i.add(a))});const r=Array.from(e),s=Array.from(i);console.log("Unique Member IDs:",r),console.log("Unique Owner IDs:",s),r.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.membersMap[o]=a,console.log("Added member to membersMap:",a)):console.log("User is undefined or has no UID:",a)})}),s.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.ownersMap[o]=a,console.log("Added owner to ownersMap:",a)):console.log("User is undefined or has no UID:",a)})})}openAddTaskDialog(){console.log("Opening Add Task Dialog..."),this.dialog.open(vR,{width:"400px"}).afterClosed().subscribe(i=>{i&&(console.log("Add Task Dialog closed with result:",i),this.loadTasksForProjects())})}openAddProjectDialog(){console.log("Opening Add Project Dialog..."),this.dialog.open(x$,{width:"400px"}).afterClosed().subscribe(i=>{i&&(console.log("Add Project Dialog closed with result:",i),this.loadProjects())})}deleteSelectedTasks(){console.log("Deleting selected tasks...");const i=this.tasks.filter(r=>r.selected).map(r=>{const s=this.projects.find(o=>o.id===r.projectId);return console.log("Project found:",s),s&&s.owners.includes(this.currentUserUid)?(console.log("User is owner of the project, deleting task..."),this.taskService.deleteTask(r).then(()=>{console.log("Deleted task:",r)}).catch(o=>{console.error("Error deleting task:",o)})):r.userId===this.currentUserUid?(console.log("User is the creator of the task, deleting task..."),this.taskService.deleteTask(r).then(()=>{console.log("Deleted task:",r)}).catch(o=>{console.error("Error deleting task:",o)})):(console.warn("You do not have permission to delete this task:",r),Promise.resolve())});Promise.all(i).then(()=>{this.loadTasksForProjects()}).catch(r=>{console.error("Error in deleting tasks:",r)})}deleteSelectedProjects(){console.log("Deleting selected projects..."),this.projects.filter(i=>i.selected).forEach(i=>{this.getTasksForProject(i.id).forEach(s=>{this.taskService.deleteTask(s).then(()=>{console.log("Deleted related task:",s),this.loadTasksForProjects()})}),this.projectService.deleteProject(i).then(()=>{console.log("Deleted project:",i),this.loadProjects()})})}openProjectDetailDialog(e){console.log("Opening Project Detail Dialog for project:",e),this.currentUserUid&&e.owners.includes(this.currentUserUid)?(this.dialog.closeAll(),this.dialog.open(E$,{width:"600px",data:{project:e}}).afterClosed().subscribe(r=>{r&&(console.log("Project Detail Dialog closed with result:",r),this.loadProjects())})):alert("\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30aa\u30fc\u30ca\u30fc\u3067\u306f\u306a\u3044\u305f\u3081\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\u3002")}getTasksForProject(e){return this.tasks.filter(i=>i.projectId===e)}openTaskDetailDialog(e){console.log("Opening Task Detail Dialog for task:",e),this.dialog.closeAll(),this.dialog.open(ry,{width:"600px",data:{task:e}}).afterClosed().subscribe(r=>{r&&(console.log("Task Detail Dialog closed with result:",r),this.loadTasksForProjects())})}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}canEdit(e){return!!this.currentUserUid&&e.owners.includes(this.currentUserUid)}static#e=this.\u0275fac=function(i){return new(i||n)(z(el),z(Du),z(CR),z(Ks),z(Fp))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-project-list"]],standalone:!0,features:[wi],decls:37,vars:2,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"project-task-list-container"],[4,"ngFor","ngForOf"],[1,"project-header"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],["type","checkbox",1,"project-checkbox",3,"ngModel","disabled","ngModelChange"],[3,"click"],[1,"project-dates"],[1,"project-color"],[1,"project-owners"],[1,"project-members"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","disabled","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(y(0,"div",0)(1,"div",1)(2,"button",2),G("click",function(){return r.openAddTaskDialog()}),S(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w(),y(4,"button",3),G("click",function(){return r.openAddProjectDialog()}),S(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),w(),y(6,"button",3),G("click",function(){return r.deleteSelectedTasks()}),S(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),w(),y(8,"button",3),G("click",function(){return r.deleteSelectedProjects()}),S(9,"\u9078\u629e\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664"),w()(),y(10,"div",4)(11,"ul"),ce(12,r_e,34,10,"li",5),y(13,"li")(14,"div",6)(15,"h3"),S(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7121\u6240\u5c5e"),w()(),y(17,"ul",7)(18,"li",8)(19,"div",9)(20,"span",10),S(21,"\u9078\u629e"),w(),y(22,"span",10),S(23,"\u30bf\u30a4\u30c8\u30eb"),w(),y(24,"span",10),S(25,"\u30b9\u30c6\u30fc\u30bf\u30b9"),w(),y(26,"span",10),S(27,"\u512a\u5148\u5ea6"),w(),y(28,"span",10),S(29,"\u958b\u59cb\u65e5\u6642"),w(),y(30,"span",10),S(31,"\u7d42\u4e86\u65e5\u6642"),w(),y(32,"span",10),S(33,"\u30bf\u30b0"),w(),y(34,"span",10),S(35,"\u30bf\u30b0\u306e\u8272"),w()()(),ce(36,s_e,20,16,"li",11),w()()()()()),2&i&&(I(12),R("ngForOf",r.projects),I(24),R("ngForOf",r.getTasksForProject("")))},dependencies:[Cn,Ir,Ci,I_,ar,za,or,qi],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;box-sizing:border-box;margin:0 auto}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.project-task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;margin:10px auto}.project-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto 1fr auto auto;align-items:center;gap:10px}.project-checkbox[_ngcontent-%COMP%]{margin-right:10px}.project-dates[_ngcontent-%COMP%], .project-color[_ngcontent-%COMP%], .project-owners[_ngcontent-%COMP%], .project-members[_ngcontent-%COMP%]{margin-left:10px;font-size:.9em;color:#555}.project-dates[_ngcontent-%COMP%]{font-size:1.2em}.project-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;display:inline-block}.project-owners[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .project-members[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;padding:5px 10px;background-color:#f0f0f0;border-radius:10px;font-size:.9em;color:#555}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-start-date[_ngcontent-%COMP%], .task-end-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%], .task-tag-color[_ngcontent-%COMP%]{text-align:center;margin-left:10px}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}"]})}return n})();function xR(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function Cm(n,t){const e=t?"":"none";xR(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function D$(n,t,e){xR(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function lE(n,t){return t&&"none"!=t?n+" "+t:n}function T$(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function ER(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function DR(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function TR(n,t,e){const{top:i,bottom:r,left:s,right:o}=n;return e>=i&&e<=r&&t>=s&&t<=o}function sy(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function S$(n,t,e,i){const{top:r,right:s,bottom:o,left:a,width:l,height:c}=n,u=l*t,f=c*t;return i>r-f&&i<o+f&&e>a-u&&e<s+u}class I${constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:DR(e)})})}handleScroll(t){const e=Uo(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let s,o;if(e===this._document){const c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=e.scrollTop,o=e.scrollLeft;const a=r.top-s,l=r.left-o;return this.positions.forEach((c,u)=>{c.clientRect&&e!==u&&e.contains(u)&&sy(c.clientRect,a,l)}),r.top=s,r.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function A$(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?R$(n,t):("input"===i||"select"===i||"textarea"===i)&&M$(n,t),k$("canvas",n,t,R$),k$("input, textarea, select",n,t,M$),t}function k$(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let l_e=0;function M$(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${l_e++}`)}function R$(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const P$=ru({passive:!0}),cE=ru({passive:!1}),SR=new Set(["position"]);class u_e{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=jo(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Cm(i,e)))}constructor(t,e,i,r,s,o){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new se,this._pointerMoveSubscription=St.EMPTY,this._pointerUpSubscription=St.EMPTY,this._scrollSubscription=St.EMPTY,this._resizeSubscription=St.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new se,this.started=new se,this.released=new se,this.ended=new se,this.entered=new se,this.exited=new se,this.dropped=new se,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const v=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),b=this._dropContainer;if(!v)return void this._endDragSequence(a);(!b||!b.isDragging()&&!b.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const u=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=c.x-u.x+this._passiveTransform.x,f.y=c.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new I$(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>Gi(i)),this._handles.forEach(i=>Cm(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Gi(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,cE),e.addEventListener("touchstart",this._pointerDown,P$),e.addEventListener("dragstart",this._nativeDragStart,cE)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Gi(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Cm(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Cm(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){oy(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(o,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),D$(i,!1,SR),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=oy(e),s=!r&&0!==e.button,o=this._rootElement,a=Uo(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=r?Lk(e):Nk(e);if(a&&a.draggable&&"mousedown"===e.type&&e.preventDefault(),i||s||l||c)return;if(this._handles.length){const g=o.style;this._rootElementTapHighlight=g.webkitTapHighlightColor||"",g.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(g=>this._updateOnScroll(g)),this._boundaryElement&&(this._boundaryRect=DR(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){D$(this._rootElement,!0,SR),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),o=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const s=t.matchSize?this._initialClientRect:null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),r=F$(o,this._document),this._previewRef=o,t.matchSize?N$(r,s):r.style.transform=uE(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=A$(this._rootElement),N$(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return xR(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},SR),Cm(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function a_e(n){const t=getComputedStyle(n),e=ER(t,"transition-property"),i=e.find(a=>"transform"===a||"all"===a);if(!i)return 0;const r=e.indexOf(i),s=ER(t,"transition-duration"),o=ER(t,"transition-delay");return T$(s[r])+T$(o[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=o=>{(!o||Uo(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=F$(this._placeholderRef,this._document)):i=A$(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,o=oy(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition();return{x:s.left-t.left+(o.pageX-s.left-a.left),y:s.top-t.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=oy(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+o,f=a.bottom-(c-o);i=O$(i,a.left+s,a.right-(l-s)),r=O$(r,u,f)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Cm(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,cE),t.removeEventListener("touchstart",this._pointerDown,P$),t.removeEventListener("dragstart",this._nativeDragStart,cE)}_applyRootElementTransform(t,e){const i=uE(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=lE(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=uE(t,e);this._preview.style.transform=lE(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,l=i.bottom-r.bottom;r.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,r.height>i.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:oy(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=Uo(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&sy(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Tk(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Gi(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function uE(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function O$(n,t,e){return Math.max(t,Math.min(e,n))}function oy(n){return"t"===n.type[0]}function F$(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function N$(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=uE(t.left,t.top)}function L$(n,t,e){const i=ay(t,n.length-1),r=ay(e,n.length-1);if(i===r)return;const s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s}function ay(n,t){return Math.max(0,Math.min(t,n))}class d_e{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,l=s.findIndex(E=>E.drag===t),c=s[o],f=c.clientRect,g=l>o?1:-1,v=this._getItemOffsetPx(s[l].clientRect,f,g),b=this._getSiblingOffsetPx(l,s,g),x=s.slice();return L$(s,l,o),s.forEach((E,O)=>{if(x[O]===E)return;const k=E.drag===t,F=k?v:b,q=k?t.getPlaceholderElement():E.drag.getRootElement();E.offset+=F,a?(q.style.transform=lE(`translate3d(${Math.round(E.offset)}px, 0, 0)`,E.initialTransform),sy(E.clientRect,0,F)):(q.style.transform=lE(`translate3d(0, ${Math.round(E.offset)}px, 0)`,E.initialTransform),sy(E.clientRect,F,0))}),this._previousSwap.overlaps=TR(f,e,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:l,currentIndex:o}}enter(t,e,i,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,o=this._activeDraggables,a=o.indexOf(t),l=t.getPlaceholderElement();let c=o[s];if(c===t&&(c=o[s+1]),!c&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const u=c.getRootElement();u.parentElement.insertBefore(l,u),o.splice(s,0,t)}else Gi(this._element).appendChild(l),o.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{sy(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:DR(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let s=r?e.left-t.left:e.top-t.top;return-1===i&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,s=e[t].clientRect,o=e[t+-1*i];let a=s[r?"width":"height"]*i;if(o){const l=r?"left":"top",c=r?"right":"bottom";-1===i?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const o=i[i.length-1].clientRect;return r?t>=o.right:e>=o.bottom}{const o=i[0].clientRect;return r?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,r){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>a!==t&&((!r||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?r.x:r.y)!==this._previousSwap.delta)&&(s?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom))));return-1!==o&&this._sortPredicate(o,t)?o:-1}}class h_e{constructor(t,e,i,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new se,this.entered=new se,this.exited=new se,this.dropped=new se,this.sorted=new se,this.receivingStarted=new se,this.receivingStopped=new se,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=St.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new se,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),u4(0,uj).pipe(rr(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=Gi(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new I$(i),this._sortStrategy=new d_e(this.element,e),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,s,o,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:l})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=Gi(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!S$(this._clientRect,.05,e,i))return;const s=this._sortStrategy.sort(t,e,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||S$(o.clientRect,.05,t,e)&&([r,s]=function f_e(n,t,e,i){const r=j$(t,i),s=U$(t,e);let o=0,a=0;if(r){const l=n.scrollTop;1===r?l>0&&(o=1):n.scrollHeight-l>n.clientHeight&&(o=2)}if(s){const l=n.scrollLeft;1===s?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,t,e),(r||s)&&(i=a))}),!r&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};r=j$(l,e),s=U$(l,t),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Gi(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Gi(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=Gi(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&TR(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!TR(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const s=Gi(this.element);return r===s||s.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Tk(Gi(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function j$(n,t){const{top:e,bottom:i,height:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}function U$(n,t){const{left:e,right:i,width:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}const dE=ru({passive:!1,capture:!0});let p_e=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new se,this.pointerUp=new se,this.scroll=new se,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,dE)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,dE)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:dE}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:dE}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new ft(r=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&r.next(a)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),we(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(it),ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const m_e={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let IR=(()=>{class n{constructor(e,i,r,s){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,i=m_e){return new u_e(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new h_e(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct),ie(it),ie(Ak),ie(p_e))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x_e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[IR],imports:[YC]})}return n})();const E_e=function(n,t){return{"background-color":n,border:t}};function D_e(n,t){if(1&n){const e=je();y(0,"div",22),G("click",function(){const s=J(e).$implicit;return ee(V(2).selectColor(s))}),w()}if(2&n){const e=t.$implicit,i=V(2);R("ngStyle",zi(1,E_e,e,i.editedSubtask.tagColor===e?"3px solid black":"1px solid #000"))}}function T_e(n,t){if(1&n){const e=je();y(0,"div",1)(1,"div",2)(2,"h2",3),S(3),w(),y(4,"div",4)(5,"button",5),G("click",function(){return J(e),ee(V().saveSubtask())}),S(6,"\u4fdd\u5b58"),w(),y(7,"button",5),G("click",function(){return J(e),ee(V().cancel())}),S(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()(),y(9,"div",6)(10,"span",7),S(11,"\u30bf\u30a4\u30c8\u30eb:"),w(),y(12,"span",8)(13,"input",9),G("ngModelChange",function(r){return J(e),ee(V().editedSubtask.title=r)}),w()()(),y(14,"div",6)(15,"span",7),S(16,"\u8aac\u660e:"),w(),y(17,"span",8)(18,"textarea",10),G("ngModelChange",function(r){return J(e),ee(V().editedSubtask.description=r)}),w()()(),y(19,"div",6)(20,"span",7),S(21,"\u958b\u59cb\u65e5\u6642:"),w(),y(22,"span",8)(23,"input",11),G("ngModelChange",function(r){return J(e),ee(V().editedSubtask.startDateTime=r)}),w()()(),y(24,"div",6)(25,"span",7),S(26,"\u7d42\u4e86\u65e5\u6642:"),w(),y(27,"span",8)(28,"input",11),G("ngModelChange",function(r){return J(e),ee(V().editedSubtask.endDateTime=r)}),w()()(),y(29,"div",6)(30,"span",7),S(31,"\u512a\u5148\u5ea6:"),w(),y(32,"span",8)(33,"select",12),G("ngModelChange",function(r){return J(e),ee(V().editedSubtask.priority=r)}),y(34,"option",13),S(35,"\u4f4e"),w(),y(36,"option",14),S(37,"\u4e2d"),w(),y(38,"option",15),S(39,"\u9ad8"),w()()()(),y(40,"div",6)(41,"span",7),S(42,"\u30bf\u30b0:"),w(),y(43,"span",8)(44,"input",16),G("ngModelChange",function(r){return J(e),ee(V().editedSubtask.tag=r)}),w()()(),y(45,"div",6)(46,"span",7),S(47,"\u30bf\u30b0\u306e\u8272:"),w(),y(48,"span",8)(49,"div",17),ce(50,D_e,1,4,"div",18),w()()(),y(51,"div",6)(52,"span",7),S(53,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),w(),y(54,"span",8)(55,"select",12),G("ngModelChange",function(r){return J(e),ee(V().editedSubtask.status=r)}),y(56,"option",19),S(57,"\u672a\u7740\u624b"),w(),y(58,"option",20),S(59,"\u9032\u884c\u4e2d"),w(),y(60,"option",21),S(61,"\u5b8c\u4e86"),w()()()()()}if(2&n){const e=V();I(3),On("",e.subtask.title," \u306e\u8a73\u7d30"),I(10),R("ngModel",e.editedSubtask.title),I(5),R("ngModel",e.editedSubtask.description),I(5),R("ngModel",e.editedSubtask.startDateTime),I(5),R("ngModel",e.editedSubtask.endDateTime),I(5),R("ngModel",e.editedSubtask.priority),I(11),R("ngModel",e.editedSubtask.tag),I(6),R("ngForOf",e.colors),I(5),R("ngModel",e.editedSubtask.status)}}let S_e=(()=>{class n{constructor(e,i,r){this.taskService=e,this.dialogRef=i,this.data=r,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],r&&r.subtask&&r.task?(this.subtask=r.subtask,this.task=r.task,this.editedSubtask={...this.subtask}):(this.subtask={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"},this.editedSubtask={...this.subtask},this.task={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:"",duration:0})}ngOnInit(){this.task.subtasks||(this.task.subtasks=[])}saveSubtask(){var e=this;return(0,me.Z)(function*(){if(!e.task||!e.task.id)return void console.error("Task is not properly initialized.");e.task.subtasks||(e.task.subtasks=[]);const i=e.task.subtasks.findIndex(r=>r.id===e.subtask.id);-1!==i?e.task.subtasks[i]={...e.editedSubtask}:e.task.subtasks.push({...e.editedSubtask}),yield e.taskService.updateTask(e.task),e.dialogRef.close(e.editedSubtask)})()}cancel(){this.dialogRef.close()}selectColor(e){this.editedSubtask.tagColor=e}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(i){return new(i||n)(z(el),z($a),z(su))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-subtask-detail"]],inputs:{subtask:"subtask"},standalone:!0,features:[wi],decls:1,vars:1,consts:[["class","subtask-detail-container",4,"ngIf"],[1,"subtask-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"color-option",3,"ngStyle","click"]],template:function(i,r){1&i&&ce(0,T_e,62,9,"div",0),2&i&&R("ngIf",r.editedSubtask)},dependencies:[Cn,Ci,nr,Lo,ar,Ll,Vl,sr,fa,or,qi],styles:[".subtask-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;text-align:center}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ddd}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0}"]})}return n})();var hE,I_e=new Uint8Array(16);function A_e(){if(!hE&&!(hE=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hE(I_e)}const k_e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var $r=[],RR=0;RR<256;++RR)$r.push((RR+256).toString(16).substr(1));const O_e=function P_e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=($r[n[t+0]]+$r[n[t+1]]+$r[n[t+2]]+$r[n[t+3]]+"-"+$r[n[t+4]]+$r[n[t+5]]+"-"+$r[n[t+6]]+$r[n[t+7]]+"-"+$r[n[t+8]]+$r[n[t+9]]+"-"+$r[n[t+10]]+$r[n[t+11]]+$r[n[t+12]]+$r[n[t+13]]+$r[n[t+14]]+$r[n[t+15]]).toLowerCase();if(!function M_e(n){return"string"==typeof n&&k_e.test(n)}(e))throw TypeError("Stringified UUID is invalid");return e},fE=function F_e(n,t,e){var i=(n=n||{}).random||(n.rng||A_e)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){e=e||0;for(var r=0;r<16;++r)t[e+r]=i[r];return t}return O_e(i)};function N_e(n,t){if(1&n){const e=je();y(0,"div",36)(1,"button",37),G("click",function(){return J(e),ee(V().openAddTaskDialog())}),S(2,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w(),y(3,"button",38),G("click",function(){return J(e),ee(V().openAddProjectDialog())}),S(4,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),w(),y(5,"button",38),G("click",function(){return J(e),ee(V().deleteSelectedTasks())}),S(6,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),w(),y(7,"button",38),G("click",function(){return J(e),ee(V().duplicateSelectedTasks())}),S(8,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u8907\u88fd"),w()()}}function L_e(n,t){if(1&n){const e=je();y(0,"div",36)(1,"button",38),G("click",function(){return J(e),ee(V().duplicateSelectedTasksAsMine())}),S(2,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u81ea\u5206\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u8907\u88fd"),w()()}}function V_e(n,t){if(1&n&&(y(0,"option"),S(1),w()),2&n){const e=t.$implicit;I(1),qe(e)}}function B_e(n,t){if(1&n){const e=je();y(0,"li",54)(1,"div",55),G("click",function(){const s=J(e).$implicit,o=V().$implicit;return ee(V().openSubtaskDetailDialog(s,o))}),y(2,"span",56),S(3),w(),y(4,"span",57),S(5),w(),y(6,"span",58),S(7),w(),y(8,"span",59),S(9),Zt(10,"date"),w(),y(11,"span",60),S(12),Zt(13,"date"),w(),y(14,"span",61),S(15),w(),$t(16,"span",62),w()()}if(2&n){const e=t.$implicit,i=V(2);I(3),qe(e.title),I(2),qe(e.status),I(1),R("ngClass",e.priority),I(1),qe(i.getPriorityLabel(e.priority)),I(2),qe(ei(10,9,e.startDateTime,"short")),I(3),qe(ei(13,12,e.endDateTime,"short")),I(3),qe(e.tag),I(1),Cs("background-color",e.tagColor)}}function j_e(n,t){if(1&n){const e=je();y(0,"li",39)(1,"div",40)(2,"input",41),G("ngModelChange",function(r){return ee(J(e).$implicit.selected=r)}),w(),y(3,"a",42),G("click",function(){const s=J(e).$implicit;return ee(V().openTaskDetailDialog(s))}),y(4,"div",43),S(5),w(),y(6,"div",44)(7,"span",45),S(8),w(),y(9,"span",46),S(10),w(),y(11,"span",47),S(12),w(),y(13,"span",48),S(14),Zt(15,"date"),w(),y(16,"span",49),S(17),Zt(18,"date"),w(),y(19,"span",50),S(20),w(),$t(21,"span",51),w()()(),y(22,"ul",52),ce(23,B_e,17,15,"li",53),w()()}if(2&n){const e=t.$implicit,i=V();I(2),R("ngModel",e.selected),I(3),qe(e.title),I(3),qe(i.getProjectName(e.projectId||"")),I(2),qe(e.status),I(1),R("ngClass",e.priority),I(1),qe(i.getPriorityLabel(e.priority)),I(2),qe(ei(15,12,e.startDateTime,"short")),I(3),qe(ei(18,15,e.endDateTime,"short")),I(3),qe(e.tag),I(1),Cs("background-color",e.tagColor),I(2),R("ngForOf",e.subtasks)}}let q$=(()=>{class n{constructor(e,i,r){this.taskService=e,this.projectService=i,this.dialog=r,this.userId=null,this.isOtherUser=!1,this.isReadOnly=!1,this.taskDuplicated=new We,this.tasks$=null,this.projects$=null,this.tasks=[],this.projects=[],this.tags=[],this.selectedTag="",this.selectedPriority="",this.selectedStatus="\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9",this.searchText="",this.sortOrder="startDateAsc",this.selectAll=!1}ngOnInit(){this.tasks$=this.userId?this.taskService.getTasksByUserId(this.userId):this.taskService.getTasks(),this.projects$=this.projectService.getProjects(),this.tasks$?.subscribe(e=>{e&&(this.tasks=e,this.tags=this.getTags())}),this.projects$?.subscribe(e=>{e&&(this.projects=e)})}toggleSelectAll(){this.tasks.forEach(e=>{e.selected=this.selectAll,e.subtasks.forEach(i=>i.selected=this.selectAll)})}filteredTasks(){const e=this.searchText.toLowerCase();return this.tasks.filter(i=>("\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"===this.selectedStatus||"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"===this.selectedStatus&&("\u672a\u7740\u624b"===i.status||"\u9032\u884c\u4e2d"===i.status)||this.selectedStatus===i.status)&&(i.title.toLowerCase().includes(e)||i.tag.toLowerCase().includes(e)||i.description.toLowerCase().includes(e)||i.subtasks.some(r=>r.title.toLowerCase().includes(e)||r.tag.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)))&&(""===this.selectedTag||i.tag===this.selectedTag||i.subtasks.some(r=>r.tag===this.selectedTag))&&(""===this.selectedPriority||i.priority===this.selectedPriority)).sort((i,r)=>this.compareTasks(i,r))}sortTasks(e){e&&(this.sortOrder=e),this.tasks.sort((i,r)=>this.compareTasks(i,r))}compareTasks(e,i){const r={high:1,medium:2,low:3,"":4},s=(l,c)=>{switch(c){case"startDateAsc":case"startDateDesc":return l.startDateTime?new Date(l.startDateTime).getTime():null;case"endDateAsc":case"endDateDesc":return l.endDateTime?new Date(l.endDateTime).getTime():null;default:return null}},o=s(e,this.sortOrder),a=s(i,this.sortOrder);return null!==o&&null!==a?"startDateDesc"===this.sortOrder||"endDateDesc"===this.sortOrder?a-o:o-a:null===o&&null===a?"priority"===this.sortOrder&&e.priority!==i.priority?r[e.priority]-r[i.priority]:0:null===o?1:-1}drop(e){L$(this.tasks,e.previousIndex,e.currentIndex),this.saveTasks()}getTags(){const e=new Set;return this.tasks.forEach(i=>{i.tag&&e.add(i.tag),i.subtasks.forEach(r=>{r.tag&&e.add(r.tag)})}),Array.from(e)}deleteSelectedTasks(){this.tasks=this.tasks.filter(e=>e.selected?(this.taskService.deleteTask(e),!1):(e.subtasks=e.subtasks.filter(i=>!i.selected),!0)),this.deselectAllTasks(),this.saveTasks()}duplicateSelectedTasks(){var e=this;return(0,me.Z)(function*(){const r=e.tasks.filter(s=>s.selected).map(s=>{const o={...s,id:fE(),selected:!1,subtasks:s.subtasks.map(a=>({...a,id:fE(),selected:!1}))};return e.taskService.duplicateTask(o)});yield Promise.all(r),e.deselectAllTasks(),e.taskDuplicated.emit("\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u8907\u88fd\u3057\u307e\u3057\u305f")})()}duplicateSelectedTasksAsMine(){var e=this;return(0,me.Z)(function*(){const r=e.tasks.filter(s=>s.selected).map(s=>{const o={...s,id:fE(),projectId:"",selected:!1,subtasks:s.subtasks.map(a=>({...a,id:fE(),selected:!1}))};return e.taskService.duplicateTask(o)});yield Promise.all(r),e.deselectAllTasks(),e.taskDuplicated.emit("\u81ea\u5206\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u8907\u88fd\u3057\u307e\u3057\u305f")})()}deselectAllTasks(){this.selectAll=!1,this.tasks.forEach(e=>e.selected=!1),this.tasks.forEach(e=>e.subtasks.forEach(i=>i.selected=!1))}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}getProjectName(e){const i=this.projects.find(r=>r.id===e);return i?i.name:""}openAddTaskDialog(){this.dialog.open(vR,{width:"400px"}).afterClosed().subscribe(i=>{i&&(this.tasks$=this.taskService.getTasks(),this.tasks$?.subscribe(r=>{r&&(this.tasks=r,this.tags=this.getTags())}))})}openAddProjectDialog(){this.dialog.open(x$,{width:"600px"}).afterClosed().subscribe(i=>{i&&(this.projects$=this.projectService.getProjects(),this.projects$?.subscribe(r=>{r&&(this.projects=r)}))})}openTaskDetailDialog(e){this.dialog.open(ry,{width:"600px",data:{task:e,isReadOnly:this.isOtherUser,currentUserId:this.userId}}).afterClosed().subscribe(r=>{r&&(this.tasks=this.tasks.map(s=>s.id===r.id?r:s),this.saveTasks())})}openSubtaskDetailDialog(e,i){this.dialog.open(S_e,{width:"400px",data:{subtask:e,task:i,isReadOnly:this.isOtherUser}}).afterClosed().subscribe(s=>{s&&(this.tasks=this.tasks.map(o=>o.id===i.id?i:o),this.saveTasks())})}saveTasks(){console.log("Tasks saved")}static#e=this.\u0275fac=function(i){return new(i||n)(z(el),z(Du),z(Fp))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-task-list"]],inputs:{userId:"userId",isOtherUser:"isOtherUser",isReadOnly:"isReadOnly"},outputs:{taskDuplicated:"taskDuplicated"},standalone:!0,features:[wi],decls:81,vars:10,consts:[[1,"task-list-container"],["class","task-actions",4,"ngIf"],[1,"task-filters"],[1,"filter-group"],["for","searchText"],["type","text","id","searchText","placeholder","\u30bf\u30b9\u30af\u3092\u691c\u7d22",1,"search-input",3,"ngModel","ngModelChange"],["for","sortPriority"],["id","sortPriority",1,"filter-btn",3,"click"],["for","sortDate"],["id","sortDate",1,"filter-select",3,"ngModel","ngModelChange","change"],["value","startDateAsc"],["value","startDateDesc"],["value","endDateAsc"],["value","endDateDesc"],["for","tagSelect"],["id","tagSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["for","prioritySelect"],["id","prioritySelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["for","statusSelect"],["id","statusSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-project"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],[1,"subtask-list"],["class","subtask-item",4,"ngFor","ngForOf"],[1,"subtask-item"],[1,"subtask-item-content",3,"click"],[1,"subtask-title"],[1,"subtask-status"],[1,"subtask-priority",3,"ngClass"],[1,"subtask-start-date"],[1,"subtask-end-date"],[1,"subtask-tag"],[1,"subtask-tag-color"]],template:function(i,r){1&i&&(y(0,"div",0),ce(1,N_e,9,0,"div",1),ce(2,L_e,3,0,"div",1),y(3,"div",2)(4,"div",3)(5,"label",4),S(6,"\u691c\u7d22:"),w(),y(7,"input",5),G("ngModelChange",function(o){return r.searchText=o}),w()(),y(8,"div",3)(9,"label",6),S(10,"\u512a\u5148\u5ea6\u3067\u30bd\u30fc\u30c8:"),w(),y(11,"button",7),G("click",function(){return r.sortTasks("priority")}),S(12,"\u512a\u5148\u5ea6"),w()(),y(13,"div",3)(14,"label",8),S(15,"\u65e5\u6642\u3067\u30bd\u30fc\u30c8:"),w(),y(16,"select",9),G("ngModelChange",function(o){return r.sortOrder=o})("change",function(){return r.sortTasks()}),y(17,"option",10),S(18,"\u958b\u59cb\u65e5\u6642\u306e\u65e9\u3044\u9806"),w(),y(19,"option",11),S(20,"\u958b\u59cb\u65e5\u6642\u306e\u9045\u3044\u9806"),w(),y(21,"option",12),S(22,"\u7d42\u4e86\u65e5\u6642\u306e\u65e9\u3044\u9806"),w(),y(23,"option",13),S(24,"\u7d42\u4e86\u65e5\u6642\u306e\u9045\u3044\u9806"),w()()(),y(25,"div",3)(26,"label",14),S(27,"\u30bf\u30b0:"),w(),y(28,"select",15),G("ngModelChange",function(o){return r.selectedTag=o}),y(29,"option",16),S(30,"\u3059\u3079\u3066\u306e\u30bf\u30b0"),w(),ce(31,V_e,2,1,"option",17),w()(),y(32,"div",3)(33,"label",18),S(34,"\u512a\u5148\u5ea6:"),w(),y(35,"select",19),G("ngModelChange",function(o){return r.selectedPriority=o}),y(36,"option",16),S(37,"\u3059\u3079\u3066\u306e\u512a\u5148\u5ea6"),w(),y(38,"option",20),S(39,"\u4f4e"),w(),y(40,"option",21),S(41,"\u4e2d"),w(),y(42,"option",22),S(43,"\u9ad8"),w()()(),y(44,"div",3)(45,"label",23),S(46,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),w(),y(47,"select",24),G("ngModelChange",function(o){return r.selectedStatus=o}),y(48,"option",25),S(49,"\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"),w(),y(50,"option",26),S(51,"\u672a\u7740\u624b"),w(),y(52,"option",27),S(53,"\u9032\u884c\u4e2d"),w(),y(54,"option",28),S(55,"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"),w(),y(56,"option",29),S(57,"\u5b8c\u4e86"),w()()()(),y(58,"ul",30)(59,"li",31)(60,"div",32)(61,"input",33),G("ngModelChange",function(o){return r.selectAll=o})("change",function(){return r.toggleSelectAll()}),w(),y(62,"span",34),S(63,"\u9078\u629e"),w(),y(64,"span",34),S(65,"\u30bf\u30a4\u30c8\u30eb"),w(),y(66,"span",34),S(67,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),w(),y(68,"span",34),S(69,"\u30b9\u30c6\u30fc\u30bf\u30b9"),w(),y(70,"span",34),S(71,"\u512a\u5148\u5ea6"),w(),y(72,"span",34),S(73,"\u958b\u59cb\u65e5\u6642"),w(),y(74,"span",34),S(75,"\u7d42\u4e86\u65e5\u6642"),w(),y(76,"span",34),S(77,"\u30bf\u30b0"),w(),y(78,"span",34),S(79,"\u30bf\u30b0\u306e\u8272"),w()()(),ce(80,j_e,24,18,"li",35),w()()),2&i&&(I(1),R("ngIf",!r.isOtherUser),I(1),R("ngIf",r.isOtherUser),I(5),R("ngModel",r.searchText),I(9),R("ngModel",r.sortOrder),I(12),R("ngModel",r.selectedTag),I(3),R("ngForOf",r.tags),I(4),R("ngModel",r.selectedPriority),I(12),R("ngModel",r.selectedStatus),I(14),R("ngModel",r.selectAll),I(19),R("ngForOf",r.filteredTasks()))},dependencies:[Cn,Ir,Ci,nr,I_,ar,Ll,Vl,sr,za,fa,or,qi,_p,x_e],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%], .show-completed[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2% 4% 14% 10% 10% 8% 15% 15% 15% 7%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 8% 15% 15% 15% 7%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-due-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%]{font-size:.9em;color:#555}.task-tag[_ngcontent-%COMP%]{display:inline-block;padding:2px 4px;border-radius:3px;background-color:transparent}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:10px 0 0 20px}.subtask-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:5px;padding:10px;display:flex;align-items:center}.subtask-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:29% 10% 8% 16% 15% 16% 6%;width:100%;align-items:center}.subtask-title[_ngcontent-%COMP%], .subtask-status[_ngcontent-%COMP%], .subtask-priority[_ngcontent-%COMP%], .subtask-start-date[_ngcontent-%COMP%], .subtask-end-date[_ngcontent-%COMP%], .subtask-tag[_ngcontent-%COMP%], .subtask-tag-color[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.subtask-title[_ngcontent-%COMP%]{padding-right:10px}.subtask-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-item-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}"]})}return n})();const U_e=function(){return["/register"]},z_e=function(){return["/reset-password"]};let H_e=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.password="",this.message=""}login(){this.authService.login(this.email,this.password).then(()=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u6210\u529f\u3057\u307e\u3057\u305f",this.router.navigate(["/"])}).catch(e=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ks),z(ss))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-login"]],standalone:!0,features:[wi],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(y(0,"div")(1,"h2"),S(2,"\u30ed\u30b0\u30a4\u30f3"),w(),y(3,"form",0),G("ngSubmit",function(){return r.login()}),y(4,"label",1),S(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),w(),y(6,"input",2),G("ngModelChange",function(o){return r.email=o}),w(),y(7,"label",3),S(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),w(),y(9,"input",4),G("ngModelChange",function(o){return r.password=o}),w(),y(10,"button",5),S(11,"\u30ed\u30b0\u30a4\u30f3"),w()(),y(12,"p"),S(13),w(),y(14,"p"),S(15,"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u5834\u5408\u306f\u3001"),y(16,"a",6),S(17,"\u3053\u3061\u3089"),w(),S(18,"\u304b\u3089\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),w(),y(19,"p")(20,"a",6),S(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),w()()()),2&i&&(I(6),R("ngModel",r.email),I(3),R("ngModel",r.password),I(4),qe(r.message),I(3),R("routerLink",$n(5,U_e)),I(4),R("routerLink",$n(6,z_e)))},dependencies:[ar,Wd,sr,or,Hd,Bl,qi,Ha,Cn,_p,Od]})}return n})();const $_e=function(){return["/login"]},W_e=function(){return["/reset-password"]};let q_e=(()=>{class n{constructor(e){this.authService=e,this.email="",this.password="",this.message=""}register(){this.authService.register(this.email,this.password).then(()=>{this.message="\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="auth/email-already-in-use"===e.code?"\u3059\u3067\u306b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059":"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ks))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-register"]],standalone:!0,features:[wi],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(y(0,"div")(1,"h2"),S(2,"\u767b\u9332"),w(),y(3,"form",0),G("ngSubmit",function(){return r.register()}),y(4,"label",1),S(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),w(),y(6,"input",2),G("ngModelChange",function(o){return r.email=o}),w(),y(7,"label",3),S(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),w(),y(9,"input",4),G("ngModelChange",function(o){return r.password=o}),w(),y(10,"button",5),S(11,"\u767b\u9332"),w()(),y(12,"p"),S(13),w(),y(14,"p"),S(15,"\u65e2\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u306e\u5834\u5408\u306f\u3001"),y(16,"a",6),S(17,"\u3053\u3061\u3089"),w(),S(18,"\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),w(),y(19,"p")(20,"a",6),S(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),w()()()),2&i&&(I(6),R("ngModel",r.email),I(3),R("ngModel",r.password),I(4),qe(r.message),I(3),R("routerLink",$n(5,$_e)),I(4),R("routerLink",$n(6,W_e)))},dependencies:[ar,Wd,sr,or,Hd,Bl,qi,Ha,Cn,_p,Od]})}return n})();const G_e=function(){return["/login"]};let Y_e=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.message=""}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ks),z(ss))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[wi],decls:16,vars:4,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(y(0,"div")(1,"h2"),S(2,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a"),w(),y(3,"form",0),G("ngSubmit",function(){return r.resetPassword()}),y(4,"label",1),S(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),w(),y(6,"input",2),G("ngModelChange",function(o){return r.email=o}),w(),y(7,"button",3),S(8,"\u518d\u8a2d\u5b9a\u30ea\u30f3\u30af\u3092\u9001\u4fe1"),w()(),y(9,"p"),S(10),w(),y(11,"p"),S(12,"\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u623b\u308b\u5834\u5408\u306f\u3001"),y(13,"a",4),S(14,"\u3053\u3061\u3089"),w(),S(15,"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),w()()),2&i&&(I(6),R("ngModel",r.email),I(4),qe(r.message),I(3),R("routerLink",$n(3,G_e)))},dependencies:[ar,Wd,sr,or,Hd,Bl,qi,Ha,Cn,_p,Od]})}return n})(),Z_e=(()=>{class n{constructor(e,i){this.authService=e,this.firestore=i,this.user={},this.profile={displayName:"",bio:"",email:"",company:"",position:"",team:""},this.userId="",this.message=""}ngOnInit(){this.authService.user$.subscribe(e=>{e&&(this.userId=e.uid,this.firestore.collection("users").doc(e.uid).valueChanges().subscribe(i=>{i&&"object"==typeof i?(this.user=e,this.profile={...i,displayName:e.displayName,email:e.email}):(this.user=e,this.profile={displayName:e.displayName,email:e.email,bio:"",company:"",position:"",team:""})}))})}updateProfile(){this.authService.updateProfile(this.profile.displayName,this.profile.bio,this.profile.company,this.profile.position,this.profile.team).then(()=>{this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(e=>{console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f",e),this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ks),z(Ja))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-profile"]],standalone:!0,features:[wi],decls:29,vars:8,consts:[[1,"profile-container"],[3,"ngSubmit"],["for","userId"],["type","text","name","userId","disabled","",3,"value"],["for","username"],["type","text","name","username","required","",3,"ngModel","ngModelChange"],["for","email"],["type","email","name","email","disabled","",3,"ngModel","ngModelChange"],["for","bio"],["name","bio",3,"ngModel","ngModelChange"],["for","company"],["type","text","name","company",3,"ngModel","ngModelChange"],["for","position"],["type","text","name","position",3,"ngModel","ngModelChange"],["for","team"],["type","text","name","team",3,"ngModel","ngModelChange"],["type","submit"]],template:function(i,r){1&i&&(y(0,"div",0)(1,"h2"),S(2,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),w(),y(3,"form",1),G("ngSubmit",function(){return r.updateProfile()}),y(4,"label",2),S(5,"\u30e6\u30fc\u30b6\u30fcID:"),w(),$t(6,"input",3),y(7,"label",4),S(8,"\u30e6\u30fc\u30b6\u30fc\u540d:"),w(),y(9,"input",5),G("ngModelChange",function(o){return r.profile.displayName=o}),w(),y(10,"label",6),S(11,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),w(),y(12,"input",7),G("ngModelChange",function(o){return r.profile.email=o}),w(),y(13,"label",8),S(14,"\u81ea\u5df1\u7d39\u4ecb:"),w(),y(15,"textarea",9),G("ngModelChange",function(o){return r.profile.bio=o}),w(),y(16,"label",10),S(17,"\u4f1a\u793e:"),w(),y(18,"input",11),G("ngModelChange",function(o){return r.profile.company=o}),w(),y(19,"label",12),S(20,"\u5f79\u8077:"),w(),y(21,"input",13),G("ngModelChange",function(o){return r.profile.position=o}),w(),y(22,"label",14),S(23,"\u90e8\u7f72\u307e\u305f\u306f\u30c1\u30fc\u30e0:"),w(),y(24,"input",15),G("ngModelChange",function(o){return r.profile.team=o}),w(),y(25,"button",16),S(26,"\u66f4\u65b0"),w()(),y(27,"p"),S(28),w()()),2&i&&(I(6),R("value",r.userId),I(3),R("ngModel",r.profile.displayName),I(3),R("ngModel",r.profile.email),I(3),R("ngModel",r.profile.bio),I(3),R("ngModel",r.profile.company),I(3),R("ngModel",r.profile.position),I(3),R("ngModel",r.profile.team),I(4),qe(r.message))},dependencies:[ar,Wd,sr,or,Hd,Bl,qi,Ha,Cn,_p],styles:[".profile-container[_ngcontent-%COMP%]{width:800px;max-width:100%;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:10px;background-color:#f9f9f9}h2[_ngcontent-%COMP%]{text-align:center;color:#333}form[_ngcontent-%COMP%]{display:block}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px;font-weight:700;color:#555}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{display:block;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#45a049}p[_ngcontent-%COMP%]{margin-top:20px;color:green;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:10px}"]})}return n})();function K_e(n,t){if(1&n){const e=je();y(0,"li"),S(1),y(2,"button",1),G("click",function(){const s=J(e).$implicit;return ee(V().selectUser(s.uid))}),S(3,"\u30bf\u30b9\u30af\u3092\u8868\u793a\u3059\u308b"),w()()}if(2&n){const e=t.$implicit;I(1),mw(" ",e.displayName," ",e.email," ")}}function Q_e(n,t){if(1&n&&(y(0,"div",5),S(1),w()),2&n){const e=V();I(1),On(" ",e.notificationMessage," ")}}function X_e(n,t){if(1&n){const e=je();y(0,"app-task-list",6),G("taskDuplicated",function(r){return J(e),ee(V().showNotificationMessage(r))}),w()}2&n&&R("userId",V().selectedUserId)("isOtherUser",!0)("isReadOnly",!0)}let J_e=(()=>{class n{constructor(e,i){this.firestore=e,this.taskService=i,this.searchTerm="",this.users=[],this.selectedUserId=null,this.notificationMessage=null,this.userSelected=new We}searchUsers(){this.users=[],this.selectedUserId=null,this.firestore.collection("users",e=>e.where("email","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("displayName","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})}),this.firestore.collection("users",e=>e.where("uid","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id})})})}selectUser(e){this.selectedUserId=e}showNotificationMessage(e){this.notificationMessage=e,setTimeout(()=>{this.notificationMessage=null},3e3)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Ja),z(el))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-user-search"]],outputs:{userSelected:"userSelected"},standalone:!0,features:[wi],decls:8,vars:4,consts:[["type","text","placeholder","\u30e6\u30fc\u30b6\u30fc\u540d\u3067\u691c\u7d22",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["class","notification",4,"ngIf"],[3,"userId","isOtherUser","isReadOnly","taskDuplicated",4,"ngIf"],[1,"notification"],[3,"userId","isOtherUser","isReadOnly","taskDuplicated"]],template:function(i,r){1&i&&(y(0,"div")(1,"input",0),G("ngModelChange",function(o){return r.searchTerm=o}),w(),y(2,"button",1),G("click",function(){return r.searchUsers()}),S(3,"\u691c\u7d22"),w(),y(4,"ul"),ce(5,K_e,4,2,"li",2),w(),ce(6,Q_e,2,1,"div",3),ce(7,X_e,1,3,"app-task-list",4),w()),2&i&&(I(1),R("ngModel",r.searchTerm),I(4),R("ngForOf",r.users),I(1),R("ngIf",r.notificationMessage),I(1),R("ngIf",r.selectedUserId))},dependencies:[ar,sr,or,qi,Cn,Ci,nr,q$],styles:[".notification[_ngcontent-%COMP%]{width:100%;background-color:#d3d3d3;color:#000;text-align:center;padding:10px;z-index:1000}"]})}return n})(),Ql=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(){return this.authService.user$.pipe(ir(1),Oe(e=>!!e||(this.router.navigate(["/login"]),!1)))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ks),ie(ss))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xm(n){return n+.5|0}const Xl=(n,t,e)=>Math.max(Math.min(n,e),t);function ly(n){return Xl(xm(2.55*n),0,255)}function Tu(n){return Xl(xm(255*n),0,255)}function Jl(n){return Xl(xm(n/2.55)/100,0,1)}function G$(n){return Xl(xm(100*n),0,100)}const Ho={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},PR=[..."0123456789ABCDEF"],eve=n=>PR[15&n],tve=n=>PR[(240&n)>>4]+PR[15&n],pE=n=>(240&n)>>4==(15&n);const ove=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Y$(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function ave(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function lve(n,t,e){const i=Y$(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function OR(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=function cve(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}(e,i,r,u,s),l=60*l+.5),[0|l,c||0,a]}function FR(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Tu)}function NR(n,t,e){return FR(Y$,n,t,e)}function Z$(n){return(n%360+360)%360}const K$={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Q$={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let mE;const _ve=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,LR=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,Em=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function gE(n,t,e){if(n){let i=OR(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,0===t?360:1)),i=NR(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function X$(n,t){return n&&Object.assign(t||{},n)}function J$(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Tu(n[3]))):(t=X$(n,{r:0,g:0,b:0,a:1})).a=Tu(t.a),t}function wve(n){return"r"===n.charAt(0)?function vve(n){const t=_ve.exec(n);let i,r,s,e=255;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?ly(o):Xl(255*o,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?ly(i):Xl(i,0,255)),r=255&(t[4]?ly(r):Xl(r,0,255)),s=255&(t[6]?ly(s):Xl(s,0,255)),{r:i,g:r,b:s,a:e}}}(n):function hve(n){const t=ove.exec(n);let i,e=255;if(!t)return;t[5]!==i&&(e=t[6]?ly(+t[5]):Tu(+t[5]));const r=Z$(+t[2]),s=+t[3]/100,o=+t[4]/100;return i="hwb"===t[1]?function uve(n,t,e){return FR(lve,n,t,e)}(r,s,o):"hsv"===t[1]?function dve(n,t,e){return FR(ave,n,t,e)}(r,s,o):NR(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}(n)}class Dm{constructor(t){if(t instanceof Dm)return t;const e=typeof t;let i;"object"===e?i=J$(t):"string"===e&&(i=function ive(n){var e,t=n.length;return"#"===n[0]&&(4===t||5===t?e={r:255&17*Ho[n[1]],g:255&17*Ho[n[2]],b:255&17*Ho[n[3]],a:5===t?17*Ho[n[4]]:255}:(7===t||9===t)&&(e={r:Ho[n[1]]<<4|Ho[n[2]],g:Ho[n[3]]<<4|Ho[n[4]],b:Ho[n[5]]<<4|Ho[n[6]],a:9===t?Ho[n[7]]<<4|Ho[n[8]]:255})),e}(t)||function gve(n){mE||(mE=function mve(){const n={},t=Object.keys(Q$),e=Object.keys(K$);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,K$[s]);s=parseInt(Q$[o],16),n[a]=[s>>16&255,s>>8&255,255&s]}return n}(),mE.transparent=[0,0,0,0]);const t=mE[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||wve(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=X$(this._rgb);return t&&(t.a=Jl(t.a)),t}set rgb(t){this._rgb=J$(t)}rgbString(){return this._valid?function yve(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Jl(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function sve(n){var t=(n=>pE(n.r)&&pE(n.g)&&pE(n.b)&&pE(n.a))(n)?eve:tve;return n?"#"+t(n.r)+t(n.g)+t(n.b)+((n,t)=>n<255?t(n):"")(n.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function pve(n){if(!n)return;const t=OR(n),e=t[0],i=G$(t[1]),r=G$(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Jl(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function bve(n,t,e){const i=Em(Jl(n.r)),r=Em(Jl(n.g)),s=Em(Jl(n.b));return{r:Tu(LR(i+e*(Em(Jl(t.r))-i))),g:Tu(LR(r+e*(Em(Jl(t.g))-r))),b:Tu(LR(s+e*(Em(Jl(t.b))-s))),a:n.a+e*(t.a-n.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Dm(this.rgb)}alpha(t){return this._rgb.a=Tu(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=xm(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return gE(this._rgb,2,t),this}darken(t){return gE(this._rgb,2,-t),this}saturate(t){return gE(this._rgb,1,t),this}desaturate(t){return gE(this._rgb,1,-t),this}rotate(t){return function fve(n,t){var e=OR(n);e[0]=Z$(e[0]+t),e=NR(e),n.r=e[0],n.g=e[1],n.b=e[2]}(this._rgb,t),this}}function ec(){}const Cve=(()=>{let n=0;return()=>n++})();function cn(n){return null===n||typeof n>"u"}function ri(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Xt(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function Ti(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function vo(n,t){return Ti(n)?n:t}function Rt(n,t){return typeof n>"u"?t:n}const e8=(n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Gn(n,t,e){if(n&&"function"==typeof n.call)return n.apply(e,t)}function Dn(n,t,e,i){let r,s,o;if(ri(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Xt(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function _E(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function vE(n){if(ri(n))return n.map(vE);if(Xt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=vE(n[e[r]]);return t}return n}function t8(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function Eve(n,t,e,i){if(!t8(n))return;const r=t[n],s=e[n];Xt(r)&&Xt(s)?cy(r,s,i):t[n]=vE(s)}function cy(n,t,e){const i=ri(t)?t:[t],r=i.length;if(!Xt(n))return n;const s=(e=e||{}).merger||Eve;let o;for(let a=0;a<r;++a){if(o=i[a],!Xt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function uy(n,t){return cy(n,t,{merger:Dve})}function Dve(n,t,e){if(!t8(n))return;const i=t[n],r=e[n];Xt(i)&&Xt(r)?uy(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=vE(r))}const n8={"":n=>n,x:n=>n.x,y:n=>n.y};function Su(n,t){return(n8[t]||(n8[t]=function Sve(n){const t=function Tve(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}(n);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t)))(n)}function VR(n){return n.charAt(0).toUpperCase()+n.slice(1)}const dy=n=>typeof n<"u",Iu=n=>"function"==typeof n,r8=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0},si=Math.PI,oi=2*si,Ave=oi+si,yE=Number.POSITIVE_INFINITY,kve=si/180,Ki=si/2,bh=si/4,s8=2*si/3,Au=Math.log10,tl=Math.sign;function hy(n,t,e){return Math.abs(n-t)<e}function o8(n){const t=Math.round(n);n=hy(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Au(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Tm(n){return!isNaN(parseFloat(n))&&isFinite(n)}function a8(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function pa(n){return n*(si/180)}function BR(n){return n*(180/si)}function l8(n){if(!Ti(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function c8(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*si&&(s+=oi),{angle:s,distance:r}}function jR(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Pve(n,t){return(n-t+Ave)%oi-si}function yo(n){return(n%oi+oi)%oi}function fy(n,t,e,i){const r=yo(n),s=yo(t),o=yo(e),a=yo(s-r),l=yo(o-r),c=yo(r-s),u=yo(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Pr(n,t,e){return Math.max(t,Math.min(e,n))}function tc(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function UR(n,t,e){e=e||(o=>n[o]<t);let s,i=n.length-1,r=0;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const nc=(n,t,e,i)=>UR(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),Fve=(n,t,e)=>UR(n,e,i=>n[i][t]>=e),u8=["push","pop","shift","splice","unshift"];function d8(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),!(i.length>0)&&(u8.forEach(s=>{delete n[s]}),delete n._chartjs)}function h8(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const f8=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function p8(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,f8.call(window,()=>{i=!1,n.apply(t,e)}))}}const zR=n=>"start"===n?"left":"end"===n?"right":"center",hs=(n,t,e)=>"start"===n?t:"end"===n?e:(t+e)/2;function m8(n,t,e){const i=t.length;let r=0,s=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:f,maxDefined:g}=o.getUserBounds();f&&(r=Pr(Math.min(nc(a,l,c).lo,e?i:nc(t,l,o.getPixelForValue(c)).lo),0,i-1)),s=g?Pr(Math.max(nc(a,o.axis,u,!0).hi+1,e?0:nc(t,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function g8(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}const bE=n=>0===n||1===n,_8=(n,t,e)=>-Math.pow(2,10*(n-=1))*Math.sin((n-t)*oi/e),v8=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*oi/e)+1,py={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*Ki),easeOutSine:n=>Math.sin(n*Ki),easeInOutSine:n=>-.5*(Math.cos(si*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>bE(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>bE(n)?n:_8(n,.075,.3),easeOutElastic:n=>bE(n)?n:v8(n,.075,.3),easeInOutElastic:n=>bE(n)?n:n<.5?.5*_8(2*n,.1125,.45):.5+.5*v8(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let t=1.70158;return(n/=.5)<1?n*n*((1+(t*=1.525))*n-t)*.5:.5*((n-=2)*n*((1+(t*=1.525))*n+t)+2)},easeInBounce:n=>1-py.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*py.easeInBounce(2*n):.5*py.easeOutBounce(2*n-1)+.5};function HR(n){if(n&&"object"==typeof n){const t=n.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function y8(n){return HR(n)?n:new Dm(n)}function $R(n){return HR(n)?n:new Dm(n).saturate(.5).darken(.1).hexString()}const jve=["x","y","borderWidth","radius","tension"],Uve=["color","borderColor","backgroundColor"],b8=new Map;function my(n,t,e){return function $ve(n,t){t=t||{};const e=n+JSON.stringify(t);let i=b8.get(e);return i||(i=new Intl.NumberFormat(n,t),b8.set(e,i)),i}(t,e).format(n)}const w8={values:n=>ri(n)?n:""+n,numeric(n,t,e){if(0===n)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=function Wve(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}(n,e)}const o=Au(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),my(n,i,l)},logarithmic(n,t,e){if(0===n)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(Au(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?w8.numeric.call(this,n,t,e):""}};var wE={formatters:w8};const wh=Object.create(null),WR=Object.create(null);function gy(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function qR(n,t,e){return"string"==typeof t?cy(gy(n,t),e):cy(gy(n,""),t)}class Gve{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>$R(r.backgroundColor),this.hoverBorderColor=(i,r)=>$R(r.borderColor),this.hoverColor=(i,r)=>$R(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return qR(this,t,e)}get(t){return gy(this,t)}describe(t,e){return qR(WR,t,e)}override(t,e){return qR(wh,t,e)}route(t,e,i,r){const s=gy(this,t),o=gy(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[r];return Xt(l)?Object.assign({},c,l):Rt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var Si=new Gve({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function zve(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),n.set("animations",{colors:{type:"color",properties:Uve},numbers:{type:"number",properties:jve}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function Hve(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function qve(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function CE(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function Zve(n,t,e,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,u,f,g;for(l=0;l<a;l++)if(f=e[l],null==f||ri(f)){if(ri(f))for(c=0,u=f.length;c<u;c++)g=f[c],null!=g&&!ri(g)&&(o=CE(n,r,s,o,g))}else o=CE(n,r,s,o,f);n.restore();const v=s.length/2;if(v>e.length){for(l=0;l<v;l++)delete r[s[l]];s.splice(0,v)}return o}function Ch(n,t,e){const i=n.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function C8(n,t){!t&&!n||((t=t||n.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function GR(n,t,e,i){x8(n,t,e,i,null)}function x8(n,t,e,i,r){let s,o,a,l,c,u,f,g;const v=t.pointStyle,b=t.rotation,x=t.radius;let E=(b||0)*kve;if(v&&"object"==typeof v&&(s=v.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(e,i),n.rotate(E),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),void n.restore();if(!(isNaN(x)||x<=0)){switch(n.beginPath(),v){default:r?n.ellipse(e,i,r/2,x,0,0,oi):n.arc(e,i,x,0,oi),n.closePath();break;case"triangle":u=r?r/2:x,n.moveTo(e+Math.sin(E)*u,i-Math.cos(E)*x),E+=s8,n.lineTo(e+Math.sin(E)*u,i-Math.cos(E)*x),E+=s8,n.lineTo(e+Math.sin(E)*u,i-Math.cos(E)*x),n.closePath();break;case"rectRounded":c=.516*x,l=x-c,o=Math.cos(E+bh)*l,f=Math.cos(E+bh)*(r?r/2-c:l),a=Math.sin(E+bh)*l,g=Math.sin(E+bh)*(r?r/2-c:l),n.arc(e-f,i-a,c,E-si,E-Ki),n.arc(e+g,i-o,c,E-Ki,E),n.arc(e+f,i+a,c,E,E+Ki),n.arc(e-g,i+o,c,E+Ki,E+si),n.closePath();break;case"rect":if(!b){l=Math.SQRT1_2*x,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}E+=bh;case"rectRot":f=Math.cos(E)*(r?r/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,g=Math.sin(E)*(r?r/2:x),n.moveTo(e-f,i-a),n.lineTo(e+g,i-o),n.lineTo(e+f,i+a),n.lineTo(e-g,i+o),n.closePath();break;case"crossRot":E+=bh;case"cross":f=Math.cos(E)*(r?r/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,g=Math.sin(E)*(r?r/2:x),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+g,i-o),n.lineTo(e-g,i+o);break;case"star":f=Math.cos(E)*(r?r/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,g=Math.sin(E)*(r?r/2:x),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+g,i-o),n.lineTo(e-g,i+o),E+=bh,f=Math.cos(E)*(r?r/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,g=Math.sin(E)*(r?r/2:x),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+g,i-o),n.lineTo(e-g,i+o);break;case"line":o=r?r/2:Math.cos(E)*x,a=Math.sin(E)*x,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(E)*(r?r/2:x),i+Math.sin(E)*x);break;case!1:n.closePath()}n.fill(),t.borderWidth>0&&n.stroke()}}function ic(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function xE(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function EE(n){n.restore()}function Kve(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else"after"===r!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Qve(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Jve(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(e-s.actualBoundingBoxAscent+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function eye(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function xh(n,t,e,i,r,s={}){const o=ri(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(n.save(),n.font=r.string,function Xve(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),cn(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&eye(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),cn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),Jve(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function _y(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*si,si,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,si,Ki,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ki,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Ki,!0),n.lineTo(e+o.topLeft,i)}const tye=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nye=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function iye(n,t){const e=(""+n).match(tye);if(!e||"normal"===e[1])return 1.2*t;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100}return t*n}const rye=n=>+n||0;function YR(n,t){const e={},i=Xt(t),r=i?Object.keys(t):t,s=Xt(n)?i?o=>Rt(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=rye(s(o));return e}function E8(n){return YR(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Eh(n){return YR(n,["topLeft","topRight","bottomLeft","bottomRight"])}function fs(n){const t=E8(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Cr(n,t){let e=Rt((n=n||{}).size,(t=t||Si.font).size);"string"==typeof e&&(e=parseInt(e,10));let i=Rt(n.style,t.style);i&&!(""+i).match(nye)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Rt(n.family,t.family),lineHeight:iye(Rt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Rt(n.weight,t.weight),string:""};return r.string=function Yve(n){return!n||cn(n.size)||cn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(r),r}function vy(n,t,e,i){let s,o,a,r=!0;for(s=0,o=n.length;s<o;++s)if(a=n[s],void 0!==a&&(void 0!==t&&"function"==typeof a&&(a=a(t),r=!1),void 0!==e&&ri(a)&&(a=a[e%a.length],r=!1),void 0!==a))return i&&!r&&(i.cacheable=!1),a}function ku(n,t){return Object.assign(Object.create(n),t)}function ZR(n,t=[""],e,i,r=(()=>n[0])){const s=e||n;typeof i>"u"&&(i=A8("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ZR([a,...n],t,s,i)};return new Proxy(o,{deleteProperty:(a,l)=>(delete a[l],delete a._keys,delete n[0][l],!0),get:(a,l)=>T8(a,l,()=>function fye(n,t,e,i){let r;for(const s of t)if(r=A8(oye(s,n),e),typeof r<"u")return KR(n,r)?QR(e,i,n,r):r}(l,t,n,a)),getOwnPropertyDescriptor:(a,l)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(a,l)=>k8(a).includes(l),ownKeys:a=>k8(a),set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Sm(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:D8(n,i),setContext:s=>Sm(n,s,e,i),override:s=>Sm(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,a)=>T8(s,o,()=>function aye(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return Iu(a)&&o.isScriptable(t)&&(a=function lye(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),KR(n,l)&&(l=QR(r._scopes,r,n,l)),l}(t,a,n,e)),ri(a)&&a.length&&(a=function cye(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(Xt(t[0])){const l=t,c=r._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=QR(c,r,n,u);t.push(Sm(f,s,o&&o[n],a))}}return t}(t,a,n,o.isIndexable)),KR(t,a)&&(a=Sm(a,r,s&&s[t],o)),a}(s,o,a)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,a)=>(n[o]=a,delete s[o],!0)})}function D8(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Iu(e)?e:()=>e,isIndexable:Iu(i)?i:()=>i}}const oye=(n,t)=>n?n+VR(t):t,KR=(n,t)=>Xt(t)&&"adapters"!==n&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function T8(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||"constructor"===t)return n[t];const i=e();return n[t]=i,i}function S8(n,t,e){return Iu(n)?n(t,e):n}const uye=(n,t)=>!0===n?t:"string"==typeof n?Su(t,n):void 0;function dye(n,t,e,i,r){for(const s of t){const o=uye(e,s);if(o){n.add(o);const a=S8(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(!1===o&&typeof i<"u"&&e!==i)return null}return!1}function QR(n,t,e,i){const r=t._rootScopes,s=S8(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=I8(a,o,e,s||e,i);return!(null===l||typeof s<"u"&&s!==e&&(l=I8(a,o,s,l,i),null===l))&&ZR(Array.from(a),[""],r,s,()=>function hye(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return ri(r)&&Xt(e)?e:r||{}}(t,e,i))}function I8(n,t,e,i,r){for(;e;)e=dye(n,t,e,i,r);return e}function A8(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function k8(n){let t=n._keys;return t||(t=n._keys=function pye(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}(n._scopes)),t}function M8(n,t,e,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+e,u=t[c],o[a]={r:r.parse(Su(u,s),c)};return o}const mye=Number.EPSILON||1e-14,Im=(n,t)=>t<n.length&&!n[t].skip&&n[t],R8=n=>"x"===n?"y":"x";function gye(n,t,e,i){const r=n.skip?t:n,s=t,o=e.skip?t:e,a=jR(s,r),l=jR(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=i*c,g=i*u;return{previous:{x:s.x-f*(o.x-r.x),y:s.y-f*(o.y-r.y)},next:{x:s.x+g*(o.x-r.x),y:s.y+g*(o.y-r.y)}}}function DE(n,t,e){return Math.max(Math.min(n,e),t)}function wye(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),"monotone"===t.cubicInterpolationMode)!function yye(n,t="x"){const e=R8(t),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Im(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Im(n,o+1),l){if(c){const u=c[t]-l[t];r[o]=0!==u?(c[e]-l[e])/u:0}s[o]=a?c?tl(r[o-1])!==tl(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function _ye(n,t,e){const i=n.length;let r,s,o,a,l,c=Im(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Im(n,u+1),l&&c){if(hy(t[u],0,mye)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=r*o*t[u],e[u+1]=s*o*t[u])}})(n,r,s),function vye(n,t,e="x"){const i=R8(e),r=n.length;let s,o,a,l=Im(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Im(n,c+1),!a)continue;const u=a[e],f=a[i];o&&(s=(u-o[e])/3,a[`cp1${e}`]=u-s,a[`cp1${i}`]=f-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${i}`]=f+s*t[c])}}(n,s,t)}(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=gye(c,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&function bye(n,t){let e,i,r,s,o,a=ic(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&ic(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=DE(r.cp1x,t.left,t.right),r.cp1y=DE(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=DE(r.cp2x,t.left,t.right),r.cp2y=DE(r.cp2y,t.top,t.bottom)))}(n,e)}function XR(){return typeof window<"u"&&typeof document<"u"}function JR(n){let t=n.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function TE(n,t,e){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*t.parentNode[e])):i=n,i}const SE=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),xye=["top","right","bottom","left"];function Dh(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=xye[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Eye=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Th(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=SE(e),s="border-box"===r.boxSizing,o=Dh(r,"padding"),a=Dh(r,"border","width"),{x:l,y:c,box:u}=function Dye(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let a,l,o=!1;if(Eye(r,s,n.target))a=r,l=s;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}(n,e),f=o.left+(u&&a.left),g=o.top+(u&&a.top);let{width:v,height:b}=t;return s&&(v-=o.width+a.width,b-=o.height+a.height),{x:Math.round((l-f)/v*e.width/i),y:Math.round((c-g)/b*e.height/i)}}const IE=n=>Math.round(10*n)/10;function P8(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0)}const Iye=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};XR()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function O8(n,t){const e=function Cye(n,t){return SE(n).getPropertyValue(t)}(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Sh(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Aye(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:"middle"===i?e<.5?n.y:t.y:"after"===i?e<1?n.y:t.y:e>0?t.y:n.y}}function kye(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=Sh(n,r,e),a=Sh(r,s,e),l=Sh(s,t,e),c=Sh(o,a,e),u=Sh(a,l,e);return Sh(c,u,e)}function Am(n,t,e){return n?function(n,t){return{x:e=>n+n+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,i)=>e-i,leftForLtr:(e,i)=>e-i}}(t,e):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,t)=>n+t,leftForLtr:(n,t)=>n}}function F8(n,t){let e,i;("ltr"===t||"rtl"===t)&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function N8(n,t){void 0!==t&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function L8(n){return"angle"===n?{between:fy,compare:Pve,normalize:yo}:{between:tc,compare:(t,e)=>t-e,normalize:t=>t}}function V8({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e==0,style:r}}function B8(n,t,e){if(!e)return[n];const{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=L8(i),{start:u,end:f,loop:g,style:v}=function Pye(n,t,e){const{property:i,start:r,end:s}=e,{between:o,normalize:a}=L8(i),l=t.length;let g,v,{start:c,end:u,loop:f}=n;if(f){for(c+=l,u+=l,g=0,v=l;g<v&&o(a(t[c%l][i]),r,s);++g)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:n.style}}(n,t,e),b=[];let O,k,F,x=!1,E=null;for(let P=u,N=u;P<=f;++P)k=t[P%o],!k.skip&&(O=c(k[i]),O!==F&&(x=l(O,r,s),null===E&&(x||l(r,F,O)&&0!==a(r,F))&&(E=0===a(O,r)?P:N),null!==E&&(!x||0===a(s,O)||l(s,F,O))&&(b.push(V8({start:E,end:P,loop:g,count:o,style:v})),E=null),N=P,F=O));return null!==E&&b.push(V8({start:E,end:f,loop:g,count:o,style:v})),b}function j8(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const s=B8(i[r],n.points,t);s.length&&e.push(...s)}return e}function z8(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Vye(n,t){if(!t)return!1;const e=[],i=function(r,s){return HR(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}class Bye{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.duration;e.listeners[r].forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=f8.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let l,o=s.length-1,a=!1;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var rc=new Bye;const H8="transparent",jye={boolean:(n,t,e)=>e>.5?t:n,color(n,t,e){const i=y8(n||H8),r=i.valid&&y8(t||H8);return r&&r.valid?r.mix(i,e).hexString():t},number:(n,t,e)=>n+(t-n)*e};class Uye{constructor(t,e,i,r){const s=e[i];r=vy([t.to,r,s,t.from]);const o=vy([t.from,s,r]);this._active=!0,this._fn=t.fn||jye[t.type||typeof o],this._easing=py[t.easing]||py.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=vy([t.to,e,r,t.from]),this._from=vy([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||e<i),!this._active)return this._target[r]=a,void this._notify(!0);e<0?this._target[r]=s:(l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class $8{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Xt(t))return;const e=Object.keys(Si.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Xt(s))return;const o={};for(const a of e)o[a]=s[a];(ri(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=function Hye(n,t){if(!t)return;let e=n.options;if(e)return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;n.options=t}(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&function zye(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(t,e));continue}const u=e[c];let f=s[c];const g=i.get(c);if(f){if(g&&f.active()){f.update(g,u,a);continue}f.cancel()}g&&g.duration?(s[c]=f=new Uye(g,t,c,u),r.push(f)):t[c]=u}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(rc.add(this._chart,i),!0):void 0}}function W8(n,t){const e=n&&n.options||{},i=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:i?s:r,end:i?r:s}}function q8(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function G8(n,t,e,i={}){const r=n.keys,s="single"===i.mode;let o,a,l,c;if(null!==t){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(i.all)continue;break}c=n.values[l],Ti(c)&&(s||0===t||tl(t)===tl(c))&&(t+=c)}return t}}function Y8(n,t){const e=n&&n.options.stacked;return e||void 0===e&&void 0!==t.stack}function Zye(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Z8(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function K8(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function Gye(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}(s,o,i),f=t.length;let g;for(let v=0;v<f;++v){const b=t[v],{[l]:x,[c]:E}=b;g=(b._stacks||(b._stacks={}))[c]=Zye(r,u,x),g[a]=E,g._top=Z8(g,o,!0,i.type),g._bottom=Z8(g,o,!1,i.type),(g._visualValues||(g._visualValues={}))[a]=E}}function eP(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function yy(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[i]||void 0===s[i][e])return;delete s[i][e],void 0!==s[i]._visualValues&&void 0!==s[i]._visualValues[e]&&delete s[i]._visualValues[e]}}}const tP=n=>"reset"===n||"none"===n,Q8=(n,t)=>t?n:Object.assign({},n);let Mu=(()=>class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Y8(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yy(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(g,v,b,x)=>"x"===g?v:"r"===g?x:b,o=i.xAxisID=Rt(r.xAxisID,eP(e,"x")),a=i.yAxisID=Rt(r.yAxisID,eP(e,"y")),l=i.rAxisID=Rt(r.rAxisID,eP(e,"r")),c=i.indexAxis,u=i.iAxisID=s(c,o,a,l),f=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&d8(this._data,this),e._stacked&&yy(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(Xt(i))this._data=function qye(n,t){const{iScale:e,vScale:i}=t,r="x"===e.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}(i,this._cachedMeta);else if(r!==i){if(r){d8(r,this);const s=this._cachedMeta;yy(s),s._parsed=[]}i&&Object.isExtensible(i)&&function Lve(n,t){n._chartjs?n._chartjs.listeners.push(t):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),u8.forEach(e=>{const i="_onData"+VR(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...s)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=Y8(i.vScale,i),i.stack!==r.stack&&(s=!0,yy(i),i.stack=r.stack),this._resyncElements(e),(s||o!==i._stacked)&&K8(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis;let f,g,v,c=0===e&&i===s.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,v=s;else{v=ri(s[e])?this.parseArrayData(r,s,e,i):Xt(s[e])?this.parseObjectData(r,s,e,i):this.parsePrimitiveData(r,s,e,i);const b=()=>null===g[l]||u&&g[l]<u[l];for(f=0;f<i;++f)r._parsed[f+e]=g=v[f],c&&(b()&&(c=!1),u=g);r._sorted=c}a&&K8(this,v)}parsePrimitiveData(e,i,r,s){const{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),f=o===a,g=new Array(s);let v,b,x;for(v=0,b=s;v<b;++v)x=v+r,g[v]={[l]:f||o.parse(u[x],x),[c]:a.parse(i[x],x)};return g}parseArrayData(e,i,r,s){const{xScale:o,yScale:a}=e,l=new Array(s);let c,u,f,g;for(c=0,u=s;c<u;++c)f=c+r,g=i[f],l[c]={x:o.parse(g[0],f),y:a.parse(g[1],f)};return l}parseObjectData(e,i,r,s){const{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let f,g,v,b;for(f=0,g=s;f<g;++f)v=f+r,b=i[v],u[f]={x:o.parse(Su(b,l),v),y:a.parse(Su(b,c),v)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){const o=this._cachedMeta,a=i[e.axis];return G8({keys:q8(this.chart,!0),values:i._stacks[e.axis]._visualValues},a,o.index,{mode:r})}updateRangeFromParsed(e,i,r,s){const o=r[i.axis];let a=null===o?NaN:o;const l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=G8(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,a=s.length,l=this._getOtherScale(e),c=((n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:q8(this.chart,!0),values:null})(i,r),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:g}=function Yye(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(l);let v,b;function x(){b=s[v];const E=b[l.axis];return!Ti(b[e.axis])||f>E||g<E}for(v=0;v<a&&(x()||(this.updateRangeFromParsed(u,e,b,c),!o));++v);if(o)for(v=a-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(u,e,b,c);break}return u}getAllParsedValues(e){const i=this._cachedMeta._parsed,r=[];let s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][e.axis],Ti(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=function Wye(n){let t,e,i,r;return Xt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:!1===n}}(Rt(this.options.clip,function $ye(n,t,e){if(!1===e)return!1;const i=W8(n,e),r=W8(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,o,l,c),f=l;f<l+c;++f){const g=s[f];g.hidden||(g.active&&u?a.push(g):g.draw(e,o))}for(f=0;f<a.length;++f)a[f].draw(e,o)}getStyle(e,i){const r=i?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];o=a.$context||(a.$context=function Qye(n,t,e){return ku(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function Kye(n,t){return ku(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){const s="active"===i,o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&dy(r);if(l)return Q8(l,c);const u=this.chart.config,f=u.datasetElementScopeKeys(this._type,e),g=s?[`${e}Hover`,"hover",e,""]:[e,""],v=u.getOptionScopes(this.getDataset(),f),b=Object.keys(Si.elements[e]),E=u.resolveNamedOptions(v,b,()=>this.getContext(r,s,i),g);return E.$shared&&(E.$shared=c,o[a]=Object.freeze(Q8(E,c))),E}_resolveAnimations(e,i,r){const s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==s.options.animation){const f=this.chart.config,g=f.datasetAnimationScopeKeys(this._type,i),v=f.getOptionScopes(this.getDataset(),g);c=f.createResolver(v,this.getContext(e,r,i))}const u=new $8(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||tP(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(e,i,r,s){tP(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!tP(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,r=!0){const s=this._cachedMeta,o=s.data,a=e+i;let l;const c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,i),r&&this.updateElements(o,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,i);r._stacked&&yy(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}})();function ebe(n){const t=n.iScale,e=function Jye(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=h8(i.sort((r,s)=>r-s))}return n._cache.$bar}(t,n.type);let r,s,o,a,i=t._length;const l=()=>{32767===o||-32768===o||(dy(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function X8(n,t,e,i){return ri(n)?function ibe(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(n,t,e,i):t[e.axis]=e.parse(n,i),t}function J8(n,t,e,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,f,g;for(c=e,u=e+i;c<u;++c)g=t[c],f={},f[r.axis]=a||r.parse(o[c],c),l.push(X8(g,f,s,c));return l}function nP(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function obe(n,t,e,i){let r=t.borderSkipped;const s={};if(!r)return void(n.borderSkipped=s);if(!0===r)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function sbe(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}(n);"middle"===r&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[e9(u,o,a,l)]=!0,r=c)),s[e9(r,o,a,l)]=!0,n.borderSkipped=s}function e9(n,t,e,i){return i?(n=function abe(n,t,e){return n===t?e:n===e?t:n}(n,t,e),n=t9(n,e,t)):n=t9(n,t,e),n}function t9(n,t,e){return"start"===n?t:"end"===n?e:n}function lbe(n,{inflateAmount:t},e){n.inflateAmount="auto"===t?1===e?.33:0:t}let cbe=(()=>class n extends Mu{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,s){return J8(e,i,r,s)}parseArrayData(e,i,r,s){return J8(e,i,r,s)}parseObjectData(e,i,r,s){const{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u="x"===o.axis?l:c,f="x"===a.axis?l:c,g=[];let v,b,x,E;for(v=r,b=r+s;v<b;++v)E=i[v],x={},x[o.axis]=o.parse(Su(E,u),v),g.push(X8(Su(E,f),x,a,v));return g}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);const o=r._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(e),a=o._custom,l=nP(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){const o="reset"===s,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),f=this._getRuler(),{sharedOptions:g,includeOptions:v}=this._getSharedOptions(i,s);for(let b=i;b<i+r;b++){const x=this.getParsed(b),E=o||cn(x[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(b),O=this._calculateBarIndexPixels(b,f),k=(x._stacks||{})[l.axis],F={horizontal:u,base:E.base,enableBorderRadius:!k||nP(x._custom)||a===k._top||a===k._bottom,x:u?E.head:O.center,y:u?O.center:E.head,height:u?O.size:Math.abs(E.size),width:u?Math.abs(E.size):O.size};v&&(F.options=g||this.resolveDataElementOptions(b,e[b].active?"active":s));const q=F.options||e[b].options;obe(F,q,k,a),lbe(F,q,f.ratio),this.updateElement(e[b],b,F,s)}}_getStacks(e,i){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=r.options.stacked,a=[],l=c=>{const u=c.controller.getParsed(i),f=u&&u[c.vScale.axis];if(cn(f)||isNaN(f))return!0};for(const c of s)if((void 0===i||!l(c))&&((!1===o||-1===a.indexOf(c.stack)||void 0===o&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,r){const s=this._getStacks(e,r),o=void 0!==i?s.indexOf(i):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,r=i.iScale,s=[];let o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const l=e.barThickness;return{min:l||ebe(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),u=c._custom,f=nP(u);let x,E,g=c[i.axis],v=0,b=r?this.applyStack(i,c,r):g;b!==g&&(v=b-g,b=g),f&&(g=u.barStart,b=u.barEnd-u.barStart,0!==g&&tl(g)!==tl(u.barEnd)&&(v=0),v+=g);const O=cn(o)||f?v:o;let k=i.getPixelForValue(O);if(x=this.chart.getDataVisibility(e)?i.getPixelForValue(v+b):k,E=x-k,Math.abs(E)<a){E=function rbe(n,t,e){return 0!==n?tl(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(E,i,l)*a,g===l&&(k-=E/2);const F=i.getPixelForDecimal(0),q=i.getPixelForDecimal(1),K=Math.min(F,q),re=Math.max(F,q);k=Math.max(Math.min(k,re),K),x=k+E,r&&!f&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(x)-i.getValueForPixel(k))}if(k===i.getPixelForValue(l)){const F=tl(E)*i.getLineWidthForValue(l)/2;k+=F,E-=F}return{size:E,base:k,head:x,center:x+E/2}}_calculateBarIndexPixels(e,i){const r=i.scale,s=this.options,o=s.skipNull,a=Rt(s.maxBarThickness,1/0);let l,c;if(i.grouped){const u=o?this._getStackCount(e):i.stackCount,f="flex"===s.barThickness?function nbe(n,t,e,i){const r=t.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}(e,i,s,u):function tbe(n,t,e,i){const r=e.barThickness;let s,o;return cn(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}(e,i,s,u),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=f.start+f.chunk*g+f.chunk/2,c=Math.min(a,f.chunk*f.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[i.axis]&&!r[o].hidden&&r[o].draw(this._ctx)}})(),ube=(()=>class n extends Mu{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){const o=super.parsePrimitiveData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(e,i,r,s){const o=super.parseArrayData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=Rt(i[r+a][2],this.resolveDataElementOptions(a+r).radius);return o}parseObjectData(e,i,r,s){const o=super.parseObjectData(e,i,r,s);for(let a=0;a<o.length;a++){const l=i[r+a];o[a]._custom=Rt(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:r[e]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),f=a.axis,g=l.axis;for(let v=i;v<i+r;v++){const b=e[v],x=!o&&this.getParsed(v),E={},O=E[f]=o?a.getPixelForDecimal(.5):a.getPixelForValue(x[f]),k=E[g]=o?l.getBasePixel():l.getPixelForValue(x[g]);E.skip=isNaN(O)||isNaN(k),u&&(E.options=c||this.resolveDataElementOptions(v,b.active?"active":s),o&&(E.options.radius=0)),this.updateElement(b,v,E,s)}}resolveDataElementOptions(e,i){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==i&&(s.radius=0),s.radius+=Rt(r&&r._custom,o),s}})(),iP=(()=>class n extends Mu{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let a,l,o=c=>+r[c];if(Xt(r[e])){const{key:c="value"}=this._parsing;o=u=>+Su(r[u],c)}for(a=e,l=e+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return pa(this.options.rotation-90)}_getCircumference(){return pa(this.options.circumference)}_getRotationExtents(){let e=oi,i=-oi;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(((n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/t)(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:f,rotation:g}=this._getRotationExtents(),{ratioX:v,ratioY:b,offsetX:x,offsetY:E}=function dbe(n,t,e){let i=1,r=1,s=0,o=0;if(t<oi){const a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),g=Math.sin(l),v=(F,q,K)=>fy(F,a,l,!0)?1:Math.max(q,q*e,K,K*e),b=(F,q,K)=>fy(F,a,l,!0)?-1:Math.min(q,q*e,K,K*e),x=v(0,c,f),E=v(Ki,u,g),O=b(si,c,f),k=b(si+Ki,u,g);i=(x-O)/2,r=(E-k)/2,s=-(x+O)/2,o=-(E+k)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(g,f,c),F=Math.max(Math.min((r.width-a)/v,(r.height-a)/b)/2,0),q=e8(this.options.radius,F),re=(q-Math.max(q*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=x*q,this.offsetY=E*q,s.total=this.calculateTotal(),this.outerRadius=q-re*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-re*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/oi)}updateElements(e,i,r,s){const o="reset"===s,a=this.chart,l=a.chartArea,f=(l.left+l.right)/2,g=(l.top+l.bottom)/2,v=o&&a.options.animation.animateScale,b=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:O}=this._getSharedOptions(i,s);let F,k=this._getRotation();for(F=0;F<i;++F)k+=this._circumference(F,o);for(F=i;F<i+r;++F){const q=this._circumference(F,o),K=e[F],re={x:f+this.offsetX,y:g+this.offsetY,startAngle:k,endAngle:k+q,circumference:q,outerRadius:x,innerRadius:b};O&&(re.options=E||this.resolveDataElementOptions(F,K.active?"active":s)),k+=q,this.updateElement(K,F,re,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let s,r=0;for(s=0;s<i.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?oi*(Math.abs(e)/i):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=my(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const r=this.chart;let s,o,a,l,c;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,l=a.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(Rt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}})(),hbe=(()=>class n extends Mu{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=m8(i,s,a);this._drawStart=l,this._drawCount=c,g8(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(i,s),v=a.axis,b=l.axis,{spanGaps:x,segment:E}=this.options,O=Tm(x)?x:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||"none"===s,F=i+r,q=e.length;let K=i>0&&this.getParsed(i-1);for(let re=0;re<q;++re){const B=e[re],P=k?B:{};if(re<i||re>=F){P.skip=!0;continue}const N=this.getParsed(re),$=cn(N[b]),U=P[v]=a.getPixelForValue(N[v],re),W=P[b]=o||$?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[b],re);P.skip=isNaN(U)||isNaN(W)||$,P.stop=re>0&&Math.abs(N[v]-K[v])>O,E&&(P.parsed=N,P.raw=u.data[re]),g&&(P.options=f||this.resolveDataElementOptions(re,B.active?"active":s)),k||this.updateElement(B,re,P,s),K=N}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}})(),n9=(()=>class n extends Mu{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=my(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,r,s){return M8.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),l=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,r,s){const o="reset"===s,a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,f=u.xCenter,g=u.yCenter,v=u.getIndexAngle(0)-.5*si;let x,b=v;const E=360/this.countVisibleElements();for(x=0;x<i;++x)b+=this._computeAngle(x,s,E);for(x=i;x<i+r;x++){const O=e[x];let k=b,F=b+this._computeAngle(x,s,E),q=a.getDataVisibility(x)?u.getDistanceFromCenterForValue(this.getParsed(x).r):0;b=F,o&&(c.animateScale&&(q=0),c.animateRotate&&(k=F=v));const K={x:f,y:g,innerRadius:0,outerRadius:q,startAngle:k,endAngle:F,options:this.resolveDataElementOptions(x,O.active?"active":s)};this.updateElement(O,x,K,s)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?pa(this.resolveDataElementOptions(e,i).angle||r):0}})();var fbe=Object.freeze({__proto__:null,BarController:cbe,BubbleController:ube,DoughnutController:iP,LineController:hbe,PieController:(()=>class n extends iP{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}})(),PolarAreaController:n9,RadarController:(()=>class n extends Mu{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return M8.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,"resize"!==e){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:a},e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){const o=this._cachedMeta.rScale,a="reset"===s;for(let l=i;l<i+r;l++){const c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":s),f=o.getPointPositionForValue(l,this.getParsed(l).r),g=a?o.xCenter:f.x,v=a?o.yCenter:f.y,b={x:g,y:v,angle:f.angle,skip:isNaN(g)||isNaN(v),options:u};this.updateElement(c,l,b,s)}}})(),ScatterController:(()=>class n extends Mu{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){const i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:a}=m8(i,r,s);if(this._drawStart=o,this._drawCount=a,g8(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,f=this.resolveDataElementOptions(i,s),g=this.getSharedOptions(f),v=this.includeOptions(s,g),b=a.axis,x=l.axis,{spanGaps:E,segment:O}=this.options,k=Tm(E)?E:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||o||"none"===s;let q=i>0&&this.getParsed(i-1);for(let K=i;K<i+r;++K){const re=e[K],B=this.getParsed(K),P=F?re:{},N=cn(B[x]),$=P[b]=a.getPixelForValue(B[b],K),U=P[x]=o||N?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,B,c):B[x],K);P.skip=isNaN($)||isNaN(U)||N,P.stop=K>0&&Math.abs(B[b]-q[b])>k,O&&(P.parsed=B,P.raw=u.data[K]),v&&(P.options=g||this.resolveDataElementOptions(K,re.active?"active":s)),F||this.updateElement(re,K,P,s),q=B}this.updateSharedOptions(g,s,f)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}})()});function Ih(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rP{static override(t){Object.assign(rP.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ih()}parse(){return Ih()}format(){return Ih()}add(){return Ih()}diff(){return Ih()}startOf(){return Ih()}endOf(){return Ih()}}var pbe__date=rP;function mbe(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const l=a._reversePixels?Fve:nc;if(!i)return l(s,t,e);if(r._sharedOptions){const c=s[0],u="function"==typeof c.getRange&&c.getRange(t);if(u){const f=l(s,t,e-u),g=l(s,t,e+u);return{lo:f.lo,hi:g.hi}}}}return{lo:0,hi:s.length-1}}function by(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:g}=mbe(s[a],t,o,r);for(let v=f;v<=g;++v){const b=u[v];b.skip||i(b,c,v)}}}function sP(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||by(n,e,t,function(a,l,c){!r&&!ic(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function oP(n,t,e,i,r,s){return s||n.isPointInArea(t)?"r"!==e||i?function vbe(n,t,e,i,r,s){let o=[];const a=function gbe(n){const t=-1!==n.indexOf("x"),e=-1!==n.indexOf("y");return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let l=Number.POSITIVE_INFINITY;return by(n,e,t,function c(u,f,g){const v=u.inRange(t.x,t.y,r);if(i&&!v)return;const b=u.getCenterPoint(r);if(!s&&!n.isPointInArea(b)&&!v)return;const E=a(t,b);E<l?(o=[{element:u,datasetIndex:f,index:g}],l=E):E===l&&o.push({element:u,datasetIndex:f,index:g})}),o}(n,t,e,i,r,s):function _be(n,t,e,i){let r=[];return by(n,e,t,function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:f}=c8(o,{x:t.x,y:t.y});fy(f,c,u)&&r.push({element:o,datasetIndex:a,index:l})}),r}(n,t,e,r):[]}function i9(n,t,e,i,r){const s=[],o="x"===e?"inXRange":"inYRange";let a=!1;return by(n,e,t,(l,c,u)=>{l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var ybe={evaluateInteractionItems:by,modes:{index(n,t,e,i){const r=Th(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?sP(n,r,s,i,o):oP(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){const r=Th(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?sP(n,r,s,i,o):oP(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point:(n,t,e,i)=>sP(n,Th(t,n),e.axis||"xy",i,e.includeInvisible||!1),nearest:(n,t,e,i)=>oP(n,Th(t,n),e.axis||"xy",e.intersect,i,e.includeInvisible||!1),x:(n,t,e,i)=>i9(n,Th(t,n),"x",e.intersect,i),y:(n,t,e,i)=>i9(n,Th(t,n),"y",e.intersect,i)}};const r9=["left","top","right","bottom"];function wy(n,t){return n.filter(e=>e.pos===t)}function s9(n,t){return n.filter(e=>-1===r9.indexOf(e.pos)&&e.box.axis===t)}function Cy(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function o9(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function a9(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Ebe(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!Xt(r)){e.size&&(n[r]-=e.size);const f=i[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?s.height:s.width),e.size=f.size/f.count,n[r]+=e.size}s.getPadding&&a9(o,s.getPadding());const a=Math.max(0,t.outerWidth-o9(o,n,"left","right")),l=Math.max(0,t.outerHeight-o9(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function Tbe(n,t){const e=t.maxPadding;return function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(n?["left","right"]:["top","bottom"])}function xy(n,t,e,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Tbe(a.horizontal,t));const{same:f,other:g}=Ebe(t,e,a,i);c|=f&&r.length,u=u||g,l.fullSize||r.push(a)}return c&&xy(r,t,e,i)||u}function AE(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function l9(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,g=c.size||l.height;dy(c.start)&&(o=c.start),l.fullSize?AE(l,r.left,o,e.outerWidth-r.right-r.left,g):AE(l,t.left+c.placed,o,f,g),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*u,g=c.size||l.width;dy(c.start)&&(s=c.start),l.fullSize?AE(l,s,r.top,g,e.outerHeight-r.bottom-r.top):AE(l,s,t.top+c.placed,g,f),c.start=s,c.placed+=f,s=l.right}}t.x=s,t.y=o}var ps={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;-1!==e&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=fs(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=function xbe(n){const t=function bbe(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(n),e=Cy(t.filter(c=>c.box.fullSize),!0),i=Cy(wy(t,"left"),!0),r=Cy(wy(t,"right")),s=Cy(wy(t,"top"),!0),o=Cy(wy(t,"bottom")),a=s9(t,"x"),l=s9(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:wy(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(n.boxes),l=a.vertical,c=a.horizontal;Dn(n.boxes,x=>{"function"==typeof x.beforeLayout&&x.beforeLayout()});const u=l.reduce((x,E)=>E.box.options&&!1===E.box.options.display?x:x+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),g=Object.assign({},r);a9(g,fs(i));const v=Object.assign({maxPadding:g,w:s,h:o,x:r.left,y:r.top},r),b=function Cbe(n,t){const e=function wbe(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!r9.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}(l.concat(c),f);xy(a.fullSize,v,f,b),xy(l,v,f,b),xy(c,v,f,b)&&xy(l,v,f,b),function Dbe(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}(v),l9(a.leftAndTop,v,f,b),v.x+=v.w,v.y+=v.h,l9(a.rightAndBottom,v,f,b),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Dn(a.chartArea,x=>{const E=x.box;Object.assign(E,n.chartArea),E.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class c9{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class Sbe extends c9{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const kE="$chartjs",Ibe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},u9=n=>null===n||""===n,d9=!!Iye&&{passive:!0};function Mbe(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,d9)}function ME(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Pbe(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ME(a.addedNodes,i),o=o&&!ME(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Obe(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ME(a.removedNodes,i),o=o&&!ME(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ey=new Map;let h9=0;function f9(){const n=window.devicePixelRatio;n!==h9&&(h9=n,Ey.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Lbe(n,t,e){const i=n.canvas,r=i&&JR(i);if(!r)return;const s=p8((a,l)=>{const c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;0===c&&0===u||s(c,u)});return o.observe(r),function Fbe(n,t){Ey.size||window.addEventListener("resize",f9),Ey.set(n,t)}(n,s),o}function aP(n,t,e){e&&e.disconnect(),"resize"===t&&function Nbe(n){Ey.delete(n),Ey.size||window.removeEventListener("resize",f9)}(n)}function Vbe(n,t,e){const i=n.canvas,r=p8(s=>{null!==n.ctx&&e(function Rbe(n,t){const e=Ibe[n.type]||n.type,{x:i,y:r}=Th(n,t);return{type:e,chart:t,native:n,x:void 0!==i?i:null,y:void 0!==r?r:null}}(s,n))},n);return function kbe(n,t,e){n&&n.addEventListener(t,e,d9)}(i,t,r),r}class Bbe extends c9{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function Abe(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[kE]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",u9(r)){const s=O8(n,"width");void 0!==s&&(n.width=s)}if(u9(i))if(""===n.style.height)n.height=n.width/(t||2);else{const s=O8(n,"height");void 0!==s&&(n.height=s)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[kE])return!1;const i=e[kE].initial;["height","width"].forEach(s=>{const o=i[s];cn(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[kE],!0}addEventListener(t,e,i){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:Pbe,detach:Obe,resize:Lbe}[e]||Vbe)(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];r&&(({attach:aP,detach:aP,resize:aP}[e]||Mbe)(t,e,r),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return function Sye(n,t,e,i){const r=SE(n),s=Dh(r,"margin"),o=TE(r.maxWidth,n,"clientWidth")||yE,a=TE(r.maxHeight,n,"clientHeight")||yE,l=function Tye(n,t,e){let i,r;if(void 0===t||void 0===e){const s=n&&JR(n);if(s){const o=s.getBoundingClientRect(),a=SE(s),l=Dh(a,"border","width"),c=Dh(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=TE(a.maxWidth,s,"clientWidth"),r=TE(a.maxHeight,s,"clientHeight")}else t=n.clientWidth,e=n.clientHeight}return{width:t,height:e,maxWidth:i||yE,maxHeight:r||yE}}(n,t,e);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const g=Dh(r,"border","width"),v=Dh(r,"padding");c-=v.width+g.width,u-=v.height+g.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=IE(Math.min(c,o,l.maxWidth)),u=IE(Math.min(u,a,l.maxHeight)),c&&!u&&(u=IE(c/2)),(void 0!==t||void 0!==e)&&i&&l.height&&u>l.height&&(u=l.height,c=IE(Math.floor(u*i))),{width:c,height:u}}(t,e,i,r)}isAttached(t){const e=t&&JR(t);return!(!e||!e.isConnected)}}class sc{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Tm(this.x)&&Tm(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}function RE(n,t,e,i,r){const s=Rt(i,0),o=Math.min(Rt(r,n.length),n.length);let l,c,u,a=0;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}const p9=(n,t,e)=>"top"===t||"left"===t?n[t]+e:n[t]-e,m9=(n,t)=>Math.min(t||n,n);function g9(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function Ybe(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let c,l=n.getPixelForTick(r);if(!(e&&(c=1===i?Math.max(l-s,o-l):0===t?(n.getPixelForTick(1)-l)/2:(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function Dy(n){return n.drawTicks?n.tickLength:0}function _9(n,t){if(!n.display)return 0;const e=Cr(n.font,t),i=fs(n.padding);return(ri(n.text)?n.text.length:1)*e.lineHeight+i.height}function Xbe(n,t,e){let i=zR(n);return(e&&"right"!==t||!e&&"right"===t)&&(i=(n=>"left"===n?"right":"right"===n?"left":n)(i)),i}class Ah extends sc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=vo(t,Number.POSITIVE_INFINITY),e=vo(e,Number.NEGATIVE_INFINITY),i=vo(i,Number.POSITIVE_INFINITY),r=vo(r,Number.NEGATIVE_INFINITY),{min:vo(t,i),max:vo(e,r),minDefined:Ti(t),maxDefined:Ti(e)}}getMinMax(t){let o,{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:vo(e,vo(i,e)),max:vo(i,vo(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Gn(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function sye(n,t,e){const{min:i,max:r}=n,s=e8(t,(r-i)/2),o=(a,l)=>e&&0===a?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?g9(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Ube(n,t){const e=n.options.ticks,i=function zbe(n){const t=n.options.offset,e=n._tickSize();return Math.floor(Math.min(n._length/e+(t?0:1),n._maxLength/e))}(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?function $be(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function Wbe(n,t,e,i){let o,r=0,s=e[0];for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}(t,c,s,o/r),c;const u=function Hbe(n,t,e){const i=function qbe(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}(n),r=t.length/e;if(!i)return Math.max(r,1);const s=function Mve(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i==0&&(t.push(i),t.push(n/i));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}(s,t,r);if(o>0){let f,g;const v=o>1?Math.round((l-a)/(o-1)):null;for(RE(t,c,u,cn(v)?0:a-v,a),f=0,g=o-1;f<g;f++)RE(t,c,u,s[f],s[f+1]);return RE(t,c,u,l,cn(v)?t.length:l+v),c}return RE(t,c,u),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,i,t=this.options.reverse;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Gn(this.options.afterUpdate,[this])}beforeSetDimensions(){Gn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Gn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Gn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Gn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Gn(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Gn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Gn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=m9(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let a,l,c,o=r;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const u=this._getLabelSizes(),f=u.widest.width,g=u.highest.height,v=Pr(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/i:v/(i-1),f+6>a&&(a=v/(i-(t.offset?.5:1)),l=this.maxHeight-Dy(t.grid)-e.padding-_9(t.title,this.chart.options.font),c=Math.sqrt(f*f+g*g),o=BR(Math.min(Math.asin(Pr((u.highest.height+6)/a,-1,1)),Math.asin(Pr(l/c,-1,1))-Math.asin(Pr(g/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Gn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Gn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=_9(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=Dy(s)+l):(t.height=this.maxHeight,t.width=Dy(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:g}=this._getLabelSizes(),v=2*i.padding,b=pa(this.labelRotation),x=Math.cos(b),E=Math.sin(b);a?t.height=Math.min(this.maxHeight,t.height+(i.mirror?0:E*f.width+x*g.height)+v):t.width=Math.min(this.maxWidth,t.width+(i.mirror?0:x*f.width+E*g.height)+v),this._calculatePadding(c,u,E,x)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,v=0;l?c?(g=r*t.width,v=i*e.height):(g=i*t.height,v=r*e.width):"start"===s?v=e.width:"end"===s?g=t.width:"inner"!==s&&(g=t.width/2,v=e.width/2),this.paddingLeft=Math.max((g-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((v-f+o)*this.width/(this.width-f),0)}else{let u=e.height/2,f=t.height/2;"start"===s?(u=0,f=t.height):"end"===s&&(u=e.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Gn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)cn(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=g9(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/m9(e,i));let f,g,v,b,x,E,O,k,F,q,K,c=0,u=0;for(f=0;f<e;f+=l){if(b=t[f].label,x=this._resolveTickFontOptions(f),r.font=E=x.string,O=s[E]=s[E]||{data:{},gc:[]},k=x.lineHeight,F=q=0,cn(b)||ri(b)){if(ri(b))for(g=0,v=b.length;g<v;++g)K=b[g],!cn(K)&&!ri(K)&&(F=CE(r,O.data,O.gc,F,K),q+=k)}else F=CE(r,O.data,O.gc,F,b),q=k;o.push(F),a.push(q),c=Math.max(F,c),u=Math.max(q,u)}!function Zbe(n,t){Dn(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}(s,e);const re=o.indexOf(c),B=a.indexOf(u),P=N=>({width:o[N]||0,height:a[N]||0});return{first:P(0),last:P(e-1),widest:P(re),highest:P(B),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function Ove(n){return Pr(n,-32768,32767)}(this._alignToPixels?Ch(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function Qbe(n,t,e){return ku(n,{tick:e,index:t,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=function Kbe(n,t){return ku(n,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=pa(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),g=Dy(s),v=[],b=a.setContext(this.getContext()),x=b.display?b.width:0,E=x/2,O=function(Ne){return Ch(i,Ne,x)};let k,F,q,K,re,B,P,N,$,U,W,Y;if("top"===o)k=O(this.bottom),B=this.bottom-g,N=k-E,U=O(t.top)+E,Y=t.bottom;else if("bottom"===o)k=O(this.top),U=t.top,Y=O(t.bottom)-E,B=k+E,N=this.top+g;else if("left"===o)k=O(this.right),re=this.right-g,P=k-E,$=O(t.left)+E,W=t.right;else if("right"===o)k=O(this.left),$=t.left,W=O(t.right)-E,re=k+E,P=this.left+g;else if("x"===e){if("center"===o)k=O((t.top+t.bottom)/2+.5);else if(Xt(o)){const Ne=Object.keys(o)[0];k=O(this.chart.scales[Ne].getPixelForValue(o[Ne]))}U=t.top,Y=t.bottom,B=k+E,N=B+g}else if("y"===e){if("center"===o)k=O((t.left+t.right)/2);else if(Xt(o)){const Ne=Object.keys(o)[0];k=O(this.chart.scales[Ne].getPixelForValue(o[Ne]))}re=k-E,P=re-g,$=t.left,W=t.right}const ut=Rt(r.ticks.maxTicksLimit,f),Nt=Math.max(1,Math.ceil(f/ut));for(F=0;F<f;F+=Nt){const Ne=this.getContext(F),Le=s.setContext(Ne),Ge=a.setContext(Ne),Ye=Le.lineWidth,Jt=Le.color,Tn=Ge.dash||[],un=Ge.dashOffset,dn=Le.tickWidth,Gt=Le.tickColor,Wr=Le.tickBorderDash||[],Co=Le.tickBorderDashOffset;q=Ybe(this,F,l),void 0!==q&&(K=Ch(i,q,Ye),c?re=P=$=W=K:B=N=U=Y=K,v.push({tx1:re,ty1:B,tx2:P,ty2:N,x1:$,y1:U,x2:W,y2:Y,width:Ye,color:Jt,borderDash:Tn,borderDashOffset:un,tickWidth:dn,tickColor:Gt,tickBorderDash:Wr,tickBorderDashOffset:Co}))}return this._ticksLength=f,this._borderValue=k,v}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,g=Dy(i.grid),v=g+u,b=f?-u:v,x=-pa(this.labelRotation),E=[];let O,k,F,q,K,re,B,P,N,$,U,W,Y="middle";if("top"===r)re=this.bottom-b,B=this._getXAxisLabelAlignment();else if("bottom"===r)re=this.top+b,B=this._getXAxisLabelAlignment();else if("left"===r){const Nt=this._getYAxisLabelAlignment(g);B=Nt.textAlign,K=Nt.x}else if("right"===r){const Nt=this._getYAxisLabelAlignment(g);B=Nt.textAlign,K=Nt.x}else if("x"===e){if("center"===r)re=(t.top+t.bottom)/2+v;else if(Xt(r)){const Nt=Object.keys(r)[0];re=this.chart.scales[Nt].getPixelForValue(r[Nt])+v}B=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)K=(t.left+t.right)/2-v;else if(Xt(r)){const Nt=Object.keys(r)[0];K=this.chart.scales[Nt].getPixelForValue(r[Nt])}B=this._getYAxisLabelAlignment(g).textAlign}"y"===e&&("start"===l?Y="top":"end"===l&&(Y="bottom"));const ut=this._getLabelSizes();for(O=0,k=a.length;O<k;++O){F=a[O],q=F.label;const Nt=s.setContext(this.getContext(O));P=this.getPixelForTick(O)+s.labelOffset,N=this._resolveTickFontOptions(O),$=N.lineHeight,U=ri(q)?q.length:1;const Ne=U/2,Le=Nt.color,Ge=Nt.textStrokeColor,Ye=Nt.textStrokeWidth;let Tn,Jt=B;if(o?(K=P,"inner"===B&&(Jt=O===k-1?this.options.reverse?"left":"right":0===O?this.options.reverse?"right":"left":"center"),W="top"===r?"near"===c||0!==x?-U*$+$/2:"center"===c?-ut.highest.height/2-Ne*$+$:$/2-ut.highest.height:"near"===c||0!==x?$/2:"center"===c?ut.highest.height/2-Ne*$:ut.highest.height-U*$,f&&(W*=-1),0!==x&&!Nt.showLabelBackdrop&&(K+=$/2*Math.sin(x))):(re=P,W=(1-U)*$/2),Nt.showLabelBackdrop){const un=fs(Nt.backdropPadding),dn=ut.heights[O],Gt=ut.widths[O];let Wr=W-un.top,Co=0-un.left;switch(Y){case"middle":Wr-=dn/2;break;case"bottom":Wr-=dn}switch(B){case"center":Co-=Gt/2;break;case"right":Co-=Gt;break;case"inner":O===k-1?Co-=Gt:O>0&&(Co-=Gt/2)}Tn={left:Co,top:Wr,width:Gt+un.width,height:dn+un.height,color:Nt.backdropColor}}E.push({label:q,font:N,textOffset:W,options:{rotation:x,color:Le,strokeColor:Ge,strokeWidth:Ye,textAlign:Jt,textBaseline:Y,translation:[K,re],backdrop:Tn}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-pa(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=t+s,l=this._getLabelSizes().widest.width;let c,u;return"left"===e?r?(u=this.right+s,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u=this.left)):"right"===e?r?(u=this.left+s,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,g;this.isHorizontal()?(c=Ch(t,this.left,o)-o/2,u=Ch(t,this.right,a)+a/2,f=g=l):(f=Ch(t,this.top,o)-o/2,g=Ch(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,f),e.lineTo(u,g),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&xE(i,r);const s=this.getLabelItems(t);for(const o of s)xh(i,o.label,0,o.textOffset,o.font,o.options);r&&EE(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=Cr(i.font),o=fs(i.padding),a=i.align;let l=s.lineHeight/2;"bottom"===e||"center"===e||Xt(e)?(l+=o.bottom,ri(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:g}=function Jbe(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let g,v,b,f=0;const x=o-r,E=a-s;if(n.isHorizontal()){if(v=hs(i,s,a),Xt(e)){const O=Object.keys(e)[0];b=u[O].getPixelForValue(e[O])+x-t}else b="center"===e?(c.bottom+c.top)/2+x-t:p9(n,e,t);g=a-s}else{if(Xt(e)){const O=Object.keys(e)[0];v=u[O].getPixelForValue(e[O])-E+t}else v="center"===e?(c.left+c.right)/2-E+t:p9(n,e,t);b=hs(i,o,r),f="left"===e?-Ki:Ki}return{titleX:v,titleY:b,maxWidth:g,rotation:f}}(this,l,e,a);xh(t,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:g,textAlign:Xbe(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Rt(t.grid&&t.grid.z,-1),r=Rt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Ah.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]:[{z:e,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){return Cr(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class PE{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function n0e(n){return"id"in n&&"defaults"in n})(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function e0e(n,t,e){const i=cy(Object.create(null),[e?Si.get(e):{},Si.get(t),n.defaults]);Si.set(t,i),n.defaultRoutes&&function t0e(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");Si.route(s,r,l,a)})}(t,n.defaultRoutes),n.descriptors&&Si.describe(t,n.descriptors)}(t,o,i),this.override&&Si.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in Si[r]&&(delete Si[r][i],this.override&&delete wh[i])}}class i0e{constructor(){this.controllers=new PE(Mu,"datasets",!0),this.elements=new PE(sc,"elements"),this.plugins=new PE(Object,"plugins"),this.scales=new PE(Ah,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Dn(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=VR(t);Gn(i["before"+r],[],i),e[t](i),Gn(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var nl=new i0e;class r0e{constructor(){this._init=[]}notify(t,e,i,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===Gn(o[i],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){cn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Rt(i.options&&i.options.plugins,{}),s=function s0e(n){const t={},e=[],i=Object.keys(nl.plugins.items);for(let s=0;s<i.length;s++)e.push(nl.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(i);return!1!==r||e?function a0e(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const l=a.id,c=o0e(i[l],r);null!==c&&s.push({plugin:a,options:l0e(n.config,{plugin:a,local:e[l]},c,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function o0e(n,t){return t||!1!==n?!0===n?{}:n:null}function l0e(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function lP(n,t){return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||(Si.datasets[n]||{}).indexAxis||"x"}function v9(n){if("x"===n||"y"===n||"r"===n)return n}function d0e(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function cP(n,...t){if(v9(n))return n;for(const e of t){const i=e.axis||d0e(e.position)||n.length>1&&v9(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function y9(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function b9(n){const t=n.options||(n.options={});t.plugins=Rt(t.plugins,{}),t.scales=function f0e(n,t){const e=wh[n.type]||{scales:{}},i=t.scales||{},r=lP(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Xt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=cP(o,a,function h0e(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return y9(n,"x",e[0])||y9(n,"y",e[0])}return{}}(o,n),Si.scales[a.type]),c=function u0e(n,t){return n===t?"_index_":"_value_"}(l,r),u=e.scales||{};s[o]=uy(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||lP(a,t),u=(wh[a]||{}).scales||{};Object.keys(u).forEach(f=>{const g=function c0e(n,t){let e=n;return"_index_"===n?e=t:"_value_"===n&&(e="x"===t?"y":"x"),e}(f,l),v=o[g+"AxisID"]||g;s[v]=s[v]||Object.create(null),uy(s[v],[{axis:g},i[v],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];uy(a,[Si.scales[a.type],Si.scale])}),s}(n,t)}function w9(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const C9=new Map,x9=new Set;function OE(n,t){let e=C9.get(n);return e||(e=t(),C9.set(n,e),x9.add(e)),e}const Ty=(n,t,e)=>{const i=Su(t,e);void 0!==i&&n.add(i)};class m0e{constructor(t){this._config=function p0e(n){return(n=n||{}).data=w9(n.data),b9(n),n}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=w9(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),b9(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return OE(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return OE(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return OE(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return OE(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(f=>Ty(l,t,f))),u.forEach(f=>Ty(l,r,f)),u.forEach(f=>Ty(l,wh[s]||{},f)),u.forEach(f=>Ty(l,Si,f)),u.forEach(f=>Ty(l,WR,f))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),x9.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,wh[e]||{},Si.datasets[e]||{},{type:e},Si,WR]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=E9(this._resolverCache,t,r);let l=o;(function _0e(n,t){const{isScriptable:e,isIndexable:i}=D8(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(Iu(a)||g0e(a))||o&&ri(a))return!0}return!1})(o,e)&&(s.$shared=!1,l=Sm(o,i=Iu(i)?i():i,this.createResolver(t,i,a)));for(const c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){const{resolver:s}=E9(this._resolverCache,t,i);return Xt(e)?Sm(s,e,void 0,r):s}}function E9(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:ZR(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const g0e=n=>Xt(n)&&Object.getOwnPropertyNames(n).some(t=>Iu(n[t])),y0e=["top","bottom","left","right","chartArea"];function D9(n,t){return"top"===n||"bottom"===n||-1===y0e.indexOf(n)&&"x"===t}function T9(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function S9(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Gn(e&&e.onComplete,[n],t)}function b0e(n){const t=n.chart,e=t.options.animation;Gn(e&&e.onProgress,[n],t)}function I9(n){return XR()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const FE={},A9=n=>{const t=I9(n);return Object.values(FE).filter(e=>e.canvas===t).pop()};function w0e(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function NE(n,t,e){return n.options.clip?n[e]:t[e]}let uP=(()=>class n{static defaults=Si;static instances=FE;static overrides=wh;static registry=nl;static version="4.4.3";static getChart=A9;static register(...e){nl.add(...e),k9()}static unregister(...e){nl.remove(...e),k9()}constructor(e,i){const r=this.config=new m0e(i),s=I9(e),o=A9(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function jbe(n){return!XR()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Sbe:Bbe}(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,f=c&&c.width;this.id=Cve(),this.ctx=l,this.canvas=c,this.width=f,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new r0e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Vve(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],FE[this.id]=this,l&&c?(rc.listen(this,"complete",S9),rc.listen(this,"progress",b0e),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return cn(e)?i&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return nl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():P8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return C8(this.canvas,this.ctx),this}stop(){return rc.stop(this),this}resize(e,i){rc.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const r=this.options,a=this.platform.getMaximumSize(this.canvas,e,i,r.maintainAspectRatio&&this.aspectRatio),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,P8(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Gn(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){Dn(this.options.scales||{},(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{});let o=[];i&&(o=o.concat(Object.keys(i).map(a=>{const l=i[a],c=cP(a,l),u="r"===c,f="x"===c;return{options:l,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),Dn(o,a=>{const l=a.options,c=l.id,u=cP(c,l),f=Rt(l.type,a.dtype);(void 0===l.position||D9(l.position,u)!==D9(a.dposition))&&(l.position=a.dposition),s[c]=!0;let g=null;c in r&&r[c].type===f?g=r[c]:(g=new(nl.getScale(f))({id:c,type:f,ctx:this.ctx,chart:this}),r[g.id]=g),g.init(l,e)}),Dn(s,(a,l)=>{a||delete r[l]}),Dn(r,a=>{ps.configure(this,a,a.options),ps.addBox(this,a)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(T9("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{0===i.filter(o=>o===r._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){const o=i[r];let a=this.getDatasetMeta(r);const l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||lP(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=nl.getController(l),{datasetElementType:u,dataElementType:f}=Si.datasets[l];Object.assign(c,{dataElementType:nl.getElement(f),datasetElementType:u&&nl.getElement(u)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Dn(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,f=this.data.datasets.length;u<f;u++){const{controller:g}=this.getDatasetMeta(u),v=!s&&-1===o.indexOf(g);g.buildOrUpdateElements(v),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Dn(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(T9("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Dn(this.scales,e=>{ps.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!r8(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:o}of i)w0e(e,s,"_removeElements"===r?-o:o)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,r=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!r8(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ps.update(this,this.width,this.height,e);const i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Dn(this.boxes,s=>{r&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Iu(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(rc.has(this)?this.attached&&!rc.running(this)&&rc.start(this):(this.draw(),S9({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,r=[];let s,o;for(s=0,o=i.length;s<o;++s){const a=i[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,r=e._clip,s=!r.disabled,o=function x0e(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:NE(e,t,"left"),right:NE(e,t,"right"),top:NE(i,t,"top"),bottom:NE(i,t,"bottom")}:t}(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(s&&xE(i,{left:!1===r.left?0:o.left-r.left,right:!1===r.right?this.width:o.right+r.right,top:!1===r.top?0:o.top-r.top,bottom:!1===r.bottom?this.height:o.bottom+r.bottom}),e.controller.draw(),s&&EE(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return ic(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){const o=ybe.modes[i];return"function"==typeof o?o(this,e,r,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],r=this._metasets;let s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=ku(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!i.hidden}setDatasetVisibility(e,i){this.getDatasetMeta(e).hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){const s=r?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);dy(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),rc.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),C8(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete FE[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};Dn(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(i.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){Dn(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},Dn(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){const s=r?"set":"remove";let o,a,l,c;for("dataset"===i&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],r=e.map(({datasetIndex:o,index:a})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!_E(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(i=>i.plugin.id===e).length}_updateHoverStyles(e,i,r){const s=this.options.hover,o=(c,u)=>c.filter(f=>!u.some(g=>f.datasetIndex===g.datasetIndex&&f.index===g.index)),a=o(i,e),l=r?e:o(e,i);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,i){const r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,s))return;const o=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,i,r){const{_active:s=[],options:o}=this,l=this._getActiveElements(e,s,r,i),c=function Ive(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),u=function C0e(n,t,e,i){return e&&"mouseout"!==n.type?i?t:n:null}(e,this._lastEvent,r,c);r&&(this._lastEvent=null,Gn(o.onHover,[e,l,this],this),c&&Gn(o.onClick,[e,l,this],this));const f=!_E(l,s);return(f||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=u,f}_getActiveElements(e,i,r,s){if("mouseout"===e.type)return[];if(!r)return i;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}})();function k9(){return Dn(uP.instances,n=>n._plugins.invalidate())}function km(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function LE(n,t,e,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+i+e-c,0),g=u>0?u+i+e+c:0;let v=0;const b=r-l;if(i){const Le=((u>0?u-i:0)+(f>0?f-i:0))/2;v=(b-(0!==Le?b*Le/(Le+i):b))/2}const E=(b-Math.max(.001,b*f-e/si)/f)/2,O=l+E+v,k=r-E-v,{outerStart:F,outerEnd:q,innerStart:K,innerEnd:re}=function T0e(n,t,e,i){const r=function D0e(n){return YR(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{const c=(e-Math.min(s,l))*i/2;return Pr(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Pr(r.innerStart,0,o),innerEnd:Pr(r.innerEnd,0,o)}}(t,g,f,k-O),B=f-F,P=f-q,N=O+F/B,$=k-q/P,U=g+K,W=g+re,Y=O+K/U,ut=k-re/W;if(n.beginPath(),s){const Nt=(N+$)/2;if(n.arc(o,a,f,N,Nt),n.arc(o,a,f,Nt,$),q>0){const Ye=km(P,$,o,a);n.arc(Ye.x,Ye.y,q,$,k+Ki)}const Ne=km(W,k,o,a);if(n.lineTo(Ne.x,Ne.y),re>0){const Ye=km(W,ut,o,a);n.arc(Ye.x,Ye.y,re,k+Ki,ut+Math.PI)}const Le=(k-re/g+(O+K/g))/2;if(n.arc(o,a,g,k-re/g,Le,!0),n.arc(o,a,g,Le,O+K/g,!0),K>0){const Ye=km(U,Y,o,a);n.arc(Ye.x,Ye.y,K,Y+Math.PI,O-Ki)}const Ge=km(B,O,o,a);if(n.lineTo(Ge.x,Ge.y),F>0){const Ye=km(B,N,o,a);n.arc(Ye.x,Ye.y,F,O-Ki,N)}}else{n.moveTo(o,a);const Nt=Math.cos(N)*f+o,Ne=Math.sin(N)*f+a;n.lineTo(Nt,Ne);const Le=Math.cos($)*f+o,Ge=Math.sin($)*f+a;n.lineTo(Le,Ge)}n.closePath()}function M9(n,t,e=t){n.lineCap=Rt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Rt(e.borderDash,t.borderDash)),n.lineDashOffset=Rt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Rt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Rt(e.borderWidth,t.borderWidth),n.strokeStyle=Rt(e.borderColor,t.borderColor)}function k0e(n,t,e){n.lineTo(e.x,e.y)}function R9(n,t,e={}){const i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a);return{count:i,start:l,loop:t.loop,ilen:c<l&&!(r<o&&s<o||r>a&&s>a)?i+c-l:c-l}}function R0e(n,t,e,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=R9(r,e,i),u=function M0e(n){return n.stepped?Kve:n.tension||"monotone"===n.cubicInterpolationMode?Qve:k0e}(s);let v,b,x,{move:f=!0,reverse:g}=i||{};for(v=0;v<=c;++v)b=r[(a+(g?c-v:v))%o],!b.skip&&(f?(n.moveTo(b.x,b.y),f=!1):u(n,x,b,g,s.stepped),x=b);return l&&(b=r[(a+(g?c:0))%o],u(n,x,b,g,s.stepped)),!!l}function P0e(n,t,e,i){const r=t.points,{count:s,start:o,ilen:a}=R9(r,e,i),{move:l=!0,reverse:c}=i||{};let g,v,b,x,E,O,u=0,f=0;const k=q=>(o+(c?a-q:q))%s,F=()=>{x!==E&&(n.lineTo(u,E),n.lineTo(u,x),n.lineTo(u,O))};for(l&&(v=r[k(0)],n.moveTo(v.x,v.y)),g=0;g<=a;++g){if(v=r[k(g)],v.skip)continue;const q=v.x,K=v.y,re=0|q;re===b?(K<x?x=K:K>E&&(E=K),u=(f*u+q)/++f):(F(),n.lineTo(q,K),b=re,f=0,x=E=K),O=K}F()}function dP(n){const t=n.options;return n._decimated||n._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?R0e:P0e}const L0e="function"==typeof Path2D;let VE=(()=>class n extends sc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(wye(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function Nye(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=function Oye(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,i);return function U8(n,t,e,i){return i&&i.setContext&&e?function Lye(n,t,e,i){const r=n._chart.getContext(),s=z8(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[];let u=s,f=t[0].start,g=f;function v(b,x,E,O){const k=a?-1:1;if(b!==x){for(b+=l;e[b%l].skip;)b-=k;for(;e[x%l].skip;)x+=k;b%l!=x%l&&(c.push({start:b%l,end:x%l,loop:E,style:O}),u=O,f=x%l)}}for(const b of t){f=a?f:b.start;let E,x=e[f%l];for(g=f+1;g<=b.end;g++){const O=e[g%l];E=z8(i.setContext(ku(r,{type:"segment",p0:x,p1:O,p0DataIndex:(g-1)%l,p1DataIndex:g%l,datasetIndex:o}))),Vye(E,u)&&v(f,g-1,b.loop,u),x=O,u=E}f<g-1&&v(f,g-1,b.loop,u)}return c}(n,t,e,i):t}(n,!0===i?[{start:o,end:a,loop:s}]:function Fye(n,t,e,i){const r=n.length,s=[];let l,o=t,a=n[t];for(l=t+1;l<=e;++l){const c=n[l%r];c.skip||c.stop?a.skip||(s.push({start:t%r,end:(l-1)%r,loop:i=!1}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(e,o,a<o?a+r:a,!!n._fullLoop&&0===o&&a===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,i){const r=this.options,s=e[i],o=this.points,a=j8(this,{property:i,start:s,end:s});if(!a.length)return;const l=[],c=function O0e(n){return n.stepped?Aye:n.tension||"monotone"===n.cubicInterpolationMode?kye:Sh}(r);let u,f;for(u=0,f=a.length;u<f;++u){const{start:g,end:v}=a[u],b=o[g],x=o[v];if(b===x){l.push(b);continue}const O=c(b,x,Math.abs((s-b[i])/(x[i]-b[i])),r.stepped);O[i]=e[i],l.push(O)}return 1===l.length?l[0]:l}pathSegment(e,i,r){return dP(this)(e,this,i,r)}path(e,i,r){const s=this.segments,o=dP(this);let a=this._loop;i=i||0,r=r||this.points.length-i;for(const l of s)a&=o(e,this,l,{start:i,end:i+r-1});return!!a}draw(e,i,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function V0e(n,t,e,i){L0e&&!t.options.segment?function F0e(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),M9(n,t.options),n.stroke(r)}(n,t,e,i):function N0e(n,t,e,i){const{segments:r,options:s}=t,o=dP(t);for(const a of r)M9(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}(n,t,e,i)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}})();function P9(n,t,e,i){const r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}let B0e=(()=>class n extends sc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return P9(this,e,"x",i)}inYRange(e,i){return P9(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){let i=(e=e||this.options||{}).radius||0;return i=Math.max(i,i&&e.hoverRadius||0),2*(i+(i&&e.borderWidth||0))}draw(e,i){const r=this.options;this.skip||r.radius<.1||!ic(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,GR(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}})();function O9(n,t){const{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,u,f;return n.horizontal?(f=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-f,u=i+f):(f=s/2,a=e-f,l=e+f,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Ru(n,t,e,i){return n?0:Pr(t,e,i)}function hP(n,t,e,i){const r=null===t,s=null===e,a=n&&!(r&&s)&&O9(n,i);return a&&(r||tc(t,a.left,a.right))&&(s||tc(e,a.top,a.bottom))}function $0e(n,t){n.rect(t.x,t.y,t.w,t.h)}function fP(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0;return{x:n.x+i,y:n.y+r,w:n.w+((n.x+n.w!==e.x+e.w?t:0)-i),h:n.h+((n.y+n.h!==e.y+e.h?t:0)-r),radius:n.radius}}var q0e=Object.freeze({__proto__:null,ArcElement:class A0e extends sc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=c8(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,b=Rt(f,l-a)>=oi||fy(s,a,l),x=tc(o,c+g,u+g);return b&&x}getCenterPoint(t){const{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(r+s)/2,f=(o+a+c+l)/2;return{x:e+Math.cos(u)*f,y:i+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>oi?Math.floor(i/oi):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);const c=r*(1-Math.sin(Math.min(si,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function S0e(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){LE(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%oi||oi))}LE(n,t,e,i,l,r),n.fill()}(t,this,c,s,o),function I0e(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:g}=l,v="inner"===l.borderAlign;if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=g,v?(n.lineWidth=2*c,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let b=t.endAngle;if(s){LE(n,t,e,i,b,r);for(let x=0;x<s;++x)n.stroke();isNaN(a)||(b=o+(a%oi||oi))}v&&function E0e(n,t,e){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;n.beginPath(),n.arc(s,o,a,i-c,e+c),l>r?(c=r/l,n.arc(s,o,l,e+c,i-c,!0)):n.arc(s,o,r,e+Ki,i-Ki),n.closePath(),n.clip()}(n,t,b),s||(LE(n,t,e,i,b,r),n.stroke())}(t,this,c,s,o),t.restore()}},BarElement:class W0e extends sc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=function z0e(n){const t=O9(n),e=t.right-t.left,i=t.bottom-t.top,r=function j0e(n,t,e){const r=n.borderSkipped,s=E8(n.options.borderWidth);return{t:Ru(r.top,s.top,0,e),r:Ru(r.right,s.right,0,t),b:Ru(r.bottom,s.bottom,0,e),l:Ru(r.left,s.left,0,t)}}(n,e/2,i/2),s=function U0e(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Eh(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Xt(r);return{topLeft:Ru(!l||a.top||a.left,s.topLeft,0,o),topRight:Ru(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ru(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ru(!l||a.bottom||a.right,s.bottomRight,0,o)}}(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),a=function H0e(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?_y:$0e;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,fP(o,e,s)),t.clip(),a(t,fP(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,fP(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return hP(this,t,e,i)}inXRange(t,e){return hP(this,t,null,e)}inYRange(t,e){return hP(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:VE,PointElement:B0e});const pP=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],F9=pP.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function N9(n){return pP[n%pP.length]}function L9(n){return F9[n%F9.length]}function V9(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}var X0e={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!e.forceOverride&&(V9(i)||function Q0e(n){return n&&(n.borderColor||n.backgroundColor)}(r)||s&&V9(s)))return;const o=function K0e(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof iP?t=function Y0e(n,t){return n.backgroundColor=n.data.map(()=>N9(t++)),t}(e,t):r instanceof n9?t=function Z0e(n,t){return n.backgroundColor=n.data.map(()=>L9(t++)),t}(e,t):r&&(t=function G0e(n,t){return n.borderColor=N9(t),n.backgroundColor=L9(t),++t}(e,t))}}(n);i.forEach(o)}};function B9(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function j9(n){n.data.datasets.forEach(t=>{B9(t)})}var nwe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled)return void j9(n);const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if("y"===vy([a,n.options.indexAxis])||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if("linear"!==u.type&&"time"!==u.type||n.options.parsing)return;let b,{start:f,count:g}=function twe(n,t){const e=t.length;let r,i=0;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Pr(nc(t,s.axis,o).lo,0,e-1)),r=c?Pr(nc(t,s.axis,a).hi+1,i,e)-i:e-i,{start:i,count:r}}(l,c);if(g<=(e.threshold||4*i))B9(r);else{switch(cn(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}})),e.algorithm){case"lttb":b=function J0e(n,t,e,i,r){const s=r.samples||i;if(s>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(s-2);let l=0;const c=t+e-1;let f,g,v,b,x,u=t;for(o[l++]=n[u],f=0;f<s-2;f++){let k,E=0,O=0;const F=Math.floor((f+1)*a)+1+t,q=Math.min(Math.floor((f+2)*a)+1,e)+t,K=q-F;for(k=F;k<q;k++)E+=n[k].x,O+=n[k].y;E/=K,O/=K;const re=Math.floor(f*a)+1+t,B=Math.min(Math.floor((f+1)*a)+1,e)+t,{x:P,y:N}=n[u];for(v=b=-1,k=re;k<B;k++)b=.5*Math.abs((P-E)*(n[k].y-N)-(P-n[k].x)*(O-N)),b>v&&(v=b,g=n[k],x=k);o[l++]=g,u=x}return o[l++]=n[c],o}(c,f,g,i,e);break;case"min-max":b=function ewe(n,t,e,i){let o,a,l,c,u,f,g,v,b,x,r=0,s=0;const E=[],k=n[t].x,q=n[t+e-1].x-k;for(o=t;o<t+e;++o){a=n[o],l=(a.x-k)/q*i,c=a.y;const K=0|l;if(K===u)c<b?(b=c,f=o):c>x&&(x=c,g=o),r=(s*r+a.x)/++s;else{const re=o-1;if(!cn(f)&&!cn(g)){const B=Math.min(f,g),P=Math.max(f,g);B!==v&&B!==re&&E.push({...n[B],x:r}),P!==v&&P!==re&&E.push({...n[P],x:r})}o>0&&re!==v&&E.push(n[re]),E.push(a),u=K,s=0,b=x=c,f=g=v=o}}return E}(c,f,g,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=b}})},destroy(n){j9(n)}};function mP(n,t,e,i){if(i)return;let r=t[n],s=e[n];return"angle"===n&&(r=yo(r),s=yo(s)),{property:n,start:r,end:s}}function gP(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function U9(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function z9(n,t){let e=[],i=!1;return ri(n)?(i=!0,e=n):e=function rwe(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=gP(o,a,r);const l=r[o],c=r[a];null!==i?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):null!==e&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}(n,t),e.length?new VE({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function H9(n){return n&&!1!==n.fill}function swe(n,t,e){let r=n[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!Ti(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function owe(n,t,e){const i=function uwe(n){const t=n.options,e=t.fill;let i=Rt(e&&e.target,e);return void 0===i&&(i=!!t.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(Xt(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Ti(r)&&Math.floor(r)===r?function awe(n,t,e,i){return("-"===n||"+"===n)&&(e=t+e),!(e===t||e<0||e>=i)&&e}(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function fwe(n,t,e){const i=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:a,point:l}=pwe(s,t,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(n.push(l),!a)break}n.push(...i)}function pwe(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],s=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],f=o[u.start][e],g=o[u.end][e];if(tc(r,f,g)){a=r===f,l=r===g;break}}return{first:a,last:l,point:i}}class $9{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:oi}).end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function _P(n,t,e){const i=function mwe(n){const{chart:t,fill:e,line:i}=n;if(Ti(e))return function gwe(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function dwe(n){const{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=function hwe(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);a.push(z9({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)fwe(r,o[u],a)}return new VE({points:r,options:{}})}(n);if("shape"===e)return!0;const r=function _we(n){return(n.scale||{}).getPointPositionForValue?function ywe(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=function cwe(n,t,e){let i;return i="start"===n?e:"end"===n?t.options.reverse?t.min:t.max:Xt(n)?n.value:t.getBaseValue(),i}(e,t,s),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,s);return new $9({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}(n):function vwe(n){const{scale:t={},fill:e}=n,i=function lwe(n,t){let e=null;return"start"===n?e=t.bottom:"end"===n?e=t.top:Xt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(Ti(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}(n)}(n);return r instanceof $9?r:z9(r,i)}(t),{line:r,scale:s,axis:o}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:f=c}=l||{};i&&r.points.length&&(xE(n,e),function bwe(n,t){const{line:e,target:i,above:r,below:s,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),"x"===l&&s!==r&&(W9(n,i,o.top),q9(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),W9(n,i,o.bottom)),q9(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore()}(n,{line:r,target:i,above:u,below:f,area:e,scale:s,axis:o}),EE(n))}function W9(n,t,e){const{segments:i,points:r}=t;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],f=r[gP(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(f.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function q9(n,t){const{line:e,target:i,property:r,color:s,scale:o}=t,a=function iwe(n,t,e){const i=n.segments,r=n.points,s=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=gP(l,c,r);const u=mP(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const f=j8(t,u);for(const g of f){const v=mP(e,s[g.start],s[g.end],g.loop),b=B8(a,r,v);for(const x of b)o.push({source:x,target:g,start:{[e]:U9(u,v,"start",Math.max)},end:{[e]:U9(u,v,"end",Math.min)}})}}return o}(e,i,r);for(const{source:l,target:c,start:u,end:f}of a){const{style:{backgroundColor:g=s}={}}=l,v=!0!==i;n.save(),n.fillStyle=g,wwe(n,o,v&&mP(r,u,f)),n.beginPath();const b=!!e.pathSegment(n,l);let x;if(v){b?n.closePath():G9(n,i,f,r);const E=!!i.pathSegment(n,c,{move:b,reverse:!0});x=b&&E,x||G9(n,i,u,r)}n.closePath(),n.fill(x?"evenodd":"nonzero"),n.restore()}}function wwe(n,t,e){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=e||{};"x"===s&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function G9(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var Cwe={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof VE&&(l={visible:n.isDatasetVisible(o),index:o,fill:owe(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=swe(r,o,e.propagate))},beforeDraw(n,t,e){const i="beforeDraw"===e.drawTime,r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&_P(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;H9(s)&&_P(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!H9(i)||"beforeDatasetDraw"!==e.drawTime||_P(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Y9=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}};class Z9 extends sc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Gn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,r=Cr(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Y9(i,s);let c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let f=t;s.textAlign="left",s.textBaseline="middle";let g=-1,v=-u;return this.legendItems.forEach((b,x)=>{const E=i+e/2+s.measureText(b.text).width;(0===x||c[c.length-1]+E+2*a>o)&&(f+=u,c[c.length-(x>0?0:1)]=0,v+=u,g++),l[x]={left:0,top:v,row:g,width:E,height:r},c[c.length-1]+=E+a}),f}_fitCols(t,e,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let f=a,g=0,v=0,b=0,x=0;return this.legendItems.forEach((E,O)=>{const{itemWidth:k,itemHeight:F}=function Ewe(n,t,e,i,r){const s=function Dwe(n,t,e,i){let r=n.text;return r&&"string"!=typeof r&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}(i,n,t,e),o=function Twe(n,t,e){let i=n;return"string"!=typeof t.text&&(i=K9(t,e)),i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(i,e,s,E,r);O>0&&v+F+2*a>u&&(f+=g+a,c.push({width:g,height:v}),b+=g+a,x++,g=v=0),l[O]={left:b,top:v,col:x,width:k,height:F},g=Math.max(g,k),v+=F+a}),f+=g,c.push({width:g,height:v}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Am(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=hs(i,this.left+r,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=hs(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=hs(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=hs(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;xE(t,this),this._draw(),EE(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=Si.color,l=Am(t.rtl,this.left,this.width),c=Cr(o.font),{padding:u}=o,f=c.size,g=f/2;let v;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:b,boxHeight:x,itemHeight:E}=Y9(o,f),F=this.isHorizontal(),q=this._computeTitleHeight();v=F?{x:hs(s,this.left+u,this.right-i[0]),y:this.top+u+q,line:0}:{x:this.left+u,y:hs(s,this.top+q+u,this.bottom-e[0].height),line:0},F8(this.ctx,t.textDirection);const K=E+u;this.legendItems.forEach((re,B)=>{r.strokeStyle=re.fontColor,r.fillStyle=re.fontColor;const P=r.measureText(re.text).width,N=l.textAlign(re.textAlign||(re.textAlign=o.textAlign)),$=b+g+P;let U=v.x,W=v.y;l.setWidth(this.width),F?B>0&&U+$+u>this.right&&(W=v.y+=K,v.line++,U=v.x=hs(s,this.left+u,this.right-i[v.line])):B>0&&W+K>this.bottom&&(U=v.x=U+e[v.line].width+u,v.line++,W=v.y=hs(s,this.top+q+u,this.bottom-e[v.line].height)),function(re,B,P){if(isNaN(b)||b<=0||isNaN(x)||x<0)return;r.save();const N=Rt(P.lineWidth,1);if(r.fillStyle=Rt(P.fillStyle,a),r.lineCap=Rt(P.lineCap,"butt"),r.lineDashOffset=Rt(P.lineDashOffset,0),r.lineJoin=Rt(P.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=Rt(P.strokeStyle,a),r.setLineDash(Rt(P.lineDash,[])),o.usePointStyle){const $={radius:x*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:N},U=l.xPlus(re,b/2);x8(r,$,U,B+g,o.pointStyleWidth&&b)}else{const $=B+Math.max((f-x)/2,0),U=l.leftForLtr(re,b),W=Eh(P.borderRadius);r.beginPath(),Object.values(W).some(Y=>0!==Y)?_y(r,{x:U,y:$,w:b,h:x,radius:W}):r.rect(U,$,b,x),r.fill(),0!==N&&r.stroke()}r.restore()}(l.x(U),W,re),U=((n,t,e,i)=>n===(i?"left":"right")?e:"center"===n?(t+e)/2:t)(N,U+b+g,F?U+$:this.right,t.rtl),function(re,B,P){xh(r,P.text,re,B+E/2,c,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})}(l.x(U),W,re),F?v.x+=$+u:v.y+="string"!=typeof re.text?K9(re,c.lineHeight)+u:K}),N8(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Cr(e.font),r=fs(e.padding);if(!e.display)return;const s=Am(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=r.top+i.size/2;let u,f=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),u=this.top+c,f=hs(t.align,f,this.right-g);else{const b=this.columnSizes.reduce((x,E)=>Math.max(x,E.height),0);u=c+hs(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const v=hs(a,f,f+g);o.textAlign=s.textAlign(zR(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,xh(o,e.text,v,u,i)}_computeTitleHeight(){const t=this.options.title,e=Cr(t.font),i=fs(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(tc(t,this.left,this.right)&&tc(e,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],tc(t,r.left,r.left+r.width)&&tc(e,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function Swe(n,t){return!(("mousemove"!==n&&"mouseout"!==n||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==n&&"mouseup"!==n))}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((n,t)=>null!==n&&null!==t&&n.datasetIndex===t.datasetIndex&&n.index===t.index)(r,i);r&&!s&&Gn(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Gn(e.onHover,[t,i,this],this)}else i&&Gn(e.onClick,[t,i,this],this)}}function K9(n,t){return t*(n.text?n.text.length:0)}var Iwe={id:"legend",_element:Z9,start(n,t,e){const i=n.legend=new Z9({ctx:n.ctx,options:e,chart:n});ps.configure(n,i,e),ps.addBox(n,i)},stop(n){ps.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;ps.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),u=fs(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class vP extends sc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=ri(i.text)?i.text.length:1;this._padding=fs(i.padding);const s=r*Cr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align;let c,u,f,l=0;return this.isHorizontal()?(u=hs(a,i,s),f=e+t,c=s-i):("left"===o.position?(u=i+t,f=hs(a,r,e),l=-.5*si):(u=s-t,f=hs(a,e,r),l=.5*si),c=r-e),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Cr(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);xh(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:zR(e.align),textBaseline:"middle",translation:[o,a]})}}var kwe={id:"title",_element:vP,start(n,t,e){!function Awe(n,t){const e=new vP({ctx:n.ctx,options:t,chart:n});ps.configure(n,e,t),ps.addBox(n,e),n.titleBlock=e}(n,e)},stop(n){ps.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;ps.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const BE=new WeakMap;var Mwe={id:"subtitle",start(n,t,e){const i=new vP({ctx:n.ctx,options:e,chart:n});ps.configure(n,i,e),ps.addBox(n,i),BE.set(n,i)},stop(n){ps.removeBox(n,BE.get(n)),BE.delete(n)},beforeUpdate(n,t,e){const i=BE.get(n);ps.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sy={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let s,o,a,e=t.x,i=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const u=jR(t,l.getCenterPoint());u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function il(n,t){return t&&(ri(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function oc(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function Rwe(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function Q9(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=Cr(t.bodyFont),c=Cr(t.titleFont),u=Cr(t.footerFont),f=s.length,g=r.length,v=i.length,b=fs(t.padding);let x=b.height,E=0,O=i.reduce((q,K)=>q+K.before.length+K.lines.length+K.after.length,0);O+=n.beforeBody.length+n.afterBody.length,f&&(x+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),O&&(x+=v*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(O-v)*l.lineHeight+(O-1)*t.bodySpacing),g&&(x+=t.footerMarginTop+g*u.lineHeight+(g-1)*t.footerSpacing);let k=0;const F=function(q){E=Math.max(E,e.measureText(q).width+k)};return e.save(),e.font=c.string,Dn(n.title,F),e.font=l.string,Dn(n.beforeBody.concat(n.afterBody),F),k=t.displayColors?o+2+t.boxPadding:0,Dn(i,q=>{Dn(q.before,F),Dn(q.lines,F),Dn(q.after,F)}),k=0,e.font=u.string,Dn(n.footer,F),e.restore(),E+=b.width,{width:E,height:x}}function Fwe(n,t,e,i){const{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function Owe(n,t,e,i){const{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if("left"===n&&r+s+o>t.width||"right"===n&&r-s-o<0)return!0}(c,n,t,e)&&(c="center"),c}function X9(n,t,e){const i=e.yAlign||t.yAlign||function Pwe(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}(n,e);return{xAlign:e.xAlign||t.xAlign||Fwe(n,t,e,i),yAlign:i}}function J9(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:u,topRight:f,bottomLeft:g,bottomRight:v}=Eh(o);let b=function Nwe(n,t){let{x:e,width:i}=n;return"right"===t?e-=i:"center"===t&&(e-=i/2),e}(t,a);const x=function Lwe(n,t,e){let{y:i,height:r}=n;return"top"===t?i+=e:i-="bottom"===t?r+e:r/2,i}(t,l,c);return"center"===l?"left"===a?b+=c:"right"===a&&(b-=c):"left"===a?b-=Math.max(u,g)+r:"right"===a&&(b+=Math.max(f,v)+r),{x:Pr(b,0,i.width-t.width),y:Pr(x,0,i.height-t.height)}}function jE(n,t,e){const i=fs(e.padding);return"center"===t?n.x+n.width/2:"right"===t?n.x+n.width-i.right:n.x+i.left}function eW(n){return il([],oc(n))}function tW(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const nW={beforeTitle:ec,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:ec,beforeBody:ec,beforeLabel:ec,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return cn(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ec,afterBody:ec,beforeFooter:ec,footer:ec,afterFooter:ec};function Qs(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?nW[t].call(e,i):r}let iW=(()=>class n extends sc{static positioners=Sy;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new $8(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function Vwe(n,t,e){return ku(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:r}=i,s=Qs(r,"beforeTitle",this,e),o=Qs(r,"title",this,e),a=Qs(r,"afterTitle",this,e);let l=[];return l=il(l,oc(s)),l=il(l,oc(o)),l=il(l,oc(a)),l}getBeforeBody(e,i){return eW(Qs(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:r}=i,s=[];return Dn(e,o=>{const a={before:[],lines:[],after:[]},l=tW(r,o);il(a.before,oc(Qs(l,"beforeLabel",this,o))),il(a.lines,Qs(l,"label",this,o)),il(a.after,oc(Qs(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,i){return eW(Qs(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:r}=i,s=Qs(r,"beforeFooter",this,e),o=Qs(r,"footer",this,e),a=Qs(r,"afterFooter",this,e);let l=[];return l=il(l,oc(s)),l=il(l,oc(o)),l=il(l,oc(a)),l}_createItems(e){const i=this._active,r=this.chart.data,s=[],o=[],a=[];let c,u,l=[];for(c=0,u=i.length;c<u;++c)l.push(Rwe(this.chart,i[c]));return e.filter&&(l=l.filter((f,g,v)=>e.filter(f,g,v,r))),e.itemSort&&(l=l.sort((f,g)=>e.itemSort(f,g,r))),Dn(l,f=>{const g=tW(e.callbacks,f);s.push(Qs(g,"labelColor",this,f)),o.push(Qs(g,"labelPointStyle",this,f)),a.push(Qs(g,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){const r=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(s.length){const l=Sy[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=Q9(this,r),u=Object.assign({},l,c),f=X9(this.chart,r,u),g=J9(r,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:g.x,y:g.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){const o=this.getCaretPosition(e,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,r){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:g}=Eh(l),{x:v,y:b}=e,{width:x,height:E}=i;let O,k,F,q,K,re;return"center"===o?(K=b+E/2,"left"===s?(O=v,k=O-a,q=K+a,re=K-a):(O=v+x,k=O+a,q=K-a,re=K+a),F=O):(k="left"===s?v+Math.max(c,f)+a:"right"===s?v+x-Math.max(u,g)-a:this.caretX,"top"===o?(q=b,K=q-a,O=k-a,F=k+a):(q=b+E,K=q+a,O=k+a,F=k-a),re=q),{x1:O,x2:k,x3:F,y1:q,y2:K,y3:re}}drawTitle(e,i,r){const s=this.title,o=s.length;let a,l,c;if(o){const u=Am(r.rtl,this.x,this.width);for(e.x=jE(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=Cr(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,i,r,s,o){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=o,f=Cr(o.bodyFont),g=jE(this,"left",o),v=s.x(g),x=i.y+(c<f.lineHeight?(f.lineHeight-c)/2:0);if(o.usePointStyle){const E={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},O=s.leftForLtr(v,u)+u/2,k=x+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,GR(e,E,O,k),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,GR(e,E,O,k)}else{e.lineWidth=Xt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const E=s.leftForLtr(v,u),O=s.leftForLtr(s.xPlus(v,1),u-2),k=Eh(a.borderRadius);Object.values(k).some(F=>0!==F)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,_y(e,{x:E,y:x,w:u,h:c,radius:k}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),_y(e,{x:O,y:x+1,w:u-2,h:c-2,radius:k}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(E,x,u,c),e.strokeRect(E,x,u,c),e.fillStyle=a.backgroundColor,e.fillRect(O,x+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:f}=r,g=Cr(r.bodyFont);let v=g.lineHeight,b=0;const x=Am(r.rtl,this.x,this.width),E=function(N){i.fillText(N,x.x(e.x+b),e.y+v/2),e.y+=v+o},O=x.textAlign(a);let k,F,q,K,re,B,P;for(i.textAlign=a,i.textBaseline="middle",i.font=g.string,e.x=jE(this,O,r),i.fillStyle=r.bodyColor,Dn(this.beforeBody,E),b=l&&"right"!==O?"center"===a?u/2+f:u+2+f:0,K=0,B=s.length;K<B;++K){for(k=s[K],F=this.labelTextColors[K],i.fillStyle=F,Dn(k.before,E),q=k.lines,l&&q.length&&(this._drawColorBox(i,e,K,x,r),v=Math.max(g.lineHeight,c)),re=0,P=q.length;re<P;++re)E(q[re]),v=g.lineHeight;Dn(k.after,E)}b=0,v=g.lineHeight,Dn(this.afterBody,E),e.y-=o}drawFooter(e,i,r){const s=this.footer,o=s.length;let a,l;if(o){const c=Am(r.rtl,this.x,this.width);for(e.x=jE(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=Cr(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:f}=r,{topLeft:g,topRight:v,bottomLeft:b,bottomRight:x}=Eh(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+g,c),"top"===a&&this.drawCaret(e,i,r,s),i.lineTo(l+u-v,c),i.quadraticCurveTo(l+u,c,l+u,c+v),"center"===a&&"right"===o&&this.drawCaret(e,i,r,s),i.lineTo(l+u,c+f-x),i.quadraticCurveTo(l+u,c+f,l+u-x,c+f),"bottom"===a&&this.drawCaret(e,i,r,s),i.lineTo(l+b,c+f),i.quadraticCurveTo(l,c+f,l,c+f-b),"center"===a&&"left"===o&&this.drawCaret(e,i,r,s),i.lineTo(l,c+g),i.quadraticCurveTo(l,c,l+g,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const a=Sy[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=Q9(this,e),c=Object.assign({},a,this._size),u=X9(i,e,c),f=J9(e,c,u,i);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=fs(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,i),F8(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),N8(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const r=this._active,s=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!_E(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,r),l=this._positionChanged(a,e),c=i||!_E(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&void 0!==this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index));const a=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(e,i){const{caretX:r,caretY:s,options:o}=this,a=Sy[o.position].call(this,e,i);return!1!==a&&(r!==a.x||s!==a.y)}})();var Bwe={id:"tooltip",_element:iW,positioners:Sy,afterInit(n,t,e){e&&(n.tooltip=new iW({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){n.tooltip&&n.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nW},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},jwe=Object.freeze({__proto__:null,Colors:X0e,Decimation:nwe,Filler:Cwe,Legend:Iwe,SubTitle:Mwe,Title:kwe,Tooltip:Bwe});function rW(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}let $we=(()=>class n extends Ah{static id="category";static defaults={ticks:{callback:rW}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const r=this.getLabels();for(const{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(cn(e))return null;const r=this.getLabels();return((n,t)=>null===n?null:Pr(Math.round(n),0,t))(i=isFinite(i)&&r[i]===e?i:function zwe(n,t,e,i){const r=n.indexOf(t);return-1===r?((n,t,e,i)=>("string"==typeof t?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(n,t,e,i):r!==n.lastIndexOf(t)?e:r}(r,e,Rt(i,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,i=this.max,r=this.options.offset,s=[];let o=this.getLabels();o=0===e&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=i;a++)s.push({value:a});return s}getLabelForValue(e){return rW.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}})();function sW(n,t,{horizontal:e,minRotation:i}){const r=pa(i),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+n).length)}class UE extends Ah{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return cn(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){const l=tl(r),c=tl(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=0===s?1:Math.abs(.05*s);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:i}=t;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function Wwe(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:g}=n,v=s||1,b=u-1,{min:x,max:E}=t,O=!cn(o),k=!cn(a),F=!cn(c),q=(E-x)/(f+1);let re,B,P,N,K=o8((E-x)/b/v)*v;if(K<1e-14&&!O&&!k)return[{value:x},{value:E}];N=Math.ceil(E/K)-Math.floor(x/K),N>b&&(K=o8(N*K/b/v)*v),cn(l)||(re=Math.pow(10,l),K=Math.ceil(K*re)/re),"ticks"===r?(B=Math.floor(x/K)*K,P=Math.ceil(E/K)*K):(B=x,P=E),O&&k&&s&&function Rve(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}((a-o)/s,K/1e3)?(N=Math.round(Math.min((a-o)/K,u)),K=(a-o)/N,B=o,P=a):F?(B=O?o:B,P=k?a:P,N=c-1,K=(P-B)/N):(N=(P-B)/K,N=hy(N,Math.round(N),K/1e3)?Math.round(N):Math.ceil(N));const $=Math.max(l8(K),l8(B));re=Math.pow(10,cn(l)?$:l),B=Math.round(B*re)/re,P=Math.round(P*re)/re;let U=0;for(O&&(g&&B!==o?(e.push({value:o}),B<o&&U++,hy(Math.round((B+U*K)*re)/re,o,sW(o,q,n))&&U++):B<o&&U++);U<N;++U){const W=Math.round((B+U*K)*re)/re;if(k&&W>a)break;e.push({value:W})}return k&&g&&P!==a?e.length&&hy(e[e.length-1].value,a,sW(a,q,n))?e[e.length-1].value=a:e.push({value:a}):(!k||P===a)&&e.push({value:P}),e}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&a8(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return my(t,this.chart.options.locale,this.options.ticks.format)}}const Iy=n=>Math.floor(Au(n)),kh=(n,t)=>Math.pow(10,Iy(n)+t);function oW(n){return n/Math.pow(10,Iy(n))==1}function aW(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function yP(n){const t=n.ticks;if(t.display&&n.display){const e=fs(t.backdropPadding);return Rt(t.font&&t.font.size,Si.font.size)+e.height}return 0}function Kwe(n,t,e){return e=ri(e)?e:[e],{w:Zve(n,t.string,e),h:e.length*t.lineHeight}}function lW(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function Xwe(n,t,e,i,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function Jwe(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),c=Math.round(BR(yo(l.angle+Ki))),u=function rCe(n,t,e){return 90===e||270===e?n-=t/2:(e>270||e<90)&&(n-=t),n}(l.y,a.h,c),f=function nCe(n){return 0===n||180===n?"center":n<180?"left":"right"}(c),g=function iCe(n,t,e){return"right"===e?n-=t:"center"===e&&(n-=t/2),n}(l.x,a.w,f);return{visible:!0,x:l.x,y:u,textAlign:f,left:g,top:u,right:g+a.w,bottom:u+a.h}}function eCe(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:s}=n;return!(ic({x:e,y:i},t)||ic({x:e,y:s},t)||ic({x:r,y:i},t)||ic({x:r,y:s},t))}function sCe(n,t,e){const{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!cn(a)){const l=Eh(t.borderRadius),c=fs(t.backdropPadding);n.fillStyle=a;const u=i-c.left,f=r-c.top,g=s-i+c.width,v=o-r+c.height;Object.values(l).some(b=>0!==b)?(n.beginPath(),_y(n,{x:u,y:f,w:g,h:v,radius:l}),n.fill()):n.fillRect(u,f,g,v)}}function cW(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,oi);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}const zE={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xs=Object.keys(zE);function uW(n,t){return n-t}function dW(n,t){if(cn(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return"function"==typeof i&&(o=i(o)),Ti(o)||(o="string"==typeof i?e.parse(o,i):e.parse(o)),null===o?null:(r&&(o="week"!==r||!Tm(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function hW(n,t,e,i){const r=Xs.length;for(let s=Xs.indexOf(n);s<r-1;++s){const o=zE[Xs[s]];if(o.common&&Math.ceil((e-t)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=i)return Xs[s]}return Xs[r-1]}function fW(n,t,e){if(e){if(e.length){const{lo:i,hi:r}=UR(e,t);n[e[i]>=t?e[i]:e[r]]=!0}}else n[t]=!0}function pW(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&e?function hCe(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}(n,i,r,e):i}let bP=(()=>class n extends Ah{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const r=e.time||(e.time={}),s=this._adapter=new pbe__date(e.adapters.date);s.init(i),uy(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return void 0===e?null:dW(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&c(this.getMinMax(!1))),s=Ti(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Ti(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){const e=this.options,i=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,l=function Nve(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}(s,o,this.max);return this._unit=i.unit||(r.autoSkip?hW(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function uCe(n,t,e,i,r){for(let s=Xs.length-1;s>=Xs.indexOf(e);s--){const o=Xs[s];if(zE[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return Xs[e?Xs.indexOf(e):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function dCe(n){for(let t=Xs.indexOf(n)+1,e=Xs.length;t<e;++t)if(zE[Xs[t]].common)return Xs[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&l.reverse(),pW(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s,o,i=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),i=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;i=Pr(i,0,a),r=Pr(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||hW(o.minUnit,i,r,this._getLabelCapacity(i)),l=Rt(s.ticks.stepSize,1),c="week"===a&&o.isoWeekday,u=Tm(c)||!0===c,f={};let v,b,g=i;if(u&&(g=+e.startOf(g,"isoWeek",c)),g=+e.startOf(g,u?"day":a),e.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);const x="data"===s.ticks.source&&this.getDataTimestamps();for(v=g,b=0;v<r;v=+e.add(v,l,a),b++)fW(f,v,x);return(v===r||"ticks"===s.bounds||1===b)&&fW(f,v,x),Object.keys(f).sort(uW).map(E=>+E)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}format(e,i){return this._adapter.format(e,i||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,i,r,s){const o=this.options,a=o.ticks.callback;if(a)return Gn(a,[e,i,r],this);const l=o.time.displayFormats,c=this._unit,u=this._majorUnit,g=u&&l[u],v=r[i];return this._adapter.format(e,s||(u&&g&&v&&v.major?g:c&&l[c]))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){const i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,r=this.ctx.measureText(e).width,s=pa(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(e){const i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(e,0,pW(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,r;if(e.length)return e;const s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(dW(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return h8(e.sort(uW))}})();function HE(n,t,e){let s,o,a,l,i=0,r=n.length-1;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=nc(n,"pos",t)),({pos:s,time:a}=n[i]),({pos:o,time:l}=n[r])):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=nc(n,"time",t)),({time:s,pos:a}=n[i]),({time:o,pos:l}=n[r]));const c=o-s;return c?a+(l-a)*(t-s)/c:a}var pCe=Object.freeze({__proto__:null,CategoryScale:$we,LinearScale:class qwe extends UE{static id="linear";static defaults={ticks:{callback:wE.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ti(t)?t:0,this.max=Ti(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=pa(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},LogarithmicScale:class Zwe extends Ah{static id="logarithmic";static defaults={ticks:{callback:wE.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=UE.prototype.parse.apply(this,[t,e]);if(0!==i)return Ti(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ti(t)?Math.max(0,t):null,this.max=Ti(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ti(this._userMin)&&(this.min=t===kh(this.min,0)?kh(this.min,-1):kh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(kh(i,-1)),o(kh(r,1)))),i<=0&&s(kh(r,-1)),r<=0&&o(kh(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,i=function Ywe(n,{min:t,max:e}){t=vo(n.min,t);const i=[],r=Iy(t);let s=function Gwe(n,t){let i=Iy(t-n);for(;aW(n,t,i)>10;)i++;for(;aW(n,t,i)<10;)i--;return Math.min(i,Iy(n))}(t,e),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let f=Math.floor((c-u)/Math.pow(10,s)),g=vo(n.min,Math.round((l+u+f*Math.pow(10,s))*o)/o);for(;g<e;)i.push({value:g,major:oW(g),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),g=Math.round((l+u+f*Math.pow(10,s))*o)/o;const v=vo(n.max,g);return i.push({value:v,major:oW(v),significand:f}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&a8(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return void 0===t?"0":my(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Au(t),this._valueRange=Au(this.max)-Au(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Au(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}},RadialLinearScale:class cCe extends UE{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:wE.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=fs(yP(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Ti(t)&&!isNaN(t)?t:0,this.max=Ti(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/yP(this.options))}generateTickLabels(t){UE.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=Gn(this.options.pointLabels.callback,[e,i],this);return r||0===r?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?function Qwe(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?si/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),f=Cr(c.font),g=Kwe(n.ctx,f,n._pointLabels[l]);i[l]=g;const v=yo(n.getIndexAngle(l)+a),b=Math.round(BR(v));Xwe(e,t,v,lW(b,u.x,g.w,0,180),lW(b,u.y,g.h,90,270))}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=function tCe(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:yP(s)/2,additionalAngle:o?si/r:0};let c;for(let u=0;u<r;u++){l.padding=e[u],l.size=t[u];const f=Jwe(n,u,l);i.push(f),"auto"===a&&(f.visible=eCe(f,c),f.visible&&(c=f))}return i}(n,i,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){return yo(t*(oi/(this._pointLabels.length||1))+pa(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(cn(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(cn(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function lCe(n,t,e){return ku(n,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Ki+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),cW(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&function oCe(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));sCe(e,o,s);const a=Cr(o.font),{x:l,y:c,textAlign:u}=s;xh(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach((u,f)=>{if(0!==f||0===f&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const g=this.getContext(f),v=r.setContext(g),b=s.setContext(g);!function aCe(n,t,e,i,r){const s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),cW(n,e,o,i),s.closePath(),s.stroke(),s.restore())}(this,v,l,o,b)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:g}=u;!g||!f||(t.lineWidth=g,t.strokeStyle=f,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),u=Cr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const f=fs(c.backdropPadding);t.fillRect(-o/2-f.left,-s-u.size/2-f.top,o+f.width,u.size+f.height)}xh(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},TimeScale:bP,TimeSeriesScale:class fCe extends bP{static id="timeseries";static defaults=bP.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=HE(e,this.min),this._tableRange=HE(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||1===i.length)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(HE(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return HE(this._table,i*this._tableRange+this._minPos,!0)}}});uP.register(fbe,q0e,jwe,pCe);const gCe=["chartContainer"];function _Ce(n,t){if(1&n&&(y(0,"div")(1,"h3"),S(2),w(),$t(3,"canvas",2,3),w()),2&n){const e=t.$implicit;I(2),qe(e.name)}}function vCe(n,t){1&n&&(y(0,"div"),S(1," \u30c1\u30e3\u30fc\u30c8\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\n"),w())}let yCe=(()=>{class n{constructor(e,i){this.projectService=e,this.taskService=i,this.projects=[],this.tasks$=ve([]),this.statusCounts={},this.hasChartData=!1,console.log("ProjectProgressComponent constructor")}ngOnInit(){console.log("ProjectProgressComponent ngOnInit"),this.projectService.getProjectsByOwnerOrMember().subscribe(e=>{if(this.projects=e,console.log("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30fc\u30bf:",e),e&&e.length>0){const i=e.map(r=>r.id);console.log("Fetching tasks for projects:",i),this.tasks$=this.taskService.getTasksByProjectIds(i),this.tasks$.pipe(Oe(r=>(r.forEach(s=>{const o=s.projectId||"";this.statusCounts[o]||(this.statusCounts[o]={\u672a\u7740\u624b:0,\u9032\u884c\u4e2d:0,\u5b8c\u4e86:0}),this.statusCounts[o].hasOwnProperty(s.status)&&this.statusCounts[o][s.status]++}),r))).subscribe(r=>{console.log("\u30bf\u30b9\u30af\u30c7\u30fc\u30bf:",r),this.hasChartData=Object.values(this.statusCounts).some(s=>Object.values(s).some(o=>o>0)),this.hasChartData&&this.chartContainers.changes.subscribe(()=>{this.initializeCharts()})},r=>{console.error("\u30bf\u30b9\u30af\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f:",r)})}else console.log("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093")},e=>{console.error("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f:",e)})}ngAfterViewInit(){console.log("ngAfterViewInit called"),this.initializeCharts()}initializeCharts(){this.chartContainers.forEach((e,i)=>{const s=this.projects[i].id;if(this.statusCounts[s]){const a={labels:["\u672a\u7740\u624b","\u9032\u884c\u4e2d","\u5b8c\u4e86"],datasets:[{data:[this.statusCounts[s].\u672a\u7740\u624b,this.statusCounts[s].\u9032\u884c\u4e2d,this.statusCounts[s].\u5b8c\u4e86],backgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]};new uP(e.nativeElement,{type:"pie",data:a,options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:l=>{const c=a.datasets[0].data.reduce((g,v)=>g+v,0),f=(a.datasets[0].data[l.dataIndex]/c*100).toFixed(2)+"%";return`${a.labels[l.dataIndex]}: ${f}`}}}}}})}else console.error("statusCounts is undefined for projectId:",s)})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Du),z(el))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-project-progress"]],viewQuery:function(i,r){if(1&i&&Na(gCe,5),2&i){let s;Hi(s=$i())&&(r.chartContainers=s)}},decls:4,vars:2,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["width","800","height","400",2,"width","100%","height","400px"],["chartContainer",""]],template:function(i,r){1&i&&(y(0,"h2"),S(1,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u9032\u6357"),w(),ce(2,_Ce,5,1,"div",0),ce(3,vCe,2,0,"div",1)),2&i&&(I(2),R("ngForOf",r.projects),I(1),R("ngIf",!r.hasChartData))},dependencies:[Ci,nr],styles:["canvas[_ngcontent-%COMP%]{display:block;margin:auto}"]})}return n})(),wP=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i,this.userId=null,this.authService.user$.subscribe(r=>{this.userId=r?.uid||null})}getUserTaskSetsCollection(){if(!this.userId)throw new Error("User ID is not available");return this.firestore.collection(`users/${this.userId}/taskSets`)}getTaskSets(){return this.getUserTaskSetsCollection().valueChanges({idField:"id"})}createTaskSet(e){return this.getUserTaskSetsCollection().add(e)}updateTaskSet(e){return this.getUserTaskSetsCollection().doc(e.id).update(e)}deleteTaskSet(e){return this.getUserTaskSetsCollection().doc(e.id).delete()}addTaskToTaskSet(e,i){if(!this.userId)return Promise.reject("User ID is not available");const r=this.firestore.createId();return i.id=r,this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).doc(r).set(i)}getTasksForTaskSet(e){if(!this.userId)throw new Error("User ID is not available");return this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).valueChanges({idField:"id"})}updateTaskInTaskSet(e,i){return this.userId?this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).doc(i.id).update(i):Promise.reject("User ID is not available")}duplicateTask(e,i){if(!this.userId)return Promise.reject("User ID is not available");const r={...i,id:this.firestore.createId()};return this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).doc(r.id).set(r)}deleteTaskFromTaskSet(e,i){return this.userId?this.firestore.collection(`users/${this.userId}/taskSets/${e}/tasks`).doc(i).delete():Promise.reject("User ID is not available")}waitForUserId(){return new Promise((e,i)=>{if(this.userId)e();else{const r=this.authService.user$.subscribe(s=>{s?.uid&&(this.userId=s.uid,r.unsubscribe(),e())})}})}getCurrentUserId(){return this.userId}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ja),ie(Ks))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bCe(n,t){1&n&&$t(0,"div",2)}function wCe(n,t){if(1&n&&(y(0,"option",31),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function CCe(n,t){if(1&n){const e=je();y(0,"div")(1,"label"),S(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),w(),y(3,"input",43),G("ngModelChange",function(r){return J(e),ee(V(3).editedTask.repeatSettings.daysOffsetFromEnd=r)}),w()()}if(2&n){const e=V(3);I(3),R("ngModel",e.editedTask.repeatSettings.daysOffsetFromEnd)}}function xCe(n,t){if(1&n){const e=je();y(0,"div"),S(1),y(2,"button",7),G("click",function(){const s=J(e).$implicit;return ee(V(3).removeExcludeDate(s))}),S(3,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e," ")}}function ECe(n,t){if(1&n){const e=je();y(0,"div",8)(1,"span",9),S(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),w(),y(3,"span",10)(4,"div",32)(5,"div")(6,"label"),S(7,"\u983b\u5ea6:"),w(),y(8,"select",19),G("ngModelChange",function(r){return J(e),ee(V(2).editedTask.repeatSettings.frequency=r)}),y(9,"option",33),S(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),w(),y(11,"option",34),S(12,"\u6bce\u65e5"),w(),y(13,"option",35),S(14,"\u6bce\u9031"),w(),y(15,"option",36),S(16,"\u6bce\u6708"),w(),y(17,"option",37),S(18,"\u6bce\u5e74"),w(),y(19,"option",38),S(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),w()()(),ce(21,CCe,4,1,"div",39),y(22,"div")(23,"label"),S(24,"\u7d42\u4e86\u65e5:"),w(),y(25,"input",40),G("ngModelChange",function(r){return J(e),ee(V(2).editedTask.repeatSettings.endDate=r)}),w()(),y(26,"div")(27,"label"),S(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),w(),y(29,"input",41),G("ngModelChange",function(r){return J(e),ee(V(2).editedTask.repeatSettings.businessDaysOnly=r)}),w()(),y(30,"div")(31,"label"),S(32,"\u9664\u5916\u65e5:"),w(),y(33,"input",40),G("ngModelChange",function(r){return J(e),ee(V(2).excludeDate=r)}),w(),y(34,"button",7),G("click",function(){return J(e),ee(V(2).addExcludeDate())}),S(35,"\u8ffd\u52a0"),w(),ce(36,xCe,4,1,"div",42),w()()()()}if(2&n){const e=V(2);I(8),R("ngModel",e.editedTask.repeatSettings.frequency),I(13),R("ngIf","monthlyFromEnd"===e.editedTask.repeatSettings.frequency),I(4),R("ngModel",e.editedTask.repeatSettings.endDate),I(4),R("ngModel",e.editedTask.repeatSettings.businessDaysOnly),I(4),R("ngModel",e.excludeDate),I(3),R("ngForOf",e.editedTask.repeatSettings.excludeDates)}}const DCe=function(n){return{selected:n}},TCe=function(n){return{"background-color":n}};function SCe(n,t){if(1&n){const e=je();y(0,"div",44),G("click",function(){const s=J(e).$implicit;return ee(V(2).selectColor(s))}),w()}if(2&n){const e=t.$implicit,i=V(2);R("ngClass",nn(2,DCe,i.editedTask.tagColor===e))("ngStyle",nn(4,TCe,e))}}function ICe(n,t){if(1&n){const e=je();y(0,"li",45)(1,"span",46),S(2),w(),y(3,"button",7),G("click",function(){const s=J(e).index;return ee(V(2).deleteSubtask(s))}),S(4,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit;I(2),qe(e.title)}}function ACe(n,t){if(1&n){const e=je();y(0,"div",3)(1,"div",4)(2,"h2",5),S(3),w(),y(4,"div",6)(5,"button",7),G("click",function(){return J(e),ee(V().saveTask())}),S(6,"\u4fdd\u5b58"),w(),y(7,"button",7),G("click",function(){return J(e),ee(V().duplicateTask())}),S(8,"\u8907\u88fd"),w(),y(9,"button",7),G("click",function(){return J(e),ee(V().cancel())}),S(10,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()(),y(11,"div",8)(12,"span",9),S(13,"\u30bf\u30a4\u30c8\u30eb:"),w(),y(14,"span",10)(15,"input",11),G("ngModelChange",function(r){return J(e),ee(V().editedTask.title=r)}),w()()(),y(16,"div",8)(17,"span",9),S(18,"\u8aac\u660e:"),w(),y(19,"span",10)(20,"textarea",12),G("ngModelChange",function(r){return J(e),ee(V().editedTask.description=r)}),w()()(),y(21,"div",8)(22,"span",9),S(23,"\u958b\u59cb\u65e5\u6642:"),w(),y(24,"span",10)(25,"input",13),G("ngModelChange",function(r){return J(e),ee(V().editedTask.startDateTime=r)}),w()()(),y(26,"div",8)(27,"span",9),S(28,"\u7d42\u4e86\u65e5\u6642:"),w(),y(29,"span",10)(30,"input",13),G("ngModelChange",function(r){return J(e),ee(V().editedTask.endDateTime=r)}),w()()(),y(31,"div",8)(32,"span",9),S(33,"\u30bf\u30b9\u30af\u306e\u9577\u3055 (\u5206):"),w(),y(34,"span",10)(35,"input",14),G("ngModelChange",function(r){return J(e),ee(V().editedTask.duration=r)}),w()()(),y(36,"div",8)(37,"span",9),S(38,"\u901a\u77e5"),w(),y(39,"span",10)(40,"input",15),G("ngModelChange",function(r){return J(e),ee(V().editedTask.reminderTime.value=r)}),w(),y(41,"select",16),G("ngModelChange",function(r){return J(e),ee(V().editedTask.reminderTime.unit=r)}),ce(42,wCe,2,2,"option",17),w()()(),ce(43,ECe,37,6,"div",18),y(44,"div",8)(45,"span",9),S(46,"\u512a\u5148\u5ea6:"),w(),y(47,"span",10)(48,"select",19),G("ngModelChange",function(r){return J(e),ee(V().editedTask.priority=r)}),y(49,"option",20),S(50,"\u4f4e"),w(),y(51,"option",21),S(52,"\u4e2d"),w(),y(53,"option",22),S(54,"\u9ad8"),w()()()(),y(55,"div",8)(56,"span",9),S(57,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),w(),y(58,"span",10)(59,"select",19),G("ngModelChange",function(r){return J(e),ee(V().editedTask.status=r)}),y(60,"option",23),S(61,"\u672a\u7740\u624b"),w(),y(62,"option",24),S(63,"\u9032\u884c\u4e2d"),w(),y(64,"option",25),S(65,"\u5b8c\u4e86"),w()()()(),y(66,"div",8)(67,"span",9),S(68,"\u30bf\u30b0:"),w(),y(69,"span",10)(70,"input",26),G("ngModelChange",function(r){return J(e),ee(V().editedTask.tag=r)}),w()()(),y(71,"div",8)(72,"span",9),S(73,"\u30bf\u30b0\u306e\u8272:"),w(),y(74,"span",10)(75,"div",27),ce(76,SCe,1,6,"div",28),w()()(),y(77,"div",29)(78,"h6"),S(79,"\u30b5\u30d6\u30bf\u30b9\u30af"),w(),y(80,"button",7),G("click",function(){return J(e),ee(V().addSubtask())}),S(81,"\u30b5\u30d6\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w(),y(82,"ul"),ce(83,ICe,5,1,"li",30),w()()()}if(2&n){const e=V();I(3),On("",e.editedTask.title," \u306e\u8a73\u7d30"),I(12),R("ngModel",e.editedTask.title),I(5),R("ngModel",e.editedTask.description),I(5),R("ngModel",e.editedTask.startDateTime),I(5),R("ngModel",e.editedTask.endDateTime),I(5),R("ngModel",e.editedTask.duration),I(5),R("ngModel",e.editedTask.reminderTime.value),I(1),R("ngModel",e.editedTask.reminderTime.unit),I(1),R("ngForOf",e.reminderUnits),I(1),R("ngIf",e.editedTask.repeatSettings),I(5),R("ngModel",e.editedTask.priority),I(11),R("ngModel",e.editedTask.status),I(11),R("ngModel",e.editedTask.tag),I(6),R("ngForOf",e.colors),I(7),R("ngForOf",e.editedTask.subtasks)}}let kCe=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.reminderService=i,this.taskSetService=r,this.dialogRef=s,this.data=o,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.excludeDate="",o&&o.task?(this.originalTask={...o.task},this.editedTask={...o.task,subtasks:[...o.task.subtasks]}):(this.editedTask={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",duration:0,tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:""},this.originalTask={...this.editedTask})}ngOnInit(){this.editedTask.reminderTime||(this.editedTask.reminderTime={value:null,unit:"\u5206"}),this.editedTask.subtasks||(this.editedTask.subtasks=[])}saveTask(){var e=this;return(0,me.Z)(function*(){if(e.editedTask.reminderTime&&null!==e.editedTask.reminderTime.value){const i=e.calculateReminderTime({value:e.editedTask.reminderTime.value,unit:e.editedTask.reminderTime.unit});e.reminderService.setReminder(e.editedTask,i)}try{e.editedTask.id?yield e.taskSetService.updateTaskInTaskSet(e.data.taskSetId,e.editedTask):yield e.taskSetService.addTaskToTaskSet(e.data.taskSetId,e.editedTask),e.dialogRef.close(e.editedTask)}catch(i){console.error("Error updating task:",i)}})()}duplicateTask(){var e=this;return(0,me.Z)(function*(){yield e.taskSetService.duplicateTask(e.data.taskSetId,e.editedTask),e.dialogRef.close()})()}addSubtask(){this.editedTask.subtasks||(this.editedTask.subtasks=[]);const e={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"};this.editedTask.subtasks.push(e)}deleteSubtask(e){this.editedTask.subtasks&&this.editedTask.subtasks.splice(e,1)}cancel(){this.dialogRef.close(this.originalTask)}selectColor(e){this.editedTask.tagColor=e}addExcludeDate(){this.editedTask.repeatSettings||(this.editedTask.repeatSettings={frequency:"none",businessDaysOnly:!1,excludeDates:[]}),this.editedTask.repeatSettings.excludeDates||(this.editedTask.repeatSettings.excludeDates=[]),this.excludeDate&&(this.editedTask.repeatSettings.excludeDates.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(e){this.editedTask.repeatSettings&&this.editedTask.repeatSettings.excludeDates&&(this.editedTask.repeatSettings.excludeDates=this.editedTask.repeatSettings.excludeDates.filter(i=>i!==e))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(i){return new(i||n)(z(el),z($k),z(wP),z($a),z(su))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-task-set-task-detail"]],standalone:!0,features:[wi],decls:2,vars:2,consts:[["class","modal-overlay",4,"ngIf"],["class","task-detail-container",4,"ngIf"],[1,"modal-overlay"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local","disabled","",3,"ngModel","ngModelChange"],["type","number","placeholder","\u30bf\u30b9\u30af\u306e\u9577\u3055",3,"ngModel","ngModelChange"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","detail-row",4,"ngIf"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"subtask-container"],["class","subtask-item",4,"ngFor","ngForOf"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"],[1,"subtask-item"],[1,"subtask-title"]],template:function(i,r){1&i&&(ce(0,bCe,1,0,"div",0),ce(1,ACe,84,15,"div",1)),2&i&&(R("ngIf",r.editedTask),I(1),R("ngIf",r.editedTask))},dependencies:[Cn,Ir,Ci,nr,Lo,ar,Ll,Vl,sr,iu,za,fa,or,Mp,qi],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;border-radius:8px;width:80%}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}.read-only[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed}.read-only-select[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888;cursor:not-allowed;pointer-events:none}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999}"]})}return n})();function MCe(n,t){if(1&n&&(y(0,"option",24),S(1),w()),2&n){const e=t.$implicit;R("value",e),I(1),qe(e)}}function RCe(n,t){if(1&n){const e=je();y(0,"div",6)(1,"span",7),S(2,"\u901a\u77e5:"),w(),y(3,"span",8)(4,"input",21),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.reminderTime.value=r)}),w(),y(5,"select",22),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.reminderTime.unit=r)}),ce(6,MCe,2,2,"option",23),w()()()}if(2&n){const e=V(2);I(4),R("ngModel",e.newTask.reminderTime.value),I(1),R("ngModel",e.newTask.reminderTime.unit),I(1),R("ngForOf",e.reminderUnits)}}function PCe(n,t){if(1&n){const e=je();y(0,"div")(1,"label"),S(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),w(),y(3,"input",36),G("ngModelChange",function(r){return J(e),ee(V(3).newTask.repeatSettings.daysOffsetFromEnd=r)}),w()()}if(2&n){const e=V(3);I(3),R("ngModel",e.newTask.repeatSettings.daysOffsetFromEnd)}}function OCe(n,t){if(1&n){const e=je();y(0,"div"),S(1),y(2,"button",5),G("click",function(){const s=J(e).$implicit;return ee(V(3).removeExcludeDate(s))}),S(3,"\u524a\u9664"),w()()}if(2&n){const e=t.$implicit;I(1),On(" ",e," ")}}function FCe(n,t){if(1&n){const e=je();y(0,"div",6)(1,"span",7),S(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),w(),y(3,"span",8)(4,"div",25)(5,"div")(6,"label"),S(7,"\u983b\u5ea6:"),w(),y(8,"select",14),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.repeatSettings.frequency=r)}),y(9,"option",26),S(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),w(),y(11,"option",27),S(12,"\u6bce\u65e5"),w(),y(13,"option",28),S(14,"\u6bce\u9031"),w(),y(15,"option",29),S(16,"\u6bce\u6708"),w(),y(17,"option",30),S(18,"\u6bce\u5e74"),w(),y(19,"option",31),S(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),w()()(),ce(21,PCe,4,1,"div",32),y(22,"div")(23,"label"),S(24,"\u7d42\u4e86\u65e5:"),w(),y(25,"input",33),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.repeatSettings.endDate=r)}),w()(),y(26,"div")(27,"label"),S(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),w(),y(29,"input",34),G("ngModelChange",function(r){return J(e),ee(V(2).newTask.repeatSettings.businessDaysOnly=r)}),w()(),y(30,"div")(31,"label"),S(32,"\u9664\u5916\u65e5:"),w(),y(33,"input",33),G("ngModelChange",function(r){return J(e),ee(V(2).excludeDate=r)}),w(),y(34,"button",5),G("click",function(){return J(e),ee(V(2).addExcludeDate())}),S(35,"\u8ffd\u52a0"),w(),ce(36,OCe,4,1,"div",35),w()()()()}if(2&n){const e=V(2);I(8),R("ngModel",e.newTask.repeatSettings.frequency),I(13),R("ngIf","monthlyFromEnd"===e.newTask.repeatSettings.frequency),I(4),R("ngModel",e.newTask.repeatSettings.endDate),I(4),R("ngModel",e.newTask.repeatSettings.businessDaysOnly),I(4),R("ngModel",e.excludeDate),I(3),R("ngForOf",e.newTask.repeatSettings.excludeDates)}}const NCe=function(n){return{selected:n}},LCe=function(n){return{"background-color":n}};function VCe(n,t){if(1&n){const e=je();y(0,"div",37),G("click",function(){const s=J(e).$implicit;return ee(V(2).selectColor(s))}),w()}if(2&n){const e=t.$implicit,i=V(2);R("ngClass",nn(2,NCe,i.newTask.tagColor===e))("ngStyle",nn(4,LCe,e))}}function BCe(n,t){if(1&n){const e=je();y(0,"div",1)(1,"div",2)(2,"h2",3),S(3,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w(),y(4,"div",4)(5,"button",5),G("click",function(){return J(e),ee(V().saveTask())}),S(6,"\u4fdd\u5b58"),w(),y(7,"button",5),G("click",function(){return J(e),ee(V().cancel())}),S(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()(),y(9,"div",6)(10,"span",7),S(11,"\u30bf\u30a4\u30c8\u30eb:"),w(),y(12,"span",8)(13,"input",9),G("ngModelChange",function(r){return J(e),ee(V().newTask.title=r)}),w()()(),y(14,"div",6)(15,"span",7),S(16,"\u8aac\u660e:"),w(),y(17,"span",8)(18,"textarea",10),G("ngModelChange",function(r){return J(e),ee(V().newTask.description=r)}),w()()(),y(19,"div",6)(20,"span",7),S(21,"\u958b\u59cb\u65e5\u6642:"),w(),y(22,"span",8)(23,"input",11),G("ngModelChange",function(r){return J(e),ee(V().newTask.startDateTime=r)}),w()()(),y(24,"div",6)(25,"span",7),S(26,"\u7d42\u4e86\u65e5\u6642:"),w(),y(27,"span",8)(28,"input",11),G("ngModelChange",function(r){return J(e),ee(V().newTask.endDateTime=r)}),w()()(),y(29,"div",6)(30,"span",7),S(31,"\u30bf\u30b9\u30af\u306e\u9577\u3055 (\u5206):"),w(),y(32,"span",8)(33,"input",12),G("ngModelChange",function(r){return J(e),ee(V().newTask.duration=r)}),w()()(),ce(34,RCe,7,3,"div",13),ce(35,FCe,37,6,"div",13),y(36,"div",6)(37,"span",7),S(38,"\u512a\u5148\u5ea6:"),w(),y(39,"span",8)(40,"select",14),G("ngModelChange",function(r){return J(e),ee(V().newTask.priority=r)}),y(41,"option",15),S(42,"\u4f4e"),w(),y(43,"option",16),S(44,"\u4e2d"),w(),y(45,"option",17),S(46,"\u9ad8"),w()()()(),y(47,"div",6)(48,"span",7),S(49,"\u30bf\u30b0:"),w(),y(50,"span",8)(51,"input",18),G("ngModelChange",function(r){return J(e),ee(V().newTask.tag=r)}),w()()(),y(52,"div",6)(53,"span",7),S(54,"\u30bf\u30b0\u306e\u8272:"),w(),y(55,"span",8)(56,"div",19),ce(57,VCe,1,6,"div",20),w()()()()}if(2&n){const e=V();I(13),R("ngModel",e.newTask.title),I(5),R("ngModel",e.newTask.description),I(5),R("ngModel",e.newTask.startDateTime),I(5),R("ngModel",e.newTask.endDateTime),I(5),R("ngModel",e.newTask.duration),I(1),R("ngIf",e.newTask.reminderTime),I(1),R("ngIf",e.newTask.repeatSettings),I(5),R("ngModel",e.newTask.priority),I(11),R("ngModel",e.newTask.tag),I(6),R("ngForOf",e.colors)}}let jCe=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this.taskSetService=i,this.data=r,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.excludeDate="",this.newTask={id:"",title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",duration:0,tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",daysOffsetFromEnd:1,endDate:"",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:0,unit:"\u5206"},userId:""}}ngOnInit(){const e=this.taskSetService.getCurrentUserId();e&&(this.newTask.userId=e)}saveTask(){var e=this;return(0,me.Z)(function*(){try{yield e.taskSetService.addTaskToTaskSet(e.data.taskSetId,e.newTask),e.dialogRef.close(e.newTask)}catch(i){console.error("Failed to save task:",i)}})()}cancel(){this.dialogRef.close()}selectColor(e){this.newTask.tagColor=e}addExcludeDate(){this.excludeDate&&(this.newTask.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(e){this.newTask.repeatSettings?.excludeDates&&(this.newTask.repeatSettings.excludeDates=this.newTask.repeatSettings.excludeDates.filter(i=>i!==e))}static#e=this.\u0275fac=function(i){return new(i||n)(z($a),z(wP),z(su))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-task-set-add"]],standalone:!0,features:[wi],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local","disabled","",3,"ngModel","ngModelChange"],["type","number","placeholder","\u30bf\u30b9\u30af\u306e\u9577\u3055",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"]],template:function(i,r){1&i&&ce(0,BCe,58,10,"div",0),2&i&&R("ngIf",r.newTask)},dependencies:[Cn,Ir,Ci,nr,Lo,ar,Ll,Vl,sr,iu,za,fa,or,Mp,qi]})}return n})();class UCe{constructor(t){this._box=t,this._destroyed=new se,this._resizeSubject=new se,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new ft(e=>{const i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(vn(e=>e.some(i=>i.target===t)),qk({bufferSize:1,refCount:!0}),rr(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let zCe=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=Ve(it)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new UCe(r)),this._observers.get(r).observe(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const HCe=["notch"],$Ce=["matFormFieldNotchedOutline",""],WCe=["*"],qCe=["textField"],GCe=["iconPrefixContainer"],YCe=["textPrefixContainer"];function ZCe(n,t){1&n&&$t(0,"span",19)}function KCe(n,t){if(1&n&&(y(0,"label",17),sa(1,1),ce(2,ZCe,1,0,"span",18),w()),2&n){const e=V(2);R("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),zn("for",e._control.id),I(2),R("ngIf",!e.hideRequiredMarker&&e._control.required)}}function QCe(n,t){1&n&&ce(0,KCe,3,5,"label",16),2&n&&R("ngIf",V()._hasFloatingLabel())}function XCe(n,t){1&n&&$t(0,"div",20)}function JCe(n,t){}function exe(n,t){1&n&&ce(0,JCe,0,0,"ng-template",22),2&n&&(V(2),R("ngTemplateOutlet",er(1)))}function txe(n,t){if(1&n&&(y(0,"div",21),ce(1,exe,1,1,"ng-template",9),w()),2&n){const e=V();R("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),I(1),R("ngIf",!e._forceDisplayInfixLabel())}}function nxe(n,t){1&n&&(y(0,"div",23,24),sa(2,2),w())}function ixe(n,t){1&n&&(y(0,"div",25,26),sa(2,3),w())}function rxe(n,t){}function sxe(n,t){1&n&&ce(0,rxe,0,0,"ng-template",22),2&n&&(V(),R("ngTemplateOutlet",er(1)))}function oxe(n,t){1&n&&(y(0,"div",27),sa(1,4),w())}function axe(n,t){1&n&&(y(0,"div",28),sa(1,5),w())}function lxe(n,t){1&n&&$t(0,"div",29)}function cxe(n,t){1&n&&(y(0,"div",30),sa(1,6),w()),2&n&&R("@transitionMessages",V()._subscriptAnimationState)}function uxe(n,t){if(1&n&&(y(0,"mat-hint",34),S(1),w()),2&n){const e=V(2);R("id",e._hintLabelId),I(1),qe(e.hintLabel)}}function dxe(n,t){if(1&n&&(y(0,"div",31),ce(1,uxe,2,2,"mat-hint",32),sa(2,7),$t(3,"div",33),sa(4,8),w()),2&n){const e=V();R("@transitionMessages",e._subscriptAnimationState),I(1),R("ngIf",e.hintLabel)}}const hxe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],fxe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let $E=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ke({type:n,selectors:[["mat-label"]]})}return n})();const pxe=new Ce("MatError");let mxe=0,mW=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+mxe++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ke({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(p_("id",r.id),zn("align",null),Jn("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return n})();const gxe=new Ce("MatPrefix"),_xe=new Ce("MatSuffix"),gW=new Ce("FloatingLabelParent");let _W=(()=>{class n{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Ve(zCe),this._ngZone=Ve(it),this._parent=Ve(gW),this._resizeSubscription=new St}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function vxe(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt))};static#t=this.\u0275dir=Ke({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&Jn("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const vW="mdc-line-ripple--active",WE="mdc-line-ripple--deactivating";let yW=(()=>{class n{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(WE);"opacity"===r.propertyName&&o&&s.remove(vW,WE)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(WE),e.add(vW)}deactivate(){this._elementRef.nativeElement.classList.add(WE)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(it))};static#t=this.\u0275dir=Ke({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),bW=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(it))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&Na(HCe,5),2&i){let s;Hi(s=$i())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&Jn("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:$Ce,ngContentSelectors:WCe,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(US(),$t(0,"div",0),y(1,"div",1,2),sa(3),w(),$t(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const yxe={transitionMessages:xp("transitionMessages",[Jc("enter",os({opacity:1,transform:"translateY(0%)"})),Ba("void => enter",[os({opacity:0,transform:"translateY(-5px)"}),Fl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let wW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ke({type:n})}return n})();const CW=new Ce("MatFormField"),bxe=new Ce("MAT_FORM_FIELD_DEFAULT_OPTIONS");let xW=0,TW=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=jo(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,r,s,o,a,l,c){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+xW++,this._hintLabelId="mat-mdc-hint-"+xW++,this._subscriptAnimationState="",this._destroyed=new se,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(rr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),we(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(rr(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(rr(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(Sl),z(it),z(Pp),z(po),z(bxe,8),z(Nf,8),z(Ct))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(Oo(s,$E,5),Oo(s,$E,7),Oo(s,wW,5),Oo(s,gxe,5),Oo(s,_xe,5),Oo(s,pxe,5),Oo(s,mW,5)),2&i){let o;Hi(o=$i())&&(r._labelChildNonStatic=o.first),Hi(o=$i())&&(r._labelChildStatic=o.first),Hi(o=$i())&&(r._formFieldControl=o.first),Hi(o=$i())&&(r._prefixChildren=o),Hi(o=$i())&&(r._suffixChildren=o),Hi(o=$i())&&(r._errorChildren=o),Hi(o=$i())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(Na(qCe,5),Na(GCe,5),Na(YCe,5),Na(_W,5),Na(bW,5),Na(yW,5)),2&i){let s;Hi(s=$i())&&(r._textField=s.first),Hi(s=$i())&&(r._iconPrefixContainer=s.first),Hi(s=$i())&&(r._textPrefixContainer=s.first),Hi(s=$i())&&(r._floatingLabel=s.first),Hi(s=$i())&&(r._notchedOutline=s.first),Hi(s=$i())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&Jn("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[ln([{provide:CW,useExisting:n},{provide:gW,useExisting:n}])],ngContentSelectors:fxe,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(i,r){1&i&&(US(hxe),ce(0,QCe,1,1,"ng-template",null,0,uo),y(2,"div",1,2),G("click",function(o){return r._control.onContainerClick(o)}),ce(4,XCe,1,0,"div",3),y(5,"div",4),ce(6,txe,2,2,"div",5),ce(7,nxe,3,0,"div",6),ce(8,ixe,3,0,"div",7),y(9,"div",8),ce(10,sxe,1,1,"ng-template",9),sa(11),w(),ce(12,oxe,2,0,"div",10),ce(13,axe,2,0,"div",11),w(),ce(14,lxe,1,0,"div",12),w(),y(15,"div",13),ce(16,cxe,2,1,"div",14),ce(17,dxe,5,2,"div",15),w()),2&i&&(I(2),Jn("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),I(2),R("ngIf",!r._hasOutline()&&!r._control.disabled),I(2),R("ngIf",r._hasOutline()),I(1),R("ngIf",r._hasIconPrefix),I(1),R("ngIf",r._hasTextPrefix),I(2),R("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),I(2),R("ngIf",r._hasTextSuffix),I(1),R("ngIf",r._hasIconSuffix),I(1),R("ngIf",!r._hasOutline()),I(1),Jn("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),R("ngSwitch",r._getDisplayedMessages()),I(1),R("ngSwitchCase","error"),I(1),R("ngSwitchCase","hint"))},dependencies:[nr,fo,Hw,S3,mW,_W,bW,yW],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[yxe.transitionMessages]},changeDetection:0})}return n})(),Mm=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[Ar,Cn,kj,Ar]})}return n})();const SW=ru({passive:!0});let xxe=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return yi;const i=Gi(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new se,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,SW),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,SW)}}),s}stopMonitoring(e){const i=Gi(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(po),ie(it))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Exe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})();const Dxe=new Ce("MAT_INPUT_VALUE_ACCESSOR"),Txe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Sxe=0;const Ixe=Nue(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new se}});let IW=(()=>{class n extends Ixe{get disabled(){return this._disabled}set disabled(e){this._disabled=jo(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Dle.required)??!1}set required(e){this._required=jo(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&pj().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=jo(e)}constructor(e,i,r,s,o,a,l,c,u,f){super(a,s,o,r),this._elementRef=e,this._platform=i,this._autofillMonitor=c,this._formField=f,this._uid="mat-input-"+Sxe++,this.focused=!1,this.stateChanges=new se,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(b=>pj().has(b)),this._iOSKeyupListener=b=>{const x=b.target;!x.value&&0===x.selectionStart&&0===x.selectionEnd&&(x.setSelectionRange(1,1),x.setSelectionRange(0,0))};const g=this._elementRef.nativeElement,v=g.nodeName.toLowerCase();this._inputValueAccessor=l||g,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===v,this._isTextarea="textarea"===v,this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Txe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static#e=this.\u0275fac=function(i){return new(i||n)(z(Yt),z(po),z(Nl,10),z(Ha,8),z(HC,8),z(Vue),z(Dxe,10),z(xxe),z(it),z(CW,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&G("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(p_("id",r.id)("disabled",r.disabled)("required",r.required),zn("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Jn("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[ln([{provide:wW,useExisting:n}]),tn,Vi]})}return n})(),CP=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[Ar,Mm,Mm,Exe,Ar]})}return n})(),xP=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i,this.userId=null,this.authService.user$.subscribe(r=>{this.userId=r?.uid||null})}getUserIntervalSetsCollection(){if(!this.userId)throw new Error("User ID is not available");return this.firestore.collection(`users/${this.userId}/intervalSets`)}getIntervalSets(){return this.getUserIntervalSetsCollection().valueChanges({idField:"id"})}createIntervalSet(e){return this.getUserIntervalSetsCollection().add(e)}updateIntervalSet(e){return this.getUserIntervalSetsCollection().doc(e.id).update(e)}deleteIntervalSet(e){return this.getUserIntervalSetsCollection().doc(e.id).delete()}addIntervalToIntervalSet(e,i){if(!this.userId)return Promise.reject("User ID is not available");const r=this.firestore.createId();return i.id=r,this.firestore.collection(`users/${this.userId}/intervalSets/${e}/intervals`).doc(r).set(i)}getIntervalsForIntervalSet(e){if(!this.userId)throw new Error("User ID is not available");return this.firestore.collection(`users/${this.userId}/intervalSets/${e}/intervals`).valueChanges({idField:"id"})}deleteIntervalFromIntervalSet(e,i){return this.userId?this.firestore.collection(`users/${this.userId}/intervalSets/${e}/intervals`).doc(i).delete():Promise.reject("User ID is not available")}updateIntervalInIntervalSet(e,i){return this.userId?this.firestore.collection(`users/${this.userId}/intervalSets/${e}/intervals`).doc(i.id).update(i):Promise.reject("User ID is not available")}waitForUserId(){return new Promise((e,i)=>{if(this.userId)e();else{const r=this.authService.user$.subscribe(s=>{s?.uid&&(this.userId=s.uid,r.unsubscribe(),e())})}})}getCurrentUserId(){return this.userId}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ja),ie(Ks))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Axe=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this.data=i,this.intervalSetService=r,this.newInterval={name:"",years:0,months:0,weeks:0,days:0,hours:0,minutes:0}}addInterval(){this.intervalSetService.addIntervalToIntervalSet(this.data.intervalSetId,this.newInterval).then(()=>{this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(i){return new(i||n)(z($a),z(su),z(xP))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-interval-set-add"]],standalone:!0,features:[wi],decls:36,vars:7,consts:[[3,"ngSubmit"],["appearance","fill"],["matInput","","placeholder","\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u540d","name","intervalName","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalYears",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalMonths",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalWeeks",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalDays",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalHours",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalMinutes",3,"ngModel","ngModelChange"],[1,"button-group"],["mat-button","","type","submit"],["mat-button","","type","button",3,"click"]],template:function(i,r){1&i&&(y(0,"h2"),S(1,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u3092\u30bb\u30c3\u30c8\u306b\u8ffd\u52a0"),w(),y(2,"form",0),G("ngSubmit",function(){return r.addInterval()}),y(3,"mat-form-field",1)(4,"mat-label"),S(5,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u540d"),w(),y(6,"input",2),G("ngModelChange",function(o){return r.newInterval.name=o}),w()(),y(7,"mat-form-field",1)(8,"mat-label"),S(9,"\u5e74"),w(),y(10,"input",3),G("ngModelChange",function(o){return r.newInterval.years=o}),w()(),y(11,"mat-form-field",1)(12,"mat-label"),S(13,"\u6708"),w(),y(14,"input",4),G("ngModelChange",function(o){return r.newInterval.months=o}),w()(),y(15,"mat-form-field",1)(16,"mat-label"),S(17,"\u9031"),w(),y(18,"input",5),G("ngModelChange",function(o){return r.newInterval.weeks=o}),w()(),y(19,"mat-form-field",1)(20,"mat-label"),S(21,"\u65e5"),w(),y(22,"input",6),G("ngModelChange",function(o){return r.newInterval.days=o}),w()(),y(23,"mat-form-field",1)(24,"mat-label"),S(25,"\u6642\u9593"),w(),y(26,"input",7),G("ngModelChange",function(o){return r.newInterval.hours=o}),w()(),y(27,"mat-form-field",1)(28,"mat-label"),S(29,"\u5206"),w(),y(30,"input",8),G("ngModelChange",function(o){return r.newInterval.minutes=o}),w()(),y(31,"div",9)(32,"button",10),S(33,"\u8ffd\u52a0"),w(),y(34,"button",11),G("click",function(){return r.onCancel()}),S(35,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()()),2&i&&(I(6),R("ngModel",r.newInterval.name),I(4),R("ngModel",r.newInterval.years),I(4),R("ngModel",r.newInterval.months),I(4),R("ngModel",r.newInterval.weeks),I(4),R("ngModel",r.newInterval.days),I(4),R("ngModel",r.newInterval.hours),I(4),R("ngModel",r.newInterval.minutes))},dependencies:[Mm,TW,$E,CP,IW,tx,ar,Wd,sr,iu,or,Hd,Bl,qi,Ha,Cn],styles:["[_nghost-%COMP%]{display:block;padding:20px;box-sizing:border-box;width:100%;max-width:400px;margin:0 auto}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}mat-form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}button[_ngcontent-%COMP%]{width:100px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}[_nghost-%COMP%]{overflow-y:auto;max-height:100vh}"]})}return n})(),kxe=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this.data=i,this.intervalSetService=r,this.interval={...i.interval}}saveInterval(){this.intervalSetService.updateIntervalInIntervalSet(this.data.intervalSetId,this.interval).then(()=>{this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(i){return new(i||n)(z($a),z(su),z(xP))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-interval-set-edit"]],standalone:!0,features:[wi],decls:36,vars:7,consts:[[3,"ngSubmit"],["appearance","fill"],["matInput","","placeholder","\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u540d","name","intervalName","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalYears",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalMonths",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalWeeks",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalDays",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalHours",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","0","name","intervalMinutes",3,"ngModel","ngModelChange"],[1,"button-group"],["mat-button","","type","submit"],["mat-button","","type","button",3,"click"]],template:function(i,r){1&i&&(y(0,"h2"),S(1,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u3092\u7de8\u96c6"),w(),y(2,"form",0),G("ngSubmit",function(){return r.saveInterval()}),y(3,"mat-form-field",1)(4,"mat-label"),S(5,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u540d"),w(),y(6,"input",2),G("ngModelChange",function(o){return r.interval.name=o}),w()(),y(7,"mat-form-field",1)(8,"mat-label"),S(9,"\u5e74"),w(),y(10,"input",3),G("ngModelChange",function(o){return r.interval.years=o}),w()(),y(11,"mat-form-field",1)(12,"mat-label"),S(13,"\u6708"),w(),y(14,"input",4),G("ngModelChange",function(o){return r.interval.months=o}),w()(),y(15,"mat-form-field",1)(16,"mat-label"),S(17,"\u9031"),w(),y(18,"input",5),G("ngModelChange",function(o){return r.interval.weeks=o}),w()(),y(19,"mat-form-field",1)(20,"mat-label"),S(21,"\u65e5"),w(),y(22,"input",6),G("ngModelChange",function(o){return r.interval.days=o}),w()(),y(23,"mat-form-field",1)(24,"mat-label"),S(25,"\u6642\u9593"),w(),y(26,"input",7),G("ngModelChange",function(o){return r.interval.hours=o}),w()(),y(27,"mat-form-field",1)(28,"mat-label"),S(29,"\u5206"),w(),y(30,"input",8),G("ngModelChange",function(o){return r.interval.minutes=o}),w()(),y(31,"div",9)(32,"button",10),S(33,"\u4fdd\u5b58"),w(),y(34,"button",11),G("click",function(){return r.onCancel()}),S(35,"\u30ad\u30e3\u30f3\u30bb\u30eb"),w()()()),2&i&&(I(6),R("ngModel",r.interval.name),I(4),R("ngModel",r.interval.years),I(4),R("ngModel",r.interval.months),I(4),R("ngModel",r.interval.weeks),I(4),R("ngModel",r.interval.days),I(4),R("ngModel",r.interval.hours),I(4),R("ngModel",r.interval.minutes))},dependencies:[Mm,TW,$E,CP,IW,tx,ar,Wd,sr,iu,or,Hd,Bl,qi,Ha,Cn],styles:["[_nghost-%COMP%]{display:block;padding:20px;box-sizing:border-box;width:100%;max-width:400px;margin:0 auto}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}mat-form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}button[_ngcontent-%COMP%]{width:100px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}[_nghost-%COMP%]{overflow-y:auto;max-height:100vh}"]})}return n})();function Mxe(n,t){if(1&n&&(y(0,"option",14),S(1),w()),2&n){const e=t.$implicit;R("value",e.id),I(1),qe(e.name)}}function Rxe(n,t){if(1&n){const e=je();y(0,"div")(1,"input",20),G("ngModelChange",function(r){return J(e),ee(V(2).$implicit.name=r)})("blur",function(){J(e);const r=V(2).$implicit;return ee(V().saveTaskSetName(r))})("keydown.enter",function(){J(e);const r=V(2).$implicit;return ee(V().saveTaskSetName(r))}),w()()}if(2&n){const e=V(2).$implicit;I(1),R("ngModel",e.name)}}function Pxe(n,t){if(1&n){const e=je();y(0,"div")(1,"h3",21),G("click",function(){J(e);const r=V(2).$implicit;return ee(V().editTaskSetName(r))}),S(2),w()()}if(2&n){const e=V(2).$implicit;I(2),qe(e.name)}}function Oxe(n,t){if(1&n){const e=je();y(0,"div",17)(1,"input",18),G("ngModelChange",function(r){return J(e),ee(V().$implicit.selected=r)}),w(),ce(2,Rxe,2,1,"div",12),ce(3,Pxe,3,1,"div",12),y(4,"button",3),G("click",function(){J(e);const r=V().$implicit;return ee(V().openAddTaskToSetDialog(r))}),S(5,"\uff0b\u30bb\u30c3\u30c8\u306b\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),w(),y(6,"button",19),G("click",function(){J(e);const r=V().$implicit;return ee(V().deleteTaskSet(r))}),S(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u30bb\u30c3\u30c8\u3092\u524a\u9664"),w()()}if(2&n){const e=V().$implicit;I(1),R("ngModel",e.selected),I(1),R("ngIf",e.isEditing),I(1),R("ngIf",!e.isEditing)}}function Fxe(n,t){if(1&n){const e=je();y(0,"li",28)(1,"div",29)(2,"input",18),G("ngModelChange",function(r){return ee(J(e).$implicit.selected=r)}),w(),y(3,"a",30),G("click",function(){const s=J(e).$implicit;return ee(V(3).openTaskDetailDialog(s))}),y(4,"div",31),S(5),w(),y(6,"div",32)(7,"span",33),S(8),w(),y(9,"span",34),S(10),w(),y(11,"span",35),S(12),w(),y(13,"span",36),S(14),Zt(15,"date"),w(),y(16,"span",37),S(17),Zt(18,"date"),w(),y(19,"span",38),S(20),w(),$t(21,"span",39),w()()()()}if(2&n){const e=t.$implicit,i=V(3);I(2),R("ngModel",e.selected),I(3),qe(e.title),I(3),qe(e.status),I(1),R("ngClass",e.priority),I(1),qe(i.getPriorityLabel(e.priority)),I(2),qe(e.duration),I(2),qe(ei(15,11,e.startDateTime,"short")),I(3),qe(ei(18,14,e.endDateTime,"short")),I(3),qe(e.tag),I(1),Cs("background-color",e.tagColor)}}function Nxe(n,t){if(1&n){const e=je();y(0,"ul",22)(1,"li",23)(2,"div",24)(3,"span",25),S(4,"\u9078\u629e"),w(),y(5,"span",25),S(6,"\u30bf\u30a4\u30c8\u30eb"),w(),y(7,"span",25),S(8,"\u30b9\u30c6\u30fc\u30bf\u30b9"),w(),y(9,"span",25),S(10,"\u512a\u5148\u5ea6"),w(),y(11,"span",25),S(12,"\u30bf\u30b9\u30af\u306e\u9577\u3055 (\u5206)"),w(),y(13,"span",25),S(14,"\u958b\u59cb\u65e5\u6642"),w(),y(15,"span",25),S(16,"\u7d42\u4e86\u65e5\u6642"),w(),y(17,"span",25),S(18,"\u30bf\u30b0"),w(),y(19,"span",25),S(20,"\u30bf\u30b0\u306e\u8272"),w()()(),ce(21,Fxe,22,17,"li",26),y(22,"li",27)(23,"button",19),G("click",function(){return J(e),ee(V(2).deleteSelectedTasks())}),S(24,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),w()()()}if(2&n){const e=V(2);I(21),R("ngForOf",e.tasks)}}function Lxe(n,t){if(1&n&&(y(0,"div"),ce(1,Oxe,8,3,"div",15),ce(2,Nxe,25,1,"ul",16),w()),2&n){const e=t.$implicit,i=V();I(1),R("ngIf",i.selectedTaskSetId===e.id),I(1),R("ngIf",i.selectedTaskSet&&i.selectedTaskSet.id===e.id)}}function Vxe(n,t){if(1&n&&(y(0,"option",14),S(1),w()),2&n){const e=t.$implicit;R("value",e.id),I(1),qe(e.name)}}function Bxe(n,t){if(1&n){const e=je();y(0,"div")(1,"input",20),G("ngModelChange",function(r){return J(e),ee(V(2).selectedIntervalSet.name=r)})("blur",function(){J(e);const r=V(2);return ee(r.saveIntervalSetName(r.selectedIntervalSet))})("keydown.enter",function(){J(e);const r=V(2);return ee(r.saveIntervalSetName(r.selectedIntervalSet))}),w()()}if(2&n){const e=V(2);I(1),R("ngModel",e.selectedIntervalSet.name)}}function jxe(n,t){if(1&n){const e=je();y(0,"div")(1,"h3",21),G("click",function(){J(e);const r=V(2);return ee(r.editIntervalSetName(r.selectedIntervalSet))}),S(2),w()()}if(2&n){const e=V(2);I(2),qe(e.selectedIntervalSet.name)}}function Uxe(n,t){if(1&n&&(Dl(0),S(1),Tl()),2&n){const e=V().$implicit;I(1),On("\u5e74: ",e.years,",")}}function zxe(n,t){if(1&n&&(Dl(0),S(1),Tl()),2&n){const e=V().$implicit;I(1),On("\u6708: ",e.months,",")}}function Hxe(n,t){if(1&n&&(Dl(0),S(1),Tl()),2&n){const e=V().$implicit;I(1),On("\u9031: ",e.weeks,",")}}function $xe(n,t){if(1&n&&(Dl(0),S(1),Tl()),2&n){const e=V().$implicit;I(1),On("\u65e5: ",e.days,",")}}function Wxe(n,t){if(1&n&&(Dl(0),S(1),Tl()),2&n){const e=V().$implicit;I(1),On("\u6642\u9593: ",e.hours,",")}}function qxe(n,t){if(1&n&&(Dl(0),S(1),Tl()),2&n){const e=V().$implicit;I(1),On("\u5206: ",e.minutes,"")}}function Gxe(n,t){if(1&n){const e=je();y(0,"li",43),G("click",function(){const s=J(e).$implicit;return ee(V(2).openEditIntervalDialog(s))}),y(1,"div",44)(2,"input",45),G("ngModelChange",function(r){return ee(J(e).$implicit.selected=r)}),w(),y(3,"span",46),S(4),w(),y(5,"span",47),ce(6,Uxe,2,1,"ng-container",12),ce(7,zxe,2,1,"ng-container",12),ce(8,Hxe,2,1,"ng-container",12),ce(9,$xe,2,1,"ng-container",12),ce(10,Wxe,2,1,"ng-container",12),ce(11,qxe,2,1,"ng-container",12),w()()()}if(2&n){const e=t.$implicit;I(2),R("ngModel",e.selected),I(2),qe(e.name),I(2),R("ngIf",e.years),I(1),R("ngIf",e.months),I(1),R("ngIf",e.weeks),I(1),R("ngIf",e.days),I(1),R("ngIf",e.hours),I(1),R("ngIf",e.minutes)}}function Yxe(n,t){if(1&n){const e=je();y(0,"div")(1,"div",40),ce(2,Bxe,2,1,"div",12),ce(3,jxe,3,1,"div",12),y(4,"button",3),G("click",function(){J(e);const r=V();return ee(r.openAddIntervalToSetDialog(r.selectedIntervalSet))}),S(5,"\uff0b\u30bb\u30c3\u30c8\u306b\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u3092\u8ffd\u52a0"),w(),y(6,"button",19),G("click",function(){J(e);const r=V();return ee(r.deleteIntervalSet(r.selectedIntervalSet))}),S(7,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30bb\u30c3\u30c8\u3092\u524a\u9664"),w()(),y(8,"ul",41),ce(9,Gxe,12,8,"li",42),w(),y(10,"button",19),G("click",function(){return J(e),ee(V().deleteSelectedIntervals())}),S(11,"\u9078\u629e\u3057\u305f\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u3092\u524a\u9664"),w()()}if(2&n){const e=V();I(2),R("ngIf",e.selectedIntervalSet.isEditing),I(1),R("ngIf",!e.selectedIntervalSet.isEditing),I(6),R("ngForOf",e.intervals)}}const Zxe=[{path:"",redirectTo:"/calendar",pathMatch:"full"},{path:"calendar",component:Vge,canActivate:[Ql]},{path:"projects",component:o_e,canActivate:[Ql]},{path:"project/:id",component:E$,canActivate:[Ql]},{path:"tasks",component:q$,canActivate:[Ql]},{path:"task/:id",component:ry,canActivate:[Ql]},{path:"login",component:H_e},{path:"register",component:q_e},{path:"reset-password",component:Y_e},{path:"profile",component:Z_e,canActivate:[Ql]},{path:"user-search",component:J_e,canActivate:[Ql]},{path:"project-progress",component:yCe,canActivate:[Ql]},{path:"task-sets",component:(()=>{class n{constructor(e,i,r){this.taskSetService=e,this.intervalSetService=i,this.dialog=r,this.taskSets=[],this.intervalSets=[],this.newTaskSetName="",this.newIntervalSetName="",this.selectedTaskSetId=null,this.selectedTaskSet=null,this.selectedIntervalSetId=null,this.selectedIntervalSet=null,this.intervals=[],this.tasks=[]}ngOnInit(){Promise.all([this.taskSetService.waitForUserId(),this.intervalSetService.waitForUserId()]).then(()=>{this.loadTaskSets(),this.loadIntervalSets()})}loadTaskSets(){this.taskSetService.getTaskSets().subscribe(e=>{this.taskSets=e,this.taskSets.forEach(i=>i.isEditing=!1),this.selectedTaskSetId&&(this.selectedTaskSet=this.taskSets.find(i=>i.id===this.selectedTaskSetId)||null,this.selectedTaskSet&&this.loadTasksForTaskSet(this.selectedTaskSet.id))})}loadIntervalSets(){this.intervalSetService.getIntervalSets().subscribe(e=>{this.intervalSets=e,this.intervalSets.forEach(i=>i.isEditing=!1),this.selectedIntervalSetId&&(this.selectedIntervalSet=this.intervalSets.find(i=>i.id===this.selectedIntervalSetId)||null,this.selectedIntervalSet&&this.loadIntervalsForIntervalSet(this.selectedIntervalSet.id))})}createTaskSet(){this.taskSetService.createTaskSet({id:"",name:this.newTaskSetName,tasks:[]}).then(()=>{this.newTaskSetName="",this.loadTaskSets()})}deleteTaskSet(e){this.taskSetService.deleteTaskSet(e).then(()=>{this.loadTaskSets()})}selectTaskSet(e){this.selectedTaskSet=e,this.loadTasksForTaskSet(e.id)}loadTasksForTaskSet(e){this.taskSetService.getTasksForTaskSet(e).subscribe(i=>{this.tasks=i})}openAddTaskToSetDialog(e){this.dialog.open(jCe,{width:"400px",data:{taskSetId:e.id}}).afterClosed().subscribe(r=>{r&&this.loadTasksForTaskSet(e.id)})}openTaskDetailDialog(e){this.dialog.open(kCe,{width:"600px",data:{task:e,taskSetId:this.selectedTaskSet?.id}}).afterClosed().subscribe(r=>{r&&this.selectedTaskSet&&this.loadTasksForTaskSet(this.selectedTaskSet.id)})}createIntervalSet(){this.intervalSetService.createIntervalSet({id:"",name:this.newIntervalSetName,intervals:[]}).then(()=>{this.newIntervalSetName="",this.loadIntervalSets()})}deleteIntervalSet(e){this.intervalSetService.deleteIntervalSet(e).then(()=>{this.loadIntervalSets()})}selectIntervalSet(e){this.selectedIntervalSet=e,this.loadIntervalsForIntervalSet(e.id)}loadIntervalsForIntervalSet(e){this.intervalSetService.getIntervalsForIntervalSet(e).subscribe(i=>{this.intervals=i})}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}deleteSelectedTasks(){if(this.selectedTaskSet){const i=this.tasks.filter(r=>r.selected).map(r=>this.taskSetService.deleteTaskFromTaskSet(this.selectedTaskSet.id,r.id));Promise.all(i).then(()=>{this.loadTasksForTaskSet(this.selectedTaskSet.id)})}}deleteSelectedIntervals(){if(this.selectedIntervalSet){const i=this.intervals.filter(r=>r.selected).map(r=>this.intervalSetService.deleteIntervalFromIntervalSet(this.selectedIntervalSet.id,r.id));Promise.all(i).then(()=>{this.loadIntervalsForIntervalSet(this.selectedIntervalSet.id)})}}editTaskSetName(e){e.isEditing=!0}saveTaskSetName(e){e.isEditing=!1,this.taskSetService.updateTaskSet(e).then(()=>{this.loadTaskSets()})}editIntervalSetName(e){e.isEditing=!0}saveIntervalSetName(e){e.isEditing=!1,this.intervalSetService.updateIntervalSet(e).then(()=>{this.loadIntervalSets()})}onTaskSetChange(){const e=this.taskSets.find(i=>i.id===this.selectedTaskSetId)||null;e&&(this.selectedTaskSet=e,this.loadTasksForTaskSet(e.id))}onIntervalSetChange(){this.selectedIntervalSet=this.intervalSets.find(e=>e.id===this.selectedIntervalSetId)||null,this.selectedIntervalSet&&this.loadIntervalsForIntervalSet(this.selectedIntervalSet.id)}openAddIntervalToSetDialog(e){this.dialog.open(Axe,{width:"400px",data:{intervalSetId:e.id}}).afterClosed().subscribe(r=>{r&&this.loadIntervalsForIntervalSet(e.id)})}openEditIntervalDialog(e){this.dialog.open(kxe,{width:"400px",data:{intervalSetId:this.selectedIntervalSet?.id,interval:e}}).afterClosed().subscribe(r=>{r&&this.loadIntervalsForIntervalSet(this.selectedIntervalSet?.id||"")})}static#e=this.\u0275fac=function(i){return new(i||n)(z(wP),z(xP),z(Fp))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-task-set"]],standalone:!0,features:[wi],decls:21,vars:8,consts:[[1,"task-list-container"],[1,"task-actions"],["type","text","placeholder","\u65b0\u3057\u3044\u30bf\u30b9\u30af\u30bb\u30c3\u30c8\u306e\u540d\u524d",3,"ngModel","ngModelChange"],[1,"add-task-btn",3,"click"],[1,"task-set-selection"],["for","taskSetDropdown"],["id","taskSetDropdown",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"interval-set-selection"],["for","intervalSetDropdown"],["id","intervalSetDropdown",3,"ngModel","ngModelChange","change"],[4,"ngIf"],["type","text","placeholder","\u65b0\u3057\u3044\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30bb\u30c3\u30c8\u306e\u540d\u524d",3,"ngModel","ngModelChange"],[3,"value"],["class","task-set-header",4,"ngIf"],["class","task-list",4,"ngIf"],[1,"task-set-header"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],[1,"action-btn",3,"click"],["type","text",3,"ngModel","ngModelChange","blur","keydown.enter"],[3,"click"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-footer"],[1,"task-item"],[1,"task-item-content"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-duration"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],[1,"interval-set-header"],[1,"interval-list"],["class","interval-item",3,"click",4,"ngFor","ngForOf"],[1,"interval-item",3,"click"],[1,"interval-item-content"],["type","checkbox",1,"interval-checkbox",3,"ngModel","ngModelChange"],[1,"interval-name"],[1,"interval-duration"]],template:function(i,r){1&i&&(y(0,"div",0)(1,"div",1)(2,"input",2),G("ngModelChange",function(o){return r.newTaskSetName=o}),w(),y(3,"button",3),G("click",function(){return r.createTaskSet()}),S(4,"\u30bf\u30b9\u30af\u30bb\u30c3\u30c8\u4f5c\u6210"),w()(),y(5,"div",4)(6,"label",5),S(7,"\u30bf\u30b9\u30af\u30ea\u30b9\u30c8\u3092\u9078\u629e:"),w(),y(8,"select",6),G("ngModelChange",function(o){return r.selectedTaskSetId=o})("change",function(){return r.onTaskSetChange()}),ce(9,Mxe,2,2,"option",7),w()(),ce(10,Lxe,3,2,"div",8),y(11,"div",9)(12,"label",10),S(13,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30bb\u30c3\u30c8\u3092\u9078\u629e:"),w(),y(14,"select",11),G("ngModelChange",function(o){return r.selectedIntervalSetId=o})("change",function(){return r.onIntervalSetChange()}),ce(15,Vxe,2,2,"option",7),w()(),ce(16,Yxe,12,3,"div",12),y(17,"div",1)(18,"input",13),G("ngModelChange",function(o){return r.newIntervalSetName=o}),w(),y(19,"button",3),G("click",function(){return r.createIntervalSet()}),S(20,"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30bb\u30c3\u30c8\u4f5c\u6210"),w()()()),2&i&&(I(2),R("ngModel",r.newTaskSetName),I(6),R("ngModel",r.selectedTaskSetId),I(1),R("ngForOf",r.taskSets),I(1),R("ngForOf",r.taskSets),I(4),R("ngModel",r.selectedIntervalSetId),I(1),R("ngForOf",r.intervalSets),I(1),R("ngIf",r.selectedIntervalSet),I(2),R("ngModel",r.newIntervalSetName))},dependencies:[Cn,Ir,Ci,nr,I_,ar,Ll,Vl,sr,za,fa,or,qi,tx],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;max-width:100%;margin:0 auto;overflow:auto;height:100vh}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%], .show-completed[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 10% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 10% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-duration[_ngcontent-%COMP%], .task-start-date[_ngcontent-%COMP%], .task-end-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%], .task-tag-color[_ngcontent-%COMP%]{text-align:center;margin-left:10px}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.interval-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:20px 0 0}.interval-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;align-items:center}.interval-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 40% 25% 5%;width:100%;align-items:center}.interval-checkbox[_ngcontent-%COMP%]{text-align:center}.interval-name[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.interval-duration[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px;font-size:1.2em}.interval-item-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.interval-item-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}"]})}return n})(),canActivate:[Ql]}],Kxe=function(){return["/calendar"]},Qxe=function(){return["/tasks"]},Xxe=function(){return["/task-sets"]},Jxe=function(){return["/projects"]},eEe=function(){return["/user-search"]},tEe=function(){return["/profile"]};let nEe=(()=>{class n{constructor(e,i){this.router=e,this.authService=i,this.title="todo-app",this.router.events.subscribe(r=>{r instanceof Ml&&console.log("\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u307e\u3057\u305f:",r.urlAfterRedirects)})}logClick(e,i){i.preventDefault();const r=this.getPathFromLinkName(e);console.log(`${e}\u30ea\u30f3\u30af\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u307e\u3057\u305f`),this.router.navigate([r]).then(()=>{console.log(`${e}\u30ea\u30f3\u30af\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f`)})}getPathFromLinkName(e){switch(e){case"\u30ab\u30ec\u30f3\u30c0\u30fc":return"/calendar";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8":return"/projects";case"\u30bf\u30b9\u30af\u4e00\u89a7":return"/tasks";case"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb":return"/profile";case"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22":return"/user-search";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u9032\u6357":return"/project-progress/\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u3092\u5165\u529b";case"\u30bf\u30b9\u30af\u30bb\u30c3\u30c8":return"/task-sets";default:return"/"}}logOut(){this.authService.logout().then(()=>{this.router.navigate(["/login"])}).catch(e=>{console.error("\u30ed\u30b0\u30a2\u30a6\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f",e)})}static#e=this.\u0275fac=function(i){return new(i||n)(z(ss),z(Ks))};static#t=this.\u0275cmp=Dt({type:n,selectors:[["app-root"]],standalone:!0,features:[wi],decls:27,vars:12,consts:[[1,"app-container"],[1,"side-nav"],[1,"nav-link",3,"routerLink"],[1,"spacer"],[1,"logout-button",3,"click"],[1,"content"]],template:function(i,r){1&i&&(y(0,"div",0)(1,"div",1)(2,"nav")(3,"ul")(4,"li")(5,"a",2),S(6,"\u30ab\u30ec\u30f3\u30c0\u30fc"),w()(),y(7,"li")(8,"a",2),S(9,"\u30bf\u30b9\u30af\u4e00\u89a7"),w()(),y(10,"li")(11,"a",2),S(12,"\u30bf\u30b9\u30af\u30bb\u30c3\u30c8"),w()(),y(13,"li")(14,"a",2),S(15,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),w()(),y(16,"li")(17,"a",2),S(18,"\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30bf\u30b9\u30af\u691c\u7d22"),w()(),y(19,"li")(20,"a",2),S(21,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),w()()()(),$t(22,"div",3),y(23,"button",4),G("click",function(){return r.logOut()}),S(24,"\u30ed\u30b0\u30a2\u30a6\u30c8"),w()(),y(25,"div",5),$t(26,"router-outlet"),w()()),2&i&&(I(5),R("routerLink",$n(6,Kxe)),I(3),R("routerLink",$n(7,Qxe)),I(3),R("routerLink",$n(8,Xxe)),I(3),R("routerLink",$n(9,Jxe)),I(3),R("routerLink",$n(10,eEe)),I(3),R("routerLink",$n(11,tEe)))},dependencies:[wA,Cn,_p,Od],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw}.side-nav[_ngcontent-%COMP%]{width:200px;background-color:#f8f9fa;display:flex;flex-direction:column;padding:10px;height:100vh;box-sizing:border-box}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0;flex-grow:1}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;display:flex}.nav-link[_ngcontent-%COMP%]{text-decoration:none;padding:5px 10px;color:#000;border-radius:4px;display:flex;align-items:center;justify-content:center;height:18px;flex:1}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.spacer[_ngcontent-%COMP%]{flex-grow:1}.logout-button[_ngcontent-%COMP%]{padding:10px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer;text-align:center;height:40px;display:flex;align-items:center;justify-content:center}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.content[_ngcontent-%COMP%]{flex-grow:1;padding:30px 0 30px 30px;overflow-y:auto;display:flex;flex-direction:column;margin-right:0}"]})}return n})();function AW(n){return new H(3e3,!1)}function Pu(n){switch(n.length){case 0:return new K_;case 1:return n[0];default:return new T4(n)}}function kW(n,t,e=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(t.forEach(l=>{const c=l.get("offset"),u=c==o,f=u&&a||new Map;l.forEach((g,v)=>{let b=v,x=g;if("offset"!==v)switch(b=n.normalizePropertyName(b,r),x){case"!":x=e.get(v);break;case Ol:x=i.get(v);break;default:x=n.normalizeStyleValue(v,b,x,r)}f.set(b,x)}),u||s.push(f),a=f,o=c}),r.length)throw function DEe(n){return new H(3502,!1)}();return s}function EP(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&DP(e,"start",n)));break;case"done":n.onDone(()=>i(e&&DP(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&DP(e,"destroy",n)))}}function DP(n,t,e){const s=TP(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),o=n._data;return null!=o&&(s._data=o),s}function TP(n,t,e,i,r="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function bo(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function MW(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const LEe=(()=>typeof document>"u"?null:document.documentElement)();function SP(n){const t=n.parentNode||n.host||null;return t===LEe?null:t}let Mh=null,RW=!1;function PW(n,t){for(;t;){if(t===n)return!0;t=SP(t)}return!1}function OW(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]}let FW=(()=>{class n{validateStyleProperty(e){return function BEe(n){Mh||(Mh=function jEe(){return typeof document<"u"?document.body:null}()||{},RW=!!Mh.style&&"WebkitAppearance"in Mh.style);let t=!0;return Mh.style&&!function VEe(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Mh.style,!t&&RW&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Mh.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return PW(e,i)}getParentElement(e){return SP(e)}query(e,i,r){return OW(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,o,a=[],l){return new K_(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})(),IP=(()=>{class n{static#e=this.NOOP=new FW}return n})();const UEe=1e3,AP="ng-enter",qE="ng-leave",GE="ng-trigger",YE=".ng-trigger",LW="ng-animating",kP=".ng-animating";function ac(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:MP(parseFloat(t[1]),t[2])}function MP(n,t){return"s"===t?n*UEe:n}function ZE(n,t,e){return n.hasOwnProperty("duration")?n:function HEe(n,t,e){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(AW()),{duration:0,delay:0,easing:""};r=MP(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=MP(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!e){let a=!1,l=t.length;r<0&&(t.push(function iEe(){return new H(3100,!1)}()),a=!0),s<0&&(t.push(function rEe(){return new H(3101,!1)}()),a=!0),a&&t.splice(l,0,AW())}return{duration:r,delay:s,easing:o}}(n,t,e)}function Ay(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function VW(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Ou(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function rl(n,t,e){t.forEach((i,r)=>{const s=PP(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function Rh(n,t){t.forEach((e,i)=>{const r=PP(i);n.style[r]=""})}function ky(n){return Array.isArray(n)?1==n.length?n[0]:D4(n):n}const RP=new RegExp("{{\\s*(.+?)\\s*}}","g");function jW(n){let t=[];if("string"==typeof n){let e;for(;e=RP.exec(n);)t.push(e[1]);RP.lastIndex=0}return t}function My(n,t,e){const i=n.toString(),r=i.replace(RP,(s,o)=>{let a=t[o];return null==a&&(e.push(function oEe(n){return new H(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function KE(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const qEe=/-+([a-z0-9])/g;function PP(n){return n.replace(qEe,(...t)=>t[1].toUpperCase())}function wo(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function aEe(n){return new H(3004,!1)}()}}function UW(n,t){return window.getComputedStyle(n)[t]}const QE="*";function ZEe(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function KEe(n,t,e){if(":"==n[0]){const l=function QEe(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function wEe(n){return new H(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function bEe(n){return new H(3015,!1)}()),t;const r=i[1],s=i[2],o=i[3];t.push(zW(r,o));"<"==s[0]&&!(r==QE&&o==QE)&&t.push(zW(o,r))}(i,e,t)):e.push(n),e}const XE=new Set(["true","1"]),JE=new Set(["false","0"]);function zW(n,t){const e=XE.has(n)||JE.has(n),i=XE.has(t)||JE.has(t);return(r,s)=>{let o=n==QE||n==r,a=t==QE||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?XE.has(n):JE.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?XE.has(t):JE.has(t)),o&&a}}const XEe=new RegExp("s*:selfs*,?","g");function OP(n,t,e,i){return new JEe(n).build(t,e,i)}class JEe{constructor(t){this._driver=t}build(t,e,i){const r=new nDe(e);return this._resetContextStyleTimingState(r),wo(this,ky(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function cEe(){return new H(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function uEe(){return new H(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{jW(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(KE(s.values()),e.errors.push(function dEe(n,t){return new H(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=wo(this,ky(t.animation),e);return{type:1,matchers:ZEe(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Ph(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>wo(this,i,e)),options:Ph(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=i;const a=wo(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:Ph(t.options)}}visitAnimate(t,e){const i=function rDe(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return FP(ZE(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=FP(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=ZE(e,t);return FP(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:os({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=os(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Ol?i.push(a):e.errors.push(new H(3002,!1)):i.push(VW(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let f=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(e.errors.push(function fEe(n,t,e,i,r){return new H(3010,!1)}()),f=!1),s=u.startTime),f&&c.set(l,{startTime:s,endTime:r}),e.options&&function WEe(n,t,e){const i=t.params||{},r=jW(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function sEe(n){return new H(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function pEe(){return new H(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(O=>{const k=this._makeStyleAst(O,e);let F=null!=k.offset?k.offset:function iDe(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(k.styles),q=0;return null!=F&&(s++,q=k.offset=F),l=l||q<0||q>1,a=a||q<c,c=q,o.push(q),k});l&&e.errors.push(function mEe(){return new H(3012,!1)}()),a&&e.errors.push(function gEe(){return new H(3200,!1)}());const f=t.steps.length;let g=0;s>0&&s<f?e.errors.push(function _Ee(){return new H(3202,!1)}()):0==s&&(g=1/(f-1));const v=f-1,b=e.currentTime,x=e.currentAnimateTimings,E=x.duration;return u.forEach((O,k)=>{const F=g>0?k==v?1:g*k:o[k],q=F*E;e.currentTime=b+x.delay+q,x.duration=q,this._validateStyleAst(O,e),O.offset=F,i.styles.push(O)}),i}visitReference(t,e){return{type:8,animation:wo(this,ky(t.animation),e),options:Ph(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ph(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ph(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function eDe(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(XEe,"")),n=n.replace(/@\*/g,YE).replace(/@\w+/g,e=>YE+"-"+e.slice(1)).replace(/:animating/g,kP),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,bo(e.collectedStyles,e.currentQuerySelector,new Map);const a=wo(this,ky(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Ph(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function vEe(){return new H(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:ZE(t.timings,e.errors,!0);return{type:12,animation:wo(this,ky(t.animation),e),timings:i,options:null}}}class nDe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ph(n){return n?(n=Ay(n)).params&&(n.params=function tDe(n){return n?Ay(n):null}(n.params)):n={},n}function FP(n,t,e){return{duration:n,delay:t,easing:e}}function NP(n,t,e,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class eD{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const aDe=new RegExp(":enter","g"),cDe=new RegExp(":leave","g");function LP(n,t,e,i,r,s=new Map,o=new Map,a,l,c=[]){return(new uDe).buildKeyframes(n,t,e,i,r,s,o,a,l,c)}class uDe{buildKeyframes(t,e,i,r,s,o,a,l,c,u=[]){c=c||new eD;const f=new VP(t,e,c,r,s,u,[]);f.options=l;const g=l.delay?ac(l.delay):0;f.currentTimeline.delayNextStep(g),f.currentTimeline.setStyles([o],null,f.errors,l),wo(this,i,f);const v=f.timelines.filter(b=>b.containsAnimation());if(v.length&&a.size){let b;for(let x=v.length-1;x>=0;x--){const E=v[x];if(E.element===e){b=E;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,f.errors,l)}return v.length?v.map(b=>b.buildKeyframes()):[NP(e,[],[],[],0,g,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:ac(My(s,r?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const o=null!=i.duration?ac(i.duration):null,a=null!=i.delay?ac(i.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),wo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=tD);const o=ac(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>wo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?ac(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),wo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return ZE(e.params?My(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?ac(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=tD);let o=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const f=e.createSubContext(t.options,c);s&&f.delayNextStep(s),c===e.element&&(l=f.currentTimeline),wo(this,t.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const f=u.currentTime;wo(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const tD={};class VP{constructor(t,e,i,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new nD(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=ac(i.duration)),null!=i.delay&&(r.delay=ac(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=My(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new VP(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=tD,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new dDe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(aDe,"."+this._enterClassName)).replace(cDe,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function yEe(n){return new H(3014,!1)}()),a}}class nD{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new nD(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Ol),this._currentKeyframe.set(e,Ol);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function hDe(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Ol)}else Ou(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=My(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ol),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Ou(a,new Map,this._backFill);c.forEach((u,f)=>{"!"===u?t.add(f):u===Ol&&e.add(f)}),i||c.set("offset",l/this.duration),r.push(c)});const s=t.size?KE(t.values()):[],o=e.size?KE(e.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return NP(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class dDe extends nD{constructor(t,e,i,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=i+e,a=e/o,l=Ou(t[0]);l.set("offset",0),s.push(l);const c=Ou(t[0]);c.set("offset",WW(a)),s.push(c);const u=t.length-1;for(let f=1;f<=u;f++){let g=Ou(t[f]);const v=g.get("offset");g.set("offset",WW((e+v*i)/o)),s.push(g)}i=o,e=0,r="",t=s}return NP(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function WW(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class BP{}const fDe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class pDe extends BP{normalizePropertyName(t,e){return PP(t)}normalizeStyleValue(t,e,i,r){let s="";const o=i.toString().trim();if(fDe.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function lEe(n,t){return new H(3005,!1)}())}return o+s}}function qW(n,t,e,i,r,s,o,a,l,c,u,f,g){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:f,errors:g}}const jP={};class GW{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function mDe(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,o,a,l,c,u){const f=[],g=this.ast.options&&this.ast.options.params||jP,b=this.buildStyles(i,a&&a.params||jP,f),x=l&&l.params||jP,E=this.buildStyles(r,x,f),O=new Set,k=new Map,F=new Map,q="void"===r,K={params:gDe(x,g),delay:this.ast.options?.delay},re=u?[]:LP(t,e,this.ast.animation,s,o,b,E,K,c,f);let B=0;if(re.forEach(N=>{B=Math.max(N.duration+N.delay,B)}),f.length)return qW(e,this._triggerName,i,r,q,b,E,[],[],k,F,B,f);re.forEach(N=>{const $=N.element,U=bo(k,$,new Set);N.preStyleProps.forEach(Y=>U.add(Y));const W=bo(F,$,new Set);N.postStyleProps.forEach(Y=>W.add(Y)),$!==e&&O.add($)});const P=KE(O.values());return qW(e,this._triggerName,i,r,q,b,E,re,P,k,F,B)}}function gDe(n,t){const e=Ay(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class _De{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=Ay(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=My(o,r,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),i.set(a,o)})}),i}}class yDe{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new _De(r.style,r.options&&r.options.params||{},i))}),YW(this.states,"true","1"),YW(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new GW(t,r,this.states))}),this.fallbackTransition=function bDe(n,t,e){return new GW(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(o=>o.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function YW(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const wDe=new eD;class CDe{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=OP(this._driver,e,i,[]);if(i.length)throw function TEe(n){return new H(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=kW(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=LP(this._driver,e,s,AP,qE,new Map,new Map,i,wDe,r),o.forEach(u=>{const f=bo(a,u.element,new Map);u.postStyleProps.forEach(g=>f.set(g,null))})):(r.push(function SEe(){return new H(3300,!1)}()),o=[]),r.length)throw function IEe(n){return new H(3504,!1)}();a.forEach((u,f)=>{u.forEach((g,v)=>{u.set(v,this._driver.computeStyle(f,v,Ol))})});const c=Pu(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function AEe(n){return new H(3301,!1)}();return e}listen(t,e,i,r){const s=TP(e,"","","");return EP(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const ZW="ng-animate-queued",UP="ng-animate-disabled",SDe=[],KW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},IDe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ma="__ng_removed";class zP{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function RDe(n){return n??null}(i?t.value:t),i){const s=Ay(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Ry="void",HP=new zP(Ry);class ADe{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,$o(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function kEe(n,t){return new H(3302,!1)}();if(null==i||0==i.length)throw function MEe(n){return new H(3303,!1)}();if(!function PDe(n){return"start"==n||"done"==n}(i))throw function REe(n,t){return new H(3400,!1)}();const s=bo(this._elementListeners,t,[]),o={name:e,phase:i,callback:r};s.push(o);const a=bo(this._engine.statesByElement,t,new Map);return a.has(e)||($o(t,GE),$o(t,GE+"-"+e),a.set(e,HP)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function PEe(n){return new H(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),o=new $P(this.id,e,t);let a=this._engine.statesByElement.get(t);a||($o(t,GE),$o(t,GE+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new zP(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=HP),c.value!==Ry&&l.value===c.value){if(!function NDe(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(l.params,c.params)){const x=[],E=s.matchStyles(l.value,l.params,x),O=s.matchStyles(c.value,c.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{Rh(t,E),rl(t,O)})}return}const g=bo(this._engine.playersByElement,t,[]);g.forEach(x=>{x.namespaceId==this.id&&x.triggerName==e&&x.queued&&x.destroy()});let v=s.matchTransition(l.value,c.value,t,c.params),b=!1;if(!v){if(!r)return;v=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:v,fromState:l,toState:c,player:o,isFallbackTransition:b}),b||($o(t,ZW),o.onStart(()=>{Rm(t,ZW)})),o.onDone(()=>{let x=this.players.indexOf(o);x>=0&&this.players.splice(x,1);const E=this._engine.playersByElement.get(t);if(E){let O=E.indexOf(o);O>=0&&E.splice(O,1)}}),this.players.push(o),g.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,YE,!0);i.forEach(r=>{if(r[ma])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(t,c,Ry,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&Pu(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||HP,u=new zP(Ry),f=new $P(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[ma];(!s||s===KW)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){$o(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=TP(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,EP(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class kDe{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new ADe(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(iD(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!iD(e))return;const s=e[ma];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),$o(t,UP)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Rm(t,UP))}removeNode(t,e,i){if(iD(e)){const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[ma]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return iD(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,YE,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,kP,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Pu(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[ma];if(e&&e.setForRemoval){if(t[ma]=KW,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(UP)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)$o(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Pu(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function OEe(n){return new H(3402,!1)}()}_flushAnimations(t,e){const i=new eD,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Ne=>{u.add(Ne);const Le=this.driver.query(Ne,".ng-animate-queued",!0);for(let Ge=0;Ge<Le.length;Ge++)u.add(Le[Ge])});const f=this.bodyNode,g=Array.from(this.statesByElement.keys()),v=JW(g,this.collectedEnterElements),b=new Map;let x=0;v.forEach((Ne,Le)=>{const Ge=AP+x++;b.set(Le,Ge),Ne.forEach(Ye=>$o(Ye,Ge))});const E=[],O=new Set,k=new Set;for(let Ne=0;Ne<this.collectedLeaveElements.length;Ne++){const Le=this.collectedLeaveElements[Ne],Ge=Le[ma];Ge&&Ge.setForRemoval&&(E.push(Le),O.add(Le),Ge.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(Ye=>O.add(Ye)):k.add(Le))}const F=new Map,q=JW(g,Array.from(O));q.forEach((Ne,Le)=>{const Ge=qE+x++;F.set(Le,Ge),Ne.forEach(Ye=>$o(Ye,Ge))}),t.push(()=>{v.forEach((Ne,Le)=>{const Ge=b.get(Le);Ne.forEach(Ye=>Rm(Ye,Ge))}),q.forEach((Ne,Le)=>{const Ge=F.get(Le);Ne.forEach(Ye=>Rm(Ye,Ge))}),E.forEach(Ne=>{this.processLeaveNode(Ne)})});const K=[],re=[];for(let Ne=this._namespaceList.length-1;Ne>=0;Ne--)this._namespaceList[Ne].drainQueuedTransitions(e).forEach(Ge=>{const Ye=Ge.player,Jt=Ge.element;if(K.push(Ye),this.collectedEnterElements.length){const Ii=Jt[ma];if(Ii&&Ii.setForMove){if(Ii.previousTriggersValues&&Ii.previousTriggersValues.has(Ge.triggerName)){const lc=Ii.previousTriggersValues.get(Ge.triggerName),Js=this.statesByElement.get(Ge.element);if(Js&&Js.has(Ge.triggerName)){const cc=Js.get(Ge.triggerName);cc.value=lc,Js.set(Ge.triggerName,cc)}}return void Ye.destroy()}}const Tn=!f||!this.driver.containsElement(f,Jt),un=F.get(Jt),dn=b.get(Jt),Gt=this._buildInstruction(Ge,i,dn,un,Tn);if(Gt.errors&&Gt.errors.length)return void re.push(Gt);if(Tn)return Ye.onStart(()=>Rh(Jt,Gt.fromStyles)),Ye.onDestroy(()=>rl(Jt,Gt.toStyles)),void r.push(Ye);if(Ge.isFallbackTransition)return Ye.onStart(()=>Rh(Jt,Gt.fromStyles)),Ye.onDestroy(()=>rl(Jt,Gt.toStyles)),void r.push(Ye);const Wr=[];Gt.timelines.forEach(Ii=>{Ii.stretchStartingKeyframe=!0,this.disabledNodes.has(Ii.element)||Wr.push(Ii)}),Gt.timelines=Wr,i.append(Jt,Gt.timelines),o.push({instruction:Gt,player:Ye,element:Jt}),Gt.queriedElements.forEach(Ii=>bo(a,Ii,[]).push(Ye)),Gt.preStyleProps.forEach((Ii,lc)=>{if(Ii.size){let Js=l.get(lc);Js||l.set(lc,Js=new Set),Ii.forEach((cc,Lu)=>Js.add(Lu))}}),Gt.postStyleProps.forEach((Ii,lc)=>{let Js=c.get(lc);Js||c.set(lc,Js=new Set),Ii.forEach((cc,Lu)=>Js.add(Lu))})});if(re.length){const Ne=[];re.forEach(Le=>{Ne.push(function FEe(n,t){return new H(3505,!1)}())}),K.forEach(Le=>Le.destroy()),this.reportError(Ne)}const B=new Map,P=new Map;o.forEach(Ne=>{const Le=Ne.element;i.has(Le)&&(P.set(Le,Le),this._beforeAnimationBuild(Ne.player.namespaceId,Ne.instruction,B))}),r.forEach(Ne=>{const Le=Ne.element;this._getPreviousPlayers(Le,!1,Ne.namespaceId,Ne.triggerName,null).forEach(Ye=>{bo(B,Le,[]).push(Ye),Ye.destroy()})});const N=E.filter(Ne=>t7(Ne,l,c)),$=new Map;XW($,this.driver,k,c,Ol).forEach(Ne=>{t7(Ne,l,c)&&N.push(Ne)});const W=new Map;v.forEach((Ne,Le)=>{XW(W,this.driver,new Set(Ne),l,"!")}),N.forEach(Ne=>{const Le=$.get(Ne),Ge=W.get(Ne);$.set(Ne,new Map([...Le?.entries()??[],...Ge?.entries()??[]]))});const Y=[],ut=[],Nt={};o.forEach(Ne=>{const{element:Le,player:Ge,instruction:Ye}=Ne;if(i.has(Le)){if(u.has(Le))return Ge.onDestroy(()=>rl(Le,Ye.toStyles)),Ge.disabled=!0,Ge.overrideTotalTime(Ye.totalTime),void r.push(Ge);let Jt=Nt;if(P.size>1){let un=Le;const dn=[];for(;un=un.parentNode;){const Gt=P.get(un);if(Gt){Jt=Gt;break}dn.push(un)}dn.forEach(Gt=>P.set(Gt,Jt))}const Tn=this._buildAnimation(Ge.namespaceId,Ye,B,s,W,$);if(Ge.setRealPlayer(Tn),Jt===Nt)Y.push(Ge);else{const un=this.playersByElement.get(Jt);un&&un.length&&(Ge.parentPlayer=Pu(un)),r.push(Ge)}}else Rh(Le,Ye.fromStyles),Ge.onDestroy(()=>rl(Le,Ye.toStyles)),ut.push(Ge),u.has(Le)&&r.push(Ge)}),ut.forEach(Ne=>{const Le=s.get(Ne.element);if(Le&&Le.length){const Ge=Pu(Le);Ne.setRealPlayer(Ge)}}),r.forEach(Ne=>{Ne.parentPlayer?Ne.syncPlayerEvents(Ne.parentPlayer):Ne.destroy()});for(let Ne=0;Ne<E.length;Ne++){const Le=E[Ne],Ge=Le[ma];if(Rm(Le,qE),Ge&&Ge.hasAnimation)continue;let Ye=[];if(a.size){let Tn=a.get(Le);Tn&&Tn.length&&Ye.push(...Tn);let un=this.driver.query(Le,kP,!0);for(let dn=0;dn<un.length;dn++){let Gt=a.get(un[dn]);Gt&&Gt.length&&Ye.push(...Gt)}}const Jt=Ye.filter(Tn=>!Tn.destroyed);Jt.length?ODe(this,Le,Jt):this.processLeaveNode(Le)}return E.length=0,Y.forEach(Ne=>{this.players.push(Ne),Ne.onDone(()=>{Ne.destroy();const Le=this.players.indexOf(Ne);this.players.splice(Le,1)}),Ne.play()}),Y}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Ry;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,f=bo(i,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(v=>{const b=v.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),v.destroy(),f.push(v)})}Rh(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,f=new Set,g=e.timelines.map(b=>{const x=b.element;u.add(x);const E=x[ma];if(E&&E.removedBeforeQueried)return new K_(b.duration,b.delay);const O=x!==l,k=function FDe(n){const t=[];return e7(n,t),t}((i.get(x)||SDe).map(B=>B.getRealPlayer())).filter(B=>!!B.element&&B.element===x),F=s.get(x),q=o.get(x),K=kW(this._normalizer,b.keyframes,F,q),re=this._buildPlayer(b,K,k);if(b.subTimeline&&r&&f.add(x),O){const B=new $P(t,a,x);B.setRealPlayer(re),c.push(B)}return re});c.forEach(b=>{bo(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function MDe(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,b.element,b))}),u.forEach(b=>$o(b,LW));const v=Pu(g);return v.onDestroy(()=>{u.forEach(b=>Rm(b,LW)),rl(l,e.toStyles)}),f.forEach(b=>{bo(r,b,[]).push(v)}),v}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new K_(t.duration,t.delay)}}class $P{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new K_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>EP(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){bo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function iD(n){return n&&1===n.nodeType}function QW(n,t){const e=n.style.display;return n.style.display=t??"none",e}function XW(n,t,e,i,r){const s=[];e.forEach(l=>s.push(QW(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(f=>{const g=t.computeStyle(c,f,r);u.set(f,g),(!g||0==g.length)&&(c[ma]=IDe,o.push(c))}),n.set(c,u)});let a=0;return e.forEach(l=>QW(l,s[a++])),o}function JW(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function $o(n,t){n.classList?.add(t)}function Rm(n,t){n.classList?.remove(t)}function ODe(n,t,e){Pu(e).onDone(()=>n.processLeaveNode(t))}function e7(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof T4?e7(i.players,t):t.push(i)}}function t7(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class rD{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new kDe(t,e,i),this._timelineEngine=new CDe(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=OP(this._driver,s,l,[]);if(l.length)throw function EEe(n,t){return new H(3404,!1)}();a=function vDe(n,t,e){return new yDe(n,t,e)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,o]=MW(i);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[o,a]=MW(i);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let VDe=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&rl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rl(this._element,this._initialStyles),this._endStyles&&(rl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Rh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rh(this._element,this._endStyles),this._endStyles=null),rl(this._element,this._initialStyles),this._state=3)}}return n})();function WP(n){let t=null;return n.forEach((e,i)=>{(function BDe(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class n7{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:UW(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class jDe{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return PW(t,e)}getParentElement(t){return SP(t)}query(t,e,i){return OW(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(v=>v instanceof n7);(function GEe(n,t){return 0===n||0===t})(i,r)&&u.forEach(v=>{v.currentSnapshot.forEach((b,x)=>c.set(x,b))});let f=function $Ee(n){return n.length?n[0]instanceof Map?n:n.map(t=>VW(t)):[]}(e).map(v=>Ou(v));f=function YEe(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,UW(n,a)))}}return t}(t,f,c);const g=function LDe(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=WP(t[0]),t.length>1&&(i=WP(t[t.length-1]))):t instanceof Map&&(e=WP(t)),e||i?new VDe(n,e,i):null}(t,f);return new n7(t,f,l,g)}}let UDe=(()=>{class n extends x4{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Kr.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?D4(e):e;return r7(this._renderer,null,i,"register",[r]),new zDe(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(ie(n_),ie(Ct))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();class zDe extends Hse{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new HDe(this._id,t,e||{},this._renderer)}}class HDe{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return r7(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function r7(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const s7="@.disabled";let $De=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new o7("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return i.data.animation.forEach(l),new WDe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(n_),ie(rD),ie(it))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();class o7{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==s7?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class WDe extends o7{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==s7?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function qDe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function GDe(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}const a7=[{provide:x4,useClass:UDe},{provide:BP,useFactory:function ZDe(){return new pDe}},{provide:rD,useClass:(()=>{class n extends rD{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct),ie(IP),ie(BP),ie(qc))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})()},{provide:n_,useFactory:function KDe(n,t,e){return new $De(n,t,e)},deps:[nA,rD,it]}],qP=[{provide:IP,useFactory:()=>new jDe},{provide:Nf,useValue:"BrowserAnimations"},...a7],l7=[{provide:IP,useClass:FW},{provide:Nf,useValue:"NoopAnimations"},...a7];let QDe=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?l7:qP}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:qP,imports:[K3]})}return n})(),c7=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[Ar,Qj,Ar]})}return n})(),nTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[KC,dv,Cn,c7,Ar,Ar]})}return n})();class oD{}class aD{}class sl{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof sl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new sl;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof sl?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class rTe{encodeKey(t){return u7(t)}encodeValue(t){return u7(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const oTe=/%(\d[a-f0-9])/gi,aTe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function u7(n){return encodeURIComponent(n).replace(oTe,(t,e)=>aTe[e]??t)}function lD(n){return`${n}`}class Fu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new rTe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function sTe(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(lD):[lD(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Fu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(lD(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(lD(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class lTe{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function d7(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function h7(n){return typeof Blob<"u"&&n instanceof Blob}function f7(n){return typeof FormData<"u"&&n instanceof FormData}class Py{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function cTe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new sl),this.context||(this.context=new lTe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Fu,this.urlWithParams=e}serializeBody(){return null===this.body?null:d7(this.body)||h7(this.body)||f7(this.body)||function uTe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||f7(this.body)?null:h7(this.body)?this.body.type||null:d7(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((f,g)=>f.set(g,t.setHeaders[g]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((f,g)=>f.set(g,t.setParams[g]),c)),new Py(e,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Pm=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Pm||{});class GP{constructor(t,e=200,i="OK"){this.headers=t.headers||new sl,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class YP extends GP{constructor(t={}){super(t),this.type=Pm.ResponseHeader}clone(t={}){return new YP({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Om extends GP{constructor(t={}){super(t),this.type=Pm.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Om({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class p7 extends GP{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ZP(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let KP=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Py)s=e;else{let l,c;l=r.headers instanceof sl?r.headers:new sl(r.headers),r.params&&(c=r.params instanceof Fu?r.params:new Fu({fromObject:r.params})),s=new Py(e,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ve(s).pipe(op(l=>this.handler.handle(l)));if(e instanceof Py||"events"===r.observe)return o;const a=o.pipe(vn(l=>l instanceof Om));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Oe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Oe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Oe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Oe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Fu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,ZP(r,i))}post(e,i,r={}){return this.request("POST",e,ZP(r,i))}put(e,i,r={}){return this.request("PUT",e,ZP(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(oD))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();function _7(n,t){return t(n)}function hTe(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}const pTe=new Ce(""),Oy=new Ce(""),v7=new Ce("");function mTe(){let n=null;return(t,e)=>{null===n&&(n=(Ve(pTe,{optional:!0})??[]).reduceRight(hTe,_7));const i=Ve(Ew),r=i.add();return n(t,e).pipe(ap(()=>i.remove(r)))}}let y7=(()=>{class n extends oD{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=Ve(Ew)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Oy),...this.injector.get(v7,[])]));this.chain=r.reduceRight((s,o)=>function fTe(n,t,e){return(i,r)=>e.runInContext(()=>t(i,s=>n(s,r)))}(s,o,this.injector),_7)}const i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(ap(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(aD),ie(lo))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();const yTe=/^\)\]\}',?\n/;let w7=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new H(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?ne(i.\u0275loadImpl()):ve(null)).pipe(lt(()=>new ft(s=>{const o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((x,E)=>o.setRequestHeader(x,E.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const x=e.detectContentTypeHeader();null!==x&&o.setRequestHeader("Content-Type",x)}if(e.responseType){const x=e.responseType.toLowerCase();o.responseType="json"!==x?x:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const x=o.statusText||"OK",E=new sl(o.getAllResponseHeaders()),O=function bTe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new YP({headers:E,status:o.status,statusText:x,url:O}),l},u=()=>{let{headers:x,status:E,statusText:O,url:k}=c(),F=null;204!==E&&(F=typeof o.response>"u"?o.responseText:o.response),0===E&&(E=F?200:0);let q=E>=200&&E<300;if("json"===e.responseType&&"string"==typeof F){const K=F;F=F.replace(yTe,"");try{F=""!==F?JSON.parse(F):null}catch(re){F=K,q&&(q=!1,F={error:re,text:F})}}q?(s.next(new Om({body:F,headers:x,status:E,statusText:O,url:k||void 0})),s.complete()):s.error(new p7({error:F,headers:x,status:E,statusText:O,url:k||void 0}))},f=x=>{const{url:E}=c(),O=new p7({error:x,status:o.status||0,statusText:o.statusText||"Unknown Error",url:E||void 0});s.error(O)};let g=!1;const v=x=>{g||(s.next(c()),g=!0);let E={type:Pm.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(E.total=x.total),"text"===e.responseType&&o.responseText&&(E.partialText=o.responseText),s.next(E)},b=x=>{let E={type:Pm.UploadProgress,loaded:x.loaded};x.lengthComputable&&(E.total=x.total),s.next(E)};return o.addEventListener("load",u),o.addEventListener("error",f),o.addEventListener("timeout",f),o.addEventListener("abort",f),e.reportProgress&&(o.addEventListener("progress",v),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:Pm.Sent}),()=>{o.removeEventListener("error",f),o.removeEventListener("abort",f),o.removeEventListener("load",u),o.removeEventListener("timeout",f),e.reportProgress&&(o.removeEventListener("progress",v),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(ie(O3))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();const QP=new Ce("XSRF_ENABLED"),C7=new Ce("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),x7=new Ce("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class E7{}let xTe=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=C3(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(ie(Ct),ie(Mo),ie(C7))};static#t=this.\u0275prov=Se({token:n,factory:n.\u0275fac})}return n})();function ETe(n,t){const e=n.url.toLowerCase();if(!Ve(QP)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=Ve(E7).getToken(),r=Ve(x7);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Nu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Nu||{});function DTe(...n){const t=[KP,w7,y7,{provide:oD,useExisting:y7},{provide:aD,useExisting:w7},{provide:Oy,useValue:ETe,multi:!0},{provide:QP,useValue:!0},{provide:E7,useClass:xTe}];for(const e of n)t.push(...e.\u0275providers);return W0(t)}const D7=new Ce("LEGACY_INTERCEPTOR_FN");function TTe(){return function Oh(n,t){return{\u0275kind:n,\u0275providers:t}}(Nu.LegacyInterceptors,[{provide:D7,useFactory:mTe},{provide:Oy,useExisting:D7,multi:!0}])}let STe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[DTe(TTe())]})}return n})();const PTe_firebaseConfig={apiKey:"AIzaSyBLib--Lb3kRU1UORbEgx76QxXWLr8rFZk",authDomain:"nozuki3rd.firebaseapp.com",projectId:"nozuki3rd",storageBucket:"nozuki3rd.appspot.com",messagingSenderId:"183357457685",appId:"1:183357457685:web:01b4a530cc30b2b310d51c"};let OTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({})}return n})();const BTe={provide:new Ce("mat-select-scroll-strategy"),deps:[Zd],useFactory:function VTe(n){return()=>n.scrollStrategies.reposition()}};let jTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[BTe],imports:[Cn,KC,Xj,Ar,YC,Mm,Xj,Ar]})}return n})(),qTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({imports:[Ar,Ar]})}return n})();(function _ne(n,t){return PJ({rootComponent:n,...G3(t)})})(nEe,{providers:[HF((()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=gt({type:n});static#n=this.\u0275inj=vt({providers:[Ks,Du,el],imports:[K3,QDe,ar,tx,nTe,STe,Y4.forRoot({provide:jd,useFactory:l5}),yde.initializeApp(PTe_firebaseConfig),xde,Yme,OTe,Cn,Mm,CP,c7,jTe,qTe]})}return n})()),function $re(n,...t){return W0([{provide:gp,multi:!0,useValue:n},[],{provide:hp,useFactory:r4,deps:[ss]},{provide:Sw,multi:!0,useFactory:s4},t.map(e=>e.\u0275providers)])}(Zxe)]}).catch(n=>console.error(n))},106:(Wo,ur,Et)=>{Et.d(ur,{Z:()=>hr});var j=Et(58),ht=Et(537),Ze=Et(534),be=Et(879);class St{constructor(mt,It){this._delegate=mt,this.firebase=It,(0,Ze._addComponent)(mt,new ht.wA("app-compat",()=>this,"PUBLIC")),this.container=mt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this._delegate.automaticDataCollectionEnabled=mt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(mt=>{this._delegate.checkDestroyed(),mt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ze.deleteApp)(this._delegate)))}_getService(mt,It=Ze._DEFAULT_ENTRY_NAME){var fr;this._delegate.checkDestroyed();const pr=this._delegate.container.getProvider(mt);return!pr.isInitialized()&&"EXPLICIT"===(null===(fr=pr.getComponent())||void 0===fr?void 0:fr.instantiationMode)&&pr.initialize(),pr.getImmediate({identifier:It})}_removeServiceInstance(mt,It=Ze._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(mt).clearInstance(It)}_addComponent(mt){(0,Ze._addComponent)(this._delegate,mt)}_addOrOverwriteComponent(mt){(0,Ze._addOrOverwriteComponent)(this._delegate,mt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const li=new j.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),De=function Ut(){const sn=function dr(sn){const mt={},It={__esModule:!0,initializeApp:function jn(at,mi={}){const Sn=Ze.initializeApp(at,mi);if((0,j.r3)(mt,Sn.name))return mt[Sn.name];const Ae=new sn(Sn,It);return mt[Sn.name]=Ae,Ae},app:pr,registerVersion:Ze.registerVersion,setLogLevel:Ze.setLogLevel,onLog:Ze.onLog,apps:null,SDK_VERSION:Ze.SDK_VERSION,INTERNAL:{registerComponent:function bn(at){const mi=at.name,Sn=mi.replace("-compat","");if(Ze._registerComponent(at)&&"PUBLIC"===at.type){const Ae=(Zn=pr())=>{if("function"!=typeof Zn[Sn])throw li.create("invalid-app-argument",{appName:mi});return Zn[Sn]()};void 0!==at.serviceProps&&(0,j.ZB)(Ae,at.serviceProps),It[Sn]=Ae,sn.prototype[Sn]=function(...Zn){return this._getService.bind(this,mi).apply(this,at.multipleInstances?Zn:[])}}return"PUBLIC"===at.type?It[Sn]:null},removeApp:function fr(at){delete mt[at]},useAsService:function Or(at,mi){return"serverAuth"===mi?null:mi},modularAPIs:Ze}};function pr(at){if(!(0,j.r3)(mt,at=at||Ze._DEFAULT_ENTRY_NAME))throw li.create("no-app",{appName:at});return mt[at]}return It.default=It,Object.defineProperty(It,"apps",{get:function on(){return Object.keys(mt).map(at=>mt[at])}}),pr.App=sn,It}(St);return sn.INTERNAL=Object.assign(Object.assign({},sn.INTERNAL),{createFirebaseNamespace:Ut,extendNamespace:function mt(It){(0,j.ZB)(sn,It)},createSubscribe:j.ne,ErrorFactory:j.LL,deepExtend:j.ZB}),sn}(),Re=new be.Yd("@firebase/app-compat");if((0,j.jU)()&&void 0!==self.firebase){Re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const sn=self.firebase.SDK_VERSION;sn&&sn.indexOf("LITE")>=0&&Re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const hr=De;!function en(sn){(0,Ze.registerVersion)("@firebase/app-compat","0.2.35",sn)}()},534:(Wo,ur,Et)=>{Et.r(ur),Et.d(ur,{FirebaseError:()=>be.ZR,SDK_VERSION:()=>Zr,_DEFAULT_ENTRY_NAME:()=>eo,_addComponent:()=>no,_addOrOverwriteComponent:()=>In,_apps:()=>Gr,_clearComponents:()=>Yr,_components:()=>Mi,_getProvider:()=>yi,_isFirebaseApp:()=>_a,_isFirebaseServerApp:()=>pc,_registerComponent:()=>Fs,_removeServiceInstance:()=>$u,_serverApps:()=>to,deleteApp:()=>ya,getApp:()=>gc,getApps:()=>Wu,initializeApp:()=>va,initializeServerApp:()=>jh,onLog:()=>ne,registerVersion:()=>Q,setLogLevel:()=>we});var j=Et(861),ht=Et(537),Ze=Et(879),be=Et(58);const St=(H,ae)=>ae.some(de=>H instanceof de);let Yn,li;const De=new WeakMap,Re=new WeakMap,nt=new WeakMap,Lt=new WeakMap,en=new WeakMap;let mt={get(H,ae,de){if(H instanceof IDBTransaction){if("done"===ae)return Re.get(H);if("objectStoreNames"===ae)return H.objectStoreNames||nt.get(H);if("store"===ae)return de.objectStoreNames[1]?void 0:de.objectStore(de.objectStoreNames[0])}return jn(H[ae])},set:(H,ae,de)=>(H[ae]=de,!0),has:(H,ae)=>H instanceof IDBTransaction&&("done"===ae||"store"===ae)||ae in H};function pr(H){return"function"==typeof H?function fr(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ut(){return li||(li=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...ae){return H.apply(on(this),ae),jn(De.get(this))}:function(...ae){return jn(H.apply(on(this),ae))}:function(ae,...de){const ke=H.call(on(this),ae,...de);return nt.set(ke,ae.sort?ae.sort():[ae]),jn(ke)}}(H):(H instanceof IDBTransaction&&function sn(H){if(Re.has(H))return;const ae=new Promise((de,ke)=>{const _t=()=>{H.removeEventListener("complete",bt),H.removeEventListener("error",Pt),H.removeEventListener("abort",Pt)},bt=()=>{de(),_t()},Pt=()=>{ke(H.error||new DOMException("AbortError","AbortError")),_t()};H.addEventListener("complete",bt),H.addEventListener("error",Pt),H.addEventListener("abort",Pt)});Re.set(H,ae)}(H),St(H,function dr(){return Yn||(Yn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,mt):H)}function jn(H){if(H instanceof IDBRequest)return function hr(H){const ae=new Promise((de,ke)=>{const _t=()=>{H.removeEventListener("success",bt),H.removeEventListener("error",Pt)},bt=()=>{de(jn(H.result)),_t()},Pt=()=>{ke(H.error),_t()};H.addEventListener("success",bt),H.addEventListener("error",Pt)});return ae.then(de=>{de instanceof IDBCursor&&De.set(de,H)}).catch(()=>{}),en.set(ae,H),ae}(H);if(Lt.has(H))return Lt.get(H);const ae=pr(H);return ae!==H&&(Lt.set(H,ae),en.set(ae,H)),ae}const on=H=>en.get(H),at=["get","getKey","getAll","getAllKeys","count"],mi=["put","add","delete","clear"],Sn=new Map;function Ae(H,ae){if(!(H instanceof IDBDatabase)||ae in H||"string"!=typeof ae)return;if(Sn.get(ae))return Sn.get(ae);const de=ae.replace(/FromIndex$/,""),ke=ae!==de,_t=mi.includes(de);if(!(de in(ke?IDBIndex:IDBObjectStore).prototype)||!_t&&!at.includes(de))return;const bt=function(){var Pt=(0,j.Z)(function*(An,...Vt){const Ns=this.transaction(An,_t?"readwrite":"readonly");let ul=Ns.store;return ke&&(ul=ul.index(Vt.shift())),(yield Promise.all([ul[de](...Vt),_t&&Ns.done]))[0]});return function(Vt){return Pt.apply(this,arguments)}}();return Sn.set(ae,bt),bt}!function It(H){mt=H(mt)}(H=>({...H,get:(ae,de,ke)=>Ae(ae,de)||H.get(ae,de,ke),has:(ae,de)=>!!Ae(ae,de)||H.has(ae,de)}));class Zn{constructor(ae){this.container=ae}getPlatformInfoString(){return this.container.getProviders().map(de=>{if(function Ln(H){const ae=H.getComponent();return"VERSION"===ae?.type}(de)){const ke=de.getImmediate();return`${ke.library}/${ke.version}`}return null}).filter(de=>de).join(" ")}}const vs="@firebase/app",Ps="0.10.5",ft=new Ze.Yd("@firebase/app"),eo="[DEFAULT]",Hu={[vs]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Gr=new Map,to=new Map,Mi=new Map;function no(H,ae){try{H.container.addComponent(ae)}catch(de){ft.debug(`Component ${ae.name} failed to register with FirebaseApp ${H.name}`,de)}}function In(H,ae){H.container.addOrOverwriteComponent(ae)}function Fs(H){const ae=H.name;if(Mi.has(ae))return ft.debug(`There were multiple attempts to register component ${ae}.`),!1;Mi.set(ae,H);for(const de of Gr.values())no(de,H);for(const de of to.values())no(de,H);return!0}function yi(H,ae){const de=H.container.getProvider("heartbeat").getImmediate({optional:!0});return de&&de.triggerHeartbeat(),H.container.getProvider(ae)}function $u(H,ae,de=eo){yi(H,ae).clearInstance(de)}function _a(H){return void 0!==H.options}function pc(H){return void 0!==H.settings}function Yr(){Mi.clear()}const Ri=new be.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class mc{constructor(ae,de,ke){this._isDeleted=!1,this._options=Object.assign({},ae),this._config=Object.assign({},de),this._name=de.name,this._automaticDataCollectionEnabled=de.automaticDataCollectionEnabled,this._container=ke,this.container.addComponent(new ht.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ae){this._isDeleted=ae}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}class ys extends mc{constructor(ae,de,ke,_t){const bt=void 0!==de.automaticDataCollectionEnabled&&de.automaticDataCollectionEnabled,Pt={name:ke,automaticDataCollectionEnabled:bt};super(void 0!==ae.apiKey?ae:ae.options,Pt,_t),this._serverConfig=Object.assign({automaticDataCollectionEnabled:bt},de),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,de.releaseOnDeref=void 0,Q(vs,Ps,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(ae){this.isDeleted||(this._refCount++,void 0!==ae&&this._finalizationRegistry.register(ae,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ya(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ri.create("server-app-deleted")}}const Zr="10.12.2";function va(H,ae={}){let de=H;"object"!=typeof ae&&(ae={name:ae});const ke=Object.assign({name:eo,automaticDataCollectionEnabled:!1},ae),_t=ke.name;if("string"!=typeof _t||!_t)throw Ri.create("bad-app-name",{appName:String(_t)});if(de||(de=(0,be.aH)()),!de)throw Ri.create("no-options");const bt=Gr.get(_t);if(bt){if((0,be.vZ)(de,bt.options)&&(0,be.vZ)(ke,bt.config))return bt;throw Ri.create("duplicate-app",{appName:_t})}const Pt=new ht.H0(_t);for(const Vt of Mi.values())Pt.addComponent(Vt);const An=new mc(de,ke,Pt);return Gr.set(_t,An),An}function jh(H,ae){if((0,be.jU)())throw Ri.create("invalid-server-app-environment");let de;void 0===ae.automaticDataCollectionEnabled&&(ae.automaticDataCollectionEnabled=!1),de=_a(H)?H.options:H;const ke=Object.assign(Object.assign({},ae),de);if(void 0!==ke.releaseOnDeref&&delete ke.releaseOnDeref,void 0!==ae.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ri.create("finalization-registry-not-supported",{});const bt=""+(Ns=JSON.stringify(ke),[...Ns].reduce((ul,Ky)=>Math.imul(31,ul)+Ky.charCodeAt(0)|0,0)),Pt=to.get(bt);var Ns;if(Pt)return Pt.incRefCount(ae.releaseOnDeref),Pt;const An=new ht.H0(bt);for(const Ns of Mi.values())An.addComponent(Ns);const Vt=new ys(de,ae,bt,An);return to.set(bt,Vt),Vt}function gc(H=eo){const ae=Gr.get(H);if(!ae&&H===eo&&(0,be.aH)())return va();if(!ae)throw Ri.create("no-app",{appName:H});return ae}function Wu(){return Array.from(Gr.values())}function ya(H){return te.apply(this,arguments)}function te(){return(te=(0,j.Z)(function*(H){let ae=!1;const de=H.name;Gr.has(de)?(ae=!0,Gr.delete(de)):to.has(de)&&H.decRefCount()<=0&&(to.delete(de),ae=!0),ae&&(yield Promise.all(H.container.getProviders().map(ke=>ke.delete())),H.isDeleted=!0)})).apply(this,arguments)}function Q(H,ae,de){var ke;let _t=null!==(ke=Hu[H])&&void 0!==ke?ke:H;de&&(_t+=`-${de}`);const bt=_t.match(/\s|\//),Pt=ae.match(/\s|\//);if(bt||Pt){const An=[`Unable to register library "${_t}" with version "${ae}":`];return bt&&An.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),bt&&Pt&&An.push("and"),Pt&&An.push(`version name "${ae}" contains illegal characters (whitespace or "/")`),void ft.warn(An.join(" "))}Fs(new ht.wA(`${_t}-version`,()=>({library:_t,version:ae}),"VERSION"))}function ne(H,ae){if(null!==H&&"function"!=typeof H)throw Ri.create("invalid-log-argument");(0,Ze.Am)(H,ae)}function we(H){(0,Ze.Ub)(H)}const le="firebase-heartbeat-database",ve=1,tt="firebase-heartbeat-store";let fn=null;function lt(){return fn||(fn=function bn(H,ae,{blocked:de,upgrade:ke,blocking:_t,terminated:bt}={}){const Pt=indexedDB.open(H,ae),An=jn(Pt);return ke&&Pt.addEventListener("upgradeneeded",Vt=>{ke(jn(Pt.result),Vt.oldVersion,Vt.newVersion,jn(Pt.transaction),Vt)}),de&&Pt.addEventListener("blocked",Vt=>de(Vt.oldVersion,Vt.newVersion,Vt)),An.then(Vt=>{bt&&Vt.addEventListener("close",()=>bt()),_t&&Vt.addEventListener("versionchange",Ns=>_t(Ns.oldVersion,Ns.newVersion,Ns))}).catch(()=>{}),An}(le,ve,{upgrade:(H,ae)=>{if(0===ae)try{H.createObjectStore(tt)}catch(de){console.warn(de)}}}).catch(H=>{throw Ri.create("idb-open",{originalErrorMessage:H.message})})),fn}function Oi(){return(Oi=(0,j.Z)(function*(H){try{const de=(yield lt()).transaction(tt),ke=yield de.objectStore(tt).get(wn(H));return yield de.done,ke}catch(ae){if(ae instanceof be.ZR)ft.warn(ae.message);else{const de=Ri.create("idb-get",{originalErrorMessage:ae?.message});ft.warn(de.message)}}})).apply(this,arguments)}function Je(H,ae){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,j.Z)(function*(H,ae){try{const ke=(yield lt()).transaction(tt,"readwrite");yield ke.objectStore(tt).put(ae,wn(H)),yield ke.done}catch(de){if(de instanceof be.ZR)ft.warn(de.message);else{const ke=Ri.create("idb-set",{originalErrorMessage:de?.message});ft.warn(ke.message)}}})).apply(this,arguments)}function wn(H){return`${H.name}!${H.options.appId}`}class mn{constructor(ae){this.container=ae,this._heartbeatsCache=null;const de=this.container.getProvider("app").getImmediate();this._storage=new _c(de),this._heartbeatsCachePromise=this._storage.read().then(ke=>(this._heartbeatsCache=ke,ke))}triggerHeartbeat(){var ae=this;return(0,j.Z)(function*(){var de,ke;const bt=ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=ct();if((null!=(null===(de=ae._heartbeatsCache)||void 0===de?void 0:de.heartbeats)||(ae._heartbeatsCache=yield ae._heartbeatsCachePromise,null!=(null===(ke=ae._heartbeatsCache)||void 0===ke?void 0:ke.heartbeats)))&&ae._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!ae._heartbeatsCache.heartbeats.some(An=>An.date===Pt))return ae._heartbeatsCache.heartbeats.push({date:Pt,agent:bt}),ae._heartbeatsCache.heartbeats=ae._heartbeatsCache.heartbeats.filter(An=>{const Vt=new Date(An.date).valueOf();return Date.now()-Vt<=2592e6}),ae._storage.overwrite(ae._heartbeatsCache)})()}getHeartbeatsHeader(){var ae=this;return(0,j.Z)(function*(){var de;if(null===ae._heartbeatsCache&&(yield ae._heartbeatsCachePromise),null==(null===(de=ae._heartbeatsCache)||void 0===de?void 0:de.heartbeats)||0===ae._heartbeatsCache.heartbeats.length)return"";const ke=ct(),{heartbeatsToSend:_t,unsentEntries:bt}=function qo(H,ae=1024){const de=[];let ke=H.slice();for(const _t of H){const bt=de.find(Pt=>Pt.agent===_t.agent);if(bt){if(bt.dates.push(_t.date),Uh(de)>ae){bt.dates.pop();break}}else if(de.push({agent:_t.agent,dates:[_t.date]}),Uh(de)>ae){de.pop();break}ke=ke.slice(1)}return{heartbeatsToSend:de,unsentEntries:ke}}(ae._heartbeatsCache.heartbeats),Pt=(0,be.L)(JSON.stringify({version:2,heartbeats:_t}));return ae._heartbeatsCache.lastSentHeartbeatDate=ke,bt.length>0?(ae._heartbeatsCache.heartbeats=bt,yield ae._storage.overwrite(ae._heartbeatsCache)):(ae._heartbeatsCache.heartbeats=[],ae._storage.overwrite(ae._heartbeatsCache)),Pt})()}}function ct(){return(new Date).toISOString().substring(0,10)}class _c{constructor(ae){this.app=ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,j.Z)(function*(){return!!(0,be.hl)()&&(0,be.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ae=this;return(0,j.Z)(function*(){if(yield ae._canUseIndexedDBPromise){const ke=yield function Pi(H){return Oi.apply(this,arguments)}(ae.app);return ke?.heartbeats?ke:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ae){var de=this;return(0,j.Z)(function*(){var ke;if(yield de._canUseIndexedDBPromise){const bt=yield de.read();return Je(de.app,{lastSentHeartbeatDate:null!==(ke=ae.lastSentHeartbeatDate)&&void 0!==ke?ke:bt.lastSentHeartbeatDate,heartbeats:ae.heartbeats})}})()}add(ae){var de=this;return(0,j.Z)(function*(){var ke;if(yield de._canUseIndexedDBPromise){const bt=yield de.read();return Je(de.app,{lastSentHeartbeatDate:null!==(ke=ae.lastSentHeartbeatDate)&&void 0!==ke?ke:bt.lastSentHeartbeatDate,heartbeats:[...bt.heartbeats,...ae.heartbeats]})}})()}}function Uh(H){return(0,be.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Go(H){Fs(new ht.wA("platform-logger",ae=>new Zn(ae),"PRIVATE")),Fs(new ht.wA("heartbeat",ae=>new mn(ae),"PRIVATE")),Q(vs,Ps,H),Q(vs,Ps,"esm2017"),Q("fire-js","")}("")},537:(Wo,ur,Et)=>{Et.d(ur,{H0:()=>dr,wA:()=>Ze});var j=Et(861),ht=Et(58);class Ze{constructor(De,Re,nt){this.name=De,this.instanceFactory=Re,this.type=nt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(De){return this.instantiationMode=De,this}setMultipleInstances(De){return this.multipleInstances=De,this}setServiceProps(De){return this.serviceProps=De,this}setInstanceCreatedCallback(De){return this.onInstanceCreated=De,this}}const be="[DEFAULT]";class St{constructor(De,Re){this.name=De,this.container=Re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(De){const Re=this.normalizeInstanceIdentifier(De);if(!this.instancesDeferred.has(Re)){const nt=new ht.BH;if(this.instancesDeferred.set(Re,nt),this.isInitialized(Re)||this.shouldAutoInitialize())try{const Lt=this.getOrInitializeService({instanceIdentifier:Re});Lt&&nt.resolve(Lt)}catch{}}return this.instancesDeferred.get(Re).promise}getImmediate(De){var Re;const nt=this.normalizeInstanceIdentifier(De?.identifier),Lt=null!==(Re=De?.optional)&&void 0!==Re&&Re;if(!this.isInitialized(nt)&&!this.shouldAutoInitialize()){if(Lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:nt})}catch(en){if(Lt)return null;throw en}}getComponent(){return this.component}setComponent(De){if(De.name!==this.name)throw Error(`Mismatching Component ${De.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=De,this.shouldAutoInitialize()){if(function li(Ut){return"EAGER"===Ut.instantiationMode}(De))try{this.getOrInitializeService({instanceIdentifier:be})}catch{}for(const[Re,nt]of this.instancesDeferred.entries()){const Lt=this.normalizeInstanceIdentifier(Re);try{const en=this.getOrInitializeService({instanceIdentifier:Lt});nt.resolve(en)}catch{}}}}clearInstance(De=be){this.instancesDeferred.delete(De),this.instancesOptions.delete(De),this.instances.delete(De)}delete(){var De=this;return(0,j.Z)(function*(){const Re=Array.from(De.instances.values());yield Promise.all([...Re.filter(nt=>"INTERNAL"in nt).map(nt=>nt.INTERNAL.delete()),...Re.filter(nt=>"_delete"in nt).map(nt=>nt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(De=be){return this.instances.has(De)}getOptions(De=be){return this.instancesOptions.get(De)||{}}initialize(De={}){const{options:Re={}}=De,nt=this.normalizeInstanceIdentifier(De.instanceIdentifier);if(this.isInitialized(nt))throw Error(`${this.name}(${nt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Lt=this.getOrInitializeService({instanceIdentifier:nt,options:Re});for(const[en,hr]of this.instancesDeferred.entries())nt===this.normalizeInstanceIdentifier(en)&&hr.resolve(Lt);return Lt}onInit(De,Re){var nt;const Lt=this.normalizeInstanceIdentifier(Re),en=null!==(nt=this.onInitCallbacks.get(Lt))&&void 0!==nt?nt:new Set;en.add(De),this.onInitCallbacks.set(Lt,en);const hr=this.instances.get(Lt);return hr&&De(hr,Lt),()=>{en.delete(De)}}invokeOnInitCallbacks(De,Re){const nt=this.onInitCallbacks.get(Re);if(nt)for(const Lt of nt)try{Lt(De,Re)}catch{}}getOrInitializeService({instanceIdentifier:De,options:Re={}}){let nt=this.instances.get(De);if(!nt&&this.component&&(nt=this.component.instanceFactory(this.container,{instanceIdentifier:(Ut=De,Ut===be?void 0:Ut),options:Re}),this.instances.set(De,nt),this.instancesOptions.set(De,Re),this.invokeOnInitCallbacks(nt,De),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,De,nt)}catch{}var Ut;return nt||null}normalizeInstanceIdentifier(De=be){return this.component?this.component.multipleInstances?De:be:De}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class dr{constructor(De){this.name=De,this.providers=new Map}addComponent(De){const Re=this.getProvider(De.name);if(Re.isComponentSet())throw new Error(`Component ${De.name} has already been registered with ${this.name}`);Re.setComponent(De)}addOrOverwriteComponent(De){this.getProvider(De.name).isComponentSet()&&this.providers.delete(De.name),this.addComponent(De)}getProvider(De){if(this.providers.has(De))return this.providers.get(De);const Re=new St(De,this);return this.providers.set(De,Re),Re}getProviders(){return Array.from(this.providers.values())}}},879:(Wo,ur,Et)=>{Et.d(ur,{Am:()=>Ut,Ub:()=>dr,Yd:()=>li,in:()=>ht});const j=[];var ht=function(De){return De[De.DEBUG=0]="DEBUG",De[De.VERBOSE=1]="VERBOSE",De[De.INFO=2]="INFO",De[De.WARN=3]="WARN",De[De.ERROR=4]="ERROR",De[De.SILENT=5]="SILENT",De}(ht||{});const Ze={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},be=ht.INFO,St={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},Yn=(De,Re,...nt)=>{if(Re<De.logLevel)return;const Lt=(new Date).toISOString(),en=St[Re];if(!en)throw new Error(`Attempted to log a message with an invalid logType (value: ${Re})`);console[en](`[${Lt}]  ${De.name}:`,...nt)};class li{constructor(Re){this.name=Re,this._logLevel=be,this._logHandler=Yn,this._userLogHandler=null,j.push(this)}get logLevel(){return this._logLevel}set logLevel(Re){if(!(Re in ht))throw new TypeError(`Invalid value "${Re}" assigned to \`logLevel\``);this._logLevel=Re}setLogLevel(Re){this._logLevel="string"==typeof Re?Ze[Re]:Re}get logHandler(){return this._logHandler}set logHandler(Re){if("function"!=typeof Re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Re}get userLogHandler(){return this._userLogHandler}set userLogHandler(Re){this._userLogHandler=Re}debug(...Re){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...Re),this._logHandler(this,ht.DEBUG,...Re)}log(...Re){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...Re),this._logHandler(this,ht.VERBOSE,...Re)}info(...Re){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...Re),this._logHandler(this,ht.INFO,...Re)}warn(...Re){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...Re),this._logHandler(this,ht.WARN,...Re)}error(...Re){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...Re),this._logHandler(this,ht.ERROR,...Re)}}function dr(De){j.forEach(Re=>{Re.setLogLevel(De)})}function Ut(De,Re){for(const nt of j){let Lt=null;Re&&Re.level&&(Lt=Ze[Re.level]),nt.userLogHandler=null===De?null:(en,hr,...sn)=>{const mt=sn.map(It=>{if(null==It)return null;if("string"==typeof It)return It;if("number"==typeof It||"boolean"==typeof It)return It.toString();if(It instanceof Error)return It.message;try{return JSON.stringify(It)}catch{return null}}).filter(It=>It).join(" ");hr>=(Lt??en.logLevel)&&De({level:ht[hr].toLowerCase(),message:mt,args:sn,type:en.name})}}}},985:(Wo,ur,Et)=>{Et.r(ur);var j=Et(861),ht=Et(106),Ze=Et(534),be=Et(58),St=Et(879),Yn=Et(582),li=Et(537);const Ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const hr=function Lt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},sn=function en(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},mt=new be.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fr=new St.Yd("@firebase/auth");function jn(m,...d){fr.logLevel<=St.in.ERROR&&fr.error(`Auth (${Ze.SDK_VERSION}): ${m}`,...d)}function on(m,...d){throw Sn(m,...d)}function bn(m,...d){return Sn(m,...d)}function Or(m,d,h){const _=Object.assign(Object.assign({},sn()),{[d]:h});return new be.LL("auth","Firebase",_).create(d,{appName:m.name})}function at(m){return Or(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mi(m,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&on(m,"argument-error"),Or(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sn(m,...d){if("string"!=typeof m){const h=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=m.name),m._errorFactory.create(h,..._)}return mt.create(m,...d)}function Ae(m,d,...h){if(!m)throw Sn(d,...h)}function Zn(m){const d="INTERNAL ASSERTION FAILED: "+m;throw jn(d),new Error(d)}function Ln(m,d){m||Zn(d)}function vs(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Ps(){return"http:"===ft()||"https:"===ft()}function ft(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class fe{constructor(d,h){this.shortDelay=d,this.longDelay=h,Ln(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,be.uI)()||(0,be.b$)()}get(){return function ol(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ps()||(0,be.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _e(m,d){Ln(m.emulator,"Emulator should always be set here");const{url:h}=m.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class se{static initialize(d,h,_){this.fetchImpl=d,h&&(this.headersImpl=h),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fe=new fe(3e4,6e4);function ge(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function Pe(m,d,h,_){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,j.Z)(function*(m,d,h,_,D={}){return Oe(m,D,(0,j.Z)(function*(){let M={},X={};_&&("GET"===d?X=_:M={body:JSON.stringify(_)});const oe=(0,be.xO)(Object.assign({key:m.config.apiKey},X)).slice(1),xe=yield m._getAdditionalHeaders();return xe["Content-Type"]="application/json",m.languageCode&&(xe["X-Firebase-Locale"]=m.languageCode),se.fetch()(Os(m,m.config.apiHost,h,oe),Object.assign({method:d,headers:xe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Oe(m,d,h){return ot.apply(this,arguments)}function ot(){return(ot=(0,j.Z)(function*(m,d,h){m._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ee),d);try{const D=new ki(m),M=yield Promise.race([h(),D.promise]);D.clearNetworkTimeout();const X=yield M.json();if("needConfirmation"in X)throw gi(m,"account-exists-with-different-credential",X);if(M.ok&&!("errorMessage"in X))return X;{const oe=M.ok?X.errorMessage:X.error.message,[xe,Be]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw gi(m,"credential-already-in-use",X);if("EMAIL_EXISTS"===xe)throw gi(m,"email-already-in-use",X);if("USER_DISABLED"===xe)throw gi(m,"user-disabled",X);const Qe=_[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw Or(m,Qe,Be);on(m,Qe)}}catch(D){if(D instanceof be.ZR)throw D;on(m,"network-request-failed",{message:String(D)})}})).apply(this,arguments)}function At(m,d,h,_){return Un.apply(this,arguments)}function Un(){return(Un=(0,j.Z)(function*(m,d,h,_,D={}){const M=yield Pe(m,d,h,_,D);return"mfaPendingCredential"in M&&on(m,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Os(m,d,h,_){const D=`${d}${h}?${_}`;return m.config.emulator?_e(m.config,D):`${m.config.apiScheme}://${D}`}function hn(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ki{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,_)=>{this.timer=setTimeout(()=>_(bn(this.auth,"network-request-failed")),Fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gi(m,d,h){const _={appName:m.name};h.email&&(_.email=h.email),h.phoneNumber&&(_.phoneNumber=h.phoneNumber);const D=bn(m,d,_);return D.customData._tokenResponse=h,D}function xr(m){return void 0!==m&&void 0!==m.getResponse}function Fr(m){return void 0!==m&&void 0!==m.enterprise}class fc{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===d)return hn(h.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function ci(){return(ci=(0,j.Z)(function*(m){return(yield Pe(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Uu(m,d){return ll.apply(this,arguments)}function ll(){return(ll=(0,j.Z)(function*(m,d){return Pe(m,"GET","/v2/recaptchaConfig",ge(m,d))})).apply(this,arguments)}function eo(){return(eo=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Gr(){return(Gr=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function to(m,d){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function no(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function yi(){return(yi=(0,j.Z)(function*(m,d=!1){const h=(0,be.m9)(m),_=yield h.getIdToken(d),D=_a(_);Ae(D&&D.exp&&D.auth_time&&D.iat,h.auth,"internal-error");const M="object"==typeof D.firebase?D.firebase:void 0,X=M?.sign_in_provider;return{claims:D,token:_,authTime:no($u(D.auth_time)),issuedAtTime:no($u(D.iat)),expirationTime:no($u(D.exp)),signInProvider:X||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function $u(m){return 1e3*Number(m)}function _a(m){const[d,h,_]=m.split(".");if(void 0===d||void 0===h||void 0===_)return jn("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,be.tV)(h);return D?JSON.parse(D):(jn("Failed to decode base64 JWT payload"),null)}catch(D){return jn("Caught error parsing JWT payload as JSON",D?.toString()),null}}function pc(m){const d=_a(m);return Ae(d,"internal-error"),Ae(typeof d.exp<"u","internal-error"),Ae(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function Yr(m,d){return cl.apply(this,arguments)}function cl(){return(cl=(0,j.Z)(function*(m,d,h=!1){if(h)return d;try{return yield d}catch(_){throw _ instanceof be.ZR&&function Ri({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(_)&&m.auth.currentUser===m&&(yield m.auth.signOut()),_}})).apply(this,arguments)}class mc{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const D=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,j.Z)(function*(){yield h.iteration()}),_)}iteration(){var d=this;return(0,j.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class ys{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=no(this.lastLoginAt),this.creationTime=no(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zr(m){return va.apply(this,arguments)}function va(){return(va=(0,j.Z)(function*(m){var d;const h=m.auth,_=yield m.getIdToken(),D=yield Yr(m,to(h,{idToken:_}));Ae(D?.users.length,h,"internal-error");const M=D.users[0];m._notifyReloadListener(M);const X=null!==(d=M.providerUserInfo)&&void 0!==d&&d.length?ya(M.providerUserInfo):[],oe=function Wu(m,d){return[...m.filter(_=>!d.some(D=>D.providerId===_.providerId)),...d]}(m.providerData,X),Qe=!!m.isAnonymous&&!(m.email&&M.passwordHash||oe?.length),Xe={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:oe,metadata:new ys(M.createdAt,M.lastLoginAt),isAnonymous:Qe};Object.assign(m,Xe)})).apply(this,arguments)}function gc(){return(gc=(0,j.Z)(function*(m){const d=(0,be.m9)(m);yield Zr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ya(m){return m.map(d=>{var{providerId:h}=d,_=(0,Yn._T)(d,["providerId"]);return{providerId:h,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Q(){return(Q=(0,j.Z)(function*(m,d){const h=yield Oe(m,{},(0,j.Z)(function*(){const _=(0,be.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:D,apiKey:M}=m.config,X=Os(m,D,"/v1/token",`key=${M}`),oe=yield m._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(X,{method:"POST",headers:oe,body:_})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function we(){return(we=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v2/accounts:revokeToken",ge(m,d))})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ae(d.idToken,"internal-error"),Ae(typeof d.idToken<"u","internal-error"),Ae(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):pc(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}updateFromIdToken(d){Ae(0!==d.length,"internal-error");const h=pc(d);this.updateTokensAndExpiration(d,null,h)}getToken(d,h=!1){var _=this;return(0,j.Z)(function*(){return h||!_.accessToken||_.isExpired?(Ae(_.refreshToken,d,"user-token-expired"),_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var _=this;return(0,j.Z)(function*(){const{accessToken:D,refreshToken:M,expiresIn:X}=yield function te(m,d){return Q.apply(this,arguments)}(d,h);_.updateTokensAndExpiration(D,M,Number(X))})()}updateTokensAndExpiration(d,h,_){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,h){const{refreshToken:_,accessToken:D,expirationTime:M}=h,X=new le;return _&&(Ae("string"==typeof _,"internal-error",{appName:d}),X.refreshToken=_),D&&(Ae("string"==typeof D,"internal-error",{appName:d}),X.accessToken=D),M&&(Ae("number"==typeof M,"internal-error",{appName:d}),X.expirationTime=M),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return Zn("not implemented")}}function ve(m,d){Ae("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class tt{constructor(d){var{uid:h,auth:_,stsTokenManager:D}=d,M=(0,Yn._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=_,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new ys(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,j.Z)(function*(){const _=yield Yr(h,h.stsTokenManager.getToken(h.auth,d));return Ae(_,h.auth,"internal-error"),h.accessToken!==_&&(h.accessToken=_,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),_})()}getIdTokenResult(d){return function Fs(m){return yi.apply(this,arguments)}(this,d)}reload(){return function jh(m){return gc.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ae(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new tt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var _=this;return(0,j.Z)(function*(){let D=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),D=!0),h&&(yield Zr(_)),yield _.auth._persistUserIfCurrent(_),D&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,j.Z)(function*(){if((0,Ze._isFirebaseServerApp)(d.auth.app))return Promise.reject(at(d.auth));const h=yield d.getIdToken();return yield Yr(d,function zu(m,d){return eo.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var _,D,M,X,oe,xe,Be,Qe;const Xe=null!==(_=h.displayName)&&void 0!==_?_:void 0,Pn=null!==(D=h.email)&&void 0!==D?D:void 0,zs=null!==(M=h.phoneNumber)&&void 0!==M?M:void 0,If=null!==(X=h.photoURL)&&void 0!==X?X:void 0,Hg=null!==(oe=h.tenantId)&&void 0!==oe?oe:void 0,T0=null!==(xe=h._redirectEventId)&&void 0!==xe?xe:void 0,$g=null!==(Be=h.createdAt)&&void 0!==Be?Be:void 0,AT=null!==(Qe=h.lastLoginAt)&&void 0!==Qe?Qe:void 0,{uid:Wg,emailVerified:S0,isAnonymous:Af,providerData:I0,stsTokenManager:kT}=h;Ae(Wg&&kT,d,"internal-error");const qg=le.fromJSON(this.name,kT);Ae("string"==typeof Wg,d,"internal-error"),ve(Xe,d.name),ve(Pn,d.name),Ae("boolean"==typeof S0,d,"internal-error"),Ae("boolean"==typeof Af,d,"internal-error"),ve(zs,d.name),ve(If,d.name),ve(Hg,d.name),ve(T0,d.name),ve($g,d.name),ve(AT,d.name);const A0=new tt({uid:Wg,auth:d,email:Pn,emailVerified:S0,displayName:Xe,isAnonymous:Af,photoURL:If,phoneNumber:zs,tenantId:Hg,stsTokenManager:qg,createdAt:$g,lastLoginAt:AT});return I0&&Array.isArray(I0)&&(A0.providerData=I0.map(QO=>Object.assign({},QO))),T0&&(A0._redirectEventId=T0),A0}static _fromIdTokenResponse(d,h,_=!1){return(0,j.Z)(function*(){const D=new le;D.updateFromServerResponse(h);const M=new tt({uid:h.localId,auth:d,stsTokenManager:D,isAnonymous:_});return yield Zr(M),M})()}static _fromGetAccountInfoResponse(d,h,_){return(0,j.Z)(function*(){const D=h.users[0];Ae(void 0!==D.localId,"internal-error");const M=void 0!==D.providerUserInfo?ya(D.providerUserInfo):[],X=!(D.email&&D.passwordHash||M?.length),oe=new le;oe.updateFromIdToken(_);const xe=new tt({uid:D.localId,auth:d,stsTokenManager:oe,isAnonymous:X}),Be={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:M,metadata:new ys(D.createdAt,D.lastLoginAt),isAnonymous:!(D.email&&D.passwordHash||M?.length)};return Object.assign(xe,Be),xe})()}}const fn=new Map;function lt(m){Ln(m instanceof Function,"Expected a class definition");let d=fn.get(m);return d?(Ln(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,fn.set(m,d),d)}const Oi=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,j.Z)(function*(){return!0})()}_set(h,_){var D=this;return(0,j.Z)(function*(){D.storage[h]=_})()}_get(h){var _=this;return(0,j.Z)(function*(){const D=_.storage[h];return void 0===D?null:D})()}_remove(h){var _=this;return(0,j.Z)(function*(){delete _.storage[h]})()}_addListener(h,_){}_removeListener(h,_){}}return m.type="NONE",m})();function Je(m,d,h){return`firebase:${m}:${d}:${h}`}class Kn{constructor(d,h,_){this.persistence=d,this.auth=h,this.userKey=_;const{config:D,name:M}=this.auth;this.fullUserKey=Je(this.userKey,D.apiKey,M),this.fullPersistenceKey=Je("persistence",D.apiKey,M),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,j.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?tt._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,j.Z)(function*(){if(h.persistence===d)return;const _=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,_?h.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,_="authUser"){return(0,j.Z)(function*(){if(!h.length)return new Kn(lt(Oi),d,_);const D=(yield Promise.all(h.map(function(){var Be=(0,j.Z)(function*(Qe){if(yield Qe._isAvailable())return Qe});return function(Qe){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let M=D[0]||lt(Oi);const X=Je(_,d.config.apiKey,d.name);let oe=null;for(const Be of h)try{const Qe=yield Be._get(X);if(Qe){const Xe=tt._fromJSON(d,Qe);Be!==M&&(oe=Xe),M=Be;break}}catch{}const xe=D.filter(Be=>Be._shouldAllowMigration);return M._shouldAllowMigration&&xe.length?(M=xe[0],oe&&(yield M._set(X,oe.toJSON())),yield Promise.all(h.map(function(){var Be=(0,j.Z)(function*(Qe){if(Qe!==M)try{yield Qe._remove(X)}catch{}});return function(Qe){return Be.apply(this,arguments)}}())),new Kn(M,d,_)):new Kn(M,d,_)})()}}function wn(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ct(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(ba(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(_c(d))return"Blackberry";if(Uh(d))return"Webos";if(qu(d))return"Safari";if((d.includes("chrome/")||mn(d))&&!d.includes("edge/"))return"Chrome";if(qo(d))return"Android";{const _=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ba(m=(0,be.z$)()){return/firefox\//i.test(m)}function qu(m=(0,be.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function mn(m=(0,be.z$)()){return/crios\//i.test(m)}function ct(m=(0,be.z$)()){return/iemobile/i.test(m)}function qo(m=(0,be.z$)()){return/android/i.test(m)}function _c(m=(0,be.z$)()){return/blackberry/i.test(m)}function Uh(m=(0,be.z$)()){return/webos/i.test(m)}function Go(m=(0,be.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function ke(m=(0,be.z$)()){return Go(m)||qo(m)||Uh(m)||_c(m)||/windows phone/i.test(m)||ct(m)}function bt(m,d=[]){let h;switch(m){case"Browser":h=wn((0,be.z$)());break;case"Worker":h=`${wn((0,be.z$)())}-${m}`;break;default:h=m}const _=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${Ze.SDK_VERSION}/${_}`}class Pt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const _=M=>new Promise((X,oe)=>{try{X(d(M))}catch(xe){oe(xe)}});_.onAbort=h,this.queue.push(_);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,j.Z)(function*(){if(h.auth.currentUser===d)return;const _=[];try{for(const D of h.queue)yield D(d),D.onAbort&&_.push(D.onAbort)}catch(D){_.reverse();for(const M of _)try{M()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:D?.message})}})()}}function Vt(){return(Vt=(0,j.Z)(function*(m,d={}){return Pe(m,"GET","/v2/passwordPolicy",ge(m,d))})).apply(this,arguments)}class ul{constructor(d){var h,_,D,M;const X=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=X.minPasswordLength)&&void 0!==h?h:6,X.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=X.maxPasswordLength),void 0!==X.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=X.containsLowercaseCharacter),void 0!==X.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=X.containsUppercaseCharacter),void 0!==X.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=X.containsNumericCharacter),void 0!==X.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=X.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(D=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==D?D:"",this.forceUpgradeOnSignin=null!==(M=d.forceUpgradeOnSignin)&&void 0!==M&&M,this.schemaVersion=d.schemaVersion}validatePassword(d){var h,_,D,M,X,oe;const xe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,xe),this.validatePasswordCharacterOptions(d,xe),xe.isValid&&(xe.isValid=null===(h=xe.meetsMinPasswordLength)||void 0===h||h),xe.isValid&&(xe.isValid=null===(_=xe.meetsMaxPasswordLength)||void 0===_||_),xe.isValid&&(xe.isValid=null===(D=xe.containsLowercaseLetter)||void 0===D||D),xe.isValid&&(xe.isValid=null===(M=xe.containsUppercaseLetter)||void 0===M||M),xe.isValid&&(xe.isValid=null===(X=xe.containsNumericCharacter)||void 0===X||X),xe.isValid&&(xe.isValid=null===(oe=xe.containsNonAlphanumericCharacter)||void 0===oe||oe),xe}validatePasswordLengthOptions(d,h){const _=this.customStrengthOptions.minPasswordLength,D=this.customStrengthOptions.maxPasswordLength;_&&(h.meetsMinPasswordLength=d.length>=_),D&&(h.meetsMaxPasswordLength=d.length<=D)}validatePasswordCharacterOptions(d,h){let _;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let D=0;D<d.length;D++)_=d.charAt(D),this.updatePasswordCharacterOptionsStatuses(h,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,h,_,D,M){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=D)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=M))}}class Ky{constructor(d,h,_,D){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=_,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SD(this),this.idTokenSubscription=new SD(this),this.beforeStateQueue=new Pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(d,h){var _=this;return h&&(this._popupRedirectResolver=lt(h)),this._initializationPromise=this.queue((0,j.Z)(function*(){var D,M;if(!_._deleted&&(_.persistenceManager=yield Kn.create(_,d),!_._deleted)){if(null!==(D=_._popupRedirectResolver)&&void 0!==D&&D._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(h),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,j.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(d){var h=this;return(0,j.Z)(function*(){try{const _=yield to(h,{idToken:d}),D=yield tt._fromGetAccountInfoResponse(h,_,d);yield h.directlySetCurrentUser(D)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var h=this;return(0,j.Z)(function*(){var _;if((0,Ze._isFirebaseServerApp)(h.app)){const oe=h.app.settings.authIdToken;return oe?new Promise(xe=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(oe).then(xe,xe))}):h.directlySetCurrentUser(null)}const D=yield h.assertedPersistence.getCurrentUser();let M=D,X=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const oe=null===(_=h.redirectUser)||void 0===_?void 0:_._redirectEventId,xe=M?._redirectEventId,Be=yield h.tryRedirectSignIn(d);(!oe||oe===xe)&&Be?.user&&(M=Be.user,X=!0)}if(!M)return h.directlySetCurrentUser(null);if(!M._redirectEventId){if(X)try{yield h.beforeStateQueue.runMiddleware(M)}catch(oe){M=D,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(oe))}return M?h.reloadAndSetCurrentUserOrClear(M):h.directlySetCurrentUser(null)}return Ae(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===M._redirectEventId?h.directlySetCurrentUser(M):h.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(d){var h=this;return(0,j.Z)(function*(){let _=null;try{_=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,j.Z)(function*(){try{yield Zr(d)}catch(_){if("auth/network-request-failed"!==_?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function hc(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,j.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,j.Z)(function*(){if((0,Ze._isFirebaseServerApp)(h.app))return Promise.reject(at(h));const _=d?(0,be.m9)(d):null;return _&&Ae(_.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(_&&_._clone(h))})()}_updateCurrentUser(d,h=!1){var _=this;return(0,j.Z)(function*(){if(!_._deleted)return d&&Ae(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),h||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,j.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,j.Z)(function*(){return(0,Ze._isFirebaseServerApp)(d.app)?Promise.reject(at(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var h=this;return(0,Ze._isFirebaseServerApp)(this.app)?Promise.reject(at(this)):this.queue((0,j.Z)(function*(){yield h.assertedPersistence.setPersistence(lt(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var h=this;return(0,j.Z)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const _=h._getPasswordPolicyInternal();return _.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,j.Z)(function*(){const h=yield function An(m){return Vt.apply(this,arguments)}(d),_=new ul(h);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new be.LL("auth","Firebase",d())}onAuthStateChanged(d,h,_){return this.registerStateListener(this.authStateSubscription,d,h,_)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,_){return this.registerStateListener(this.idTokenSubscription,d,h,_)}authStateReady(){return new Promise((d,h)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},h)}})}revokeAccessToken(d){var h=this;return(0,j.Z)(function*(){if(h.currentUser){const _=yield h.currentUser.getIdToken(),D={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=h.tenantId&&(D.tenantId=h.tenantId),yield function ne(m,d){return we.apply(this,arguments)}(h,D)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var _=this;return(0,j.Z)(function*(){const D=yield _.getOrInitRedirectPersistenceManager(h);return null===d?D.removeCurrentUser():D.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,j.Z)(function*(){if(!h.redirectPersistenceManager){const _=d&&lt(d)||h._popupRedirectResolver;Ae(_,h,"argument-error"),h.redirectPersistenceManager=yield Kn.create(h,[lt(_._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,j.Z)(function*(){var _,D;return h._isInitialized&&(yield h.queue((0,j.Z)(function*(){}))),(null===(_=h._currentUser)||void 0===_?void 0:_._redirectEventId)===d?h._currentUser:(null===(D=h.redirectUser)||void 0===D?void 0:D._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,j.Z)(function*(){if(d===h.currentUser)return h.queue((0,j.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,_,D){if(this._deleted)return()=>{};const M="function"==typeof h?h:h.next.bind(h);let X=!1;const oe=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(oe,this,"internal-error"),oe.then(()=>{X||M(this.currentUser)}),"function"==typeof h){const xe=d.addObserver(h,_,D);return()=>{X=!0,xe()}}{const xe=d.addObserver(h);return()=>{X=!0,xe()}}}directlySetCurrentUser(d){var h=this;return(0,j.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=bt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,j.Z)(function*(){var h;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const D=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();D&&(_["X-Firebase-Client"]=D);const M=yield d._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var d=this;return(0,j.Z)(function*(){var h;const _=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return _?.error&&function pr(m,...d){fr.logLevel<=St.in.WARN&&fr.warn(`Auth (${Ze.SDK_VERSION}): ${m}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function an(m){return(0,be.m9)(m)}class SD{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,be.ne)(h=>this.observer=h)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zh={loadJS:()=>(0,j.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qy(m){return zh.loadJS(m)}function kD(m){return`__${m}${Math.floor(1e6*Math.random())}`}class MD{constructor(d){this.type="recaptcha-enterprise",this.auth=an(d)}verify(d="verify",h=!1){var _=this;return(0,j.Z)(function*(){function M(){return M=(0,j.Z)(function*(oe){if(!h){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var xe=(0,j.Z)(function*(Be,Qe){Uu(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Xe=>{if(void 0!==Xe.recaptchaKey){const Pn=new fc(Xe);return null==oe.tenantId?oe._agentRecaptchaConfig=Pn:oe._tenantRecaptchaConfigs[oe.tenantId]=Pn,Be(Pn.siteKey)}Qe(new Error("recaptcha Enterprise site key undefined"))}).catch(Xe=>{Qe(Xe)})});return function(Be,Qe){return xe.apply(this,arguments)}}())}),M.apply(this,arguments)}function X(oe,xe,Be){const Qe=window.grecaptcha;Fr(Qe)?Qe.enterprise.ready(()=>{Qe.enterprise.execute(oe,{action:d}).then(Xe=>{xe(Xe)}).catch(()=>{xe("NO_RECAPTCHA")})}):Be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,xe)=>{(function D(oe){return M.apply(this,arguments)})(_.auth).then(Be=>{if(!h&&Fr(window.grecaptcha))X(Be,oe,xe);else{if(typeof window>"u")return void xe(new Error("RecaptchaVerifier is only supported in browser"));let Qe=function EO(){return zh.recaptchaEnterpriseScript}();0!==Qe.length&&(Qe+=Be),Qy(Qe).then(()=>{X(Be,oe,xe)}).catch(Xe=>{xe(Xe)})}}).catch(Be=>{xe(Be)})})})()}}function RD(m,d,h){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,j.Z)(function*(m,d,h,_=!1){const D=new MD(m);let M;try{M=yield D.verify(h)}catch{M=yield D.verify(h,!0)}const X=Object.assign({},d);return Object.assign(X,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(X,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(X,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),X})).apply(this,arguments)}function Se(m,d,h,_){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,j.Z)(function*(m,d,h,_){var D;if(null!==(D=m._getRecaptchaConfig())&&void 0!==D&&D.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const M=yield RD(m,d,h,"getOobCode"===h);return _(m,M)}return _(m,d).catch(function(){var M=(0,j.Z)(function*(X){if("auth/missing-recaptcha-token"===X.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const oe=yield RD(m,d,h,"getOobCode"===h);return _(m,oe)}return Promise.reject(X)});return function(X){return M.apply(this,arguments)}}())}),Jy.apply(this,arguments)}function Gu(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function $h(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class yc{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return Zn("not implemented")}_getIdTokenResponse(d){return Zn("not implemented")}_linkToIdToken(d,h){return Zn("not implemented")}_getReauthenticationResolver(d){return Zn("not implemented")}}function Bt(m,d){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:resetPassword",ge(m,d))})).apply(this,arguments)}function Er(){return(Er=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function rb(m,d){return sb.apply(this,arguments)}function sb(){return(sb=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function ob(){return(ob=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:update",ge(m,d))})).apply(this,arguments)}function DO(m,d){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signInWithPassword",ge(m,d))})).apply(this,arguments)}function bc(m,d){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:sendOobCode",ge(m,d))})).apply(this,arguments)}function Ku(){return(Ku=(0,j.Z)(function*(m,d){return bc(m,d)})).apply(this,arguments)}function OD(m,d){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,j.Z)(function*(m,d){return bc(m,d)})).apply(this,arguments)}function TO(m,d){return lb.apply(this,arguments)}function lb(){return(lb=(0,j.Z)(function*(m,d){return bc(m,d)})).apply(this,arguments)}function cb(){return(cb=(0,j.Z)(function*(m,d){return bc(m,d)})).apply(this,arguments)}function dl(){return(dl=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signInWithEmailLink",ge(m,d))})).apply(this,arguments)}function wc(){return(wc=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signInWithEmailLink",ge(m,d))})).apply(this,arguments)}class Xu extends yc{constructor(d,h,_,D=null){super("password",_),this._email=d,this._password=h,this._tenantId=D}static _fromEmailAndPassword(d,h){return new Xu(d,h,"password")}static _fromEmailAndCode(d,h,_=null){return new Xu(d,h,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,j.Z)(function*(){switch(h.signInMethod){case"password":return Se(d,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",DO);case"emailLink":return function IO(m,d){return dl.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:on(d,"internal-error")}})()}_linkToIdToken(d,h){var _=this;return(0,j.Z)(function*(){switch(_.signInMethod){case"password":return Se(d,{idToken:h,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rb);case"emailLink":return function Bm(m,d){return wc.apply(this,arguments)}(d,{idToken:h,email:_._email,oobCode:_._password});default:on(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Yo(m,d){return jm.apply(this,arguments)}function jm(){return(jm=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signInWithIdp",ge(m,d))})).apply(this,arguments)}class Nr extends yc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new Nr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):on("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:D}=h,M=(0,Yn._T)(h,["providerId","signInMethod"]);if(!_||!D)return null;const X=new Nr(_,D);return X.idToken=M.idToken||void 0,X.accessToken=M.accessToken||void 0,X.secret=M.secret,X.nonce=M.nonce,X.pendingToken=M.pendingToken||null,X}_getIdTokenResponse(d){return Yo(d,this.buildRequest())}_linkToIdToken(d,h){const _=this.buildRequest();return _.idToken=h,Yo(d,_)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Yo(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,be.xO)(h)}return d}}function Eo(){return(Eo=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:sendVerificationCode",ge(m,d))})).apply(this,arguments)}function ie(){return(ie=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signInWithPhoneNumber",ge(m,d))})).apply(this,arguments)}function Ve(){return(Ve=(0,j.Z)(function*(m,d){const h=yield At(m,"POST","/v1/accounts:signInWithPhoneNumber",ge(m,d));if(h.temporaryProof)throw gi(m,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Wh={USER_NOT_FOUND:"user-not-found"};function hl(){return(hl=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signInWithPhoneNumber",ge(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Wh)})).apply(this,arguments)}class fl extends yc{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new fl({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new fl({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function ND(m,d){return ie.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function db(m,d){return Ve.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Um(m,d){return hl.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:_,verificationCode:D}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:_,code:D}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:_,phoneNumber:D,temporaryProof:M}=d;return _||h||D||M?new fl({verificationId:h,verificationCode:_,phoneNumber:D,temporaryProof:M}):null}}class bs{constructor(d){var h,_,D,M,X,oe;const xe=(0,be.zd)((0,be.pd)(d)),Be=null!==(h=xe.apiKey)&&void 0!==h?h:null,Qe=null!==(_=xe.oobCode)&&void 0!==_?_:null,Xe=function LD(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=xe.mode)&&void 0!==D?D:null);Ae(Be&&Qe&&Xe,"argument-error"),this.apiKey=Be,this.operation=Xe,this.code=Qe,this.continueUrl=null!==(M=xe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(X=xe.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(oe=xe.tenantId)&&void 0!==oe?oe:null}static parseLink(d){const h=function VD(m){const d=(0,be.zd)((0,be.pd)(m)).link,h=d?(0,be.zd)((0,be.pd)(d)).deep_link_id:null,_=(0,be.zd)((0,be.pd)(m)).deep_link_id;return(_?(0,be.zd)((0,be.pd)(_)).link:null)||_||h||d||m}(d);try{return new bs(h)}catch{return null}}}let Kr=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(h,_){return Xu._fromEmailAndPassword(h,_)}static credentialWithLink(h,_){const D=bs.parseLink(_);return Ae(D,"argument-error"),Xu._fromEmailAndCode(h,D.code,D.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Qi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class zt extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Zo extends zt{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Ae("providerId"in h&&"signInMethod"in h,"argument-error"),Nr._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ae(d.idToken||d.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Zo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Zo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:_,oauthTokenSecret:D,pendingToken:M,nonce:X,providerId:oe}=d;if(!_&&!D&&!h&&!M||!oe)return null;try{return new Zo(oe)._credential({idToken:h,accessToken:_,nonce:X,pendingToken:M})}catch{return null}}}let qh=(()=>{class m extends zt{constructor(){super("facebook.com")}static credential(h){return Nr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Gh=(()=>{class m extends zt{constructor(){super("google.com"),this.addScope("profile")}static credential(h,_){return Nr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:_})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:_,oauthAccessToken:D}=h;if(!_&&!D)return null;try{return m.credential(_,D)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Hm=(()=>{class m extends zt{constructor(){super("github.com")}static credential(h){return Nr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Do extends yc{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return Yo(d,this.buildRequest())}_linkToIdToken(d,h){const _=this.buildRequest();return _.idToken=h,Yo(d,_)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Yo(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:D,pendingToken:M}=h;return _&&D&&M&&_===D?new Do(_,M):null}static _create(d,h){return new Do(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ju extends Qi{constructor(d){Ae(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Ju.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Ju.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=Do.fromJSON(d);return Ae(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:_}=d;if(!h||!_)return null;try{return Do._create(_,h)}catch{return null}}}let Yh=(()=>{class m extends zt{constructor(){super("twitter.com")}static credential(h,_){return Nr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:_})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:_,oauthTokenSecret:D}=h;if(!_||!D)return null;try{return m.credential(_,D)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function $m(m,d){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signUp",ge(m,d))})).apply(this,arguments)}class Dr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,_,D=!1){return(0,j.Z)(function*(){const M=yield tt._fromIdTokenResponse(d,_,D),X=Wm(_);return new Dr({user:M,providerId:X,_tokenResponse:_,operationType:h})})()}static _forOperation(d,h,_){return(0,j.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const D=Wm(_);return new Dr({user:d,providerId:D,_tokenResponse:_,operationType:h})})()}}function Wm(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function qm(){return(qm=(0,j.Z)(function*(m){var d;if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const h=an(m);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new Dr({user:h.currentUser,providerId:null,operationType:"signIn"});const _=yield $m(h,{returnSecureToken:!0}),D=yield Dr._fromIdTokenResponse(h,"signIn",_,!0);return yield h._updateCurrentUser(D.user),D})).apply(this,arguments)}class ed extends be.ZR{constructor(d,h,_,D){var M;super(h.code,h.message),this.operationType=_,this.user=D,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:d.name,tenantId:null!==(M=d.tenantId)&&void 0!==M?M:void 0,_serverResponse:h.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,h,_,D){return new ed(d,h,_,D)}}function pb(m,d,h,_){return("reauthenticate"===d?h._getReauthenticationResolver(m):h._getIdTokenResponse(m)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ed._fromErrorAndOperation(m,M,d,_):M})}function mb(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function Gm(){return Gm=(0,j.Z)(function*(m,d){const h=(0,be.m9)(m);yield Qh(!0,h,d);const{providerUserInfo:_}=yield function Hu(m,d){return Gr.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),D=mb(_||[]);return h.providerData=h.providerData.filter(M=>D.has(M.providerId)),D.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Gm.apply(this,arguments)}function Kh(m,d){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,j.Z)(function*(m,d,h=!1){const _=yield Yr(m,d._linkToIdToken(m.auth,yield m.getIdToken()),h);return Dr._forOperation(m,"link",_)})).apply(this,arguments)}function Qh(m,d,h){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,j.Z)(function*(m,d,h){yield Zr(d);const D=!1===m?"provider-already-linked":"no-such-provider";Ae(mb(d.providerData).has(h)===m,d.auth,D)})).apply(this,arguments)}function gb(m,d){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,j.Z)(function*(m,d,h=!1){const{auth:_}=m;if((0,Ze._isFirebaseServerApp)(_.app))return Promise.reject(at(_));const D="reauthenticate";try{const M=yield Yr(m,pb(_,D,d,m),h);Ae(M.idToken,_,"internal-error");const X=_a(M.idToken);Ae(X,_,"internal-error");const{sub:oe}=X;return Ae(m.uid===oe,_,"user-mismatch"),Dr._forOperation(m,D,M)}catch(M){throw"auth/user-not-found"===M?.code&&on(_,"user-mismatch"),M}})).apply(this,arguments)}function _b(m,d){return Km.apply(this,arguments)}function Km(){return(Km=(0,j.Z)(function*(m,d,h=!1){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const _="signIn",D=yield pb(m,_,d),M=yield Dr._fromIdTokenResponse(m,_,D);return h||(yield m._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Jh(m,d){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,j.Z)(function*(m,d){return _b(an(m),d)})).apply(this,arguments)}function vb(m,d){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,j.Z)(function*(m,d){const h=(0,be.m9)(m);return yield Qh(!1,h,d.providerId),Kh(h,d)})).apply(this,arguments)}function yb(m,d){return gt.apply(this,arguments)}function gt(){return(gt=(0,j.Z)(function*(m,d){return gb((0,be.m9)(m),d)})).apply(this,arguments)}function ef(){return(ef=(0,j.Z)(function*(m,d){return At(m,"POST","/v1/accounts:signInWithCustomToken",ge(m,d))})).apply(this,arguments)}function Fi(){return Fi=(0,j.Z)(function*(m,d){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const h=an(m),_=yield function BD(m,d){return ef.apply(this,arguments)}(h,{token:d,returnSecureToken:!0}),D=yield Dr._fromIdTokenResponse(h,"signIn",_);return yield h._updateCurrentUser(D.user),D}),Fi.apply(this,arguments)}class jt{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?Ni._fromServerResponse(d,h):"totpInfo"in h?mr._fromServerResponse(d,h):on(d,"internal-error")}}class Ni extends jt{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new Ni(h)}}class mr extends jt{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new mr(h)}}function Qo(m,d,h){var _;Ae((null===(_=h.url)||void 0===_?void 0:_.length)>0,m,"invalid-continue-uri"),Ae(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Ae(h.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Ae(h.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Lr(m){return tf.apply(this,arguments)}function tf(){return(tf=(0,j.Z)(function*(m){const d=an(m);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function Cc(){return(Cc=(0,j.Z)(function*(m,d,h){const _=an(m),D={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};h&&Qo(_,D,h),yield Se(_,D,"getOobCode",OD)})).apply(this,arguments)}function Xm(){return Xm=(0,j.Z)(function*(m,d,h){yield Bt((0,be.m9)(m),{oobCode:d,newPassword:h}).catch(function(){var _=(0,j.Z)(function*(D){throw"auth/password-does-not-meet-requirements"===D.code&&Lr(m),D});return function(D){return _.apply(this,arguments)}}())}),Xm.apply(this,arguments)}function $e(){return $e=(0,j.Z)(function*(m,d){yield function kn(m,d){return ob.apply(this,arguments)}((0,be.m9)(m),{oobCode:d})}),$e.apply(this,arguments)}function wt(m,d){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,j.Z)(function*(m,d){const h=(0,be.m9)(m),_=yield Bt(h,{oobCode:d}),D=_.requestType;switch(Ae(D,h,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(_.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(_.mfaInfo,h,"internal-error");default:Ae(_.email,h,"internal-error")}let M=null;return _.mfaInfo&&(M=jt._fromServerResponse(an(h),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:D}})).apply(this,arguments)}function pl(){return(pl=(0,j.Z)(function*(m,d){const{data:h}=yield wt((0,be.m9)(m),d);return h.email})).apply(this,arguments)}function wa(){return(wa=(0,j.Z)(function*(m,d,h){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const _=an(m),X=yield Se(_,{returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$m).catch(xe=>{throw"auth/password-does-not-meet-requirements"===xe.code&&Lr(m),xe}),oe=yield Dr._fromIdTokenResponse(_,"signIn",X);return yield _._updateCurrentUser(oe.user),oe})).apply(this,arguments)}function xa(){return(xa=(0,j.Z)(function*(m,d,h){const _=an(m),D={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function M(X,oe){Ae(oe.handleCodeInApp,_,"argument-error"),oe&&Qo(_,X,oe)})(D,h),yield Se(_,D,"getOobCode",TO)})).apply(this,arguments)}function nf(){return(nf=(0,j.Z)(function*(m,d,h){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const _=(0,be.m9)(m),D=Kr.credentialWithLink(d,h||vs());return Ae(D._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Jh(_,D)})).apply(this,arguments)}function Qn(){return(Qn=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:createAuthUri",ge(m,d))})).apply(this,arguments)}function Ea(){return Ea=(0,j.Z)(function*(m,d){const _={identifier:d,continueUri:Ps()?vs():"http://localhost"},{signinMethods:D}=yield function xc(m,d){return Qn.apply(this,arguments)}((0,be.m9)(m),_);return D||[]}),Ea.apply(this,arguments)}function ml(){return ml=(0,j.Z)(function*(m,d){const h=(0,be.m9)(m),D={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&Qo(h.auth,D,d);const{email:M}=yield function ab(m,d){return Ku.apply(this,arguments)}(h.auth,D);M!==m.email&&(yield m.reload())}),ml.apply(this,arguments)}function So(){return So=(0,j.Z)(function*(m,d,h){const _=(0,be.m9)(m),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};h&&Qo(_.auth,M,h);const{email:X}=yield function SO(m,d){return cb.apply(this,arguments)}(_.auth,M);X!==m.email&&(yield m.reload())}),So.apply(this,arguments)}function gl(){return(gl=(0,j.Z)(function*(m,d){return Pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ot(){return Ot=(0,j.Z)(function*(m,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const _=(0,be.m9)(m),M={idToken:yield _.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},X=yield Yr(_,function Xo(m,d){return gl.apply(this,arguments)}(_.auth,M));_.displayName=X.displayName||null,_.photoURL=X.photoUrl||null;const oe=_.providerData.find(({providerId:xe})=>"password"===xe);oe&&(oe.displayName=_.displayName,oe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(X)}),Ot.apply(this,arguments)}function eg(m,d,h){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,j.Z)(function*(m,d,h){const{auth:_}=m,M={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(M.email=d),h&&(M.password=h);const X=yield Yr(m,function ib(m,d){return Er.apply(this,arguments)}(_,M));yield m._updateTokensIfNecessary(X,!0)}),Vs.apply(this,arguments)}class so{constructor(d,h,_={}){this.isNewUser=d,this.providerId=h,this.profile=_}}class Ec extends so{constructor(d,h,_,D){super(d,h,_),this.username=D}}class gr extends so{constructor(d,h){super(d,"facebook.com",h)}}class kO extends Ec{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Qr extends so{constructor(d,h){super(d,"google.com",h)}}class Vr extends Ec{constructor(d,h,_){super(d,"twitter.com",h,_)}}function tg(m){const{user:d,_tokenResponse:h}=m;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function rf(m){var d,h;if(!m)return null;const{providerId:_}=m,D=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},M=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!_&&m?.idToken){const X=null===(h=null===(d=_a(m.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(X)return new so(M,"anonymous"!==X&&"custom"!==X?X:null)}if(!_)return null;switch(_){case"facebook.com":return new gr(M,D);case"github.com":return new kO(M,D);case"google.com":return new Qr(M,D);case"twitter.com":return new Vr(M,D,m.screenName||null);case"custom":case"anonymous":return new so(M,null);default:return new so(M,_,D)}}(h)}class Tc{constructor(d,h,_){this.type=d,this.credential=h,this.user=_}static _fromIdtoken(d,h){return new Tc("enroll",d,h)}static _fromMfaPendingCredential(d){return new Tc("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,_;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Tc._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Tc._fromIdtoken(d.multiFactorSession.idToken)}return null}}class xb{constructor(d,h,_){this.session=d,this.hints=h,this.signInResolver=_}static _fromError(d,h){const _=an(d),D=h.customData._serverResponse,M=(D.mfaInfo||[]).map(oe=>jt._fromServerResponse(_,oe));Ae(D.mfaPendingCredential,_,"internal-error");const X=Tc._fromMfaPendingCredential(D.mfaPendingCredential);return new xb(X,M,function(){var oe=(0,j.Z)(function*(xe){const Be=yield xe._process(_,X);delete D.mfaInfo,delete D.mfaPendingCredential;const Qe=Object.assign(Object.assign({},D),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(h.operationType){case"signIn":const Xe=yield Dr._fromIdTokenResponse(_,h.operationType,Qe);return yield _._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return Ae(h.user,_,"internal-error"),Dr._forOperation(h.user,h.operationType,Qe);default:on(_,"internal-error")}});return function(xe){return oe.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,j.Z)(function*(){return h.signInResolver(d)})()}}class sf{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(_=>jt._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new sf(d)}getSession(){var d=this;return(0,j.Z)(function*(){return Tc._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,h){var _=this;return(0,j.Z)(function*(){const D=d,M=yield _.getSession(),X=yield Yr(_.user,D._process(_.user.auth,M,h));return yield _.user._updateTokensIfNecessary(X),_.user.reload()})()}unenroll(d){var h=this;return(0,j.Z)(function*(){const _="string"==typeof d?d:d.uid,D=yield h.user.getIdToken();try{const M=yield Yr(h.user,function LO(m,d){return Pe(m,"POST","/v2/accounts/mfaEnrollment:withdraw",ge(m,d))}(h.user.auth,{idToken:D,mfaEnrollmentId:_}));h.enrolledFactors=h.enrolledFactors.filter(({uid:X})=>X!==_),yield h.user._updateTokensIfNecessary(M),yield h.user.reload()}catch(M){throw M}})()}}const af=new WeakMap,ig="__sak";class HD{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(ig,"1"),this.storage.removeItem(ig),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const bi=(()=>{class m extends HD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,_)=>this.onStorageEvent(h,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _l(){const m=(0,be.z$)();return qu(m)||Go(m)}()&&function _t(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ke(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const _ of Object.keys(this.listeners)){const D=this.storage.getItem(_),M=this.localCache[_];D!==M&&h(_,M,D)}}onStorageEvent(h,_=!1){if(!h.key)return void this.forAllChangedKeys((oe,xe,Be)=>{this.notifyListeners(oe,Be)});const D=h.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(D);if(h.newValue!==oe)null!==h.newValue?this.storage.setItem(D,h.newValue):this.storage.removeItem(D);else if(this.localCache[D]===h.newValue&&!_)return}const M=()=>{const oe=this.storage.getItem(D);!_&&this.localCache[D]===oe||this.notifyListeners(D,oe)},X=this.storage.getItem(D);!function de(){return(0,be.w1)()&&10===document.documentMode}()||X===h.newValue||h.newValue===h.oldValue?M():setTimeout(M,10)}notifyListeners(h,_){this.localCache[h]=_;const D=this.listeners[h];if(D)for(const M of Array.from(D))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,_,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:_,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(_)}_removeListener(h,_){this.listeners[h]&&(this.listeners[h].delete(_),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,_){var D=()=>super._set,M=this;return(0,j.Z)(function*(){yield D().call(M,h,_),M.localCache[h]=JSON.stringify(_)})()}_get(h){var _=()=>super._get,D=this;return(0,j.Z)(function*(){const M=yield _().call(D,h);return D.localCache[h]=JSON.stringify(M),M})()}_remove(h){var _=()=>super._remove,D=this;return(0,j.Z)(function*(){yield _().call(D,h),delete D.localCache[h]})()}}return m.type="LOCAL",m})(),Li=(()=>{class m extends HD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,_){}_removeListener(h,_){}}return m.type="SESSION",m})();let Db=(()=>{class m{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const _=this.receivers.find(M=>M.isListeningto(h));if(_)return _;const D=new m(h);return this.receivers.push(D),D}isListeningto(h){return this.eventTarget===h}handleEvent(h){var _=this;return(0,j.Z)(function*(){const D=h,{eventId:M,eventType:X,data:oe}=D.data,xe=_.handlersMap[X];if(!xe?.size)return;D.ports[0].postMessage({status:"ack",eventId:M,eventType:X});const Be=Array.from(xe).map(function(){var Xe=(0,j.Z)(function*(Pn){return Pn(D.origin,oe)});return function(Pn){return Xe.apply(this,arguments)}}()),Qe=yield function Eb(m){return Promise.all(m.map(function(){var d=(0,j.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(_){return{fulfilled:!1,reason:_}}});return function(h){return d.apply(this,arguments)}}()))}(Be);D.ports[0].postMessage({status:"done",eventId:M,eventType:X,response:Qe})})()}_subscribe(h,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(_)}_unsubscribe(h,_){this.handlersMap[h]&&_&&this.handlersMap[h].delete(_),(!_||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Sc(m="",d=10){let h="";for(let _=0;_<d;_++)h+=Math.floor(10*Math.random());return m+h}class Tb{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,_=50){var D=this;return(0,j.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let X,oe;return new Promise((xe,Be)=>{const Qe=Sc("",20);M.port1.start();const Xe=setTimeout(()=>{Be(new Error("unsupported_event"))},_);oe={messageChannel:M,onMessage(Pn){const zs=Pn;if(zs.data.eventId===Qe)switch(zs.data.status){case"ack":clearTimeout(Xe),X=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),xe(zs.data.response);break;default:clearTimeout(Xe),clearTimeout(X),Be(new Error("invalid_response"))}}},D.handlers.add(oe),M.port1.addEventListener("message",oe.onMessage),D.target.postMessage({eventType:d,eventId:Qe,data:h},[M.port2])}).finally(()=>{oe&&D.removeMessageHandler(oe)})})()}}function di(){return window}function sd(){return typeof di().WorkerGlobalScope<"u"&&"function"==typeof di().importScripts}function lf(){return(lf=(0,j.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const od="firebaseLocalStorageDb",Jo="firebaseLocalStorage",og="fbase_key";class cf{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function ag(m,d){return m.transaction([Jo],d?"readwrite":"readonly").objectStore(Jo)}function lg(){const m=indexedDB.open(od,1);return new Promise((d,h)=>{m.addEventListener("error",()=>{h(m.error)}),m.addEventListener("upgradeneeded",()=>{const _=m.result;try{_.createObjectStore(Jo,{keyPath:og})}catch(D){h(D)}}),m.addEventListener("success",(0,j.Z)(function*(){const _=m.result;_.objectStoreNames.contains(Jo)?d(_):(_.close(),yield function jO(){const m=indexedDB.deleteDatabase(od);return new cf(m).toPromise()}(),d(yield lg()))}))})}function kb(m,d,h){return Mb.apply(this,arguments)}function Mb(){return(Mb=(0,j.Z)(function*(m,d,h){const _=ag(m,!0).put({[og]:d,value:h});return new cf(_).toPromise()})).apply(this,arguments)}function ld(){return(ld=(0,j.Z)(function*(m,d){const h=ag(m,!1).get(d),_=yield new cf(h).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Pb(m,d){const h=ag(m,!0).delete(d);return new cf(h).toPromise()}const Ic=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,j.Z)(function*(){return h.db||(h.db=yield lg()),h.db})()}_withRetries(h){var _=this;return(0,j.Z)(function*(){let D=0;for(;;)try{const M=yield _._openDb();return yield h(M)}catch(M){if(D++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,j.Z)(function*(){return sd()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,j.Z)(function*(){h.receiver=Db._getInstance(function Ab(){return sd()?self:null}()),h.receiver._subscribe("keyChanged",function(){var _=(0,j.Z)(function*(D,M){return{keyProcessed:(yield h._poll()).includes(M.key)}});return function(D,M){return _.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var _=(0,j.Z)(function*(D,M){return["keyChanged"]});return function(D,M){return _.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,j.Z)(function*(){var _,D;if(h.activeServiceWorker=yield function sg(){return lf.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Tb(h.activeServiceWorker);const M=yield h.sender._send("ping",{},800);M&&null!==(_=M[0])&&void 0!==_&&_.fulfilled&&null!==(D=M[0])&&void 0!==D&&D.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var _=this;return(0,j.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Ib(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:h},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,j.Z)(function*(){try{if(!indexedDB)return!1;const h=yield lg();return yield kb(h,ig,"1"),yield Pb(h,ig),!0}catch{}return!1})()}_withPendingWrite(h){var _=this;return(0,j.Z)(function*(){_.pendingWrites++;try{yield h()}finally{_.pendingWrites--}})()}_set(h,_){var D=this;return(0,j.Z)(function*(){return D._withPendingWrite((0,j.Z)(function*(){return yield D._withRetries(M=>kb(M,h,_)),D.localCache[h]=_,D.notifyServiceWorker(h)}))})()}_get(h){var _=this;return(0,j.Z)(function*(){const D=yield _._withRetries(M=>function Rb(m,d){return ld.apply(this,arguments)}(M,h));return _.localCache[h]=D,D})()}_remove(h){var _=this;return(0,j.Z)(function*(){return _._withPendingWrite((0,j.Z)(function*(){return yield _._withRetries(D=>Pb(D,h)),delete _.localCache[h],_.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,j.Z)(function*(){const _=yield h._withRetries(X=>{const oe=ag(X,!1).getAll();return new cf(oe).toPromise()});if(!_)return[];if(0!==h.pendingWrites)return[];const D=[],M=new Set;if(0!==_.length)for(const{fbase_key:X,value:oe}of _)M.add(X),JSON.stringify(h.localCache[X])!==JSON.stringify(oe)&&(h.notifyListeners(X,oe),D.push(X));for(const X of Object.keys(h.localCache))h.localCache[X]&&!M.has(X)&&(h.notifyListeners(X,null),D.push(X));return D})()}notifyListeners(h,_){this.localCache[h]=_;const D=this.listeners[h];if(D)for(const M of Array.from(D))M(_)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,j.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(_)}_removeListener(h,_){this.listeners[h]&&(this.listeners[h].delete(_),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),cd=1e12;class GD{constructor(d){this.auth=d,this.counter=cd,this._widgets=new Map}render(d,h){const _=this.counter;return this._widgets.set(_,new Nb(d,this.auth.name,h||{})),this.counter++,_}reset(d){var h;const _=d||cd;null===(h=this._widgets.get(_))||void 0===h||h.delete(),this._widgets.delete(_)}getResponse(d){var h;return(null===(h=this._widgets.get(d||cd))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,j.Z)(function*(){var _;return null===(_=h._widgets.get(d||cd))||void 0===_||_.execute(),""})()}}class Nb{constructor(d,h,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof d?document.getElementById(d):d;Ae(D,"argument-error",{appName:h}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function YD(m){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<m;_++)d.push(h.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Lb=kD("rcb"),ZD=new fe(3e4,6e4);class Vi{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=di().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return Ae(function Vb(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&xr(di().grecaptcha)?Promise.resolve(di().grecaptcha):new Promise((_,D)=>{const M=di().setTimeout(()=>{D(bn(d,"network-request-failed"))},ZD.get());di()[Lb]=()=>{di().clearTimeout(M),delete di()[Lb];const oe=di().grecaptcha;if(!oe||!xr(oe))return void D(bn(d,"internal-error"));const xe=oe.render;oe.render=(Be,Qe)=>{const Xe=xe(Be,Qe);return this.counter++,Xe},this.hostLanguage=h,_(oe)},Qy(`${function ID(){return zh.recaptchaV2Script}()}?${(0,be.xO)({onload:Lb,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(M),D(bn(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=di().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class KD{load(d){return(0,j.Z)(function*(){return new GD(d)})()}clearedOneInstance(){}}const Bb="recaptcha",jb={theme:"light",type:"image"};class Ub{constructor(d,h,_=Object.assign({},jb)){this.parameters=_,this.type=Bb,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(d),this.isInvisible="invisible"===this.parameters.size,Ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof h?document.getElementById(h):h;Ae(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new KD:new Vi,this.validateStartingState()}verify(){var d=this;return(0,j.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(h)||new Promise(M=>{const X=oe=>{oe&&(d.tokenChangeListeners.delete(X),M(oe))};d.tokenChangeListeners.add(X),d.isInvisible&&_.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(_=>_(h)),"function"==typeof d)d(h);else if("string"==typeof d){const _=di()[d];"function"==typeof _&&_(h)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,j.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const _=document.createElement("div");h.appendChild(_),h=_}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,j.Z)(function*(){Ae(Ps()&&!sd(),d.auth,"internal-error"),yield function QD(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function al(m){return ci.apply(this,arguments)}(d.auth);Ae(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ud{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=fl._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function Bs(){return(Bs=(0,j.Z)(function*(m,d,h){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const _=an(m),D=yield vl(_,d,(0,be.m9)(h));return new ud(D,M=>Jh(_,M))})).apply(this,arguments)}function uf(){return(uf=(0,j.Z)(function*(m,d,h){const _=(0,be.m9)(m);yield Qh(!1,_,"phone");const D=yield vl(_.auth,d,(0,be.m9)(h));return new ud(D,M=>vb(_,M))})).apply(this,arguments)}function dd(){return(dd=(0,j.Z)(function*(m,d,h){const _=(0,be.m9)(m);if((0,Ze._isFirebaseServerApp)(_.auth.app))return Promise.reject(at(_.auth));const D=yield vl(_.auth,d,(0,be.m9)(h));return new ud(D,M=>yb(_,M))})).apply(this,arguments)}function vl(m,d,h){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,j.Z)(function*(m,d,h){var _;const D=yield h.verify();try{let M;if(Ae("string"==typeof D,m,"argument-error"),Ae(h.type===Bb,m,"argument-error"),M="string"==typeof d?{phoneNumber:d}:d,"session"in M){const X=M.session;if("phoneNumber"in M)return Ae("enroll"===X.type,m,"internal-error"),(yield function OO(m,d){return Pe(m,"POST","/v2/accounts/mfaEnrollment:start",ge(m,d))}(m,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Ae("signin"===X.type,m,"internal-error");const oe=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return Ae(oe,m,"missing-multi-factor-info"),(yield function Ob(m,d){return Pe(m,"POST","/v2/accounts/mfaSignIn:start",ge(m,d))}(m,{mfaPendingCredential:X.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield function FD(m,d){return Eo.apply(this,arguments)}(m,{phoneNumber:M.phoneNumber,recaptchaToken:D});return X}}finally{h._reset()}}),Sr.apply(this,arguments)}function df(){return(df=(0,j.Z)(function*(m,d){const h=(0,be.m9)(m);if((0,Ze._isFirebaseServerApp)(h.auth.app))return Promise.reject(at(h.auth));yield Kh(h,d)})).apply(this,arguments)}let Ao=(()=>{class m{constructor(h){this.providerId=m.PROVIDER_ID,this.auth=an(h)}verifyPhoneNumber(h,_){return vl(this.auth,h,(0,be.m9)(_))}static credential(h,_){return fl._fromVerification(h,_)}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:_,temporaryProof:D}=h;return _&&D?fl._fromTokenResponse(_,D):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Bi(m,d){return d?lt(d):(Ae(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class ug extends yc{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Yo(d,this._buildIdpRequest())}_linkToIdToken(d,h){return Yo(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return Yo(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function eT(m){return _b(m.auth,new ug(m),m.bypassAuthState)}function tT(m){const{auth:d,user:h}=m;return Ae(h,d,"internal-error"),gb(h,new ug(m),m.bypassAuthState)}function Ta(m){return hf.apply(this,arguments)}function hf(){return(hf=(0,j.Z)(function*(m){const{auth:d,user:h}=m;return Ae(h,d,"internal-error"),Kh(h,new ug(m),m.bypassAuthState)})).apply(this,arguments)}class Hb{constructor(d,h,_,D,M=!1){this.auth=d,this.resolver=_,this.user=D,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,j.Z)(function*(_,D){d.pendingPromise={resolve:_,reject:D};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(M){d.reject(M)}});return function(_,D){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,j.Z)(function*(){const{urlResponse:_,sessionId:D,postBody:M,tenantId:X,error:oe,type:xe}=d;if(oe)return void h.reject(oe);const Be={auth:h.auth,requestUri:_,sessionId:D,tenantId:X||void 0,postBody:M||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(xe)(Be))}catch(Qe){h.reject(Qe)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return eT;case"linkViaPopup":case"linkViaRedirect":return Ta;case"reauthViaPopup":case"reauthViaRedirect":return tT;default:on(this.auth,"internal-error")}}resolve(d){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $b=new fe(2e3,1e4);function ff(){return(ff=(0,j.Z)(function*(m,d,h){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(bn(m,"operation-not-supported-in-this-environment"));const _=an(m);mi(m,d,Qi);const D=Bi(_,h);return new dg(_,"signInViaPopup",d,D).executeNotNull()})).apply(this,arguments)}function dt(){return(dt=(0,j.Z)(function*(m,d,h){const _=(0,be.m9)(m);if((0,Ze._isFirebaseServerApp)(_.auth.app))return Promise.reject(bn(_.auth,"operation-not-supported-in-this-environment"));mi(_.auth,d,Qi);const D=Bi(_.auth,h);return new dg(_.auth,"reauthViaPopup",d,D,_).executeNotNull()})).apply(this,arguments)}function Gb(){return(Gb=(0,j.Z)(function*(m,d,h){const _=(0,be.m9)(m);mi(_.auth,d,Qi);const D=Bi(_.auth,h);return new dg(_.auth,"linkViaPopup",d,D,_).executeNotNull()})).apply(this,arguments)}let dg=(()=>{class m extends Hb{constructor(h,_,D,M,X){super(h,_,M,X),this.provider=D,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var h=this;return(0,j.Z)(function*(){const _=yield h.execute();return Ae(_,h.auth,"internal-error"),_})()}onExecution(){var h=this;return(0,j.Z)(function*(){Ln(1===h.filter.length,"Popup operations only handle one event");const _=Sc();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],_),h.authWindow.associatedEvent=_,h.resolver._originValidation(h.auth).catch(D=>{h.reject(D)}),h.resolver._isIframeWebStorageSupported(h.auth,D=>{D||h.reject(bn(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const h=()=>{var _,D;this.pollId=null!==(D=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==D&&D.closed?window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,$b.get())};h()}}return m.currentPopupAction=null,m})();const iT="pendingRedirect",hd=new Map;class Yb extends Hb{constructor(d,h,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,j.Z)(function*(){let _=hd.get(h.auth._key());if(!_){try{const M=(yield function Ac(m,d){return hg.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;_=()=>Promise.resolve(M)}catch(D){_=()=>Promise.reject(D)}hd.set(h.auth._key(),_)}return h.bypassAuthState||hd.set(h.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,_=this;return(0,j.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(_,d);if("unknown"!==d.type){if(d.eventId){const D=yield _.auth._redirectUserForId(d.eventId);if(D)return _.user=D,h().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,j.Z)(function*(){})()}cleanUp(){}}function hg(){return(hg=(0,j.Z)(function*(m,d){const h=qt(d),_=Te(m);if(!(yield _._isAvailable()))return!1;const D="true"===(yield _._get(h));return yield _._remove(h),D})).apply(this,arguments)}function fg(m,d){return pg.apply(this,arguments)}function pg(){return(pg=(0,j.Z)(function*(m,d){return Te(m)._set(qt(d),"true")})).apply(this,arguments)}function mg(m,d){hd.set(m._key(),d)}function Te(m){return lt(m._redirectPersistence)}function qt(m){return Je(iT,m.config.apiKey,m.name)}function J(m,d,h){return function ee(m,d,h){return ji.apply(this,arguments)}(m,d,h)}function ji(){return(ji=(0,j.Z)(function*(m,d,h){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const _=an(m);mi(m,d,Qi),yield _._initializationPromise;const D=Bi(_,h);return yield fg(D,_),D._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Zb(m,d,h){return function fd(m,d,h){return js.apply(this,arguments)}(m,d,h)}function js(){return(js=(0,j.Z)(function*(m,d,h){const _=(0,be.m9)(m);if(mi(_.auth,d,Qi),(0,Ze._isFirebaseServerApp)(_.auth.app))return Promise.reject(at(_.auth));yield _.auth._initializationPromise;const D=Bi(_.auth,h);yield fg(D,_.auth);const M=yield yg(_);return D._openRedirect(_.auth,d,"reauthViaRedirect",M)})).apply(this,arguments)}function gg(m,d,h){return function _g(m,d,h){return vg.apply(this,arguments)}(m,d,h)}function vg(){return(vg=(0,j.Z)(function*(m,d,h){const _=(0,be.m9)(m);mi(_.auth,d,Qi),yield _.auth._initializationPromise;const D=Bi(_.auth,h);yield Qh(!1,_,d.providerId),yield fg(D,_.auth);const M=yield yg(_);return D._openRedirect(_.auth,d,"linkViaRedirect",M)})).apply(this,arguments)}function pf(){return(pf=(0,j.Z)(function*(m,d){return yield an(m)._initializationPromise,Xi(m,d,!1)})).apply(this,arguments)}function Xi(m,d){return oo.apply(this,arguments)}function oo(){return(oo=(0,j.Z)(function*(m,d,h=!1){if((0,Ze._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const _=an(m),D=Bi(_,d),X=yield new Yb(_,D,h).execute();return X&&!h&&(delete X.user._redirectEventId,yield _._persistUserIfCurrent(X.user),yield _._setRedirectUser(null,d)),X})).apply(this,arguments)}function yg(m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,j.Z)(function*(m){const d=Sc(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class Kb{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(h=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function sT(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qb(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var _;if(d.error&&!Qb(d)){const D=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";h.onError(bn(this.auth,D))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const _=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bg(d))}saveEventToCache(d){this.cachedEventUids.add(bg(d)),this.lastProcessedEventTime=Date.now()}}function bg(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function Qb({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function mf(m){return pd.apply(this,arguments)}function pd(){return(pd=(0,j.Z)(function*(m,d={}){return Pe(m,"GET","/v1/projects",d)})).apply(this,arguments)}const Xb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wg=/^https?/;function gf(){return(gf=(0,j.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield mf(m);for(const h of d)try{if(Cg(h))return}catch{}on(m,"unauthorized-domain")})).apply(this,arguments)}function Cg(m){const d=vs(),{protocol:h,hostname:_}=new URL(d);if(m.startsWith("chrome-extension://")){const X=new URL(m);return""===X.hostname&&""===_?"chrome-extension:"===h&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&X.hostname===_}if(!wg.test(h))return!1;if(Xb.test(m))return _===m;const D=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(_)}const Jb=new fe(3e4,6e4);function xg(){const m=di().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let h=0;h<m.CP.length;h++)m.CP[h]=null}let md=null;const aT=new fe(5e3,15e3),lT="__/auth/iframe",Br="emulator/auth/iframe",yl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cT(m){const d=m.config;Ae(d.authDomain,m,"auth-domain-config-required");const h=d.emulator?_e(d,Br):`https://${m.config.authDomain}/${lT}`,_={apiKey:d.apiKey,appName:m.name,v:Ze.SDK_VERSION},D=Xn.get(m.config.apiHost);D&&(_.eid=D);const M=m._getFrameworks();return M.length&&(_.fw=M.join(",")),`${h}?${(0,be.xO)(_).slice(1)}`}function Dg(){return Dg=(0,j.Z)(function*(m){const d=yield function Eg(m){return md=md||function e0(m){return new Promise((d,h)=>{var _,D,M;function X(){xg(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{xg(),h(bn(m,"network-request-failed"))},timeout:Jb.get()})}if(null!==(D=null===(_=di().gapi)||void 0===_?void 0:_.iframes)&&void 0!==D&&D.Iframe)d(gapi.iframes.getContext());else{if(null===(M=di().gapi)||void 0===M||!M.load){const oe=kD("iframefcb");return di()[oe]=()=>{gapi.load?X():h(bn(m,"network-request-failed"))},Qy(`${function AD(){return zh.gapiScript}()}?onload=${oe}`).catch(xe=>h(xe))}X()}}).catch(d=>{throw md=null,d})}(m),md}(m),h=di().gapi;return Ae(h,m,"internal-error"),d.open({where:document.body,url:cT(m),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yl,dontclear:!0},_=>new Promise(function(){var D=(0,j.Z)(function*(M,X){yield _.restyle({setHideOnLeave:!1});const oe=bn(m,"network-request-failed"),xe=di().setTimeout(()=>{X(oe)},aT.get());function Be(){di().clearTimeout(xe),M(_)}_.ping(Be).then(Be,()=>{X(oe)})});return function(M,X){return D.apply(this,arguments)}}()))}),Dg.apply(this,arguments)}const dT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class r0{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const bf="__/auth/handler",Tg="emulator/auth/handler",s0=encodeURIComponent("fac");function wf(m,d,h,_,D,M){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,j.Z)(function*(m,d,h,_,D,M){Ae(m.config.authDomain,m,"auth-domain-config-required"),Ae(m.config.apiKey,m,"invalid-api-key");const X={apiKey:m.config.apiKey,appName:m.name,authType:h,redirectUrl:_,v:Ze.SDK_VERSION,eventId:D};if(d instanceof Qi){d.setDefaultLanguage(m.languageCode),X.providerId=d.providerId||"",(0,be.xb)(d.getCustomParameters())||(X.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Qe,Xe]of Object.entries(M||{}))X[Qe]=Xe}if(d instanceof zt){const Qe=d.getScopes().filter(Xe=>""!==Xe);Qe.length>0&&(X.scopes=Qe.join(","))}m.tenantId&&(X.tid=m.tenantId);const oe=X;for(const Qe of Object.keys(oe))void 0===oe[Qe]&&delete oe[Qe];const xe=yield m._getAppCheckToken(),Be=xe?`#${s0}=${encodeURIComponent(xe)}`:"";return`${function kc({config:m}){return m.emulator?_e(m,Tg):`https://${m.authDomain}/${bf}`}(m)}?${(0,be.xO)(oe).slice(1)}${Be}`})).apply(this,arguments)}const bl="webStorageSupport",fT=class hT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Li,this._completeRedirectFn=Xi,this._overrideRedirectResult=mg}_openPopup(d,h,_,D){var M=this;return(0,j.Z)(function*(){var X;Ln(null===(X=M.eventManagers[d._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const oe=yield wf(d,h,_,vs(),D);return function vf(m,d,h,_=500,D=600){const M=Math.max((window.screen.availHeight-D)/2,0).toString(),X=Math.max((window.screen.availWidth-_)/2,0).toString();let oe="";const xe=Object.assign(Object.assign({},dT),{width:_.toString(),height:D.toString(),top:M,left:X}),Be=(0,be.z$)().toLowerCase();h&&(oe=mn(Be)?"_blank":h),ba(Be)&&(d=d||"http://localhost",xe.scrollbars="yes");const Qe=Object.entries(xe).reduce((Pn,[zs,If])=>`${Pn}${zs}=${If},`,"");if(function ae(m=(0,be.z$)()){var d;return Go(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Be)&&"_self"!==oe)return function yf(m,d){const h=document.createElement("a");h.href=m,h.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(_)}(d||"",oe),new r0(null);const Xe=window.open(d||"",oe,Qe);Ae(Xe,m,"popup-blocked");try{Xe.focus()}catch{}return new r0(Xe)}(d,oe,Sc())})()}_openRedirect(d,h,_,D){var M=this;return(0,j.Z)(function*(){return yield M._originValidation(d),function Sb(m){di().location.href=m}(yield wf(d,h,_,vs(),D)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:D,promise:M}=this.eventManagers[h];return D?Promise.resolve(D):(Ln(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(d);return this.eventManagers[h]={promise:_},_.catch(()=>{delete this.eventManagers[h]}),_}initAndGetManager(d){var h=this;return(0,j.Z)(function*(){const _=yield function uT(m){return Dg.apply(this,arguments)}(d),D=new Kb(d);return _.register("authEvent",M=>(Ae(M?.authEvent,d,"invalid-auth-event"),{status:D.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:D},h.iframes[d._key()]=_,D})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(bl,{type:bl},D=>{var M;const X=null===(M=D?.[0])||void 0===M?void 0:M[bl];void 0!==X&&h(!!X),on(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function oT(m){return gf.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return ke()||qu()||Go()}};class Ig{constructor(d){this.factorId=d}_process(d,h,_){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,_);case"signin":return this._finalizeSignIn(d,h.credential);default:return Zn("unexpected MultiFactorSessionType")}}}class o0 extends Ig{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new o0(d)}_finalizeEnroll(d,h,_){return function FO(m,d){return Pe(m,"POST","/v2/accounts/mfaEnrollment:finalize",ge(m,d))}(d,{idToken:h,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function Fb(m,d){return Pe(m,"POST","/v2/accounts/mfaSignIn:finalize",ge(m,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pT=(()=>{class m{constructor(){}static assertion(h){return o0._fromCredential(h)}}return m.FACTOR_ID="phone",m})();var Rc="@firebase/auth";class gd{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,j.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);h&&(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ko(){return window}(0,be.Pz)("authIdTokenMaxAge"),function xO(m){zh=m}({loadJS:m=>new Promise((d,h)=>{const _=document.createElement("script");_.setAttribute("src",m),_.onload=d,_.onerror=D=>{const M=bn("internal-error");M.customData=D,h(M)},_.type="text/javascript",_.charset="UTF-8",function _T(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Cf(m){(0,Ze._registerComponent)(new li.wA("auth",(d,{options:h})=>{const _=d.getProvider("app").getImmediate(),D=d.getProvider("heartbeat"),M=d.getProvider("app-check-internal"),{apiKey:X,authDomain:oe}=_.options;Ae(X&&!X.includes(":"),"invalid-api-key",{appName:_.name});const xe={apiKey:X,authDomain:oe,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bt(m)},Be=new Ky(_,D,M,xe);return function eb(m,d){const h=d?.persistence||[],_=(Array.isArray(h)?h:[h]).map(lt);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(_,d?.popupRedirectResolver)}(Be,h),Be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,_)=>{d.getProvider("auth-internal").initialize()})),(0,Ze._registerComponent)(new li.wA("auth-internal",d=>{const h=an(d.getProvider("auth").getImmediate());return new gd(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ze.registerVersion)(Rc,"1.7.4",function Ag(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,Ze.registerVersion)(Rc,"1.7.4","esm2017")}("Browser");function Pc(){return Pc=(0,j.Z)(function*(m,d,h){var _;const{BuildInfo:D}=ko();Ln(d.sessionId,"AuthEvent did not contain a session ID");const M=yield function vT(m){return Oc.apply(this,arguments)}(d.sessionId),X={};return Go()?X.ibi=D.packageName:qo()?X.apn=D.packageName:on(m,"operation-not-supported-in-this-environment"),D.displayName&&(X.appDisplayName=D.displayName),X.sessionId=M,wf(m,h,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,X)}),Pc.apply(this,arguments)}function Pg(){return(Pg=(0,j.Z)(function*(m){const{BuildInfo:d}=ko(),h={};Go()?h.iosBundleId=d.packageName:qo()?h.androidPackageName=d.packageName:on(m,"operation-not-supported-in-this-environment"),yield mf(m,h)})).apply(this,arguments)}function xf(){return(xf=(0,j.Z)(function*(m,d,h){const{cordova:_}=ko();let D=()=>{};try{yield new Promise((M,X)=>{let oe=null;function xe(){var Xe;M();const Pn=null===(Xe=_.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof Pn&&Pn(),"function"==typeof h?.close&&h.close()}function Be(){oe||(oe=window.setTimeout(()=>{X(bn(m,"redirect-cancelled-by-user"))},2e3))}function Qe(){"visible"===document?.visibilityState&&Be()}d.addPassiveListener(xe),document.addEventListener("resume",Be,!1),qo()&&document.addEventListener("visibilitychange",Qe,!1),D=()=>{d.removePassiveListener(xe),document.removeEventListener("resume",Be,!1),document.removeEventListener("visibilitychange",Qe,!1),oe&&window.clearTimeout(oe)}})}finally{D()}})).apply(this,arguments)}function Oc(){return(Oc=(0,j.Z)(function*(m){const d=function wl(m){if(Ln(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),h=new Uint8Array(d);for(let _=0;_<m.length;_++)h[_]=m.charCodeAt(_);return h}(m),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class p0 extends Kb{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,j.Z)(function*(){yield d.initPromise})()}}function g0(m){return _r.apply(this,arguments)}function _r(){return(_r=(0,j.Z)(function*(m){const d=yield vd()._get(Og(m));return d&&(yield vd()._remove(Og(m))),d})).apply(this,arguments)}function Ji(){const m=[];for(let h=0;h<20;h++){const _=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return m.join("")}function vd(){return lt(bi)}function Og(m){return Je("authEvent",m.config.apiKey,m.name)}function na(m){if(!m?.includes("?"))return{};const[d,...h]=m.split("?");return(0,be.zd)(h.join("?"))}const v0=class Nc{constructor(){this._redirectPersistence=Li,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xi,this._overrideRedirectResult=mg}_initialize(d){var h=this;return(0,j.Z)(function*(){const _=d._key();let D=h.eventManagers.get(_);return D||(D=new p0(d),h.eventManagers.set(_,D),h.attachCallbackListeners(d,D)),D})()}_openPopup(d){on(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,_,D){var M=this;return(0,j.Z)(function*(){!function f0(m){var d,h,_,D,M,X,oe,xe,Be,Qe;const Xe=ko();Ae("function"==typeof(null===(d=Xe?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(typeof(null===(h=Xe?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(M=null===(D=null===(_=Xe?.cordova)||void 0===_?void 0:_.plugins)||void 0===D?void 0:D.browsertab)||void 0===M?void 0:M.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(xe=null===(oe=null===(X=Xe?.cordova)||void 0===X?void 0:X.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===xe?void 0:xe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Qe=null===(Be=Xe?.cordova)||void 0===Be?void 0:Be.InAppBrowser)||void 0===Qe?void 0:Qe.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const X=yield M._initialize(d);yield X.initialized(),X.resetRedirect(),function rT(){hd.clear()}(),yield M._originValidation(d);const oe=function m0(m,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:Ji(),postBody:null,tenantId:m.tenantId,error:bn(m,"no-auth-event")}}(d,_,D);yield function _d(m,d){return vd()._set(Og(m),d)}(d,oe);const xe=yield function u0(m,d,h){return Pc.apply(this,arguments)}(d,oe,h),Be=yield function d0(m){const{cordova:d}=ko();return new Promise(h=>{d.plugins.browsertab.isAvailable(_=>{let D=null;_?d.plugins.browsertab.openUrl(m):D=d.InAppBrowser.open(m,function H(m=(0,be.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),h(D)})})}(xe);return function h0(m,d,h){return xf.apply(this,arguments)}(d,X,Be)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Rg(m){return Pg.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:_,handleOpenURL:D,BuildInfo:M}=ko(),X=setTimeout((0,j.Z)(function*(){yield g0(d),h.onEvent(Df())}),500),oe=function(){var Qe=(0,j.Z)(function*(Xe){clearTimeout(X);const Pn=yield g0(d);let zs=null;Pn&&Xe?.url&&(zs=function bT(m,d){var h,_;const D=function Ef(m){const d=na(m),h=d.link?decodeURIComponent(d.link):void 0,_=na(h).link,D=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return na(D).link||D||_||h||m}(d);if(D.includes("/__/auth/callback")){const M=na(D),X=M.firebaseError?function _0(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,oe=null===(_=null===(h=X?.code)||void 0===h?void 0:h.split("auth/"))||void 0===_?void 0:_[1],xe=oe?bn(oe):null;return xe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:D,postBody:null}}return null}(Pn,Xe.url)),h.onEvent(zs||Df())});return function(Pn){return Qe.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,oe);const xe=D,Be=`${M.packageName.toLowerCase()}://`;ko().handleOpenURL=function(){var Qe=(0,j.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(Be)&&oe({url:Xe}),"function"==typeof xe)try{xe(Xe)}catch(Pn){console.error(Pn)}});return function(Xe){return Qe.apply(this,arguments)}}()}};function Df(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:bn("no-auth-event")}}function Tf(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function CT(m=(0,be.z$)()){return!("file:"!==Tf()&&"ionic:"!==Tf()&&"capacitor:"!==Tf()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function y0(){try{const m=self.localStorage,d=Sc();if(m)return m.setItem(d,"1"),m.removeItem(d),!function xT(m=(0,be.z$)()){return function ZO(){return(0,be.w1)()&&11===document?.documentMode}()||function Vc(m=(0,be.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,be.hl)()}catch{return vi()&&(0,be.hl)()}return!1}function vi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fg(){return(function GO(){return"http:"===Tf()||"https:"===Tf()}()||(0,be.ru)()||CT())&&!function YO(){return(0,be.b$)()||(0,be.UG)()}()&&y0()&&!vi()}function Bc(){return CT()&&typeof document<"u"}function Xr(){return(Xr=(0,j.Z)(function*(){return!!Bc()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const Jr={LOCAL:"local",NONE:"none",SESSION:"session"},Aa=Ae,Uc="persistence";function b0(m){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,j.Z)(function*(m){yield m._initializationPromise;const d=es(),h=Je(Uc,m.config.apiKey,m.name);d&&d.setItem(h,m._getPersistence())})).apply(this,arguments)}function es(){var m;try{return(null===(m=function jc(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Lg=Ae;class ws{constructor(){this.browserResolver=lt(fT),this.cordovaResolver=lt(v0),this.underlyingResolver=null,this._redirectPersistence=Li,this._completeRedirectFn=Xi,this._overrideRedirectResult=mg}_initialize(d){var h=this;return(0,j.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,_,D){var M=this;return(0,j.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(d,h,_,D)})()}_openRedirect(d,h,_,D){var M=this;return(0,j.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(d,h,_,D)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Bc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Lg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,j.Z)(function*(){if(d.underlyingResolver)return;const h=yield function ET(){return Xr.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function TT(m){return m.unwrap()}function ST(m){return C0(m)}function C0(m){const{_tokenResponse:d}=m instanceof be.ZR?m.customData:m;if(!d)return null;if(!(m instanceof be.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Ao.credentialFromResult(m);const h=d.providerId;if(!h||h===Ut.PASSWORD)return null;let _;switch(h){case Ut.GOOGLE:_=Gh;break;case Ut.FACEBOOK:_=qh;break;case Ut.GITHUB:_=Hm;break;case Ut.TWITTER:_=Yh;break;default:const{oauthIdToken:D,oauthAccessToken:M,oauthTokenSecret:X,pendingToken:oe,nonce:xe}=d;return M||X||D||oe?oe?h.startsWith("saml.")?Do._create(h,oe):Nr._fromParams({providerId:h,signInMethod:h,pendingToken:oe,idToken:D,accessToken:M}):new Zo(h).credential({idToken:D,accessToken:M,rawNonce:xe}):null}return m instanceof be.ZR?_.credentialFromError(m):_.credentialFromResult(m)}function ts(m,d){return d.catch(h=>{throw h instanceof be.ZR&&function IT(m,d){var h;const _=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new jg(m,function PO(m,d){var h;const _=(0,be.m9)(m),D=d;return Ae(d.customData.operationType,_,"argument-error"),Ae(null===(h=D.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,_,"argument-error"),xb._fromError(_,D)}(m,d));else if(_){const D=C0(d),M=d;D&&(M.credential=D,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(m,h),h}).then(h=>{const D=h.user;return{operationType:h.operationType,credential:ST(h),additionalUserInfo:tg(h),user:Us.getOrCreate(D)}})}function Vg(m,d){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,j.Z)(function*(m,d){const h=yield d;return{verificationId:h.verificationId,confirm:_=>ts(m,h.confirm(_))}})).apply(this,arguments)}class jg{constructor(d,h){this.resolver=h,this.auth=function w0(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return ts(TT(this.auth),this.resolver.resolveSignIn(d))}}class Us{constructor(d){this._delegate=d,this.multiFactor=function VO(m){const d=(0,be.m9)(m);return af.has(d)||af.set(d,sf._fromUser(d)),af.get(d)}(d)}static getOrCreate(d){return Us.USER_MAP.has(d)||Us.USER_MAP.set(d,new Us(d)),Us.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,j.Z)(function*(){return ts(h.auth,vb(h._delegate,d))})()}linkWithPhoneNumber(d,h){var _=this;return(0,j.Z)(function*(){return Vg(_.auth,function zb(m,d,h){return uf.apply(this,arguments)}(_._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,j.Z)(function*(){return ts(h.auth,function qb(m,d,h){return Gb.apply(this,arguments)}(h._delegate,d,ws))})()}linkWithRedirect(d){var h=this;return(0,j.Z)(function*(){return yield b0(an(h.auth)),gg(h._delegate,d,ws)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,j.Z)(function*(){return ts(h.auth,yb(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return Vg(this.auth,function Rn(m,d,h){return dd.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return ts(this.auth,function nT(m,d,h){return dt.apply(this,arguments)}(this._delegate,d,ws))}reauthenticateWithRedirect(d){var h=this;return(0,j.Z)(function*(){return yield b0(an(h.auth)),Zb(h._delegate,d,ws)})()}sendEmailVerification(d){return function To(m,d){return ml.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,j.Z)(function*(){return yield function io(m,d){return Gm.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function AO(m,d){const h=(0,be.m9)(m);return(0,Ze._isFirebaseServerApp)(h.auth.app)?Promise.reject(at(h.auth)):eg(h,d,null)}(this._delegate,d)}updatePassword(d){return function Jm(m,d){return eg((0,be.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function JD(m,d){return df.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function id(m,d){return Ot.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function wb(m,d,h){return So.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Us.USER_MAP=new WeakMap;const yd=Ae;let ia=(()=>{class m{constructor(h,_){if(this.app=h,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=h.options;yd(D,"invalid-api-key",{appName:h.name}),yd(D,"invalid-api-key",{appName:h.name});const M=typeof window<"u"?ws:void 0;this._delegate=_.initialize({options:{persistence:bd(D,h.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(hr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,_){!function tb(m,d,h){const _=an(m);Ae(_._canInitEmulator,_,"emulator-config-failed"),Ae(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const D=!!h?.disableWarnings,M=Gu(d),{host:X,port:oe}=function Hh(m){const d=Gu(m),h=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!h)return{host:"",port:null};const _=h[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(_);if(D){const M=D[1];return{host:M,port:$h(_.substr(M.length+1))}}{const[M,X]=_.split(":");return{host:M,port:$h(X)}}}(d);_.config.emulator={url:`${M}//${X}${null===oe?"":`:${oe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:X,port:oe,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function nb(){function m(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,h,_)}applyActionCode(h){return function ui(m,d){return $e.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return wt(this._delegate,h)}confirmPasswordReset(h,_){return function jD(m,d,h){return Xm.apply(this,arguments)}(this._delegate,h,_)}createUserWithEmailAndPassword(h,_){var D=this;return(0,j.Z)(function*(){return ts(D._delegate,function Tr(m,d,h){return wa.apply(this,arguments)}(D._delegate,h,_))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function nd(m,d){return Ea.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function yt(m,d){const h=bs.parseLink(d);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,j.Z)(function*(){yd(Fg(),h._delegate,"operation-not-supported-in-this-environment");const _=yield function zO(m,d){return pf.apply(this,arguments)}(h._delegate,ws);return _?ts(h._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Lc(m,d){an(m)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,_,D){const{next:M,error:X,complete:oe}=x0(h,_,D);return this._delegate.onAuthStateChanged(M,X,oe)}onIdTokenChanged(h,_,D){const{next:M,error:X,complete:oe}=x0(h,_,D);return this._delegate.onIdTokenChanged(M,X,oe)}sendSignInLinkToEmail(h,_){return function Ca(m,d,h){return xa.apply(this,arguments)}(this._delegate,h,_)}sendPasswordResetEmail(h,_){return function bb(m,d,h){return Cc.apply(this,arguments)}(this._delegate,h,_||void 0)}setPersistence(h){var _=this;return(0,j.Z)(function*(){let D;switch(function DT(m,d){Aa(Object.values(Jr).includes(d),m,"invalid-persistence-type"),(0,be.b$)()?Aa(d!==Jr.SESSION,m,"unsupported-persistence-type"):(0,be.UG)()?Aa(d===Jr.NONE,m,"unsupported-persistence-type"):vi()?Aa(d===Jr.NONE||d===Jr.LOCAL&&(0,be.hl)(),m,"unsupported-persistence-type"):Aa(d===Jr.NONE||y0(),m,"unsupported-persistence-type")}(_._delegate,h),h){case Jr.SESSION:D=Li;break;case Jr.LOCAL:D=(yield lt(Ic)._isAvailable())?Ic:bi;break;case Jr.NONE:D=Oi;break;default:return on("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return ts(this._delegate,function fb(m){return qm.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return ts(this._delegate,Jh(this._delegate,h))}signInWithCustomToken(h){return ts(this._delegate,function Ke(m,d){return Fi.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,_){return ts(this._delegate,function _i(m,d,h){return(0,Ze._isFirebaseServerApp)(m.app)?Promise.reject(at(m)):Jh((0,be.m9)(m),Kr.credential(d,h)).catch(function(){var _=(0,j.Z)(function*(D){throw"auth/password-does-not-meet-requirements"===D.code&&Lr(m),D});return function(D){return _.apply(this,arguments)}}())}(this._delegate,h,_))}signInWithEmailLink(h,_){return ts(this._delegate,function td(m,d,h){return nf.apply(this,arguments)}(this._delegate,h,_))}signInWithPhoneNumber(h,_){return Vg(this._delegate,function XD(m,d,h){return Bs.apply(this,arguments)}(this._delegate,h,_))}signInWithPopup(h){var _=this;return(0,j.Z)(function*(){return yd(Fg(),_._delegate,"operation-not-supported-in-this-environment"),ts(_._delegate,function Wb(m,d,h){return ff.apply(this,arguments)}(_._delegate,h,ws))})()}signInWithRedirect(h){var _=this;return(0,j.Z)(function*(){return yd(Fg(),_._delegate,"operation-not-supported-in-this-environment"),yield b0(_._delegate),J(_._delegate,h,ws)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function ro(m,d){return pl.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Jr,m})();function x0(m,d,h){let _=m;"function"!=typeof m&&({next:_,error:d,complete:h}=m);const D=_;return{next:X=>D(X&&Us.getOrCreate(X)),error:d,complete:h}}function bd(m,d){const h=function KO(m,d){const h=es();if(!h)return[];const _=Je(Uc,m,d);switch(h.getItem(_)){case Jr.NONE:return[Oi];case Jr.LOCAL:return[Ic,Li];case Jr.SESSION:return[Li];default:return[]}}(m,d);if(typeof self<"u"&&!h.includes(Ic)&&h.push(Ic),typeof window<"u")for(const _ of[bi,Li])h.includes(_)||h.push(_);return h.includes(Oi)||h.push(Oi),h}class Ug{constructor(){this.providerId="phone",this._delegate=new Ao(TT(ht.Z.auth()))}static credential(d,h){return Ao.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}Ug.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD,Ug.PROVIDER_ID=Ao.PROVIDER_ID;const E0=Ae;class zg{constructor(d,h,_=ht.Z.app()){var D;E0(null===(D=_.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Ub(_.auth(),d,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D0(m){m.INTERNAL.registerComponent(new li.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new ia(h,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Kr,FacebookAuthProvider:qh,GithubAuthProvider:Hm,GoogleAuthProvider:Gh,OAuthProvider:Zo,SAMLAuthProvider:Ju,PhoneAuthProvider:Ug,PhoneMultiFactorGenerator:pT,RecaptchaVerifier:zg,TwitterAuthProvider:Yh,Auth:ia,AuthCredential:yc,Error:be.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.9")}(ht.Z)},861:(Wo,ur,Et)=>{function j(Ze,be,St,Yn,li,dr,Ut){try{var De=Ze[dr](Ut),Re=De.value}catch(nt){return void St(nt)}De.done?be(Re):Promise.resolve(Re).then(Yn,li)}function ht(Ze){return function(){var be=this,St=arguments;return new Promise(function(Yn,li){var dr=Ze.apply(be,St);function Ut(Re){j(dr,Yn,li,Ut,De,"next",Re)}function De(Re){j(dr,Yn,li,Ut,De,"throw",Re)}Ut(void 0)})}}Et.d(ur,{Z:()=>ht})},582:(Wo,ur,Et)=>{Et.d(ur,{FC:()=>on,KL:()=>Or,_T:()=>be,mG:()=>nt,pi:()=>Ze,qq:()=>jn});var Ze=function(){return Ze=Object.assign||function(_e){for(var se,Ee=1,Fe=arguments.length;Ee<Fe;Ee++)for(var ge in se=arguments[Ee])Object.prototype.hasOwnProperty.call(se,ge)&&(_e[ge]=se[ge]);return _e},Ze.apply(this,arguments)};function be(fe,_e){var se={};for(var Ee in fe)Object.prototype.hasOwnProperty.call(fe,Ee)&&_e.indexOf(Ee)<0&&(se[Ee]=fe[Ee]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Ee=Object.getOwnPropertySymbols(fe);Fe<Ee.length;Fe++)_e.indexOf(Ee[Fe])<0&&Object.prototype.propertyIsEnumerable.call(fe,Ee[Fe])&&(se[Ee[Fe]]=fe[Ee[Fe]])}return se}function nt(fe,_e,se,Ee){return new(se||(se=Promise))(function(ge,Pe){function Wt(At){try{ot(Ee.next(At))}catch(Un){Pe(Un)}}function Oe(At){try{ot(Ee.throw(At))}catch(Un){Pe(Un)}}function ot(At){At.done?ge(At.value):function Fe(ge){return ge instanceof se?ge:new se(function(Pe){Pe(ge)})}(At.value).then(Wt,Oe)}ot((Ee=Ee.apply(fe,_e||[])).next())})}function jn(fe){return this instanceof jn?(this.v=fe,this):new jn(fe)}function on(fe,_e,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Ee=se.apply(fe,_e||[]),ge=[];return Fe={},Wt("next"),Wt("throw"),Wt("return",function Pe(hn){return function(ki){return Promise.resolve(ki).then(hn,Un)}}),Fe[Symbol.asyncIterator]=function(){return this},Fe;function Wt(hn,ki){Ee[hn]&&(Fe[hn]=function(gi){return new Promise(function(xr,Fr){ge.push([hn,gi,xr,Fr])>1||Oe(hn,gi)})},ki&&(Fe[hn]=ki(Fe[hn])))}function Oe(hn,ki){try{!function ot(hn){hn.value instanceof jn?Promise.resolve(hn.value.v).then(At,Un):Os(ge[0][2],hn)}(Ee[hn](ki))}catch(gi){Os(ge[0][3],gi)}}function At(hn){Oe("next",hn)}function Un(hn){Oe("throw",hn)}function Os(hn,ki){hn(ki),ge.shift(),ge.length&&Oe(ge[0][0],ge[0][1])}}function Or(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,_e=fe[Symbol.asyncIterator];return _e?_e.call(fe):(fe=function sn(fe){var _e="function"==typeof Symbol&&Symbol.iterator,se=_e&&fe[_e],Ee=0;if(se)return se.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&Ee>=fe.length&&(fe=void 0),{value:fe&&fe[Ee++],done:!fe}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),se={},Ee("next"),Ee("throw"),Ee("return"),se[Symbol.asyncIterator]=function(){return this},se);function Ee(ge){se[ge]=fe[ge]&&function(Pe){return new Promise(function(Wt,Oe){!function Fe(ge,Pe,Wt,Oe){Promise.resolve(Oe).then(function(ot){ge({value:ot,done:Wt})},Pe)}(Wt,Oe,(Pe=fe[ge](Pe)).done,Pe.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},Wo=>{Wo(Wo.s=271)}]);