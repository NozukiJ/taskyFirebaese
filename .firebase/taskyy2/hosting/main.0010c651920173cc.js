"use strict";(self.webpackChunktasky=self.webpackChunktasky||[]).push([[179],{58:(Po,qi,wt)=>{wt.d(qi,{BH:()=>_n,G6:()=>Fl,L:()=>Vt,LL:()=>pe,Pz:()=>tn,Sg:()=>br,UG:()=>Dn,ZB:()=>Je,ZR:()=>Oe,aH:()=>Ln,b$:()=>Pn,eu:()=>ge,hl:()=>ue,jU:()=>Se,m9:()=>ra,ne:()=>Pr,pd:()=>zs,r3:()=>ui,ru:()=>$n,tV:()=>Ce,uI:()=>ci,vZ:()=>Ba,w1:()=>bs,xO:()=>ja,xb:()=>wr,z$:()=>st,zd:()=>mu});const _e=function(Q){const G=[];let X=0;for(let ve=0;ve<Q.length;ve++){let se=Q.charCodeAt(ve);se<128?G[X++]=se:se<2048?(G[X++]=se>>6|192,G[X++]=63&se|128):55296==(64512&se)&&ve+1<Q.length&&56320==(64512&Q.charCodeAt(ve+1))?(se=65536+((1023&se)<<10)+(1023&Q.charCodeAt(++ve)),G[X++]=se>>18|240,G[X++]=se>>12&63|128,G[X++]=se>>6&63|128,G[X++]=63&se|128):(G[X++]=se>>12|224,G[X++]=se>>6&63|128,G[X++]=63&se|128)}return G},zn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,G){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let se=0;se<Q.length;se+=3){const be=Q[se],Xe=se+1<Q.length,cn=Xe?Q[se+1]:0,at=se+2<Q.length,Ii=at?Q[se+2]:0;let Wn=(15&cn)<<2|Ii>>6,yn=63&Ii;at||(yn=64,Xe||(Wn=64)),ve.push(X[be>>2],X[(3&be)<<4|cn>>4],X[Wn],X[yn])}return ve.join("")},encodeString(Q,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(Q):this.encodeByteArray(_e(Q),G)},decodeString(Q,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(Q):function(Q){const G=[];let X=0,ve=0;for(;X<Q.length;){const se=Q[X++];if(se<128)G[ve++]=String.fromCharCode(se);else if(se>191&&se<224){const be=Q[X++];G[ve++]=String.fromCharCode((31&se)<<6|63&be)}else if(se>239&&se<365){const at=((7&se)<<18|(63&Q[X++])<<12|(63&Q[X++])<<6|63&Q[X++])-65536;G[ve++]=String.fromCharCode(55296+(at>>10)),G[ve++]=String.fromCharCode(56320+(1023&at))}else{const be=Q[X++],Xe=Q[X++];G[ve++]=String.fromCharCode((15&se)<<12|(63&be)<<6|63&Xe)}}return G.join("")}(this.decodeStringToByteArray(Q,G))},decodeStringToByteArray(Q,G){this.init_();const X=G?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let se=0;se<Q.length;){const be=X[Q.charAt(se++)],cn=se<Q.length?X[Q.charAt(se)]:0;++se;const Ii=se<Q.length?X[Q.charAt(se)]:64;++se;const Ye=se<Q.length?X[Q.charAt(se)]:64;if(++se,null==be||null==cn||null==Ii||null==Ye)throw new ni;ve.push(be<<2|cn>>4),64!==Ii&&(ve.push(cn<<4&240|Ii>>2),64!==Ye&&ve.push(Ii<<6&192|Ye))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}};class ni extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vt=function(Q){return function(Q){const G=_e(Q);return zn.encodeByteArray(G,!0)}(Q).replace(/\./g,"")},Ce=function(Q){try{return zn.decodeString(Q,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function Je(Q,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return G}for(const X in G)!G.hasOwnProperty(X)||!Pt(X)||(Q[X]=Je(Q[X],G[X]));return Q}function Pt(Q){return"__proto__"!==Q}const Dt=()=>{try{return function Qt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Q=process.env.__FIREBASE_DEFAULTS__;return Q?JSON.parse(Q):void 0})()||(()=>{if(typeof document>"u")return;let Q;try{Q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=Q&&Ce(Q[1]);return G&&JSON.parse(G)})()}catch(Q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Q}`)}},Ln=()=>{var Q;return null===(Q=Dt())||void 0===Q?void 0:Q.config},tn=Q=>{var G;return null===(G=Dt())||void 0===G?void 0:G[`_${Q}`]};class _n{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,X)=>{this.resolve=G,this.reject=X})}wrapCallback(G){return(X,ve)=>{X?this.reject(X):this.resolve(ve),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(X):G(X,ve))}}}function br(Q,G){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=G||"demo-project",se=Q.iat||0,be=Q.sub||Q.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Xe=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:se,exp:se+3600,auth_time:se,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[Vt(JSON.stringify({alg:"none",type:"JWT"})),Vt(JSON.stringify(Xe)),""].join(".")}function st(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ci(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function Dn(){var Q;const G=null===(Q=Dt())||void 0===Q?void 0:Q.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Se(){return"object"==typeof self&&self.self===self}function $n(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Pn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bs(){const Q=st();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Fl(){return!Dn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function ge(){return new Promise((Q,G)=>{try{let X=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(ve);se.onsuccess=()=>{se.result.close(),X||self.indexedDB.deleteDatabase(ve),Q(!0)},se.onupgradeneeded=()=>{X=!1},se.onerror=()=>{var be;G((null===(be=se.error)||void 0===be?void 0:be.message)||"")}}catch(X){G(X)}})}class Oe extends Error{constructor(G,X,ve){super(X),this.code=G,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(G,X,ve){this.service=G,this.serviceName=X,this.errors=ve}create(G,...X){const ve=X[0]||{},se=`${this.service}/${G}`,be=this.errors[G],Xe=be?function Pe(Q,G){return Q.replace(Ut,(X,ve)=>{const se=G[ve];return null!=se?String(se):`<${ve}?>`})}(be,ve):"Error";return new Oe(se,`${this.serviceName}: ${Xe} (${se}).`,ve)}}const Ut=/\{\$([^}]+)}/g;function ui(Q,G){return Object.prototype.hasOwnProperty.call(Q,G)}function wr(Q){for(const G in Q)if(Object.prototype.hasOwnProperty.call(Q,G))return!1;return!0}function Ba(Q,G){if(Q===G)return!0;const X=Object.keys(Q),ve=Object.keys(G);for(const se of X){if(!ve.includes(se))return!1;const be=Q[se],Xe=G[se];if(ii(be)&&ii(Xe)){if(!Ba(be,Xe))return!1}else if(be!==Xe)return!1}for(const se of ve)if(!X.includes(se))return!1;return!0}function ii(Q){return null!==Q&&"object"==typeof Q}function ja(Q){const G=[];for(const[X,ve]of Object.entries(Q))Array.isArray(ve)?ve.forEach(se=>{G.push(encodeURIComponent(X)+"="+encodeURIComponent(se))}):G.push(encodeURIComponent(X)+"="+encodeURIComponent(ve));return G.length?"&"+G.join("&"):""}function mu(Q){const G={};return Q.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[se,be]=ve.split("=");G[decodeURIComponent(se)]=decodeURIComponent(be)}}),G}function zs(Q){const G=Q.indexOf("?");if(!G)return"";const X=Q.indexOf("#",G);return Q.substring(G,X>0?X:void 0)}function Pr(Q,G){const X=new $s(Q,G);return X.subscribe.bind(X)}class $s{constructor(G,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{G(this)}).catch(ve=>{this.error(ve)})}next(G){this.forEachObserver(X=>{X.next(G)})}error(G){this.forEachObserver(X=>{X.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,X,ve){let se;if(void 0===G&&void 0===X&&void 0===ve)throw new Error("Missing Observer.");se=function Ws(Q,G){if("object"!=typeof Q||null===Q)return!1;for(const X of G)if(X in Q&&"function"==typeof Q[X])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:X,complete:ve},void 0===se.next&&(se.next=Tn),void 0===se.error&&(se.error=Tn),void 0===se.complete&&(se.complete=Tn);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),be}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,G)}sendOne(G,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{X(this.observers[G])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tn(){}function ra(Q){return Q&&Q._delegate?Q._delegate:Q}},655:(Po,qi,wt)=>{function L(n){return"function"==typeof n}function dt(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Ge=dt(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function _e(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class Ct{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(L(i))try{i()}catch(s){t=s instanceof Ge?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Gi(s)}catch(o){t=t??[],o instanceof Ge?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Ge(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Gi(t);else{if(t instanceof Ct){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&_e(e,t)}remove(t){const{_finalizers:e}=this;e&&_e(e,t),t instanceof Ct&&t._removeParent(this)}}Ct.EMPTY=(()=>{const n=new Ct;return n.closed=!0,n})();const zn=Ct.EMPTY;function ni(n){return n instanceof Ct||n&&"closed"in n&&L(n.remove)&&L(n.add)&&L(n.unsubscribe)}function Gi(n){L(n)?n():n.unsubscribe()}const Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ce={setTimeout(n,t,...e){const{delegate:i}=Ce;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Ce;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Re(n){Ce.setTimeout(()=>{const{onUnhandledError:t}=Vt;if(!t)throw n;t(n)})}function Je(){}const Pt=en("C",void 0,void 0);function en(n,t,e){return{kind:n,value:t,error:e}}let pt=null;function Dt(n){if(Vt.useDeprecatedSynchronousErrorHandling){const t=!pt;if(t&&(pt={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=pt;if(pt=null,e)throw i}}else n()}class Yi extends Ct{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ni(t)&&t.add(this)):this.destination=Se}static create(t,e,i){return new br(t,e,i)}next(t){this.isStopped?Dn(function Ki(n){return en("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Dn(function Qt(n){return en("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Dn(Pt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ln=Function.prototype.bind;function tn(n,t){return Ln.call(n,t)}class _n{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){st(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){st(i)}else st(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){st(e)}}}class br extends Yi{constructor(t,e,i){let r;if(super(),L(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Vt.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&tn(t.next,s),error:t.error&&tn(t.error,s),complete:t.complete&&tn(t.complete,s)}):r=t}this.destination=new _n(r)}}function st(n){Vt.useDeprecatedSynchronousErrorHandling?function Zi(n){Vt.useDeprecatedSynchronousErrorHandling&&pt&&(pt.errorThrown=!0,pt.error=n)}(n):Re(n)}function Dn(n,t){const{onStoppedNotification:e}=Vt;e&&Ce.setTimeout(()=>e(n,t))}const Se={closed:!0,next:Je,error:function ci(n){throw n},complete:Je},$n="function"==typeof Symbol&&Symbol.observable||"@@observable";function Pn(n){return n}function bs(n){return 0===n.length?Pn:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}let ft=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const s=function ue(n){return n&&n instanceof Yi||function Fl(n){return n&&L(n.next)&&L(n.error)&&L(n.complete)}(n)&&ni(n)}(e)?e:new br(e,i,r);return Dt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=Va(i))((r,s)=>{const o=new br({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[$n](){return this}pipe(...e){return bs(e)(this)}toPromise(e){return new(e=Va(e))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function Va(n){var t;return null!==(t=n??Vt.Promise)&&void 0!==t?t:Promise}const ge=dt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ne=(()=>{class n extends ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ee(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new ge}next(e){Dt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){Dt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Dt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:s}=this;return i||r?zn:(this.currentObservers=null,s.push(e),new Ct(()=>{this.currentObservers=null,_e(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){const e=new ft;return e.source=this,e}}return n.create=(t,e)=>new Ee(t,e),n})();class Ee extends ne{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:zn}}function Oe(n){return L(n?.lift)}function pe(n){return t=>{if(Oe(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pe(n,t,e,i,r){return new Ut(n,t,e,i,r)}class Ut extends Yi{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Fe(n,t){return pe((e,i)=>{let r=0;e.subscribe(Pe(i,s=>{i.next(n.call(t,s,r++))}))})}var rt=wt(582);const Tt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Vn(n){return L(n?.then)}function ws(n){return L(n[$n])}function ln(n){return Symbol.asyncIterator&&L(n?.[Symbol.asyncIterator])}function Ei(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const cr=function ui(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function wr(n){return L(n?.[cr])}function Ll(n){return(0,rt.FC)(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,rt.qq)(e.read());if(r)return yield(0,rt.qq)(void 0);yield yield(0,rt.qq)(i)}}finally{e.releaseLock()}})}function Ba(n){return L(n?.getReader)}function ii(n){if(n instanceof ft)return n;if(null!=n){if(ws(n))return function gu(n){return new ft(t=>{const e=n[$n]();if(L(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tt(n))return function ja(n){return new ft(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(Vn(n))return function mu(n){return new ft(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Re)})}(n);if(ln(n))return _u(n);if(wr(n))return function zs(n){return new ft(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(Ba(n))return function Pr(n){return _u(Ll(n))}(n)}throw Ei(n)}function _u(n){return new ft(t=>{(function $s(n,t){var e,i,r,s;return(0,rt.mG)(this,void 0,void 0,function*(){try{for(e=(0,rt.KL)(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Ci(n,t,e,i=0,r=!1){const s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Tn(n,t,e=1/0){return L(t)?Tn((i,r)=>Fe((s,o)=>t(i,s,r,o))(ii(n(i,r))),e):("number"==typeof t&&(e=t),pe((i,r)=>function Ws(n,t,e,i,r,s,o,a){const l=[];let c=0,u=0,f=!1;const m=()=>{f&&!l.length&&!c&&t.complete()},y=w=>c<i?v(w):l.push(w),v=w=>{s&&t.next(w),c++;let E=!1;ii(e(w,u++)).subscribe(Pe(t,k=>{r?.(k),s?y(k):t.next(k)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;l.length&&c<i;){const k=l.shift();o?Ci(t,o,()=>v(k)):v(k)}m()}catch(k){t.error(k)}}))};return n.subscribe(Pe(t,y,()=>{f=!0,m()})),()=>{a?.()}}(i,r,n,e)))}function Es(n=1/0){return Tn(Pn,n)}const Di=new ft(n=>n.complete());function Vl(n){return n&&L(n.schedule)}function Or(n){return n[n.length-1]}function Ua(n){return L(Or(n))?n.pop():void 0}function Ti(n){return Vl(Or(n))?n.pop():void 0}function os(n,t=0){return pe((e,i)=>{e.subscribe(Pe(i,r=>Ci(i,n,()=>i.next(r),t),()=>Ci(i,n,()=>i.complete(),t),r=>Ci(i,n,()=>i.error(r),t)))})}function Nr(n,t=0){return pe((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function ra(n,t){if(!n)throw new Error("Iterable cannot be null");return new ft(e=>{Ci(e,t,()=>{const i=n[Symbol.asyncIterator]();Ci(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function X(n,t){return t?function G(n,t){if(null!=n){if(ws(n))return function ia(n,t){return ii(n).pipe(Nr(t),os(t))}(n,t);if(Tt(n))return function jl(n,t){return new ft(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(Vn(n))return function _h(n,t){return ii(n).pipe(Nr(t),os(t))}(n,t);if(ln(n))return ra(n,t);if(wr(n))return function vu(n,t){return new ft(e=>{let i;return Ci(e,t,()=>{i=n[cr](),Ci(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>L(i?.return)&&i.return()})}(n,t);if(Ba(n))return function Q(n,t){return ra(Ll(n),t)}(n,t)}throw Ei(n)}(n,t):ii(n)}function ve(...n){const t=Ti(n),e=function Bl(n,t){return"number"==typeof Or(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?ii(i[0]):Es(e)(X(i,t)):Di}class se extends ne{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}function be(...n){return X(n,Ti(n))}function Xe(n={}){const{connector:t=(()=>new ne),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,f=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=l=void 0,u=f=!1},v=()=>{const w=o;y(),w?.unsubscribe()};return pe((w,E)=>{c++,!f&&!u&&m();const k=l=l??t();E.add(()=>{c--,0===c&&!f&&!u&&(a=cn(v,r))}),k.subscribe(E),!o&&c>0&&(o=new br({next:S=>k.next(S),error:S=>{f=!0,m(),a=cn(y,e,S),k.error(S)},complete:()=>{u=!0,m(),a=cn(y,i),k.complete()}}),ii(w).subscribe(o))})(s)}}function cn(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new br({next:()=>{i.unsubscribe(),n()}});return ii(t(...e)).subscribe(i)}function at(n,t){return pe((e,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();e.subscribe(Pe(i,l=>{r?.unsubscribe();let c=0;const u=s++;ii(n(l,u)).subscribe(r=Pe(i,f=>i.next(t?t(l,f,u,c++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Ii(n,t=Pn){return n=n??Si,pe((e,i)=>{let r,s=!0;e.subscribe(Pe(i,o=>{const a=t(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function Si(n,t){return n===t}function Ye(n){for(let t in n)if(n[t]===Ye)return t;throw Error("Could not find renamed property on target object.")}function Wn(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function yn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(yn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function sa(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const bu=Ye({__forward_ref__:Ye});function dn(n){return n.__forward_ref__=dn,n.toString=function(){return yn(this())},n}function lt(n){return Oo(n)?n():n}function Oo(n){return"function"==typeof n&&n.hasOwnProperty(bu)&&n.__forward_ref__===dn}function Ul(n){return n&&!!n.\u0275providers}const No="https://g.co/ng/security#xss";class B extends Error{constructor(t,e){super(function re(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function le(n){return"string"==typeof n?n:null==n?"":String(n)}function In(n,t){throw new B(-201,!1)}function Ds(n,t){null==n&&function ht(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hl(n){return Rv(n,bh)||Rv(n,Ov)}function Rv(n,t){return n.hasOwnProperty(t)?n[t]:null}function wu(n){return n&&(n.hasOwnProperty(wh)||n.hasOwnProperty(zl))?n[wh]:null}const bh=Ye({\u0275prov:Ye}),wh=Ye({\u0275inj:Ye}),Ov=Ye({ngInjectableDef:Ye}),zl=Ye({ngInjectorDef:Ye});var Nt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Nt||{});let Eu;function ur(n){const t=Eu;return Eu=n,t}function Fv(n,t,e){const i=Hl(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Nt.Optional?null:void 0!==t?t:void In(yn(n))}const Sn=globalThis;class De{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ke({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const za={},fg="__NG_DI_FLAG__",Wl="ngTempTokenPath",Fo=/\n/gm,Hv="__source";let Er;function ho(n){const t=Er;return Er=n,t}function sT(n,t=Nt.Default){if(void 0===Er)throw new B(-203,!1);return null===Er?Fv(n,void 0,t):Er.get(n,t&Nt.Optional?null:void 0,t)}function te(n,t=Nt.Default){return(function Nv(){return Eu}()||sT)(lt(n),t)}function He(n,t=Nt.Default){return te(n,Eh(t))}function Eh(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gg(n){const t=[];for(let e=0;e<n.length;e++){const i=lt(n[e]);if(Array.isArray(i)){if(0===i.length)throw new B(900,!1);let r,s=Nt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Wa(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(te(r,s))}else t.push(te(i))}return t}function $a(n,t){return n[fg]=t,n.prototype[fg]=t,n}function Wa(n){return n[fg]}function as(n){return{toString:n}.toString()}var mg=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mg||{}),Fr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fr||{});const Li={},Bt=[],Lo=Ye({\u0275cmp:Ye}),Ch=Ye({\u0275dir:Ye}),Dh=Ye({\u0275pipe:Ye}),_g=Ye({\u0275mod:Ye}),Vo=Ye({\u0275fac:Ye}),fo=Ye({__NG_ELEMENT_ID__:Ye}),$v=Ye({__NG_ENV_ID__:Ye});function Su(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}function Th(n,t,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{const s=r,o=e[++i];Ih(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function yg(n){return 3===n||4===n||6===n}function Ih(n){return 64===n.charCodeAt(0)}function dr(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||vg(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function vg(n,t,e,i,r){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const Wv="ng-template";function bg(n,t,e){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(e&&"class"===s&&-1!==Su(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Au(n){return 4===n.type&&n.value!==Wv}function qv(n,t,e){return t===(4!==n.type||e?n.value:Wv)}function Gv(n,t,e){let i=4;const r=n.attrs||[],s=function Ah(n){for(let t=0;t<n.length;t++)if(yg(n[t]))return t;return n.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!qv(n,l,e)||""===l&&1===t.length){if(qs(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!bg(n.attrs,c,e)){if(qs(i))return!1;o=!0}continue}const f=wg(8&i?"class":l,r,Au(n),e);if(-1===f){if(qs(i))return!1;o=!0;continue}if(""!==c){let m;m=f>s?"":r[f+1].toLowerCase();const y=8&i?m:null;if(y&&-1!==Su(y,c,0)||2&i&&c!==m){if(qs(i))return!1;o=!0}}}}else{if(!o&&!qs(i)&&!qs(l))return!1;if(o&&qs(l))continue;o=!1,i=l|1&i}}return qs(i)||o}function qs(n){return 0==(1&n)}function wg(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Cg(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function Sh(n,t,e=!1){for(let i=0;i<t.length;i++)if(Gv(n,t[i],e))return!0;return!1}function xh(n,t){return n?":not("+t.trim()+")":t}function Zv(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!qs(o)&&(t+=xh(s,r),r=""),i=o,s=s||!qs(i);e++}return""!==r&&(t+=xh(s,r)),t}function Ht(n){return as(()=>{const t=Rh(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fr.Emulated,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null,id:""};Xv(e);const i=n.dependencies;return e.directiveDefs=ql(i,!1),e.pipeDefs=ql(i,!0),e.id=function Ig(n){let t=0;const e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(e),e})}function Tg(n){return Ft(n)||xi(n)}function Qv(n){return null!==n}function Wt(n){return as(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kh(n,t){if(null==n)return Li;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,t&&(t[r]=s)}return e}function et(n){return as(()=>{const t=Rh(n);return Xv(t),t})}function Ai(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ft(n){return n[Lo]||null}function xi(n){return n[Ch]||null}function Qi(n){return n[Dh]||null}function Cr(n,t){const e=n[_g]||null;if(!e&&!0===t)throw new Error(`Type ${yn(n)} does not have '\u0275mod' property.`);return e}function Rh(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Li,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kh(n.inputs,t),outputs:kh(n.outputs)}}function Xv(n){n.features?.forEach(t=>t(n))}function ql(n,t){if(!n)return null;const e=t?Qi:Tg;return()=>("function"==typeof n?n():n).map(i=>e(i)).filter(Qv)}const ri=0,ze=1,vt=2,An=3,Gs=4,qa=5,hr=6,oa=7,di=8,aa=9,la=10,mt=11,xu=12,Ph=13,Gl=14,qn=15,Mu=16,ca=17,po=18,Ga=19,Jv=20,go=21,jo=22,Ka=23,ku=24,Mt=25,Sg=1,Ag=2,Ts=7,Ks=9,Xi=11;function Lr(n){return Array.isArray(n)&&"object"==typeof n[Sg]}function Dr(n){return Array.isArray(n)&&!0===n[Sg]}function xg(n){return 0!=(4&n.flags)}function Zl(n){return n.componentOffset>-1}function Mg(n){return 1==(1&n.flags)}function mo(n){return!!n.template}function Ru(n){return 0!=(512&n[vt])}function Za(n,t){return n.hasOwnProperty(Vo)?n[Vo]:null}let gi=null,Rg=!1;function Mi(n){const t=gi;return gi=n,t}const nb={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ql(n){if(!Nu(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Lh(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function sb(n){n.dirty=!0,function rb(n){if(void 0===n.liveConsumerNode)return;const t=Rg;Rg=!0;try{for(const e of n.liveConsumerNode)e.dirty||sb(e)}finally{Rg=t}}(n),n.consumerMarkedDirty?.(n)}function Pu(n){return n&&(n.nextProducerIndex=0),Mi(n)}function Pg(n,t){if(Mi(t),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Nu(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Ou(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Lh(n){Uo(n);for(let t=0;t<n.producerNode.length;t++){const e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(Ql(e),i!==e.version))return!0}return!1}function ob(n){if(Uo(n),Nu(n))for(let t=0;t<n.producerNode.length;t++)Ou(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ou(n,t){if(function Og(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Uo(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Ou(n.producerNode[i],n.producerIndexOfThis[i]);const e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Uo(r),r.producerIndexOfThis[i]=t}}function Nu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Uo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let ub=null;function Lu(n){const t=Mi(null);try{return n()}finally{Mi(t)}}const pb=()=>{},_T=(()=>({...nb,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:pb}))();class yT{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Vi(){return mb}function mb(n){return n.type.prototype.ngOnChanges&&(n.setInput=_b),vT}function vT(){const n=vb(this),t=n?.current;if(t){const e=n.previous;if(e===Li)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function _b(n,t,e,i){const r=this.declaredInputs[e],s=vb(n)||function bT(n,t){return n[yb]=t}(n,{previous:Li,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new yT(l&&l.currentValue,t,a===Li),n[i]=t}Vi.ngInherit=!0;const yb="__ngSimpleChanges__";function vb(n){return n[yb]||null}const Is=function(n,t,e){};function xn(n){for(;Array.isArray(n);)n=n[ri];return n}function Ya(n,t){return xn(t[n])}function fr(n,t){return xn(t[n.index])}function jh(n,t){return n.data[t]}function _o(n,t){return n[t]}function ki(n,t){const e=t[n];return Lr(e)?e:e[ri]}function da(n,t){return null==t?null:n[t]}function Uh(n){n[ca]=0}function wb(n){1024&n[vt]||(n[vt]|=1024,Cb(n,1))}function Eb(n){1024&n[vt]&&(n[vt]&=-1025,Cb(n,-1))}function Cb(n,t){let e=n[An];if(null===e)return;e[qa]+=t;let i=e;for(e=e[An];null!==e&&(1===t&&1===i[qa]||-1===t&&0===i[qa]);)e[qa]+=t,i=e,e=e[An]}const ut={lFrame:Qg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ib(){return ut.bindingsEnabled}function Te(){return ut.lFrame.lView}function zt(){return ut.lFrame.tView}function he(n){return ut.lFrame.contextLView=n,n[di]}function fe(n){return ut.lFrame.contextLView=null,n}function Ri(){let n=Sb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Sb(){return ut.lFrame.currentTNode}function Ss(n,t){const e=ut.lFrame;e.currentTNode=n,e.isParent=t}function $g(){return ut.lFrame.isParent}function Wg(){ut.lFrame.isParent=!1}function Bi(){const n=ut.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function ha(){return ut.lFrame.bindingIndex++}function Ho(n){const t=ut.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function xb(n,t){const e=ut.lFrame;e.bindingIndex=e.bindingRootIndex=n,$h(t)}function $h(n){ut.lFrame.currentDirectiveIndex=n}function Mb(){return ut.lFrame.currentQueryIndex}function Zg(n){ut.lFrame.currentQueryIndex=n}function xT(n){const t=n[ze];return 2===t.type?t.declTNode:1===t.type?n[hr]:null}function Wh(n,t,e){if(e&Nt.SkipSelf){let r=t,s=n;for(;!(r=r.parent,null!==r||e&Nt.Host||(r=xT(s),null===r||(s=s[Gl],10&r.type))););if(null===r)return!1;t=r,n=s}const i=ut.lFrame=kb();return i.currentTNode=t,i.lView=n,!0}function Yg(n){const t=kb(),e=n[ze];ut.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function kb(){const n=ut.lFrame,t=null===n?null:n.child;return null===t?Qg(n):t}function Qg(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Rb(){const n=ut.lFrame;return ut.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const zu=Rb;function Xg(){const n=Rb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Tr(){return ut.lFrame.selectedIndex}function Qa(n){ut.lFrame.selectedIndex=n}function Gn(){const n=ut.lFrame;return jh(n.tView,n.selectedIndex)}let Ob=!0;function qh(){return Ob}function fa(n){Ob=n}function Gh(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),null!=u&&(n.destroyHooks??=[]).push(e,u)}}function Kh(n,t,e){Fb(n,t,3,e)}function Zh(n,t,e,i){(3&n[vt])===e&&Fb(n,t,e,i)}function em(n,t){let e=n[vt];(3&e)===t&&(e&=8191,e+=1,n[vt]=e)}function Fb(n,t,e,i){const s=i??-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&n[ca]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[ca]+=65536),(a<s||-1==s)&&(tm(n,e,t,l),n[ca]=(4294901760&n[ca])+l+2),l++}function Yh(n,t){Is(4,n,t);const e=Mi(null);try{t.call(n)}finally{Mi(e),Is(5,n,t)}}function tm(n,t,e,i){const r=e[i]<0,s=e[i+1],a=n[r?-e[i]:e[i]];r?n[vt]>>13<n[ca]>>16&&(3&n[vt])===t&&(n[vt]+=8192,Yh(a,s)):Yh(a,s)}const ec=-1;class Xa{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function tc(n){return n!==ec}function nc(n){return 32767&n}function $u(n,t){let e=function Bb(n){return n>>16}(n),i=t;for(;e>0;)i=i[Gl],e--;return i}let im=!0;function Qh(n){const t=im;return im=n,t}const jb=255,rm=5;let BT=0;const zo={};function yo(n,t){const e=Ub(n,t);if(-1!==e)return e;const i=t[ze];i.firstCreatePass&&(n.injectorIndex=t.length,sm(i.data,n),sm(t,null),sm(i.blueprint,null));const r=ic(n,t),s=n.injectorIndex;if(tc(r)){const o=nc(r),a=$u(r,t),l=a[ze].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function sm(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Ub(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function ic(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){if(i=Kb(r),null===i)return ec;if(e++,r=r[Gl],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return ec}function om(n,t,e){!function jT(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(fo)&&(i=e[fo]),null==i&&(i=e[fo]=BT++);const r=i&jb;t.data[n+(r>>rm)]|=1<<r}(n,t,e)}function Hb(n,t,e){if(e&Nt.Optional||void 0!==n)return n;In()}function zb(n,t,e,i){if(e&Nt.Optional&&void 0===i&&(i=null),!(e&(Nt.Self|Nt.Host))){const r=n[aa],s=ur(void 0);try{return r?r.get(t,i,e&Nt.Optional):Fv(t,i,e&Nt.Optional)}finally{ur(s)}}return Hb(i,0,e)}function Xh(n,t,e,i=Nt.Default,r){if(null!==n){if(2048&t[vt]&&!(i&Nt.Self)){const o=function lm(n,t,e,i,r){let s=n,o=t;for(;null!==s&&null!==o&&2048&o[vt]&&!(512&o[vt]);){const a=$b(s,o,e,i|Nt.Self,zo);if(a!==zo)return a;let l=s.parent;if(!l){const c=o[Jv];if(c){const u=c.get(e,zo,i);if(u!==zo)return u}l=Kb(o),o=o[Gl]}s=l}return r}(n,t,e,i,zo);if(o!==zo)return o}const s=$b(n,t,e,i,zo);if(s!==zo)return s}return zb(t,e,i,r)}function $b(n,t,e,i,r){const s=function HT(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(fo)?n[fo]:void 0;return"number"==typeof t?t>=0?t&jb:zT:t}(e);if("function"==typeof s){if(!Wh(t,n,i))return i&Nt.Host?Hb(r,0,i):zb(t,e,i,r);try{let o;if(o=s(i),null!=o||i&Nt.Optional)return o;In()}finally{zu()}}else if("number"==typeof s){let o=null,a=Ub(n,t),l=ec,c=i&Nt.Host?t[qn][hr]:null;for((-1===a||i&Nt.SkipSelf)&&(l=-1===a?ic(n,t):t[a+8],l!==ec&&qb(i,!1)?(o=t[ze],a=nc(l),t=$u(l,t)):a=-1);-1!==a;){const u=t[ze];if(Wb(s,a,u.data)){const f=UT(a,t,e,o,i,c);if(f!==zo)return f}l=t[a+8],l!==ec&&qb(i,t[ze].data[a+8]===c)&&Wb(s,a,t)?(o=u,a=nc(l),t=$u(l,t)):a=-1}}return r}function UT(n,t,e,i,r,s){const o=t[ze],a=o.data[n+8],u=rc(a,o,e,null==i?Zl(a)&&im:i!=o&&0!=(3&a.type),r&Nt.Host&&s===a);return null!==u?Ja(t,o,u,a):zo}function rc(n,t,e,i,r){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,u=s>>20,m=r?a+u:n.directiveEnd;for(let y=i?a:a+u;y<m;y++){const v=o[y];if(y<l&&e===v||y>=l&&v.type===e)return y}if(r){const y=o[l];if(y&&mo(y)&&y.type===e)return l}return null}function Ja(n,t,e,i){let r=n[e];const s=t.data;if(function NT(n){return n instanceof Xa}(r)){const o=r;o.resolving&&function gt(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new B(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Ae(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():le(n)}(s[e]));const a=Qh(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?ur(o.injectImpl):null;Wh(n,i,Nt.Default);try{r=n[e]=o.factory(void 0,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&function Nb(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const o=mb(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}(e,s[e],t)}finally{null!==c&&ur(c),Qh(a),o.resolving=!1,zu()}}return r}function Wb(n,t,e){return!!(e[t+(n>>rm)]&1<<n)}function qb(n,t){return!(n&Nt.Self||n&Nt.Host&&t)}class Ji{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return Xh(this._tNode,this._lView,t,Eh(i),e)}}function zT(){return new Ji(Ri(),Te())}function ji(n){return as(()=>{const t=n.prototype.constructor,e=t[Vo]||qu(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Vo]||qu(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function qu(n){return Oo(n)?()=>{const t=qu(lt(n));return t&&t()}:Za(n)}function Kb(n){const t=n[ze],e=t.type;return 2===e?t.declTNode:1===e?n[hr]:null}const sc="__parameters__";function ac(n,t,e){return as(()=>{const i=function ef(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const f=l.hasOwnProperty(sc)?l[sc]:Object.defineProperty(l,sc,{value:[]})[sc];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function uc(n,t){n.forEach(e=>Array.isArray(e)?uc(e,t):t(e))}function Br(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function pa(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function jr(n,t,e){let i=ls(n,t);return i>=0?n[1|i]=e:(i=~i,function um(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function dm(n,t){const e=ls(n,t);if(e>=0)return n[1|e]}function ls(n,t){return function Xb(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}(n,t,1)}const hc=$a(ac("Optional"),8),nf=$a(ac("SkipSelf"),4);function cw(n){return 128==(128&n.flags)}var fc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fc||{});const Bq=/^>|^->|<!--|-->|--!>|<!-$/g,jq=/(<|>)/g,Uq="\u200b$1\u200b";const eI=new Map;let Hq=0;const nI="__ngContext__";function Hr(n,t){Lr(t)?(n[nI]=t[Ga],function $q(n){eI.set(n[Ga],n)}(t)):n[nI]=t}let iI;function rI(n,t){return iI(n,t)}function Em(n){const t=n[An];return Dr(t)?t[An]:t}function FO(n){return VO(n[xu])}function LO(n){return VO(n[Gs])}function VO(n){for(;null!==n&&!Dr(n);)n=n[Gs];return n}function cf(n,t,e,i,r){if(null!=i){let s,o=!1;Dr(i)?s=i:Lr(i)&&(o=!0,i=i[ri]);const a=xn(i);0===n&&null!==e?null==r?HO(t,e,a):Ku(t,e,a,r||null,!0):1===n&&null!==e?Ku(t,e,a,r||null,!0):2===n?function mw(n,t,e){const i=pw(n,t);i&&function cG(n,t,e,i){n.removeChild(t,e,i)}(n,i,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=s&&function hG(n,t,e,i,r){const s=e[Ts];s!==xn(e)&&cf(t,n,i,s,r);for(let a=Xi;a<e.length;a++){const l=e[a];Dm(l[ze],l,n,t,i,s)}}(t,n,s,e,r)}}function sI(n,t){return n.createComment(function AO(n){return n.replace(Bq,t=>t.replace(jq,Uq))}(t))}function hw(n,t,e){return n.createElement(t,e)}function jO(n,t){const e=n[Ks],i=e.indexOf(t);Eb(t),e.splice(i,1)}function fw(n,t){if(n.length<=Xi)return;const e=Xi+t,i=n[e];if(i){const r=i[Mu];null!==r&&r!==n&&jO(r,i),t>0&&(n[e-1][Gs]=i[Gs]);const s=pa(n,Xi+t);!function tG(n,t){Dm(n,t,t[mt],2,null,null),t[ri]=null,t[hr]=null}(i[ze],i);const o=s[po];null!==o&&o.detachView(s[ze]),i[An]=null,i[Gs]=null,i[vt]&=-129}return i}function oI(n,t){if(!(256&t[vt])){const e=t[mt];t[Ka]&&ob(t[Ka]),t[ku]&&ob(t[ku]),e.destroyNode&&Dm(n,t,e,3,null,null),function rG(n){let t=n[xu];if(!t)return aI(n[ze],n);for(;t;){let e=null;if(Lr(t))e=t[xu];else{const i=t[Xi];i&&(e=i)}if(!e){for(;t&&!t[Gs]&&t!==n;)Lr(t)&&aI(t[ze],t),t=t[An];null===t&&(t=n),Lr(t)&&aI(t[ze],t),e=t&&t[Gs]}t=e}}(t)}}function aI(n,t){if(!(256&t[vt])){t[vt]&=-129,t[vt]|=256,function lG(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof Xa)){const s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Is(4,a,l);try{l.call(a)}finally{Is(5,a,l)}}else{Is(4,r,s);try{s.call(r)}finally{Is(5,r,s)}}}}}(n,t),function aG(n,t){const e=n.cleanup,i=t[oa];if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else e[s].call(i[e[s+1]]);null!==i&&(t[oa]=null);const r=t[go];if(null!==r){t[go]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,t),1===t[ze].type&&t[mt].destroy();const e=t[Mu];if(null!==e&&Dr(t[An])){e!==t[An]&&jO(e,t);const i=t[po];null!==i&&i.detachView(n)}!function Wq(n){eI.delete(n[Ga])}(t)}}function lI(n,t,e){return function UO(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[ri];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Fr.None||s===Fr.Emulated)return null}return fr(i,e)}}(n,t.parent,e)}function Ku(n,t,e,i,r){n.insertBefore(t,e,i,r)}function HO(n,t,e){n.appendChild(t,e)}function zO(n,t,e,i,r){null!==i?Ku(n,t,e,i,r):HO(n,t,e)}function pw(n,t){return n.parentNode(t)}let cI,_w,fI,yw,qO=function WO(n,t,e){return 40&n.type?fr(n,e):null};function gw(n,t,e,i){const r=lI(n,i,t),s=t[mt],a=function $O(n,t,e){return qO(n,t,e)}(i.parent||t[hr],i,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)zO(s,r,e[l],a,!1);else zO(s,r,e,a,!1);void 0!==cI&&cI(s,i,t,e,r)}function Cm(n,t){if(null!==t){const e=t.type;if(3&e)return fr(t,n);if(4&e)return uI(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return Cm(n,i);{const r=n[t.index];return Dr(r)?uI(-1,r):xn(r)}}if(32&e)return rI(t,n)()||xn(n[t.index]);{const i=KO(n,t);return null!==i?Array.isArray(i)?i[0]:Cm(Em(n[qn]),i):Cm(n,t.next)}}return null}function KO(n,t){return null!==t?n[qn][hr].projection[t.projection]:null}function uI(n,t){const e=Xi+n+1;if(e<t.length){const i=t[e],r=i[ze].firstChild;if(null!==r)return Cm(i,r)}return t[Ts]}function dI(n,t,e,i,r,s,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&Hr(xn(a),i),e.flags|=2),32!=(32&e.flags))if(8&l)dI(n,t,e.child,i,r,s,!1),cf(t,n,r,a,s);else if(32&l){const c=rI(e,i);let u;for(;u=c();)cf(t,n,r,u,s);cf(t,n,r,a,s)}else 16&l?YO(n,t,i,e,r,s):cf(t,n,r,a,s);e=o?e.projectionNext:e.next}}function Dm(n,t,e,i,r,s){dI(e,i,n.firstChild,t,r,s,!1)}function YO(n,t,e,i,r,s){const o=e[qn],l=o[hr].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)cf(t,n,r,l[c],s);else{let c=l;const u=o[An];cw(i)&&(c.flags|=128),dI(n,t,c,u,r,s,!0)}}function QO(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function XO(n,t,e){const{mergedAttrs:i,classes:r,styles:s}=e;null!==i&&Th(n,t,i),null!==r&&QO(n,t,r),null!==s&&function pG(n,t,e){n.setAttribute(t,"style",e)}(n,t,s)}function uf(n){return function hI(){if(void 0===_w&&(_w=null,Sn.trustedTypes))try{_w=Sn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _w}()?.createHTML(n)||n}function df(){if(void 0!==fI)return fI;if(typeof document<"u")return document;throw new B(210,!1)}function pI(){if(void 0===yw&&(yw=null,Sn.trustedTypes))try{yw=Sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return yw}function JO(n){return pI()?.createHTML(n)||n}function tN(n){return pI()?.createScriptURL(n)||n}class nN{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${No})`}}function pc(n){return n instanceof nN?n.changingThisBreaksApplicationSecurity:n}function Tm(n,t){const e=function DG(n){return n instanceof nN&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${No})`)}return e===t}class TG{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(uf(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class IG{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=uf(t),e}}const AG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gI(n){return(n=String(n)).match(AG)?n:"unsafe:"+n}function el(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Im(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const rN=el("area,br,col,hr,img,wbr"),sN=el("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oN=el("rp,rt"),mI=Im(rN,Im(sN,el("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Im(oN,el("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Im(oN,sN)),_I=el("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),aN=Im(_I,el("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),el("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xG=el("script,style,template");class MG{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!mI.hasOwnProperty(e))return this.sanitizedSomething=!0,!xG.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!aN.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;_I[a]&&(l=gI(l)),this.buf.push(" ",o,'="',lN(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();mI.hasOwnProperty(e)&&!rN.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(lN(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const kG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,RG=/([^\#-~ |!])/g;function lN(n){return n.replace(/&/g,"&amp;").replace(kG,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(RG,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vw;function yI(n){return"content"in n&&function OG(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var hf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hf||{});function bw(n){const t=Sm();return t?JO(t.sanitize(hf.HTML,n)||""):Tm(n,"HTML")?JO(pc(n)):function PG(n,t){let e=null;try{vw=vw||function iN(n){const t=new IG(n);return function SG(){try{return!!(new window.DOMParser).parseFromString(uf(""),"text/html")}catch{return!1}}()?new TG(t):t}(n);let i=t?String(t):"";e=vw.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=vw.getInertBodyElement(i)}while(i!==s);return uf((new MG).sanitizeChildren(yI(e)||e))}finally{if(e){const i=yI(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(df(),le(n))}function cN(n){const t=Sm();return t?t.sanitize(hf.URL,n)||"":Tm(n,"URL")?pc(n):gI(le(n))}function uN(n){const t=Sm();if(t)return tN(t.sanitize(hf.RESOURCE_URL,n)||"");if(Tm(n,"ResourceURL"))return tN(pc(n));throw new B(904,!1)}function Sm(){const n=Te();return n&&n[la].sanitizer}const Am=new De("ENVIRONMENT_INITIALIZER"),hN=new De("INJECTOR",-1),fN=new De("INJECTOR_DEF_TYPES");class vI{get(t,e=za){if(e===za){const i=new Error(`NullInjectorError: No provider for ${yn(t)}!`);throw i.name="NullInjectorError",i}return e}}function bI(n){return{\u0275providers:n}}function pN(...n){return{\u0275providers:gN(0,n),\u0275fromNgModule:!0}}function gN(n,...t){const e=[],i=new Set;let r;const s=o=>{e.push(o)};return uc(t,o=>{const a=o;ww(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&mN(r,s),e}function mN(n,t){for(let e=0;e<n.length;e++){const{ngModule:i,providers:r}=n[e];wI(r,s=>{t(s,i)})}}function ww(n,t,e,i){if(!(n=lt(n)))return!1;let r=null,s=wu(n);const o=!s&&Ft(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=wu(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)ww(c,t,e,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{uc(s.imports,u=>{ww(u,t,e,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&mN(c,t)}if(!a){const c=Za(r)||(()=>new r);t({provide:r,useFactory:c,deps:Bt},r),t({provide:fN,useValue:r,multi:!0},r),t({provide:Am,useValue:()=>te(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;wI(l,u=>{t(u,c)})}}}return r!==n&&void 0!==n.providers}function wI(n,t){for(let e of n)Ul(e)&&(e=e.\u0275providers),Array.isArray(e)?wI(e,t):t(e)}const jG=Ye({provide:String,useValue:Ye});function EI(n){return null!==n&&"object"==typeof n&&jG in n}function Zu(n){return"function"==typeof n}const CI=new De("Set Injector scope."),Ew={},HG={};let DI;function Cw(){return void 0===DI&&(DI=new vI),DI}class Ys{}class ff extends Ys{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,II(t,o=>this.processProvider(o)),this.records.set(hN,pf(void 0,this)),r.has("environment")&&this.records.set(Ys,pf(void 0,this));const s=this.records.get(CI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fN.multi,Bt,Nt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of t)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=ho(this),i=ur(void 0);try{return t()}finally{ho(e),ur(i)}}get(t,e=za,i=Nt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty($v))return t[$v](this);i=Eh(i);const s=ho(this),o=ur(void 0);try{if(!(i&Nt.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function GG(n){return"function"==typeof n||"object"==typeof n&&n instanceof De}(t)&&Hl(t);l=c&&this.injectableDefInScope(c)?pf(TI(t),Ew):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(i&Nt.Self?Cw():this.parent).get(t,e=i&Nt.Optional&&e===za?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Wl]=a[Wl]||[]).unshift(yn(t)),s)throw a;return function oT(n,t,e,i){const r=n[Wl];throw t[Hv]&&r.unshift(t[Hv]),n.message=function aT(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=yn(t);if(Array.isArray(t))r=t.map(yn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):yn(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(Fo,"\n  ")}`}("\n"+n.message,r,e,i),n.ngTokenPath=r,n[Wl]=null,n}(a,t,"R3InjectorError",this.source)}throw a}finally{ur(o),ho(s)}}resolveInjectorInitializers(){const t=ho(this),e=ur(void 0);try{const r=this.get(Am.multi,Bt,Nt.Self);for(const s of r)s()}finally{ho(t),ur(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(yn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(t){let e=Zu(t=lt(t))?t:lt(t&&t.provide);const i=function $G(n){return EI(n)?pf(void 0,n.useValue):pf(vN(n),Ew)}(t);if(Zu(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=pf(void 0,Ew,!0),r.factory=()=>gg(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===Ew&&(e.value=HG,e.value=e.factory()),"object"==typeof e.value&&e.value&&function qG(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=lt(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function TI(n){const t=Hl(n),e=null!==t?t.factory:Za(n);if(null!==e)return e;if(n instanceof De)throw new B(204,!1);if(n instanceof Function)return function zG(n){const t=n.length;if(t>0)throw function dc(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}(t,"?"),new B(204,!1);const e=function Pv(n){return n&&(n[bh]||n[Ov])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new B(204,!1)}function vN(n,t,e){let i;if(Zu(n)){const r=lt(n);return Za(r)||TI(r)}if(EI(n))i=()=>lt(n.useValue);else if(function yN(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...gg(n.deps||[]));else if(function _N(n){return!(!n||!n.useExisting)}(n))i=()=>te(lt(n.useExisting));else{const r=lt(n&&(n.useClass||n.provide));if(!function WG(n){return!!n.deps}(n))return Za(r)||TI(r);i=()=>new r(...gg(n.deps))}return i}function pf(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function II(n,t){for(const e of n)Array.isArray(e)?II(e,t):e&&Ul(e)?II(e.\u0275providers,t):t(e)}const Dw=new De("AppId",{providedIn:"root",factory:()=>KG}),KG="ng",bN=new De("Platform Initializer"),vo=new De("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xm=new De("AnimationModuleType"),SI=new De("CSP nonce",{providedIn:"root",factory:()=>df().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let wN=(n,t,e)=>null;function NI(n,t,e=!1){return wN(n,t,e)}class r7{}class DN{}class o7{resolveComponentFactory(t){throw function s7(n){const t=Error(`No component factory found for ${yn(n)}.`);return t.ngComponent=n,t}(t)}}let Yu=(()=>{class n{static#e=this.NULL=new o7}return n})();function a7(){return _f(Ri(),Te())}function _f(n,t){return new hn(fr(n,t))}let hn=(()=>{class n{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=a7}return n})();function l7(n){return n instanceof hn?n.nativeElement:n}class Rm{}let zr=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function c7(){const n=Te(),e=ki(Ri().index,n);return(Lr(e)?e:n)[mt]}()}return n})(),u7=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null})}return n})();class gc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const IN=new gc("16.2.12"),VI={};function MN(n,t=null,e=null,i){const r=kN(n,t,e,i);return r.resolveInjectorInitializers(),r}function kN(n,t=null,e=null,i,r=new Set){const s=[e||Bt,pN(n)];return i=i||("object"==typeof n?void 0:yn(n)),new ff(s,t||Cw(),i||null,r)}let Ui=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=za;static#t=this.NULL=new vI;static create(e,i){if(Array.isArray(e))return MN({name:""},i,e,"");{const r=e.name??"";return MN({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=ke({token:n,providedIn:"any",factory:()=>te(hN)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function jI(n){return n.ngOriginalError}class tl{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&jI(t);for(;e&&jI(e);)e=jI(e);return e||null}}function HI(n){return t=>{setTimeout(n,void 0,t)}}const $e=class _7 extends ne{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=HI(s),r&&(r=HI(r)),o&&(o=HI(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof Ct&&t.add(a),a}};function PN(...n){}class ot{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $e(!1),this.onMicrotaskEmpty=new $e(!1),this.onStable=new $e(!1),this.onError=new $e(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function y7(){const n="function"==typeof Sn.requestAnimationFrame;let t=Sn[n?"requestAnimationFrame":"setTimeout"],e=Sn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function w7(n){const t=()=>{!function b7(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,$I(n),n.isCheckStableRunning=!0,zI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),$I(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,o,a)=>{if(function C7(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(r,s,o,a);try{return ON(n),e.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),NN(n)}},onInvoke:(e,i,r,s,o,a,l)=>{try{return ON(n),e.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),NN(n)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,$I(n),zI(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ot.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(ot.isInAngularZone())throw new B(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,v7,PN,PN);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const v7={};function zI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $I(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ON(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NN(n){n._nesting--,zI(n)}const FN=new De("",{providedIn:"root",factory:LN});function LN(){const n=He(ot);let t=!0;return ve(new ft(r=>{t=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(t),r.complete()})}),new ft(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(t=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{ot.assertInAngularZone(),t&&(t=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Xe()))}function nl(n){return n instanceof Function?n():n}let WI=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}return n})();function Pm(n){for(;n;){n[vt]|=64;const t=Em(n);if(Ru(n)&&!t)return n;n=t}return null}const HN=new De("",{providedIn:"root",factory:()=>!1});let kw=null;function qN(n,t){return n[t]??ZN()}function GN(n,t){const e=ZN();e.producerNode?.length&&(n[t]=kw,e.lView=n,kw=KN())}const P7={...nb,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Pm(n.lView)},lView:null};function KN(){return Object.create(P7)}function ZN(){return kw??=KN(),kw}const Et={};function j(n){YN(zt(),Te(),Tr()+n,!1)}function YN(n,t,e,i){if(!i)if(3==(3&t[vt])){const s=n.preOrderCheckHooks;null!==s&&Kh(t,s,e)}else{const s=n.preOrderHooks;null!==s&&Zh(t,s,0,e)}Qa(e)}function K(n,t=Nt.Default){const e=Te();return null===e?te(n,t):Xh(Ri(),e,lt(n),t)}function qI(){throw new Error("invalid")}function Rw(n,t,e,i,r,s,o,a,l,c,u){const f=t.blueprint.slice();return f[ri]=r,f[vt]=140|i,(null!==c||n&&2048&n[vt])&&(f[vt]|=2048),Uh(f),f[An]=f[Gl]=n,f[di]=e,f[la]=o||n&&n[la],f[mt]=a||n&&n[mt],f[aa]=l||n&&n[aa]||null,f[hr]=s,f[Ga]=function zq(){return Hq++}(),f[jo]=u,f[Jv]=c,f[qn]=2==t.type?n[qn]:f,f}function bf(n,t,e,i,r){let s=n.data[t];if(null===s)s=function GI(n,t,e,i,r){const s=Sb(),o=$g(),l=n.data[t]=function U7(n,t,e,i,r,s){let o=t?t.injectorIndex:-1,a=0;return function Jl(){return null!==ut.skipHydrationRootTNode}()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,t,e,i,r),function Ab(){return ut.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const o=function Uu(){const n=ut.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ss(s,!0),s}function Om(n,t,e,i){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function QN(n,t,e,i,r){const s=qN(t,Ka),o=Tr(),a=2&i;try{Qa(-1),a&&t.length>Mt&&YN(n,t,Mt,!1),Is(a?2:0,r);const c=a?s:null,u=Pu(c);try{null!==c&&(c.dirty=!1),e(i,r)}finally{Pg(c,u)}}finally{a&&null===t[Ka]&&GN(t,Ka),Qa(o),Is(a?3:1,r)}}function KI(n,t,e){if(xg(t)){const i=Mi(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{Mi(i)}}}function ZI(n,t,e){Ib()&&(function K7(n,t,e,i){const r=e.directiveStart,s=e.directiveEnd;Zl(e)&&function tK(n,t,e){const i=fr(t,n),r=XN(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=Pw(n,Rw(n,r,null,o,i,t,null,n[la].rendererFactory.createRenderer(i,e),null,null,null));n[t.index]=a}(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||yo(e,t),Hr(i,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Ja(t,n,a,e);Hr(c,t),null!==o&&nK(0,a-r,c,l,0,o),mo(l)&&(ki(e.index,t)[di]=Ja(t,n,a,e))}}(n,t,e,fr(e,t)),64==(64&e.flags)&&iF(n,t,e))}function YI(n,t,e=fr){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?e(t,n):n[o];n[r++]=a}}}function XN(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=QI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function QI(n,t,e,i,r,s,o,a,l,c,u){const f=Mt+i,m=f+r,y=function N7(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:Et);return e}(f,m),v="function"==typeof c?c():c;return y[ze]={type:n,blueprint:y,template:e,queries:null,viewQuery:a,declTNode:t,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:u}}let JN=n=>null;function eF(n,t,e,i){for(let r in n)if(n.hasOwnProperty(r)){e=null===e?{}:e;const s=n[r];null===i?tF(e,t,r,s):i.hasOwnProperty(r)&&tF(e,t,i[r],s)}return e}function tF(n,t,e,i){n.hasOwnProperty(e)?n[e].push(t,i):n[e]=[t,i]}function Qs(n,t,e,i,r,s,o,a){const l=fr(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(nS(n,e,u,i,r),Zl(t)&&function $7(n,t){const e=ki(t,n);16&e[vt]||(e[vt]|=64)}(e,t.index)):3&t.type&&(i=function z7(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,t.value||"",i):r,s.setProperty(l,i,r))}function XI(n,t,e,i){if(Ib()){const r=null===i?null:{"":-1},s=function Y7(n,t){const e=n.directiveRegistry;let i=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Sh(t,o.selectors,!1))if(i||(i=[]),mo(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),JI(n,t,a.length)}else i.unshift(o),JI(n,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&nF(n,t,e,o,r,a),r&&function Q7(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new B(-301,!1);i.push(t[r],s)}}}(e,i,r)}e.mergedAttrs=dr(e.mergedAttrs,e.attrs)}function nF(n,t,e,i,r,s){for(let c=0;c<i.length;c++)om(yo(e,t),n,i[c].type);!function J7(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Om(n,t,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];e.mergedAttrs=dr(e.mergedAttrs,u.hostAttrs),eK(n,e,t,l,u),X7(l,u,r),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const f=u.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function H7(n,t,e){const r=t.directiveEnd,s=n.data,o=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<r;u++){const f=s[u],m=e?e.get(f):null,v=m?m.outputs:null;l=eF(f.inputs,u,l,m?m.inputs:null),c=eF(f.outputs,u,c,v);const w=null===l||null===o||Au(t)?null:iK(l,u,o);a.push(w)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,s)}function iF(n,t,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,o=function AT(){return ut.lFrame.currentDirectiveIndex}();try{Qa(s);for(let a=i;a<r;a++){const l=n.data[a],c=t[a];$h(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Z7(l,c)}}finally{Qa(-1),$h(o)}}function Z7(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function JI(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function X7(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;mo(t)&&(e[""]=n)}}function eK(n,t,e,i,r){n.data[i]=r;const s=r.factory||(r.factory=Za(r.type)),o=new Xa(s,mo(r),K);n.blueprint[i]=o,e[i]=o,function q7(n,t,e,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~t.index;(function G7(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,i,s)}}(n,t,i,Om(n,e,r.hostVars,Et),r)}function ga(n,t,e,i,r,s){const o=fr(n,t);!function eS(n,t,e,i,r,s,o){if(null==s)n.removeAttribute(t,r,e);else{const a=null==o?le(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}(t[mt],o,s,n.value,e,i,r)}function nK(n,t,e,i,r,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)rF(i,e,o[a++],o[a++],o[a++])}function rF(n,t,e,i,r){const s=Mi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(t,r)),null!==n.setInput?n.setInput(t,r,e,i):t[i]=r}finally{Mi(s)}}function iK(n,t,e){let i=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){i.push(s,o[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function sF(n,t,e,i){return[n,!0,!1,t,null,0,i,e,null,null,null]}function oF(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const o=n.data[s];Zg(e[i]),o.contentQueries(2,t[s],s)}}}function Pw(n,t){return n[xu]?n[Ph][Gs]=t:n[xu]=t,n[Ph]=t,t}function tS(n,t,e){Zg(0);const i=Mi(null);try{t(n,e)}finally{Mi(i)}}function aF(n){return n[oa]||(n[oa]=[])}function lF(n){return n.cleanup||(n.cleanup=[])}function uF(n,t){const e=n[aa],i=e?e.get(tl,null):null;i&&i.handleError(t)}function nS(n,t,e,i,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++];rF(n.data[o],t[o],i,a,r)}}function il(n,t,e){const i=Ya(t,n);!function BO(n,t,e){n.setValue(t,e)}(n[mt],i,e)}function rK(n,t){const e=ki(t,n),i=e[ze];!function sK(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}(i,e);const r=e[ri];null!==r&&null===e[jo]&&(e[jo]=NI(r,e[aa])),iS(i,e,e[di])}function iS(n,t,e){Yg(t);try{const i=n.viewQuery;null!==i&&tS(1,i,e);const r=n.template;null!==r&&QN(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&oF(n,t),n.staticViewQueries&&tS(2,n.viewQuery,e);const s=n.components;null!==s&&function oK(n,t){for(let e=0;e<t.length;e++)rK(n,t[e])}(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[vt]&=-5,Xg()}}let dF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(e,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function mT(n,t,e){const i=Object.create(_T);e&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=t;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>sb(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Lh(i))return;i.hasRun=!0;const o=Pu(i);try{i.cleanupFn(),i.cleanupFn=pb,i.fn(r)}finally{Pg(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(e,c=>{this.all.has(c)&&this.queue.set(c,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[e,i]of this.queue)this.queue.delete(e),i?i.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ow(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=sa(r,a):2==s&&(i=sa(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function Nm(n,t,e,i,r=!1){for(;null!==e;){const s=t[e.index];null!==s&&i.push(xn(s)),Dr(s)&&hF(s,i);const o=e.type;if(8&o)Nm(n,t,e.child,i);else if(32&o){const a=rI(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=KO(t,e);if(Array.isArray(a))i.push(...a);else{const l=Em(t[qn]);Nm(l[ze],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function hF(n,t){for(let e=Xi;e<n.length;e++){const i=n[e],r=i[ze].firstChild;null!==r&&Nm(i[ze],i,r,t)}n[Ts]!==n[ri]&&t.push(n[Ts])}function Nw(n,t,e,i=!0){const r=t[la],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{fF(n,t,n.template,e)}catch(l){throw i&&uF(t,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function fF(n,t,e,i){const r=t[vt];if(256!=(256&r)){t[la].effectManager?.flush(),Yg(t);try{Uh(t),function Gg(n){return ut.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&QN(n,t,e,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&Kh(t,c,null)}else{const c=n.preOrderHooks;null!==c&&Zh(t,c,0,null),em(t,0)}if(function cK(n){for(let t=FO(n);null!==t;t=LO(t)){if(!t[Ag])continue;const e=t[Ks];for(let i=0;i<e.length;i++){wb(e[i])}}}(t),pF(t,2),null!==n.contentQueries&&oF(n,t),o){const c=n.contentCheckHooks;null!==c&&Kh(t,c)}else{const c=n.contentHooks;null!==c&&Zh(t,c,1),em(t,1)}!function O7(n,t){const e=n.hostBindingOpCodes;if(null===e)return;const i=qN(t,ku);try{for(let r=0;r<e.length;r++){const s=e[r];if(s<0)Qa(~s);else{const o=s,a=e[++r],l=e[++r];xb(a,o),i.dirty=!1;const c=Pu(i);try{l(2,t[o])}finally{Pg(i,c)}}}}finally{null===t[ku]&&GN(t,ku),Qa(-1)}}(n,t);const a=n.components;null!==a&&mF(t,a,0);const l=n.viewQuery;if(null!==l&&tS(2,l,i),o){const c=n.viewCheckHooks;null!==c&&Kh(t,c)}else{const c=n.viewHooks;null!==c&&Zh(t,c,2),em(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[vt]&=-73,Eb(t)}finally{Xg()}}}function pF(n,t){for(let e=FO(n);null!==e;e=LO(e))for(let i=Xi;i<e.length;i++)gF(e[i],t)}function uK(n,t,e){gF(ki(t,n),e)}function gF(n,t){if(!function CT(n){return 128==(128&n[vt])}(n))return;const e=n[ze],i=n[vt];if(80&i&&0===t||1024&i||2===t)fF(e,n,e.template,n[di]);else if(n[qa]>0){pF(n,1);const r=e.components;null!==r&&mF(n,r,1)}}function mF(n,t,e){for(let i=0;i<t.length;i++)uK(n,t[i],e)}class Fm{get rootNodes(){const t=this._lView,e=t[ze];return Nm(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[di]}set context(t){this._lView[di]=t}get destroyed(){return 256==(256&this._lView[vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[An];if(Dr(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(fw(t,i),pa(e,i))}this._attachedToViewContainer=!1}oI(this._lView[ze],this._lView)}onDestroy(t){!function Hh(n,t){if(256==(256&n[vt]))throw new B(911,!1);null===n[go]&&(n[go]=[]),n[go].push(t)}(this._lView,t)}markForCheck(){Pm(this._cdRefInjectingView||this._lView)}detach(){this._lView[vt]&=-129}reattach(){this._lView[vt]|=128}detectChanges(){Nw(this._lView[ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iG(n,t){Dm(n,t,t[mt],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=t}}class dK extends Fm{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Nw(t[ze],t,t[di],!1)}checkNoChanges(){}get context(){return null}}class _F extends Yu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ft(t);return new Lm(e,this.ngModule)}}function yF(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class fK{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Eh(i);const r=this.injector.get(t,VI,i);return r!==VI||e===VI?r:this.parentInjector.get(t,e,i)}}class Lm extends DN{get inputs(){const t=this.componentDef,e=t.inputTransforms,i=yF(t.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return yF(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function Dg(n){return n.map(Zv).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let s=(r=r||this.ngModule)instanceof Ys?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new fK(t,s):t,a=o.get(Rm,null);if(null===a)throw new B(407,!1);const f={rendererFactory:a,sanitizer:o.get(u7,null),effectManager:o.get(dF,null),afterRenderEventManager:o.get(WI,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",v=i?function F7(n,t,e,i){const s=i.get(HN,!1)||e===Fr.ShadowDom,o=n.selectRootElement(t,s);return function L7(n){JN(n)}(o),o}(m,i,this.componentDef.encapsulation,o):hw(m,y,function hK(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(y)),k=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let S=null;null!==v&&(S=NI(v,o,!0));const R=QI(0,null,null,1,0,null,null,null,null,null,null),z=Rw(null,R,null,k,null,null,f,m,o,null,S);let q,ee;Yg(z);try{const N=this.componentDef;let M,P=null;N.findHostDirectiveDefs?(M=[],P=new Map,N.findHostDirectiveDefs(N,M,P),M.push(N)):M=[N];const U=function gK(n,t){const e=n[ze],i=Mt;return n[i]=t,bf(e,i,2,"#host",null)}(z,v),V=function mK(n,t,e,i,r,s,o){const a=r[ze];!function _K(n,t,e,i){for(const r of n)t.mergedAttrs=dr(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(Ow(t,t.mergedAttrs,!0),null!==e&&XO(i,e,t))}(i,n,t,o);let l=null;null!==t&&(l=NI(t,r[aa]));const c=s.rendererFactory.createRenderer(t,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const f=Rw(r,XN(e),null,u,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&JI(a,n,i.length-1),Pw(r,f),r[n.index]=f}(U,v,N,M,z,f,m);ee=jh(R,Mt),v&&function vK(n,t,e,i){if(i)Th(n,e,["ng-version",IN.full]);else{const{attrs:r,classes:s}=function Mh(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&t.push(s,n[++i]):8===r&&e.push(s);else{if(!qs(r))break;r=s}i++}return{attrs:t,classes:e}}(t.selectors[0]);r&&Th(n,e,r),s&&s.length>0&&QO(n,e,s.join(" "))}}(m,N,v,i),void 0!==e&&function bK(n,t,e){const i=n.projection=[];for(let r=0;r<t.length;r++){const s=e[r];i.push(null!=s?Array.from(s):null)}}(ee,this.ngContentSelectors,e),q=function yK(n,t,e,i,r,s){const o=Ri(),a=r[ze],l=fr(o,r);nF(a,r,o,e,null,i);for(let u=0;u<e.length;u++)Hr(Ja(r,a,o.directiveStart+u,o),r);iF(a,r,o),l&&Hr(l,r);const c=Ja(r,a,o.directiveStart+o.componentOffset,o);if(n[di]=r[di]=c,null!==s)for(const u of s)u(c,t);return KI(a,o,n),c}(V,N,M,P,z,[wK]),iS(R,z,null)}finally{Xg()}return new pK(this.componentType,q,_f(ee,z),z,ee)}}class pK extends r7{constructor(t,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new dK(r),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const s=this._rootLView;nS(s[ze],s,r,t,e),this.previousInputValues.set(t,e),Pm(ki(this._tNode.index,s))}}get injector(){return new Ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function wK(){const n=Ri();Gh(Te()[ze],n)}function rn(n){let t=function vF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(mo(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new B(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);const o=n;o.inputs=Fw(n.inputs),o.inputTransforms=Fw(n.inputTransforms),o.declaredInputs=Fw(n.declaredInputs),o.outputs=Fw(n.outputs);const a=r.hostBindings;a&&TK(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&CK(n,l),c&&DK(n,c),Wn(n.inputs,r.inputs),Wn(n.declaredInputs,r.declaredInputs),Wn(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Wn(o.inputTransforms,r.inputTransforms)),mo(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===rn&&(e=!1)}}t=Object.getPrototypeOf(t)}!function EK(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=dr(r.hostAttrs,e=dr(e,r.hostAttrs))}}(i)}function Fw(n){return n===Li?{}:n===Bt?[]:n}function CK(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function DK(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,s)=>{t(i,r,s),e(i,r,s)}:t}function TK(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}function CF(n){const t=n.inputConfig,e={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];Array.isArray(r)&&r[2]&&(e[i]=r[2])}n.inputTransforms=e}function Lw(n){return!!rS(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function rS(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ma(n,t,e){return n[t]=e}function Vm(n,t){return n[t]}function $r(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Qu(n,t,e,i){const r=$r(n,t,e);return $r(n,t+1,i)||r}function Vw(n,t,e,i,r){const s=Qu(n,t,e,i);return $r(n,t+2,r)||s}function bo(n,t,e,i,r,s){const o=Qu(n,t,e,i);return Qu(n,t+2,r,s)||o}function fi(n,t,e,i){const r=Te();return $r(r,ha(),t)&&(zt(),ga(Gn(),r,n,t,e,i)),fi}function Cf(n,t,e,i,r,s){const a=Qu(n,function Zs(){return ut.lFrame.bindingIndex}(),e,r);return Ho(2),a?t+le(e)+i+le(r)+s:Et}function xe(n,t,e,i,r,s,o,a){const l=Te(),c=zt(),u=n+Mt,f=c.firstCreatePass?function YK(n,t,e,i,r,s,o,a,l){const c=t.consts,u=bf(t,n,4,o||null,da(c,a));XI(t,e,u,da(c,l)),Gh(t,u);const f=u.tView=QI(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,i,r,s,o):c.data[u];Ss(f,!1);const m=FF(c,l,f,n);qh()&&gw(c,l,m,f),Hr(m,l),Pw(l,l[u]=sF(m,l,m,f)),Mg(f)&&ZI(c,l,f),null!=o&&YI(l,f,a)}let FF=function LF(n,t,e,i){return fa(!0),t[mt].createComment("")};function pr(n){return _o(function qg(){return ut.lFrame.contextLView}(),Mt+n)}function W(n,t,e){const i=Te();return $r(i,ha(),t)&&Qs(zt(),Gn(),i,n,t,i[mt],e,!1),W}function uS(n,t,e,i,r){const o=r?"class":"style";nS(n,e,t.inputs[o],o,i)}function T(n,t,e,i){const r=Te(),s=zt(),o=Mt+n,a=r[mt],l=s.firstCreatePass?function eZ(n,t,e,i,r,s){const o=t.consts,l=bf(t,n,2,i,da(o,r));return XI(t,e,l,da(o,s)),null!==l.attrs&&Ow(l,l.attrs,!1),null!==l.mergedAttrs&&Ow(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,i):s.data[o],c=VF(s,r,l,a,t,n);r[o]=c;const u=Mg(l);return Ss(l,!0),XO(a,c,l),32!=(32&l.flags)&&qh()&&gw(s,r,c,l),0===function Bg(){return ut.lFrame.elementDepthCount}()&&Hr(c,r),function IT(){ut.lFrame.elementDepthCount++}(),u&&(ZI(s,r,l),KI(s,l,r)),null!==i&&YI(r,l),T}function I(){let n=Ri();$g()?Wg():(n=n.parent,Ss(n,!1));const t=n;(function jg(n){return ut.skipHydrationRootTNode===n})(t)&&function zg(){ut.skipHydrationRootTNode=null}(),function ju(){ut.lFrame.elementDepthCount--}();const e=zt();return e.firstCreatePass&&(Gh(e,n),xg(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function LT(n){return 0!=(8&n.flags)}(t)&&uS(e,t,Te(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function pO(n){return 0!=(16&n.flags)}(t)&&uS(e,t,Te(),t.stylesWithoutHost,!1),I}function On(n,t,e,i){return T(n,t,e,i),I(),On}let VF=(n,t,e,i,r,s)=>(fa(!0),hw(i,r,function Pb(){return ut.lFrame.currentNamespace}()));function dS(n,t,e){const i=Te(),r=zt(),s=n+Mt,o=r.firstCreatePass?function iZ(n,t,e,i,r){const s=t.consts,o=da(s,i),a=bf(t,n,8,"ng-container",o);return null!==o&&Ow(a,o,!0),XI(t,e,a,da(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,e):r.data[s];Ss(o,!0);const a=BF(r,i,o,n);return i[s]=a,qh()&&gw(r,i,a,o),Hr(a,i),Mg(o)&&(ZI(r,i,o),KI(r,o,i)),null!=e&&YI(i,o),dS}function hS(){let n=Ri();const t=zt();return $g()?Wg():(n=n.parent,Ss(n,!1)),t.firstCreatePass&&(Gh(t,n),xg(n)&&t.queries.elementEnd(n)),hS}function fS(n,t,e){return dS(n,t,e),hS(),fS}let BF=(n,t,e,i)=>(fa(!0),sI(t[mt],""));function _t(){return Te()}function Hm(n){return!!n&&"function"==typeof n.then}function jF(n){return!!n&&"function"==typeof n.subscribe}function ae(n,t,e,i){const r=Te(),s=zt(),o=Ri();return function HF(n,t,e,i,r,s,o){const a=Mg(i),c=n.firstCreatePass&&lF(n),u=t[di],f=aF(t);let m=!0;if(3&i.type||o){const w=fr(i,t),E=o?o(w):w,k=f.length,S=o?z=>o(xn(z[i.index])):i.index;let R=null;if(!o&&a&&(R=function oZ(n,t,e,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===i){const a=t[oa],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,r,i.index)),null!==R)(R.__ngLastListenerFn__||R).__ngNextListenerFn__=s,R.__ngLastListenerFn__=s,m=!1;else{s=$F(i,t,u,s,!1);const z=e.listen(E,r,s);f.push(s,z),c&&c.push(r,S,k,k+1)}}else s=$F(i,t,u,s,!1);const y=i.outputs;let v;if(m&&null!==y&&(v=y[r])){const w=v.length;if(w)for(let E=0;E<w;E+=2){const q=t[v[E]][v[E+1]].subscribe(s),ee=f.length;f.push(s,q),c&&c.push(r,i.index,ee,-(ee+1))}}}(s,r,r[mt],o,n,t,i),ae}function zF(n,t,e,i){try{return Is(6,t,e),!1!==e(i)}catch(r){return uF(n,r),!1}finally{Is(7,t,e)}}function $F(n,t,e,i,r){return function s(o){if(o===Function)return i;Pm(n.componentOffset>-1?ki(n.index,t):t);let l=zF(t,e,i,o),c=s.__ngNextListenerFn__;for(;c;)l=zF(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function J(n=1){return function MT(n){return(ut.lFrame.contextLView=function kT(n,t){for(;n>0;)t=t[Gl],n--;return t}(n,ut.lFrame.contextLView))[di]}(n)}function Hw(n,t){return n<<17|t<<2}function mc(n){return n>>17&32767}function gS(n){return 2|n}function Xu(n){return(131068&n)>>2}function mS(n,t){return-131069&n|t<<2}function _S(n){return 1|n}function eL(n,t,e,i,r){const s=n[e+1],o=null===t;let a=i?mc(s):Xu(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];gZ(n[a],t)&&(l=!0,n[a+1]=i?_S(u):gS(u)),a=i?mc(u):Xu(u)}l&&(n[e+1]=i?gS(s):_S(s))}function gZ(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&ls(n,t)>=0}function wo(n,t,e){return Wo(n,t,e,!1),wo}function gr(n,t){return Wo(n,t,null,!0),gr}function Wo(n,t,e,i){const r=Te(),s=zt(),o=Ho(2);s.firstUpdatePass&&function lL(n,t,e,i){const r=n.data;if(null===r[e+1]){const s=r[Tr()],o=function aL(n,t){return t>=n.expandoStartIndex}(n,e);(function hL(n,t){return 0!=(n.flags&(t?8:16))})(s,i)&&null===t&&!o&&(t=!1),t=function DZ(n,t,e,i){const r=function Hu(n){const t=ut.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=zm(e=yS(null,n,t,e,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==r)if(e=yS(r,n,t,e,i),null===s){let l=function TZ(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==Xu(i))return n[mc(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=yS(null,n,t,l[1],i),l=zm(l,t.attrs,i),function IZ(n,t,e,i){n[mc(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else s=function SZ(n,t,e){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=zm(i,n[s].hostAttrs,e);return zm(i,t.attrs,e)}(n,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,i),function fZ(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=mc(o),l=Xu(o);n[i]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||ls(e,u)>0)&&(c=!0)):u=e,r)if(0!==l){const m=mc(n[a+1]);n[i+1]=Hw(m,a),0!==m&&(n[m+1]=mS(n[m+1],i)),n[a+1]=function dZ(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=Hw(a,0),0!==a&&(n[a+1]=mS(n[a+1],i)),a=i;else n[i+1]=Hw(l,0),0===a?a=i:n[l+1]=mS(n[l+1],i),l=i;c&&(n[i+1]=gS(n[i+1])),eL(n,u,i,!0),eL(n,u,i,!1),function pZ(n,t,e,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&ls(s,t)>=0&&(e[i+1]=_S(e[i+1]))}(t,u,n,i,s),o=Hw(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,i)}}(s,n,o,i),t!==Et&&$r(r,o,t)&&function uL(n,t,e,i,r,s,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function hZ(n){return 1==(1&n)}(c)?dL(l,t,e,r,Xu(c),o):void 0;zw(u)||(zw(s)||function uZ(n){return 2==(2&n)}(c)&&(s=dL(l,null,e,r,a,o)),function fG(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=-1===i.indexOf("-")?void 0:fc.DashCase;null==r?n.removeStyle(e,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=fc.Important),n.setStyle(e,i,r,s))}}(i,o,Ya(Tr(),e),r,s))}(s,s.data[Tr()],r,r[mt],n,r[o+1]=function kZ(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=yn(pc(n)))),n}(t,e),i,o)}function yS(n,t,e,i,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],i=zm(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function zm(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),jr(n,o,!!e||t[++s]))}return void 0===n?null:n}function dL(n,t,e,i,r,s){const o=null===t;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,f=null===u;let m=e[r+1];m===Et&&(m=f?Bt:void 0);let y=f?dm(m,i):u===i?m:void 0;if(c&&!zw(y)&&(y=dm(l,i)),zw(y)&&(a=y,o))return a;const v=n[r+1];r=o?mc(v):Xu(v)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=dm(l,i))}return a}function zw(n){return void 0!==n}function F(n,t=""){const e=Te(),i=zt(),r=n+Mt,s=i.firstCreatePass?bf(i,r,1,t,null):i.data[r],o=fL(i,e,s,t,n);e[r]=o,qh()&&gw(i,e,o,s),Ss(s,!1)}let fL=(n,t,e,i,r)=>(fa(!0),function dw(n,t){return n.createText(t)}(t[mt],i));function nt(n){return cs("",n,""),nt}function cs(n,t,e){const i=Te(),r=function Ef(n,t,e,i){return $r(n,ha(),e)?t+le(e)+i:Et}(i,n,t,e);return r!==Et&&il(i,Tr(),r),cs}function vS(n,t,e,i,r){const s=Te(),o=Cf(s,n,t,e,i,r);return o!==Et&&il(s,Tr(),o),vS}function bS(n,t,e){const i=Te();return $r(i,ha(),t)&&Qs(zt(),Gn(),i,n,t,i[mt],e,!0),bS}const Ju=void 0;var JZ=["en",[["a","p"],["AM","PM"],Ju],[["AM","PM"],Ju,Ju],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ju,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ju,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ju,"{1} 'at' {0}",Ju],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XZ(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let kf={};function us(n){const t=function eY(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=RL(t);if(e)return e;const i=t.split("-")[0];if(e=RL(i),e)return e;if("en"===i)return JZ;throw new B(701,!1)}function RL(n){return n in kf||(kf[n]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[n]),kf[n]}var Bn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bn||{});const Rf="en-US";let PL=Rf;function CS(n,t,e,i,r){if(n=lt(n),Array.isArray(n))for(let s=0;s<n.length;s++)CS(n[s],t,e,i,r);else{const s=zt(),o=Te(),a=Ri();let l=Zu(n)?n:lt(n.provide);const c=vN(n),u=1048575&a.providerIndexes,f=a.directiveStart,m=a.providerIndexes>>20;if(Zu(n)||!n.multi){const y=new Xa(c,r,K),v=TS(l,t,r?u:u+m,f);-1===v?(om(yo(a,o),s,l),DS(s,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(y),o.push(y)):(e[v]=y,o[v]=y)}else{const y=TS(l,t,u+m,f),v=TS(l,t,u,u+m),E=v>=0&&e[v];if(r&&!E||!r&&!(y>=0&&e[y])){om(yo(a,o),s,l);const k=function XY(n,t,e,i,r){const s=new Xa(n,e,K);return s.multi=[],s.index=t,s.componentProviders=0,s2(s,r,i&&!e),s}(r?QY:YY,e.length,r,i,c);!r&&E&&(e[v].providerFactory=k),DS(s,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(k),o.push(k)}else DS(s,n,y>-1?y:v,s2(e[r?v:y],c,!r&&i));!r&&i&&E&&e[v].componentProviders++}}}function DS(n,t,e,i){const r=Zu(t),s=function UG(n){return!!n.useClass}(t);if(r||s){const l=(s?lt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function s2(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function TS(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function YY(n,t,e,i){return IS(this.multi,[])}function QY(n,t,e,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ja(e,e[ze],this.providerFactory.index,i);s=a.slice(0,o),IS(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],IS(r,s);return s}function IS(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function fn(n,t=[]){return e=>{e.providersResolver=(i,r)=>function ZY(n,t,e){const i=zt();if(i.firstCreatePass){const r=mo(n);CS(e,i.data,i.blueprint,r,!0),CS(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class ed{}class o2{}class SS extends ed{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _F(this);const r=Cr(t);this._bootstrapComponents=nl(r.bootstrap),this._r3Injector=kN(t,e,[{provide:ed,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver},...i],yn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class AS extends o2{constructor(t){super(),this.moduleType=t}create(t){return new SS(this.moduleType,t,[])}}class a2 extends ed{constructor(t){super(),this.componentFactoryResolver=new _F(this),this.instance=null;const e=new ff([...t.providers,{provide:ed,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],t.parent||Cw(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function xS(n,t,e=null){return new a2({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}let tQ=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=gN(0,e.type),r=i.length>0?xS([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(te(Ys))})}return n})();function Wr(n){n.getStandaloneInjector=t=>t.get(tQ).getOrCreateStandaloneInjector(n)}function Kn(n,t,e){const i=Bi()+n,r=Te();return r[i]===Et?ma(r,i,e?t.call(e):t()):Vm(r,i)}function Ir(n,t,e,i){return _2(Te(),Bi(),n,t,e,i)}function tr(n,t,e,i,r){return y2(Te(),Bi(),n,t,e,i,r)}function Kw(n,t,e,i,r,s){return v2(Te(),Bi(),n,t,e,i,r,s)}function p2(n,t,e,i,r,s,o){return function b2(n,t,e,i,r,s,o,a,l){const c=t+e;return bo(n,c,r,s,o,a)?ma(n,c+4,l?i.call(l,r,s,o,a):i(r,s,o,a)):Zm(n,c+4)}(Te(),Bi(),n,t,e,i,r,s,o)}function kS(n,t,e,i,r,s,o,a){const l=Bi()+n,c=Te(),u=bo(c,l,e,i,r,s);return $r(c,l+4,o)||u?ma(c,l+5,a?t.call(a,e,i,r,s,o):t(e,i,r,s,o)):Vm(c,l+5)}function RS(n,t,e,i){return function w2(n,t,e,i,r,s){let o=t+e,a=!1;for(let l=0;l<r.length;l++)$r(n,o++,r[l])&&(a=!0);return a?ma(n,o,i.apply(s,r)):Zm(n,o)}(Te(),Bi(),n,t,e,i)}function Zm(n,t){const e=n[t];return e===Et?void 0:e}function _2(n,t,e,i,r,s){const o=t+e;return $r(n,o,r)?ma(n,o+1,s?i.call(s,r):i(r)):Zm(n,o+1)}function y2(n,t,e,i,r,s,o){const a=t+e;return Qu(n,a,r,s)?ma(n,a+2,o?i.call(o,r,s):i(r,s)):Zm(n,a+2)}function v2(n,t,e,i,r,s,o,a){const l=t+e;return Vw(n,l,r,s,o)?ma(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):Zm(n,l+3)}function Xt(n,t){const e=zt();let i;const r=n+Mt;e.firstCreatePass?(i=function dQ(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}}(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=Za(i.type)),a=ur(K);try{const l=Qh(!1),c=s();return Qh(l),function JK(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,Te(),r,c),c}finally{ur(a)}}function PS(n,t,e){const i=n+Mt,r=Te(),s=_o(r,i);return Ym(r,i)?_2(r,Bi(),t,s.transform,e,s):s.transform(e)}function pi(n,t,e,i){const r=n+Mt,s=Te(),o=_o(s,r);return Ym(s,r)?y2(s,Bi(),t,o.transform,e,i,o):o.transform(e,i)}function va(n,t,e,i,r){const s=n+Mt,o=Te(),a=_o(o,s);return Ym(o,s)?v2(o,Bi(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function Ym(n,t){return n[ze].data[t].pure}function pQ(){return this._results[Symbol.iterator]()}class OS{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new $e)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=OS.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=pQ)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=function Vr(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function GT(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function mQ(n,t,e,i=!0){const r=t[ze];if(function sG(n,t,e,i){const r=Xi+i,s=e.length;i>0&&(e[r-1][Gs]=t),i<s-Xi?(t[Gs]=e[r],Br(e,Xi+i,t)):(e.push(t),t[Gs]=null),t[An]=e;const o=t[Mu];null!==o&&e!==o&&function oG(n,t){const e=n[Ks];t[qn]!==t[An][An][qn]&&(n[Ag]=!0),null===e?n[Ks]=[t]:e.push(t)}(o,t);const a=t[po];null!==a&&a.insertView(n),t[vt]|=128}(r,t,n,e),i){const s=uI(e,n),o=t[mt],a=pw(o,n[Ts]);null!==a&&function nG(n,t,e,i,r,s){i[ri]=r,i[hr]=t,Dm(n,i,e,1,r,s)}(r,n[hr],o,t,a,s)}}let Eo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=vQ}return n})();const _Q=Eo,yQ=class extends _Q{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){const r=function gQ(n,t,e,i){const r=t.tView,a=Rw(n,r,e,4096&n[vt]?4096:16,null,t,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Mu]=n[t.index];const c=n[po];return null!==c&&(a[po]=c.createEmbeddedView(r)),iS(r,a,e),a}(this._declarationLView,this._declarationTContainer,t,{injector:e,hydrationInfo:i});return new Fm(r)}};function vQ(){return Zw(Ri(),Te())}function Zw(n,t){return 4&n.type?new yQ(t,n,_f(n,t)):null}let ds=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=TQ}return n})();function TQ(){return A2(Ri(),Te())}const IQ=ds,I2=class extends IQ{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return _f(this._hostTNode,this._hostLView)}get injector(){return new Ji(this._hostTNode,this._hostLView)}get parentInjector(){const t=ic(this._hostTNode,this._hostLView);if(tc(t)){const e=$u(t,this._hostLView),i=nc(t);return new Ji(e[ze].data[i+8],e)}return new Ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=S2(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Xi}createEmbeddedView(t,e,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=t.createEmbeddedViewImpl(e||{},s,null);return this.insertImpl(a,r,false),a}createComponent(t,e,i,r,s){const o=t&&!function cc(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const w=e||{};a=w.index,i=w.injector,r=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const l=o?t:new Lm(Ft(t)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const E=(o?c:this.parentInjector).get(Ys,null);E&&(s=E)}Ft(l.componentType??{});const y=l.create(c,r,null,s);return this.insertImpl(y.hostView,a,false),y}insert(t,e){return this.insertImpl(t,e,!1)}insertImpl(t,e,i){const r=t._lView;if(function DT(n){return Dr(n[An])}(r)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const c=r[An],u=new I2(c,c[hr],c[An]);u.detach(u.indexOf(t))}}const o=this._adjustIndex(e),a=this._lContainer;return mQ(a,r,o,!i),t.attachToViewContainerRef(),Br(NS(a),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=S2(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=fw(this._lContainer,e);i&&(pa(NS(this._lContainer),e),oI(i[ze],i))}detach(t){const e=this._adjustIndex(t,-1),i=fw(this._lContainer,e);return i&&null!=pa(NS(this._lContainer),e)?new Fm(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function S2(n){return n[8]}function NS(n){return n[8]||(n[8]=[])}function A2(n,t){let e;const i=t[n.index];return Dr(i)?e=i:(e=sF(i,t,null,n),t[n.index]=e,Pw(t,e)),x2(e,t,n,i),new I2(e,n,t)}let x2=function M2(n,t,e,i){if(n[Ts])return;let r;r=8&e.type?xn(i):function SQ(n,t){const e=n[mt],i=e.createComment(""),r=fr(t,n);return Ku(e,pw(e,r),i,function uG(n,t){return n.nextSibling(t)}(e,r),!1),i}(t,e),n[Ts]=r};class FS{constructor(t){this.queryList=t,this.matches=null}clone(){return new FS(this.queryList)}setDirty(){this.queryList.setDirty()}}class LS{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new LS(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==N2(t,e).matches&&this.queries[e].setDirty()}}class k2{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class VS{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new VS(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class BS{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new BS(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,e,MQ(e,s)),this.matchTNodeWithReadOption(t,e,rc(e,t,s,!1,!1))}else i===Eo?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,rc(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===hn||r===ds||r===Eo&&4&e.type)this.addMatch(e.index,-2);else{const s=rc(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function MQ(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function RQ(n,t,e,i){return-1===e?function kQ(n,t){return 11&n.type?_f(n,t):4&n.type?Zw(n,t):null}(t,n):-2===e?function PQ(n,t,e){return e===hn?_f(t,n):e===Eo?Zw(t,n):e===ds?A2(t,n):void 0}(n,t,i):Ja(n,n[ze],e,t)}function R2(n,t,e,i){const r=t[po].queries[i];if(null===r.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:RQ(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function jS(n,t,e,i){const r=n.queries.getByIndex(e),s=r.matches;if(null!==s){const o=R2(n,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let f=Xi;f<u.length;f++){const m=u[f];m[Mu]===m[An]&&jS(m[ze],m,c,i)}if(null!==u[Ks]){const f=u[Ks];for(let m=0;m<f.length;m++){const y=f[m];jS(y[ze],y,c,i)}}}}}return i}function td(n){const t=Te(),e=zt(),i=Mb();Zg(i+1);const r=N2(e,i);if(n.dirty&&function Vg(n){return 4==(4&n[vt])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?jS(e,t,i,[]):R2(e,t,r,i);n.reset(s,l7),n.notifyOnChanges()}return!0}return!1}function US(n,t,e){const i=zt();i.firstCreatePass&&(function O2(n,t,e){null===n.queries&&(n.queries=new VS),n.queries.track(new BS(t,e))}(i,new k2(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),function P2(n,t,e){const i=new OS(4==(4&e));(function j7(n,t,e,i){const r=aF(t);r.push(e),n.firstCreatePass&&lF(n).push(i,r.length-1)})(n,t,i,i.destroy),null===t[po]&&(t[po]=new LS),t[po].queries.push(new FS(i))}(i,Te(),t)}function nd(){return function OQ(n,t){return n[po].queries[t].queryList}(Te(),Mb())}function N2(n,t){return n.queries.getByIndex(t)}function Co(n,t){return Zw(n,t)}const GS=new De("Application Initializer");let KS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=He(GS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const s=r();if(Hm(s))e.push(s);else if(jF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X2=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Rs=new De("LocaleId",{providedIn:"root",factory:()=>He(Rs,Nt.Optional|Nt.SkipSelf)||function nX(){return typeof $localize<"u"&&$localize.locale||Rf}()});let Xw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class sX{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let J2=(()=>{class n{compileModuleSync(e){return new AS(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=nl(Cr(e).declarations).reduce((o,a)=>{const l=Ft(a);return l&&o.push(new Lm(l)),o},[]);return new sX(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const iV=new De(""),e0=new De("");let JS,QS=(()=>{class n{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,JS||(function SX(n){JS=n}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(te(ot),te(XS),te(e0))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),XS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return JS?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),_c=null;const eA=new De("PlatformDestroyListeners"),tA=new De("appBootstrapListener");class oV{constructor(t,e){this.name=t,this.token=e}}function RX(n){try{const{rootComponent:t,appProviders:e,platformProviders:i}=n,r=function kX(n=[]){if(_c)return _c;const t=function lV(n=[],t){return Ui.create({name:t,providers:[{provide:CI,useValue:"platform"},{provide:eA,useValue:new Set([()=>_c=null])},...n]})}(n);return _c=t,function sV(){!function db(n){ub=n}(()=>{throw new B(600,!1)})}(),function aV(n){n.get(bN,null)?.forEach(e=>e())}(t),t}(i),s=[LX(),...e||[]],a=new a2({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(ot);return l.run(()=>{a.resolveInjectorInitializers();const c=a.get(tl,null);let u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:y=>{c.handleError(y)}})});const f=()=>a.destroy(),m=r.get(eA);return m.add(f),a.onDestroy(()=>{u.unsubscribe(),m.delete(f)}),function dV(n,t,e){try{const i=e();return Hm(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(c,l,()=>{const y=a.get(KS);return y.runInitializers(),y.donePromise.then(()=>{!function OL(n){Ds(n,"Expected localeId to be defined"),"string"==typeof n&&(PL=n.toLowerCase().replace(/_/g,"-"))}(a.get(Rs,Rf)||Rf);const w=a.get(yc);return void 0!==t&&w.bootstrap(t),w})})})}catch(t){return Promise.reject(t)}}let yc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=He(pV),this.zoneIsStable=He(FN),this.componentTypes=[],this.components=[],this.isStable=He(Xw).hasPendingTasks.pipe(at(e=>e?be(!1):this.zoneIsStable),Ii(),Xe()),this._injector=He(Ys)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof DN;if(!this._injector.get(KS).done)throw!r&&function Bo(n){const t=Ft(n)||xi(n)||Qi(n);return null!==t&&t.standalone}(e),new B(405,!1);let o;o=r?e:this._injector.get(Yu).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function xX(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ed),c=o.create(Ui.NULL,[],i||o.selector,a),u=c.location.nativeElement,f=c.injector.get(iV,null);return f?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),t0(this.components,c),f?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new B(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;t0(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(tA,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>t0(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new B(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function t0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const pV=new De("",{providedIn:"root",factory:()=>He(tl).handleError.bind(void 0)});function NX(){const n=He(ot),t=He(tl);return e=>n.runOutsideAngular(()=>t.handleError(e))}let FX=(()=>{class n{constructor(){this.zone=He(ot),this.applicationRef=He(yc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gV(n){return[{provide:ot,useFactory:n},{provide:Am,multi:!0,useFactory:()=>{const t=He(FX,{optional:!0});return()=>t.initialize()}},{provide:pV,useFactory:NX},{provide:FN,useFactory:LN}]}function LX(n){return bI([[],gV(()=>new ot(function uV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}(n)))])}let vc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=VX}return n})();function VX(n){return function BX(n,t,e){if(Zl(n)&&!e){const i=ki(n.index,t);return new Fm(i,i)}return 47&n.type?new Fm(t[qn],t):null}(Ri(),Te(),16==(16&n))}class bV{constructor(){}supports(t){return Lw(t)}create(t){return new WX(t)}}const $X=(n,t)=>t;class WX{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||$X}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const o=!i||e&&e.currentIndex<EV(i,r,s)?e:i,a=EV(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,v=y+m;u<=v&&v<c&&(s[m]=y+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Lw(t))throw new B(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),i=!0),e=e._next}else r=0,function RK(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new qX(e,i),s,r),t}_verifyReinsertion(t,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new wV),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wV),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qX{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class GX{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class wV{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new GX,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EV(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}class CV{constructor(){}supports(t){return t instanceof Map||rS(t)}create(){return new KX}}class KX{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||rS(t)))throw new B(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new ZX(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class ZX{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DV(){return new s0([new bV])}let s0=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:DV});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||DV()),deps:[[n,new nf,new hc]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new B(901,!1)}}return n})();function TV(){return new e_([new CV])}let e_=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:TV});constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||TV()),deps:[[n,new nf,new hc]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new B(901,!1)}}return n})(),XX=(()=>{class n{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||n)(te(yc))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({})}return n})();function Nf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let lA=null;function bc(){return lA}class hJ{}const Lt=new De("DocumentToken");let cA=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(pJ)},providedIn:"platform"})}return n})();const fJ=new De("Location Initialized");let pJ=(()=>{class n extends cA{constructor(){super(),this._doc=He(Lt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bc().getBaseHref(this._doc)}onPopState(e){const i=bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function uA(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function NV(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function rl(n){return n&&"?"!==n[0]?"?"+n:n}let rd=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(LV)},providedIn:"root"})}return n})();const FV=new De("appBaseHref");let LV=(()=>{class n extends rd{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??He(Lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return uA(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+rl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const o=this.prepareExternalUrl(r+rl(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){const o=this.prepareExternalUrl(r+rl(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(te(cA),te(FV,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gJ=(()=>{class n extends rd{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=uA(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+rl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+rl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(te(cA),te(FV,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),t_=(()=>{class n{constructor(e){this._subject=new $e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function yJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(NV(VV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+rl(i))}normalize(e){return n.stripTrailingSlash(function _J(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,VV(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+rl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+rl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=rl;static#t=this.joinWithSlash=uA;static#n=this.stripTrailingSlash=NV;static#i=this.\u0275fac=function(i){return new(i||n)(te(rd))};static#r=this.\u0275prov=ke({token:n,factory:function(){return function mJ(){return new t_(te(rd))}()},providedIn:"root"})}return n})();function VV(n){return n.replace(/\/index.html$/,"")}var Ff=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(Ff||{}),fs=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(fs||{}),Nn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Nn||{}),Xs=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Xs||{}),Pi=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Pi||{});function l0(n,t){return To(us(n)[Bn.DateFormat],t)}function c0(n,t){return To(us(n)[Bn.TimeFormat],t)}function u0(n,t){return To(us(n)[Bn.DateTimeFormat],t)}function Do(n,t){const e=us(n),i=e[Bn.NumberSymbols][t];if(typeof i>"u"){if(t===Pi.CurrencyDecimal)return e[Bn.NumberSymbols][Pi.Decimal];if(t===Pi.CurrencyGroup)return e[Bn.NumberSymbols][Pi.Group]}return i}const IJ=function kL(n){return us(n)[Bn.PluralCase]};function jV(n){if(!n[Bn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Bn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function To(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function hA(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const RJ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,n_={},PJ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var sl=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(sl||{}),pn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(pn||{}),gn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(gn||{});function nr(n,t,e,i){let r=function HJ(n){if(zV(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return d0(r,s-1,o)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(RJ))return function zJ(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,o,a,l,c),t}(i)}const t=new Date(n);if(!zV(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=ol(e,t)||t;let a,o=[];for(;t;){if(a=PJ.exec(t),!a){o.push(t);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;t=u}}let l=r.getTimezoneOffset();i&&(l=HV(i,l),r=function UJ(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function jJ(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(HV(t,r)-r))}(r,i,!0));let c="";return o.forEach(u=>{const f=function BJ(n){if(pA[n])return pA[n];let t;switch(n){case"G":case"GG":case"GGG":t=jn(gn.Eras,Nn.Abbreviated);break;case"GGGG":t=jn(gn.Eras,Nn.Wide);break;case"GGGGG":t=jn(gn.Eras,Nn.Narrow);break;case"y":t=Hi(pn.FullYear,1,0,!1,!0);break;case"yy":t=Hi(pn.FullYear,2,0,!0,!0);break;case"yyy":t=Hi(pn.FullYear,3,0,!1,!0);break;case"yyyy":t=Hi(pn.FullYear,4,0,!1,!0);break;case"Y":t=g0(1);break;case"YY":t=g0(2,!0);break;case"YYY":t=g0(3);break;case"YYYY":t=g0(4);break;case"M":case"L":t=Hi(pn.Month,1,1);break;case"MM":case"LL":t=Hi(pn.Month,2,1);break;case"MMM":t=jn(gn.Months,Nn.Abbreviated);break;case"MMMM":t=jn(gn.Months,Nn.Wide);break;case"MMMMM":t=jn(gn.Months,Nn.Narrow);break;case"LLL":t=jn(gn.Months,Nn.Abbreviated,fs.Standalone);break;case"LLLL":t=jn(gn.Months,Nn.Wide,fs.Standalone);break;case"LLLLL":t=jn(gn.Months,Nn.Narrow,fs.Standalone);break;case"w":t=fA(1);break;case"ww":t=fA(2);break;case"W":t=fA(1,!0);break;case"d":t=Hi(pn.Date,1);break;case"dd":t=Hi(pn.Date,2);break;case"c":case"cc":t=Hi(pn.Day,1);break;case"ccc":t=jn(gn.Days,Nn.Abbreviated,fs.Standalone);break;case"cccc":t=jn(gn.Days,Nn.Wide,fs.Standalone);break;case"ccccc":t=jn(gn.Days,Nn.Narrow,fs.Standalone);break;case"cccccc":t=jn(gn.Days,Nn.Short,fs.Standalone);break;case"E":case"EE":case"EEE":t=jn(gn.Days,Nn.Abbreviated);break;case"EEEE":t=jn(gn.Days,Nn.Wide);break;case"EEEEE":t=jn(gn.Days,Nn.Narrow);break;case"EEEEEE":t=jn(gn.Days,Nn.Short);break;case"a":case"aa":case"aaa":t=jn(gn.DayPeriods,Nn.Abbreviated);break;case"aaaa":t=jn(gn.DayPeriods,Nn.Wide);break;case"aaaaa":t=jn(gn.DayPeriods,Nn.Narrow);break;case"b":case"bb":case"bbb":t=jn(gn.DayPeriods,Nn.Abbreviated,fs.Standalone,!0);break;case"bbbb":t=jn(gn.DayPeriods,Nn.Wide,fs.Standalone,!0);break;case"bbbbb":t=jn(gn.DayPeriods,Nn.Narrow,fs.Standalone,!0);break;case"B":case"BB":case"BBB":t=jn(gn.DayPeriods,Nn.Abbreviated,fs.Format,!0);break;case"BBBB":t=jn(gn.DayPeriods,Nn.Wide,fs.Format,!0);break;case"BBBBB":t=jn(gn.DayPeriods,Nn.Narrow,fs.Format,!0);break;case"h":t=Hi(pn.Hours,1,-12);break;case"hh":t=Hi(pn.Hours,2,-12);break;case"H":t=Hi(pn.Hours,1);break;case"HH":t=Hi(pn.Hours,2);break;case"m":t=Hi(pn.Minutes,1);break;case"mm":t=Hi(pn.Minutes,2);break;case"s":t=Hi(pn.Seconds,1);break;case"ss":t=Hi(pn.Seconds,2);break;case"S":t=Hi(pn.FractionalSeconds,1);break;case"SS":t=Hi(pn.FractionalSeconds,2);break;case"SSS":t=Hi(pn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=f0(sl.Short);break;case"ZZZZZ":t=f0(sl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=f0(sl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=f0(sl.Long);break;default:return null}return pA[n]=t,t}(u);c+=f?f(r,e,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function d0(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function ol(n,t){const e=function bJ(n){return us(n)[Bn.LocaleId]}(n);if(n_[e]=n_[e]||{},n_[e][t])return n_[e][t];let i="";switch(t){case"shortDate":i=l0(n,Xs.Short);break;case"mediumDate":i=l0(n,Xs.Medium);break;case"longDate":i=l0(n,Xs.Long);break;case"fullDate":i=l0(n,Xs.Full);break;case"shortTime":i=c0(n,Xs.Short);break;case"mediumTime":i=c0(n,Xs.Medium);break;case"longTime":i=c0(n,Xs.Long);break;case"fullTime":i=c0(n,Xs.Full);break;case"short":const r=ol(n,"shortTime"),s=ol(n,"shortDate");i=h0(u0(n,Xs.Short),[r,s]);break;case"medium":const o=ol(n,"mediumTime"),a=ol(n,"mediumDate");i=h0(u0(n,Xs.Medium),[o,a]);break;case"long":const l=ol(n,"longTime"),c=ol(n,"longDate");i=h0(u0(n,Xs.Long),[l,c]);break;case"full":const u=ol(n,"fullTime"),f=ol(n,"fullDate");i=h0(u0(n,Xs.Full),[u,f])}return i&&(n_[e][t]=i),i}function h0(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Go(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function Hi(n,t,e=0,i=!1,r=!1){return function(s,o){let a=function NJ(n,t){switch(n){case pn.FullYear:return t.getFullYear();case pn.Month:return t.getMonth();case pn.Date:return t.getDate();case pn.Hours:return t.getHours();case pn.Minutes:return t.getMinutes();case pn.Seconds:return t.getSeconds();case pn.FractionalSeconds:return t.getMilliseconds();case pn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||a>-e)&&(a+=e),n===pn.Hours)0===a&&-12===e&&(a=12);else if(n===pn.FractionalSeconds)return function OJ(n,t){return Go(n,3).substring(0,t)}(a,t);const l=Do(o,Pi.MinusSign);return Go(a,t,l,i,r)}}function jn(n,t,e=fs.Format,i=!1){return function(r,s){return function FJ(n,t,e,i,r,s){switch(e){case gn.Months:return function CJ(n,t,e){const i=us(n),s=To([i[Bn.MonthsFormat],i[Bn.MonthsStandalone]],t);return To(s,e)}(t,r,i)[n.getMonth()];case gn.Days:return function EJ(n,t,e){const i=us(n),s=To([i[Bn.DaysFormat],i[Bn.DaysStandalone]],t);return To(s,e)}(t,r,i)[n.getDay()];case gn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function SJ(n){const t=us(n);return jV(t),(t[Bn.ExtraData][2]||[]).map(i=>"string"==typeof i?hA(i):[hA(i[0]),hA(i[1])])}(t),u=function AJ(n,t,e){const i=us(n);jV(i);const s=To([i[Bn.ExtraData][0],i[Bn.ExtraData][1]],t)||[];return To(s,e)||[]}(t,r,i),f=c.findIndex(m=>{if(Array.isArray(m)){const[y,v]=m,w=o>=y.hours&&a>=y.minutes,E=o<v.hours||o===v.hours&&a<v.minutes;if(y.hours<v.hours){if(w&&E)return!0}else if(w||E)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(-1!==f)return u[f]}return function wJ(n,t,e){const i=us(n),s=To([i[Bn.DayPeriodsFormat],i[Bn.DayPeriodsStandalone]],t);return To(s,e)}(t,r,i)[o<12?0:1];case gn.Eras:return function DJ(n,t){return To(us(n)[Bn.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function f0(n){return function(t,e,i){const r=-1*i,s=Do(e,Pi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case sl.Short:return(r>=0?"+":"")+Go(o,2,s)+Go(Math.abs(r%60),2,s);case sl.ShortGMT:return"GMT"+(r>=0?"+":"")+Go(o,1,s);case sl.Long:return"GMT"+(r>=0?"+":"")+Go(o,2,s)+":"+Go(Math.abs(r%60),2,s);case sl.Extended:return 0===i?"Z":(r>=0?"+":"")+Go(o,2,s)+":"+Go(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const LJ=0,p0=4;function UV(n){return d0(n.getFullYear(),n.getMonth(),n.getDate()+(p0-n.getDay()))}function fA(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=UV(e),o=function VJ(n){const t=d0(n,LJ,1).getDay();return d0(n,0,1+(t<=p0?p0:p0+7)-t)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Go(r,n,Do(i,Pi.MinusSign))}}function g0(n,t=!1){return function(e,i){return Go(UV(e).getFullYear(),n,Do(i,Pi.MinusSign),t)}}const pA={};function HV(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function zV(n){return n instanceof Date&&!isNaN(n.valueOf())}let vA=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(i){let r=null;return i?r=new i:(s=te(Rs),r=new eee(s)),r;var s},providedIn:"root"})}return n})();let eee=(()=>{class n extends vA{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(IJ(i||this.locale)(e)){case Ff.Zero:return"zero";case Ff.One:return"one";case Ff.Two:return"two";case Ff.Few:return"few";case Ff.Many:return"many";default:return"other"}}static#e=this.\u0275fac=function(i){return new(i||n)(te(Rs))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function GV(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}const bA=/\s+/,KV=[];let ps=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=KV,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(bA):KV}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(bA):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(bA).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(K(s0),K(e_),K(hn),K(zr))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class nee{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sr=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new nee(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),YV(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{YV(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(K(ds),K(Eo),K(s0))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function YV(n,t){n.context.$implicit=t.item}let Js=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new iee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){QV("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){QV("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(K(ds),K(Eo))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class iee{constructor(){this.$implicit=null,this.ngIf=null}}function QV(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${yn(t)}'.`)}let al=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:fc.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(K(hn),K(e_),K(zr))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),Io=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(K(ds))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Vi]})}return n})();function Ko(n,t){return new B(2100,!1)}class aee{createSubscription(t,e){return Lu(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){Lu(()=>t.unsubscribe())}}class lee{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const cee=new lee,uee=new aee;let JV=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Hm(e))return cee;if(jF(e))return uee;throw Ko()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(K(vc,16))};static#t=this.\u0275pipe=Ai({name:"async",type:n,pure:!1,standalone:!0})}return n})();const mee=new De("DATE_PIPE_DEFAULT_TIMEZONE"),_ee=new De("DATE_PIPE_DEFAULT_OPTIONS");let _0=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(null==e||""===e||e!=e)return null;try{return nr(e,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Ko()}}static#e=this.\u0275fac=function(i){return new(i||n)(K(Rs,16),K(mee,24),K(_ee,24))};static#t=this.\u0275pipe=Ai({name:"date",type:n,pure:!0,standalone:!0})}return n})();const yee=/#/g;let CA=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(null==e)return"";if("object"!=typeof i||null===i)throw Ko();return i[function qV(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(e,Object.keys(i),this._localization,r)].replace(yee,e.toString())}static#e=this.\u0275fac=function(i){return new(i||n)(K(vA,16))};static#t=this.\u0275pipe=Ai({name:"i18nPlural",type:n,pure:!0,standalone:!0})}return n})(),tB=(()=>{class n{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw Ko();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=Ai({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),ir=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({})}return n})();const nB="browser";function iB(n){return n===nB}function y0(n){return"server"===n}let xee=(()=>{class n{static#e=this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new Mee(te(Lt),window)})}return n})();class Mee{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function kee(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class rB{}class ete extends hJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class AA extends ete{static makeCurrent(){!function dJ(n){lA||(lA=n)}(new AA)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function tte(){return s_=s_||document.querySelector("base"),s_?s_.getAttribute("href"):null}();return null==e?null:function nte(n){w0=w0||document.createElement("a"),w0.setAttribute("href",n);const t=w0.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){s_=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return GV(document.cookie,t)}}let w0,s_=null,rte=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const xA=new De("EventManagerPlugins");let cB=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(te(xA),te(ot))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class uB{constructor(t){this._doc=t}}const MA="ng-app-id";let dB=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=y0(s),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${MA}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(MA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(MA,this.appId),o}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt),te(Dw),te(SI,8),te(vo))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const kA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},RA=/%COMP%/g,lte=new De("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function fB(n,t){return t.map(e=>e.replace(RA,n))}let PA=(()=>{class n{constructor(e,i,r,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=y0(a),this.defaultRenderer=new OA(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Fr.ShadowDom&&(i={...i,encapsulation:Fr.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof gB?r.applyToHost(e):r instanceof NA&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Fr.Emulated:s=new gB(l,c,i,this.appId,u,o,a,f);break;case Fr.ShadowDom:return new hte(l,c,e,i,o,a,this.nonce,f);default:s=new NA(l,c,i,u,o,a,f)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(te(cB),te(dB),te(Dw),te(lte),te(Lt),te(vo),te(ot),te(SI))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class OA{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(kA[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(pB(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(pB(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new B(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=kA[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=kA[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(fc.DashCase|fc.Important)?t.style.setProperty(e,i,r&fc.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&fc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=bc().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function pB(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hte extends OA{constructor(t,e,i,r,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=fB(r.id,r.styles);for(const u of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class NA extends OA{constructor(t,e,i,r,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?fB(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class gB extends NA{constructor(t,e,i,r,s,o,a,l){const c=r+"-"+i.id;super(t,e,i,s,o,a,l,c),this.contentAttr=function cte(n){return"_ngcontent-%COMP%".replace(RA,n)}(c),this.hostAttr=function ute(n){return"_nghost-%COMP%".replace(RA,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let fte=(()=>{class n extends uB{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const mB=["alt","control","meta","shift"],pte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let mte=(()=>{class n extends uB{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bc().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),mB.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let r=pte[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),mB.forEach(o=>{o!==r&&(0,gte[o])(e)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function _B(n){return{appProviders:[...vB,...n?.providers??[]],platformProviders:wte}}const wte=[{provide:vo,useValue:nB},{provide:bN,useValue:function yte(){AA.makeCurrent()},multi:!0},{provide:Lt,useFactory:function bte(){return function yG(n){fI=n}(document),document},deps:[]}],Ete=new De(""),yB=[{provide:e0,useClass:class ite{addToWindow(t){Sn.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new B(5103,!1);return s},Sn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Sn.getAllAngularRootElements=()=>t.getAllRootElements(),Sn.frameworkStabilizers||(Sn.frameworkStabilizers=[]),Sn.frameworkStabilizers.push(i=>{const r=Sn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?bc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:iV,useClass:QS,deps:[ot,XS,e0]},{provide:QS,useClass:QS,deps:[ot,XS,e0]}],vB=[{provide:CI,useValue:"root"},{provide:tl,useFactory:function vte(){return new tl},deps:[]},{provide:xA,useClass:fte,multi:!0,deps:[Lt,ot,vo]},{provide:xA,useClass:mte,multi:!0,deps:[Lt]},PA,dB,cB,{provide:Rm,useExisting:PA},{provide:rB,useClass:rte,deps:[]},[]];let Cte=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Dw,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(te(Ete,12))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:[...vB,...yB],imports:[ir,XX]})}return n})(),bB=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:function(i){let r=null;return r=i?new i:function Tte(){return new bB(te(Lt))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:kte}=Array,{getPrototypeOf:Rte,prototype:Pte,keys:Ote}=Object;function DB(n){if(1===n.length){const t=n[0];if(kte(t))return{args:t,keys:null};if(function Nte(n){return n&&"object"==typeof n&&Rte(n)===Pte}(t)){const e=Ote(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:Fte}=Array;function LA(n){return Fe(t=>function Lte(n,t){return Fte(t)?n(...t):n(t)}(n,t))}function TB(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function sd(...n){const t=Ti(n),e=Ua(n),{args:i,keys:r}=DB(n);if(0===i.length)return X([],t);const s=new ft(function Vte(n,t,e=Pn){return i=>{IB(t,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)IB(t,()=>{const c=X(n[l],t);let u=!1;c.subscribe(Pe(i,f=>{s[l]=f,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,r?o=>TB(r,o):Pn));return e?s.pipe(LA(e)):s}function IB(n,t,e){n?Ci(e,n,t):t()}const E0=dt(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function C0(...n){return function Bte(){return Es(1)}()(X(n,Ti(n)))}function D0(n){return new ft(t=>{ii(n()).subscribe(t)})}function o_(n,t){const e=L(n)?n:()=>n,i=r=>r.error(e());return new ft(t?r=>t.schedule(i,0,r):i)}function VA(){return pe((n,t)=>{let e=null;n._refCount++;const i=Pe(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class SB extends ft{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Oe(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ct;const e=this.getSubject();t.add(this.source.subscribe(Pe(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ct.EMPTY)}return t}refCount(){return VA()(this)}}function zi(n){return n<=0?()=>Di:pe((t,e)=>{let i=0;t.subscribe(Pe(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function So(...n){const t=Ti(n);return pe((e,i)=>{(t?C0(n,e,t):C0(n,e)).subscribe(i)})}function vn(n,t){return pe((e,i)=>{let r=0;e.subscribe(Pe(i,s=>n.call(t,s,r++)&&i.next(s)))})}function T0(n){return pe((t,e)=>{let i=!1;t.subscribe(Pe(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function AB(n=jte){return pe((t,e)=>{let i=!1;t.subscribe(Pe(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function jte(){return new E0}function Ec(n,t){const e=arguments.length>=2;return i=>i.pipe(n?vn((r,s)=>n(r,s,i)):Pn,zi(1),e?T0(t):AB(()=>new E0))}function Lf(n,t){return L(t)?Tn(n,t,1):Tn(n,1)}function rr(n,t,e){const i=L(n)||t||e?{next:n,error:t,complete:e}:n;return i?pe((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Pe(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Pn}function od(n){return pe((t,e)=>{let s,i=null,r=!1;i=t.subscribe(Pe(e,void 0,void 0,o=>{s=ii(n(o,od(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function xB(n,t,e,i,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Pe(o,u=>{const f=c++;l=a?n(l,u,f):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function I0(n,t){return pe(xB(n,t,arguments.length>=2,!0))}function S0(n){return n<=0?()=>Di:pe((t,e)=>{let i=[];t.subscribe(Pe(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function a_(n){return pe((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function qr(n){return pe((t,e)=>{ii(n).subscribe(Pe(e,()=>e.complete(),Je)),!e.closed&&t.subscribe(e)})}const It="primary",l_=Symbol("RouteTitle");class zte{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Vf(n){return new zte(n)}function $te(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ba(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!MB(n[r],t[r]))return!1;return!0}function MB(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function kB(n){return n.length>0?n[n.length-1]:null}function Cc(n){return function Mte(n){return!!n&&(n instanceof ft||L(n.lift)&&L(n.subscribe))}(n)?n:Hm(n)?X(Promise.resolve(n)):be(n)}const qte={exact:function OB(n,t,e){if(!ad(n.segments,t.segments)||!A0(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!OB(n.children[i],t.children[i],e))return!1;return!0},subset:NB},RB={exact:function Gte(n,t){return ba(n,t)},subset:function Kte(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>MB(n[e],t[e]))},ignored:()=>!0};function PB(n,t,e){return qte[e.paths](n.root,t.root,e.matrixParams)&&RB[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function NB(n,t,e){return FB(n,t,t.segments,e)}function FB(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!ad(r,e)||t.hasChildren()||!A0(r,e,i))}if(n.segments.length===e.length){if(!ad(n.segments,e)||!A0(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!NB(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(ad(n.segments,r)&&A0(n.segments,r,i)&&n.children[It])&&FB(n.children[It],t,s,i)}}function A0(n,t,e){return t.every((i,r)=>RB[e](n[r].parameters,i.parameters))}class Bf{constructor(t=new bn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vf(this.queryParams)),this._queryParamMap}toString(){return Qte.serialize(this)}}class bn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return x0(this)}}class c_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Vf(this.parameters)),this._parameterMap}toString(){return BB(this)}}function ad(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let u_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return new BA},providedIn:"root"})}return n})();class BA{parse(t){const e=new lne(t);return new Bf(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${d_(t.root,!0)}`,i=function ene(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${M0(e)}=${M0(r)}`).join("&"):`${M0(e)}=${M0(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Xte(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Qte=new BA;function x0(n){return n.segments.map(t=>BB(t)).join("/")}function d_(n,t){if(!n.hasChildren())return x0(n);if(t){const e=n.children[It]?d_(n.children[It],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==It&&i.push(`${r}:${d_(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Yte(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===It&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==It&&(e=e.concat(t(r,i)))}),e}(n,(i,r)=>r===It?[d_(n.children[It],!1)]:[`${r}:${d_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[It]?`${x0(n)}/${e[0]}`:`${x0(n)}/(${e.join("//")})`}}function LB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function M0(n){return LB(n).replace(/%3B/gi,";")}function jA(n){return LB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k0(n){return decodeURIComponent(n)}function VB(n){return k0(n.replace(/\+/g,"%20"))}function BB(n){return`${jA(n.path)}${function Jte(n){return Object.keys(n).map(t=>`;${jA(t)}=${jA(n[t])}`).join("")}(n.parameters)}`}const tne=/^[^\/()?;#]+/;function UA(n){const t=n.match(tne);return t?t[0]:""}const nne=/^[^\/()?;=#]+/,rne=/^[^=?&#]+/,one=/^[^&#]+/;class lne{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[It]=new bn(t,e)),i}parseSegment(){const t=UA(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(t),new c_(k0(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function ine(n){const t=n.match(nne);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=UA(this.remaining);r&&(i=r,this.capture(i))}t[k0(e)]=k0(i)}parseQueryParam(t){const e=function sne(n){const t=n.match(rne);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function ane(n){const t=n.match(one);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=VB(e),s=VB(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=UA(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new B(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=It);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[It]:new bn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new B(4011,!1)}}function jB(n){return n.segments.length>0?new bn([],{[It]:n}):n}function UB(n){const t={};for(const i of Object.keys(n.children)){const s=UB(n.children[i]);if(i===It&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function cne(n){if(1===n.numberOfChildren&&n.children[It]){const t=n.children[It];return new bn(n.segments.concat(t.segments),t.children)}return n}(new bn(n.segments,t))}function ld(n){return n instanceof Bf}function HB(n){let t;const r=jB(function e(s){const o={};for(const l of s.children){const c=e(l);o[l.outlet]=c}const a=new bn(s.url,o);return s===n&&(t=a),a}(n.root));return t??r}function zB(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(0===t.length)return HA(r,r,r,e,i);const s=function dne(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new WB(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new WB(e,t,i)}(t);if(s.toRoot())return HA(r,r,new bn([],{}),e,i);const o=function hne(n,t,e){if(n.isAbsolute)return new P0(t,!0,0);if(!e)return new P0(t,!1,NaN);if(null===e.parent)return new P0(e,!0,0);const i=R0(n.commands[0])?0:1;return function fne(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new B(4005,!1);r=i.segments.length}return new P0(i,!1,r-s)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?f_(o.segmentGroup,o.index,s.commands):qB(o.segmentGroup,o.index,s.commands);return HA(r,o.segmentGroup,a,e,i)}function R0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function h_(n){return"object"==typeof n&&null!=n&&n.outlets}function HA(n,t,e,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===t?e:$B(n,t,e);const a=jB(UB(o));return new Bf(a,s,r)}function $B(n,t,e){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===t?e:$B(s,t,e)}),new bn(n.segments,i)}class WB{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&R0(i[0]))throw new B(4003,!1);const r=i.find(h_);if(r&&r!==kB(i))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class P0{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function qB(n,t,e){if(n||(n=new bn([],{})),0===n.segments.length&&n.hasChildren())return f_(n,t,e);const i=function gne(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const o=n.segments[r],a=e[i];if(h_(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!KB(l,c,o))return s;i+=2}else{if(!KB(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new bn(n.segments.slice(0,i.pathIndex),{});return s.children[It]=new bn(n.segments.slice(i.pathIndex),n.children),f_(s,0,r)}return i.match&&0===r.length?new bn(n.segments,{}):i.match&&!n.hasChildren()?zA(n,t,e):i.match?f_(n,0,r):zA(n,t,e)}function f_(n,t,e){if(0===e.length)return new bn(n.segments,{});{const i=function pne(n){return h_(n[0])?n[0].outlets:{[It]:n}}(e),r={};if(Object.keys(i).some(s=>s!==It)&&n.children[It]&&1===n.numberOfChildren&&0===n.children[It].segments.length){const s=f_(n.children[It],t,e);return new bn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=qB(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new bn(n.segments,r)}}function zA(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(h_(s)){const l=mne(s.outlets);return new bn(i,l)}if(0===r&&R0(e[0])){i.push(new c_(n.segments[t].path,GB(e[0]))),r++;continue}const o=h_(s)?s.outlets[It]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&R0(a)?(i.push(new c_(o,GB(a))),r+=2):(i.push(new c_(o,{})),r++)}return new bn(i,{})}function mne(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=zA(new bn([],{}),0,i))}),t}function GB(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function KB(n,t,e){return n==e.path&&ba(t,e.parameters)}const p_="imperative";class wa{constructor(t,e){this.id=t,this.url=e}}class O0 extends wa{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ll extends wa{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class g_ extends wa{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jf extends wa{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class N0 extends wa{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZB extends wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _ne extends wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yne extends wa{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vne extends wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bne extends wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wne{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ene{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cne{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dne{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tne{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ine{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YB{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $A{}class WA{constructor(t){this.url=t}}class Sne{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new m_,this.attachRef=null}}let m_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Sne,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class QB{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=qA(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=qA(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=GA(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return GA(t,this._root).map(e=>e.value)}}function qA(n,t){if(n===t.value)return t;for(const e of t.children){const i=qA(n,e);if(i)return i}return null}function GA(n,t){if(n===t.value)return[t];for(const e of t.children){const i=GA(n,e);if(i.length)return i.unshift(t),i}return[]}class cl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Uf(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class XB extends QB{constructor(t,e){super(t),this.snapshot=e,KA(this,t)}toString(){return this.snapshot.toString()}}function JB(n,t){const e=function Ane(n,t){const o=new F0([],{},{},"",{},It,t,null,{});return new t3("",new cl(o,[]))}(0,t),i=new se([new c_("",{})]),r=new se({}),s=new se({}),o=new se({}),a=new se(""),l=new Hf(i,r,o,a,s,It,t,e.root);return l.snapshot=e.root,new XB(new cl(l,[]),e)}class Hf{constructor(t,e,i,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Fe(c=>c[l_]))??be(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Fe(t=>Vf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Fe(t=>Vf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function e3(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function xne(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class F0{get title(){return this.data?.[l_]}constructor(t,e,i,r,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class t3 extends QB{constructor(t,e){super(e),this.url=t,KA(this,e)}toString(){return n3(this._root)}}function KA(n,t){t.value._routerState=n,t.children.forEach(e=>KA(n,e))}function n3(n){const t=n.children.length>0?` { ${n.children.map(n3).join(", ")} } `:"";return`${n.value}${t}`}function ZA(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ba(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),ba(t.params,e.params)||n.paramsSubject.next(e.params),function Wte(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ba(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),ba(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function YA(n,t){const e=ba(n.params,t.params)&&function Zte(n,t){return ad(n,t)&&n.every((e,i)=>ba(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||YA(n.parent,t.parent))}let QA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=It,this.activateEvents=new $e,this.deactivateEvents=new $e,this.attachEvents=new $e,this.detachEvents=new $e,this.parentContexts=He(m_),this.location=He(ds),this.changeDetector=He(vc),this.environmentInjector=He(Ys),this.inputBinder=He(L0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Mne(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=et({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vi]})}return n})();class Mne{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Hf?this.route:t===m_?this.childContexts:this.parent.get(t,e)}}const L0=new De("");let r3=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=sd([i.queryParams,i.params,i.data]).pipe(at(([s,o,a],l)=>(a={...s,...o,...a},0===l?be(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const o=function uJ(n){const t=Ft(n);if(!t)return null;const e=new Lm(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function __(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Rne(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return __(n,i,r);return __(n,i)})}(n,t,e);return new cl(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>__(n,a)),o}}const i=function Pne(n){return new Hf(new se(n.url),new se(n.params),new se(n.queryParams),new se(n.fragment),new se(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>__(n,s));return new cl(i,r)}}const XA="ngNavigationCancelingError";function s3(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=ld(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=o3(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function o3(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[XA]=!0,i.cancellationCode=t,e&&(i.url=e),i}function a3(n){return n&&n[XA]}let l3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ht({type:n,selectors:[["ng-component"]],standalone:!0,features:[Wr],decls:1,vars:0,template:function(i,r){1&i&&On(0,"router-outlet")},dependencies:[QA],encapsulation:2})}return n})();function JA(n){const t=n.children&&n.children.map(JA),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==It&&(e.component=l3),e}function Zo(n){return n.outlet||It}function y_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Une{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),ZA(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Uf(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Uf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Uf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const r=Uf(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ine(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Dne(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(ZA(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ZA(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=y_(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class c3{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class V0{constructor(t,e){this.component=t,this.route=e}}function Hne(n,t,e){const i=n._root;return v_(i,t?t._root:null,e,[i.value])}function zf(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||function nT(n){return null!==Hl(n)}(n)?t.get(n):n:i}function v_(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Uf(t);return n.children.forEach(o=>{(function $ne(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Wne(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!ad(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ad(n.url,t.url)||!ba(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!YA(n,t)||!ba(n.queryParams,t.queryParams);default:return!YA(n,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new c3(i)):(s.data=o.data,s._resolvedData=o._resolvedData),v_(n,t,s.component?a?a.children:null:e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new V0(a.outlet.component,o))}else o&&b_(t,a,r),r.canActivateChecks.push(new c3(i)),v_(n,null,s.component?a?a.children:null:e,i,r)})(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>b_(a,e.getContext(o),r)),r}function b_(n,t,e){const i=Uf(n),r=n.value;Object.entries(i).forEach(([s,o])=>{b_(o,r.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new V0(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function w_(n){return"function"==typeof n}function u3(n){return n instanceof E0||"EmptyError"===n?.name}const B0=Symbol("INITIAL_VALUE");function $f(){return at(n=>sd(n.map(t=>t.pipe(zi(1),So(B0)))).pipe(Fe(t=>{for(const e of t)if(!0!==e){if(e===B0)return B0;if(!1===e||e instanceof Bf)return e}return!0}),vn(t=>t!==B0),zi(1)))}function d3(n){return function ss(...n){return bs(n)}(rr(t=>{if(ld(t))throw s3(0,t)}),Fe(t=>!0===t))}class j0{constructor(t){this.segmentGroup=t||null}}class h3{constructor(t){this.urlTree=t}}function Wf(n){return o_(new j0(n))}function f3(n){return o_(new h3(n))}class die{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new B(4002,!1)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return be(i);if(r.numberOfChildren>1||!r.children[It])return o_(new B(4e3,!1));r=r.children[It]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Bf(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,r)}),new bn(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new B(4001,!1);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}const ex={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hie(n,t,e,i,r){const s=tx(n,t,e);return s.matched?(i=function Nne(n,t){return n.providers&&!n._injector&&(n._injector=xS(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function lie(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?be(r.map(o=>{const a=zf(o,n);return Cc(function Qne(n){return n&&w_(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe($f(),d3()):be(!0)}(i,t,e).pipe(Fe(o=>!0===o?s:{...ex}))):be(s)}function tx(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...ex}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||$te)(e,n,t);if(!r)return{...ex};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function p3(n,t,e,i){return e.length>0&&function gie(n,t,e){return e.some(i=>U0(n,t,i)&&Zo(i)!==It)}(n,e,i)?{segmentGroup:new bn(t,pie(i,new bn(e,n.children))),slicedSegments:[]}:0===e.length&&function mie(n,t,e){return e.some(i=>U0(n,t,i))}(n,e,i)?{segmentGroup:new bn(n.segments,fie(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new bn(n.segments,n.children),slicedSegments:e}}function fie(n,t,e,i,r){const s={};for(const o of i)if(U0(n,e,o)&&!r[Zo(o)]){const a=new bn([],{});s[Zo(o)]=a}return{...r,...s}}function pie(n,t){const e={};e[It]=t;for(const i of n)if(""===i.path&&Zo(i)!==It){const r=new bn([],{});e[Zo(i)]=r}return e}function U0(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class bie{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new die(this.urlSerializer,this.urlTree)}noMatchError(t){return new B(4002,!1)}recognize(){const t=p3(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,It).pipe(od(e=>{if(e instanceof h3)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof j0?this.noMatchError(e):e}),Fe(e=>{const i=new F0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},It,this.rootComponentType,null,{}),r=new cl(i,e),s=new t3("",r),o=function une(n,t,e=null,i=null){return zB(HB(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,It).pipe(od(i=>{throw i instanceof j0?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=e3(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0)}processChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return X(r).pipe(Lf(s=>{const o=i.children[s],a=function Bne(n,t){const e=n.filter(i=>Zo(i)===t);return e.push(...n.filter(i=>Zo(i)!==t)),e}(e,s);return this.processSegmentGroup(t,a,o,s)}),I0((s,o)=>(s.push(...o),s)),T0(null),function Ute(n,t){const e=arguments.length>=2;return i=>i.pipe(n?vn((r,s)=>n(r,s,i)):Pn,S0(1),e?T0(t):AB(()=>new E0))}(),Tn(s=>{if(null===s)return Wf(i);const o=g3(s);return function wie(n){n.sort((t,e)=>t.value.outlet===It?-1:e.value.outlet===It?1:t.value.outlet.localeCompare(e.value.outlet))}(o),be(o)}))}processSegment(t,e,i,r,s,o){return X(e).pipe(Lf(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,s,o).pipe(od(l=>{if(l instanceof j0)return be(null);throw l}))),Ec(a=>!!a),od(a=>{if(u3(a))return function yie(n,t,e){return 0===t.length&&!n.children[e]}(i,r,s)?be([]):Wf(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,s,o,a){return function _ie(n,t,e,i){return!!(Zo(n)===i||i!==It&&U0(t,e,n))&&("**"===n.path||tx(t,n,e).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o):Wf(r):Wf(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?f3(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Tn(o=>{const a=new bn(o,{});return this.processSegment(t,e,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=tx(e,r,s);if(!a)return Wf(e);const f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?f3(f):this.applyRedirects.lineralizeSegments(r,f).pipe(Tn(m=>this.processSegment(t,i,e,m.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?kB(r).parameters:{};a=be({snapshot:new F0(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,m3(i),Zo(i),i.component??i._loadedComponent??null,i,_3(i)),consumedSegments:[],remainingSegments:[]}),e.children={}}else a=hie(e,i,r,t).pipe(Fe(({matched:l,consumedSegments:c,remainingSegments:u,parameters:f})=>l?{snapshot:new F0(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,m3(i),Zo(i),i.component??i._loadedComponent??null,i,_3(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(at(l=>null===l?Wf(e):this.getChildConfig(t=i._injector??t,i,r).pipe(at(({routes:c})=>{const u=i._loadedInjector??t,{snapshot:f,consumedSegments:m,remainingSegments:y}=l,{segmentGroup:v,slicedSegments:w}=p3(e,m,y,c);if(0===w.length&&v.hasChildren())return this.processChildren(u,c,v).pipe(Fe(k=>null===k?null:[new cl(f,k)]));if(0===c.length&&0===w.length)return be([new cl(f,[])]);const E=Zo(i)===s;return this.processSegment(u,c,v,w,E?It:s,!0).pipe(Fe(k=>[new cl(f,k)]))}))))}getChildConfig(t,e,i){return e.children?be({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?be({routes:e._loadedRoutes,injector:e._loadedInjector}):function aie(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?be(!0):be(r.map(o=>{const a=zf(o,n);return Cc(function Gne(n){return n&&w_(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe($f(),d3())}(t,e,i).pipe(Tn(r=>r?this.configLoader.loadChildren(t,e).pipe(rr(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function uie(n){return o_(o3(!1,3))}())):be({routes:[],injector:t})}}function Eie(n){const t=n.value.routeConfig;return t&&""===t.path}function g3(n){const t=[],e=new Set;for(const i of n){if(!Eie(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=g3(i.children);t.push(new cl(i.value,r))}return t.filter(i=>!e.has(i))}function m3(n){return n.data||{}}function _3(n){return n.resolve||{}}function y3(n){return"string"==typeof n.title||null===n.title}function nx(n){return at(t=>{const e=n(t);return e?X(e).pipe(Fe(()=>t)):be(t)})}const qf=new De("ROUTES");let ix=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=He(J2)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return be(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Cc(e.loadComponent()).pipe(Fe(v3),rr(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),a_(()=>{this.componentLoaders.delete(e)})),r=new SB(i,()=>new ne).pipe(VA());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return be({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function xie(n,t,e,i){return Cc(n.loadChildren()).pipe(Fe(v3),Tn(r=>r instanceof o2||Array.isArray(r)?be(r):X(t.compileModuleAsync(r))),Fe(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(e).injector,o=s.get(qf,[],{optional:!0,self:!0}).flat()),{routes:o.map(JA),injector:s}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(a_(()=>{this.childrenLoaders.delete(i)})),o=new SB(s,()=>new ne).pipe(VA());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function v3(n){return function Mie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let H0=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ne,this.transitionAbortSubject=new ne,this.configLoader=He(ix),this.environmentInjector=He(Ys),this.urlSerializer=He(u_),this.rootContexts=He(m_),this.inputBindingEnabled=null!==He(L0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>be(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Ene(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new wne(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new se({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:p_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vn(s=>0!==s.id),Fe(s=>({...s,extractedUrl:e.urlHandlingStrategy.extract(s.rawUrl)})),at(s=>{this.currentTransition=s;let o=!1,a=!1;return be(s).pipe(rr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),at(l=>{const c=l.currentBrowserUrl.toString(),u=!e.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const m="";return this.events.next(new jf(l.id,this.urlSerializer.serialize(l.rawUrl),m,0)),l.resolve(null),Di}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return be(l).pipe(at(m=>{const y=this.transitions?.getValue();return this.events.next(new O0(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Di:Promise.resolve(m)}),function Cie(n,t,e,i,r,s){return Tn(o=>function vie(n,t,e,i,r,s,o="emptyOnly"){return new bie(n,t,e,i,r,o,s).recognize()}(n,t,e,i,o.extractedUrl,r,s).pipe(Fe(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),rr(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new ZB(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(u&&e.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:m,extractedUrl:y,source:v,restoredState:w,extras:E}=l,k=new O0(m,this.urlSerializer.serialize(y),v,w);this.events.next(k);const S=JB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:S,urlAfterRedirects:y,extras:{...E,skipLocationChange:!1,replaceUrl:!1}},be(s)}{const m="";return this.events.next(new jf(l.id,this.urlSerializer.serialize(l.extractedUrl),m,1)),l.resolve(null),Di}}),rr(l=>{const c=new _ne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Fe(l=>(this.currentTransition=s={...l,guards:Hne(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Jne(n,t){return Tn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?be({...e,guardsResult:!0}):function eie(n,t,e,i){return X(n).pipe(Tn(r=>function oie(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?be(s.map(a=>{const l=y_(t)??r,c=zf(a,l);return Cc(function Yne(n){return n&&w_(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,i):l.runInContext(()=>c(n,t,e,i))).pipe(Ec())})).pipe($f()):be(!0)}(r.component,r.route,e,t,i)),Ec(r=>!0!==r,!0))}(o,i,r,n).pipe(Tn(a=>a&&function qne(n){return"boolean"==typeof n}(a)?function tie(n,t,e,i){return X(t).pipe(Lf(r=>C0(function iie(n,t){return null!==n&&t&&t(new Cne(n)),be(!0)}(r.route.parent,i),function nie(n,t){return null!==n&&t&&t(new Tne(n)),be(!0)}(r.route,i),function sie(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function zne(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>D0(()=>be(o.guards.map(l=>{const c=y_(o.node)??e,u=zf(l,c);return Cc(function Zne(n){return n&&w_(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(Ec())})).pipe($f())));return be(s).pipe($f())}(n,r.path,e),function rie(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return be(!0);const r=i.map(s=>D0(()=>{const o=y_(t)??e,a=zf(s,o);return Cc(function Kne(n){return n&&w_(n.canActivate)}(a)?a.canActivate(t,n):o.runInContext(()=>a(t,n))).pipe(Ec())}));return be(r).pipe($f())}(n,r.route,e))),Ec(r=>!0!==r,!0))}(i,s,n,t):be(a)),Fe(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),rr(l=>{if(s.guardsResult=l.guardsResult,ld(l.guardsResult))throw s3(0,l.guardsResult);const c=new yne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),vn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),nx(l=>{if(l.guards.canActivateChecks.length)return be(l).pipe(rr(c=>{const u=new vne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),at(c=>{let u=!1;return be(c).pipe(function Die(n,t){return Tn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return be(e);let s=0;return X(r).pipe(Lf(o=>function Tie(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!y3(r)&&(s[l_]=r.title),function Iie(n,t,e,i){const r=function Sie(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return be({});const s={};return X(r).pipe(Tn(o=>function Aie(n,t,e,i){const r=y_(t)??i,s=zf(n,r);return Cc(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[o],t,e,i).pipe(Ec(),rr(a=>{s[o]=a}))),S0(1),function Hte(n){return Fe(()=>n)}(s),od(o=>u3(o)?Di:o_(o)))}(s,n,t,i).pipe(Fe(o=>(n._resolvedData=o,n.data=e3(n,e).resolve,r&&y3(r)&&(n.data[l_]=r.title),null)))}(o.route,i,n,t)),rr(()=>s++),S0(1),Tn(o=>s===r.length?be(e):Di))})}(e.paramsInheritanceStrategy,this.environmentInjector),rr({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),rr(c=>{const u=new bne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),nx(l=>{const c=u=>{const f=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(u.routeConfig).pipe(rr(m=>{u.component=m}),Fe(()=>{})));for(const m of u.children)f.push(...c(m));return f};return sd(c(l.targetSnapshot.root)).pipe(T0(),zi(1))}),nx(()=>this.afterPreactivation()),Fe(l=>{const c=function kne(n,t,e){const i=__(n,t._root,e?e._root:void 0);return new XB(i,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),rr(()=>{this.events.next(new $A)}),((n,t,e,i)=>Fe(r=>(new Une(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),zi(1),rr({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ll(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),qr(this.transitionAbortSubject.pipe(rr(l=>{throw l}))),a_(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),od(l=>{if(a=!0,a3(l))this.events.next(new g_(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function One(n){return a3(n)&&ld(n.url)}(l)?this.events.next(new WA(l.url)):s.resolve(!1);else{this.events.next(new N0(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(l))}catch(c){s.reject(c)}}return Di}))}))}cancelNavigationTransition(e,i,r){const s=new g_(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b3(n){return n!==p_}let w3=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===It);return i}getResolvedTitleForRoute(e){return e.data[l_]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(kie)},providedIn:"root"})}return n})(),kie=(()=>{class n extends w3{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(te(bB))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(Oie)},providedIn:"root"})}return n})();class Pie{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Oie=(()=>{class n extends Pie{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const z0=new De("",{providedIn:"root",factory:()=>({})});let Nie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:function(){return He(Fie)},providedIn:"root"})}return n})(),Fie=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var E_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(E_||{});function E3(n,t){n.events.pipe(vn(e=>e instanceof ll||e instanceof g_||e instanceof N0||e instanceof jf),Fe(e=>e instanceof ll||e instanceof jf?E_.COMPLETE:e instanceof g_&&(0===e.code||1===e.code)?E_.REDIRECTING:E_.FAILED),vn(e=>e!==E_.REDIRECTING),zi(1)).subscribe(()=>{t()})}function Lie(n){throw n}function Vie(n,t,e){return t.parse("/")}const Bie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=He(X2),this.isNgZoneEnabled=!1,this._events=new ne,this.options=He(z0,{optional:!0})||{},this.pendingTasks=He(Xw),this.errorHandler=this.options.errorHandler||Lie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Vie,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=He(Nie),this.routeReuseStrategy=He(Rie),this.titleStrategy=He(w3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=He(qf,{optional:!0})?.flat()??[],this.navigationTransitions=He(H0),this.urlSerializer=He(u_),this.location=He(t_),this.componentInputBindingEnabled=!!He(L0,{optional:!0}),this.eventsSubscription=new Ct,this.isNgZoneEnabled=He(ot)instanceof ot&&ot.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Bf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=JB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(C3(i)&&this._events.next(i));if(i instanceof O0)b3(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof jf)this.rawUrlTree=r.rawUrl;else if(i instanceof ZB){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof $A)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof g_)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof WA){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||b3(r.source)};this.scheduleNavigation(s,p_,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof N0&&this.restoreHistory(r,!0),i instanceof ll&&(this.navigated=!0),C3(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),p_,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(JA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let f,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{f=HB(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),f=this.currentUrlTree.root}return zB(f,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=ld(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,p_,null,i)}navigate(e,i={skipLocationChange:!1}){return function Uie(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new B(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...Bie}:!1===i?{...jie}:i,ld(e))return PB(this.currentUrlTree,e,r);const s=this.parseUrl(e);return PB(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((f,m)=>{a=f,l=m});const u=this.pendingTasks.add();return E3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C3(n){return!(n instanceof $A||n instanceof WA)}let cd=(()=>{class n{constructor(e,i,r,s,o,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new ne,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof ll&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function dN(n,t,e){return function BG(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?uN:cN}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(K(Gr),K(Hf),function Jh(n){return function am(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if(yg(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(Ri(),n)}("tabindex"),K(zr),K(hn),K(rd))};static#t=this.\u0275dir=et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&ae("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&fi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Nf],skipLocationChange:["skipLocationChange","skipLocationChange",Nf],replaceUrl:["replaceUrl","replaceUrl",Nf],routerLink:"routerLink"},standalone:!0,features:[CF,Vi]})}return n})();class D3{}let $ie=(()=>{class n{constructor(e,i,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(vn(e=>e instanceof ll),Lf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=xS(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return X(r).pipe(Es())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):be(null);const s=r.pipe(Tn(o=>null===o?be(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return i.loadComponent&&!i._loadedComponent?X([s,this.loader.loadComponent(i)]).pipe(Es()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(te(Gr),te(J2),te(Ys),te(D3),te(ix))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const rx=new De("");let T3=(()=>{class n{constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof O0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ll?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof jf&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof YB&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new YB(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){qI()};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function ul(n,t){return{\u0275kind:n,\u0275providers:t}}function S3(){const n=He(Ui);return t=>{const e=n.get(yc);if(t!==e.components[0])return;const i=n.get(Gr),r=n.get(A3);1===n.get(sx)&&i.initialNavigation(),n.get(x3,null,Nt.Optional)?.setUpPreloading(),n.get(rx,null,Nt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const A3=new De("",{factory:()=>new ne}),sx=new De("",{providedIn:"root",factory:()=>1}),x3=new De("");function Kie(n){return ul(0,[{provide:x3,useExisting:$ie},{provide:D3,useExisting:n}])}const M3=new De("ROUTER_FORROOT_GUARD"),Yie=[t_,{provide:u_,useClass:BA},Gr,m_,{provide:Hf,useFactory:function I3(n){return n.routerState.root},deps:[Gr]},ix,[]];function Qie(){return new oV("Router",Gr)}let Dc=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[Yie,[],{provide:qf,multi:!0,useValue:e},{provide:M3,useFactory:tre,deps:[[Gr,new hc,new nf]]},{provide:z0,useValue:i||{}},i?.useHash?{provide:rd,useClass:gJ}:{provide:rd,useClass:LV},{provide:rx,useFactory:()=>{const n=He(xee),t=He(ot),e=He(z0),i=He(H0),r=He(u_);return e.scrollOffset&&n.setOffset(e.scrollOffset),new T3(r,i,n,t,e)}},i?.preloadingStrategy?Kie(i.preloadingStrategy).\u0275providers:[],{provide:oV,multi:!0,useFactory:Qie},i?.initialNavigation?nre(i):[],i?.bindToComponentInputs?ul(8,[r3,{provide:L0,useExisting:r3}]).\u0275providers:[],[{provide:k3,useFactory:S3},{provide:tA,multi:!0,useExisting:k3}]]}}static forChild(e){return{ngModule:n,providers:[{provide:qf,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||n)(te(M3,8))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({})}return n})();function tre(n){return"guarded"}function nre(n){return["disabled"===n.initialNavigation?ul(3,[{provide:GS,multi:!0,useFactory:()=>{const t=He(Gr);return()=>{t.setUpLocationChangeListener()}}},{provide:sx,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ul(2,[{provide:sx,useValue:0},{provide:GS,multi:!0,deps:[Ui],useFactory:t=>{const e=t.get(fJ,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(Gr),s=t.get(A3);E3(r,()=>{i(!0)}),t.get(H0).afterPreactivation=()=>(i(!0),s.closed?be(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const k3=new De("");var ye=wt(861),Os=wt(106);Os.Z.registerVersion("firebase","10.12.2","app-compat"),wt(985);var Gf=wt(534);(0,Gf.registerVersion)("firebase","10.12.2","app");class lre extends Ct{constructor(t,e){super()}schedule(t,e=0){return this}}const $0={setInterval(n,t,...e){const{delegate:i}=$0;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=$0;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class W0 extends lre{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return $0.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&$0.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,_e(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const ox={now:()=>(ox.delegate||Date).now(),delegate:void 0};class C_{constructor(t,e=C_.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}C_.now=ox.now;class q0 extends C_{constructor(t,e=C_.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const dre=new class ure extends q0{}(class cre extends W0{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(t,e,i):(t.flush(this),0)}}),Kf=new q0(W0),hre=Kf,ax=new gc("ANGULARFIRE2_VERSION");class R3{constructor(){return((n,t)=>{const e=(0,Gf.getApps)(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(pre)}}const pre="app-check";function Zf(){}class P3{zone;delegate;constructor(t,e=dre){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{t.apply(this,[o])})},e,i)}}class gre{zone;task=null;constructor(t){this.zone=t}call(t,e){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zf,{},Zf,Zf)),e.pipe(rr({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let O3=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new P3(Zone.current)),this.insideAngular=e.run(()=>new P3(Zone.current,Kf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(te(ot))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eo(n){return function _re(n){return function(e){return(e=e.lift(new gre(n.ngZone))).pipe(Nr(n.outsideAngular),os(n.insideAngular))}}(function Yf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}const vre=["ngOnDestroy"];class N3{constructor(t){return t}}const G0=new De("angularfire2.app.options"),K0=new De("angularfire2.app.name");function lx(n,t,e){const r="object"==typeof e&&e||{};r.name=r.name||"string"==typeof e&&e||"[DEFAULT]";const o=Os.Z.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>Os.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Ere("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new N3(o)}const Ere=(n,...t)=>{},Cre={provide:N3,useFactory:lx,deps:[G0,ot,[new hc,K0]]};let Dre=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:G0,useValue:e},{provide:K0,useValue:i}]}}constructor(e){Os.Z.registerVersion("angularfire",ax.full,"core"),Os.Z.registerVersion("angularfire",ax.full,"app-compat"),Os.Z.registerVersion("angular",IN.full,e.toString())}static \u0275fac=function(i){return new(i||n)(te(vo))};static \u0275mod=Wt({type:n});static \u0275inj=Zt({providers:[Cre]})}return n})();function F3(n,t,e,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Tre(n,t){try{return n.toString()===t.toString()}catch{return n===t}}(r,o)||(L3("error",`${t} was already initialized on the ${e} Firebase App with different settings.${Ire?" You may need to reload as Firebase is not HMR aware.":""}`),L3("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const Ire=typeof module<"u"&&!!module.hot,L3=(n,...t)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class V3 extends ne{constructor(t=1/0,e=1/0,i=ox){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(i.push(t),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=i?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function B3(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,Xe({connector:()=>new V3(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function cx(n,t){return L(t)?at(()=>n,t):at(()=>n)}const j3=new De("angularfire2.auth.use-emulator"),U3=new De("angularfire2.auth.settings"),H3=new De("angularfire2.auth.tenant-id"),z3=new De("angularfire2.auth.langugage-code"),$3=new De("angularfire2.auth.use-device-language"),W3=new De("angularfire.auth.persistence"),q3=(n,t,e,i,r,s,o,a)=>F3(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=t.runOutsideAngular(()=>n.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[e,i,r,s,o,a]);let ux=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,s,o,a,l,c,u,f,m,y){const v=new ne,w=be(void 0).pipe(os(o.outsideAngular),at(()=>s.runOutsideAngular(()=>Promise.resolve().then(wt.bind(wt,985)))),Fe(()=>lx(e,s,i)),Fe(E=>q3(E,s,a,c,u,f,l,m)),B3({bufferSize:1,refCount:!1}));if(y0(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=be(null);else{w.pipe(Ec()).subscribe();const E=w.pipe(at(R=>R.getRedirectResult().then(z=>z,()=>null)),eo,B3({bufferSize:1,refCount:!1})),k=w.pipe(at(R=>new ft(z=>({unsubscribe:s.runOutsideAngular(()=>R.onAuthStateChanged(q=>z.next(q),q=>z.error(q),()=>z.complete()))})))),S=w.pipe(at(R=>new ft(z=>({unsubscribe:s.runOutsideAngular(()=>R.onIdTokenChanged(q=>z.next(q),q=>z.error(q),()=>z.complete()))}))));this.authState=E.pipe(cx(k),Nr(o.outsideAngular),os(o.insideAngular)),this.user=E.pipe(cx(S),Nr(o.outsideAngular),os(o.insideAngular)),this.idToken=this.user.pipe(at(R=>R?X(R.getIdToken()):be(null))),this.idTokenResult=this.user.pipe(at(R=>R?X(R.getIdTokenResult()):be(null))),this.credential=ve(E,v,this.authState.pipe(vn(R=>!R))).pipe(Fe(R=>R?.user?R:null),Nr(o.outsideAngular),os(o.insideAngular))}return((n,t,e,i={})=>new Proxy(n,{get:(r,s)=>e.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(vre.indexOf(s)>-1)return()=>{};const o=t.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>e.run(()=>c)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const f=u?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,f),f})})})}))(this,w,s,{spy:{apply:(E,k,S)=>{(E.startsWith("signIn")||E.startsWith("createUser"))&&S.then(R=>v.next(R))}}})}static \u0275fac=function(i){return new(i||n)(te(G0),te(K0,8),te(vo),te(ot),te(O3),te(j3,8),te(U3,8),te(H3,8),te(z3,8),te($3,8),te(W3,8),te(R3,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function Qf(){return pe((n,t)=>{let e,i=!1;n.subscribe(Pe(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var dd,Y3,G3=wt(537),Ea=wt(879),mn=wt(58),K3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Z3={};(function(){var n;function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function r(N,M,P){P||(P=0);var U=Array(16);if("string"==typeof M)for(var V=0;16>V;++V)U[V]=M.charCodeAt(P++)|M.charCodeAt(P++)<<8|M.charCodeAt(P++)<<16|M.charCodeAt(P++)<<24;else for(V=0;16>V;++V)U[V]=M[P++]|M[P++]<<8|M[P++]<<16|M[P++]<<24;var H=N.g[3],$=(M=N.g[0])+(H^(P=N.g[1])&((V=N.g[2])^H))+U[0]+3614090360&4294967295;$=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=(P=(V=(H=(M=P+($<<7&4294967295|$>>>25))+(($=H+(V^M&(P^V))+U[1]+3905402710&4294967295)<<12&4294967295|$>>>20))+(($=V+(P^H&(M^P))+U[2]+606105819&4294967295)<<17&4294967295|$>>>15))+(($=P+(M^V&(H^M))+U[3]+3250441966&4294967295)<<22&4294967295|$>>>10))+(($=M+(H^P&(V^H))+U[4]+4118548399&4294967295)<<7&4294967295|$>>>25))+(($=H+(V^M&(P^V))+U[5]+1200080426&4294967295)<<12&4294967295|$>>>20))+(($=V+(P^H&(M^P))+U[6]+2821735955&4294967295)<<17&4294967295|$>>>15))+(($=P+(M^V&(H^M))+U[7]+4249261313&4294967295)<<22&4294967295|$>>>10))+(($=M+(H^P&(V^H))+U[8]+1770035416&4294967295)<<7&4294967295|$>>>25))+(($=H+(V^M&(P^V))+U[9]+2336552879&4294967295)<<12&4294967295|$>>>20))+(($=V+(P^H&(M^P))+U[10]+4294925233&4294967295)<<17&4294967295|$>>>15))+(($=P+(M^V&(H^M))+U[11]+2304563134&4294967295)<<22&4294967295|$>>>10))+(($=M+(H^P&(V^H))+U[12]+1804603682&4294967295)<<7&4294967295|$>>>25))+(($=H+(V^M&(P^V))+U[13]+4254626195&4294967295)<<12&4294967295|$>>>20))+(($=V+(P^H&(M^P))+U[14]+2792965006&4294967295)<<17&4294967295|$>>>15))+(($=P+(M^V&(H^M))+U[15]+1236535329&4294967295)<<22&4294967295|$>>>10))+(($=M+(V^H&(P^V))+U[1]+4129170786&4294967295)<<5&4294967295|$>>>27))+(($=H+(P^V&(M^P))+U[6]+3225465664&4294967295)<<9&4294967295|$>>>23))+(($=V+(M^P&(H^M))+U[11]+643717713&4294967295)<<14&4294967295|$>>>18))+(($=P+(H^M&(V^H))+U[0]+3921069994&4294967295)<<20&4294967295|$>>>12))+(($=M+(V^H&(P^V))+U[5]+3593408605&4294967295)<<5&4294967295|$>>>27))+(($=H+(P^V&(M^P))+U[10]+38016083&4294967295)<<9&4294967295|$>>>23))+(($=V+(M^P&(H^M))+U[15]+3634488961&4294967295)<<14&4294967295|$>>>18))+(($=P+(H^M&(V^H))+U[4]+3889429448&4294967295)<<20&4294967295|$>>>12))+(($=M+(V^H&(P^V))+U[9]+568446438&4294967295)<<5&4294967295|$>>>27))+(($=H+(P^V&(M^P))+U[14]+3275163606&4294967295)<<9&4294967295|$>>>23))+(($=V+(M^P&(H^M))+U[3]+4107603335&4294967295)<<14&4294967295|$>>>18))+(($=P+(H^M&(V^H))+U[8]+1163531501&4294967295)<<20&4294967295|$>>>12))+(($=M+(V^H&(P^V))+U[13]+2850285829&4294967295)<<5&4294967295|$>>>27))+(($=H+(P^V&(M^P))+U[2]+4243563512&4294967295)<<9&4294967295|$>>>23))+(($=V+(M^P&(H^M))+U[7]+1735328473&4294967295)<<14&4294967295|$>>>18))+(($=P+(H^M&(V^H))+U[12]+2368359562&4294967295)<<20&4294967295|$>>>12))+(($=M+(P^V^H)+U[5]+4294588738&4294967295)<<4&4294967295|$>>>28))+(($=H+(M^P^V)+U[8]+2272392833&4294967295)<<11&4294967295|$>>>21))+(($=V+(H^M^P)+U[11]+1839030562&4294967295)<<16&4294967295|$>>>16))+(($=P+(V^H^M)+U[14]+4259657740&4294967295)<<23&4294967295|$>>>9))+(($=M+(P^V^H)+U[1]+2763975236&4294967295)<<4&4294967295|$>>>28))+(($=H+(M^P^V)+U[4]+1272893353&4294967295)<<11&4294967295|$>>>21))+(($=V+(H^M^P)+U[7]+4139469664&4294967295)<<16&4294967295|$>>>16))+(($=P+(V^H^M)+U[10]+3200236656&4294967295)<<23&4294967295|$>>>9))+(($=M+(P^V^H)+U[13]+681279174&4294967295)<<4&4294967295|$>>>28))+(($=H+(M^P^V)+U[0]+3936430074&4294967295)<<11&4294967295|$>>>21))+(($=V+(H^M^P)+U[3]+3572445317&4294967295)<<16&4294967295|$>>>16))+(($=P+(V^H^M)+U[6]+76029189&4294967295)<<23&4294967295|$>>>9))+(($=M+(P^V^H)+U[9]+3654602809&4294967295)<<4&4294967295|$>>>28))+(($=H+(M^P^V)+U[12]+3873151461&4294967295)<<11&4294967295|$>>>21))+(($=V+(H^M^P)+U[15]+530742520&4294967295)<<16&4294967295|$>>>16))+(($=P+(V^H^M)+U[2]+3299628645&4294967295)<<23&4294967295|$>>>9))+(($=M+(V^(P|~H))+U[0]+4096336452&4294967295)<<6&4294967295|$>>>26))+(($=H+(P^(M|~V))+U[7]+1126891415&4294967295)<<10&4294967295|$>>>22))+(($=V+(M^(H|~P))+U[14]+2878612391&4294967295)<<15&4294967295|$>>>17))+(($=P+(H^(V|~M))+U[5]+4237533241&4294967295)<<21&4294967295|$>>>11))+(($=M+(V^(P|~H))+U[12]+1700485571&4294967295)<<6&4294967295|$>>>26))+(($=H+(P^(M|~V))+U[3]+2399980690&4294967295)<<10&4294967295|$>>>22))+(($=V+(M^(H|~P))+U[10]+4293915773&4294967295)<<15&4294967295|$>>>17))+(($=P+(H^(V|~M))+U[1]+2240044497&4294967295)<<21&4294967295|$>>>11))+(($=M+(V^(P|~H))+U[8]+1873313359&4294967295)<<6&4294967295|$>>>26))+(($=H+(P^(M|~V))+U[15]+4264355552&4294967295)<<10&4294967295|$>>>22))+(($=V+(M^(H|~P))+U[6]+2734768916&4294967295)<<15&4294967295|$>>>17))+(($=P+(H^(V|~M))+U[13]+1309151649&4294967295)<<21&4294967295|$>>>11))+((H=(M=P+(($=M+(V^(P|~H))+U[4]+4149444226&4294967295)<<6&4294967295|$>>>26))+(($=H+(P^(M|~V))+U[11]+3174756917&4294967295)<<10&4294967295|$>>>22))^((V=H+(($=V+(M^(H|~P))+U[2]+718787259&4294967295)<<15&4294967295|$>>>17))|~M))+U[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(V+($<<21&4294967295|$>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+H&4294967295}function o(N,M){this.h=M;for(var P=[],U=!0,V=N.length-1;0<=V;V--){var H=0|N[V];U&&H==M||(P[V]=H,U=!1)}this.g=P}(function t(N,M){function P(){}P.prototype=M.prototype,N.D=M.prototype,N.prototype=new P,N.prototype.constructor=N,N.C=function(U,V,H){for(var $=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)$[ct-2]=arguments[ct];return M.prototype[V].apply(U,$)}})(i,function e(){this.blockSize=-1}),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},i.prototype.u=function(N,M){void 0===M&&(M=N.length);for(var P=M-this.blockSize,U=this.B,V=this.h,H=0;H<M;){if(0==V)for(;H<=P;)r(this,N,H),H+=this.blockSize;if("string"==typeof N){for(;H<M;)if(U[V++]=N.charCodeAt(H++),V==this.blockSize){r(this,U),V=0;break}}else for(;H<M;)if(U[V++]=N[H++],V==this.blockSize){r(this,U),V=0;break}}this.h=V,this.o+=M},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;var P=8*this.o;for(M=N.length-8;M<N.length;++M)N[M]=255&P,P/=256;for(this.u(N),N=Array(16),M=P=0;4>M;++M)for(var U=0;32>U;U+=8)N[P++]=this.g[M]>>>U&255;return N};var a={};function l(N){return-128<=N&&128>N?function s(N,M){var P=a;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=M(N)}(N,function(M){return new o([0|M],0>M?-1:0)}):new o([0|N],0>N?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return E(c(-N));for(var M=[],P=1,U=0;N>=P;U++)M[U]=N/P|0,P*=4294967296;return new o(M,0)}var f=l(0),m=l(1),y=l(16777216);function v(N){if(0!=N.h)return!1;for(var M=0;M<N.g.length;M++)if(0!=N.g[M])return!1;return!0}function w(N){return-1==N.h}function E(N){for(var M=N.g.length,P=[],U=0;U<M;U++)P[U]=~N.g[U];return new o(P,~N.h).add(m)}function k(N,M){return N.add(E(M))}function S(N,M){for(;(65535&N[M])!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function R(N,M){this.g=N,this.h=M}function z(N,M){if(v(M))throw Error("division by zero");if(v(N))return new R(f,f);if(w(N))return M=z(E(N),M),new R(E(M.g),E(M.h));if(w(M))return M=z(N,E(M)),new R(E(M.g),M.h);if(30<N.g.length){if(w(N)||w(M))throw Error("slowDivide_ only works with positive integers.");for(var P=m,U=M;0>=U.l(N);)P=q(P),U=q(U);var V=ee(P,1),H=ee(U,1);for(U=ee(U,2),P=ee(P,2);!v(U);){var $=H.add(U);0>=$.l(N)&&(V=V.add(P),H=$),U=ee(U,1),P=ee(P,1)}return M=k(N,V.j(M)),new R(V,M)}for(V=f;0<=N.l(M);){for(P=Math.max(1,Math.floor(N.m()/M.m())),U=48>=(U=Math.ceil(Math.log(P)/Math.LN2))?1:Math.pow(2,U-48),$=(H=c(P)).j(M);w($)||0<$.l(N);)$=(H=c(P-=U)).j(M);v(H)&&(H=m),V=V.add(H),N=k(N,$)}return new R(V,N)}function q(N){for(var M=N.g.length+1,P=[],U=0;U<M;U++)P[U]=N.i(U)<<1|N.i(U-1)>>>31;return new o(P,N.h)}function ee(N,M){var P=M>>5;M%=32;for(var U=N.g.length-P,V=[],H=0;H<U;H++)V[H]=0<M?N.i(H+P)>>>M|N.i(H+P+1)<<32-M:N.i(H+P);return new o(V,N.h)}(n=o.prototype).m=function(){if(w(this))return-E(this).m();for(var N=0,M=1,P=0;P<this.g.length;P++){var U=this.i(P);N+=(0<=U?U:4294967296+U)*M,M*=4294967296}return N},n.toString=function(N){if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if(v(this))return"0";if(w(this))return"-"+E(this).toString(N);for(var M=c(Math.pow(N,6)),P=this,U="";;){var V=z(P,M).g,H=((0<(P=k(P,V.j(M))).g.length?P.g[0]:P.h)>>>0).toString(N);if(v(P=V))return H+U;for(;6>H.length;)H="0"+H;U=H+U}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h},n.l=function(N){return w(N=k(this,N))?-1:v(N)?0:1},n.abs=function(){return w(this)?E(this):this},n.add=function(N){for(var M=Math.max(this.g.length,N.g.length),P=[],U=0,V=0;V<=M;V++){var H=U+(65535&this.i(V))+(65535&N.i(V)),$=(H>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);U=$>>>16,P[V]=($&=65535)<<16|(H&=65535)}return new o(P,-2147483648&P[P.length-1]?-1:0)},n.j=function(N){if(v(this)||v(N))return f;if(w(this))return w(N)?E(this).j(E(N)):E(E(this).j(N));if(w(N))return E(this.j(E(N)));if(0>this.l(y)&&0>N.l(y))return c(this.m()*N.m());for(var M=this.g.length+N.g.length,P=[],U=0;U<2*M;U++)P[U]=0;for(U=0;U<this.g.length;U++)for(var V=0;V<N.g.length;V++){var H=this.i(U)>>>16,$=65535&this.i(U),ct=N.i(V)>>>16,Rt=65535&N.i(V);P[2*U+2*V]+=$*Rt,S(P,2*U+2*V),P[2*U+2*V+1]+=H*Rt,S(P,2*U+2*V+1),P[2*U+2*V+1]+=$*ct,S(P,2*U+2*V+1),P[2*U+2*V+2]+=H*ct,S(P,2*U+2*V+2)}for(U=0;U<M;U++)P[U]=P[2*U+1]<<16|P[2*U];for(U=M;U<2*M;U++)P[U]=0;return new o(P,0)},n.A=function(N){return z(this,N).h},n.and=function(N){for(var M=Math.max(this.g.length,N.g.length),P=[],U=0;U<M;U++)P[U]=this.i(U)&N.i(U);return new o(P,this.h&N.h)},n.or=function(N){for(var M=Math.max(this.g.length,N.g.length),P=[],U=0;U<M;U++)P[U]=this.i(U)|N.i(U);return new o(P,this.h|N.h)},n.xor=function(N){for(var M=Math.max(this.g.length,N.g.length),P=[],U=0;U<M;U++)P[U]=this.i(U)^N.i(U);return new o(P,this.h^N.h)},i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Y3=Z3.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(N,M){if(0==N.length)throw Error("number format error: empty string");if(2>(M=M||10)||36<M)throw Error("radix out of range: "+M);if("-"==N.charAt(0))return E(u(N.substring(1),M));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(M,8)),U=f,V=0;V<N.length;V+=8){var H=Math.min(8,N.length-V),$=parseInt(N.substring(V,V+H),M);8>H?(H=c(Math.pow(M,H)),U=U.j(H).add(c($))):U=(U=U.j(P)).add(c($))}return U},dd=Z3.Integer=o}).apply(typeof K3<"u"?K3:typeof self<"u"?self:typeof window<"u"?window:{});var Q3,X3,D_,J3,Y0,dx,ej,tj,nj,Z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dl={};(function(){var n,t="function"==typeof Object.defineProperties?Object.defineProperty:function(p,b,D){return p==Array.prototype||p==Object.prototype||(p[b]=D.value),p},i=function e(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Z0&&Z0];for(var b=0;b<p.length;++b){var D=p[b];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}(this);!function r(p,b){if(b)e:{var D=i;p=p.split(".");for(var O=0;O<p.length-1;O++){var oe=p[O];if(!(oe in D))break e;D=D[oe]}(b=b(O=D[p=p[p.length-1]]))!=O&&null!=b&&t(D,p,{configurable:!0,writable:!0,value:b})}}("Array.prototype.values",function(p){return p||function(){return function s(p,b){p instanceof String&&(p+="");var D=0,O=!1,oe={next:function(){if(!O&&D<p.length){var me=D++;return{value:b(me,p[me]),done:!1}}return O=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}(this,function(b,D){return D})}});var o=o||{},a=this||self;function l(p){var b=typeof p;return"array"==(b="object"!=b?b:p?Array.isArray(p)?"array":b:"null")||"object"==b&&"number"==typeof p.length}function c(p){var b=typeof p;return"object"==b&&null!=p||"function"==b}function u(p,b,D){return p.call.apply(p.bind,arguments)}function f(p,b,D){if(!p)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,O),p.apply(b,oe)}}return function(){return p.apply(b,arguments)}}function m(p,b,D){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:f).apply(null,arguments)}function y(p,b){var D=Array.prototype.slice.call(arguments,1);return function(){var O=D.slice();return O.push.apply(O,arguments),p.apply(this,O)}}function v(p,b){function D(){}D.prototype=b.prototype,p.aa=b.prototype,p.prototype=new D,p.prototype.constructor=p,p.Qb=function(O,oe,me){for(var je=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)je[Fn-2]=arguments[Fn];return b.prototype[oe].apply(O,je)}}function w(p){const b=p.length;if(0<b){const D=Array(b);for(let O=0;O<b;O++)D[O]=p[O];return D}return[]}function E(p,b){for(let D=1;D<arguments.length;D++){const O=arguments[D];if(l(O)){const oe=p.length||0,me=O.length||0;p.length=oe+me;for(let je=0;je<me;je++)p[oe+je]=O[je]}else p.push(O)}}function S(p){return/^[\s\xa0]*$/.test(p)}function R(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function z(p){return z[" "](p),p}z[" "]=function(){};var q=!(-1==R().indexOf("Gecko")||-1!=R().toLowerCase().indexOf("webkit")&&-1==R().indexOf("Edge")||-1!=R().indexOf("Trident")||-1!=R().indexOf("MSIE")||-1!=R().indexOf("Edge"));function ee(p,b,D){for(const O in p)b.call(D,p[O],O,p)}function M(p){const b={};for(const D in p)b[D]=p[D];return b}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(p,b){let D,O;for(let oe=1;oe<arguments.length;oe++){for(D in O=arguments[oe],O)p[D]=O[D];for(let me=0;me<P.length;me++)D=P[me],Object.prototype.hasOwnProperty.call(O,D)&&(p[D]=O[D])}}function V(p){var b=1;p=p.split(":");const D=[];for(;0<b&&p.length;)D.push(p.shift()),b--;return p.length&&D.push(p.join(":")),D}function H(p){a.setTimeout(()=>{throw p},0)}function $(){var p=qe;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}var Rt=new class k{constructor(b,D){this.i=b,this.j=D,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}(()=>new Ne,p=>p.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(b,D){this.h=b,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,We=!1,qe=new class ct{constructor(){this.h=this.g=null}add(b,D){const O=Rt.get();O.set(b,D),this.h?this.h.next=O:this.g=O,this.h=O}},Yt=()=>{const p=a.Promise.resolve(void 0);Le=()=>{p.then(Cn)}};var Cn=()=>{for(var p;p=$();){try{p.h.call(p.g)}catch(D){H(D)}var b=Rt;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}We=!1};function on(){this.s=this.s,this.C=this.C}function an(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}on.prototype.s=!1,on.prototype.ma=function(){this.s||(this.s=!0,this.N())},on.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},an.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};a.addEventListener("test",D,b),a.removeEventListener("test",D,b)}catch{}return p}();function kr(p,b){if(an.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var D=this.type=p.type,O=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(q){e:{try{z(b.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(b=null)}}else"mouseover"==D?b=p.fromElement:"mouseout"==D&&(b=p.toElement);this.relatedTarget=b,O?(this.clientX=void 0!==O.clientX?O.clientX:O.pageX,this.clientY=void 0!==O.clientY?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:co[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&kr.aa.h.call(this)}}v(kr,an);var co={2:"touch",3:"pen",4:"mouse"};kr.prototype.h=function(){kr.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var bi="closure_listenable_"+(1e6*Math.random()|0),Rl=0;function Hs(p,b,D,O,oe){this.listener=p,this.proxy=null,this.src=b,this.type=D,this.capture=!!O,this.ha=oe,this.key=++Rl,this.da=this.fa=!1}function Pl(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function du(p){this.src=p,this.g={},this.h=0}function D1(p,b){var D=b.type;if(D in p.g){var me,O=p.g[D],oe=Array.prototype.indexOf.call(O,b,void 0);(me=0<=oe)&&Array.prototype.splice.call(O,oe,1),me&&(Pl(b),0==p.g[D].length&&(delete p.g[D],p.h--))}}function T1(p,b,D,O){for(var oe=0;oe<p.length;++oe){var me=p[oe];if(!me.da&&me.listener==b&&me.capture==!!D&&me.ha==O)return oe}return-1}du.prototype.add=function(p,b,D,O,oe){var me=p.toString();(p=this.g[me])||(p=this.g[me]=[],this.h++);var je=T1(p,b,O,oe);return-1<je?(b=p[je],D||(b.fa=!1)):((b=new Hs(b,this.src,me,!!O,oe)).fa=D,p.push(b)),b};var I1="closure_lm_"+(1e6*Math.random()|0),S1={};function k9(p,b,D,O,oe){if(O&&O.once)return P9(p,b,D,O,oe);if(Array.isArray(b)){for(var me=0;me<b.length;me++)k9(p,b[me],D,O,oe);return null}return D=k1(D),p&&p[bi]?p.K(b,D,c(O)?!!O.capture:!!O,oe):R9(p,b,D,!1,O,oe)}function R9(p,b,D,O,oe,me){if(!b)throw Error("Invalid event type");var je=c(oe)?!!oe.capture:!!oe,Fn=x1(p);if(Fn||(p[I1]=Fn=new du(p)),(D=Fn.add(b,D,O,je,me)).proxy)return D;if(O=function TCe(){const b=ICe;return function p(D){return b.call(p.src,p.listener,D)}}(),D.proxy=O,O.src=p,O.listener=D,p.addEventListener)$t||(oe=je),void 0===oe&&(oe=!1),p.addEventListener(b.toString(),O,oe);else if(p.attachEvent)p.attachEvent(N9(b.toString()),O);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(O)}return D}function P9(p,b,D,O,oe){if(Array.isArray(b)){for(var me=0;me<b.length;me++)P9(p,b[me],D,O,oe);return null}return D=k1(D),p&&p[bi]?p.L(b,D,c(O)?!!O.capture:!!O,oe):R9(p,b,D,!0,O,oe)}function O9(p,b,D,O,oe){if(Array.isArray(b))for(var me=0;me<b.length;me++)O9(p,b[me],D,O,oe);else O=c(O)?!!O.capture:!!O,D=k1(D),p&&p[bi]?(p=p.i,(b=String(b).toString())in p.g&&-1<(D=T1(me=p.g[b],D,O,oe))&&(Pl(me[D]),Array.prototype.splice.call(me,D,1),0==me.length&&(delete p.g[b],p.h--))):p&&(p=x1(p))&&(b=p.g[b.toString()],p=-1,b&&(p=T1(b,D,O,oe)),(D=-1<p?b[p]:null)&&A1(D))}function A1(p){if("number"!=typeof p&&p&&!p.da){var b=p.src;if(b&&b[bi])D1(b.i,p);else{var D=p.type,O=p.proxy;b.removeEventListener?b.removeEventListener(D,O,p.capture):b.detachEvent?b.detachEvent(N9(D),O):b.addListener&&b.removeListener&&b.removeListener(O),(D=x1(b))?(D1(D,p),0==D.h&&(D.src=null,b[I1]=null)):Pl(p)}}}function N9(p){return p in S1?S1[p]:S1[p]="on"+p}function ICe(p,b){if(p.da)p=!0;else{b=new kr(b,this);var D=p.listener,O=p.ha||p.src;p.fa&&A1(p),p=D.call(O,b)}return p}function x1(p){return(p=p[I1])instanceof du?p:null}var M1="__closure_events_fn_"+(1e9*Math.random()>>>0);function k1(p){return"function"==typeof p?p:(p[M1]||(p[M1]=function(b){return p.handleEvent(b)}),p[M1])}function ns(){on.call(this),this.i=new du(this),this.M=this,this.F=null}function ys(p,b){var D,O=p.F;if(O)for(D=[];O;O=O.F)D.push(O);if(p=p.M,O=b.type||b,"string"==typeof b)b=new an(b,p);else if(b instanceof an)b.target=b.target||p;else{var oe=b;U(b=new an(O,p),oe)}if(oe=!0,D)for(var me=D.length-1;0<=me;me--){var je=b.g=D[me];oe=ND(je,O,!0,b)&&oe}if(oe=ND(je=b.g=p,O,!0,b)&&oe,oe=ND(je,O,!1,b)&&oe,D)for(me=0;me<D.length;me++)oe=ND(je=b.g=D[me],O,!1,b)&&oe}function ND(p,b,D,O){if(!(b=p.i.g[String(b)]))return!0;b=b.concat();for(var oe=!0,me=0;me<b.length;++me){var je=b[me];if(je&&!je.da&&je.capture==D){var Fn=je.listener,Rr=je.ha||je.src;je.fa&&D1(p.i,je),oe=!1!==Fn.call(Rr,O)&&oe}}return oe&&!O.defaultPrevented}function F9(p,b,D){if("function"==typeof p)D&&(p=m(p,D));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=m(p.handleEvent,p)}return 2147483647<Number(b)?-1:a.setTimeout(p,b||0)}function L9(p){p.g=F9(()=>{p.g=null,p.i&&(p.i=!1,L9(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}v(ns,on),ns.prototype[bi]=!0,ns.prototype.removeEventListener=function(p,b,D,O){O9(this,p,b,D,O)},ns.prototype.N=function(){if(ns.aa.N.call(this),this.i){var b,p=this.i;for(b in p.g){for(var D=p.g[b],O=0;O<D.length;O++)Pl(D[O]);delete p.g[b],p.h--}}this.F=null},ns.prototype.K=function(p,b,D,O){return this.i.add(String(p),b,!1,D,O)},ns.prototype.L=function(p,b,D,O){return this.i.add(String(p),b,!0,D,O)};class SCe extends on{constructor(b,D){super(),this.m=b,this.l=D,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:L9(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pv(p){on.call(this),this.h=p,this.g={}}v(pv,on);var V9=[];function B9(p){ee(p.g,function(b,D){this.g.hasOwnProperty(D)&&A1(b)},p),p.g={}}pv.prototype.N=function(){pv.aa.N.call(this),B9(this)},pv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var R1=a.JSON.stringify,ACe=a.JSON.parse,xCe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function P1(){}function U9(){}P1.prototype.h=null;var gv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function O1(){an.call(this,"d")}function N1(){an.call(this,"c")}v(O1,an),v(N1,an);var fh={},H9=null;function FD(){return H9=H9||new ns}function z9(p){an.call(this,fh.La,p)}function mv(p){const b=FD();ys(b,new z9(b))}function $9(p,b){an.call(this,fh.STAT_EVENT,p),this.stat=b}function vs(p){const b=FD();ys(b,new $9(b,p))}function W9(p,b){an.call(this,fh.Ma,p),this.size=b}function _v(p,b){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},b)}function yv(){this.g=!0}function cg(p,b,D,O){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+function PCe(p,b){if(!p.g)return b;if(!b)return null;try{var D=JSON.parse(b);if(D)for(p=0;p<D.length;p++)if(Array.isArray(D[p])){var O=D[p];if(!(2>O.length)){var oe=O[1];if(Array.isArray(oe)&&!(1>oe.length)){var me=oe[0];if("noop"!=me&&"stop"!=me&&"close"!=me)for(var je=1;je<oe.length;je++)oe[je]=""}}}return R1(D)}catch{return b}}(p,D)+(O?" "+O:"")})}fh.La="serverreachability",v(z9,an),fh.STAT_EVENT="statevent",v($9,an),fh.Ma="timingevent",v(W9,an),yv.prototype.xa=function(){this.g=!1},yv.prototype.info=function(){};var F1,LD={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},q9={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function VD(){}function hu(p,b,D,O){this.j=p,this.i=b,this.l=D,this.R=O||1,this.U=new pv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new G9}function G9(){this.i=null,this.g="",this.h=!1}v(VD,P1),VD.prototype.g=function(){return new XMLHttpRequest},VD.prototype.i=function(){return{}},F1=new VD;var K9={},L1={};function V1(p,b,D){p.L=1,p.v=HD(Ol(b)),p.m=D,p.P=!0,Z9(p,null)}function Z9(p,b){p.F=Date.now(),BD(p),p.A=Ol(p.v);var D=p.A,O=p.R;Array.isArray(O)||(O=[String(O)]),cq(D.i,"t",O),p.C=0,D=p.j.J,p.h=new G9,p.g=Sq(p.j,D?b:null,!p.m),0<p.O&&(p.M=new SCe(m(p.Y,p,p.g),p.O)),b=p.U,D=p.g,O=p.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(V9[0]=oe.toString()),oe=V9);for(var me=0;me<oe.length;me++){var je=k9(D,oe[me],O||b.handleEvent,!1,b.h||b);if(!je)break;b.g[je.key]=je}b=p.H?M(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),mv(),function MCe(p,b,D,O,oe,me){p.info(function(){if(p.g)if(me)for(var je="",Fn=me.split("&"),Rr=0;Rr<Fn.length;Rr++){var un=Fn[Rr].split("=");if(1<un.length){var is=un[0];un=un[1];var rs=is.split("_");je=2<=rs.length&&"type"==rs[1]?je+(is+"=")+un+"&":je+(is+"=redacted&")}}else je=null;else je=me;return"XMLHTTP REQ ("+O+") [attempt "+oe+"]: "+b+"\n"+D+"\n"+je})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Y9(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function OCe(p,b){var D=p.C,O=b.indexOf("\n",D);return-1==O?L1:(D=Number(b.substring(D,O)),isNaN(D)?K9:(O+=1)+D>b.length?L1:(b=b.slice(O,O+D),p.C=O+D,b))}function BD(p){p.S=Date.now()+p.I,Q9(p,p.I)}function Q9(p,b){if(null!=p.B)throw Error("WatchDog timer not null");p.B=_v(m(p.ba,p),b)}function B1(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function vv(p){0==p.j.G||p.J||Cq(p.j,p)}function ph(p){B1(p);var b=p.M;b&&"function"==typeof b.ma&&b.ma(),p.M=null,B9(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function j1(p,b){try{var D=p.j;if(0!=D.G&&(D.g==p||U1(D.h,p)))if(!p.K&&U1(D.h,p)&&3==D.G){try{var O=D.Da.g.parse(b)}catch{O=null}if(Array.isArray(O)&&3==O.length){var oe=O;if(0==oe[0]){e:if(!D.u){if(D.g){if(!(D.g.F+3e3<p.F))break e;GD(D),WD(D)}W1(D),vs(18)}}else D.za=oe[1],0<D.za-D.T&&37500>oe[2]&&D.F&&0==D.v&&!D.C&&(D.C=_v(m(D.Za,D),6e3));if(1>=eq(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else mh(D,11)}else if((p.K||D.g==p)&&GD(D),!S(b))for(oe=D.Da.g.parse(b),b=0;b<oe.length;b++){let un=oe[b];if(D.T=un[0],un=un[1],2==D.G)if("c"==un[0]){D.K=un[1],D.ia=un[2];const is=un[3];null!=is&&(D.la=is,D.j.info("VER="+D.la));const rs=un[4];null!=rs&&(D.Aa=rs,D.j.info("SVER="+D.Aa));const hg=un[5];null!=hg&&"number"==typeof hg&&0<hg&&(D.L=O=1.5*hg,D.j.info("backChannelRequestTimeoutMs_="+O)),O=D;const ta=p.g;if(ta){const ZD=ta.g?ta.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ZD){var me=O.h;me.g||-1==ZD.indexOf("spdy")&&-1==ZD.indexOf("quic")&&-1==ZD.indexOf("h2")||(me.j=me.l,me.g=new Set,me.h&&(H1(me,me.h),me.h=null))}if(O.D){const G1=ta.g?ta.g.getResponseHeader("X-HTTP-Session-Id"):null;G1&&(O.ya=G1,ti(O.I,O.D,G1))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-p.F,D.j.info("Handshake RTT: "+D.R+"ms"));var je=p;if((O=D).qa=Iq(O,O.J?O.ia:null,O.W),je.K){tq(O.h,je);var Fn=je,Rr=O.L;Rr&&(Fn.I=Rr),Fn.B&&(B1(Fn),BD(Fn)),O.g=je}else wq(O);0<D.i.length&&qD(D)}else"stop"!=un[0]&&"close"!=un[0]||mh(D,7);else 3==D.G&&("stop"==un[0]||"close"==un[0]?"stop"==un[0]?mh(D,7):$1(D):"noop"!=un[0]&&D.l&&D.l.ta(un),D.v=0)}mv()}catch{}}function X9(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function J9(p){return!!p.h||!!p.g&&p.g.size>=p.j}function eq(p){return p.h?1:p.g?p.g.size:0}function U1(p,b){return p.h?p.h==b:!!p.g&&p.g.has(b)}function H1(p,b){p.g?p.g.add(b):p.h=b}function tq(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}function nq(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let b=p.i;for(const D of p.g.values())b=b.concat(D.D);return b}return w(p.i)}function iq(p,b){if(p.forEach&&"function"==typeof p.forEach)p.forEach(b,void 0);else if(l(p)||"string"==typeof p)Array.prototype.forEach.call(p,b,void 0);else for(var D=function LCe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||"string"==typeof p){var b=[];p=p.length;for(var D=0;D<p;D++)b.push(D);return b}b=[],D=0;for(const O in p)b[D++]=O;return b}}}(p),O=function FCe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(l(p)){for(var b=[],D=p.length,O=0;O<D;O++)b.push(p[O]);return b}for(O in b=[],D=0,p)b[D++]=p[O];return b}(p),oe=O.length,me=0;me<oe;me++)b.call(void 0,O[me],D&&D[me],p)}hu.prototype.ca=function(p){p=p.target;const b=this.M;b&&3==Nl(p)?b.j():this.Y(p)},hu.prototype.Y=function(p){try{if(p==this.g)e:{const rs=Nl(this.g);var b=this.g.Ba();if(this.g.Z(),!(3>rs)&&(3!=rs||this.g&&(this.h.h||this.g.oa()||mq(this.g)))){this.J||4!=rs||7==b||mv(),B1(this);var D=this.g.Z();this.X=D;t:if(Y9(this)){var O=mq(this.g);p="";var oe=O.length,me=4==Nl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ph(this),vv(this);var je="";break t}this.h.i=new a.TextDecoder}for(b=0;b<oe;b++)this.h.h=!0,p+=this.h.i.decode(O[b],{stream:!(me&&b==oe-1)});O.length=0,this.h.g+=p,this.C=0,je=this.h.g}else je=this.g.oa();if(this.o=200==D,function kCe(p,b,D,O,oe,me,je){p.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+oe+"]: "+b+"\n"+D+"\n"+me+" "+je})}(this.i,this.u,this.A,this.l,this.R,rs,D),this.o){if(this.T&&!this.K){t:{if(this.g){var Fn,Rr=this.g;if((Fn=Rr.g?Rr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Fn)){var un=Fn;break t}}un=null}if(!(D=un)){this.o=!1,this.s=3,vs(12),ph(this),vv(this);break e}cg(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,j1(this,D)}if(this.P){let ta;for(D=!0;!this.J&&this.C<je.length;){if(ta=OCe(this,je),ta==L1){4==rs&&(this.s=4,vs(14),D=!1),cg(this.i,this.l,null,"[Incomplete Response]");break}if(ta==K9){this.s=4,vs(15),cg(this.i,this.l,je,"[Invalid Chunk]"),D=!1;break}cg(this.i,this.l,ta,null),j1(this,ta)}if(Y9(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=rs||0!=je.length||this.h.h||(this.s=1,vs(16),D=!1),this.o=this.o&&D,D){if(0<je.length&&!this.W){this.W=!0;var is=this.j;is.g==this&&is.ba&&!is.M&&(is.j.info("Great, no buffering proxy detected. Bytes received: "+je.length),q1(is),is.M=!0,vs(11))}}else cg(this.i,this.l,je,"[Invalid Chunked Response]"),ph(this),vv(this)}else cg(this.i,this.l,je,null),j1(this,je);4==rs&&ph(this),this.o&&!this.J&&(4==rs?Cq(this.j,this):(this.o=!1,BD(this)))}else(function QCe(p){const b={};p=(p.g&&2<=Nl(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let O=0;O<p.length;O++){if(S(p[O]))continue;var D=V(p[O]);const oe=D[0];if("string"!=typeof(D=D[1]))continue;D=D.trim();const me=b[oe]||[];b[oe]=me,me.push(D)}!function N(p,b){for(const D in p)b.call(void 0,p[D],D,p)}(b,function(O){return O.join(", ")})})(this.g),400==D&&0<je.indexOf("Unknown SID")?(this.s=3,vs(12)):(this.s=0,vs(13)),ph(this),vv(this)}}}catch{}},hu.prototype.cancel=function(){this.J=!0,ph(this)},hu.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function RCe(p,b){p.info(function(){return"TIMEOUT: "+b})}(this.i,this.A),2!=this.L&&(mv(),vs(17)),ph(this),this.s=2,vv(this)):Q9(this,this.S-p)},X9.prototype.cancel=function(){if(this.i=nq(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var rq=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gh(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof gh){this.h=p.h,jD(this,p.j),this.o=p.o,this.g=p.g,UD(this,p.s),this.l=p.l;var b=p.i,D=new Ev;D.i=b.i,b.g&&(D.g=new Map(b.g),D.h=b.h),sq(this,D),this.m=p.m}else p&&(b=String(p).match(rq))?(this.h=!1,jD(this,b[1]||"",!0),this.o=bv(b[2]||""),this.g=bv(b[3]||"",!0),UD(this,b[4]),this.l=bv(b[5]||"",!0),sq(this,b[6]||"",!0),this.m=bv(b[7]||"")):(this.h=!1,this.i=new Ev(null,this.h))}function Ol(p){return new gh(p)}function jD(p,b,D){p.j=D?bv(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function UD(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function sq(p,b,D){b instanceof Ev?(p.i=b,function $Ce(p,b){b&&!p.j&&(fu(p),p.i=null,p.g.forEach(function(D,O){var oe=O.toLowerCase();O!=oe&&(aq(this,O),cq(this,oe,D))},p)),p.j=b}(p.i,p.h)):(D||(b=wv(b,HCe)),p.i=new Ev(b,p.h))}function ti(p,b,D){p.i.set(b,D)}function HD(p){return ti(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function bv(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function wv(p,b,D){return"string"==typeof p?(p=encodeURI(p).replace(b,BCe),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function BCe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}gh.prototype.toString=function(){var p=[],b=this.j;b&&p.push(wv(b,oq,!0),":");var D=this.g;return(D||"file"==b)&&(p.push("//"),(b=this.o)&&p.push(wv(b,oq,!0),"@"),p.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(D=this.s)&&p.push(":",String(D))),(D=this.l)&&(this.g&&"/"!=D.charAt(0)&&p.push("/"),p.push(wv(D,"/"==D.charAt(0)?UCe:jCe,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",wv(D,zCe)),p.join("")};var p,oq=/[#\/\?@]/g,jCe=/[#\?:]/g,UCe=/[#\?]/g,HCe=/[#\?@]/g,zCe=/#/g;function Ev(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function fu(p){p.g||(p.g=new Map,p.h=0,p.i&&function VCe(p,b){if(p){p=p.split("&");for(var D=0;D<p.length;D++){var O=p[D].indexOf("="),oe=null;if(0<=O){var me=p[D].substring(0,O);oe=p[D].substring(O+1)}else me=p[D];b(me,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}(p.i,function(b,D){p.add(decodeURIComponent(b.replace(/\+/g," ")),D)}))}function aq(p,b){fu(p),b=ug(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function lq(p,b){return fu(p),b=ug(p,b),p.g.has(b)}function cq(p,b,D){aq(p,b),0<D.length&&(p.i=null,p.g.set(ug(p,b),w(D)),p.h+=D.length)}function ug(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function pu(p,b,D,O,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),O(D)}catch{}}function GCe(){this.g=new xCe}function KCe(p,b,D){const O=D||"";try{iq(p,function(oe,me){let je=oe;c(oe)&&(je=R1(oe)),b.push(O+me+"="+encodeURIComponent(je))})}catch(oe){throw b.push(O+"type="+encodeURIComponent("_badmap")),oe}}function Cv(p){this.l=p.Ub||null,this.j=p.eb||!1}function zD(p,b){ns.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function uq(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Dv(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Tv(p)}function Tv(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function dq(p){let b="";return ee(p,function(D,O){b+=O,b+=":",b+=D,b+="\r\n"}),b}function z1(p,b,D){e:{for(O in D){var O=!1;break e}O=!0}O||(D=dq(D),"string"==typeof p?null!=D&&encodeURIComponent(String(D)):ti(p,b,D))}function wi(p){ns.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ev.prototype).add=function(p,b){fu(this),this.i=null,p=ug(this,p);var D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(b),this.h+=1,this},n.forEach=function(p,b){fu(this),this.g.forEach(function(D,O){D.forEach(function(oe){p.call(b,oe,O,this)},this)},this)},n.na=function(){fu(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),D=[];for(let O=0;O<b.length;O++){const oe=p[O];for(let me=0;me<oe.length;me++)D.push(b[O])}return D},n.V=function(p){fu(this);let b=[];if("string"==typeof p)lq(this,p)&&(b=b.concat(this.g.get(ug(this,p))));else{p=Array.from(this.g.values());for(let D=0;D<p.length;D++)b=b.concat(p[D])}return b},n.set=function(p,b){return fu(this),this.i=null,lq(this,p=ug(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},n.get=function(p,b){return p&&0<(p=this.V(p)).length?String(p[0]):b},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var D=0;D<b.length;D++){var O=b[D];const me=encodeURIComponent(String(O)),je=this.V(O);for(O=0;O<je.length;O++){var oe=me;""!==je[O]&&(oe+="="+encodeURIComponent(String(je[O]))),p.push(oe)}}return this.i=p.join("&")},v(Cv,P1),Cv.prototype.g=function(){return new zD(this.l,this.j)},Cv.prototype.i=(p={},function(){return p}),v(zD,ns),(n=zD.prototype).open=function(p,b){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,Tv(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dv(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Tv(this)),this.g&&(this.readyState=3,Tv(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uq(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?Dv(this):Tv(this),3==this.readyState&&uq(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Dv(this))},n.Qa=function(p){this.g&&(this.response=p,Dv(this))},n.ga=function(){this.g&&Dv(this)},n.setRequestHeader=function(p,b){this.u.append(p,b)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var D=b.next();!D.done;)p.push((D=D.value)[0]+": "+D[1]),D=b.next();return p.join("\r\n")},Object.defineProperty(zD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),v(wi,ns);var ZCe=/^https?$/i,YCe=["POST","PUT"];function hq(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,fq(p),$D(p)}function fq(p){p.A||(p.A=!0,ys(p,"complete"),ys(p,"error"))}function pq(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=Nl(p)||2!=p.Z()))if(p.u&&4==Nl(p))F9(p.Ea,0,p);else if(ys(p,"readystatechange"),4==Nl(p)){p.h=!1;try{const je=p.Z();e:switch(je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var D;if(!(D=b)){var O;if(O=0===je){var oe=String(p.D).match(rq)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),O=!ZCe.test(oe?oe.toLowerCase():"")}D=O}if(D)ys(p,"complete"),ys(p,"success");else{p.m=6;try{var me=2<Nl(p)?p.g.statusText:""}catch{me=""}p.l=me+" ["+p.Z()+"]",fq(p)}}finally{$D(p)}}}function $D(p,b){if(p.g){gq(p);const D=p.g,O=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||ys(p,"ready");try{D.onreadystatechange=O}catch{}}}function gq(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function Nl(p){return p.g?p.g.readyState:0}function mq(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Iv(p,b,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||b}function _q(p){this.Aa=0,this.i=[],this.j=new yv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Iv("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Iv("baseRetryDelayMs",5e3,p),this.cb=Iv("retryDelaySeedMs",1e4,p),this.Wa=Iv("forwardChannelMaxRetries",2,p),this.wa=Iv("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new X9(p&&p.concurrentRequestLimit),this.Da=new GCe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function $1(p){if(yq(p),3==p.G){var b=p.U++,D=Ol(p.I);if(ti(D,"SID",p.K),ti(D,"RID",b),ti(D,"TYPE","terminate"),Sv(p,D),(b=new hu(p,p.j,b)).L=2,b.v=HD(Ol(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!D&&a.Image&&((new Image).src=b.v,D=!0),D||(b.g=Sq(b.j,null),b.g.ea(b.v)),b.F=Date.now(),BD(b)}Tq(p)}function WD(p){p.g&&(q1(p),p.g.cancel(),p.g=null)}function yq(p){WD(p),p.u&&(a.clearTimeout(p.u),p.u=null),GD(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function qD(p){if(!J9(p.h)&&!p.s){p.s=!0;var b=p.Ga;Le||Yt(),We||(Le(),We=!0),qe.add(b,p),p.B=0}}function vq(p,b){var D;D=b?b.l:p.U++;const O=Ol(p.I);ti(O,"SID",p.K),ti(O,"RID",D),ti(O,"AID",p.T),Sv(p,O),p.m&&p.o&&z1(O,p.m,p.o),D=new hu(p,p.j,D,p.B+1),null===p.m&&(D.H=p.o),b&&(p.i=b.D.concat(p.i)),b=bq(p,D,1e3),D.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),H1(p.h,D),V1(D,O,b)}function Sv(p,b){p.H&&ee(p.H,function(D,O){ti(b,O,D)}),p.l&&iq({},function(D,O){ti(b,O,D)})}function bq(p,b,D){D=Math.min(p.i.length,D);var O=p.l?m(p.l.Na,p.l,p):null;e:{var oe=p.i;let me=-1;for(;;){const je=["count="+D];-1==me?0<D?(me=oe[0].g,je.push("ofs="+me)):me=0:je.push("ofs="+me);let Fn=!0;for(let Rr=0;Rr<D;Rr++){let un=oe[Rr].g;const is=oe[Rr].map;if(un-=me,0>un)me=Math.max(0,oe[Rr].g-100),Fn=!1;else try{KCe(is,je,"req"+un+"_")}catch{O&&O(is)}}if(Fn){O=je.join("&");break e}}}return p=p.i.splice(0,D),b.D=p,O}function wq(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;Le||Yt(),We||(Le(),We=!0),qe.add(b,p),p.v=0}}function W1(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=_v(m(p.Fa,p),Dq(p,p.v)),p.v++,0))}function q1(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function Eq(p){p.g=new hu(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var b=Ol(p.qa);ti(b,"RID","rpc"),ti(b,"SID",p.K),ti(b,"AID",p.T),ti(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&ti(b,"TO",p.ja),ti(b,"TYPE","xmlhttp"),Sv(p,b),p.m&&p.o&&z1(b,p.m,p.o),p.L&&(p.g.I=p.L);var D=p.g;p=p.ia,D.L=1,D.v=HD(Ol(b)),D.m=null,D.P=!0,Z9(D,p)}function GD(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function Cq(p,b){var D=null;if(p.g==b){GD(p),q1(p),p.g=null;var O=2}else{if(!U1(p.h,b))return;D=b.D,tq(p.h,b),O=1}if(0!=p.G)if(b.o)if(1==O){D=b.m?b.m.length:0,b=Date.now()-b.F;var oe=p.B;ys(O=FD(),new W9(O,D)),qD(p)}else wq(p);else if(3==(oe=b.s)||0==oe&&0<b.X||!(1==O&&function XCe(p,b){return!(eq(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=b.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=_v(m(p.Ga,p,b),Dq(p,p.B)),p.B++,0)))}(p,b)||2==O&&W1(p)))switch(D&&0<D.length&&(b=p.h,b.i=b.i.concat(D)),oe){case 1:mh(p,5);break;case 4:mh(p,10);break;case 3:mh(p,6);break;default:mh(p,2)}}function Dq(p,b){let D=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(D*=2),D*b}function mh(p,b){if(p.j.info("Error code "+b),2==b){var D=m(p.fb,p),O=p.Xa;const oe=!O;O=new gh(O||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||jD(O,"https"),HD(O),oe?function WCe(p,b){const D=new yv;if(a.Image){const O=new Image;O.onload=y(pu,D,"TestLoadImage: loaded",!0,b,O),O.onerror=y(pu,D,"TestLoadImage: error",!1,b,O),O.onabort=y(pu,D,"TestLoadImage: abort",!1,b,O),O.ontimeout=y(pu,D,"TestLoadImage: timeout",!1,b,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=p}else b(!1)}(O.toString(),D):function qCe(p,b){new yv;const O=new AbortController,oe=setTimeout(()=>{O.abort(),pu(0,0,!1,b)},1e4);fetch(p,{signal:O.signal}).then(me=>{clearTimeout(oe),pu(0,0,!!me.ok,b)}).catch(()=>{clearTimeout(oe),pu(0,0,!1,b)})}(O.toString(),D)}else vs(2);p.G=0,p.l&&p.l.sa(b),Tq(p),yq(p)}function Tq(p){if(p.G=0,p.ka=[],p.l){const b=nq(p.h);(0!=b.length||0!=p.i.length)&&(E(p.ka,b),E(p.ka,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.ra()}}function Iq(p,b,D){var O=D instanceof gh?Ol(D):new gh(D);if(""!=O.g)b&&(O.g=b+"."+O.g),UD(O,O.s);else{var oe=a.location;O=oe.protocol,b=b?b+"."+oe.hostname:oe.hostname,oe=+oe.port;var me=new gh(null);O&&jD(me,O),b&&(me.g=b),oe&&UD(me,oe),D&&(me.l=D),O=me}return b=p.ya,(D=p.D)&&b&&ti(O,D,b),ti(O,"VER",p.la),Sv(p,O),O}function Sq(p,b,D){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new wi(p.Ca&&!p.pa?new Cv({eb:D}):p.pa)).Ha(p.J),b}function Aq(){}function KD(){}function uo(p,b){ns.call(this),this.g=new _q(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!S(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!S(b)&&(this.g.D=b,null!==(p=this.h)&&b in p&&b in(p=this.h)&&delete p[b]),this.j=new dg(this)}function xq(p){O1.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const D in b){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,b=null!==b&&p in b?b[p]:void 0),this.data=b}else this.data=p}function Mq(){N1.call(this),this.status=1}function dg(p){this.g=p}(n=wi.prototype).Ha=function(p){this.J=p},n.ea=function(p,b,D,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():F1.g(),this.v=function j9(p){return p.h||(p.h=p.i())}(this.o?this.o:F1),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(me){return void hq(this,me)}if(p=D||"",D=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var oe in O)D.set(oe,O[oe]);else{if("function"!=typeof O.keys||"function"!=typeof O.get)throw Error("Unknown input type for opt_headers: "+String(O));for(const me of O.keys())D.set(me,O.get(me))}O=Array.from(D.keys()).find(me=>"content-type"==me.toLowerCase()),oe=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(YCe,b,void 0))||O||oe||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,je]of D)this.g.setRequestHeader(me,je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gq(this),this.u=!0,this.g.send(p),this.u=!1}catch(me){hq(this,me)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,ys(this,"complete"),ys(this,"abort"),$D(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$D(this,!0)),wi.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pq(this):this.bb())},n.bb=function(){pq(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Nl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&0==b.indexOf(p)&&(b=b.substring(p.length)),ACe(b)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=_q.prototype).la=8,n.G=1,n.connect=function(p,b,D,O){vs(0),this.W=p,this.H=b||{},D&&void 0!==O&&(this.H.OSID=D,this.H.OAID=O),this.F=this.X,this.I=Iq(this,null,this.W),qD(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const oe=new hu(this,this.j,p);let me=this.o;if(this.S&&(me?(me=M(me),U(me,this.S)):me=this.S),null!==this.m||this.O||(oe.H=me,me=null),this.P)e:{for(var b=0,D=0;D<this.i.length;D++){var O=this.i[D];if(void 0===(O="__data__"in O.map&&"string"==typeof(O=O.map.__data__)?O.length:void 0))break;if(4096<(b+=O)){b=D;break e}if(4096===b||D===this.i.length-1){b=D+1;break e}}b=1e3}else b=1e3;b=bq(this,oe,b),ti(D=Ol(this.I),"RID",p),ti(D,"CVER",22),this.D&&ti(D,"X-HTTP-Session-Id",this.D),Sv(this,D),me&&(this.O?b="headers="+encodeURIComponent(String(dq(me)))+"&"+b:this.m&&z1(D,this.m,me)),H1(this.h,oe),this.Ua&&ti(D,"TYPE","init"),this.P?(ti(D,"$req",b),ti(D,"SID","null"),oe.T=!0,V1(oe,D,null)):V1(oe,D,b),this.G=2}}else 3==this.G&&(p?vq(this,p):0==this.i.length||J9(this.h)||vq(this))},n.Fa=function(){if(this.u=null,Eq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=_v(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vs(10),WD(this),Eq(this))},n.Za=function(){null!=this.C&&(this.C=null,WD(this),W1(this),vs(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),vs(2)):(this.j.info("Failed to ping google.com"),vs(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Aq.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},KD.prototype.g=function(p,b){return new uo(p,b)},v(uo,ns),uo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},uo.prototype.close=function(){$1(this.g)},uo.prototype.o=function(p){var b=this.g;if("string"==typeof p){var D={};D.__data__=p,p=D}else this.u&&((D={}).__data__=R1(p),p=D);b.i.push(new class{constructor(p,b){this.g=p,this.map=b}}(b.Ya++,p)),3==b.G&&qD(b)},uo.prototype.N=function(){this.g.l=null,delete this.j,$1(this.g),delete this.g,uo.aa.N.call(this)},v(xq,O1),v(Mq,N1),v(dg,Aq),dg.prototype.ua=function(){ys(this.g,"a")},dg.prototype.ta=function(p){ys(this.g,new xq(p))},dg.prototype.sa=function(p){ys(this.g,new Mq)},dg.prototype.ra=function(){ys(this.g,"b")},KD.prototype.createWebChannel=KD.prototype.g,uo.prototype.send=uo.prototype.o,uo.prototype.open=uo.prototype.m,uo.prototype.close=uo.prototype.close,nj=dl.createWebChannelTransport=function(){return new KD},tj=dl.getStatEventTarget=function(){return FD()},ej=dl.Event=fh,dx=dl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},LD.NO_ERROR=0,LD.TIMEOUT=8,LD.HTTP_ERROR=6,Y0=dl.ErrorCode=LD,q9.COMPLETE="complete",J3=dl.EventType=q9,U9.EventType=gv,gv.OPEN="a",gv.CLOSE="b",gv.ERROR="c",gv.MESSAGE="d",ns.prototype.listen=ns.prototype.K,D_=dl.WebChannel=U9,X3=dl.FetchXmlHttpFactory=Cv,wi.prototype.listenOnce=wi.prototype.L,wi.prototype.getLastError=wi.prototype.Ka,wi.prototype.getLastErrorCode=wi.prototype.Ba,wi.prototype.getStatus=wi.prototype.Z,wi.prototype.getResponseJson=wi.prototype.Oa,wi.prototype.getResponseText=wi.prototype.oa,wi.prototype.send=wi.prototype.ea,wi.prototype.setWithCredentials=wi.prototype.Ha,Q3=dl.XhrIo=wi}).apply(typeof Z0<"u"?Z0:typeof self<"u"?self:typeof window<"u"?window:{});const ij="@firebase/firestore";class mr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");let Xf="10.12.1";const Tc=new Ea.Yd("@firebase/firestore");function Jf(){return Tc.logLevel}function Me(n,...t){if(Tc.logLevel<=Ea.in.DEBUG){const e=t.map(hx);Tc.debug(`Firestore (${Xf}): ${n}`,...e)}}function Oi(n,...t){if(Tc.logLevel<=Ea.in.ERROR){const e=t.map(hx);Tc.error(`Firestore (${Xf}): ${n}`,...e)}}function Ns(n,...t){if(Tc.logLevel<=Ea.in.WARN){const e=t.map(hx);Tc.warn(`Firestore (${Xf}): ${n}`,...e)}}function hx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const t=`FIRESTORE (${Xf}) INTERNAL ASSERTION FAILED: `+n;throw Oi(t),new Error(t)}function tt(n,t){n||Qe()}function Be(n,t){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends mn.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class rj{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Mre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(mr.UNAUTHENTICATED))}shutdown(){}}class kre{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Rre{constructor(t){this.t=t,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let o=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sr,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;t.enqueueRetryable((0,ye.Z)(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sr)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt("string"==typeof i.accessToken),new rj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return tt(null===t||"string"==typeof t),new mr(t)}}class Pre{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=mr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ore{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Pre(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sj{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nre{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const i=s=>{null!=s.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(tt("string"==typeof e.token),this.R=e.token,new sj(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Fre(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class oj{static newId(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=Fre(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function bt(n,t){return n<t?-1:n>t?1:0}function ep(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function aj(n){return n+"\0"}class oi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ie(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ie(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ie(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ie(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return oi.fromMillis(Date.now())}static fromDate(t){return oi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new oi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?bt(this.nanoseconds,t.nanoseconds):bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{constructor(t){this.timestamp=t}static fromTimestamp(t){return new it(t)}static min(){return new it(new oi(0,0))}static max(){return new it(new oi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class T_{constructor(t,e,i){void 0===e?e=0:e>t.length&&Qe(),void 0===i?i=t.length-e:i>t.length-e&&Qe(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===T_.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof T_?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class qt extends T_{construct(t,e,i){return new qt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ie(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new qt(e)}static emptyPath(){return new qt([])}}const Lre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends T_{construct(t,e,i){return new Zn(t,e,i)}static isValidIdentifier(t){return Lre.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ie(de.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if("\\"===a){if(r+1===t.length)throw new Ie(de.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ie(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ie(de.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Zn(e)}static emptyPath(){return new Zn([])}}class Ue{constructor(t){this.path=t}static fromPath(t){return new Ue(qt.fromString(t))}static fromName(t){return new Ue(qt.fromString(t).popFirst(5))}static empty(){return new Ue(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===qt.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return qt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ue(new qt(t.slice()))}}class tp{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function fx(n){return n.fields.find(t=>2===t.kind)}function hd(n){return n.fields.filter(t=>2!==t.kind)}tp.UNKNOWN_ID=-1;class fd{constructor(t,e){this.fieldPath=t,this.kind=e}}class np{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new np(0,to.min())}}function lj(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=it.fromTimestamp(1e9===i?new oi(e+1,0):new oi(e,i));return new to(r,Ue.empty(),t)}function cj(n){return new to(n.readTime,n.key,-1)}class to{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new to(it.min(),Ue.empty(),-1)}static max(){return new to(it.max(),Ue.empty(),-1)}}function px(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Ue.comparator(n.documentKey,t.documentKey),0!==e?e:bt(n.largestBatchId,t.largestBatchId))}const uj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Ic(n){return gx.apply(this,arguments)}function gx(){return(gx=(0,ye.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==uj)throw n;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ce{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ce((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ce?e:ce.resolve(e)}catch(e){return ce.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.reject(e)}static resolve(t){return new ce((e,i)=>{e(t)})}static reject(t){return new ce((e,i)=>{i(t)})}static waitFor(t){return new ce((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},l=>i(l))}),o=!0,s===r&&e()})}static or(t){let e=ce.resolve(!1);for(const i of t)e=e.next(r=>r?ce.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new ce((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;e(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,e){return new ce((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class Q0{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new sr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new I_(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=mx(i.target.error);this.V.reject(new I_(t,r))}}static open(t,e,i,r){try{return new Q0(e,t.transaction(r,i))}catch(s){throw new I_(e,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Me("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Ure(e)}}class Ca{constructor(t,e,i){this.name=t,this.version=e,this.p=i,12.2===Ca.S((0,mn.z$)())&&Oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Me("SimpleDb","Removing database:",t),pd(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,mn.hl)())return!1;if(Ca.C())return!0;const t=(0,mn.z$)(),e=Ca.S(t),i=0<e&&e<10,r=hj(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.v)}static F(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(t){var e=this;return(0,ye.Z)(function*(){return e.db||(Me("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new I_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new Ie(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ie(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new I_(t,a))},s.onupgradeneeded=o=>{Me("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',o.oldVersion),e.p.O(o.target.result,s.transaction,o.oldVersion,e.version).next(()=>{Me("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.N&&(e.db.onversionchange=i=>e.N(i)),e.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,ye.Z)(function*(){const o="readonly"===e;let a=0;for(;;){++a;try{s.db=yield s.M(t);const l=Q0.open(s.db,t,o?"readonly":"readwrite",i),c=r(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),ce.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Me("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function hj(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class jre{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return pd(this.B.delete())}}class I_ extends Ie{constructor(t,e){super(de.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Sc(n){return"IndexedDbTransactionError"===n.name}class Ure{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Me("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),pd(i)}add(t){return Me("SimpleDb","ADD",this.store.name,t,t),pd(this.store.add(t))}get(t){return pd(this.store.get(t)).next(e=>(void 0===e&&(e=null),Me("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Me("SimpleDb","DELETE",this.store.name,t),pd(this.store.delete(t))}count(){return Me("SimpleDb","COUNT",this.store.name),pd(this.store.count())}U(t,e){const i=this.options(t,e),r=i.index?this.store.index(i.index):this.store;if("function"==typeof r.getAll){const s=r.getAll(i.range);return new ce((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ce((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(t,e){Me("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Y(t){const e=this.cursor({});return new ce((i,r)=>{e.onerror=s=>{const o=mx(s.target.error);r(o)},e.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(t,e){const i=[];return new ce((r,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new jre(a),c=e(a.primaryKey,a.value,l);if(c instanceof ce){const u=c.catch(f=>(l.done(),ce.reject(f)));i.push(u)}l.isDone?r():null===l.K?a.continue():a.continue(l.K)}}).next(()=>ce.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function pd(n){return new ce((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=mx(i.target.error);e(r)}})}let fj=!1;function mx(n){const t=Ca.S((0,mn.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fj||(fj=!0,setTimeout(()=>{throw i},0)),i}}return n}class Hre{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var e=this;Me("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,ye.Z)(function*(){e.task=null;try{Me("IndexBackfiller",`Documents written: ${yield e.Z.ee()}`)}catch(i){Sc(i)?Me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield Ic(i)}yield e.X(6e4)}))}}class zre{constructor(t,e){this.localStore=t,this.persistence=e}ee(t=50){var e=this;return(0,ye.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.te(i,t))})()}te(t,e){const i=new Set;let r=e,s=!0;return ce.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(null!==o&&!i.has(o))return Me("IndexBackfiller",`Processing collection: ${o}`),this.ne(t,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>e-r)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.re(r,s)).next(a=>(Me("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}re(t,e){let i=t;return e.changes.forEach((r,s)=>{const o=cj(s);px(o,i)>0&&(i=o)}),new to(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let no=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function S_(n){return null==n}function A_(n){return 0===n&&1/n==-1/0}function pj(n){return"number"==typeof n&&Number.isInteger(n)&&!A_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Kr(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=gj(t)),t=$re(n.get(e),t);return gj(t)}function $re(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function gj(n){return n+"\x01\x01"}function Da(n){const t=n.length;if(tt(t>=2),2===t)return tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const o=n.indexOf("\x01",s);switch((o<0||o>e)&&Qe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:Qe()}s=o+2}return new qt(i)}const mj=["userId","batchId"];function X0(n,t){return[n,Kr(t)]}function _j(n,t,e){return[n,Kr(t),e]}const Wre={},qre=["prefixPath","collectionGroup","readTime","documentId"],Gre=["prefixPath","collectionGroup","documentId"],Kre=["collectionGroup","readTime","prefixPath","documentId"],Zre=["canonicalId","targetId"],Yre=["targetId","path"],Qre=["path","targetId"],Xre=["collectionId","parent"],Jre=["indexId","uid"],ese=["uid","sequenceNumber"],tse=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nse=["indexId","uid","orderedDocumentKey"],ise=["userId","collectionPath","documentId"],rse=["userId","collectionPath","largestBatchId"],sse=["userId","collectionGroup","largestBatchId"],yj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ose=[...yj,"documentOverlays"],vj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bj=vj,wj=[...bj,"indexConfiguration","indexState","indexEntries"],ase=wj;class _x extends dj{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function _r(n,t){const e=Be(n);return Ca.F(e._e,t)}function Ej(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Ac(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Dj(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Un{constructor(t,e){this.comparator=t,this.root=e||Ar.EMPTY}insert(t,e){return new Un(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(t){return new Un(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new J0(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new J0(this.root,t,this.comparator,!1)}getReverseIterator(){return new J0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new J0(this.root,t,this.comparator,!0)}}class J0{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ar{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Ar.RED,this.left=r??Ar.EMPTY,this.right=s??Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Ar(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ar.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const t=this.left.check();if(t!==this.right.check())throw Qe();return t+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1,Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Ar(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(t){this.comparator=t,this.data=new Un(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Tj(this.data.getIterator())}getIteratorFrom(t){return new Tj(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof kn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new kn(this.comparator);return e.data=t,e}}class Tj{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ip(n){return n.hasNext()?n.getNext():void 0}class Fs{constructor(t){this.fields=t,t.sort(Zn.comparator)}static empty(){return new Fs([])}unionWith(t){let e=new kn(Zn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Fs(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ep(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Ij extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class or{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ij("Invalid base64 string: "+s):s}}(t);return new or(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new or(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}or.EMPTY_BYTE_STRING=new or("");const cse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(n){if(tt(!!n),"string"==typeof n){let t=0;const e=cse.exec(n);if(tt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_i(n.seconds),nanos:_i(n.nanos)}}function _i(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fl(n){return"string"==typeof n?or.fromBase64String(n):or.fromUint8Array(n)}function eE(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function tE(n){const t=n.mapValue.fields.__previous_value__;return eE(t)?tE(t):t}function x_(n){const t=hl(n.mapValue.fields.__local_write_time__.timestampValue);return new oi(t.seconds,t.nanos)}class use{constructor(t,e,i,r,s,o,a,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class xc{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new xc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof xc&&t.projectId===this.projectId&&t.database===this.database}}const Mc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nE={nullValue:"NULL_VALUE"};function kc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eE(n)?4:Mj(n)?9007199254740991:10:Qe()}function Ta(n,t){if(n===t)return!0;const e=kc(n);if(e!==kc(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return x_(n).isEqual(x_(t));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=hl(r.timestampValue),a=hl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return s=t,fl(n.bytesValue).isEqual(fl(s.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return _i(r.geoPointValue.latitude)===_i(s.geoPointValue.latitude)&&_i(r.geoPointValue.longitude)===_i(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return _i(r.integerValue)===_i(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=_i(r.doubleValue),a=_i(s.doubleValue);return o===a?A_(o)===A_(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return ep(n.arrayValue.values||[],t.arrayValue.values||[],Ta);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Ej(o)!==Ej(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ta(o[l],a[l])))return!1;return!0}(n,t);default:return Qe()}var s}function M_(n,t){return void 0!==(n.values||[]).find(e=>Ta(e,t))}function Rc(n,t){if(n===t)return 0;const e=kc(n),i=kc(t);if(e!==i)return bt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_i(s.integerValue||s.doubleValue),l=_i(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return Sj(n.timestampValue,t.timestampValue);case 4:return Sj(x_(n),x_(t));case 5:return bt(n.stringValue,t.stringValue);case 6:return function(s,o){const a=fl(s),l=fl(o);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=bt(a[c],l[c]);if(0!==u)return u}return bt(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){const a=bt(_i(s.latitude),_i(o.latitude));return 0!==a?a:bt(_i(s.longitude),_i(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Rc(a[c],l[c]);if(u)return u}return bt(a.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Mc.mapValue&&o===Mc.mapValue)return 0;if(s===Mc.mapValue)return 1;if(o===Mc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const m=bt(l[f],u[f]);if(0!==m)return m;const y=Rc(a[l[f]],c[u[f]]);if(0!==y)return y}return bt(l.length,u.length)}(n.mapValue,t.mapValue);default:throw Qe()}}function Sj(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return bt(n,t);const e=hl(n),i=hl(t),r=bt(e.seconds,i.seconds);return 0!==r?r:bt(e.nanos,i.nanos)}function rp(n){return yx(n)}function yx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=hl(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fl(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const s of e.values||[])r?r=!1:i+=",",i+=yx(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${yx(e.fields[o])}`;return r+"}"}(n.mapValue):Qe()}function gd(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function vx(n){return!!n&&"integerValue"in n}function k_(n){return!!n&&"arrayValue"in n}function Aj(n){return!!n&&"nullValue"in n}function xj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rE(n){return!!n&&"mapValue"in n}function R_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Ac(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=R_(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=R_(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Mj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dse(n){return"nullValue"in n?nE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gd(xc.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function hse(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gd(xc.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Mc:Qe()}function kj(n,t){const e=Rc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function Rj(n,t){const e=Rc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class xr{constructor(t){this.value=t}static empty(){return new xr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!rE(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=R_(e)}setAll(t){let e=Zn.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=R_(o):r.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());rE(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ta(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];rE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Ac(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new xr(R_(this.value))}}function Pj(n){const t=[];return Ac(n.fields,(e,i)=>{const r=new Zn([e]);if(rE(i)){const s=Pj(i.mapValue).fields;if(0===s.length)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Fs(t)}class Yn{constructor(t,e,i,r,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Yn(t,0,it.min(),it.min(),it.min(),xr.empty(),0)}static newFoundDocument(t,e,i,r){return new Yn(t,1,e,it.min(),i,r,0)}static newNoDocument(t,e){return new Yn(t,2,e,it.min(),it.min(),xr.empty(),0)}static newUnknownDocument(t,e){return new Yn(t,3,e,it.min(),it.min(),xr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(it.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Yn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pc{constructor(t,e){this.position=t,this.inclusive=e}}function Oj(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],o=n.position[r];if(i=s.field.isKeyField()?Ue.comparator(Ue.fromName(o.referenceValue),e.key):Rc(o,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Nj(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ta(n.position[e],t.position[e]))return!1;return!0}class P_{constructor(t,e="asc"){this.field=t,this.dir=e}}function fse(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class Fj{}class Gt extends Fj{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new pse(t,e,i):"array-contains"===e?new _se(t,i):"in"===e?new Hj(t,i):"not-in"===e?new yse(t,i):"array-contains-any"===e?new vse(t,i):new Gt(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new gse(t,i):new mse(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Rc(e,this.value)):null!==e&&kc(this.value)===kc(e)&&this.matchesComparison(Rc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends Fj{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new wn(t,e)}matches(t){return sp(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sp(n){return"and"===n.op}function bx(n){return"or"===n.op}function wx(n){return Lj(n)&&sp(n)}function Lj(n){for(const t of n.filters)if(t instanceof wn)return!1;return!0}function Ex(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+rp(n.value);if(wx(n))return n.filters.map(t=>Ex(t)).join(",");{const t=n.filters.map(e=>Ex(e)).join(",");return`${n.op}(${t})`}}function Vj(n,t){return n instanceof Gt?(i=n,(r=t)instanceof Gt&&i.op===r.op&&i.field.isEqual(r.field)&&Ta(i.value,r.value)):n instanceof wn?function(i,r){return r instanceof wn&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((s,o,a)=>s&&Vj(o,r.filters[a]),!0)}(n,t):void Qe();var i,r}function Bj(n,t){const e=n.filters.concat(t);return wn.create(e,n.op)}function jj(n){return n instanceof Gt?`${(e=n).field.canonicalString()} ${e.op} ${rp(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(jj).join(" ,")+"}"}(n):"Filter";var e}class pse extends Gt{constructor(t,e,i){super(t,e,i),this.key=Ue.fromName(i.referenceValue)}matches(t){const e=Ue.comparator(t.key,this.key);return this.matchesComparison(e)}}class gse extends Gt{constructor(t,e){super(t,"in",e),this.keys=Uj(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class mse extends Gt{constructor(t,e){super(t,"not-in",e),this.keys=Uj(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Uj(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Ue.fromName(i.referenceValue))}class _se extends Gt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return k_(e)&&M_(e.arrayValue,this.value)}}class Hj extends Gt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&M_(this.value.arrayValue,e)}}class yse extends Gt{constructor(t,e){super(t,"not-in",e)}matches(t){if(M_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!M_(this.value.arrayValue,e)}}class vse extends Gt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!k_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>M_(this.value.arrayValue,i))}}class bse{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Cx(n,t=null,e=[],i=[],r=null,s=null,o=null){return new bse(n,t,e,i,r,s,o)}function md(n){const t=Be(n);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Ex(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),S_(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>rp(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>rp(i)).join(",")),t.ue=e}return t.ue}function O_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!fse(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Vj(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Nj(n.startAt,t.startAt)&&Nj(n.endAt,t.endAt)}function sE(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function oE(n,t){return n.filters.filter(e=>e instanceof Gt&&e.field.isEqual(t))}function zj(n,t,e){let i=nE,r=!0;for(const s of oE(n,t)){let o=nE,a=!0;switch(s.op){case"<":case"<=":o=dse(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=nE}kj({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const o=e.position[s];kj({value:i,inclusive:r},{value:o,inclusive:e.inclusive})<0&&(i=o,r=e.inclusive);break}return{value:i,inclusive:r}}function $j(n,t,e){let i=Mc,r=!0;for(const s of oE(n,t)){let o=Mc,a=!0;switch(s.op){case">=":case">":o=hse(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Mc}Rj({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const o=e.position[s];Rj({value:i,inclusive:r},{value:o,inclusive:e.inclusive})>0&&(i=o,r=e.inclusive);break}return{value:i,inclusive:r}}class pl{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function Wj(n,t,e,i,r,s,o,a){return new pl(n,t,e,i,r,s,o,a)}function op(n){return new pl(n)}function qj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Dx(n){return null!==n.collectionGroup}function ap(n){const t=Be(n);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kn(Zn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new P_(s,i))}),e.has(Zn.keyField().canonicalString())||t.ce.push(new P_(Zn.keyField(),i))}return t.ce}function Zr(n){const t=Be(n);return t.le||(t.le=function Kj(n,t){if("F"===n.limitType)return Cx(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>new P_(r.field,"desc"===r.dir?"asc":"desc"));const e=n.endAt?new Pc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Pc(n.startAt.position,n.startAt.inclusive):null;return Cx(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}(t,ap(n))),t.le}function Tx(n,t){const e=n.filters.concat([t]);return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function aE(n,t,e){return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function N_(n,t){return O_(Zr(n),Zr(t))&&n.limitType===t.limitType}function Zj(n){return`${md(Zr(n))}|lt:${n.limitType}`}function lp(n){return`Query(target=${function(e){let i=e.path.canonicalString();return null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>jj(r)).join(", ")}]`),S_(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>rp(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>rp(r)).join(",")),`Target(${i})`}(Zr(n))}; limitType=${n.limitType})`}function F_(n,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Ue.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(const s of ap(i))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&(r=t,!((i=n).startAt&&!function(o,a,l){const c=Oj(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,ap(i),r)||i.endAt&&!function(o,a,l){const c=Oj(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,ap(i),r)));var i,r}function Yj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qj(n){return(t,e)=>{let i=!1;for(const r of ap(n)){const s=wse(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function wse(n,t,e){const i=n.field.isKeyField()?Ue.comparator(t.key,e.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Rc(l,c):Qe()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Qe()}}class gl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ac(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Dj(this.inner)}size(){return this.innerSize}}const Ese=new Un(Ue.comparator);function Ls(){return Ese}const Xj=new Un(Ue.comparator);function L_(...n){let t=Xj;for(const e of n)t=t.insert(e.key,e);return t}function Jj(n){let t=Xj;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ia(){return V_()}function eU(){return V_()}function V_(){return new gl(n=>n.toString(),(n,t)=>n.isEqual(t))}const Cse=new Un(Ue.comparator),Dse=new kn(Ue.comparator);function St(...n){let t=Dse;for(const e of n)t=t.add(e);return t}const Tse=new kn(bt);function Ix(){return Tse}function tU(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:A_(t)?"-0":t}}function nU(n){return{integerValue:""+n}}function iU(n,t){return pj(t)?nU(t):tU(n,t)}class lE{constructor(){this._=void 0}}function Ise(n,t,e){return n instanceof cp?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&eE(s)&&(s=tE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof _d?sU(n,t):n instanceof yd?oU(n,t):function(r,s){const o=rU(r,s),a=aU(o)+aU(r.Pe);return vx(o)&&vx(r.Pe)?nU(a):tU(r.serializer,a)}(n,t)}function Sse(n,t,e){return n instanceof _d?sU(n,t):n instanceof yd?oU(n,t):e}function rU(n,t){return n instanceof up?vx(i=t)||(s=i)&&"doubleValue"in s?t:{integerValue:0}:null;var i,s}class cp extends lE{}class _d extends lE{constructor(t){super(),this.elements=t}}function sU(n,t){const e=lU(t);for(const i of n.elements)e.some(r=>Ta(r,i))||e.push(i);return{arrayValue:{values:e}}}class yd extends lE{constructor(t){super(),this.elements=t}}function oU(n,t){let e=lU(t);for(const i of n.elements)e=e.filter(r=>!Ta(r,i));return{arrayValue:{values:e}}}class up extends lE{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function aU(n){return _i(n.integerValue||n.doubleValue)}function lU(n){return k_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class B_{constructor(t,e){this.field=t,this.transform=e}}class xse{constructor(t,e){this.version=t,this.transformResults=e}}class ai{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ai}static exists(t){return new ai(void 0,t)}static updateTime(t){return new ai(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function cE(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class uE{}function cU(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new hp(n.key,ai.none()):new dp(n.key,n.data,ai.none());{const e=n.data,i=xr.empty();let r=new kn(Zn.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);null===o&&s.length>1&&(s=s.popLast(),o=e.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new ml(n.key,i,new Fs(r.toArray()),ai.none())}}function Mse(n,t,e){n instanceof dp?function(r,s,o){const a=r.value.clone(),l=hU(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof ml?function(r,s,o){if(!cE(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=hU(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(dU(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function j_(n,t,e,i){return n instanceof dp?function(s,o,a,l){if(!cE(s.precondition,o))return a;const c=s.value.clone(),u=fU(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,t,e,i):n instanceof ml?function(s,o,a,l){if(!cE(s.precondition,o))return a;const c=fU(s.fieldTransforms,l,o),u=o.data;return u.setAll(dU(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,t,e,i):(a=e,cE(n.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function kse(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=rU(i.transform,r||null);null!=s&&(null===e&&(e=xr.empty()),e.set(i.field,s))}return e||null}function uU(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&ep(i,r,(s,o)=>function Ase(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(i=n.transform)instanceof _d&&r instanceof _d||i instanceof yd&&r instanceof yd?ep(i.elements,r.elements,Ta):i instanceof up&&r instanceof up?Ta(i.Pe,r.Pe):i instanceof cp&&r instanceof cp);var i,r}(s,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var i,r}class dp extends uE{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ml extends uE{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dU(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function hU(n,t,e){const i=new Map;tt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,Sse(o,a,e[r]))}return i}function fU(n,t,e){const i=new Map;for(const r of n){const s=r.transform,o=e.data.field(r.field);i.set(r.field,Ise(s,o,t))}return i}class hp extends uE{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sx extends uE{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ax{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Mse(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=j_(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=j_(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=eU();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;const l=cU(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(it.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),St())}isEqual(t){return this.batchId===t.batchId&&ep(this.mutations,t.mutations,(e,i)=>uU(e,i))&&ep(this.baseMutations,t.baseMutations,(e,i)=>uU(e,i))}}class xx{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){tt(t.mutations.length===i.length);let r=Cse;const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new xx(t,e,i,r)}}class Mx{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rse{constructor(t,e){this.count=t,this.unchangedNames=e}}var $i,Jt;function gU(n){switch(n){default:return Qe();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function mU(n){if(void 0===n)return Oi("GRPC error has no .code"),de.UNKNOWN;switch(n){case $i.OK:return de.OK;case $i.CANCELLED:return de.CANCELLED;case $i.UNKNOWN:return de.UNKNOWN;case $i.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case $i.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case $i.INTERNAL:return de.INTERNAL;case $i.UNAVAILABLE:return de.UNAVAILABLE;case $i.UNAUTHENTICATED:return de.UNAUTHENTICATED;case $i.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case $i.NOT_FOUND:return de.NOT_FOUND;case $i.ALREADY_EXISTS:return de.ALREADY_EXISTS;case $i.PERMISSION_DENIED:return de.PERMISSION_DENIED;case $i.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case $i.ABORTED:return de.ABORTED;case $i.OUT_OF_RANGE:return de.OUT_OF_RANGE;case $i.UNIMPLEMENTED:return de.UNIMPLEMENTED;case $i.DATA_LOSS:return de.DATA_LOSS;default:return Qe()}}(Jt=$i||($i={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";function _U(){return new TextEncoder}const Pse=new dd([4294967295,4294967295],0);function yU(n){const t=_U().encode(n),e=new Y3;return e.update(t),new Uint8Array(e.digest())}function vU(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new dd([e,i],0),new dd([r,s],0)]}class kx{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new U_(`Invalid padding: ${e}`);if(i<0)throw new U_(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new U_(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new U_(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=dd.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(dd.fromNumber(i)));return 1===r.compare(Pse)&&(r=new dd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=yU(t),[i,r]=vU(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new kx(s,r,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(0===this.Ie)return;const e=yU(t),[i,r]=vU(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class U_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class H_{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,z_.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new H_(it.min(),r,new Un(bt),Ls(),St())}}class z_{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new z_(i,e,St(),St(),St())}}class hE{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}}class bU{constructor(t,e){this.targetId=t,this.me=e}}class wU{constructor(t,e,i=or.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class EU{constructor(){this.fe=0,this.ge=DU(),this.pe=or.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=St(),e=St(),i=St();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Qe()}}),new z_(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=DU()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ose{constructor(t){this.Le=t,this.Be=new Map,this.ke=Ls(),this.qe=CU(),this.Qe=new Un(bt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:Qe()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,i=t.me.count,r=this.Je(e);if(r){const s=r.target;if(sE(s))if(0===i){const o=new Ue(s.path);this.Ue(e,o,Yn.newNoDocument(o,it.min()))}else tt(1===i);else{const o=this.Ye(e);if(o!==i){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;0!==l&&(this.je(e),this.Qe=this.Qe.insert(e,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e;let o,a;try{o=fl(i).toUint8Array()}catch(l){if(l instanceof Ij)return Ns("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kx(o,r,s)}catch(l){return Ns(l instanceof U_?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&sE(a.target)){const l=new Ue(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Yn.newNoDocument(l,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let i=St();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new H_(t,e,this.Qe,this.ke,i);return this.ke=Ls(),this.qe=CU(),this.Qe=new Un(bt),r}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new EU,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new kn(bt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||Me("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new EU),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function CU(){return new Un(Ue.comparator)}function DU(){return new Un(Ue.comparator)}const Nse={asc:"ASCENDING",desc:"DESCENDING"},Fse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lse={and:"AND",or:"OR"};class Vse{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Rx(n,t){return n.useProto3Json||S_(t)?t:{value:t}}function fp(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function TU(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Bse(n,t){return fp(n,t.toTimestamp())}function Ni(n){return tt(!!n),it.fromTimestamp(function(e){const i=hl(e);return new oi(i.seconds,i.nanos)}(n))}function Px(n,t){return Ox(n,t).canonicalString()}function Ox(n,t){const e=(r=n,new qt(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?e:e.child(t)}function IU(n){const t=qt.fromString(n);return tt(LU(t)),t}function $_(n,t){return Px(n.databaseId,t.path)}function Sa(n,t){const e=IU(t);if(e.get(1)!==n.databaseId.projectId)throw new Ie(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ie(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ue(xU(e))}function SU(n,t){return Px(n.databaseId,t)}function AU(n){const t=IU(n);return 4===t.length?qt.emptyPath():xU(t)}function Nx(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xU(n){return tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function MU(n,t,e){return{name:$_(n,t),fields:e.value.mapValue.fields}}function kU(n,t,e){const i=Sa(n,t.name),r=Ni(t.updateTime),s=t.createTime?Ni(t.createTime):it.min(),o=new xr({mapValue:{fields:t.fields}}),a=Yn.newFoundDocument(i,r,s,o);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function W_(n,t){let e;if(t instanceof dp)e={update:MU(n,t.key,t.value)};else if(t instanceof hp)e={delete:$_(n,t.key)};else if(t instanceof ml)e={update:MU(n,t.key,t.data),updateMask:Gse(t.fieldMask)};else{if(!(t instanceof Sx))return Qe();e={verify:$_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof cp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _d)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof up)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Qe()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(s=t.precondition).updateTime?{updateTime:Bse(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Qe()),e;var s}function Fx(n,t){const e=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?ai.updateTime(Ni(s.updateTime)):void 0!==s.exists?ai.exists(s.exists):ai.none():ai.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,a){let l=null;"setToServerValue"in a?(tt("REQUEST_TIME"===a.setToServerValue),l=new cp):"appendMissingElements"in a?l=new _d(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new yd(a.removeAllFromArray.values||[]):"increment"in a?l=new up(o,a.increment):Qe();const c=Zn.fromServerFormat(a.fieldPath);return new B_(c,l)}(n,r)):[];var s;if(t.update){const r=Sa(n,t.update.name),s=new xr({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=new Fs((t.updateMask.fieldPaths||[]).map(u=>Zn.fromServerFormat(u)));return new ml(r,s,o,e,i)}return new dp(r,s,e,i)}if(t.delete){const r=Sa(n,t.delete);return new hp(r,e)}if(t.verify){const r=Sa(n,t.verify);return new Sx(r,e)}return Qe()}function RU(n,t){return{documents:[SU(n,t.path)]}}function fE(n,t){const e={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=SU(n,r);const s=function(c){if(0!==c.length)return FU(wn.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Oc((m=u).field),direction:$se(m.dir)};var m})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=Rx(n,t.limit);return null!==a&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r};var c}function OU(n){let t=AU(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){tt(1===i);const u=e.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];e.where&&(s=function(f){const m=NU(f);return m instanceof wn&&wx(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=e.orderBy.map(m=>{return new P_(pp((v=m).field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;e.limit&&(a=function(f){let m;return m="object"==typeof f?f.value:f,S_(m)?null:m}(e.limit));let l=null;var f;e.startAt&&(l=new Pc((f=e.startAt).values||[],!!f.before));let c=null;return e.endAt&&(c=function(f){return new Pc(f.values||[],!f.before)}(e.endAt)),Wj(t,r,o,s,a,"F",l,c)}function NU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=pp(e.unaryFilter.field);return Gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=pp(e.unaryFilter.field);return Gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=pp(e.unaryFilter.field);return Gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pp(e.unaryFilter.field);return Gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}(n):void 0!==n.fieldFilter?Gt.create(pp((e=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(i=>NU(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Qe()}}(e.compositeFilter.op))}(n):Qe();var e}function $se(n){return Nse[n]}function Wse(n){return Fse[n]}function qse(n){return Lse[n]}function Oc(n){return{fieldPath:n.canonicalString()}}function pp(n){return Zn.fromServerFormat(n.fieldPath)}function FU(n){return n instanceof Gt?function(e){if("=="===e.op){if(xj(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NAN"}};if(Aj(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xj(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NOT_NAN"}};if(Aj(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oc(e.field),op:Wse(e.op),value:e.value}}}(n):n instanceof wn?function(e){const i=e.getFilters().map(r=>FU(r));return 1===i.length?i[0]:{compositeFilter:{op:qse(e.op),filters:i}}}(n):Qe()}function Gse(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function LU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class _l{constructor(t,e,i,r,s=it.min(),o=it.min(),a=or.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new _l(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class VU{constructor(t){this.ct=t}}function BU(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:pE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:$_(s=n.ct,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:fp(s,o.version.toTimestamp()),createTime:fp(s,o.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:vd(t.version)};else{if(!t.isUnknownDocument())return Qe();i.unknownDocument={path:e.path.toArray(),version:vd(t.version)}}var s,o;return i}function pE(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function vd(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function bd(n){const t=new oi(n.seconds,n.nanoseconds);return it.fromTimestamp(t)}function wd(n,t){const e=(t.baseMutations||[]).map(s=>Fx(n.ct,s));for(let s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);const i=t.mutations.map(s=>Fx(n.ct,s)),r=oi.fromMillis(t.localWriteTimeMs);return new Ax(t.batchId,r,e,i)}function q_(n){const t=bd(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?bd(n.lastLimboFreeSnapshotVersion):it.min();let i;return i=void 0!==n.query.documents?(tt(1===(s=n.query).documents.length),Zr(op(AU(s.documents[0])))):function(s){return Zr(OU(s))}(n.query),new _l(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,or.fromBase64String(n.resumeToken));var s}function jU(n,t){const e=vd(t.snapshotVersion),i=vd(t.lastLimboFreeSnapshotVersion);let r;r=sE(t.target)?RU(n.ct,t.target):fE(n.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:md(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Lx(n){const t=OU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?aE(t,t.limit,"L"):t}function Vx(n,t){return new Mx(t.largestBatchId,Fx(n.ct,t.overlayMutation))}function UU(n,t){const e=t.path.lastSegment();return[n,Kr(t.path.popLast()),e]}function HU(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:vd(i.readTime),documentKey:Kr(i.documentKey.path),largestBatchId:i.largestBatchId}}class Zse{getBundleMetadata(t,e){return zU(t).get(e).next(i=>{if(i)return{id:(s=i).bundleId,createTime:bd(s.createTime),version:s.version};var s})}saveBundleMetadata(t,e){return zU(t).put({bundleId:(r=e).id,createTime:vd(Ni(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return $U(t).get(e).next(i=>{if(i)return{name:(s=i).name,query:Lx(s.bundledQuery),readTime:bd(s.readTime)};var s})}saveNamedQuery(t,e){return $U(t).put({name:(r=e).name,readTime:vd(Ni(r.readTime)),bundledQuery:r.bundledQuery});var r}}function zU(n){return _r(n,"bundles")}function $U(n){return _r(n,"namedQueries")}class gE{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){return new gE(t,e.uid||"")}getOverlay(t,e){return G_(t).get(UU(this.userId,e)).next(i=>i?Vx(this.serializer,i):null)}getOverlays(t,e){const i=Ia();return ce.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,o)=>{const a=new Mx(e,o);r.push(this.ht(t,a))}),ce.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(o=>r.add(Kr(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(G_(t).j("collectionPathOverlayIndex",a))}),ce.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Ia(),s=Kr(e),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return G_(t).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Vx(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Ia();let o;const a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return G_(t).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const f=Vx(this.serializer,c);s.size()<r||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):u.done()}).next(()=>s)}ht(t,e){return G_(t).put(function(r,s,o){const[a,l,c]=UU(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:W_(r.ct,o.mutation)}}(this.serializer,this.userId,e))}}function G_(n){return _r(n,"documentOverlays")}class Ed{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(_i(t.integerValue));else if("doubleValue"in t){const i=_i(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),A_(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),"string"==typeof i&&(i=hl(i)),e.At(`${i.seconds||""}`),e.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(fl(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?Mj(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Qe()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const i=t.fields||{};this.Et(e,55);for(const r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){const i=t.values||[];this.Et(e,50);for(const r of i)this.It(r,e)}gt(t,e){this.Et(e,37),Ue.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}function Yse(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function WU(n){const t=64-function(i){let r=0;for(let s=0;s<8;++s){const o=Yse(255&i[s]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(t/8)}Ed.bt=new Ed;class Qse{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ct(i.value),i=e.next();this.vt()}Ft(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Mt(i.value),i=e.next();this.xt()}Ot(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{const r=e.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{const r=e.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(t){const e=this.Bt(t),i=WU(e);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}qt(t){const e=this.Bt(t),i=WU(e);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Bt(t){const e=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ct(t){const e=255&t;0===e?(this.Kt(0),this.Kt(255)):255===e?(this.Kt(255),this.Kt(0)):this.Kt(e)}Mt(t){const e=255&t;0===e?(this.Ut(0),this.Ut(255)):255===e?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Xse{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Lt(t)}Tt(){this.Gt.Qt()}}class Jse{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}}class K_{constructor(){this.Gt=new Qse,this.zt=new Xse(this.Gt),this.jt=new Jse(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return 0===t?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Cd{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Jt(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Cd(this.indexId,this.documentKey,this.arrayValue,i)}}function Nc(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=qU(n.arrayValue,t.arrayValue),0!==e?e:(e=qU(n.directionalValue,t.directionalValue),0!==e?e:Ue.comparator(n.documentKey,t.documentKey)))}function qU(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class GU{constructor(t){this.Yt=new kn((e,i)=>Zn.comparator(e.field,i.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(const e of t.filters){const i=e;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(t){if(tt(t.collectionGroup===this.collectionId),this.en)return!1;const e=fx(t);if(void 0!==e&&!this.nn(e))return!1;const i=hd(t);let r=new Set,s=0,o=0;for(;s<i.length&&this.nn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<i.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],i[s]))return!1;return!0}on(){if(this.en)return null;let t=new kn(Zn.comparator);const e=[];for(const i of this.Xt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)e.push(new fd(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new fd(i.field,0))}for(const i of this.Zt)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new fd(i.field,"asc"===i.dir?0:1)));return new tp(tp.UNKNOWN_ID,this.collectionId,e,np.empty())}nn(t){for(const e of this.Xt)if(this.rn(e,t))return!0;return!1}rn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function KU(n){var t,e;if(tt(n instanceof Gt||n instanceof wn),n instanceof Gt){if(n instanceof Hj){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>Gt.create(n.field,"==",s)))||[];return wn.create(r,"or")}return n}const i=n.filters.map(r=>KU(r));return wn.create(i,n.op)}function eoe(n){if(0===n.getFilters().length)return[];const t=Ux(KU(n));return tt(ZU(t)),Bx(t)||jx(t)?[t]:t.getFilters()}function Bx(n){return n instanceof Gt}function jx(n){return n instanceof wn&&wx(n)}function ZU(n){return Bx(n)||jx(n)||function(e){if(e instanceof wn&&bx(e)){for(const i of e.getFilters())if(!Bx(i)&&!jx(i))return!1;return!0}return!1}(n)}function Ux(n){if(tt(n instanceof Gt||n instanceof wn),n instanceof Gt)return n;if(1===n.filters.length)return Ux(n.filters[0]);const t=n.filters.map(i=>Ux(i));let e=wn.create(t,n.op);return e=mE(e),ZU(e)?e:(tt(e instanceof wn),tt(sp(e)),tt(e.filters.length>1),e.filters.reduce((i,r)=>Hx(i,r)))}function Hx(n,t){let e;return tt(n instanceof Gt||n instanceof wn),tt(t instanceof Gt||t instanceof wn),e=n instanceof Gt?t instanceof Gt?wn.create([n,t],"and"):YU(n,t):t instanceof Gt?YU(t,n):function(r,s){if(tt(r.filters.length>0&&s.filters.length>0),sp(r)&&sp(s))return Bj(r,s.getFilters());const o=bx(r)?r:s,a=bx(r)?s:r,l=o.filters.map(c=>Hx(c,a));return wn.create(l,"or")}(n,t),mE(e)}function YU(n,t){if(sp(t))return Bj(t,n.getFilters());{const e=t.filters.map(i=>Hx(n,i));return wn.create(e,"or")}}function mE(n){if(tt(n instanceof Gt||n instanceof wn),n instanceof Gt)return n;const t=n.getFilters();if(1===t.length)return mE(t[0]);if(Lj(n))return n;const e=t.map(r=>mE(r)),i=[];return e.forEach(r=>{r instanceof Gt?i.push(r):r instanceof wn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:wn.create(i,n.op)}class toe{constructor(){this._n=new zx}addToCollectionParentIndex(t,e){return this._n.add(e),ce.resolve()}getCollectionParents(t,e){return ce.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return ce.resolve()}deleteFieldIndex(t,e){return ce.resolve()}deleteAllFieldIndexes(t){return ce.resolve()}createTargetIndexes(t,e){return ce.resolve()}getDocumentsMatchingTarget(t,e){return ce.resolve(null)}getIndexType(t,e){return ce.resolve(0)}getFieldIndexes(t,e){return ce.resolve([])}getNextCollectionGroupToUpdate(t){return ce.resolve(null)}getMinOffset(t,e){return ce.resolve(to.min())}getMinOffsetFromCollectionGroup(t,e){return ce.resolve(to.min())}updateCollectionGroup(t,e,i){return ce.resolve()}updateIndexEntries(t,e){return ce.resolve()}}class zx{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new kn(qt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new kn(qt.comparator)).toArray()}}const _E=new Uint8Array(0);class noe{constructor(t,e){this.databaseId=e,this.an=new zx,this.un=new gl(i=>md(i),(i,r)=>O_(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.an.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.an.add(e)});const s={collectionId:i,parent:Kr(r)};return QU(t).put(s)}return ce.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[aj(e),""],!1,!0);return QU(t).U(r).next(s=>{for(const o of s){if(o.collectionId!==e)break;i.push(Da(o.parent))}return i})}addFieldIndex(t,e){const i=Z_(t),r={indexId:(a=e).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const s=i.add(r);if(e.indexState){const o=mp(t);return s.next(a=>{o.put(HU(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=Z_(t),r=mp(t),s=gp(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Z_(t),i=gp(t),r=mp(t);return e.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(t,e){return ce.forEach(this.cn(e),i=>this.getIndexType(t,i).next(r=>{if(0===r||1===r){const s=new GU(i).on();if(null!=s)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,e){const i=gp(t);let r=!0;const s=new Map;return ce.forEach(this.cn(e),o=>this.ln(t,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=St();const a=[];return ce.forEach(s,(l,c)=>{var R;Me("IndexedDbIndexManager",`Using index ${R=l,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`} to execute ${md(e)}`);const u=function(R,z){const q=fx(z);if(void 0===q)return null;for(const ee of oE(R,q.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(c,l),f=function(R,z){const q=new Map;for(const ee of hd(z))for(const N of oE(R,ee.fieldPath))switch(N.op){case"==":case"in":q.set(ee.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return q.set(ee.fieldPath.canonicalString(),N.value),Array.from(q.values())}return null}(c,l),m=function(R,z){const q=[];let ee=!0;for(const N of hd(z)){const M=0===N.kind?zj(R,N.fieldPath,R.startAt):$j(R,N.fieldPath,R.startAt);q.push(M.value),ee&&(ee=M.inclusive)}return new Pc(q,ee)}(c,l),y=function(R,z){const q=[];let ee=!0;for(const N of hd(z)){const M=0===N.kind?$j(R,N.fieldPath,R.endAt):zj(R,N.fieldPath,R.endAt);q.push(M.value),ee&&(ee=M.inclusive)}return new Pc(q,ee)}(c,l),v=this.hn(l,c,m),w=this.hn(l,c,y),E=this.Pn(l,c,f),k=this.In(l.indexId,u,v,m.inclusive,w,y.inclusive,E);return ce.forEach(k,S=>i.G(S,e.limit).next(R=>{R.forEach(z=>{const q=Ue.fromSegments(z.documentKey);o.has(q)||(o=o.add(q),a.push(q))})}))}).next(()=>a)}return ce.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:eoe(wn.create(t.filters,"and")).map(i=>Cx(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}In(t,e,i,r,s,o,a){const l=(null!=e?e.length:1)*Math.max(i.length,s.length),c=l/(null!=e?e.length:1),u=[];for(let f=0;f<l;++f){const m=e?this.Tn(e[f/c]):_E,y=this.En(t,m,i[f%c],r),v=this.dn(t,m,s[f%c],o),w=a.map(E=>this.En(t,m,E,!0));u.push(...this.createRange(y,v,w))}return u}En(t,e,i,r){const s=new Cd(t,Ue.empty(),e,i);return r?s:s.Jt()}dn(t,e,i,r){const s=new Cd(t,Ue.empty(),e,i);return r?s.Jt():s}ln(t,e){const i=new GU(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let o=null;for(const a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let i=2;const r=this.cn(e);return ce.forEach(r,s=>this.ln(t,s).next(o=>{o?0!==i&&o.fields.length<function(l){let c=new kn(Zn.comparator),u=!1;for(const f of l.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?u=!0:c=c.add(m.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}An(t,e){const i=new K_;for(const r of hd(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const o=i.Ht(r.kind);Ed.bt.Pt(s,o)}return i.Wt()}Tn(t){const e=new K_;return Ed.bt.Pt(t,e.Ht(0)),e.Wt()}Rn(t,e){const i=new K_;return Ed.bt.Pt(gd(this.databaseId,e),i.Ht(function(s){const o=hd(s);return 0===o.length?0:o[o.length-1].kind}(t))),i.Wt()}Pn(t,e,i){if(null===i)return[];let r=[];r.push(new K_);let s=0;for(const o of hd(t)){const a=i[s++];for(const l of r)if(this.Vn(e,o.fieldPath)&&k_(a))r=this.mn(r,o,a);else{const c=l.Ht(o.kind);Ed.bt.Pt(a,c)}}return this.fn(r)}hn(t,e,i){return this.Pn(t,e,i.position)}fn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Wt();return e}mn(t,e,i){const r=[...t],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new K_;l.seed(a.Wt()),Ed.bt.Pt(o,l.Ht(e.kind)),s.push(l)}return s}Vn(t,e){return!!t.filters.find(i=>i instanceof Gt&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=Z_(t),r=mp(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(s=>{const o=[];return ce.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(u,f){const m=f?new np(f.sequenceNumber,new to(bd(f.readTime),new Ue(Da(f.documentKey)),f.largestBatchId)):np.empty(),y=u.fields.map(([v,w])=>new fd(Zn.fromServerFormat(v),w));return new tp(u.indexId,u.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:bt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=Z_(t),s=mp(t);return this.gn(t).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>ce.forEach(a,l=>s.put(HU(l.indexId,this.uid,o,i)))))}updateIndexEntries(t,e){const i=new Map;return ce.forEach(e,(r,s)=>{const o=i.get(r.collectionGroup);return(o?ce.resolve(o):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),ce.forEach(a,l=>this.pn(t,r,l).next(c=>{const u=this.yn(s,l);return c.isEqual(u)?ce.resolve():this.wn(t,s,l,c,u)}))))})}Sn(t,e,i,r){return gp(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,e.key),documentKey:e.key.path.toArray()})}bn(t,e,i,r){return gp(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,e.key),e.key.path.toArray()])}pn(t,e,i){const r=gp(t);let s=new kn(Nc);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,e)])},(o,a)=>{s=s.add(new Cd(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(t,e){let i=new kn(Nc);const r=this.An(e,t);if(null==r)return i;const s=fx(e);if(null!=s){const o=t.data.field(s.fieldPath);if(k_(o))for(const a of o.arrayValue.values||[])i=i.add(new Cd(e.indexId,t.key,this.Tn(a),r))}else i=i.add(new Cd(e.indexId,t.key,_E,r));return i}wn(t,e,i,r,s){Me("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const o=[];return function(l,c,u,f,m){const y=l.getIterator(),v=c.getIterator();let w=ip(y),E=ip(v);for(;w||E;){let k=!1,S=!1;if(w&&E){const R=u(w,E);R<0?S=!0:R>0&&(k=!0)}else null!=w?S=!0:k=!0;k?(f(E),E=ip(v)):S?(m(w),w=ip(y)):(w=ip(y),E=ip(v))}}(r,s,Nc,a=>{o.push(this.Sn(t,e,i,a))},a=>{o.push(this.bn(t,e,i,a))}),ce.waitFor(o)}gn(t){let e=1;return mp(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,a)=>Nc(o,a)).filter((o,a,l)=>!a||0!==Nc(o,l[a-1]));const r=[];r.push(t);for(const o of i){const a=Nc(o,t),l=Nc(o,e);if(0===a)r[0]=t.Jt();else if(a>0&&l<0)r.push(o),r.push(o.Jt());else if(l>0)break}r.push(e);const s=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,_E,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,_E,[]]))}return s}Dn(t,e){return Nc(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(XU)}getMinOffset(t,e){return ce.mapArray(this.cn(e),i=>this.ln(t,i).next(r=>r||Qe())).next(XU)}}function QU(n){return _r(n,"collectionParents")}function gp(n){return _r(n,"indexEntries")}function Z_(n){return _r(n,"indexConfiguration")}function mp(n){return _r(n,"indexState")}function XU(n){tt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;px(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new to(t.readTime,t.documentKey,e)}const JU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yr{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Yr(t,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eH(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(e.batchId);let a=0;const l=i.J({range:o},(u,f,m)=>(a++,m.delete()));s.push(l.next(()=>{tt(1===a)}));const c=[];for(const u of e.mutations){const f=_j(t,u.key.path,e.batchId);s.push(r.delete(f)),c.push(u.key)}return ce.waitFor(s).next(()=>c)}function yE(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Qe();t=n.noDocument}return JSON.stringify(t).length}Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(41943040,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);class vE{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(t,e,i,r){tt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new vE(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fc(t).J({index:"userMutationsIndex",range:i},(r,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=_p(t),o=Fc(t);return o.add({}).next(a=>{tt("number"==typeof a);const l=new Ax(a,e,i,r),c=function(y,v,w){const E=w.baseMutations.map(S=>W_(y.ct,S)),k=w.mutations.map(S=>W_(y.ct,S));return{userId:v,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:E,mutations:k}}(this.serializer,this.userId,l),u=[];let f=new kn((m,y)=>bt(m.canonicalString(),y.canonicalString()));for(const m of r){const y=_j(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),u.push(o.put(c)),u.push(s.put(y,Wre))}return f.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),ce.waitFor(u).next(()=>l)})}lookupMutationBatch(t,e){return Fc(t).get(e).next(i=>i?(tt(i.userId===this.userId),wd(this.serializer,i)):null)}vn(t,e){return this.Cn[e]?ce.resolve(this.Cn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Cn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Fc(t).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(tt(a.batchId>=i),s=wd(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Fc(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fc(t).U("userMutationsIndex",e).next(i=>i.map(r=>wd(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=X0(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return _p(t).J({range:r},(o,a,l)=>{const[c,u,f]=o,m=Da(u);if(c===this.userId&&e.path.isEqual(m))return Fc(t).get(f).next(y=>{if(!y)throw Qe();tt(y.userId===this.userId),s.push(wd(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new kn(bt);const r=[];return e.forEach(s=>{const o=X0(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=_p(t).J({range:a},(c,u,f)=>{const[m,y,v]=c,w=Da(y);m===this.userId&&s.path.isEqual(w)?i=i.add(v):f.done()});r.push(l)}),ce.waitFor(r).next(()=>this.Fn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=X0(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new kn(bt);return _p(t).J({range:o},(l,c,u)=>{const[f,m,y]=l,v=Da(m);f===this.userId&&i.isPrefixOf(v)?v.length===r&&(a=a.add(y)):u.done()}).next(()=>this.Fn(t,a))}Fn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Fc(t).get(s).next(o=>{if(null===o)throw Qe();tt(o.userId===this.userId),i.push(wd(this.serializer,o))}))}),ce.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return eH(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Mn(e.batchId)}),ce.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ce.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return _p(t).J({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Da(s[1]);r.push(l)}else a.done()}).next(()=>{tt(0===r.length)})})}containsKey(t,e){return tH(t,this.userId,e)}xn(t){return nH(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tH(n,t,e){const i=X0(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return _p(n).J({range:s,H:!0},(a,l,c)=>{const[u,f,m]=a;u===t&&f===r&&(o=!0),c.done()}).next(()=>o)}function Fc(n){return _r(n,"mutations")}function _p(n){return _r(n,"documentMutations")}function nH(n){return _r(n,"mutationQueues")}class Dd{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Dd(0)}static Ln(){return new Dd(-1)}}class ioe{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Bn(t).next(e=>{const i=new Dd(e.highestTargetId);return e.highestTargetId=i.next(),this.kn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(e=>it.fromTimestamp(new oi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.kn(t,r)))}addTargetData(t,e){return this.qn(t,e).next(()=>this.Bn(t).next(i=>(i.targetCount+=1,this.Qn(e,i),this.kn(t,i))))}updateTargetData(t,e){return this.qn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>yp(t).delete(e.targetId)).next(()=>this.Bn(t)).next(i=>(tt(i.targetCount>0),i.targetCount-=1,this.kn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return yp(t).J((o,a)=>{const l=q_(a);l.sequenceNumber<=e&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(t,l)))}).next(()=>ce.waitFor(s)).next(()=>r)}forEachTarget(t,e){return yp(t).J((i,r)=>{const s=q_(r);e(s)})}Bn(t){return iH(t).get("targetGlobalKey").next(e=>(tt(null!==e),e))}kn(t,e){return iH(t).put("targetGlobalKey",e)}qn(t,e){return yp(t).put(jU(this.serializer,e))}Qn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=md(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return yp(t).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=q_(a);O_(e,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Lc(t);return e.forEach(o=>{const a=Kr(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,o))}),ce.waitFor(r)}removeMatchingKeys(t,e,i){const r=Lc(t);return ce.forEach(e,s=>{const o=Kr(s.path);return ce.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Lc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Lc(t);let s=St();return r.J({range:i,H:!0},(o,a,l)=>{const c=Da(o[1]),u=new Ue(c);s=s.add(u)}).next(()=>s)}containsKey(t,e){const i=Kr(e.path),r=IDBKeyRange.bound([i],[aj(i)],!1,!0);let s=0;return Lc(t).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(t,e){return yp(t).get(e).next(i=>i?q_(i):null)}}function yp(n){return _r(n,"targets")}function iH(n){return _r(n,"targetGlobal")}function Lc(n){return _r(n,"targetDocuments")}function rH([n,t],[e,i]){const r=bt(n,e);return 0===r?bt(t,i):r}class roe{constructor(t){this.Kn=t,this.buffer=new kn(rH),this.$n=0}Un(){return++this.$n}Wn(t){const e=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();rH(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class sH{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(t){var e=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,ye.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Sc(i)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ic(i)}yield e.zn(3e5)}))}}class soe{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.Hn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ce.resolve(no.oe);const i=new roe(e);return this.jn.forEachTarget(t,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(t,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(JU)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JU):this.Yn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,e){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(t,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(t,i,e))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(f=>(c=Date.now(),Jf()<=Ea.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${f} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}class ooe{constructor(t,e){this.db=t,this.garbageCollector=function oH(n,t){return new soe(n,t)}(this,e)}Hn(t){const e=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Zn(t){let e=0;return this.Jn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Jn(t,e){return this.Xn(t,(i,r)=>e(r))}addReference(t,e,i){return bE(t,i)}removeReference(t,e,i){return bE(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return bE(t,e)}er(t,e){return function(r,s){let o=!1;return nH(r).Y(a=>tH(r,a,s).next(l=>(l&&(o=!0),ce.resolve(!l)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Xn(t,(o,a)=>{if(a<=e){const l=this.er(t,o).next(c=>{if(!c)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,it.min()),Lc(t).delete([0,Kr(o.path)])))});r.push(l)}}).next(()=>ce.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return bE(t,e)}Xn(t,e){const i=Lc(t);let r,s=no.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==no.oe&&e(new Ue(Da(r)),s),s=c,r=l):s=no.oe}).next(()=>{s!==no.oe&&e(new Ue(Da(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function bE(n,t){return Lc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Kr(t.path),sequenceNumber:r}));var r}class aH{constructor(){this.changes=new gl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Yn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ce.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class aoe{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Td(t).put(i)}removeEntry(t,e,i){return Td(t).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],pE(o),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.tr(t,i)))}getEntry(t,e){let i=Yn.newInvalidDocument(e);return Td(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Y_(e))},(r,s)=>{i=this.nr(e,s)}).next(()=>i)}rr(t,e){let i={size:0,document:Yn.newInvalidDocument(e)};return Td(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Y_(e))},(r,s)=>{i={document:this.nr(e,s),size:yE(s)}}).next(()=>i)}getEntries(t,e){let i=Ls();return this.ir(t,e,(r,s)=>{const o=this.nr(r,s);i=i.insert(r,o)}).next(()=>i)}sr(t,e){let i=Ls(),r=new Un(Ue.comparator);return this.ir(t,e,(s,o)=>{const a=this.nr(s,o);i=i.insert(s,a),r=r.insert(s,yE(o))}).next(()=>({documents:i,_r:r}))}ir(t,e,i){if(e.isEmpty())return ce.resolve();let r=new kn(dH);e.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Y_(r.first()),Y_(r.last())),o=r.getIterator();let a=o.getNext();return Td(t).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const f=Ue.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&dH(a,f)<0;)i(a,null),a=o.getNext();a&&a.isEqual(f)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.$(Y_(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,s){const o=e.path,a=[o.popLast().toArray(),o.lastSegment(),pE(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Td(t).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=Ls();for(const f of c){const m=this.nr(Ue.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(F_(e,m)||r.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(t,e,i,r){let s=Ls();const o=uH(e,i),a=uH(e,to.max());return Td(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const f=this.nr(Ue.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(t){return new loe(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return cH(t).get("remoteDocumentGlobalKey").next(e=>(tt(!!e),e))}tr(t,e){return cH(t).put("remoteDocumentGlobalKey",e)}nr(t,e){if(e){const i=function Kse(n,t){let e;if(t.document)e=kU(n.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Ue.fromSegments(t.noDocument.path),r=bd(t.noDocument.readTime);e=Yn.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Qe();{const i=Ue.fromSegments(t.unknownDocument.path),r=bd(t.unknownDocument.version);e=Yn.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){const s=new oi(r[0],r[1]);return it.fromTimestamp(s)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(it.min()))return i}return Yn.newInvalidDocument(t)}}function lH(n){return new aoe(n)}class loe extends aH{constructor(t,e){super(),this.ar=t,this.trackRemovals=e,this.ur=new gl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new kn((s,o)=>bt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(e.push(this.ar.removeEntry(t,s,a.readTime)),o.isValidDocument()){const l=BU(this.ar.serializer,o);r=r.add(s.path.popLast());const c=yE(l);i+=c-a.size,e.push(this.ar.addEntry(t,s,l))}else if(i-=a.size,this.trackRemovals){const l=BU(this.ar.serializer,o.convertToNoDocument(it.min()));e.push(this.ar.addEntry(t,s,l))}}),r.forEach(s=>{e.push(this.ar.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.ar.updateMetadata(t,i)),ce.waitFor(e)}getFromCache(t,e){return this.ar.rr(t,e).next(i=>(this.ur.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.ar.sr(t,e).next(({documents:i,_r:r})=>(r.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function cH(n){return _r(n,"remoteDocumentGlobal")}function Td(n){return _r(n,"remoteDocumentsV14")}function Y_(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uH(n,t){const e=t.documentKey.path.toArray();return[n,pE(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function dH(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=bt(e[s],i[s]),r)return r;return r=bt(e.length,i.length),r||(r=bt(e[e.length-2],i[i.length-2]),r||bt(e[e.length-1],i[i.length-1]))}class coe{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class hH{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&j_(i.mutation,r,Fs.empty(),oi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,St()).next(()=>i))}getLocalViewOfDocuments(t,e,i=St()){const r=Ia();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=L_();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Ia();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,St()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=Ls();const o=V_(),a=V_();return e.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof ml)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),j_(u.mutation,c,u.mutation.getFieldMask(),oi.now())):o.set(c.key,Fs.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),e.forEach((c,u)=>{var f;return a.set(c,new coe(u,null!==(f=o.get(c))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(t,e){const i=V_();let r=new Un((o,a)=>o-a),s=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=e.get(l);if(null===c)return;let u=i.get(l)||Fs.empty();u=a.applyToLocalView(c,u),i.set(l,u);const f=(r.get(a.batchId)||St()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=eU();u.forEach(m=>{if(!s.has(m)){const y=cU(e.get(m),i.get(m));null!==y&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return ce.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return Ue.isDocumentKey((o=e).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):Dx(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r);var o}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):ce.resolve(Ia());let a=-1,l=s;return o.next(c=>ce.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?ce.resolve():this.remoteDocumentCache.getEntry(t,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,St())).next(u=>({batchId:a,changes:Jj(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ue(e)).next(i=>{let r=L_();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const s=e.collectionGroup;let o=L_();return this.indexManager.getCollectionParents(t,s).next(a=>ce.forEach(a,l=>{const c=(f=e,m=l.child(s),new pl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,m;return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,Yn.newInvalidDocument(u)))});let a=L_();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&j_(u.mutation,c,Fs.empty(),oi.now()),F_(e,c)&&(a=a.insert(l,c))}),a})}}class uoe{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return ce.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,{id:(r=e).id,version:r.version,createTime:Ni(r.createTime)}),ce.resolve();var r}getNamedQuery(t,e){return ce.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,{name:(r=e).name,query:Lx(r.bundledQuery),readTime:Ni(r.readTime)}),ce.resolve();var r}}class doe{constructor(){this.overlays=new Un(Ue.comparator),this.hr=new Map}getOverlay(t,e){return ce.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ia();return ce.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),ce.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.hr.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),ce.resolve()}getOverlaysForCollection(t,e,i){const r=Ia(),s=e.length+1,o=new Ue(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return ce.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Un((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>i){let u=s.get(c.largestBatchId);null===u&&(u=Ia(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ia(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return ce.resolve(a)}ht(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Mx(e,i));let s=this.hr.get(e);void 0===s&&(s=St(),this.hr.set(e,s)),this.hr.set(e,s.add(i.key))}}class $x{constructor(){this.Pr=new kn(yr.Ir),this.Tr=new kn(yr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const i=new yr(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new yr(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){const e=new Ue(new qt([])),i=new yr(e,t),r=new yr(e,t+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new Ue(new qt([])),i=new yr(e,t),r=new yr(e,t+1);let s=St();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new yr(t,0),i=this.Pr.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class yr{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return Ue.comparator(t.key,e.key)||bt(t.pr,e.pr)}static Er(t,e){return bt(t.pr,e.pr)||Ue.comparator(t.key,e.key)}}class hoe{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new kn(yr.Ir)}checkEmpty(t){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.yr;this.yr++;const o=new Ax(s,e,i,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new yr(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ce.resolve(o)}lookupMutationBatch(t,e){return ce.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.br(e+1),s=r<0?0:r;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new yr(e,0),r=new yr(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{const a=this.Sr(o.pr);s.push(a)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new kn(bt);return e.forEach(r=>{const s=new yr(r,0),o=new yr(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),ce.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Ue.isDocumentKey(s)||(s=s.child(""));const o=new yr(new Ue(s),0);let a=new kn(bt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.pr)),!0)},o),ce.resolve(this.Dr(a))}Dr(t){const e=[];return t.forEach(i=>{const r=this.Sr(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){tt(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let i=this.wr;return ce.forEach(e.mutations,r=>{const s=new yr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){const i=new yr(e,0),r=this.wr.firstAfterOrEqual(i);return ce.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ce.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class foe{constructor(t){this.vr=t,this.docs=new Un(Ue.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ce.resolve(i?i.document.mutableCopy():Yn.newInvalidDocument(e))}getEntries(t,e){let i=Ls();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Yn.newInvalidDocument(r))}),ce.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=Ls();const o=e.path,a=new Ue(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||px(cj(u),i)<=0||(r.has(u.key)||F_(e,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(t,e,i,r){Qe()}Fr(t,e){return ce.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new poe(this)}getSize(t){return ce.resolve(this.size)}}class poe extends aH{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),ce.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class goe{constructor(t){this.persistence=t,this.Mr=new gl(e=>md(e),O_),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $x,this.targetCount=0,this.Lr=Dd.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),ce.resolve()}getLastRemoteSnapshotVersion(t){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ce.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),ce.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new Dd(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,ce.resolve()}updateTargetData(t,e){return this.qn(e),ce.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,ce.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=e&&null===i.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),ce.waitFor(s).next(()=>r)}getTargetCount(t){return ce.resolve(this.targetCount)}getTargetData(t,e){const i=this.Mr.get(e)||null;return ce.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),ce.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),ce.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),ce.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Nr.gr(e);return ce.resolve(i)}containsKey(t,e){return ce.resolve(this.Nr.containsKey(e))}}class Wx{constructor(t,e){this.Br={},this.overlays={},this.kr=new no(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new goe(this),this.indexManager=new toe,this.remoteDocumentCache=new foe(i=>this.referenceDelegate.Kr(i)),this.serializer=new VU(e),this.$r=new uoe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new doe,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new hoe(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){Me("MemoryPersistence","Starting transaction:",t);const r=new moe(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return ce.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}}class moe extends dj{constructor(t){super(),this.currentSequenceNumber=t}}class wE{constructor(t){this.persistence=t,this.zr=new $x,this.jr=null}static Hr(t){return new wE(t)}get Jr(){if(this.jr)return this.jr;throw Qe()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),ce.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),ce.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Jr,i=>{const r=Ue.fromPath(i);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,it.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return ce.or([()=>ce.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class _oe{constructor(t){this.serializer=t}O(t,e,i,r){const s=new Q0("createOrUpgrade",e);var l;i<1&&r>=1&&(t.createObjectStore("owner"),(l=t).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mj,{unique:!0}),l.createObjectStore("documentMutations"),fH(t),function(l){l.createObjectStore("remoteDocuments")}(t));let o=ce.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),fH(t)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:it.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mj,{unique:!0});const f=c.store("mutations"),m=u.map(y=>f.put(y));return ce.waitFor(m)})}(t,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(o=o.next(()=>this.Xr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.ei(s)))),i<7&&r>=7&&(o=o.next(()=>this.ti(s))),i<8&&r>=8&&(o=o.next(()=>this.ni(t,s))),i<9&&r>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(o=o.next(()=>this.ri(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:ise});c.createIndex("collectionPathOverlayIndex",rse,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",sse,{unique:!1})}(t)})),i<13&&r>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:qre});c.createIndex("documentKeyIndex",Gre),c.createIndex("collectionGroupIndex",Kre)}(t)).next(()=>this.ii(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(t,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Jre}).createIndex("sequenceNumberIndex",ese,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:tse}).createIndex("documentKeyIndex",nse,{unique:!1})}(t))),i<16&&r>=16&&(o=o.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),o}ei(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=yE(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(r=>ce.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>ce.forEach(a,l=>{tt(l.userId===s.userId);const c=wd(this.serializer,l);return eH(t,s.userId,c).next(()=>{})}))}))}ti(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((o,a)=>{const l=new qt(o),c=[0,Kr(l)];s.push(e.get(c).next(u=>u?ce.resolve():e.put({targetId:0,path:Kr(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}ni(t,e){t.createObjectStore("collectionParents",{keyPath:Xre});const i=e.store("collectionParents"),r=new zx,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Kr(l)})}};return e.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new qt(o);return s(l.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=Da(a);return s(u.popLast())}))}ri(t){const e=t.store("targets");return e.J((i,r)=>{const s=q_(r),o=jU(this.serializer,s);return e.put(o)})}ii(t,e){const i=e.store("remoteDocuments"),r=[];return i.J((s,o)=>{const a=e.store("remoteDocumentsV14"),l=(f=o,f.document?new Ue(qt.fromString(f.document.name).popFirst(5)):f.noDocument?Ue.fromSegments(f.noDocument.path):f.unknownDocument?Ue.fromSegments(f.unknownDocument.path):Qe()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var f;r.push(a.put(c))}).next(()=>ce.waitFor(r))}si(t,e){const i=e.store("mutations"),r=lH(this.serializer),s=new Wx(wE.Hr,this.serializer.ct);return i.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:St();wd(this.serializer,l).keys().forEach(f=>u=u.add(f)),a.set(l.userId,u)}),ce.forEach(a,(l,c)=>{const u=new mr(c),f=gE.lt(this.serializer,u),m=s.getIndexManager(u),y=vE.lt(u,this.serializer,m,s.referenceDelegate);return new hH(r,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new _x(e,no.oe),l).next()})})}}function fH(n){n.createObjectStore("targetDocuments",{keyPath:Yre}).createIndex("documentTargetsIndex",Qre,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zre,{unique:!0}),n.createObjectStore("targetGlobal")}const qx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gx{constructor(t,e,i,r,s,o,a,l,c,u,f=16){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=u,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!Gx.D())throw new Ie(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ooe(this,r),this.Ti=e+"main",this.serializer=new VU(l),this.Ei=new Ca(this.Ti,this.ui,new _oe(this.serializer)),this.Qr=new ioe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lH(this.serializer),this.$r=new Zse,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(de.FAILED_PRECONDITION,qx);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new no(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){var e=this;return this.Ii=function(){var i=(0,ye.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.L(function(){var e=(0,ye.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget((0,ye.Z)(function*(){e.started&&(yield e.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>CE(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(e=>this.isPrimary&&!e?this.yi(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(Sc(t))return Me("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return Q_(t).get("owner").next(e=>ce.resolve(this.Si(e)))}bi(t){return CE(t).delete(this.clientId)}Di(){var t=this;return(0,ye.Z)(function*(){if(t.isPrimary&&!t.Ci(t.Pi,18e5)){t.Pi=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=_r(i,"clientMetadata");return r.U().next(s=>{const o=t.vi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return ce.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(t.di)for(const i of e)t.di.removeItem(t.Fi(i.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?ce.resolve(!0):Q_(t).get("owner").next(e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)){if(this.Si(e)&&this.networkEnabled)return!0;if(!this.Si(e)){if(!e.allowTabSynchronization)throw new Ie(de.FAILED_PRECONDITION,qx);return!1}}return!(!this.networkEnabled||!this.inForeground)||CE(t).U().next(i=>void 0===this.vi(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Me("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ye.Z)(function*(){t.qr=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Oi(),t.Ni(),yield t.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new _x(e,no.oe);return t.yi(i).next(()=>t.bi(i))}),t.Ei.close(),t.Li()})()}vi(t,e){return t.filter(i=>this.Ci(i.updateTimeMs,e)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>CE(t).U().next(e=>this.vi(e,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(t,e){return vE.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new noe(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return gE.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,e,i){Me("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=16===(l=this.ui)?ase:15===l?wj:14===l?bj:13===l?vj:12===l?ose:11===l?yj:void Qe();var l;let o;return this.Ei.runTransaction(t,r,s,a=>(o=new _x(a,this.kr?this.kr.next():no.oe),"readwrite-primary"===e?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw Oi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ie(de.FAILED_PRECONDITION,uj);return i(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(t){return Q_(t).get("owner").next(e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ie(de.FAILED_PRECONDITION,qx)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Q_(t).put("owner",e)}static D(){return Ca.D()}yi(t){const e=Q_(t);return e.get("owner").next(i=>this.Si(i)?(Me("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ce.resolve())}Ci(t,e){const i=Date.now();return!(t<i-e||t>i&&(Oi(`Detected an update time that is in the future: ${t} > ${i}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,mn.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var e;try{const i=null!==(null===(e=this.di)||void 0===e?void 0:e.getItem(this.Fi(t)));return Me("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Oi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){Oi("Failed to set zombie client id.",t)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Q_(n){return _r(n,"owner")}function CE(n){return _r(n,"clientMetadata")}function Kx(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class Zx{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=St(),r=St();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Zx(t,e.fromCache,i,r)}}class yoe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class pH{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,mn.G6)()?8:hj((0,mn.z$)())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yoe;return this.Ji(t,e,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,e,o,a.size)})}).next(()=>s.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(Jf()<=Ea.in.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",lp(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ce.resolve()):(Jf()<=Ea.in.DEBUG&&Me("QueryEngine","Query:",lp(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Jf()<=Ea.in.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",lp(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Zr(e))):ce.resolve())}ji(t,e){if(qj(e))return ce.resolve(null);let i=Zr(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=aE(e,null,"F"),i=Zr(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=St(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.Zi(e,a);return this.Xi(e,c,o,l.readTime)?this.ji(t,aE(e,null,"F")):this.es(t,c,e,l)}))})))}Hi(t,e,i,r){return qj(e)||r.isEqual(it.min())?ce.resolve(null):this.zi.getDocuments(t,i).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,i,r)?ce.resolve(null):(Jf()<=Ea.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lp(e)),this.es(t,o,e,lj(r,-1)).next(a=>a))})}Zi(t,e){let i=new kn(Qj(t));return e.forEach((r,s)=>{F_(t,s)&&(i=i.add(s))}),i}Xi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,i){return Jf()<=Ea.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",lp(e)),this.zi.getDocumentsMatchingQuery(t,e,to.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}class voe{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new Un(bt),this.rs=new gl(s=>md(s),O_),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hH(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function gH(n,t,e,i){return new voe(n,t,e,i)}function mH(n,t){return Yx.apply(this,arguments)}function Yx(){return(Yx=(0,ye.Z)(function*(n,t){const e=Be(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=St();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function _H(n){const t=Be(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function yH(n,t,e){let i=St(),r=St();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=Ls();return e.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(it.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:r}})}function Eoe(n,t){const e=Be(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function vp(n,t){const e=Be(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(s=>s?(r=s,ce.resolve(r)):e.Qr.allocateTargetId(i).next(o=>(r=new _l(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ns.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function bp(n,t,e){return Qx.apply(this,arguments)}function Qx(){return(Qx=(0,ye.Z)(function*(n,t,e){const i=Be(n),r=i.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Sc(o))throw o;Me("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})).apply(this,arguments)}function DE(n,t,e){const i=Be(n);let r=it.min(),s=St();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Be(l),m=f.rs.get(u);return void 0!==m?ce.resolve(f.ns.get(m)):f.Qr.getTargetData(c,u)}(i,o,Zr(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,e?r:it.min(),e?s:St())).next(a=>(wH(i,Yj(t),a),{documents:a,hs:s})))}function vH(n,t){const e=Be(n),i=Be(e.Qr),r=e.ns.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,t).next(o=>o?o.target:null))}function bH(n,t){const e=Be(n),i=e.ss.get(t)||it.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.os.getAllFromCollectionGroup(r,t,lj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(wH(e,t,r),r))}function wH(n,t,e){let i=n.ss.get(t)||it.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(t,i)}function Xx(){return(Xx=(0,ye.Z)(function*(n,t,e,i){const r=Be(n);let s=St(),o=Ls();for(const c of e){const u=t.Ps(c.metadata.name);c.document&&(s=s.add(u));const f=t.Is(c);f.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(u,f)}const a=r.os.newChangeBuffer({trackRemovals:!0}),l=yield vp(r,(u=i,Zr(op(qt.fromString(`__bundle__/docs/${u}`)))));var u;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>yH(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.cs,u.ls)).next(()=>u.cs)))})).apply(this,arguments)}function Doe(n,t){return Jx.apply(this,arguments)}function Jx(){return(Jx=(0,ye.Z)(function*(n,t,e=St()){const i=yield vp(n,Zr(Lx(t.bundledQuery))),r=Be(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ni(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.$r.saveNamedQuery(s,t);const a=i.withResumeToken(or.EMPTY_BYTE_STRING,o);return r.ns=r.ns.insert(a.targetId,a),r.Qr.updateTargetData(s,a).next(()=>r.Qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Qr.addMatchingKeys(s,e,i.targetId)).next(()=>r.$r.saveNamedQuery(s,t))})})).apply(this,arguments)}function EH(n,t){return`firestore_clients_${n}_${t}`}function CH(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function eM(n,t){return`firestore_targets_${n}_${t}`}class TE{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Es(t,e,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new Ie(r.error.code,r.error.message))),o?new TE(t,e,r.state,s):(Oi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class X_{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Es(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ie(i.error.code,i.error.message))),s?new X_(t,i.state,r):(Oi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class IE{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Es(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=Ix();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=pj(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new IE(t,s):(Oi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class tM{constructor(t,e){this.clientId=t,this.onlineState=e}static Es(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new tM(e.clientId,e.onlineState):(Oi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class nM{constructor(){this.activeTargetIds=Ix()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class iM{constructor(t,e,i,r,s){this.window=t,this.oi=e,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Un(bt),this.started=!1,this.ys=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=EH(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new nM),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ye.Z)(function*(){const e=yield t.syncEngine.Bi();for(const r of e){if(r===t.Vs)continue;const s=t.getItem(EH(t.persistenceKey,r));if(s){const o=IE.Es(r,s);o&&(t.ps=t.ps.insert(o.clientId,o))}}t.Ms();const i=t.storage.getItem(t.vs);if(i){const r=t.xs(i);r&&t.Os(r)}for(const r of t.ys)t.gs(r);t.ys=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let e=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Ls(t,"pending")}updateMutationState(t,e,i){this.Ls(t,e,i),this.Bs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(eM(this.persistenceKey,t));if(i){const r=X_.Es(t,i);r&&(e=r.state)}}return this.ks.As(t),this.Ms(),e}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(eM(this.persistenceKey,t))}updateQueryState(t,e,i){this.qs(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Bs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Me("SharedClientState","READ",t,e),e}setItem(t,e){Me("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Me("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Me("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ws)return void Oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ye.Z)(function*(){if(e.started){if(null!==i.key)if(e.bs.test(i.key)){if(null==i.newValue){const r=e.$s(i.key);return e.Us(r,null)}{const r=e.Ws(i.key,i.newValue);if(r)return e.Us(r.clientId,r)}}else if(e.Ds.test(i.key)){if(null!==i.newValue){const r=e.Gs(i.key,i.newValue);if(r)return e.zs(r)}}else if(e.Cs.test(i.key)){if(null!==i.newValue){const r=e.js(i.key,i.newValue);if(r)return e.Hs(r)}}else if(i.key===e.vs){if(null!==i.newValue){const r=e.xs(i.newValue);if(r)return e.Os(r)}}else if(i.key===e.Ss){const r=function(o){let a=no.oe;if(null!=o)try{const l=JSON.parse(o);tt("number"==typeof l),a=l}catch(l){Oi("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==no.oe&&e.sequenceNumberHandler(r)}else if(i.key===e.Fs){const r=e.Js(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Ys(s)))}}else e.ys.push(i)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(t,e,i){const r=new TE(this.currentUser,t,e,i),s=CH(this.persistenceKey,this.currentUser,t);this.setItem(s,r.ds())}Bs(t){const e=CH(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Qs(t){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:t}))}qs(t,e,i){const r=eM(this.persistenceKey,t),s=new X_(t,e,i);this.setItem(r,s.ds())}Ks(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Fs,e)}$s(t){const e=this.bs.exec(t);return e?e[1]:null}Ws(t,e){const i=this.$s(t);return IE.Es(i,e)}Gs(t,e){const i=this.Ds.exec(t),r=Number(i[1]);return TE.Es(new mr(void 0!==i[2]?i[2]:null),r,e)}js(t,e){const i=this.Cs.exec(t),r=Number(i[1]);return X_.Es(r,e)}xs(t){return tM.Es(t)}Js(t){return JSON.parse(t)}zs(t){var e=this;return(0,ye.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Zs(t.batchId,t.state,t.error);Me("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,e){const i=e?this.ps.insert(t,e):this.ps.remove(t),r=this.Ns(this.ps),s=this.Ns(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=i})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let e=Ix();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class DH{constructor(){this.no=new nM,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new nM,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Toe{io(t){}shutdown(){}}class TH{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let SE=null;function rM(){return null===SE?SE=268435456+Math.round(2147483648*Math.random()):SE++,"0x"+SE.toString(16)}const Ioe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Soe{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}const Qr="WebChannelConnection";class Aoe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,i,r,s,o){const a=rM(),l=this.vo(e,i.toUriEncodedString());Me("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,l,c,r).then(u=>(Me("RestConnection",`Received RPC '${e}' ${a}: `,u),u),u=>{throw Ns("RestConnection",`RPC '${e}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}xo(e,i,r,s,o,a){return this.Co(e,i,r,s,o)}Fo(e,i,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,i){return`${this.wo}/v1/${i}:${Ioe[e]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,i,r){const s=rM();return new Promise((o,a)=>{const l=new Q3;l.setWithCredentials(!0),l.listenOnce(J3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Y0.NO_ERROR:const u=l.getResponseJson();Me(Qr,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case Y0.TIMEOUT:Me(Qr,`RPC '${t}' ${s} timed out`),a(new Ie(de.DEADLINE_EXCEEDED,"Request time out"));break;case Y0.HTTP_ERROR:const f=l.getStatus();if(Me(Qr,`RPC '${t}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const v=function(E){const k=E.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(k)>=0?k:de.UNKNOWN}(y.status);a(new Ie(v,y.message))}else a(new Ie(de.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ie(de.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Me(Qr,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);Me(Qr,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",c,i,15)})}Oo(t,e,i){const r=rM(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=nj(),a=tj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new X3({})),this.Fo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;const u=s.join("");Me(Qr,`Creating RPC '${t}' stream ${r}: ${u}`,l);const f=o.createWebChannel(u,l);let m=!1,y=!1;const v=new Soe({lo:E=>{y?Me(Qr,`Not sending because RPC '${t}' stream ${r} is closed:`,E):(m||(Me(Qr,`Opening RPC '${t}' stream ${r} transport.`),f.open(),m=!0),Me(Qr,`RPC '${t}' stream ${r} sending:`,E),f.send(E))},ho:()=>f.close()}),w=(E,k,S)=>{E.listen(k,R=>{try{S(R)}catch(z){setTimeout(()=>{throw z},0)}})};return w(f,D_.EventType.OPEN,()=>{y||(Me(Qr,`RPC '${t}' stream ${r} transport opened.`),v.mo())}),w(f,D_.EventType.CLOSE,()=>{y||(y=!0,Me(Qr,`RPC '${t}' stream ${r} transport closed`),v.po())}),w(f,D_.EventType.ERROR,E=>{y||(y=!0,Ns(Qr,`RPC '${t}' stream ${r} transport errored:`,E),v.po(new Ie(de.UNAVAILABLE,"The operation could not be completed")))}),w(f,D_.EventType.MESSAGE,E=>{var k;if(!y){const S=E.data[0];tt(!!S);const z=S.error||(null===(k=S[0])||void 0===k?void 0:k.error);if(z){Me(Qr,`RPC '${t}' stream ${r} received error:`,z);const q=z.status;let ee=function(P){const U=$i[P];if(void 0!==U)return mU(U)}(q),N=z.message;void 0===ee&&(ee=de.INTERNAL,N="Unknown error status: "+q+" with message "+z.message),y=!0,v.po(new Ie(ee,N)),f.close()}else Me(Qr,`RPC '${t}' stream ${r} received:`,S),v.yo(S)}}),w(a,ej.STAT_EVENT,E=>{E.stat===dx.PROXY?Me(Qr,`RPC '${t}' stream ${r} detected buffering proxy`):E.stat===dx.NOPROXY&&Me(Qr,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}}function IH(){return typeof window<"u"?window:null}function AE(){return typeof document<"u"?document:null}function J_(n){return new Vse(n,!0)}class sM{constructor(t,e,i=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-i);r>0&&Me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class SH{constructor(t,e,i,r,s,o,a,l){this.oi=t,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new sM(t,e)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var t=this;return(0,ye.Z)(function*(){t.Zo()&&(yield t.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){var t=this;return(0,ye.Z)(function*(){if(t.Xo())return t.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){var i=this;return(0,ye.Z)(function*(){i.s_(),i.o_(),i.Yo.cancel(),i.jo++,4!==t?i.Yo.reset():e&&e.code===de.RESOURCE_EXHAUSTED?(Oi(e.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),i.Yo.Ko()):e&&e.code===de.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.__(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Ao(e)})()}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===e&&this.u_(i,r)},i=>{t(()=>{const r=new Ie(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(t,e){const i=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){var t=this;this.state=5,this.Yo.$o((0,ye.Z)(function*(){t.state=0,t.start()}))}c_(t){return Me("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xoe extends SH{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=function Use(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(c=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Qe(),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(tt(void 0===u||"string"==typeof u),or.fromBase64String(u||"")):(tt(void 0===u||u instanceof Buffer||u instanceof Uint8Array),or.fromUint8Array(u||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=void 0===c.code?de.UNKNOWN:mU(c.code);return new Ie(u,c.message||"")}(o);e=new wU(i,r,s,a||null)}else if("documentChange"in t){const i=t.documentChange,r=Sa(n,i.document.name),s=Ni(i.document.updateTime),o=i.document.createTime?Ni(i.document.createTime):it.min(),a=new xr({mapValue:{fields:i.document.fields}}),l=Yn.newFoundDocument(r,s,o,a);e=new hE(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){const i=t.documentDelete,r=Sa(n,i.document),s=i.readTime?Ni(i.readTime):it.min(),o=Yn.newNoDocument(r,s);e=new hE([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const i=t.documentRemove,r=Sa(n,i.document);e=new hE([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return Qe();{const i=t.filter,{count:r=0,unchangedNames:s}=i,o=new Rse(r,s);e=new bU(i.targetId,o)}}var c;return e}(this.serializer,t),i=function(s){if(!("targetChange"in s))return it.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?it.min():o.readTime?Ni(o.readTime):it.min()}(t);return this.listener.h_(e,i)}P_(t){const e={};e.database=Nx(this.serializer),e.addTarget=function(s,o){let a;const l=o.target;if(a=sE(l)?{documents:RU(s,l)}:{query:fE(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TU(s,o.resumeToken);const c=Rx(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(it.min())>0){a.readTime=fp(s,o.snapshotVersion.toTimestamp());const c=Rx(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,t);const i=function zse(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.i_(e)}I_(t){const e={};e.database=Nx(this.serializer),e.removeTarget=t,this.i_(e)}}class Moe extends SH{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(tt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=function Hse(n,t){return n&&n.length>0?(tt(void 0!==t),n.map(e=>function(r,s){let o=Ni(r.updateTime?r.updateTime:s);return o.isEqual(it.min())&&(o=Ni(s)),new xse(o,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Ni(t.commitTime);return this.listener.A_(i,e)}return tt(!t.writeResults||0===t.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Nx(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>W_(this.serializer,i))};this.i_(e)}}class koe extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Ie(de.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Ox(e,i),r,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(de.UNKNOWN,s.toString())})}xo(t,e,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,Ox(e,i),r,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(de.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Roe{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,"Online"===t&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Oi(e),this.y_=!1):Me("OnlineStateTracker",e)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Poe{constructor(t,e,i,r,s){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{i.enqueueAndForget((0,ye.Z)(function*(){var l;Vc(o)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,ye.Z)(function*(u){const f=Be(u);f.M_.add(4),yield wp(f),f.N_.set("Unknown"),f.M_.delete(4),yield ey(f)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.N_=new Roe(i,r)}}function ey(n){return oM.apply(this,arguments)}function oM(){return(oM=(0,ye.Z)(function*(n){if(Vc(n))for(const t of n.x_)yield t(!0)})).apply(this,arguments)}function wp(n){return aM.apply(this,arguments)}function aM(){return(aM=(0,ye.Z)(function*(n){for(const t of n.x_)yield t(!1)})).apply(this,arguments)}function xE(n,t){const e=Be(n);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),uM(e)?cM(e):Dp(e).Xo()&&lM(e,t))}function Ep(n,t){const e=Be(n),i=Dp(e);e.F_.delete(t),i.Xo()&&AH(e,t),0===e.F_.size&&(i.Xo()?i.n_():Vc(e)&&e.N_.set("Unknown"))}function lM(n,t){if(n.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Dp(n).P_(t)}function AH(n,t){n.L_.xe(t),Dp(n).I_(t)}function cM(n){n.L_=new Ose({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.F_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Dp(n).start(),n.N_.w_()}function uM(n){return Vc(n)&&!Dp(n).Zo()&&n.F_.size>0}function Vc(n){return 0===Be(n).M_.size}function xH(n){n.L_=void 0}function Ooe(n){return dM.apply(this,arguments)}function dM(){return(dM=(0,ye.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function Noe(n){return hM.apply(this,arguments)}function hM(){return(hM=(0,ye.Z)(function*(n){n.F_.forEach((t,e)=>{lM(n,t)})})).apply(this,arguments)}function Foe(n,t){return fM.apply(this,arguments)}function fM(){return(fM=(0,ye.Z)(function*(n,t){xH(n),uM(n)?(n.N_.D_(t),cM(n)):n.N_.set("Unknown")})).apply(this,arguments)}function Loe(n,t,e){return pM.apply(this,arguments)}function pM(){return pM=(0,ye.Z)(function*(n,t,e){if(n.N_.set("Online"),t instanceof wU&&2===t.state&&t.cause)try{yield(i=(0,ye.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.F_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.F_.delete(l),s.L_.removeTarget(l))}),function r(s,o){return i.apply(this,arguments)})(n,t)}catch(i){Me("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield ME(n,i)}else if(t instanceof hE?n.L_.Ke(t):t instanceof bU?n.L_.He(t):n.L_.We(t),!e.isEqual(it.min()))try{const i=yield _H(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.F_.get(c);u&&s.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.F_.get(l);if(!u)return;s.F_.set(l,u.withResumeToken(or.EMPTY_BYTE_STRING,u.snapshotVersion)),AH(s,l);const f=new _l(u.target,l,c,u.sequenceNumber);lM(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){Me("RemoteStore","Failed to raise snapshot:",i),yield ME(n,i)}var i}),pM.apply(this,arguments)}function ME(n,t,e){return gM.apply(this,arguments)}function gM(){return(gM=(0,ye.Z)(function*(n,t,e){if(!Sc(t))throw t;n.M_.add(1),yield wp(n),n.N_.set("Offline"),e||(e=()=>_H(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield e(),n.M_.delete(1),yield ey(n)}))})).apply(this,arguments)}function MH(n,t){return t().catch(e=>ME(n,e,t))}function Cp(n){return mM.apply(this,arguments)}function mM(){return(mM=(0,ye.Z)(function*(n){const t=Be(n),e=Bc(t);let i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Voe(t);)try{const r=yield Eoe(t.localStore,i);if(null===r){0===t.v_.length&&e.n_();break}i=r.batchId,Boe(t,r)}catch(r){yield ME(t,r)}kH(t)&&RH(t)})).apply(this,arguments)}function Voe(n){return Vc(n)&&n.v_.length<10}function Boe(n,t){n.v_.push(t);const e=Bc(n);e.Xo()&&e.E_&&e.d_(t.mutations)}function kH(n){return Vc(n)&&!Bc(n).Zo()&&n.v_.length>0}function RH(n){Bc(n).start()}function joe(n){return _M.apply(this,arguments)}function _M(){return(_M=(0,ye.Z)(function*(n){Bc(n).V_()})).apply(this,arguments)}function Uoe(n){return yM.apply(this,arguments)}function yM(){return(yM=(0,ye.Z)(function*(n){const t=Bc(n);for(const e of n.v_)t.d_(e.mutations)})).apply(this,arguments)}function Hoe(n,t,e){return vM.apply(this,arguments)}function vM(){return(vM=(0,ye.Z)(function*(n,t,e){const i=n.v_.shift(),r=xx.from(i,t,e);yield MH(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Cp(n)})).apply(this,arguments)}function zoe(n,t){return bM.apply(this,arguments)}function bM(){return bM=(0,ye.Z)(function*(n,t){var e;t&&Bc(n).E_&&(yield(e=(0,ye.Z)(function*(r,s){if(gU(a=s.code)&&a!==de.ABORTED){const o=r.v_.shift();Bc(r).t_(),yield MH(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Cp(r)}var a}),function i(r,s){return e.apply(this,arguments)})(n,t)),kH(n)&&RH(n)}),bM.apply(this,arguments)}function PH(n,t){return wM.apply(this,arguments)}function wM(){return(wM=(0,ye.Z)(function*(n,t){const e=Be(n);e.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const i=Vc(e);e.M_.add(3),yield wp(e),i&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield ey(e)})).apply(this,arguments)}function EM(n,t){return CM.apply(this,arguments)}function CM(){return(CM=(0,ye.Z)(function*(n,t){const e=Be(n);t?(e.M_.delete(2),yield ey(e)):t||(e.M_.add(2),yield wp(e),e.N_.set("Unknown"))})).apply(this,arguments)}function Dp(n){return n.B_||(n.B_=function(e,i,r){const s=Be(e);return s.f_(),new xoe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:Ooe.bind(null,n),To:Noe.bind(null,n),Ao:Foe.bind(null,n),h_:Loe.bind(null,n)}),n.x_.push(function(){var t=(0,ye.Z)(function*(e){e?(n.B_.t_(),uM(n)?cM(n):n.N_.set("Unknown")):(yield n.B_.stop(),xH(n))});return function(e){return t.apply(this,arguments)}}())),n.B_}function Bc(n){return n.k_||(n.k_=function(e,i,r){const s=Be(e);return s.f_(),new Moe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:joe.bind(null,n),Ao:zoe.bind(null,n),R_:Uoe.bind(null,n),A_:Hoe.bind(null,n)}),n.x_.push(function(){var t=(0,ye.Z)(function*(e){e?(n.k_.t_(),yield Cp(n)):(yield n.k_.stop(),n.v_.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(e){return t.apply(this,arguments)}}())),n.k_}class DM{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){const o=Date.now()+i,a=new DM(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(de.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(n,t){if(Oi("AsyncQueue",`${t}: ${n}`),Sc(n))return new Ie(de.UNAVAILABLE,`${t}: ${n}`);throw n}class Ip{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Ue.comparator(e.key,i.key):(e,i)=>Ue.comparator(e.key,i.key),this.keyedMap=L_(),this.sortedSet=new Un(this.comparator)}static emptySet(t){return new Ip(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ip)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Ip;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class OH{constructor(){this.q_=new Un(Ue.comparator)}track(t){const e=t.doc.key,i=this.q_.get(e);i?0!==t.type&&3===i.type?this.q_=this.q_.insert(e,t):3===t.type&&1!==i.type?this.q_=this.q_.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.q_=this.q_.remove(e):1===t.type&&2===i.type?this.q_=this.q_.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):Qe():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,i)=>{t.push(i)}),t}}class Sp{constructor(t,e,i,r,s,o,a,l,c){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,i,r,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new Sp(t,e,Ip.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&N_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class $oe{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Woe{constructor(){this.queries=new gl(t=>Zj(t),N_),this.onlineState="Unknown",this.z_=new Set}}function TM(n,t){return IM.apply(this,arguments)}function IM(){return(IM=(0,ye.Z)(function*(n,t){const e=Be(n);let i=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new $oe,i=t.G_()?0:1);try{switch(i){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){const a=Tp(o,`Initialization of query '${lp(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&xM(e)})).apply(this,arguments)}function SM(n,t){return AM.apply(this,arguments)}function AM(){return(AM=(0,ye.Z)(function*(n,t){const e=Be(n),i=t.query;let r=3;const s=e.queries.get(i);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),0===s.U_.length?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})).apply(this,arguments)}function qoe(n,t){const e=Be(n);let i=!1;for(const r of t){const o=e.queries.get(r.query);if(o){for(const a of o.U_)a.H_(r)&&(i=!0);o.K_=r}}i&&xM(e)}function Goe(n,t,e){const i=Be(n),r=i.queries.get(t);if(r)for(const s of r.U_)s.onError(e);i.queries.delete(t)}function xM(n){n.z_.forEach(t=>{t.next()})}var MM,NH;(NH=MM||(MM={})).J_="default",NH.Cache="cache";class kM{constructor(t,e,i){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Sp(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){return!t.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ea(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(t){t=Sp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==MM.Cache}}class Koe{constructor(t,e){this.ia=t,this.byteLength=e}sa(){return"metadata"in this.ia}}class FH{constructor(t){this.serializer=t}Ps(t){return Sa(this.serializer,t)}Is(t){return t.metadata.exists?kU(this.serializer,t.document,!1):Yn.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return Ni(t)}}class Zoe{constructor(t,e,i){this.oa=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LH(t)}_a(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ia.namedQuery)this.queries.push(t.ia.namedQuery);else if(t.ia.documentMetadata){this.documents.push({metadata:t.ia.documentMetadata}),t.ia.documentMetadata.exists||++e;const i=qt.fromString(t.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ia.document&&(this.documents[this.documents.length-1].document=t.ia.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}aa(t){const e=new Map,i=new FH(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.Ps(r.metadata.name);for(const o of r.metadata.queries){const a=(e.get(o)||St()).add(s);e.set(o,a)}}return e}complete(){var t=this;return(0,ye.Z)(function*(){const e=yield function Coe(n,t,e,i){return Xx.apply(this,arguments)}(t.localStore,new FH(t.serializer),t.documents,t.oa.id),i=t.aa(t.documents);for(const r of t.queries)yield Doe(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,ua:t.collectionGroups,ca:e}})()}}function LH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class VH{constructor(t){this.key=t}}class BH{constructor(t){this.key=t}}class jH{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=St(),this.mutatedKeys=St(),this.Ia=Qj(t),this.Ta=new Ip(this.Ia)}get Ea(){return this.la}da(t,e){const i=e?e.Aa:new OH,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,f)=>{const m=r.get(u),y=F_(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?v!==w&&(i.track({type:3,doc:y}),E=!0):this.Ra(m,y)||(i.track({type:2,doc:y}),E=!0,(l&&this.Ia(y,l)>0||c&&this.Ia(y,c)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),E=!0):m&&!y&&(i.track({type:1,doc:m}),E=!0,(l||c)&&(a=!0)),E&&(y?(o=o.add(y),s=w?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ta:o,Aa:i,Xi:a,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((u,f)=>function(y,v){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return w(y)-w(v)}(u.type,f.type)||this.Ia(u.doc,f.doc)),this.Va(i),r=null!=r&&r;const a=e&&!r?this.ma():[],l=0===this.Pa.size&&this.current&&!r?1:0,c=l!==this.ha;return this.ha=l,0!==o.length||c?{snapshot:new Sp(this.query,t.Ta,s,o,t.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new OH,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=St(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const e=[];return t.forEach(i=>{this.Pa.has(i)||e.push(new BH(i))}),this.Pa.forEach(i=>{t.has(i)||e.push(new VH(i))}),e}pa(t){this.la=t.hs,this.Pa=St();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Sp.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Yoe{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Qoe{constructor(t){this.key=t,this.wa=!1}}class Xoe{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new gl(a=>Zj(a),N_),this.Da=new Map,this.Ca=new Set,this.va=new Un(Ue.comparator),this.Fa=new Map,this.Ma=new $x,this.xa={},this.Oa=new Map,this.Na=Dd.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Joe(n,t){return RM.apply(this,arguments)}function RM(){return(RM=(0,ye.Z)(function*(n,t,e=!0){const i=kE(n);let r;const s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield UH(i,t,e,!0),r})).apply(this,arguments)}function eae(n,t){return PM.apply(this,arguments)}function PM(){return(PM=(0,ye.Z)(function*(n,t){const e=kE(n);yield UH(e,t,!0,!1)})).apply(this,arguments)}function UH(n,t,e,i){return OM.apply(this,arguments)}function OM(){return(OM=(0,ye.Z)(function*(n,t,e,i){const r=yield vp(n.localStore,Zr(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=yield NM(n,t,s,"current"===o,r.resumeToken)),n.isPrimaryClient&&e&&xE(n.remoteStore,r),a})).apply(this,arguments)}function NM(n,t,e,i,r){return FM.apply(this,arguments)}function FM(){return FM=(0,ye.Z)(function*(n,t,e,i,r){n.Ba=(f,m,y)=>{return(v=(0,ye.Z)(function*(E,k,S,R){let z=k.view.da(S);z.Xi&&(z=yield DE(E.localStore,k.query,!1).then(({documents:M})=>k.view.da(M,z)));const q=R&&R.targetChanges.get(k.targetId),ee=R&&null!=R.targetMismatches.get(k.targetId),N=k.view.applyChanges(z,E.isPrimaryClient,q,ee);return GM(E,k.targetId,N.fa),N.snapshot}),function w(E,k,S,R){return v.apply(this,arguments)})(n,f,m,y);var v};const s=yield DE(n.localStore,t,!0),o=new jH(t,s.hs),a=o.da(s.documents),l=z_.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),c=o.applyChanges(a,n.isPrimaryClient,l);GM(n,e,c.fa);const u=new Yoe(t,e,o);return n.ba.set(t,u),n.Da.has(e)?n.Da.get(e).push(t):n.Da.set(e,[t]),c.snapshot}),FM.apply(this,arguments)}function tae(n,t,e){return LM.apply(this,arguments)}function LM(){return(LM=(0,ye.Z)(function*(n,t,e){const i=Be(n),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!N_(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Ep(i.remoteStore,r.targetId),Ap(i,r.targetId)}).catch(Ic))):(Ap(i,r.targetId),yield bp(i.localStore,r.targetId,!0))})).apply(this,arguments)}function nae(n,t){return VM.apply(this,arguments)}function VM(){return(VM=(0,ye.Z)(function*(n,t){const e=Be(n),i=e.ba.get(t),r=e.Da.get(i.targetId);e.isPrimaryClient&&1===r.length&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Ep(e.remoteStore,i.targetId))})).apply(this,arguments)}function BM(){return(BM=(0,ye.Z)(function*(n,t,e){const i=rk(n);try{const r=yield function(o,a){const l=Be(o),c=oi.now(),u=a.reduce((y,v)=>y.add(v.key),St());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=Ls(),w=St();return l.os.getEntries(y,u).next(E=>{v=E,v.forEach((k,S)=>{S.isValidDocument()||(w=w.add(k))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,v)).next(E=>{f=E;const k=[];for(const S of a){const R=kse(S,f.get(S.key).overlayedDocument);null!=R&&k.push(new ml(S.key,R,Pj(R.value.mapValue),ai.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,k,a)}).next(E=>{m=E;const k=E.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(y,E.batchId,k)})}).then(()=>({batchId:m.batchId,changes:Jj(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Un(bt)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(i,r.batchId,e),yield yl(i,r.changes),yield Cp(i.remoteStore)}catch(r){const s=Tp(r,"Failed to persist write");e.reject(s)}})).apply(this,arguments)}function HH(n,t){return jM.apply(this,arguments)}function jM(){return(jM=(0,ye.Z)(function*(n,t){const e=Be(n);try{const i=yield function woe(n,t){const e=Be(n),i=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const a=[];t.targetChanges.forEach((u,f)=>{const m=r.get(f);if(!m)return;a.push(e.Qr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>e.Qr.addMatchingKeys(s,u.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);var w,E,k;null!==t.targetMismatches.get(f)?y=y.withResumeToken(or.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,i)),r=r.insert(f,y),E=y,k=u,(0===(w=m).resumeToken.approximateByteSize()||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0)&&a.push(e.Qr.updateTargetData(s,y))});let l=Ls(),c=St();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(yH(s,o,t.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!i.isEqual(it.min())){const u=e.Qr.getLastRemoteSnapshotVersion(s).next(f=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return ce.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(e.ns=r,s))}(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(tt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?tt(o.wa):r.removedDocuments.size>0&&(tt(o.wa),o.wa=!1))}),yield yl(e,i,t)}catch(i){yield Ic(i)}})).apply(this,arguments)}function zH(n,t,e){const i=Be(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Be(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const m of f.U_)m.j_(a)&&(c=!0)}),c&&xM(l)}(i.eventManager,t),r.length&&i.Sa.h_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function rae(n,t,e){return UM.apply(this,arguments)}function UM(){return(UM=(0,ye.Z)(function*(n,t,e){const i=Be(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Fa.get(t),s=r&&r.key;if(s){let o=new Un(Ue.comparator);o=o.insert(s,Yn.newNoDocument(s,it.min()));const a=St().add(s),l=new H_(it.min(),new Map,new Un(bt),o,a);yield HH(i,l),i.va=i.va.remove(s),i.Fa.delete(t),KM(i)}else yield bp(i.localStore,t,!1).then(()=>Ap(i,t,e)).catch(Ic)})).apply(this,arguments)}function sae(n,t){return HM.apply(this,arguments)}function HM(){return(HM=(0,ye.Z)(function*(n,t){const e=Be(n),i=t.batch.batchId;try{const r=yield function boe(n,t){const e=Be(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,m=f.keys();let y=ce.resolve();return m.forEach(v=>{y=y.next(()=>u.getEntry(l,v)).next(w=>{const E=c.docVersions.get(v);tt(null!==E),w.version.compareTo(E)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=St();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);qM(e,i,null),WM(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield yl(e,r)}catch(r){yield Ic(r)}})).apply(this,arguments)}function oae(n,t,e){return zM.apply(this,arguments)}function zM(){return(zM=(0,ye.Z)(function*(n,t,e){const i=Be(n);try{const r=yield function(o,a){const l=Be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(tt(null!==f),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);qM(i,t,e),WM(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield yl(i,r)}catch(r){yield Ic(r)}})).apply(this,arguments)}function $M(){return($M=(0,ye.Z)(function*(n,t){const e=Be(n);Vc(e.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const a=Be(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Oa.get(i)||[];r.push(t),e.Oa.set(i,r)}catch(i){const r=Tp(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})).apply(this,arguments)}function WM(n,t){(n.Oa.get(t)||[]).forEach(e=>{e.resolve()}),n.Oa.delete(t)}function qM(n,t,e){const i=Be(n);let r=i.xa[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function Ap(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Da.get(t))n.ba.delete(i),e&&n.Sa.ka(i,e);n.Da.delete(t),n.isPrimaryClient&&n.Ma.Vr(t).forEach(i=>{n.Ma.containsKey(i)||$H(n,i)})}function $H(n,t){n.Ca.delete(t.path.canonicalString());const e=n.va.get(t);null!==e&&(Ep(n.remoteStore,e),n.va=n.va.remove(t),n.Fa.delete(e),KM(n))}function GM(n,t,e){for(const i of e)i instanceof VH?(n.Ma.addReference(i.key,t),lae(n,i)):i instanceof BH?(Me("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,t),n.Ma.containsKey(i.key)||$H(n,i.key)):Qe()}function lae(n,t){const e=t.key,i=e.path.canonicalString();n.va.get(e)||n.Ca.has(i)||(Me("SyncEngine","New document in limbo: "+e),n.Ca.add(i),KM(n))}function KM(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const t=n.Ca.values().next().value;n.Ca.delete(t);const e=new Ue(qt.fromString(t)),i=n.Na.next();n.Fa.set(i,new Qoe(e)),n.va=n.va.insert(e,i),xE(n.remoteStore,new _l(Zr(op(e.path)),i,"TargetPurposeLimboResolution",no.oe))}}function yl(n,t,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,ye.Z)(function*(n,t,e){const i=Be(n),r=[],s=[],o=[];var a;i.ba.isEmpty()||(i.ba.forEach((a,l)=>{o.push(i.Ba(l,t,e).then(c=>{if((c||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c&&!c.fromCache?"current":"not-current"),c){r.push(c);const u=Zx.Ki(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.Sa.h_(r),yield(a=(0,ye.Z)(function*(c,u){const f=Be(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ce.forEach(u,y=>ce.forEach(y.qi,v=>f.persistence.referenceDelegate.addReference(m,y.targetId,v)).next(()=>ce.forEach(y.Qi,v=>f.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))}catch(m){if(!Sc(m))throw m;Me("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const y=m.targetId;if(!m.fromCache){const v=f.ns.get(y),E=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);f.ns=f.ns.insert(y,E)}}}),function l(c,u){return a.apply(this,arguments)})(i.localStore,s))}),ZM.apply(this,arguments)}function cae(n,t){return YM.apply(this,arguments)}function YM(){return(YM=(0,ye.Z)(function*(n,t){const e=Be(n);if(!e.currentUser.isEqual(t)){Me("SyncEngine","User change. New user:",t.toKey());const i=yield mH(e.localStore,t);e.currentUser=t,(s=e).Oa.forEach(a=>{a.forEach(l=>{l.reject(new Ie(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield yl(e,i.us)}var s})).apply(this,arguments)}function uae(n,t){const e=Be(n),i=e.Fa.get(t);if(i&&i.wa)return St().add(i.key);{let r=St();const s=e.Da.get(t);if(!s)return r;for(const o of s){const a=e.ba.get(o);r=r.unionWith(a.view.Ea)}return r}}function dae(n,t){return QM.apply(this,arguments)}function QM(){return(QM=(0,ye.Z)(function*(n,t){const e=Be(n),i=yield DE(e.localStore,t.query,!0),r=t.view.pa(i);return e.isPrimaryClient&&GM(e,t.targetId,r.fa),r})).apply(this,arguments)}function hae(n,t){return XM.apply(this,arguments)}function XM(){return(XM=(0,ye.Z)(function*(n,t){const e=Be(n);return bH(e.localStore,t).then(i=>yl(e,i))})).apply(this,arguments)}function fae(n,t,e,i){return JM.apply(this,arguments)}function JM(){return(JM=(0,ye.Z)(function*(n,t,e,i){const r=Be(n),s=yield function(a,l){const c=Be(a),u=Be(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>u.vn(f,l).next(m=>m?c.localDocuments.getDocuments(f,m):ce.resolve(null)))}(r.localStore,t);var l;null!==s?("pending"===e?yield Cp(r.remoteStore):"acknowledged"===e||"rejected"===e?(qM(r,t,i||null),WM(r,t),l=t,Be(Be(r.localStore).mutationQueue).Mn(l)):Qe(),yield yl(r,s)):Me("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function ek(){return(ek=(0,ye.Z)(function*(n,t){const e=Be(n);if(kE(e),rk(e),!0===t&&!0!==e.La){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield WH(e,i.toArray());e.La=!0,yield EM(e.remoteStore,!0);for(const s of r)xE(e.remoteStore,s)}else if(!1===t&&!1!==e.La){const i=[];let r=Promise.resolve();e.Da.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Ap(e,o),bp(e.localStore,o,!0))),Ep(e.remoteStore,o)}),yield r,yield WH(e,i),function(o){const a=Be(o);a.Fa.forEach((l,c)=>{Ep(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new Un(Ue.comparator)}(e),e.La=!1,yield EM(e.remoteStore,!1)}})).apply(this,arguments)}function WH(n,t,e){return tk.apply(this,arguments)}function tk(){return(tk=(0,ye.Z)(function*(n,t,e){const i=Be(n),r=[],s=[];for(const o of t){let a;const l=i.Da.get(o);if(l&&0!==l.length){a=yield vp(i.localStore,Zr(l[0]));for(const c of l){const u=i.ba.get(c),f=yield dae(i,u);f.snapshot&&s.push(f.snapshot)}}else{const c=yield vH(i.localStore,o);a=yield vp(i.localStore,c),yield NM(i,qH(c),o,!1,a.resumeToken)}r.push(a)}return i.Sa.h_(s),r})).apply(this,arguments)}function qH(n){return Wj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gae(n){return e=Be(n).localStore,Be(Be(e).persistence).Bi();var e}function mae(n,t,e,i){return nk.apply(this,arguments)}function nk(){return(nk=(0,ye.Z)(function*(n,t,e,i){const r=Be(n);if(r.La)return void Me("SyncEngine","Ignoring unexpected query state notification.");const s=r.Da.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const o=yield bH(r.localStore,Yj(s[0])),a=H_.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,or.EMPTY_BYTE_STRING);yield yl(r,o,a);break}case"rejected":yield bp(r.localStore,t,!0),Ap(r,t,i);break;default:Qe()}})).apply(this,arguments)}function _ae(n,t,e){return ik.apply(this,arguments)}function ik(){return(ik=(0,ye.Z)(function*(n,t,e){const i=kE(n);if(i.La){for(const r of t){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Me("SyncEngine","Adding an already active target "+r);continue}const s=yield vH(i.localStore,r),o=yield vp(i.localStore,s);yield NM(i,qH(s),o.targetId,!1,o.resumeToken),xE(i.remoteStore,o)}for(const r of e)i.Da.has(r)&&(yield bp(i.localStore,r,!1).then(()=>{Ep(i.remoteStore,r),Ap(i,r)}).catch(Ic))}})).apply(this,arguments)}function kE(n){const t=Be(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=HH.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uae.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rae.bind(null,t),t.Sa.h_=qoe.bind(null,t.eventManager),t.Sa.ka=Goe.bind(null,t.eventManager),t}function rk(n){const t=Be(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sae.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oae.bind(null,t),t}class ty{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ye.Z)(function*(){e.serializer=J_(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return gH(this.persistence,new pH,t.initialUser,this.serializer)}createPersistence(t){return new Wx(wE.Hr,this.serializer)}createSharedClientState(t){return new DH}terminate(){var t=this;return(0,ye.Z)(function*(){var e,i;null===(e=t.gcScheduler)||void 0===e||e.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class sk extends ty{constructor(t,e,i){super(),this.Qa=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,ye.Z)(function*(){yield e().call(i,t),yield i.Qa.initialize(i,t),yield rk(i.Qa.syncEngine),yield Cp(i.Qa.remoteStore),yield i.persistence.fi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return gH(this.persistence,new pH,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new sH(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new zre(e,this.persistence);return new Hre(t.asyncQueue,i)}createPersistence(t){const e=Kx(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new Gx(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,IH(),AE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new DH}}class GH extends sk{constructor(t,e){super(t,e,!1),this.Qa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,ye.Z)(function*(){yield e().call(i,t);const r=i.Qa.syncEngine;i.sharedClientState instanceof iM&&(i.sharedClientState.syncEngine={Zs:fae.bind(null,r),Xs:mae.bind(null,r),eo:_ae.bind(null,r),Bi:gae.bind(null,r),Ys:hae.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.fi(function(){var s=(0,ye.Z)(function*(o){yield function pae(n,t){return ek.apply(this,arguments)}(i.Qa.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=IH();if(!iM.D(e))throw new Ie(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Kx(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new iM(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class xp{initialize(t,e){var i=this;return(0,ye.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>zH(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=cae.bind(null,i.syncEngine),yield EM(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Woe}createDatastore(t){const e=J_(t.databaseInfo.databaseId),i=new Aoe(t.databaseInfo);return new koe(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return i=this.localStore,r=this.datastore,s=t.asyncQueue,o=e=>zH(this.syncEngine,e,0),a=TH.D()?new TH:new Toe,new Poe(i,r,s,o,a);var i,r,s,o,a}createSyncEngine(t,e){return function(r,s,o,a,l,c,u){const f=new Xoe(r,s,o,a,l,c);return u&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){var t=this;return(0,ye.Z)(function*(){var e,i;yield(i=(0,ye.Z)(function*(s){const o=Be(s);Me("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield wp(o),o.O_.shutdown(),o.N_.set("Unknown")}),function r(s){return i.apply(this,arguments)})(t.remoteStore),null===(e=t.datastore)||void 0===e||e.terminate()})()}}function KH(n,t=10240){let e=0;return{read:()=>(0,ye.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class RE{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Oi("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class bae{constructor(t,e){this.Ua=t,this.serializer=e,this.metadata=new sr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){var t=this;return(0,ye.Z)(function*(){return t.metadata.promise})()}qa(){var t=this;return(0,ye.Z)(function*(){return yield t.getMetadata(),t.Ga()})()}Ga(){var t=this;return(0,ye.Z)(function*(){const e=yield t.za();if(null===e)return null;const i=t.Wa.decode(e),r=Number(i);isNaN(r)&&t.ja(`length string (${i}) is not valid number`);const s=yield t.Ha(r);return new Koe(JSON.parse(s),e.length+r)})()}Ja(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}za(){var t=this;return(0,ye.Z)(function*(){for(;t.Ja()<0&&!(yield t.Ya()););if(0===t.buffer.length)return null;const e=t.Ja();e<0&&t.ja("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Ha(t){var e=this;return(0,ye.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ya())&&e.ja("Reached the end of bundle when more is expected.");const i=e.Wa.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}ja(t){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${t}`)}Ya(){var t=this;return(0,ye.Z)(function*(){const e=yield t.Ua.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class wae{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw e.lastTransactionError=new Ie(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),e.lastTransactionError;const i=yield(r=(0,ye.Z)(function*(o,a){const l=Be(o),c={documents:a.map(y=>$_(l.serializer,y))},u=yield l.xo("BatchGetDocuments",l.serializer.databaseId,qt.emptyPath(),c,a.length),f=new Map;u.forEach(y=>{const v=function jse(n,t){return"found"in t?function(i,r){tt(!!r.found);const s=Sa(i,r.found.name),o=Ni(r.found.updateTime),a=r.found.createTime?Ni(r.found.createTime):it.min(),l=new xr({mapValue:{fields:r.found.fields}});return Yn.newFoundDocument(s,o,a,l)}(n,t):"missing"in t?function(i,r){tt(!!r.missing),tt(!!r.readTime);const s=Sa(i,r.missing),o=Ni(r.readTime);return Yn.newNoDocument(s,o)}(n,t):Qe()}(l.serializer,y);f.set(v.key.toString(),v)});const m=[];return a.forEach(y=>{const v=f.get(y.toString());tt(!!v),m.push(v)}),m}),function s(o,a){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new hp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=Ue.fromPath(r);t.mutations.push(new Sx(s,t.precondition(s)))}),yield(i=(0,ye.Z)(function*(s,o){const a=Be(s),l={writes:o.map(c=>W_(a.serializer,c))};yield a.Co("Commit",a.serializer.databaseId,qt.emptyPath(),l)}),function r(s,o){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Qe();e=it.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ie(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(it.min())?ai.exists(!1):ai.updateTime(e):ai.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(it.min()))throw new Ie(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ai.updateTime(e)}return ai.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Eae{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Za=i.maxAttempts,this.Yo=new sM(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var t=this;this.Yo.$o((0,ye.Z)(function*(){const e=new wae(t.datastore),i=t.tu(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.nu(s)}))}).catch(r=>{t.nu(r)})}))}tu(t){try{const e=this.updateFunction(t);return!S_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(t){this.Za>0&&this.ru(t)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(t)}ru(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!gU(e)}return!1}}class Cae{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=mr.UNAUTHENTICATED,this.clientId=oj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,ye.Z)(function*(a){Me("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(Me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Tp(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function PE(n,t){return ok.apply(this,arguments)}function ok(){return ok=(0,ye.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,ye.Z)(function*(s){i.isEqual(s)||(yield mH(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),ok.apply(this,arguments)}function ak(n,t){return lk.apply(this,arguments)}function lk(){return(lk=(0,ye.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield ck(n);Me("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>PH(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>PH(t.remoteStore,r)),n._onlineComponents=t})).apply(this,arguments)}function ZH(n){return"FirebaseError"===n.name?n.code===de.FAILED_PRECONDITION||n.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ck(n){return uk.apply(this,arguments)}function uk(){return(uk=(0,ye.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield PE(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!ZH(e))throw e;Ns("Error using user provided cache. Falling back to memory cache: "+e),yield PE(n,new ty)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),yield PE(n,new ty);return n._offlineComponents})).apply(this,arguments)}function OE(n){return dk.apply(this,arguments)}function dk(){return(dk=(0,ye.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),yield ak(n,n._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),yield ak(n,new xp))),n._onlineComponents})).apply(this,arguments)}function YH(n){return ck(n).then(t=>t.persistence)}function Mp(n){return ck(n).then(t=>t.localStore)}function QH(n){return OE(n).then(t=>t.remoteStore)}function hk(n){return OE(n).then(t=>t.syncEngine)}function kp(n){return fk.apply(this,arguments)}function fk(){return(fk=(0,ye.Z)(function*(n){const t=yield OE(n),e=t.eventManager;return e.onListen=Joe.bind(null,t.syncEngine),e.onUnlisten=tae.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=eae.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=nae.bind(null,t.syncEngine),e})).apply(this,arguments)}function JH(n,t,e={}){const i=new sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,o,a,l,c){const u=new RE({next:m=>{o.enqueueAndForget(()=>SM(s,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Ie(de.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&"server"===l.source?c.reject(new Ie(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new kM(op(a.path),u,{includeMetadataChanges:!0,ra:!0});return TM(s,f)}(yield kp(n),n.asyncQueue,t,e,i)})),i.promise}function ez(n,t,e={}){const i=new sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,o,a,l,c){const u=new RE({next:m=>{o.enqueueAndForget(()=>SM(s,f)),m.fromCache&&"server"===l.source?c.reject(new Ie(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new kM(a,u,{includeMetadataChanges:!0,ra:!0});return TM(s,f)}(yield kp(n),n.asyncQueue,t,e,i)})),i.promise}function tz(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const nz=new Map;function pk(n,t,e){if(!e)throw new Ie(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function iz(n,t,e,i){if(!0===t&&!0===i)throw new Ie(de.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function rz(n){if(!Ue.isDocumentKey(n))throw new Ie(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sz(n){if(Ue.isDocumentKey(n))throw new Ie(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(i=n).constructor?i.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var i;return"function"==typeof n?"a function":Qe()}function jt(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ie(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=NE(n);throw new Ie(de.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function oz(n,t){if(t<=0)throw new Ie(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class az{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ie(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ie(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}iz("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=tz(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ny{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new az({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ie(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new az(t),void 0!==t.credentials&&(this._authCredentials=function(i){if(!i)return new Mre;switch(i.type){case"firstParty":return new Ore(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ie(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=nz.get(e);i&&(Me("ComponentProvider","Removing Datastore"),nz.delete(e),i.terminate())}(this),Promise.resolve()}}class Mr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Mr(this.firestore,t,this._query)}}class Qn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Qn(this.firestore,t,this._key)}}class Aa extends Mr{constructor(t,e,i){super(t,e,op(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Qn(this.firestore,null,new Ue(t))}withConverter(t){return new Aa(this.firestore,t,this._path)}}function cz(n,t,...e){if(n=(0,mn.m9)(n),pk("collection","path",t),n instanceof ny){const i=qt.fromString(t,...e);return sz(i),new Aa(n,null,i)}{if(!(n instanceof Qn||n instanceof Aa))throw new Ie(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(qt.fromString(t,...e));return sz(i),new Aa(n.firestore,null,i)}}function FE(n,t,...e){if(n=(0,mn.m9)(n),1===arguments.length&&(t=oj.newId()),pk("doc","path",t),n instanceof ny){const i=qt.fromString(t,...e);return rz(i),new Qn(n,null,new Ue(i))}{if(!(n instanceof Qn||n instanceof Aa))throw new Ie(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(qt.fromString(t,...e));return rz(i),new Qn(n.firestore,n instanceof Aa?n.converter:null,new Ue(i))}}function uz(n,t){return n=(0,mn.m9)(n),t=(0,mn.m9)(t),(n instanceof Qn||n instanceof Aa)&&(t instanceof Qn||t instanceof Aa)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function gk(n,t){return n=(0,mn.m9)(n),t=(0,mn.m9)(t),n instanceof Mr&&t instanceof Mr&&n.firestore===t.firestore&&N_(n._query,t._query)&&n.converter===t.converter}class Fae{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new sM(this,"async_queue_retry"),this.hu=()=>{const e=AE();e&&Me("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=AE();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=AE();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new sr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){var t=this;return(0,ye.Z)(function*(){if(0!==t.su.length){try{yield t.su[0](),t.su.shift(),t.Yo.reset()}catch(e){if(!Sc(e))throw e;Me("AsyncQueue","Operation failed with retryable error: "+e)}t.su.length>0&&t.Yo.$o(()=>t.Tu())}})()}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(i=>{throw this.au=i,this.uu=!1,Oi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(i)),i}).then(i=>(this.uu=!1,i))));return this.iu=e,e}enqueueAfterDelay(t,e,i){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=DM.createAndSchedule(this,t,e,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&Qe()}verifyOperationInProgress(){}du(){var t=this;return(0,ye.Z)(function*(){let e;do{e=t.iu,yield e}while(e!==t.iu)})()}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this._u)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function mk(n){return function(e,i){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Lae{constructor(){this._progressObserver={},this._taskCompletionResolver=new sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Rn extends ny{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Fae,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||dz(this),this._firestoreClient.terminate()}}function li(n){return n._firestoreClient||dz(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dz(n){var t,e,i;const r=n._freezeSettings(),s=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new use(n._databaseId,l,n._persistenceKey,(u=r).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,tz(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._firestoreClient=new Cae(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(e=r.localCache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function hz(n,t,e){const i=new sr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield PE(n,e),yield ak(n,t),i.resolve()}catch(r){const s=r;if(!ZH(s))throw s;Ns("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function fz(n){if(n._initialized||n._terminated)throw new Ie(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xa{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xa(or.fromBase64String(t))}catch(e){throw new Ie(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new xa(or.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class vl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ie(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Id{constructor(t){this._methodName=t}}class LE{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ie(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ie(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return bt(this._lat,t._lat)||bt(this._long,t._long)}}const Kae=/^__.*__$/;class Zae{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new ml(t,this.data,this.fieldMask,e,this.fieldTransforms):new dp(t,this.data,e,this.fieldTransforms)}}class pz{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ml(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function gz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class VE{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new VE(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return UE(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(0===t.length)throw this.Du("Document fields must not be empty");if(gz(this.fu)&&Kae.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class Yae{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||J_(t)}Fu(t,e,i,r=!1){return new VE({fu:t,methodName:e,vu:i,path:Zn.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sd(n){const t=n._freezeSettings(),e=J_(n._databaseId);return new Yae(n._databaseId,!!t.ignoreUndefinedProperties,e)}function BE(n,t,e,i,r,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,t,e,r);Ck("Data must be an object, but it was:",o,i);const a=yz(i,o);let l,c;if(s.merge)l=new Fs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const m=sy(t,f,e);if(!o.contains(m))throw new Ie(de.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);bz(u,m)||u.push(m)}l=new Fs(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Zae(new xr(a),l,c)}class ry extends Id{_toFieldTransform(t){if(2!==t.fu)throw t.Du(1===t.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ry}}function mz(n,t,e){return new VE({fu:3,vu:t.settings.vu,methodName:n._methodName,yu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _k extends Id{_toFieldTransform(t){return new B_(t.path,new cp)}isEqual(t){return t instanceof _k}}class yk extends Id{constructor(t,e){super(t),this.Mu=e}_toFieldTransform(t){const e=mz(this,t,!0),i=this.Mu.map(s=>Ad(s,e)),r=new _d(i);return new B_(t.path,r)}isEqual(t){return t instanceof yk&&(0,mn.vZ)(this.Mu,t.Mu)}}class vk extends Id{constructor(t,e){super(t),this.Mu=e}_toFieldTransform(t){const e=mz(this,t,!0),i=this.Mu.map(s=>Ad(s,e)),r=new yd(i);return new B_(t.path,r)}isEqual(t){return t instanceof vk&&(0,mn.vZ)(this.Mu,t.Mu)}}class bk extends Id{constructor(t,e){super(t),this.xu=e}_toFieldTransform(t){const e=new up(t.serializer,iU(t.serializer,this.xu));return new B_(t.path,e)}isEqual(t){return t instanceof bk&&this.xu===t.xu}}function wk(n,t,e,i){const r=n.Fu(1,t,e);Ck("Data must be an object, but it was:",r,i);const s=[],o=xr.empty();Ac(i,(l,c)=>{const u=jE(t,l,e);c=(0,mn.m9)(c);const f=r.Su(u);if(c instanceof ry)s.push(u);else{const m=Ad(c,f);null!=m&&(s.push(u),o.set(u,m))}});const a=new Fs(s);return new pz(o,a,r.fieldTransforms)}function Ek(n,t,e,i,r,s){const o=n.Fu(1,t,e),a=[sy(t,i,e)],l=[r];if(s.length%2!=0)throw new Ie(de.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(sy(t,s[m])),l.push(s[m+1]);const c=[],u=xr.empty();for(let m=a.length-1;m>=0;--m)if(!bz(c,a[m])){const y=a[m];let v=l[m];v=(0,mn.m9)(v);const w=o.Su(y);if(v instanceof ry)c.push(y);else{const E=Ad(v,w);null!=E&&(c.push(y),u.set(y,E))}}const f=new Fs(c);return new pz(u,f,o.fieldTransforms)}function _z(n,t,e,i=!1){return Ad(e,n.Fu(i?4:3,t))}function Ad(n,t){if(vz(n=(0,mn.m9)(n)))return Ck("Unsupported field value:",t,n),yz(n,t);if(n instanceof Id)return function(i,r){if(!gz(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Ad(a,r.bu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if(null===(i=(0,mn.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return iU(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const s=oi.fromDate(i);return{timestampValue:fp(r.serializer,s)}}if(i instanceof oi){const s=new oi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:fp(r.serializer,s)}}if(i instanceof LE)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xa)return{bytesValue:TU(r.serializer,i._byteString)};if(i instanceof Qn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Px(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${NE(i)}`)}(n,t)}function yz(n,t){const e={};return Dj(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ac(n,(i,r)=>{const s=Ad(r,t.pu(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function vz(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof oi||n instanceof LE||n instanceof xa||n instanceof Qn||n instanceof Id)}function Ck(n,t,e){if(!vz(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=NE(e);throw t.Du("an object"===i?n+" a custom object":n+" "+i)}var r}function sy(n,t,e){if((t=(0,mn.m9)(t))instanceof vl)return t._internalPath;if("string"==typeof t)return jE(n,t);throw UE("Field path arguments must be of type string or ",n,!1,void 0,e)}const Qae=new RegExp("[~\\*/\\[\\]]");function jE(n,t,e){if(t.search(Qae)>=0)throw UE(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new vl(...t.split("."))._internalPath}catch{throw UE(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function UE(n,t,e,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Ie(de.INVALID_ARGUMENT,a+n+l)}function bz(n,t){return n.some(e=>e.isEqual(t))}class oy{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Xae(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(HE("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Xae extends oy{data(){return super.data()}}function HE(n,t){return"string"==typeof t?jE(n,t):t instanceof vl?t._internalPath:t._delegate._internalPath}function wz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dk{}class ay extends Dk{}function jc(n,t,...e){let i=[];t instanceof Dk&&i.push(t),i=i.concat(e),function(s){const o=s.filter(l=>l instanceof Rp).length,a=s.filter(l=>l instanceof ly).length;if(o>1||o>0&&a>0)throw new Ie(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class ly extends ay{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new ly(t,e,i)}_apply(t){const e=this._parse(t);return Tz(t._query,e),new Mr(t.firestore,t.converter,Tx(t._query,e))}_parse(t){const e=Sd(t.firestore);return function(s,o,a,l,c,u,f){let m;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Ie(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){Dz(f,u);const y=[];for(const v of f)y.push(Cz(l,s,v));m={arrayValue:{values:y}}}else m=Cz(l,s,f)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||Dz(f,u),m=_z(a,"where",f,"in"===u||"not-in"===u);return Gt.create(c,u,m)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class Rp extends Dk{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Rp(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:wn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)Tz(o,l),o=Tx(o,l)}(t._query,e),new Mr(t.firestore,t.converter,Tx(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Tk extends ay{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Tk(t,e)}_apply(t){const e=function(r,s,o){if(null!==r.startAt)throw new Ie(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new P_(s,o)}(t._query,this._field,this._direction);return new Mr(t.firestore,t.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new pl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class zE extends ay{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new zE(t,e,i)}_apply(t){return new Mr(t.firestore,t.converter,aE(t._query,this._limit,this._limitType))}}class $E extends ay{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new $E(t,e,i)}_apply(t){const e=Ez(t,this.type,this._docOrFields,this._inclusive);return new Mr(t.firestore,t.converter,(s=e,new pl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class WE extends ay{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new WE(t,e,i)}_apply(t){const e=Ez(t,this.type,this._docOrFields,this._inclusive);return new Mr(t.firestore,t.converter,(s=e,new pl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function Ez(n,t,e,i){if(e[0]=(0,mn.m9)(e[0]),e[0]instanceof oy)return function(s,o,a,l,c){if(!l)throw new Ie(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const f of ap(s))if(f.field.isKeyField())u.push(gd(o,l.key));else{const m=l.data.field(f.field);if(eE(m))throw new Ie(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=f.field.canonicalString();throw new Ie(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}u.push(m)}return new Pc(u,c)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Sd(n.firestore);return function(o,a,l,c,u,f){const m=o.explicitOrderBy;if(u.length>m.length)throw new Ie(de.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let v=0;v<u.length;v++){const w=u[v];if(m[v].field.isKeyField()){if("string"!=typeof w)throw new Ie(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!Dx(o)&&-1!==w.indexOf("/"))throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const E=o.path.child(qt.fromString(w));if(!Ue.isDocumentKey(E))throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const k=new Ue(E);y.push(gd(a,k))}else{const E=_z(l,c,w);y.push(E)}}return new Pc(y,f)}(n._query,n.firestore._databaseId,r,t,e,i)}}function Cz(n,t,e){if("string"==typeof(e=(0,mn.m9)(e))){if(""===e)throw new Ie(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dx(t)&&-1!==e.indexOf("/"))throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(qt.fromString(e));if(!Ue.isDocumentKey(i))throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gd(n,new Ue(i))}if(e instanceof Qn)return gd(n,e._key);throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${NE(e)}.`)}function Dz(n,t){if(!Array.isArray(n)||0===n.length)throw new Ie(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Tz(n,t){const e=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Ie(de.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Ik{convertValue(t,e="none"){switch(kc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _i(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(fl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Qe()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Ac(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new LE(_i(t.latitude),_i(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=tE(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(x_(t));default:return null}}convertTimestamp(t){const e=hl(t);return new oi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=qt.fromString(t);tt(LU(i));const r=new xc(i.get(1),i.get(3)),s=new Ue(i.popFirst(5));return r.isEqual(e)||Oi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function qE(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class ale extends Ik{constructor(t){super(),this.firestore=t}convertBytes(t){return new xa(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,e)}}class xd{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bl extends oy{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new cy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(HE("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class cy extends bl{data(t={}){return super.data(t)}}class Uc{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new xd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new cy(this._firestore,this._userDataWriter,i.key,i,new xd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ie(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new cy(r._firestore,r._userDataWriter,a.doc.key,a.doc,new xd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new cy(r._firestore,r._userDataWriter,a.doc.key,a.doc,new xd(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:cle(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function cle(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function Sz(n,t){return n instanceof bl&&t instanceof bl?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Uc&&t instanceof Uc&&n._firestore===t._firestore&&gk(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class Hc extends Ik{constructor(t){super(),this.firestore=t}convertBytes(t){return new xa(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,e)}}function Az(n,t,e){n=jt(n,Qn);const i=jt(n.firestore,Rn),r=qE(n.converter,t,e);return Pp(i,[BE(Sd(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,ai.none())])}function xz(n,t,e,...i){n=jt(n,Qn);const r=jt(n.firestore,Rn),s=Sd(r);let o;return o="string"==typeof(t=(0,mn.m9)(t))||t instanceof vl?Ek(s,"updateDoc",n._key,t,e,i):wk(s,"updateDoc",n._key,t),Pp(r,[o.toMutation(n._key,ai.exists(!0))])}function Mz(n,...t){var e,i,r;n=(0,mn.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||mk(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mk(t[o])){const f=t[o];t[o]=null===(e=f.next)||void 0===e?void 0:e.bind(f),t[o+1]=null===(i=f.error)||void 0===i?void 0:i.bind(f),t[o+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}let l,c,u;if(n instanceof Qn)c=jt(n.firestore,Rn),u=op(n._key.path),l={next:f=>{t[o]&&t[o](Sk(c,n,f))},error:t[o+1],complete:t[o+2]};else{const f=jt(n,Mr);c=jt(f.firestore,Rn),u=f._query;const m=new Hc(c);l={next:y=>{t[o]&&t[o](new Uc(c,m,f,y))},error:t[o+1],complete:t[o+2]},wz(n._query)}return function(m,y,v,w){const E=new RE(w),k=new kM(y,E,v);return m.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return TM(yield kp(m),k)})),()=>{E.$a(),m.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return SM(yield kp(m),k)}))}}(li(c),u,a,l)}function Pp(n,t){return function(i,r){const s=new sr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function iae(n,t,e){return BM.apply(this,arguments)}(yield hk(i),r,s)})),s.promise}(li(n),t)}function Sk(n,t,e){const i=e.docs.get(t._key),r=new Hc(n);return new bl(n,r,t._key,i,new xd(e.hasPendingWrites,e.fromCache),t.converter)}const Sle={maxAttempts:5};class kz{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Sd(t)}set(t,e,i){this._verifyNotCommitted();const r=zc(t,this._firestore),s=qE(r.converter,e,i),o=BE(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,ai.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=zc(t,this._firestore);let o;return o="string"==typeof(e=(0,mn.m9)(e))||e instanceof vl?Ek(this._dataReader,"WriteBatch.update",s._key,e,i,r):wk(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,ai.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=zc(t,this._firestore);return this._mutations=this._mutations.concat(new hp(e._key,ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zc(n,t){if((n=(0,mn.m9)(n)).firestore!==t)throw new Ie(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ale extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=Sd(e)}get(e){const i=zc(e,this._firestore),r=new ale(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||1!==s.length)return Qe();const o=s[0];if(o.isFoundDocument())return new oy(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new oy(this._firestore,r,i._key,null,i.converter);throw Qe()})}set(e,i,r){const s=zc(e,this._firestore),o=qE(s.converter,i,r),a=BE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,r);return this._transaction.set(s._key,a),this}update(e,i,r,...s){const o=zc(e,this._firestore);let a;return a="string"==typeof(i=(0,mn.m9)(i))||i instanceof vl?Ek(this._dataReader,"Transaction.update",o._key,i,r,s):wk(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(e){const i=zc(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=zc(t,this._firestore),i=new Hc(this._firestore);return super.get(t).then(r=>new bl(this._firestore,i,e._key,r._document,new xd(!1,!1),e.converter))}}function xk(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function Nz(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function Fz(){if(!function lse(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){Xf=Gf.SDK_VERSION,(0,Gf._registerComponent)(new G3.wA("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Rn(new Rre(i.getProvider("auth-internal")),new Nre(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ie(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Gf.registerVersion)(ij,"4.6.3",t),(0,Gf.registerVersion)(ij,"4.6.3","esm2017")}();class uy{constructor(t){this._delegate=t}static fromBase64String(t){return Fz(),new uy(xa.fromBase64String(t))}static fromUint8Array(t){return Nz(),new uy(xa.fromUint8Array(t))}toBase64(){return Fz(),this._delegate.toBase64()}toUint8Array(){return Nz(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Mk(n){return function Vle(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class Ble{enableIndexedDbPersistence(t,e){return function Bae(n,t){fz(n=jt(n,Rn));const e=li(n);if(e._uninitializedComponentsProvider)throw new Ie(de.FAILED_PRECONDITION,"SDK cache is already specified.");Ns("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new xp;return hz(e,r,new sk(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function jae(n){fz(n=jt(n,Rn));const t=li(n);if(t._uninitializedComponentsProvider)throw new Ie(de.FAILED_PRECONDITION,"SDK cache is already specified.");Ns("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new xp;return hz(t,i,new GH(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function Uae(n){if(n._initialized&&!n._terminated)throw new Ie(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new sr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(e=(0,ye.Z)(function*(r){if(!Ca.D())return Promise.resolve();const s=r+"main";yield Ca.delete(s)}),function i(r){return e.apply(this,arguments)})(Kx(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class Lz{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof xc||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function lz(n,t,e,i={}){var r;const s=(n=jt(n,ny))._getSettings(),o=`${t}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=mr.MOCK_USER;else{a=(0,mn.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ie(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new mr(c)}n._authCredentials=new kre(new rj(a,l))}}(this._delegate,t,e,i)}enableNetwork(){return function zae(n){return function Dae(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const t=yield YH(n),e=yield QH(n);return t.setNetworkEnabled(!0),function(r){const s=Be(r);return s.M_.delete(0),ey(s)}(e)}))}(li(n=jt(n,Rn)))}(this._delegate)}disableNetwork(){return function $ae(n){return function Tae(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const t=yield YH(n),e=yield QH(n);return t.setNetworkEnabled(!1),(i=(0,ye.Z)(function*(s){const o=Be(s);o.M_.add(0),yield wp(o),o.N_.set("Offline")}),function r(s){return i.apply(this,arguments)})(e);var i}))}(li(n=jt(n,Rn)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,iz("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hae(n){return function(e){const i=new sr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function aae(n,t){return $M.apply(this,arguments)}(yield hk(e),i)})),i.promise}(li(n=jt(n,Rn)))}(this._delegate)}onSnapshotsInSync(t){return function yle(n,t){return function xae(n,t){const e=new RE(t);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield kp(n),s=e,Be(r).z_.add(s),void s.next();var r,s})),()=>{e.$a(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield kp(n),s=e,void Be(r).z_.delete(s);var r,s}))}}(li(n=jt(n,Rn)),mk(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Op(this,cz(this._delegate,t))}catch(e){throw gs(e,"collection()","Firestore.collection()")}}doc(t){try{return new Ao(this,FE(this._delegate,t))}catch(e){throw gs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ms(this,function Nae(n,t){if(n=jt(n,ny),pk("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ie(de.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mr(n,null,(i=t,new pl(qt.emptyPath(),i)));var i}(this._delegate,t))}catch(e){throw gs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function xle(n,t,e){n=jt(n,Rn);const i=Object.assign(Object.assign({},Sle),e);return function(s){if(s.maxAttempts<1)throw new Ie(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new sr;return s.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const c=yield function XH(n){return OE(n).then(t=>t.datastore)}(s);new Eae(s.asyncQueue,c,a,o,l).Xa()})),l.promise}(li(n),r=>t(new Ale(n,r)),i)}(this._delegate,e=>t(new Vz(this,e)))}batch(){return li(this._delegate),new Bz(new kz(this._delegate,t=>Pp(this._delegate,t)))}loadBundle(t){return function Wae(n,t){const e=li(n=jt(n,Rn)),i=new Lae;return function Mae(n,t,e,i){const r=function(o,a){let l;return l="string"==typeof o?_U().encode(o):o,u=function(u,f){if(u instanceof Uint8Array)return KH(u,f);if(u instanceof ArrayBuffer)return KH(new Uint8Array(u),f);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new bae(u,a);var u}(e,J_(t));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function yae(n,t,e){const i=Be(n);var r;(r=(0,ye.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(v,w){const E=Be(v),k=Ni(w.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",S=>E.$r.getBundleMetadata(S,w.id)).then(S=>!!S&&S.createTime.compareTo(k)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(v=c).totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}),Promise.resolve(new Set);l._updateProgress(LH(c));const u=new Zoe(c,o.localStore,a.serializer);let f=yield a.qa();for(;f;){const y=yield u._a(f);y&&l._updateProgress(y),f=yield a.qa()}const m=yield u.complete();return yield yl(o,m.ca,void 0),yield function(v,w){const E=Be(v);return E.persistence.runTransaction("Save bundle","readwrite",k=>E.$r.saveBundleMetadata(k,w))}(o.localStore,c),l._completeWith(m.progress),Promise.resolve(m.ua)}catch(c){return Ns("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var v}),function s(o,a,l){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield hk(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function qae(n,t){return function kae(n,t){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(i,r){const s=Be(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,r))}(yield Mp(n),t)}))}(li(n=jt(n,Rn)),t).then(e=>e?new Mr(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ms(this,e):null)}}class KE extends Ik{constructor(t){super(),this.firestore=t}convertBytes(t){return new uy(new xa(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Ao.forKey(e,this.firestore,null)}}class Vz{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new KE(t)}get(t){const e=kd(t);return this._delegate.get(e).then(i=>new dy(this._firestore,new bl(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=kd(t);return i?(xk("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=kd(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=kd(t);return this._delegate.delete(e),this}}class Bz{constructor(t){this._delegate=t}set(t,e,i){const r=kd(t);return i?(xk("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=kd(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=kd(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Md{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new cy(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new hy(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Md.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Md(t,new KE(t),e),r.set(e,s)),s}}Md.INSTANCES=new WeakMap;class Ao{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new KE(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ao(e,new Qn(e._delegate,i,new Ue(t)))}static forKey(t,e,i){return new Ao(e,new Qn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Op(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Op(this.firestore,cz(this._delegate,t))}catch(e){throw gs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,mn.m9)(t))instanceof Qn&&uz(this._delegate,t)}set(t,e){e=xk("DocumentReference.set",e);try{return e?Az(this._delegate,t,e):Az(this._delegate,t)}catch(i){throw gs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?xz(this._delegate,t):xz(this._delegate,t,e,...i)}catch(r){throw gs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function mle(n){return Pp(jt(n.firestore,Rn),[new hp(n._key,ai.none())])}(this._delegate)}onSnapshot(...t){const e=jz(t),i=Uz(t,r=>new dy(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Mz(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function dle(n){n=jt(n,Qn);const t=jt(n.firestore,Rn),e=li(t),i=new Hc(t);return function Iae(n,t){const e=new sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(i=(0,ye.Z)(function*(s,o,a){try{const l=yield function(u,f){const m=Be(u);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,f))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ie(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Tp(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Mp(n),t,e);var i})),e.promise}(e,n._key).then(r=>new bl(t,i,n._key,r,new xd(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function hle(n){n=jt(n,Qn);const t=jt(n.firestore,Rn);return JH(li(t),n._key,{source:"server"}).then(e=>Sk(t,n,e))}(this._delegate):function ule(n){n=jt(n,Qn);const t=jt(n.firestore,Rn);return JH(li(t),n._key).then(e=>Sk(t,n,e))}(this._delegate),e.then(i=>new dy(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Ao(this.firestore,this._delegate.withConverter(t?Md.getInstance(this.firestore,t):null))}}function gs(n,t,e){return n.message=n.message.replace(t,e),n}function jz(n){for(const t of n)if("object"==typeof t&&!Mk(t))return t;return{}}function Uz(n,t){var e,i;let r;return r=Mk(n[0])?n[0]:Mk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class dy{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Ao(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Sz(this._delegate,t._delegate)}}class hy extends dy{data(t){const e=this._delegate.data(t);return this._delegate._converter||function xre(n,t){n||Qe()}(void 0!==e),e}}class ms{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new KE(t)}where(t,e,i){try{return new ms(this.firestore,jc(this._delegate,function Jae(n,t,e){const i=t,r=HE("where",n);return ly._create(r,i,e)}(t,e,i)))}catch(r){throw gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ms(this.firestore,jc(this._delegate,function ele(n,t="asc"){const e=t,i=HE("orderBy",n);return Tk._create(i,e)}(t,e)))}catch(i){throw gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ms(this.firestore,jc(this._delegate,function tle(n){return oz("limit",n),zE._create("limit",n,"F")}(t)))}catch(e){throw gs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ms(this.firestore,jc(this._delegate,function nle(n){return oz("limitToLast",n),zE._create("limitToLast",n,"L")}(t)))}catch(e){throw gs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ms(this.firestore,jc(this._delegate,function ile(...n){return $E._create("startAt",n,!0)}(...t)))}catch(e){throw gs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ms(this.firestore,jc(this._delegate,function rle(...n){return $E._create("startAfter",n,!1)}(...t)))}catch(e){throw gs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ms(this.firestore,jc(this._delegate,function sle(...n){return WE._create("endBefore",n,!1)}(...t)))}catch(e){throw gs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ms(this.firestore,jc(this._delegate,function ole(...n){return WE._create("endAt",n,!0)}(...t)))}catch(e){throw gs(e,"endAt()","Query.endAt()")}}isEqual(t){return gk(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function ple(n){n=jt(n,Mr);const t=jt(n.firestore,Rn),e=li(t),i=new Hc(t);return function Sae(n,t){const e=new sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(i=(0,ye.Z)(function*(s,o,a){try{const l=yield DE(s,o,!0),c=new jH(o,l.hs),u=c.da(l.documents),f=c.applyChanges(u,!1);a.resolve(f.snapshot)}catch(l){const c=Tp(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Mp(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Uc(t,i,n,r))}(this._delegate):"server"===t?.source?function gle(n){n=jt(n,Mr);const t=jt(n.firestore,Rn),e=li(t),i=new Hc(t);return ez(e,n._query,{source:"server"}).then(r=>new Uc(t,i,n,r))}(this._delegate):function fle(n){n=jt(n,Mr);const t=jt(n.firestore,Rn),e=li(t),i=new Hc(t);return wz(n._query),ez(e,n._query).then(r=>new Uc(t,i,n,r))}(this._delegate),e.then(i=>new kk(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=jz(t),i=Uz(t,r=>new kk(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Mz(this._delegate,e,i)}withConverter(t){return new ms(this.firestore,this._delegate.withConverter(t?Md.getInstance(this.firestore,t):null))}}class Ule{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new hy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kk{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new hy(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new Ule(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new hy(this._firestore,i))})}isEqual(t){return Sz(this._delegate,t._delegate)}}class Op extends ms{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ao(this.firestore,t):null}doc(t){try{return new Ao(this.firestore,void 0===t?FE(this._delegate):FE(this._delegate,t))}catch(e){throw gs(e,"doc()","CollectionReference.doc()")}}add(t){return function _le(n,t){const e=jt(n.firestore,Rn),i=FE(n),r=qE(n.converter,t);return Pp(e,[BE(Sd(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ai.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Ao(this.firestore,e))}isEqual(t){return uz(this._delegate,t._delegate)}withConverter(t){return new Op(this.firestore,this._delegate.withConverter(t?Md.getInstance(this.firestore,t):null))}}function kd(n){return jt(n,Qn)}class Rk{constructor(...t){this._delegate=new vl(...t)}static documentId(){return new Rk(Zn.keyField().canonicalString())}isEqual(t){return(t=(0,mn.m9)(t))instanceof vl&&this._delegate._internalPath.isEqual(t._internalPath)}}class Rd{constructor(t){this._delegate=t}static serverTimestamp(){const t=function kle(){return new _k("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Rd(t)}static delete(){const t=function Mle(){return new ry("deleteField")}();return t._methodName="FieldValue.delete",new Rd(t)}static arrayUnion(...t){const e=function Rle(...n){return new yk("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Rd(e)}static arrayRemove(...t){const e=function Ple(...n){return new vk("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Rd(e)}static increment(t){const e=function Ole(n){return new bk("increment",n)}(t);return e._methodName="FieldValue.increment",new Rd(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Hle={Firestore:Lz,GeoPoint:LE,Timestamp:oi,Blob:uy,Transaction:Vz,WriteBatch:Bz,DocumentReference:Ao,DocumentSnapshot:dy,Query:ms,QueryDocumentSnapshot:hy,QuerySnapshot:kk,CollectionReference:Op,FieldPath:Rk,FieldValue:Rd,setLogLevel:function jle(n){!function Are(n){Tc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Hz(n,t){return function Wle(n,t=Kf){return new ft(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function Pk(n,t){return Hz(n,t).pipe(Fe(e=>({payload:e,type:"query"})))}!function $le(n){(function zle(n,t){n.INTERNAL.registerComponent(new G3.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},Hle)))})(n,(t,e)=>new Lz(t,e,new Ble)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Os.Z);class zz{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=Zz(i,e);return new qz(r,s,this.afs)}snapshotChanges(){return function qle(n,t){return Hz(n,t).pipe(So(void 0),Qf(),Fe(e=>{const[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(eo)}valueChanges(t={}){return this.snapshotChanges().pipe(Fe(({payload:e})=>t.idField?{...e.data(),[t.idField]:e.id}:e.data()))}get(t){return X(this.ref.get(t)).pipe(eo)}}function ZE(n,t){return Pk(n,t).pipe(So(void 0),Qf(),Fe(e=>{const[i,r]=e,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=s.find(f=>f.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function $z(n,t,e){return ZE(n,e).pipe(I0((i,r)=>function Gle(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function Kle(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return Ok(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return Ok(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Ok(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Ii(),Fe(i=>i.map(r=>({type:r.type,payload:r}))))}function Ok(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function Wz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class qz{ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=ZE(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Fe(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(So(void 0),Qf(),vn(([i,r])=>r.length>0||!i),Fe(([,i])=>i),eo)}auditTrail(t){return this.stateChanges(t).pipe(I0((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=Wz(t);return $z(this.query,e,this.afs.schedulers.outsideAngular).pipe(eo)}valueChanges(t={}){return Pk(this.query,this.afs.schedulers.outsideAngular).pipe(Fe(e=>e.payload.docs.map(i=>t.idField?{...i.data(),[t.idField]:i.id}:i.data())),eo)}get(t){return X(this.query.get(t)).pipe(eo)}add(t){return this.ref.add(t)}doc(t){return new zz(this.ref.doc(t),this.afs)}}class Zle{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ZE(this.query,this.afs.schedulers.outsideAngular).pipe(Fe(e=>e.filter(i=>t.indexOf(i.type)>-1)),vn(e=>e.length>0),eo):ZE(this.query,this.afs.schedulers.outsideAngular).pipe(eo)}auditTrail(t){return this.stateChanges(t).pipe(I0((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=Wz(t);return $z(this.query,e,this.afs.schedulers.outsideAngular).pipe(eo)}valueChanges(t={}){return Pk(this.query,this.afs.schedulers.outsideAngular).pipe(Fe(i=>i.payload.docs.map(r=>t.idField?{[t.idField]:r.id,...r.data()}:r.data())),eo)}get(t){return X(this.query.get(t)).pipe(eo)}}const Gz=new De("angularfire2.enableFirestorePersistence"),Kz=new De("angularfire2.firestore.persistenceSettings"),Yle=new De("angularfire2.firestore.settings"),Qle=new De("angularfire2.firestore.use-emulator");function Zz(n,t=(e=>e)){return{query:t(n),ref:n}}let Pd=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,s,o,a,l,c,u,f,m,y,v,w,E,k,S){this.schedulers=l;const R=lx(e,a,i),z=u;f&&q3(R,a,m,v,w,E,y,k),[this.firestore,this.persistenceEnabled$]=F3(`${R.name}.firestore`,"AngularFirestore",R.name,()=>{const q=a.runOutsideAngular(()=>R.firestore());if(s&&q.settings(s),z&&q.useEmulator(...z),r&&!y0(o)){const ee=()=>{try{return X(q.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(N){return typeof console<"u"&&console.warn(N),be(!1)}};return[q,a.runOutsideAngular(ee)]}return[q,be(!1)]},[s,z,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:o}=Zz(r,i),a=this.schedulers.ngZone.run(()=>s);return new qz(a,o,this)}collectionGroup(e,i){const r=i||(o=>o),s=this.firestore.collectionGroup(e);return new Zle(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new zz(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(te(G0),te(K0,8),te(Gz,8),te(Yle,8),te(vo),te(ot),te(O3),te(Kz,8),te(Qle,8),te(ux,8),te(j3,8),te(U3,8),te(H3,8),te(z3,8),te($3,8),te(W3,8),te(R3,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Xle=(()=>{class n{constructor(){Os.Z.registerVersion("angularfire",ax.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:Gz,useValue:!0},{provide:Kz,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Wt({type:n});static \u0275inj=Zt({providers:[Pd]})}return n})(),Yo=(()=>{class n{constructor(e,i){this.afAuth=e,this.firestore=i,this.user$=this.afAuth.authState}login(e,i){var r=this;return(0,ye.Z)(function*(){yield r.afAuth.signInWithEmailAndPassword(e,i)})()}register(e,i){var r=this;return(0,ye.Z)(function*(){yield r.afAuth.createUserWithEmailAndPassword(e,i)})()}resetPassword(e){var i=this;return(0,ye.Z)(function*(){yield i.afAuth.sendPasswordResetEmail(e)})()}logout(){var e=this;return(0,ye.Z)(function*(){yield e.afAuth.signOut()})()}updateProfile(e,i,r,s,o){var a=this;return(0,ye.Z)(function*(){const l=Os.Z.auth().currentUser;return l?(yield l.updateProfile({displayName:e}),a.firestore.collection("users").doc(l.uid).set({displayName:e,bio:i||"",company:r||"",position:s||"",team:o||""},{merge:!0})):Promise.reject("\u30e6\u30fc\u30b6\u30fc\u304c\u8a8d\u8a3c\u3055\u308c\u3066\u3044\u307e\u305b\u3093")})()}getUserById(e){return this.firestore.collection("users").doc(e).valueChanges()}getCurrentUser(){return Os.Z.auth().currentUser}getCurrentUserId(){const e=this.getCurrentUser();return e?e.uid:null}static#e=this.\u0275fac=function(i){return new(i||n)(te(ux),te(Pd))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Jle=function(){return["/calendar"]},ece=function(){return["/tasks"]},tce=function(){return["/projects"]},nce=function(){return["/profile"]},ice=function(){return["/user-search"]};let rce=(()=>{class n{constructor(e,i){this.router=e,this.authService=i,this.title="todo-app",this.router.events.subscribe(r=>{r instanceof ll&&console.log("\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u307e\u3057\u305f:",r.urlAfterRedirects)})}logClick(e,i){i.preventDefault();const r=this.getPathFromLinkName(e);console.log(`${e}\u30ea\u30f3\u30af\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u307e\u3057\u305f`),this.router.navigate([r]).then(()=>{console.log(`${e}\u30ea\u30f3\u30af\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f`)})}getPathFromLinkName(e){switch(e){case"\u30ab\u30ec\u30f3\u30c0\u30fc":return"/calendar";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8":return"/projects";case"\u30bf\u30b9\u30af\u4e00\u89a7":return"/tasks";case"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb":return"/profile";case"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22":return"/user-search";case"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u9032\u6357":return"/project-progress/\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u3092\u5165\u529b";default:return"/"}}logOut(){this.authService.logout().then(()=>{this.router.navigate(["/login"])}).catch(e=>{console.error("\u30ed\u30b0\u30a2\u30a6\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f",e)})}static#e=this.\u0275fac=function(i){return new(i||n)(K(Gr),K(Yo))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-root"]],standalone:!0,features:[Wr],decls:24,vars:10,consts:[[1,"app-container"],[1,"side-nav"],[1,"nav-link",3,"routerLink"],[1,"spacer"],[1,"logout-button",3,"click"],[1,"content"]],template:function(i,r){1&i&&(T(0,"div",0)(1,"div",1)(2,"nav")(3,"ul")(4,"li")(5,"a",2),F(6,"\u30ab\u30ec\u30f3\u30c0\u30fc"),I()(),T(7,"li")(8,"a",2),F(9,"\u30bf\u30b9\u30af\u4e00\u89a7"),I()(),T(10,"li")(11,"a",2),F(12,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),I()(),T(13,"li")(14,"a",2),F(15,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),I()(),T(16,"li")(17,"a",2),F(18,"\u30e6\u30fc\u30b6\u30fc\u691c\u7d22"),I()()()(),On(19,"div",3),T(20,"button",4),ae("click",function(){return r.logOut()}),F(21,"\u30ed\u30b0\u30a2\u30a6\u30c8"),I()(),T(22,"div",5),On(23,"router-outlet"),I()()),2&i&&(j(5),W("routerLink",Kn(5,Jle)),j(3),W("routerLink",Kn(6,ece)),j(3),W("routerLink",Kn(7,tce)),j(3),W("routerLink",Kn(8,nce)),j(3),W("routerLink",Kn(9,ice)))},dependencies:[QA,ir,Dc,cd],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw}.side-nav[_ngcontent-%COMP%]{width:200px;background-color:#f8f9fa;display:flex;flex-direction:column;padding:10px}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.side-nav[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;padding:10px;color:#000;border-radius:4px;display:block}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.spacer[_ngcontent-%COMP%]{flex-grow:1}.logout-button[_ngcontent-%COMP%]{padding:10px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer;text-align:center}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.content[_ngcontent-%COMP%]{flex-grow:1;padding:30px 0 30px 30px;overflow-y:auto;display:flex;flex-direction:column;margin-right:0}"]})}return n})();class Yz{}class sce{}const wl="*";function YE(n,t=null){return{type:4,styles:t,timings:n}}function Jz(n,t=null){return{type:2,steps:n,options:t}}function $c(n){return{type:6,styles:n,offset:null}}function QE(n,t,e){return{type:0,name:n,styles:t,options:e}}function XE(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class fy{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class n4{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function i4(n){return new B(3e3,!1)}function Wc(n){switch(n.length){case 0:return new fy;case 1:return n[0];default:return new n4(n)}}function r4(n,t,e=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(t.forEach(l=>{const c=l.get("offset"),u=c==o,f=u&&a||new Map;l.forEach((m,y)=>{let v=y,w=m;if("offset"!==y)switch(v=n.normalizePropertyName(v,r),w){case"!":w=e.get(y);break;case wl:w=i.get(y);break;default:w=n.normalizeStyleValue(y,v,w,r)}f.set(v,w)}),u||s.push(f),a=f,o=c}),r.length)throw function Ace(n){return new B(3502,!1)}();return s}function Fk(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Lk(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Lk(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Lk(e,"destroy",n)))}}function Lk(n,t,e){const s=Vk(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),o=n._data;return null!=o&&(s._data=o),s}function Vk(n,t,e,i,r="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function io(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function s4(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const jce=(()=>typeof document>"u"?null:document.documentElement)();function Bk(n){const t=n.parentNode||n.host||null;return t===jce?null:t}let Od=null,o4=!1;function a4(n,t){for(;t;){if(t===n)return!0;t=Bk(t)}return!1}function l4(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]}let c4=(()=>{class n{validateStyleProperty(e){return function Hce(n){Od||(Od=function zce(){return typeof document<"u"?document.body:null}()||{},o4=!!Od.style&&"WebkitAppearance"in Od.style);let t=!0;return Od.style&&!function Uce(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Od.style,!t&&o4&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Od.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return a4(e,i)}getParentElement(e){return Bk(e)}query(e,i,r){return l4(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,o,a=[],l){return new fy(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),jk=(()=>{class n{static#e=this.NOOP=new c4}return n})();const $ce=1e3,Uk="ng-enter",JE="ng-leave",eC="ng-trigger",tC=".ng-trigger",d4="ng-animating",Hk=".ng-animating";function El(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:zk(parseFloat(t[1]),t[2])}function zk(n,t){return"s"===t?n*$ce:n}function nC(n,t,e){return n.hasOwnProperty("duration")?n:function qce(n,t,e){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(i4()),{duration:0,delay:0,easing:""};r=zk(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=zk(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!e){let a=!1,l=t.length;r<0&&(t.push(function oce(){return new B(3100,!1)}()),a=!0),s<0&&(t.push(function ace(){return new B(3101,!1)}()),a=!0),a&&t.splice(l,0,i4())}return{duration:r,delay:s,easing:o}}(n,t,e)}function py(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function h4(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function qc(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function Ma(n,t,e){t.forEach((i,r)=>{const s=Wk(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function Nd(n,t){t.forEach((e,i)=>{const r=Wk(i);n.style[r]=""})}function gy(n){return Array.isArray(n)?1==n.length?n[0]:Jz(n):n}const $k=new RegExp("{{\\s*(.+?)\\s*}}","g");function p4(n){let t=[];if("string"==typeof n){let e;for(;e=$k.exec(n);)t.push(e[1]);$k.lastIndex=0}return t}function my(n,t,e){const i=n.toString(),r=i.replace($k,(s,o)=>{let a=t[o];return null==a&&(e.push(function cce(n){return new B(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function iC(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Zce=/-+([a-z0-9])/g;function Wk(n){return n.replace(Zce,(...t)=>t[1].toUpperCase())}function ro(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function uce(n){return new B(3004,!1)}()}}function g4(n,t){return window.getComputedStyle(n)[t]}const rC="*";function Xce(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Jce(n,t,e){if(":"==n[0]){const l=function eue(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function Dce(n){return new B(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Cce(n){return new B(3015,!1)}()),t;const r=i[1],s=i[2],o=i[3];t.push(m4(r,o));"<"==s[0]&&!(r==rC&&o==rC)&&t.push(m4(o,r))}(i,e,t)):e.push(n),e}const sC=new Set(["true","1"]),oC=new Set(["false","0"]);function m4(n,t){const e=sC.has(n)||oC.has(n),i=sC.has(t)||oC.has(t);return(r,s)=>{let o=n==rC||n==r,a=t==rC||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?sC.has(n):oC.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?sC.has(t):oC.has(t)),o&&a}}const tue=new RegExp("s*:selfs*,?","g");function qk(n,t,e,i){return new nue(n).build(t,e,i)}class nue{constructor(t){this._driver=t}build(t,e,i){const r=new sue(e);return this._resetContextStyleTimingState(r),ro(this,gy(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function hce(){return new B(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function fce(){return new B(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{p4(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(iC(s.values()),e.errors.push(function pce(n,t){return new B(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=ro(this,gy(t.animation),e);return{type:1,matchers:Xce(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Fd(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>ro(this,i,e)),options:Fd(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=i;const a=ro(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:Fd(t.options)}}visitAnimate(t,e){const i=function aue(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Gk(nC(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Gk(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=nC(e,t);return Gk(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:$c({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=$c(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===wl?i.push(a):e.errors.push(new B(3002,!1)):i.push(h4(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let f=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(e.errors.push(function mce(n,t,e,i,r){return new B(3010,!1)}()),f=!1),s=u.startTime),f&&c.set(l,{startTime:s,endTime:r}),e.options&&function Kce(n,t,e){const i=t.params||{},r=p4(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function lce(n){return new B(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function _ce(){return new B(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(k=>{const S=this._makeStyleAst(k,e);let R=null!=S.offset?S.offset:function oue(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(S.styles),z=0;return null!=R&&(s++,z=S.offset=R),l=l||z<0||z>1,a=a||z<c,c=z,o.push(z),S});l&&e.errors.push(function yce(){return new B(3012,!1)}()),a&&e.errors.push(function vce(){return new B(3200,!1)}());const f=t.steps.length;let m=0;s>0&&s<f?e.errors.push(function bce(){return new B(3202,!1)}()):0==s&&(m=1/(f-1));const y=f-1,v=e.currentTime,w=e.currentAnimateTimings,E=w.duration;return u.forEach((k,S)=>{const R=m>0?S==y?1:m*S:o[S],z=R*E;e.currentTime=v+w.delay+z,w.duration=z,this._validateStyleAst(k,e),k.offset=R,i.styles.push(k)}),i}visitReference(t,e){return{type:8,animation:ro(this,gy(t.animation),e),options:Fd(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Fd(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Fd(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function iue(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(tue,"")),n=n.replace(/@\*/g,tC).replace(/@\w+/g,e=>tC+"-"+e.slice(1)).replace(/:animating/g,Hk),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,io(e.collectedStyles,e.currentQuerySelector,new Map);const a=ro(this,gy(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Fd(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function wce(){return new B(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:nC(t.timings,e.errors,!0);return{type:12,animation:ro(this,gy(t.animation),e),timings:i,options:null}}}class sue{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Fd(n){return n?(n=py(n)).params&&(n.params=function rue(n){return n?py(n):null}(n.params)):n={},n}function Gk(n,t,e){return{duration:n,delay:t,easing:e}}function Kk(n,t,e,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class aC{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const uue=new RegExp(":enter","g"),hue=new RegExp(":leave","g");function Zk(n,t,e,i,r,s=new Map,o=new Map,a,l,c=[]){return(new fue).buildKeyframes(n,t,e,i,r,s,o,a,l,c)}class fue{buildKeyframes(t,e,i,r,s,o,a,l,c,u=[]){c=c||new aC;const f=new Yk(t,e,c,r,s,u,[]);f.options=l;const m=l.delay?El(l.delay):0;f.currentTimeline.delayNextStep(m),f.currentTimeline.setStyles([o],null,f.errors,l),ro(this,i,f);const y=f.timelines.filter(v=>v.containsAnimation());if(y.length&&a.size){let v;for(let w=y.length-1;w>=0;w--){const E=y[w];if(E.element===e){v=E;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,f.errors,l)}return y.length?y.map(v=>v.buildKeyframes()):[Kk(e,[],[],[],0,m,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:El(my(s,r?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const o=null!=i.duration?El(i.duration):null,a=null!=i.delay?El(i.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),ro(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=lC);const o=El(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>ro(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?El(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),ro(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return nC(e.params?my(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?El(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=lC);let o=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const f=e.createSubContext(t.options,c);s&&f.delayNextStep(s),c===e.element&&(l=f.currentTimeline),ro(this,t.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const f=u.currentTime;ro(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const lC={};class Yk{constructor(t,e,i,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new cC(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=El(i.duration)),null!=i.delay&&(r.delay=El(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=my(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new Yk(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=lC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new pue(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(uue,"."+this._enterClassName)).replace(hue,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function Ece(n){return new B(3014,!1)}()),a}}class cC{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new cC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||wl),this._currentKeyframe.set(e,wl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function gue(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,wl)}else qc(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=my(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??wl),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=qc(a,new Map,this._backFill);c.forEach((u,f)=>{"!"===u?t.add(f):u===wl&&e.add(f)}),i||c.set("offset",l/this.duration),r.push(c)});const s=t.size?iC(t.values()):[],o=e.size?iC(e.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return Kk(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class pue extends cC{constructor(t,e,i,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=i+e,a=e/o,l=qc(t[0]);l.set("offset",0),s.push(l);const c=qc(t[0]);c.set("offset",v4(a)),s.push(c);const u=t.length-1;for(let f=1;f<=u;f++){let m=qc(t[f]);const y=m.get("offset");m.set("offset",v4((e+y*i)/o)),s.push(m)}i=o,e=0,r="",t=s}return Kk(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function v4(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Qk{}const mue=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _ue extends Qk{normalizePropertyName(t,e){return Wk(t)}normalizeStyleValue(t,e,i,r){let s="";const o=i.toString().trim();if(mue.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function dce(n,t){return new B(3005,!1)}())}return o+s}}function b4(n,t,e,i,r,s,o,a,l,c,u,f,m){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:f,errors:m}}const Xk={};class w4{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function yue(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,o,a,l,c,u){const f=[],m=this.ast.options&&this.ast.options.params||Xk,v=this.buildStyles(i,a&&a.params||Xk,f),w=l&&l.params||Xk,E=this.buildStyles(r,w,f),k=new Set,S=new Map,R=new Map,z="void"===r,q={params:vue(w,m),delay:this.ast.options?.delay},ee=u?[]:Zk(t,e,this.ast.animation,s,o,v,E,q,c,f);let N=0;if(ee.forEach(P=>{N=Math.max(P.duration+P.delay,N)}),f.length)return b4(e,this._triggerName,i,r,z,v,E,[],[],S,R,N,f);ee.forEach(P=>{const U=P.element,V=io(S,U,new Set);P.preStyleProps.forEach($=>V.add($));const H=io(R,U,new Set);P.postStyleProps.forEach($=>H.add($)),U!==e&&k.add(U)});const M=iC(k.values());return b4(e,this._triggerName,i,r,z,v,E,ee,M,S,R,N)}}function vue(n,t){const e=py(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class bue{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=py(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=my(o,r,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),i.set(a,o)})}),i}}class Eue{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new bue(r.style,r.options&&r.options.params||{},i))}),E4(this.states,"true","1"),E4(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new w4(t,r,this.states))}),this.fallbackTransition=function Cue(n,t,e){return new w4(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(o=>o.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function E4(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Due=new aC;class Tue{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=qk(this._driver,e,i,[]);if(i.length)throw function xce(n){return new B(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=r4(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=Zk(this._driver,e,s,Uk,JE,new Map,new Map,i,Due,r),o.forEach(u=>{const f=io(a,u.element,new Map);u.postStyleProps.forEach(m=>f.set(m,null))})):(r.push(function Mce(){return new B(3300,!1)}()),o=[]),r.length)throw function kce(n){return new B(3504,!1)}();a.forEach((u,f)=>{u.forEach((m,y)=>{u.set(y,this._driver.computeStyle(f,y,wl))})});const c=Wc(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Rce(n){return new B(3301,!1)}();return e}listen(t,e,i,r){const s=Vk(e,"","","");return Fk(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const C4="ng-animate-queued",Jk="ng-animate-disabled",Mue=[],D4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qo="__ng_removed";class eR{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function Nue(n){return n??null}(i?t.value:t),i){const s=py(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const _y="void",tR=new eR(_y);class Rue{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,xo(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function Pce(n,t){return new B(3302,!1)}();if(null==i||0==i.length)throw function Oce(n){return new B(3303,!1)}();if(!function Fue(n){return"start"==n||"done"==n}(i))throw function Nce(n,t){return new B(3400,!1)}();const s=io(this._elementListeners,t,[]),o={name:e,phase:i,callback:r};s.push(o);const a=io(this._engine.statesByElement,t,new Map);return a.has(e)||(xo(t,eC),xo(t,eC+"-"+e),a.set(e,tR)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Fce(n){return new B(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),o=new nR(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(xo(t,eC),xo(t,eC+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new eR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=tR),c.value!==_y&&l.value===c.value){if(!function Bue(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(l.params,c.params)){const w=[],E=s.matchStyles(l.value,l.params,w),k=s.matchStyles(c.value,c.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{Nd(t,E),Ma(t,k)})}return}const m=io(this._engine.playersByElement,t,[]);m.forEach(w=>{w.namespaceId==this.id&&w.triggerName==e&&w.queued&&w.destroy()});let y=s.matchTransition(l.value,c.value,t,c.params),v=!1;if(!y){if(!r)return;y=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:v}),v||(xo(t,C4),o.onStart(()=>{Np(t,C4)})),o.onDone(()=>{let w=this.players.indexOf(o);w>=0&&this.players.splice(w,1);const E=this._engine.playersByElement.get(t);if(E){let k=E.indexOf(o);k>=0&&E.splice(k,1)}}),this.players.push(o),m.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,tC,!0);i.forEach(r=>{if(r[Qo])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(t,c,_y,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&Wc(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||tR,u=new eR(_y),f=new nR(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Qo];(!s||s===D4)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){xo(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=Vk(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,Fk(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class Pue{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Rue(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(uC(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!uC(e))return;const s=e[Qo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),xo(t,Jk)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Np(t,Jk))}removeNode(t,e,i){if(uC(e)){const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Qo]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return uC(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,tC,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Hk,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Wc(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Qo];if(e&&e.setForRemoval){if(t[Qo]=D4,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Jk)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)xo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Wc(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function Lce(n){return new B(3402,!1)}()}_flushAnimations(t,e){const i=new aC,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Ne=>{u.add(Ne);const Le=this.driver.query(Ne,".ng-animate-queued",!0);for(let We=0;We<Le.length;We++)u.add(Le[We])});const f=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=S4(m,this.collectedEnterElements),v=new Map;let w=0;y.forEach((Ne,Le)=>{const We=Uk+w++;v.set(Le,We),Ne.forEach(qe=>xo(qe,We))});const E=[],k=new Set,S=new Set;for(let Ne=0;Ne<this.collectedLeaveElements.length;Ne++){const Le=this.collectedLeaveElements[Ne],We=Le[Qo];We&&We.setForRemoval&&(E.push(Le),k.add(Le),We.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(qe=>k.add(qe)):S.add(Le))}const R=new Map,z=S4(m,Array.from(k));z.forEach((Ne,Le)=>{const We=JE+w++;R.set(Le,We),Ne.forEach(qe=>xo(qe,We))}),t.push(()=>{y.forEach((Ne,Le)=>{const We=v.get(Le);Ne.forEach(qe=>Np(qe,We))}),z.forEach((Ne,Le)=>{const We=R.get(Le);Ne.forEach(qe=>Np(qe,We))}),E.forEach(Ne=>{this.processLeaveNode(Ne)})});const q=[],ee=[];for(let Ne=this._namespaceList.length-1;Ne>=0;Ne--)this._namespaceList[Ne].drainQueuedTransitions(e).forEach(We=>{const qe=We.player,Yt=We.element;if(q.push(qe),this.collectedEnterElements.length){const bi=Yt[Qo];if(bi&&bi.setForMove){if(bi.previousTriggersValues&&bi.previousTriggersValues.has(We.triggerName)){const Rl=bi.previousTriggersValues.get(We.triggerName),Hs=this.statesByElement.get(We.element);if(Hs&&Hs.has(We.triggerName)){const Pl=Hs.get(We.triggerName);Pl.value=Rl,Hs.set(We.triggerName,Pl)}}return void qe.destroy()}}const Cn=!f||!this.driver.containsElement(f,Yt),on=R.get(Yt),an=v.get(Yt),$t=this._buildInstruction(We,i,an,on,Cn);if($t.errors&&$t.errors.length)return void ee.push($t);if(Cn)return qe.onStart(()=>Nd(Yt,$t.fromStyles)),qe.onDestroy(()=>Ma(Yt,$t.toStyles)),void r.push(qe);if(We.isFallbackTransition)return qe.onStart(()=>Nd(Yt,$t.fromStyles)),qe.onDestroy(()=>Ma(Yt,$t.toStyles)),void r.push(qe);const kr=[];$t.timelines.forEach(bi=>{bi.stretchStartingKeyframe=!0,this.disabledNodes.has(bi.element)||kr.push(bi)}),$t.timelines=kr,i.append(Yt,$t.timelines),o.push({instruction:$t,player:qe,element:Yt}),$t.queriedElements.forEach(bi=>io(a,bi,[]).push(qe)),$t.preStyleProps.forEach((bi,Rl)=>{if(bi.size){let Hs=l.get(Rl);Hs||l.set(Rl,Hs=new Set),bi.forEach((Pl,du)=>Hs.add(du))}}),$t.postStyleProps.forEach((bi,Rl)=>{let Hs=c.get(Rl);Hs||c.set(Rl,Hs=new Set),bi.forEach((Pl,du)=>Hs.add(du))})});if(ee.length){const Ne=[];ee.forEach(Le=>{Ne.push(function Vce(n,t){return new B(3505,!1)}())}),q.forEach(Le=>Le.destroy()),this.reportError(Ne)}const N=new Map,M=new Map;o.forEach(Ne=>{const Le=Ne.element;i.has(Le)&&(M.set(Le,Le),this._beforeAnimationBuild(Ne.player.namespaceId,Ne.instruction,N))}),r.forEach(Ne=>{const Le=Ne.element;this._getPreviousPlayers(Le,!1,Ne.namespaceId,Ne.triggerName,null).forEach(qe=>{io(N,Le,[]).push(qe),qe.destroy()})});const P=E.filter(Ne=>x4(Ne,l,c)),U=new Map;I4(U,this.driver,S,c,wl).forEach(Ne=>{x4(Ne,l,c)&&P.push(Ne)});const H=new Map;y.forEach((Ne,Le)=>{I4(H,this.driver,new Set(Ne),l,"!")}),P.forEach(Ne=>{const Le=U.get(Ne),We=H.get(Ne);U.set(Ne,new Map([...Le?.entries()??[],...We?.entries()??[]]))});const $=[],ct=[],Rt={};o.forEach(Ne=>{const{element:Le,player:We,instruction:qe}=Ne;if(i.has(Le)){if(u.has(Le))return We.onDestroy(()=>Ma(Le,qe.toStyles)),We.disabled=!0,We.overrideTotalTime(qe.totalTime),void r.push(We);let Yt=Rt;if(M.size>1){let on=Le;const an=[];for(;on=on.parentNode;){const $t=M.get(on);if($t){Yt=$t;break}an.push(on)}an.forEach($t=>M.set($t,Yt))}const Cn=this._buildAnimation(We.namespaceId,qe,N,s,H,U);if(We.setRealPlayer(Cn),Yt===Rt)$.push(We);else{const on=this.playersByElement.get(Yt);on&&on.length&&(We.parentPlayer=Wc(on)),r.push(We)}}else Nd(Le,qe.fromStyles),We.onDestroy(()=>Ma(Le,qe.toStyles)),ct.push(We),u.has(Le)&&r.push(We)}),ct.forEach(Ne=>{const Le=s.get(Ne.element);if(Le&&Le.length){const We=Wc(Le);Ne.setRealPlayer(We)}}),r.forEach(Ne=>{Ne.parentPlayer?Ne.syncPlayerEvents(Ne.parentPlayer):Ne.destroy()});for(let Ne=0;Ne<E.length;Ne++){const Le=E[Ne],We=Le[Qo];if(Np(Le,JE),We&&We.hasAnimation)continue;let qe=[];if(a.size){let Cn=a.get(Le);Cn&&Cn.length&&qe.push(...Cn);let on=this.driver.query(Le,Hk,!0);for(let an=0;an<on.length;an++){let $t=a.get(on[an]);$t&&$t.length&&qe.push(...$t)}}const Yt=qe.filter(Cn=>!Cn.destroyed);Yt.length?Lue(this,Le,Yt):this.processLeaveNode(Le)}return E.length=0,$.forEach(Ne=>{this.players.push(Ne),Ne.onDone(()=>{Ne.destroy();const Le=this.players.indexOf(Ne);this.players.splice(Le,1)}),Ne.play()}),$}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==_y;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,f=io(i,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(y=>{const v=y.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),y.destroy(),f.push(y)})}Nd(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,f=new Set,m=e.timelines.map(v=>{const w=v.element;u.add(w);const E=w[Qo];if(E&&E.removedBeforeQueried)return new fy(v.duration,v.delay);const k=w!==l,S=function Vue(n){const t=[];return A4(n,t),t}((i.get(w)||Mue).map(N=>N.getRealPlayer())).filter(N=>!!N.element&&N.element===w),R=s.get(w),z=o.get(w),q=r4(this._normalizer,v.keyframes,R,z),ee=this._buildPlayer(v,q,S);if(v.subTimeline&&r&&f.add(w),k){const N=new nR(t,a,w);N.setRealPlayer(ee),c.push(N)}return ee});c.forEach(v=>{io(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function Oue(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,v.element,v))}),u.forEach(v=>xo(v,d4));const y=Wc(m);return y.onDestroy(()=>{u.forEach(v=>Np(v,d4)),Ma(l,e.toStyles)}),f.forEach(v=>{io(r,v,[]).push(y)}),y}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new fy(t.duration,t.delay)}}class nR{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new fy,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>Fk(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){io(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function uC(n){return n&&1===n.nodeType}function T4(n,t){const e=n.style.display;return n.style.display=t??"none",e}function I4(n,t,e,i,r){const s=[];e.forEach(l=>s.push(T4(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(f=>{const m=t.computeStyle(c,f,r);u.set(f,m),(!m||0==m.length)&&(c[Qo]=kue,o.push(c))}),n.set(c,u)});let a=0;return e.forEach(l=>T4(l,s[a++])),o}function S4(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function xo(n,t){n.classList?.add(t)}function Np(n,t){n.classList?.remove(t)}function Lue(n,t,e){Wc(e).onDone(()=>n.processLeaveNode(t))}function A4(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof n4?A4(i.players,t):t.push(i)}}function x4(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class dC{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Pue(t,e,i),this._timelineEngine=new Tue(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=qk(this._driver,s,l,[]);if(l.length)throw function Sce(n,t){return new B(3404,!1)}();a=function wue(n,t,e){return new Eue(n,t,e)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,o]=s4(i);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[o,a]=s4(i);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let Uue=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ma(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ma(this._element,this._initialStyles),this._endStyles&&(Ma(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nd(this._element,this._endStyles),this._endStyles=null),Ma(this._element,this._initialStyles),this._state=3)}}return n})();function iR(n){let t=null;return n.forEach((e,i)=>{(function Hue(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class M4{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:g4(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class zue{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return a4(t,e)}getParentElement(t){return Bk(t)}query(t,e,i){return l4(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(y=>y instanceof M4);(function Yce(n,t){return 0===n||0===t})(i,r)&&u.forEach(y=>{y.currentSnapshot.forEach((v,w)=>c.set(w,v))});let f=function Gce(n){return n.length?n[0]instanceof Map?n:n.map(t=>h4(t)):[]}(e).map(y=>qc(y));f=function Qce(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,g4(n,a)))}}return t}(t,f,c);const m=function jue(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=iR(t[0]),t.length>1&&(i=iR(t[t.length-1]))):t instanceof Map&&(e=iR(t)),e||i?new Uue(n,e,i):null}(t,f);return new M4(t,f,l,m)}}let $ue=(()=>{class n extends Yz{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Fr.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?Jz(e):e;return k4(this._renderer,null,i,"register",[r]),new Wue(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(te(Rm),te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class Wue extends sce{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new que(this._id,t,e||{},this._renderer)}}class que{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return k4(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function k4(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const R4="@.disabled";let Gue=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new P4("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return i.data.animation.forEach(l),new Kue(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(te(Rm),te(dC),te(ot))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();class P4{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==R4?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Kue extends P4{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==R4?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Zue(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Yue(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}const O4=[{provide:Yz,useClass:$ue},{provide:Qk,useFactory:function Xue(){return new _ue}},{provide:dC,useClass:(()=>{class n extends dC{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt),te(jk),te(Qk),te(yc))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})()},{provide:Rm,useFactory:function Jue(n,t,e){return new Gue(n,t,e)},deps:[PA,dC,ot]}],rR=[{provide:jk,useFactory:()=>new zue},{provide:xm,useValue:"BrowserAnimations"},...O4],N4=[{provide:jk,useClass:c4},{provide:xm,useValue:"NoopAnimations"},...O4];let ede=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?N4:rR}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:rR,imports:[Cte]})}return n})(),F4=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||n)(K(zr),K(hn))};static#t=this.\u0275dir=et({type:n})}return n})(),Ld=(()=>{class n extends F4{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275dir=et({type:n,features:[rn]})}return n})();const ka=new De("NgValueAccessor"),nde={provide:ka,useExisting:dn(()=>Gc),multi:!0};let Gc=(()=>{class n extends Ld{writeValue(e){this.setProperty("checked",e)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&ae("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[fn([nde]),rn]})}return n})();const ide={provide:ka,useExisting:dn(()=>so),multi:!0},sde=new De("CompositionEventMode");let so=(()=>{class n extends F4{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rde(){const n=bc()?bc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||n)(K(zr),K(hn),K(sde,8))};static#t=this.\u0275dir=et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&ae("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[fn([ide]),rn]})}return n})();function Kc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Xr=new De("NgValidators"),Zc=new De("NgAsyncValidators");function j4(n){return Kc(n.value)?{required:!0}:null}function fC(n){return null}function q4(n){return null!=n}function G4(n){return Hm(n)?X(n):n}function K4(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Z4(n,t){return t.map(e=>e(n))}function Y4(n){return n.map(t=>function ade(n){return!n.validate}(t)?t:e=>t.validate(e))}function sR(n){return null!=n?function Q4(n){if(!n)return null;const t=n.filter(q4);return 0==t.length?null:function(e){return K4(Z4(e,t))}}(Y4(n)):null}function oR(n){return null!=n?function X4(n){if(!n)return null;const t=n.filter(q4);return 0==t.length?null:function(e){return function tde(...n){const t=Ua(n),{args:e,keys:i}=DB(n),r=new ft(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let f=!1;ii(e[u]).subscribe(Pe(s,m=>{f||(f=!0,c--),a[u]=m},()=>l--,void 0,()=>{(!l||!f)&&(c||s.next(i?TB(i,a):a),s.complete())}))}});return t?r.pipe(LA(t)):r}(Z4(e,t).map(G4)).pipe(Fe(K4))}}(Y4(n)):null}function J4(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function aR(n){return n?Array.isArray(n)?n:[n]:[]}function pC(n,t){return Array.isArray(n)?n.includes(t):n===t}function n$(n,t){const e=aR(t);return aR(n).forEach(r=>{pC(e,r)||e.push(r)}),e}function i$(n,t){return aR(t).filter(e=>!pC(n,e))}class r${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=oR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class _s extends r${get formDirective(){return null}get path(){return null}}class Yc extends r${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class s${constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let oo=(()=>{class n extends s${constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(K(Yc,2))};static#t=this.\u0275dir=et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&gr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[rn]})}return n})(),yy=(()=>{class n extends s${constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(K(_s,10))};static#t=this.\u0275dir=et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&gr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[rn]})}return n})();const vy="VALID",mC="INVALID",Fp="PENDING",by="DISABLED";function uR(n){return(_C(n)?n.validators:n)||null}function dR(n,t){return(_C(t)?t.asyncValidators:n)||null}function _C(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class c${constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===vy}get invalid(){return this.status===mC}get pending(){return this.status==Fp}get disabled(){return this.status===by}get enabled(){return this.status!==by}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(n$(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(n$(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(i$(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(i$(t,this._rawAsyncValidators))}hasValidator(t){return pC(this._rawValidators,t)}hasAsyncValidator(t){return pC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Fp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=by,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=vy,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vy||this.status===Fp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?by:vy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Fp,this._hasOwnPendingAsyncValidator=!0;const e=G4(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?by:this.errors?mC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fp)?Fp:this._anyControlsHaveStatus(mC)?mC:vy}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){_C(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function dde(n){return Array.isArray(n)?sR(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function hde(n){return Array.isArray(n)?oR(n):n||null}(this._rawAsyncValidators)}}class hR extends c${constructor(t,e,i){super(uR(e),dR(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function l$(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new B(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function a$(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new B(1e3,"");if(!i[e])throw new B(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Vd=new De("CallSetDisabledState",{providedIn:"root",factory:()=>wy}),wy="always";function Ey(n,t,e=wy){fR(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function gde(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&u$(n,t)})}(n,t),function _de(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function mde(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&u$(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function pde(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function bC(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function fR(n,t){const e=function e$(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(J4(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function t$(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(J4(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();bC(t._rawValidators,r),bC(t._rawAsyncValidators,r)}function u$(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Ede={provide:_s,useExisting:dn(()=>Bd)},Cy=(()=>Promise.resolve())();let Bd=(()=>{class n extends _s{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new $e,this.form=new hR({},sR(e),oR(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Cy.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Ey(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Cy.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Cy.then(()=>{const i=this._findContainer(e.path),r=new hR({});(function d$(n,t){fR(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Cy.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Cy.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function h$(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(K(Xr,10),K(Zc,10),K(Vd,8))};static#t=this.\u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&ae("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fn([Ede]),rn]})}return n})();function f$(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function p$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const g$=class extends c${constructor(t=null,e,i){super(uR(e),dR(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_C(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=p$(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){f$(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){f$(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){p$(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Tde={provide:Yc,useExisting:dn(()=>Vs)},y$=(()=>Promise.resolve())();let Vs=(()=>{class n extends Yc{constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new g$,this._registered=!1,this.name="",this.update=new $e,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function mR(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===so?e=s:function bde(n){return Object.getPrototypeOf(n.constructor)===Ld}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function gR(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ey(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){y$.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&Nf(i);y$.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function yC(n,t){return[...t.path,n]}(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||n)(K(_s,9),K(Xr,10),K(Zc,10),K(ka,10),K(vc,8),K(Vd,8))};static#t=this.\u0275dir=et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fn([Tde]),rn,Vi]})}return n})(),Dy=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const Ide={provide:ka,useExisting:dn(()=>EC),multi:!0};let EC=(()=>{class n extends Ld{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){1&i&&ae("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[fn([Ide]),rn]})}return n})(),v$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({})}return n})();const _R=new De("NgModelWithFormControlWarning"),Nde={provide:ka,useExisting:dn(()=>Qc),multi:!0};function T$(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Qc=(()=>{class n extends Ld{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=T$(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function Fde(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&ae("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[fn([Nde]),rn]})}return n})(),Lp=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(T$(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(K(hn),K(zr),K(Qc,9))};static#t=this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const Lde={provide:ka,useExisting:dn(()=>wR),multi:!0};function I$(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let wR=(()=>{class n extends Ld{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);r.push(c)}}else{const o=i.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function Vde(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&ae("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[fn([Lde]),rn]})}return n})(),Vp=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(I$(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(I$(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(K(hn),K(zr),K(wR,9))};static#t=this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();let jd=(()=>{class n{constructor(){this._validator=fC}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fC,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=et({type:n,features:[Vi]})}return n})();const jde={provide:Xr,useExisting:dn(()=>CC),multi:!0};let CC=(()=>{class n extends jd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>function A$(n){return"number"==typeof n?n:parseFloat(n)}(e),this.createValidator=e=>function V4(n){return t=>{if(Kc(t.value)||Kc(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(e)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&fi("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[fn([jde]),rn]})}return n})();const Ude={provide:Xr,useExisting:dn(()=>Ud),multi:!0};let Ud=(()=>{class n extends jd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Nf,this.createValidator=e=>j4}enabled(e){return e}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=ji(n)))(r||n)}}();static#t=this.\u0275dir=et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&fi("required",r._enabled?"":null)},inputs:{required:"required"},features:[fn([Ude]),rn]})}return n})(),N$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({imports:[v$]})}return n})(),Bs=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Vd,useValue:e.callSetDisabledState??wy}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({imports:[N$]})}return n})(),Kde=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:_R,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Vd,useValue:e.callSetDisabledState??wy}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({imports:[N$]})}return n})();function DC(n,t=0){return function Zde(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function Ty(n){return Array.isArray(n)?n:[n]}function Wi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ar(n){return n instanceof hn?n.nativeElement:n}const Yde=["addListener","removeListener"],Qde=["addEventListener","removeEventListener"],Xde=["on","off"];function Bp(n,t,e,i){if(L(e)&&(i=e,e=void 0),i)return Bp(n,t,e).pipe(LA(i));const[r,s]=function the(n){return L(n.addEventListener)&&L(n.removeEventListener)}(n)?Qde.map(o=>a=>n[o](t,a,e)):function Jde(n){return L(n.addListener)&&L(n.removeListener)}(n)?Yde.map(F$(n,t)):function ehe(n){return L(n.on)&&L(n.off)}(n)?Xde.map(F$(n,t)):[];if(!r&&Tt(n))return Tn(o=>Bp(o,t,e))(ii(n));if(!r)throw new TypeError("Invalid event target");return new ft(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function F$(n,t){return e=>i=>n[e](t,i)}const Iy={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Iy;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Ct(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=Iy;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Iy;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},L$=new class ihe extends q0{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class nhe extends W0{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Iy.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Iy.cancelAnimationFrame(e),t._scheduled=void 0)}});let ER,rhe=1;const TC={};function V$(n){return n in TC&&(delete TC[n],!0)}const she={setImmediate(n){const t=rhe++;return TC[t]=!0,ER||(ER=Promise.resolve()),ER.then(()=>V$(t)&&n()),t},clearImmediate(n){V$(n)}},{setImmediate:ohe,clearImmediate:ahe}=she,IC={setImmediate(...n){const{delegate:t}=IC;return(t?.setImmediate||ohe)(...n)},clearImmediate(n){const{delegate:t}=IC;return(t?.clearImmediate||ahe)(n)},delegate:void 0};new class che extends q0{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class lhe extends W0{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=IC.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(IC.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}});function CR(n=0,t,e=hre){let i=-1;return null!=t&&(Vl(t)?e=t:i=t),new ft(r=>{let s=function hhe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function B$(n,t=Kf){return function dhe(n){return pe((t,e)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Pe(e,c=>{i=!0,r=c,s||ii(n(c)).subscribe(s=Pe(e,a,l))},()=>{o=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>CR(n,t))}let DR;try{DR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{DR=!1}let Sy,zd,TR,Ra=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?iB(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!DR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(te(vo))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hd(n){return function fhe(){if(null==Sy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sy=!0}))}finally{Sy=Sy||!1}return Sy}()?n:!!n.capture}function phe(){if(null==zd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return zd=!1,zd;if("scrollBehavior"in document.documentElement.style)zd=!0;else{const n=Element.prototype.scrollTo;zd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return zd}function IR(n){if(function ghe(){if(null==TR){const n=typeof document<"u"?document.head:null;TR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return TR}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function SR(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Mo(n){return n.composedPath?n.composedPath()[0]:n.target}function AR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const mhe=new De("cdk-dir-doc",{providedIn:"root",factory:function _he(){return He(Lt)}}),yhe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ay=(()=>{class n{constructor(e){this.value="ltr",this.change=new $e,e&&(this.value=function vhe(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?yhe.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(te(mhe,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xy=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({})}return n})(),U$=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new ne,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ft(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(B$(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):be()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(vn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=ar(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Bp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(te(ot),te(Ra),te(Lt,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xR=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new ne,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(B$(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(te(Ra),te(ot),te(Lt,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MR=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({})}return n})(),H$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({imports:[xy,MR,xy,MR]})}return n})();class kR{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class RR extends kR{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class z$ extends kR{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Ehe extends kR{constructor(t){super(),this.element=t instanceof hn?t.nativeElement:t}}class PR{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof RR?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof z$?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Ehe?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Che extends PR{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Ui.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let OR=(()=>{class n extends PR{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new $e,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(s,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(K(Yu),K(ds),K(Lt))};static#t=this.\u0275dir=et({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[rn]})}return n})(),AC=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({})}return n})();const $$=phe();class Dhe{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Wi(-this._previousScrollPosition.left),t.style.top=Wi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),$$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),$$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class The{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(vn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class W${enable(){}disable(){}attach(){}}function NR(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function q$(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Ihe{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();NR(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let She=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new W$,this.close=o=>new The(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Dhe(this._viewportRuler,this._document),this.reposition=o=>new Ihe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(te(U$),te(xR),te(ot),te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class G${constructor(t){if(this.scrollStrategy=new W$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Ahe{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let K$=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xhe=(()=>{class n extends K${constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt),te(ot,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mhe=(()=>{class n extends K${constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Mo(s)},this._clickListener=s=>{const o=Mo(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt),te(Ra),te(ot,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xC=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||AR()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),AR()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt),te(Ra))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class My{constructor(t,e,i,r,s,o,a,l,c,u=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new ne,this._attachments=new ne,this._detachments=new ne,this._locationChanges=Ct.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new ne,this._outsidePointerEvents=new ne,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(zi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Wi(this._config.width),t.height=Wi(this._config.height),t.minWidth=Wi(this._config.minWidth),t.minHeight=Wi(this._config.minHeight),t.maxWidth=Wi(this._config.maxWidth),t.maxHeight=Wi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=Ty(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(qr(ve(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Z$="cdk-overlay-connected-position-bounding-box",khe=/([A-Za-z%]+)$/;class Rhe{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ne,this._resizeSubscription=Ct.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(Z$),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&$d(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Z$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==i.originX?o:a}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=Q$(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let m=0-a,y=a+s.height-i.height,v=this._subtractOverflows(s.width,0-o,o+s.width-i.width),w=this._subtractOverflows(s.height,m,y),E=v*w;return{visibleArea:E,isCompletelyWithinViewport:s.width*s.height===E,fitsInViewportVertically:w===s.height,fitsInViewportHorizontally:v==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,o=Y$(this._overlayRef.getConfig().minHeight),a=Y$(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Q$(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),c=Math.max(s.left-i.left-t.x,0);let u=0,f=0;return u=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-i.left-t.x:0,f=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:u,y:f},{x:t.x+u,y:t.y+f}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Ahe(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,f,m;if("top"===e.overlayY)o=t.y,s=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const y=Math.min(i.bottom-t.y+i.top,t.y),v=this._lastBoundingBoxSize.height;s=2*y,o=t.y-y,s>v&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-v/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)m=i.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)f=t.x,u=i.right-t.x;else{const y=Math.min(i.right-t.x+i.left,t.x),v=this._lastBoundingBoxSize.width;u=2*y,f=t.x-y,u>v&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.x-v/2)}return{top:o,left:f,bottom:a,right:m,width:u,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Wi(i.height),r.top=Wi(i.top),r.bottom=Wi(i.bottom),r.width=Wi(i.width),r.left=Wi(i.left),r.right=Wi(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Wi(s)),o&&(r.maxWidth=Wi(o))}this._lastBoundingBoxSize=i,$d(this._boundingBox.style,r)}_resetBoundingBoxStyles(){$d(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){$d(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();$d(i,this._getExactOverlayY(e,t,u)),$d(i,this._getExactOverlayX(e,t,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Wi(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Wi(o.maxWidth):s&&(i.maxWidth="")),$d(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Wi(s.y),r}_getExactOverlayX(t,e,i){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Wi(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:q$(t,i),isOriginOutsideView:NR(t,i),isOverlayClipped:q$(e,i),isOverlayOutsideView:NR(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Ty(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof hn)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function $d(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Y$(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(khe);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Q$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const X$="cdk-global-overlay-wrapper";class Phe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(X$),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let y="",v="",w="";l?w="flex-start":"center"===u?(w="center",m?v=f:y=f):m?"left"===u||"end"===u?(w="flex-end",y=f):("right"===u||"start"===u)&&(w="flex-start",v=f):"left"===u||"start"===u?(w="flex-start",y=f):("right"===u||"end"===u)&&(w="flex-end",v=f),t.position=this._cssPosition,t.marginLeft=l?"0":y,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":v,e.justifyContent=w,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(X$),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Ohe=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Phe}flexibleConnectedTo(e){return new Rhe(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(te(xR),te(Lt),te(Ra),te(xC))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nhe=0,Up=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,f,m,y){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=f,this._outsideClickDispatcher=m,this._animationsModuleType=y}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new G$(e);return o.direction=o.direction||this._directionality.value,new My(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Nhe++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(yc)),new Che(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(te(She),te(xC),te(Yu),te(Ohe),te(xhe),te(Ui),te(ot),te(Lt),te(Ay),te(t_),te(Mhe),te(xm,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vhe={provide:new De("cdk-connected-overlay-scroll-strategy"),deps:[Up],useFactory:function Lhe(n){return()=>n.scrollStrategies.reposition()}};let J$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:[Up,Vhe],imports:[xy,AC,H$,H$]})}return n})();function t5(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function n5(n){return vn((t,e)=>n<=e)}let $he=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Whe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:[$he]})}return n})();const r5=new Set;let Wd,Ghe=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Zhe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function Khe(n,t){if(!r5.has(n))try{Wd||(Wd=document.createElement("style"),t&&(Wd.nonce=t),Wd.setAttribute("type","text/css"),document.head.appendChild(Wd)),Wd.sheet&&(Wd.sheet.insertRule(`@media ${n} {body{ }}`,0),r5.add(n))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||n)(te(Ra),te(SI,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zhe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Yhe=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new ne}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return s5(Ty(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=sd(s5(Ty(e)).map(o=>this._registerQuery(o).observable));return s=C0(s.pipe(zi(1)),s.pipe(n5(1),function qhe(n,t=Kf){return pe((e,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}e.subscribe(Pe(i,c=>{s=c,o=t.now(),r||(r=t.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(0))),s.pipe(Fe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new ft(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(So(i),Fe(({matches:o})=>({query:e,matches:o})),qr(this._destroySubject)),mql:i};return this._queries.set(e,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(te(Ghe),te(ot))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function s5(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let MC=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function efe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function Jhe(n){try{return n.frameElement}catch{return null}}(function lfe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===c5(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=c5(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function ofe(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function afe(n){return!function nfe(n){return function rfe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function tfe(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function ife(n){return function sfe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||l5(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||n)(te(Ra))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l5(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function c5(n){if(!l5(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class cfe{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(zi(1)).subscribe(t)}}let FR=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new cfe(e,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(te(MC),te(ot),te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LR(n){return 0===n.buttons||0===n.detail}function VR(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const ufe=new De("cdk-input-modality-detector-options"),dfe={ignoreKeys:[18,17,224,91,16]},Hp=Hd({passive:!0,capture:!0});let hfe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new se(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Mo(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(LR(o)?"keyboard":"mouse"),this._mostRecentTarget=Mo(o))},this._onTouchstart=o=>{VR(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Mo(o))},this._options={...dfe,...s},this.modalityDetected=this._modality.pipe(n5(1)),this.modalityChanged=this.modalityDetected.pipe(Ii()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Hp),r.addEventListener("mousedown",this._onMousedown,Hp),r.addEventListener("touchstart",this._onTouchstart,Hp)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Hp),document.removeEventListener("mousedown",this._onMousedown,Hp),document.removeEventListener("touchstart",this._onTouchstart,Hp))}static#e=this.\u0275fac=function(i){return new(i||n)(te(Ra),te(ot),te(Lt),te(ufe,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const pfe=new De("cdk-focus-monitor-default-options"),kC=Hd({passive:!0,capture:!0});let BR=(()=>{class n{constructor(e,i,r,s,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ne,this._rootNodeFocusAndBlurListener=a=>{for(let c=Mo(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,i=!1){const r=ar(e);if(!this._platform.isBrowser||1!==r.nodeType)return be();const s=IR(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ne,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=ar(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=ar(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Mo(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,kC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,kC)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(qr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(te(ot),te(Ra),te(hfe),te(Lt,8),te(pfe,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const d5="cdk-high-contrast-black-on-white",h5="cdk-high-contrast-white-on-black",jR="cdk-high-contrast-active";let f5=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=He(Yhe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(jR,d5,h5),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(jR,d5):2===i&&e.add(jR,h5)}}static#e=this.\u0275fac=function(i){return new(i||n)(te(Ra),te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gfe=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(te(f5))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({imports:[Whe]})}return n})();function mfe(n,t){}class RC{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let p5=(()=>{class n extends PR{constructor(e,i,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),f},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=SR(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=SR();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=SR())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(K(hn),K(FR),K(Lt,8),K(RC),K(MC),K(ot),K(My),K(BR))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&US(OR,7),2&i){let s;td(s=nd())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&fi("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[rn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&xe(0,mfe,0,0,"ng-template",0)},dependencies:[OR],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class UR{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new ne,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!t5(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const g5=new De("DialogScrollStrategy"),_fe=new De("DialogData"),yfe=new De("DefaultDialogConfig"),bfe={provide:g5,deps:[Up],useFactory:function vfe(n){return()=>n.scrollStrategies.block()}};let wfe=0,m5=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,r,s,o,a){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._ariaHiddenElements=new Map,this.afterAllClosed=D0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(So(void 0))),this._scrollStrategy=a}open(e,i){(i={...this._defaultOptions||new RC,...i}).id=i.id||"cdk-dialog-"+wfe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new UR(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(e,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){HR(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){HR(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),HR(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new G$({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:RC,useValue:r},{provide:UR,useValue:i},{provide:My,useValue:e}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=p5;const l=new RR(a,r.viewContainerRef,Ui.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,i,r,s){if(e instanceof Eo){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new z$(e,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new RR(e,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,s){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:_fe,useValue:e.data},{provide:UR,useValue:i}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Ay,null,{optional:!0}))&&a.push({provide:Ay,useValue:{value:e.direction,change:be()}}),Ui.create({parent:o||s,providers:a})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(te(Up),te(Ui),te(yfe,8),te(n,12),te(xC),te(g5))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function HR(n,t){let e=n.length;for(;e--;)t(n[e])}let Efe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:[m5,bfe],imports:[J$,AC,gfe,AC]})}return n})();const Dfe=new De("mat-sanity-checks",{providedIn:"root",factory:function Cfe(){return!0}});let v5=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!AR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||n)(te(f5),te(Dfe,8),te(Lt))};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({imports:[xy,xy]})}return n})();const b5=Hd({passive:!0,capture:!0});class Sfe{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=Mo(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){const s=this._events.get(e);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,b5)})}removeHandler(t,e,i){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(i),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,b5)))}}class zR{static#e=this._eventManager=new Sfe;constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ar(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...w5,...i.animation},o=i.radius||function xfe(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),y=f.transitionDuration,v="none"===f.transitionProperty||"0s"===y||"0s, 0s"===y||0===r.width&&0===r.height,w=new Ife(this,u,i,v);u.style.transform="scale3d(1, 1, 1)",w.state=0,i.persistent||(this._mostRecentTransientRipple=w);return!v&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const k=()=>this._finishRippleTransition(w),S=()=>this._destroyRipple(w);u.addEventListener("transitionend",k),u.addEventListener("transitioncancel",S)}),this._activeRipples.set(w,null),(v||!c)&&this._finishRippleTransition(w),w}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...w5,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ar(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,C5.forEach(i=>{zR._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{D5.forEach(e=>{this._triggerElement.addEventListener(e,this,E5)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=LR(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!VR(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(C5.forEach(e=>zR._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&D5.forEach(e=>t.removeEventListener(e,this,E5)))}}function Mfe(n,t){}class PC{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const $R="mdc-dialog--open",T5="mdc-dialog--opening",I5="mdc-dialog--closing";let Pfe=(()=>{class n extends p5{constructor(e,i,r,s,o,a,l,c){super(e,i,r,s,o,a,l,c),this._animationStateChanged=new $e}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}static#e=this.\u0275fac=function(i){return new(i||n)(K(hn),K(FR),K(Lt,8),K(PC),K(MC),K(ot),K(My),K(BR))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["ng-component"]],features:[rn],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const S5="--mat-dialog-transition-duration";function A5(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?DC(n.substring(0,n.length-2)):n.endsWith("s")?1e3*DC(n.substring(0,n.length-1)):"0"===n?0:null}let Ofe=(()=>{class n extends Pfe{constructor(e,i,r,s,o,a,l,c,u){super(e,i,r,s,o,a,l,u),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?A5(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?A5(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(S5,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(T5,$R)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add($R),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove($R),this._animationsEnabled?(this._hostElement.style.setProperty(S5,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(I5)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(T5,I5)}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}static#e=this.\u0275fac=function(i){return new(i||n)(K(hn),K(FR),K(Lt,8),K(PC),K(MC),K(ot),K(My),K(xm,8),K(BR))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(bS("id",r._config.id),fi("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),gr("_mat-animation-noopable",!r._animationsEnabled))},features:[rn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(T(0,"div",0)(1,"div",1),xe(2,Mfe,0,0,"ng-template",2),I()())},dependencies:[OR],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class zp{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new ne,this._beforeClosed=new ne,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(vn(r=>"opened"===r.state),zi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(vn(r=>"closed"===r.state),zi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ve(this.backdropClick(),this.keydownEvents().pipe(vn(r=>27===r.keyCode&&!this.disableClose&&!t5(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function Nfe(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(vn(e=>"closing"===e.state),zi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const OC=new De("MatMdcDialogData"),Ffe=new De("mat-mdc-dialog-default-options"),x5=new De("mat-mdc-dialog-scroll-strategy"),Vfe={provide:x5,deps:[Up],useFactory:function Lfe(n){return()=>n.scrollStrategies.block()}};let Bfe=0,jfe=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,r,s,o,a,l,c,u,f){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._idPrefix="mat-dialog-",this.dialogConfigClass=PC,this.afterAllClosed=D0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(So(void 0))),this._scrollStrategy=a,this._dialog=i.get(m5)}open(e,i){let r;(i={...this._defaultOptions||new PC,...i}).id=i.id||`${this._idPrefix}${Bfe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:RC,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static#e=this.\u0275fac=function(i){qI()};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),Ry=(()=>{class n extends jfe{constructor(e,i,r,s,o,a,l,c){super(e,i,s,a,l,o,zp,Ofe,OC,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(te(Up),te(Ui),te(t_,8),te(Ffe,8),te(x5),te(n,12),te(xC),te(xm,8))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})(),Ufe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:[Ry,Vfe],imports:[Efe,J$,AC,v5,v5]})}return n})();class NC{}class FC{}class Pa{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Pa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Pa;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Pa?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Hfe{encodeKey(t){return k5(t)}encodeValue(t){return k5(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const $fe=/%(\d[a-f0-9])/gi,Wfe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function k5(n){return encodeURIComponent(n).replace($fe,(t,e)=>Wfe[e]??t)}function LC(n){return`${n}`}class Jc{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Hfe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function zfe(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(LC):[LC(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Jc({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(LC(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(LC(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class qfe{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function R5(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function P5(n){return typeof Blob<"u"&&n instanceof Blob}function O5(n){return typeof FormData<"u"&&n instanceof FormData}class Py{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Gfe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Pa),this.context||(this.context=new qfe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Jc,this.urlWithParams=e}serializeBody(){return null===this.body?null:R5(this.body)||P5(this.body)||O5(this.body)||function Kfe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||O5(this.body)?null:P5(this.body)?this.body.type||null:R5(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((f,m)=>f.set(m,t.setHeaders[m]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((f,m)=>f.set(m,t.setParams[m]),c)),new Py(e,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var $p=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}($p||{});class WR{constructor(t,e=200,i="OK"){this.headers=t.headers||new Pa,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class qR extends WR{constructor(t={}){super(t),this.type=$p.ResponseHeader}clone(t={}){return new qR({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Wp extends WR{constructor(t={}){super(t),this.type=$p.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Wp({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class N5 extends WR{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function GR(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Zfe=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Py)s=e;else{let l,c;l=r.headers instanceof Pa?r.headers:new Pa(r.headers),r.params&&(c=r.params instanceof Jc?r.params:new Jc({fromObject:r.params})),s=new Py(e,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=be(s).pipe(Lf(l=>this.handler.handle(l)));if(e instanceof Py||"events"===r.observe)return o;const a=o.pipe(vn(l=>l instanceof Wp));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Fe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Fe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Fe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Fe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Jc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,GR(r,i))}post(e,i,r={}){return this.request("POST",e,GR(r,i))}put(e,i,r={}){return this.request("PUT",e,GR(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(te(NC))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function V5(n,t){return t(n)}function Qfe(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}const Jfe=new De(""),Oy=new De(""),B5=new De("");function epe(){let n=null;return(t,e)=>{null===n&&(n=(He(Jfe,{optional:!0})??[]).reduceRight(Qfe,V5));const i=He(Xw),r=i.add();return n(t,e).pipe(a_(()=>i.remove(r)))}}let j5=(()=>{class n extends NC{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=He(Xw)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Oy),...this.injector.get(B5,[])]));this.chain=r.reduceRight((s,o)=>function Xfe(n,t,e){return(i,r)=>e.runInContext(()=>t(i,s=>n(s,r)))}(s,o,this.injector),V5)}const i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(a_(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(te(FC),te(Ys))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const rpe=/^\)\]\}',?\n/;let H5=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new B(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?X(i.\u0275loadImpl()):be(null)).pipe(at(()=>new ft(s=>{const o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((w,E)=>o.setRequestHeader(w,E.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const w=e.detectContentTypeHeader();null!==w&&o.setRequestHeader("Content-Type",w)}if(e.responseType){const w=e.responseType.toLowerCase();o.responseType="json"!==w?w:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const w=o.statusText||"OK",E=new Pa(o.getAllResponseHeaders()),k=function spe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new qR({headers:E,status:o.status,statusText:w,url:k}),l},u=()=>{let{headers:w,status:E,statusText:k,url:S}=c(),R=null;204!==E&&(R=typeof o.response>"u"?o.responseText:o.response),0===E&&(E=R?200:0);let z=E>=200&&E<300;if("json"===e.responseType&&"string"==typeof R){const q=R;R=R.replace(rpe,"");try{R=""!==R?JSON.parse(R):null}catch(ee){R=q,z&&(z=!1,R={error:ee,text:R})}}z?(s.next(new Wp({body:R,headers:w,status:E,statusText:k,url:S||void 0})),s.complete()):s.error(new N5({error:R,headers:w,status:E,statusText:k,url:S||void 0}))},f=w=>{const{url:E}=c(),k=new N5({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:E||void 0});s.error(k)};let m=!1;const y=w=>{m||(s.next(c()),m=!0);let E={type:$p.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),"text"===e.responseType&&o.responseText&&(E.partialText=o.responseText),s.next(E)},v=w=>{let E={type:$p.UploadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),s.next(E)};return o.addEventListener("load",u),o.addEventListener("error",f),o.addEventListener("timeout",f),o.addEventListener("abort",f),e.reportProgress&&(o.addEventListener("progress",y),null!==a&&o.upload&&o.upload.addEventListener("progress",v)),o.send(a),s.next({type:$p.Sent}),()=>{o.removeEventListener("error",f),o.removeEventListener("abort",f),o.removeEventListener("load",u),o.removeEventListener("timeout",f),e.reportProgress&&(o.removeEventListener("progress",y),null!==a&&o.upload&&o.upload.removeEventListener("progress",v)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(te(rB))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();const KR=new De("XSRF_ENABLED"),z5=new De("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),$5=new De("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class W5{}let lpe=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=GV(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt),te(vo),te(z5))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac})}return n})();function cpe(n,t){const e=n.url.toLowerCase();if(!He(KR)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=He(W5).getToken(),r=He($5);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var eu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(eu||{});function upe(...n){const t=[Zfe,H5,j5,{provide:NC,useExisting:j5},{provide:FC,useExisting:H5},{provide:Oy,useValue:cpe,multi:!0},{provide:KR,useValue:!0},{provide:W5,useClass:lpe}];for(const e of n)t.push(...e.\u0275providers);return bI(t)}const q5=new De("LEGACY_INTERCEPTOR_FN");function dpe(){return function qd(n,t){return{\u0275kind:n,\u0275providers:t}}(eu.LegacyInterceptors,[{provide:q5,useFactory:epe},{provide:Oy,useExisting:q5,multi:!0}])}let hpe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:[upe(dpe())]})}return n})();function G5(n=0,t=Kf){return n<0&&(n=0),CR(n,n,t)}var ype=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){void 0===e&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i={top:(i=t.getBoundingClientRect()).top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var s=this.offsetParent(t);i=this.offset(t,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){void 0===e&&(e=!0);var i=t.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft,s={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(t,e,i,r){var s=i.split("-"),o=s[0],a=void 0===o?"top":o,l=s[1],c=void 0===l?"center":l,u=r?this.offset(t,!1):this.position(t,!1),f=this.getAllStyles(e),m=parseFloat(f.marginTop),y=parseFloat(f.marginBottom),v=parseFloat(f.marginLeft),w=parseFloat(f.marginRight),E=0,k=0;switch(a){case"top":E=u.top-(e.offsetHeight+m+y);break;case"bottom":E=u.top+u.height;break;case"left":k=u.left-(e.offsetWidth+v+w);break;case"right":k=u.left+u.width}switch(c){case"top":E=u.top;break;case"bottom":E=u.top+u.height-e.offsetHeight;break;case"left":k=u.left;break;case"right":k=u.left+u.width-e.offsetWidth;break;case"center":"top"===a||"bottom"===a?k=u.left+u.width/2-e.offsetWidth/2:E=u.top+u.height/2-e.offsetHeight/2}e.style.transform="translate("+Math.round(k)+"px, "+Math.round(E)+"px)";var S=e.getBoundingClientRect(),R=document.documentElement,z=window.innerHeight||R.clientHeight,q=window.innerWidth||R.clientWidth;return S.left>=0&&S.top>=0&&S.right<=q&&S.bottom<=z},n}(),vpe=/\s+/,K5=new ype,Xo=function(){return Xo=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Xo.apply(this,arguments)},ZR=function(n,t,e){if(e||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},YR=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(YR||{}),wpe=[YR.SUNDAY,YR.SATURDAY],QR=7,tu=86400;function Z5(n,t){var e=t.startDate,r=t.excluded,s=t.precision;if(r.length<1)return 0;for(var a=n.getDay,l=n.addDays,c=(0,n.addSeconds)(e,t.seconds-1),u=a(e),f=a(c),m=0,y=e,v=function(){var w=a(y);r.some(function(E){return E===w})&&(m+=function Epe(n,t){var i=t.day,s=t.dayEnd,o=t.startDate,a=t.endDate,l=n.differenceInSeconds,u=n.startOfDay;if("minutes"===t.precision){if(i===t.dayStart)return l((0,n.endOfDay)(o),o)+1;if(i===s)return l(a,u(a))+1}return tu}(n,{dayStart:u,dayEnd:f,day:w,precision:s,startDate:e,endDate:c})),y=l(y,1)};y<c;)v();return m}function Ny(n,t){var i=t.periodStart,r=t.periodEnd;return t.events.filter(function(s){return function Tpe(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,s=n.isSameSecond,o=e.start,a=e.end||e.start;return!!(o>i&&o<r||a>i&&a<r||o<i&&a>r||s(o,i)||s(o,r)||s(a,i)||s(a,r))}(n,{event:s,periodStart:i,periodEnd:r})})}function Y5(n,t){var e=t.date,i=t.weekendDays,r=void 0===i?wpe:i,o=n.isSameDay,a=n.getDay,l=(0,n.startOfDay)(new Date),c=a(e);return{date:e,day:c,isPast:e<l,isToday:o(e,l),isFuture:e>l,isWeekend:r.indexOf(c)>-1}}function JR(n,t){for(var r=t.excluded,s=void 0===r?[]:r,o=t.weekendDays,a=t.viewStart,l=void 0===a?n.startOfWeek(t.viewDate,{weekStartsOn:t.weekStartsOn}):a,c=t.viewEnd,u=void 0===c?n.addDays(l,QR):c,f=n.addDays,m=n.getDay,y=[],v=l;v<u;)s.some(function(w){return m(v)===w})||y.push(Y5(n,{date:v,weekendDays:o})),v=f(v,1);return y}function Spe(n,t){var e=t.events,i=void 0===e?[]:e,r=t.excluded,s=void 0===r?[]:r,o=t.precision,a=void 0===o?"days":o,l=t.absolutePositionedEvents,c=void 0!==l&&l,u=t.viewStart,f=t.viewEnd;u=n.startOfDay(u),f=n.endOfDay(f);var m=n.differenceInSeconds,y=n.differenceInDays,v=function Ipe(n,t){for(var i=t.date2,r=t.excluded,s=t.date1,o=0;s<i;)-1===r.indexOf(n.getDay(s))&&o++,s=n.addDays(s,1);return o}(n,{date1:u,date2:f,excluded:s}),w=y(f,u)+1,E=i.filter(function(R){return R.allDay}).map(function(R){var z=function Dpe(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,s=t.precision,o=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(e.start<i)return 0;var c=0;switch(s){case"days":c=o(a(e.start),i)*tu;break;case"minutes":c=l(e.start,i)}return c-=Z5(n,{startDate:i,seconds:c,excluded:r,precision:s}),Math.abs(c/tu)}(n,{event:R,startOfWeek:u,excluded:s,precision:a}),q=function Cpe(n,t){var e=t.event,i=t.offset,s=t.excluded,o=t.precision,a=t.totalDaysInView,c=n.differenceInSeconds,u=n.addDays,f=n.endOfDay,m=n.differenceInDays,y=tu,v=(0,n.max)([e.start,t.startOfWeekDate]);e.end&&(y="minutes"===o?c(e.end,v):m(u(f(e.end),1),v)*tu);var w=i*tu,k=a*tu;return w+y>k&&(y=k-w),(y-=Z5(n,{startDate:v,seconds:y,excluded:s,precision:o}))/tu}(n,{event:R,offset:z,startOfWeekDate:u,excluded:s,precision:a,totalDaysInView:w});return{event:R,offset:z,span:q}}).filter(function(R){return R.offset<v}).filter(function(R){return R.span>0}).map(function(R){return{event:R.event,offset:R.offset,span:R.span,startsBeforeWeek:R.event.start<u,endsAfterWeek:(R.event.end||R.event.start)>f}}).sort(function(R,z){var q=m(R.event.start,z.event.start);return 0===q?m(z.event.end||z.event.start,R.event.end||R.event.start):q}),k=[],S=[];return E.forEach(function(R,z){if(-1===S.indexOf(R)){S.push(R);var q=R.span+R.offset,ee=E.slice(z+1).filter(function(P){if(P.offset>=q&&q+P.span<=w&&-1===S.indexOf(P)){var U=P.offset-q;return c||(P.offset=U),q+=P.span+U,S.push(P),!0}}),N=ZR([R],ee,!0),M=N.filter(function(P){return P.event.id}).map(function(P){return P.event.id}).join("-");k.push(Xo({row:N},M?{id:M}:{}))}}),k}function Ape(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.hourDuration,o=t.dayStart,a=t.dayEnd,l=t.weekStartsOn,c=t.excluded,u=t.weekendDays,f=t.segmentHeight,m=t.viewStart,y=t.viewEnd,v=t.minimumEventHeight,w=function Rpe(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,s=t.dayStart,o=t.dayEnd,a=n.setMinutes,l=n.setHours,c=n.startOfDay,u=n.startOfMinute,f=n.endOfDay,m=n.addMinutes,y=n.addDays,v=[],w=a(l(c(e),UC(s.hour)),HC(s.minute)),E=a(l(u(f(e)),UC(o.hour)),HC(o.minute)),k=(r||60)/i,S=c(e),R=f(e),z=function(U){return U};n.getTimezoneOffset(S)!==n.getTimezoneOffset(R)&&(S=y(S,1),w=y(w,1),E=y(E,1),z=function(U){return y(U,-1)});for(var q=r?1440/r:60,ee=0;ee<q;ee++){for(var N=[],M=0;M<i;M++){var P=m(m(w,ee*(r||60)),M*k);P>=w&&P<E&&N.push({date:z(P),displayDate:P,isStart:0===M})}N.length>0&&v.push({segments:N})}return v}(n,{viewDate:i,hourSegments:r,hourDuration:s,dayStart:o,dayEnd:a}),E=JR(n,{viewDate:i,weekStartsOn:l,excluded:c,weekendDays:u,viewStart:m,viewEnd:y}),k=n.setHours,S=n.setMinutes,R=n.getHours,z=n.getMinutes;return E.map(function(q){var ee=function kpe(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.dayStart,o=t.dayEnd,a=t.eventWidth,l=t.segmentHeight,c=t.hourDuration,u=t.minimumEventHeight,f=n.setMinutes,m=n.setHours,y=n.startOfDay,v=n.startOfMinute,w=n.endOfDay,E=n.differenceInMinutes,k=f(m(y(i),UC(s.hour)),HC(s.minute)),S=f(m(v(w(i)),UC(o.hour)),HC(o.minute));S.setSeconds(59,999);var R=[],z=Ny(n,{events:e.filter(function(M){return!M.allDay}),periodStart:k,periodEnd:S}),q=z.sort(function(M,P){return M.start.valueOf()-P.start.valueOf()}).map(function(M){var P=M.start,U=M.end||P,V=P<k,H=U>S,$=r*l/(c||60),ct=0;if(P>k){var Rt=n.getTimezoneOffset(P),Le=n.getTimezoneOffset(k)-Rt;ct+=E(P,k)+Le}ct*=$,ct=Math.floor(ct);var We=V?k:P,qe=H?S:U,Yt=n.getTimezoneOffset(We)-n.getTimezoneOffset(qe),Cn=E(qe,We)+Yt;M.end?Cn*=$:Cn=l,u&&Cn<u&&(Cn=u),Cn=Math.floor(Cn);for(var an=jC(R,ct,ct+Cn),$t=0;an.some(function(co){return co.left===$t});)$t+=a;var kr={event:M,height:Cn,width:a,top:ct,left:$t,startsBeforeDay:V,endsAfterDay:H};return R.push(kr),kr}),ee=Math.max.apply(Math,q.map(function(M){return M.left+M.width})),N=Ny(n,{events:e.filter(function(M){return M.allDay}),periodStart:y(k),periodEnd:w(S)});return{events:q,width:ee,allDayEvents:N,period:{events:z,start:k,end:S}}}(n,{events:e,viewDate:q.date,hourSegments:r,dayStart:o,dayEnd:a,segmentHeight:f,eventWidth:1,hourDuration:s,minimumEventHeight:v}),N=w.map(function(U){var V=U.segments.map(function(H){var $=S(k(q.date,R(H.date)),z(H.date));return Xo(Xo({},H),{date:$})});return Xo(Xo({},U),{segments:V})});function M(U,V){var H=Math.max.apply(Math,V.map(function(ct){return ct.left+1})),$=U.filter(function(ct){return ct.left>=H}).filter(function(ct){return jC(V,ct.top,ct.top+ct.height).length>0});return $.length>0?M(U,$):H}var P=ee.events.map(function(U){var H=100/M(ee.events,jC(ee.events,U.top,U.top+U.height));return Xo(Xo({},U),{left:U.left*H,width:H})});return{hours:N,date:q.date,events:P.map(function(U){var V=jC(P.filter(function(H){return H.left>U.left}),U.top,U.top+U.height);return V.length>0?Xo(Xo({},U),{width:Math.min.apply(Math,V.map(function(H){return H.left}))-U.left}):U})}})}function jC(n,t,e){return n.filter(function(i){var r=i.top,s=i.top+i.height;return t<s&&s<e||t<r&&r<e||r<=t&&e<=s})}function UC(n){return Math.max(Math.min(23,n),0)}function HC(n){return Math.max(Math.min(59,n),0)}var qp=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(qp||{});function eP(n,t){return n=function Fpe(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}(n,t),"function"==typeof n?function(){for(var i=arguments,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=i[o];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},Q5=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":tP(n))&&1===n.nodeType&&"object"===tP(n.style)&&"object"===tP(n.ownerDocument)};function X5(n,t){if(t=iP(t,!0),!Q5(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function nP(n,t){return-1!==X5(n,t)}function Vpe(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return function Lpe(n,t){for(var e=0;e<t.length;e++)nP(n,t[e])||n.push(t[e]);return t}(n,e=e.map(iP))}function Bpe(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(iP).reduce(function(r,s){var o=X5(n,s);return-1!==o?r.concat(n.splice(o,1)):r},[])}function iP(n,t){if("string"==typeof n)try{return document.querySelector(n)}catch(e){throw e}if(!Q5(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function J5(n){if(n===window)return function Upe(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}();try{var t=n.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var t,rP=void 0;"function"!=typeof Object.create?(t=function(){},rP=function(e,i){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===e&&(r.__proto__=null),r}):rP=Object.create;var zpe=rP,Gd=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function sP(n,t){t=t||{};for(var e=zpe(n),i=0;i<Gd.length;i++)void 0!==t[Gd[i]]&&(e[Gd[i]]=t[Gd[i]]);return e}function oP(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var Fy=["webkit","moz","ms","o"],Ly=function(){if(typeof window>"u")return function(){};for(var n=0,t=Fy.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[Fy[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-e),o=window.setTimeout(function(){return i(r+s)},s);return e=r+s,o}}return window.requestAnimationFrame.bind(window)}(),Gp=function(){if(typeof window>"u")return function(){};for(var n=0,t=Fy.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[Fy[n]+"CancelAnimationFrame"]||window[Fy[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function Wpe(n,t){void 0===t&&(t={});var e=this,i=4,r=!1;if("object"!=typeof t.margin){var s=t.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var o={},a=function jpe(n,t){var e=eP((t=t||{}).allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,o=s.documentElement,a=s.body;n.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}(o),l=function $pe(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function e(s){for(var o=0;o<Gd.length;o++)t[Gd[o]]=s[Gd[o]]}return void 0!==n&&n.addEventListener("mousemove",e),{destroy:function r(){n&&n.removeEventListener("mousemove",e,!1),t=null},dispatch:MouseEvent?function(o,a,l){var c=new MouseEvent("mousemove",sP(t,a));return oP(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEvent?function(o,a,l){var c=sP(t,a),u=document.createEvent("MouseEvents");return u.initMouseEvent("mousemove",!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),oP(u,l),o.dispatchEvent(u)}:"function"==typeof document.createEventObject?function(o,a,l){var c=document.createEventObject(),u=sP(t,a);for(var f in u)c[f]=u[f];return oP(c,l),o.dispatchEvent(c)}:void 0}}(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=eP(t.autoScroll),this.syncMove=eP(t.syncMove,!1),this.destroy=function(V){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",w,!1),window.removeEventListener("touchstart",w,!1),window.removeEventListener("mouseup",E,!1),window.removeEventListener("touchend",E,!1),window.removeEventListener("pointerup",E,!1),window.removeEventListener("mouseleave",S,!1),window.removeEventListener("mousemove",q,!1),window.removeEventListener("touchmove",q,!1),window.removeEventListener("scroll",v,!0),n=[],V&&k()},this.add=function(){for(var V=[],H=arguments.length;H--;)V[H]=arguments[H];return Vpe.apply(void 0,[n].concat(V)),this},this.remove=function(){for(var V=[],H=arguments.length;H--;)V[H]=arguments[H];return Bpe.apply(void 0,[n].concat(V))};var f,V,u=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),V=n,n=[],V.forEach(function(H){H===window?u=window:e.add(H)}),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return i}},point:{get:function(){return o}},scrolling:{get:function(){return r}}});var y,m=null;function v(V){for(var H=0;H<n.length;H++)if(n[H]===V.target){r=!0;break}r&&Ly(function(){return r=!1})}function w(){c=!0}function E(){c=!1,k()}function k(){Gp(y),Gp(f)}function S(){c=!1}function z(){for(var V=null,H=0;H<n.length;H++)e6(o,n[H])&&(V=n[H]);return V}function q(V){if(e.autoScroll()&&!V.dispatched){var H=V.target,$=document.body;m&&!e6(o,m)&&(e.scrollWhenOutside||(m=null)),H&&H.parentNode===$?H=z():(H=function R(V){if(!V)return null;if(m===V||nP(n,V))return V;for(;V=V.parentNode;)if(nP(n,V))return V;return null}(H),H||(H=z())),H&&H!==m&&(m=H),u&&(Gp(f),f=Ly(ee)),m&&(Gp(y),y=Ly(N))}}function ee(){M(u),Gp(f),f=Ly(ee)}function N(){m&&(M(m),Gp(y),y=Ly(N))}function M(V){var $,ct,H=J5(V);$=o.x<H.left+e.margin.left?Math.floor(Math.max(-1,(o.x-H.left)/e.margin.left-1)*e.maxSpeed.left):o.x>H.right-e.margin.right?Math.ceil(Math.min(1,(o.x-H.right)/e.margin.right+1)*e.maxSpeed.right):0,ct=o.y<H.top+e.margin.top?Math.floor(Math.max(-1,(o.y-H.top)/e.margin.top-1)*e.maxSpeed.top):o.y>H.bottom-e.margin.bottom?Math.ceil(Math.min(1,(o.y-H.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):0,e.syncMove()&&l.dispatch(V,{pageX:o.pageX+$,pageY:o.pageY+ct,clientX:o.x+$,clientY:o.y+ct}),setTimeout(function(){ct&&function P(V,H){V===window?window.scrollTo(V.pageXOffset,V.pageYOffset+H):V.scrollTop+=H}(V,ct),$&&function U(V,H){V===window?window.scrollTo(V.pageXOffset+H,V.pageYOffset):V.scrollLeft+=H}(V,$)})}window.addEventListener("mousedown",w,!1),window.addEventListener("touchstart",w,!1),window.addEventListener("mouseup",E,!1),window.addEventListener("touchend",E,!1),window.addEventListener("pointerup",E,!1),window.addEventListener("mousemove",q,!1),window.addEventListener("touchmove",q,!1),window.addEventListener("mouseleave",S,!1),window.addEventListener("scroll",v,!0)}function e6(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:function Hpe(n,t){var e=J5(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}(n,t)}function aP(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function zC(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}let t6=(()=>{class n{constructor(){this.currentDrag=new ne}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n6=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(K(hn))},n.\u0275dir=et({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),lP=(()=>{class n{constructor(e,i,r,s,o,a,l){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new $e,this.dragStart=new $e,this.ghostElementCreated=new $e,this.dragging=new $e,this.dragEnd=new $e,this.pointerDown$=new ne,this.pointerMove$=new ne,this.pointerUp$=new ne,this.eventListenerSubscriptions={},this.destroy$=new ne,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const e=this.pointerDown$.pipe(vn(()=>this.canDrag()),Tn(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),o=new ft(y=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",w=>y.next(w))).pipe(So(s),Fe(()=>this.getScrollPosition())),a=new ne,l=new V3;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const c=ve(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(Xe()),u=sd([this.pointerMove$,o]).pipe(Fe(([y,v])=>({currentDrag$:a,transformX:y.clientX-i.clientX,transformY:y.clientY-i.clientY,clientX:y.clientX,clientY:y.clientY,scrollLeft:v.left,scrollTop:v.top,target:y.event.target})),Fe(y=>(this.dragSnapGrid.x&&(y.transformX=Math.round(y.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(y.transformY=Math.round(y.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),y)),Fe(y=>(this.dragAxis.x||(y.transformX=0),this.dragAxis.y||(y.transformY=0),y)),Fe(y=>{const v=y.scrollLeft-s.left,w=y.scrollTop-s.top;return{...y,x:y.transformX+v,y:y.transformY+w}}),vn(({x:y,y:v,transformX:w,transformY:E})=>!this.validateDrag||this.validateDrag({x:y,y:v,transform:{x:w,y:E}})),qr(c),Xe()),f=u.pipe(zi(1),Xe()),m=u.pipe(S0(1),Xe());return f.subscribe(({clientX:y,clientY:v,x:w,y:E})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function qpe(n,t){return new Wpe(n,t)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),aP(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const k=this.element.nativeElement.getBoundingClientRect(),S=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(S):this.element.nativeElement.parentNode.insertBefore(S,this.element.nativeElement.nextSibling),this.ghostElement=S,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(S,{position:"fixed",top:`${k.top}px`,left:`${k.left}px`,width:`${k.width}px`,height:`${k.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const R=this.vcr.createEmbeddedView(this.ghostElementTemplate);S.innerHTML="",R.rootNodes.filter(z=>z instanceof Node).forEach(z=>{S.appendChild(z)}),m.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(R))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:y-w,clientY:v-E,element:S})}),m.subscribe(()=>{S.parentElement.removeChild(S),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),m.pipe(Tn(y=>{const v=l.pipe(function Npe(n){return function Ope(n,t){return pe(xB(n,t,arguments.length>=2,!1,!0))}((t,e,i)=>!n||n(e,i)?t+1:t,0)}(),zi(1),Fe(w=>({...y,dragCancelled:w>0})));return l.complete(),v})).subscribe(({x:y,y:v,dragCancelled:w})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:y,y:v,dragCancelled:w})}),zC(this.renderer,this.element,this.dragActiveClass),a.complete()}),ve(c,m).pipe(zi(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),u}),Xe());ve(e.pipe(zi(1),Fe(i=>[,i])),e.pipe(Qf())).pipe(vn(([i,r])=>!i||i.x!==r.x||i.y!==r.y),Fe(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:c,target:u})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const f=`translate3d(${l}px, ${c}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:f,"-webkit-transform":f,"-ms-transform":f,"-moz-transform":f,"-o-transform":f})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:u})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){0===e.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){0===e.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=Bp(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Bp(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(e,l,i)),(!this.touchStartLongPress||!s||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){const s=this.getScrollPosition(),o_top=Math.abs(s.top-r.top),o_left=Math.abs(s.left-r.left),a=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-o_left,l=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-o_top,u=this.touchStartLongPress;return(a+l>u.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=u.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const e=this.getScrollElement();return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(K(hn),K(zr),K(t6),K(ot),K(ds),K(n6,8),K(Lt))},n.\u0275dir=et({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Vi]}),n})();function i6(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}let cP=(()=>{class n{constructor(e,i,r,s,o){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=o,this.dragEnter=new $e,this.dragLeave=new $e,this.dragOver=new $e,this.drop=new $e}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{aP(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const o=e.pipe(Fe(({clientX:c,clientY:u,dropData:f,target:m})=>{s={clientX:c,clientY:u,dropData:f,target:m},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const y=i6(c,u,i.rect),v=!this.validateDrop||this.validateDrop({clientX:c,clientY:u,target:m,dropData:f});return i.scrollContainerRect?y&&v&&i6(c,u,i.scrollContainerRect):y&&v})),a=o.pipe(Ii());let l;a.pipe(vn(c=>c)).subscribe(()=>{l=!0,aP(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(vn(c=>c)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(Qf(),vn(([c,u])=>c&&!u)).subscribe(()=>{l=!1,zC(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),e.subscribe({complete:()=>{r(),zC(this.renderer,this.element,this.dragActiveClass),l&&(zC(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(K(hn),K(t6),K(ot),K(zr),K(n6,8))},n.\u0275dir=et({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),$C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Zt({}),n})();const Kd=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function r6(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let Zpe=0;function s6(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Zpe++}`)}function o6(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function a6(n,t,e,i){const r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}const l6=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function c6(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function WC({edges:n,initialRectangle:t,newRectangle:e}){const i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}const u6="resize-active";let d6=(()=>{class n{constructor(e,i,r,s){this.platformId=e,this.renderer=i,this.elm=r,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=l6,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new $e,this.resizing=new $e,this.resizeEnd=new $e,this.mouseup=new ne,this.mousedown=new ne,this.mousemove=new ne,this.destroy$=new ne,this.pointerEventListeners=Kp.getInstance(i,s)}ngOnInit(){const e=ve(this.pointerEventListeners.pointerDown,this.mousedown),i=ve(this.pointerEventListeners.pointerMove,this.mousemove).pipe(rr(({event:c})=>{s&&c.cancelable&&c.preventDefault()}),Xe()),r=ve(this.pointerEventListeners.pointerUp,this.mouseup);let s;const o=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>({...l6,...this.resizeCursors});e.pipe(Tn(c=>{function u(y){return{clientX:y.clientX-c.clientX,clientY:y.clientY-c.clientY}}const f=()=>{const y={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?y.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(y.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?y.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(y.y=+this.resizeSnapGrid.bottom)),y};function m(y,v){return{x:Math.ceil(y.clientX/v.x),y:Math.ceil(y.clientY/v.y)}}return ve(i.pipe(zi(1)).pipe(Fe(y=>[,y])),i.pipe(Qf())).pipe(Fe(([y,v])=>[y&&u(y),u(v)])).pipe(vn(([y,v])=>{if(!y)return!0;const w=f(),E=m(y,w),k=m(v,w);return E.x!==k.x||E.y!==k.y})).pipe(Fe(([,y])=>{const v=f();return{clientX:Math.round(y.clientX/v.x)*v.x,clientY:Math.round(y.clientY/v.y)*v.y}})).pipe(qr(ve(r,e)))})).pipe(vn(()=>!!s)).pipe(Fe(({clientX:c,clientY:u})=>a6(s.startingRect,s.edges,c,u))).pipe(vn(c=>this.allowNegativeResizes||!!(c.height&&c.width&&c.height>0&&c.width>0))).pipe(vn(c=>!this.validateResize||this.validateResize({rectangle:c,edges:WC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c})})),qr(this.destroy$)).subscribe(c=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${c.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${c.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${c.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${c.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:WC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c}),rectangle:c})}),s.currentRect=c}),e.pipe(Fe(({edges:c})=>c||{}),vn(c=>Object.keys(c).length>0),qr(this.destroy$)).subscribe(c=>{s&&o();const u=function Ype(n,t){let e=0,i=0;const r=n.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(o&&o.includes("translate")&&(e=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===t)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{const a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-e,right:a.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:c,startingRect:u,currentRect:u};const f=a(),m=c6(s.edges,f);this.renderer.setStyle(document.body,"cursor",m),this.setElementClass(this.elm,u6,!0),this.enableGhostResize&&(s.clonedNode=function Kpe(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),"canvas"===i?o6(n,t):("input"===i||"select"===i||"textarea"===i)&&s6(n,t),r6("canvas",n,t,o6),r6("input, textarea, select",n,t,s6),t}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",c6(s.edges,f)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:WC({edges:c,initialRectangle:u,newRectangle:u}),rectangle:a6(u,{},0,0)})})}),r.pipe(qr(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,u6),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:WC({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),o(),s=null)})}ngOnDestroy(){iB(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)(K(vo),K(zr),K(hn),K(ot))},n.\u0275dir=et({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class Kp{constructor(t,e){this.pointerDown=new ft(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),Kd&&(s=t.listen("document","touchstart",o=>{i.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{r(),Kd&&s()}}).pipe(Xe()),this.pointerMove=new ft(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),Kd&&(s=t.listen("document","touchmove",o=>{i.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{r(),Kd&&s()}}).pipe(Xe()),this.pointerUp=new ft(i=>{let r,s,o;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),Kd&&(s=t.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),o=t.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),Kd&&(s(),o())}}).pipe(Xe())}static getInstance(t,e){return Kp.instance||(Kp.instance=new Kp(t,e)),Kp.instance}}let Jpe=(()=>{class n{constructor(e,i,r,s){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new ne}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),Kd&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),ve(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return Bp(this.element.nativeElement,e).pipe(qr(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)(K(zr),K(hn),K(ot),K(d6,8))},n.\u0275dir=et({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),h6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Zt({}),n})();const ege=function(n){return{action:n}};function tge(n,t){if(1&n){const e=_t();T(0,"a",5),ae("mwlClick",function(r){const o=he(e).$implicit,a=J(2).event;return fe(o.onClick({event:a,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=he(e).$implicit,a=J(2).event;return fe(o.onClick({event:a,sourceEvent:r}))}),Xt(1,"calendarA11y"),I()}if(2&n){const e=t.$implicit;W("ngClass",e.cssClass)("innerHtml",e.label,bw),fi("aria-label",pi(1,3,Ir(6,ege,e),"actionButtonLabel"))}}function nge(n,t){if(1&n&&(T(0,"span",3),xe(1,tge,2,8,"a",4),I()),2&n){const e=J(),i=e.event,r=e.trackByActionId;j(1),W("ngForOf",i.actions)("ngForTrackBy",r)}}function ige(n,t){1&n&&xe(0,nge,2,2,"span",2),2&n&&W("ngIf",t.event.actions)}function rge(n,t){}const sge=function(n,t){return{event:n,trackByActionId:t}},Zp=function(){return{}};function oge(n,t){if(1&n&&(On(0,"span",2),Xt(1,"calendarEventTitle"),Xt(2,"calendarA11y")),2&n){const e=t.event;W("innerHTML",va(1,2,e.title,t.view,e),bw),fi("aria-hidden",pi(2,6,Kn(9,Zp),"hideEventTitle"))}}function age(n,t){}const lge=function(n,t){return{event:n,view:t}};function cge(n,t){if(1&n&&(T(0,"div",2),On(1,"div",3)(2,"div",4),I()),2&n){const e=t.contents;W("ngClass","cal-tooltip-"+t.placement),j(2),W("innerHtml",e,bw)}}function uge(n,t){}const dge=function(n,t,e){return{contents:n,placement:t,event:e}};function hge(n,t){if(1&n&&(T(0,"span",7),F(1),I()),2&n){const e=J().day;j(1),nt(e.badgeTotal)}}const uP=function(n){return{backgroundColor:n}},fge=function(n,t){return{event:n,draggedFrom:t}},Vy=function(n,t){return{x:n,y:t}},qC=function(){return{delay:300,delta:30}};function pge(n,t){if(1&n){const e=_t();T(0,"div",10),ae("mouseenter",function(){const s=he(e).$implicit;return fe(J(2).highlightDay.emit({event:s}))})("mouseleave",function(){const s=he(e).$implicit;return fe(J(2).unhighlightDay.emit({event:s}))})("mwlClick",function(r){const o=he(e).$implicit;return fe(J(2).eventClicked.emit({event:o,sourceEvent:r}))}),Xt(1,"calendarEventTitle"),Xt(2,"calendarA11y"),I()}if(2&n){const e=t.$implicit,i=J(2),r=i.tooltipPlacement,s=i.tooltipTemplate,o=i.tooltipAppendToBody,a=i.tooltipDelay,l=i.day,c=i.validateDrag;gr("cal-draggable",e.draggable),W("ngStyle",Ir(22,uP,null==e.color?null:e.color.primary))("ngClass",null==e?null:e.cssClass)("mwlCalendarTooltip",va(1,15,e.title,"monthTooltip",e))("tooltipPlacement",r)("tooltipEvent",e)("tooltipTemplate",s)("tooltipAppendToBody",o)("tooltipDelay",a)("dropData",tr(24,fge,e,l))("dragAxis",tr(27,Vy,e.draggable,e.draggable))("validateDrag",c)("touchStartLongPress",Kn(30,qC)),fi("aria-hidden",pi(2,19,Kn(31,Zp),"hideMonthCellEvents"))}}function gge(n,t){if(1&n&&(T(0,"div",8),xe(1,pge,3,32,"div",9),I()),2&n){const e=J(),i=e.day,r=e.trackByEventId;j(1),W("ngForOf",i.events)("ngForTrackBy",r)}}const mge=function(n,t){return{day:n,locale:t}};function _ge(n,t){if(1&n&&(T(0,"div",2),Xt(1,"calendarA11y"),T(2,"span",3),xe(3,hge,2,1,"span",4),T(4,"span",5),F(5),Xt(6,"calendarDate"),I()()(),xe(7,gge,2,2,"div",6)),2&n){const e=t.day,i=t.locale;fi("aria-label",pi(1,4,tr(11,mge,e,i),"monthCell")),j(3),W("ngIf",e.badgeTotal>0),j(2),nt(va(6,7,e.date,"monthViewDayNumber",i)),j(2),W("ngIf",e.events.length>0)}}function yge(n,t){}const vge=function(n,t,e,i,r,s,o,a,l,c,u,f){return{day:n,openDay:t,locale:e,tooltipPlacement:i,highlightDay:r,unhighlightDay:s,eventClicked:o,tooltipTemplate:a,tooltipAppendToBody:l,tooltipDelay:c,trackByEventId:u,validateDrag:f}},bge=function(n){return{event:n}},f6=function(n,t){return{event:n,locale:t}};function wge(n,t){if(1&n){const e=_t();T(0,"div",7),On(1,"span",8),F(2," "),T(3,"mwl-calendar-event-title",9),ae("mwlClick",function(r){const o=he(e).$implicit;return fe(J(2).eventClicked.emit({event:o,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=he(e).$implicit;return fe(J(2).eventClicked.emit({event:o,sourceEvent:r}))}),Xt(4,"calendarA11y"),I(),F(5," "),On(6,"mwl-calendar-event-actions",10),I()}if(2&n){const e=t.$implicit,i=J(2).validateDrag,r=J();gr("cal-draggable",e.draggable),W("ngClass",null==e?null:e.cssClass)("dropData",Ir(16,bge,e))("dragAxis",tr(18,Vy,e.draggable,e.draggable))("validateDrag",i)("touchStartLongPress",Kn(21,qC)),j(1),W("ngStyle",Ir(22,uP,null==e.color?null:e.color.primary)),j(2),W("event",e)("customTemplate",r.eventTitleTemplate),fi("aria-label",pi(4,13,tr(24,f6,e,r.locale),"eventDescription")),j(3),W("event",e)("customTemplate",r.eventActionsTemplate)}}const p6=function(n,t){return{date:n,locale:t}};function Ege(n,t){if(1&n&&(T(0,"div",3),On(1,"span",4),Xt(2,"calendarA11y"),On(3,"span",5),Xt(4,"calendarA11y"),xe(5,wge,7,27,"div",6),I()),2&n){const e=J(),i=e.events,r=e.trackByEventId,s=J();W("@collapse",void 0),j(1),fi("aria-label",pi(2,5,tr(11,p6,s.date,s.locale),"openDayEventsAlert")),j(2),fi("aria-label",pi(4,8,tr(14,p6,s.date,s.locale),"openDayEventsLandmark")),j(2),W("ngForOf",i)("ngForTrackBy",r)}}function Cge(n,t){1&n&&xe(0,Ege,6,17,"div",2),2&n&&W("ngIf",t.isOpen)}function Dge(n,t){}const Tge=function(n,t,e,i,r){return{events:n,eventClicked:t,isOpen:e,trackByEventId:i,validateDrag:r}};function Ige(n,t){if(1&n){const e=_t();T(0,"div",4),ae("click",function(r){const o=he(e).$implicit;return fe(J(2).columnHeaderClicked.emit({isoDayNumber:o.day,sourceEvent:r}))}),F(1),Xt(2,"calendarDate"),I()}if(2&n){const e=t.$implicit,i=J().locale;gr("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),W("ngClass",e.cssClass),j(1),cs(" ",va(2,10,e.date,"monthViewColumnHeader",i)," ")}}function Sge(n,t){if(1&n&&(T(0,"div",2),xe(1,Ige,3,14,"div",3),I()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;j(1),W("ngForOf",e)("ngForTrackBy",i)}}function Age(n,t){}const xge=function(n,t,e){return{days:n,locale:t,trackByWeekDayHeaderDate:e}};function Mge(n,t){if(1&n){const e=_t();T(0,"mwl-calendar-month-cell",7),ae("mwlClick",function(r){const o=he(e).$implicit;return fe(J(2).dayClicked.emit({day:o,sourceEvent:r}))})("mwlKeydownEnter",function(r){const o=he(e).$implicit;return fe(J(2).dayClicked.emit({day:o,sourceEvent:r}))})("highlightDay",function(r){return he(e),fe(J(2).toggleDayHighlight(r.event,!0))})("unhighlightDay",function(r){return he(e),fe(J(2).toggleDayHighlight(r.event,!1))})("drop",function(r){const o=he(e).$implicit;return fe(J(2).eventDropped(o,r.dropData.event,r.dropData.draggedFrom))})("eventClicked",function(r){return he(e),fe(J(2).eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))}),Xt(1,"calendarA11y"),I()}if(2&n){const e=t.$implicit,i=J(2);W("ngClass",null==e?null:e.cssClass)("day",e)("openDay",i.openDay)("locale",i.locale)("tooltipPlacement",i.tooltipPlacement)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipTemplate",i.tooltipTemplate)("tooltipDelay",i.tooltipDelay)("customTemplate",i.cellTemplate)("ngStyle",Ir(15,uP,e.backgroundColor))("clickListenerDisabled",0===i.dayClicked.observers.length),fi("tabindex",pi(1,12,Kn(17,Zp),"monthCellTabIndex"))}}function kge(n,t){if(1&n){const e=_t();T(0,"div")(1,"div",4),xe(2,Mge,2,18,"mwl-calendar-month-cell",5),Xt(3,"slice"),I(),T(4,"mwl-calendar-open-day-events",6),ae("eventClicked",function(r){return he(e),fe(J().eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))})("drop",function(r){he(e);const s=J();return fe(s.eventDropped(s.openDay,r.dropData.event,r.dropData.draggedFrom))}),I()()}if(2&n){const e=t.$implicit,i=J();j(2),W("ngForOf",va(3,9,i.view.days,e,e+i.view.totalDaysVisibleInWeek))("ngForTrackBy",i.trackByDate),j(2),W("locale",i.locale)("isOpen",i.openRowIndex===e)("events",null==i.openDay?null:i.openDay.events)("date",null==i.openDay?null:i.openDay.date)("customTemplate",i.openDayEventsTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)}}function Rge(n,t){if(1&n){const e=_t();T(0,"div",4),ae("mwlClick",function(r){const o=he(e).$implicit;return fe(J().dayHeaderClicked.emit({day:o,sourceEvent:r}))})("drop",function(r){const o=he(e).$implicit;return fe(J().eventDropped.emit({event:r.dropData.event,newStart:o.date}))})("dragEnter",function(){const s=he(e).$implicit;return fe(J().dragEnter.emit({date:s.date}))}),T(1,"b"),F(2),Xt(3,"calendarDate"),I(),On(4,"br"),T(5,"span"),F(6),Xt(7,"calendarDate"),I()()}if(2&n){const e=t.$implicit,i=J().locale;gr("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),W("ngClass",e.cssClass),j(2),nt(va(3,11,e.date,"weekViewColumnHeader",i)),j(4),nt(va(7,15,e.date,"weekViewColumnSubHeader",i))}}function Pge(n,t){if(1&n&&(T(0,"div",2),xe(1,Rge,8,19,"div",3),I()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;j(1),W("ngForOf",e)("ngForTrackBy",i)}}function Oge(n,t){}const Nge=function(n,t,e,i,r,s){return{days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:s}},Fge=function(n,t,e){return{color:n,backgroundColor:t,borderColor:e}};function Lge(n,t){if(1&n){const e=_t();T(0,"div",2),ae("mwlClick",function(r){return fe(he(e).eventClicked.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){return fe(he(e).eventClicked.emit({sourceEvent:r}))}),Xt(1,"calendarEventTitle"),Xt(2,"calendarA11y"),On(3,"mwl-calendar-event-actions",3),F(4," "),On(5,"mwl-calendar-event-title",4),I()}if(2&n){const e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,s=t.tooltipAppendToBody,o=t.tooltipDisabled,a=t.tooltipDelay,l=t.daysInWeek,c=J();W("ngStyle",Kw(20,Fge,null==e.event.color?null:e.event.color.secondaryText,null==e.event.color?null:e.event.color.secondary,null==e.event.color?null:e.event.color.primary))("mwlCalendarTooltip",o?"":va(1,13,e.event.title,1===l?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",s)("tooltipDelay",a),fi("aria-label",pi(2,17,tr(24,f6,e.tempEvent||e.event,c.locale),"eventDescription")),j(3),W("event",e.tempEvent||e.event)("customTemplate",c.eventActionsTemplate),j(2),W("event",e.tempEvent||e.event)("customTemplate",c.eventTitleTemplate)("view",1===l?"day":"week")}}function Vge(n,t){}const Bge=function(n,t,e,i,r,s,o,a,l){return{weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:s,tooltipDelay:o,column:a,daysInWeek:l}};function jge(n,t){if(1&n&&(T(0,"div",4),F(1),Xt(2,"calendarDate"),I()),2&n){const e=J(),i=e.segment,r=e.daysInWeek,s=e.locale;j(1),cs(" ",va(2,1,i.displayDate,1===r?"dayViewHour":"weekViewHour",s)," ")}}function Uge(n,t){if(1&n&&(T(0,"div",2),Xt(1,"calendarA11y"),xe(2,jge,3,5,"div",3),I()),2&n){const e=t.segment,r=t.isTimeLabel,s=t.daysInWeek;wo("height",t.segmentHeight,"px"),gr("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),W("ngClass",e.cssClass),fi("aria-hidden",pi(1,9,Kn(12,Zp),1===s?"hideDayHourSegment":"hideWeekHourSegment")),j(2),W("ngIf",r)}}function Hge(n,t){}const zge=function(n,t,e,i,r){return{segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r}};function $ge(n,t){1&n&&On(0,"div",3),2&n&&wo("top",J().topPx,"px")}function Wge(n,t){1&n&&xe(0,$ge,1,2,"div",2),2&n&&W("ngIf",t.isVisible)}function qge(n,t){}const Gge=function(n,t,e,i,r,s,o){return{columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:s,topPx:o}};function Kge(n,t){1&n&&fS(0)}function Zge(n,t){if(1&n){const e=_t();T(0,"div",14),ae("drop",function(r){const o=he(e).$implicit;return fe(J(2).eventDropped(r,o.date,!0))})("dragEnter",function(){const s=he(e).$implicit;return fe(J(2).dateDragEnter(s.date))}),I()}}const Yge=function(){return{left:!0}};function Qge(n,t){1&n&&On(0,"div",23),2&n&&W("resizeEdges",Kn(1,Yge))}const Xge=function(){return{right:!0}};function Jge(n,t){1&n&&On(0,"div",24),2&n&&W("resizeEdges",Kn(1,Xge))}const eme=function(n,t){return{left:n,right:t}},g6=function(n,t){return{event:n,calendarId:t}},tme=function(n){return{x:n}};function nme(n,t){if(1&n){const e=_t();T(0,"div",18,19),ae("resizeStart",function(r){const o=he(e).$implicit;J();const a=pr(1);return fe(J(2).allDayEventResizeStarted(a,o,r))})("resizing",function(r){const o=he(e).$implicit,a=J(3);return fe(a.allDayEventResizing(o,r,a.dayColumnWidth))})("resizeEnd",function(){const s=he(e).$implicit;return fe(J(3).allDayEventResizeEnded(s))})("dragStart",function(){const s=he(e).$implicit,o=pr(1);J();const a=pr(1);return fe(J(2).dragStarted(a,o,s,!1))})("dragging",function(){return he(e),fe(J(3).allDayEventDragMove())})("dragEnd",function(r){const o=he(e).$implicit,a=J(3);return fe(a.dragEnded(o,r,a.dayColumnWidth))}),xe(2,Qge,1,2,"div",20),T(3,"mwl-calendar-week-view-event",21),ae("eventClicked",function(r){const o=he(e).$implicit;return fe(J(3).eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),I(),xe(4,Jge,1,2,"div",22),I()}if(2&n){const e=t.$implicit,i=J(3);wo("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),gr("cal-draggable",e.event.draggable&&0===i.allDayEventResizes.size)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),W("ngClass",null==e.event?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",tr(33,eme,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",tr(36,g6,e.event,i.calendarId))("dragAxis",tr(39,Vy,e.event.draggable&&0===i.allDayEventResizes.size,!i.snapDraggedEvents&&e.event.draggable&&0===i.allDayEventResizes.size))("dragSnapGrid",i.snapDraggedEvents?Ir(42,tme,i.dayColumnWidth):Kn(44,Zp))("validateDrag",i.validateDrag)("touchStartLongPress",Kn(45,qC)),j(2),W("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),j(1),W("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),j(1),W("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function ime(n,t){if(1&n&&(T(0,"div",15,16),xe(2,nme,5,46,"div",17),I()),2&n){const e=t.$implicit,i=J(2);j(2),W("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function rme(n,t){if(1&n){const e=_t();T(0,"div",8,9),ae("dragEnter",function(){return he(e),fe(J().dragEnter("allDay"))})("dragLeave",function(){return he(e),fe(J().dragLeave("allDay"))}),T(2,"div",5)(3,"div",10),xe(4,Kge,1,0,"ng-container",11),I(),xe(5,Zge,1,0,"div",12),I(),xe(6,ime,3,2,"div",13),I()}if(2&n){const e=J();j(4),W("ngTemplateOutlet",e.allDayEventsLabelTemplate),j(1),W("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),j(1),W("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function sme(n,t){if(1&n&&On(0,"mwl-calendar-week-view-hour-segment",28),2&n){const e=t.$implicit,i=J(3);wo("height",i.hourSegmentHeight,"px"),W("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function ome(n,t){if(1&n&&(T(0,"div",26),xe(1,sme,1,8,"mwl-calendar-week-view-hour-segment",27),I()),2&n){const e=t.$implicit,i=t.odd,r=J(2);gr("cal-hour-odd",i),j(1),W("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function ame(n,t){if(1&n&&(T(0,"div",10),xe(1,ome,2,4,"div",25),I()),2&n){const e=J();j(1),W("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}const lme=function(){return{left:!0,top:!0}};function cme(n,t){1&n&&On(0,"div",23),2&n&&W("resizeEdges",Kn(1,lme))}function ume(n,t){}function dme(n,t){if(1&n){const e=_t();T(0,"mwl-calendar-week-view-event",36),ae("eventClicked",function(r){he(e);const s=J().$implicit;return fe(J(2).eventClicked.emit({event:s.event,sourceEvent:r.sourceEvent}))}),I()}if(2&n){const e=J().$implicit,i=J().$implicit,r=J();W("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}const hme=function(){return{right:!0,bottom:!0}};function fme(n,t){1&n&&On(0,"div",24),2&n&&W("resizeEdges",Kn(1,hme))}const pme=function(n,t,e,i){return{left:n,right:t,top:e,bottom:i}};function gme(n,t){if(1&n){const e=_t();T(0,"div",33,19),ae("resizeStart",function(r){const o=he(e).$implicit,a=J(2),l=pr(6);return fe(a.timeEventResizeStarted(l,o,r))})("resizing",function(r){const o=he(e).$implicit;return fe(J(2).timeEventResizing(o,r))})("resizeEnd",function(){const s=he(e).$implicit;return fe(J(2).timeEventResizeEnded(s))})("dragStart",function(){const s=he(e).$implicit,o=pr(1),a=J(2),l=pr(6);return fe(a.dragStarted(l,o,s,!0))})("dragging",function(r){const o=he(e).$implicit;return fe(J(2).dragMove(o,r))})("dragEnd",function(r){const o=he(e).$implicit,a=J(2);return fe(a.dragEnded(o,r,a.dayColumnWidth,!0))}),xe(2,cme,1,2,"div",20),xe(3,ume,0,0,"ng-template",34),xe(4,dme,1,12,"ng-template",null,35,Co),xe(6,fme,1,2,"div",22),I()}if(2&n){const e=t.$implicit,i=pr(5),r=J(2);wo("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),gr("cal-draggable",e.event.draggable&&0===r.timeEventResizes.size)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),W("ngClass",e.event.cssClass)("hidden",0===e.height&&0===e.width)("resizeCursors",r.resizeCursors)("resizeSnapGrid",p2(30,pme,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",tr(35,g6,e.event,r.calendarId))("dragAxis",tr(38,Vy,e.event.draggable&&0===r.timeEventResizes.size,e.event.draggable&&0===r.timeEventResizes.size))("dragSnapGrid",r.snapDraggedEvents?tr(41,Vy,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):Kn(44,Zp))("touchStartLongPress",Kn(45,qC))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),j(2),W("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),j(1),W("ngTemplateOutlet",i),j(3),W("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function mme(n,t){if(1&n){const e=_t();T(0,"mwl-calendar-week-view-hour-segment",38),ae("mwlClick",function(r){const o=he(e).$implicit;return fe(J(3).hourSegmentClicked.emit({date:o.date,sourceEvent:r}))})("drop",function(r){const o=he(e).$implicit;return fe(J(3).eventDropped(r,o.date,!1))})("dragEnter",function(){const s=he(e).$implicit;return fe(J(3).dateDragEnter(s.date))}),I()}if(2&n){const e=t.$implicit,i=J(3);wo("height",i.hourSegmentHeight,"px"),W("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",0===i.hourSegmentClicked.observers.length)("dragOverClass",i.dragActive&&i.snapDraggedEvents?null:"cal-drag-over")("isTimeLabel",1===i.daysInWeek)}}function _me(n,t){if(1&n&&(T(0,"div",26),xe(1,mme,1,10,"mwl-calendar-week-view-hour-segment",37),I()),2&n){const e=t.$implicit,i=t.odd,r=J(2);gr("cal-hour-odd",i),j(1),W("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function yme(n,t){if(1&n&&(T(0,"div",29),On(1,"mwl-calendar-week-view-current-time-marker",30),T(2,"div",31),xe(3,gme,7,46,"div",32),I(),xe(4,_me,2,4,"div",25),I()),2&n){const e=t.$implicit,i=J();j(1),W("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),j(2),W("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),j(1),W("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}let Zd=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new $e,this.destroy$=new ne}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(qr(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new ft(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)(K(zr),K(hn),K(Lt))},n.\u0275dir=et({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),GC=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new $e,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(13===e.keyCode||13===e.which||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){null!==this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)(K(hn),K(ot),K(zr))},n.\u0275dir=et({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),By=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`\n        ${nr(e.date,"EEEE MMMM d",i)},\n        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${nr(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`\n      Beginning of expanded view for ${nr(e,"EEEE MMMM dd",i)}\n    `}openDayEventsAlert({date:e,locale:i}){return`${nr(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(!0===e.allDay)return this.allDayEventDescription({event:e,locale:i});const r=`\n      ${nr(e.start,"EEEE MMMM dd",i)},\n      ${e.title}, from ${nr(e.start,"hh:mm a",i)}\n    `;return e.end?r+` to ${nr(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){const r=`\n      ${e.title}, event spans multiple days:\n      start time ${nr(e.start,"MMMM dd hh:mm a",i)}\n    `;return e.end?r+`, stop time ${nr(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(te(CA))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),Yd=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){const r=Object.getOwnPropertyNames(Object.getPrototypeOf(By.prototype)).filter(s=>"constructor"!==s);throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)(K(By,16),K(Rs,16))},n.\u0275pipe=Ai({name:"calendarA11y",type:n,pure:!0}),n})(),m6=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter"]],template:function(e,i){if(1&e&&(xe(0,ige,1,1,"ng-template",null,0,Co),xe(2,rge,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",tr(2,sge,i.event,i.trackByActionId))}},dependencies:[ps,Sr,Js,Io,Zd,GC,Yd],encapsulation:2}),n})();class KC{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}}let dP=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)(K(KC,16))},n.\u0275pipe=Ai({name:"calendarEventTitle",type:n,pure:!0}),n})(),_6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(1&e&&(xe(0,oge,3,10,"ng-template",null,0,Co),xe(2,age,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",tr(2,lge,i.event,i.view))}},dependencies:[Io,dP,Yd],encapsulation:2}),n})(),vme=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(1&e&&(xe(0,cge,3,2,"ng-template",null,0,Co),xe(2,uge,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",Kw(2,dge,i.contents,i.placement,i.event))}},dependencies:[ps,Io],encapsulation:2}),n})(),y6=(()=>{class n{constructor(e,i,r,s,o,a){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=o,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new ne,this.tooltipFactory=s.resolveComponentFactory(vme)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(null===this.delay?be("now"):CR(this.delay)).pipe(qr(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=function bpe(n,t,e,i,r){var s=Array.isArray(e)?e:e.split(vpe),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,l=function(E){var k=E.split("-"),S=k[0],R=k[1],z=[];return r&&(z.push(r+"-"+S),R&&z.push(r+"-"+S+"-"+R),z.forEach(function(q){a.add(q)})),z};r&&o.forEach(function(E){a.remove(r+"-"+E)});var c=s.findIndex(function(E){return"auto"===E});c>=0&&o.forEach(function(E){null==s.find(function(k){return-1!==k.search("^"+E)})&&s.splice(c++,1,E)});var u=t.style;u.position="absolute",u.top="0",u.left="0",u["will-change"]="transform";for(var f,m=!1,y=0,v=s;y<v.length;y++){var w=l(f=v[y]);if(K5.positionElements(n,t,f,i)){m=!0;break}r&&w.forEach(function(E){a.remove(E)})}return m||(l(f=s[0]),K5.positionElements(n,t,f,i)),f}(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===e.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)(K(hn),K(Ui),K(zr),K(Yu),K(ds),K(Lt))},n.\u0275dir=et({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){1&e&&ae("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:["mwlCalendarTooltip","contents"],placement:["tooltipPlacement","placement"],customTemplate:["tooltipTemplate","customTemplate"],event:["tooltipEvent","event"],appendToBody:["tooltipAppendToBody","appendToBody"],delay:["tooltipDelay","delay"]},features:[Vi]}),n})();var ko=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(ko||{});const v6=n=>function Ppe(n,t){var e=!0;function i(r,s){t(r,s),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(qp.StartPropertyNotDate,r):i(qp.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(qp.EndPropertyNotDate,r),r.start>r.end&&i(qp.EndsBeforeStart,r))}),e):(t(qp.NotArray,n),!1)}(n,(...e)=>console.warn("angular-calendar",...e));function b6(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function w6(n,t){return Math.round(n/t)*t}const E6=(n,t)=>t.id?t.id:t,hP=(n,t)=>t.date.toISOString(),Eme=(n,t)=>t.date.toISOString(),Cme=(n,t)=>t.segments[0].date.toISOString(),Dme=(n,t)=>t.event.id?t.event.id:t.event,Tme=(n,t)=>t.event.id?t.event.id:t.event;function fP(n,t,e,i,r){const s=w6(n,i||e),o=function Sme(n,t,e){return(e||60)/(n*t)}(t,e,r);return s*o}function C6(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Qd(n,t,e,i){let r=0,s=0;const o=e<0?n.subDays:n.addDays;let a=t;for(;s<=Math.abs(e);){a=o(t,r);const l=n.getDay(a);-1===i.indexOf(l)&&s++,r++}return a}function pP(n,t,e,i=[],r){let s=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e});const o=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(s))>-1&&s<o;)s=n.addDays(s,1);if(r)return{viewStart:s,viewEnd:n.endOfDay(Qd(n,s,r-1,i))};{let a=o;for(;i.indexOf(n.getDay(a))>-1&&a>s;)a=n.subDays(a,1);return{viewStart:s,viewEnd:a}}}function gP({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}class Xd{}let Mme=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return nr(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return nr(e,"d",i)}monthViewTitle({date:e,locale:i}){return nr(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return nr(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return nr(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:s,daysInWeek:o}){const{viewStart:a,viewEnd:l}=pP(this.dateAdapter,e,r,s,o),c=(u,f)=>nr(u,"MMM d"+(f?", yyyy":""),i);return`${c(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${c(l,!0)}`}weekViewHour({date:e,locale:i}){return nr(e,"h a",i)}dayViewHour({date:e,locale:i}){return nr(e,"h a",i)}dayViewTitle({date:e,locale:i}){return nr(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(te(Xd))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),jy=(()=>{class n extends Mme{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=ji(n)))(i||n)}}(),n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),ZC=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,s=0,o=[],a){if(typeof this.dateFormatter[i]>"u"){const l=Object.getOwnPropertyNames(Object.getPrototypeOf(jy.prototype)).filter(c=>"constructor"!==c);throw new Error(`${i} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:s,excludeDays:o,daysInWeek:a})}}return n.\u0275fac=function(e){return new(e||n)(K(jy,16),K(Rs,16))},n.\u0275pipe=Ai({name:"calendarDate",type:n,pure:!0}),n})(),Uy=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return function Mpe(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,o=t.excluded,a=void 0===o?[]:o,l=t.viewStart,c=void 0===l?n.startOfMonth(r):l,u=t.viewEnd,f=void 0===u?n.endOfMonth(r):u,m=t.weekendDays;i||(i=[]);for(var P,v=n.endOfWeek,w=n.differenceInDays,E=n.startOfDay,k=n.addHours,S=n.endOfDay,R=n.isSameMonth,z=n.getDay,q=(0,n.startOfWeek)(c,{weekStartsOn:s}),ee=v(f,{weekStartsOn:s}),N=Ny(n,{events:i,periodStart:q,periodEnd:ee}),M=[],U=function(We){var qe;if(P?(qe=E(k(P,24)),P.getTime()===qe.getTime()&&(qe=E(k(P,25))),P=qe):qe=P=q,!a.some(function(on){return z(qe)===on})){var Yt=Y5(n,{date:qe,weekendDays:m}),Cn=Ny(n,{events:N,periodStart:E(qe),periodEnd:S(qe)});Yt.inMonth=R(qe,r),Yt.events=Cn,Yt.badgeTotal=Cn.length,M.push(Yt)}},V=0;V<w(ee,q)+1;V++)U();var H=[],$=QR-a.length;if($<QR)for(V=0;V<M.length;V+=$){var ct=M.slice(V,V+$);ct.some(function(qe){return c<=qe.date&&qe.date<f})&&(H=ZR(ZR([],H,!0),ct,!0))}else H=M;var Ne=Math.floor(H.length/$),Le=[];for(V=0;V<Ne;V++)Le.push(V*$);return{rowOffsets:Le,totalDaysVisibleInWeek:$,days:H,period:{start:H[0].date,end:S(H[H.length-1].date),events:N}}}(this.dateAdapter,e)}getWeekViewHeader(e){return JR(this.dateAdapter,e)}getWeekView(e){return function xpe(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,o=t.excluded,a=void 0===o?[]:o,l=t.precision,c=void 0===l?"days":l,u=t.absolutePositionedEvents,f=void 0!==u&&u,m=t.hourSegments,y=t.hourDuration,v=t.dayStart,w=t.dayEnd,E=t.weekendDays,k=t.segmentHeight,S=t.minimumEventHeight,R=t.viewStart,z=void 0===R?n.startOfWeek(r,{weekStartsOn:s}):R,q=t.viewEnd,ee=void 0===q?n.endOfWeek(r,{weekStartsOn:s}):q;i||(i=[]);var M=n.endOfDay,P=Ny(n,{events:i,periodStart:z=(0,n.startOfDay)(z),periodEnd:ee=M(ee)}),U=JR(n,{viewDate:r,weekStartsOn:s,excluded:a,weekendDays:E,viewStart:z,viewEnd:ee});return{allDayEventRows:Spe(n,{events:P,excluded:a,precision:c,absolutePositionedEvents:f,viewStart:z,viewEnd:ee}),period:{events:P,start:U[0].date,end:M(U[U.length-1].date)},hourColumns:Ape(n,{events:i,viewDate:r,hourSegments:m,hourDuration:y,dayStart:v,dayEnd:w,weekStartsOn:s,excluded:a,weekendDays:E,segmentHeight:k,viewStart:z,viewEnd:ee,minimumEventHeight:S})}}(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(te(Xd))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();new De("Moment");var nu=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(nu||{});let Yp=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||KC,i.dateFormatter||jy,i.utils||Uy,i.a11y||By]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Zt({providers:[CA],imports:[ir]}),n})(),kme=(()=>{class n{constructor(){this.highlightDay=new $e,this.unhighlightDay=new $e,this.eventClicked=new $e,this.trackByEventId=E6,this.validateDrag=gP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(e,i){2&e&&gr("cal-past",i.day.isPast)("cal-today",i.day.isToday)("cal-future",i.day.isFuture)("cal-weekend",i.day.isWeekend)("cal-in-month",i.day.inMonth)("cal-out-month",!i.day.inMonth)("cal-has-events",i.day.events.length>0)("cal-open",i.day===i.openDay)("cal-event-highlight",!!i.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:15,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"]],template:function(e,i){if(1&e&&(xe(0,_ge,8,14,"ng-template",null,0,Co),xe(2,yge,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",RS(2,vge,[i.day,i.openDay,i.locale,i.tooltipPlacement,i.highlightDay,i.unhighlightDay,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDelay,i.trackByEventId,i.validateDrag]))}},dependencies:[ps,Sr,Js,Io,al,lP,y6,Zd,ZC,dP,Yd],encapsulation:2}),n})();const Rme=function Qz(n,t){return{type:7,name:n,definitions:t,options:{}}}("collapse",[QE("void",$c({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),QE("*",$c({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),XE("* => void",YE("150ms ease-out")),XE("void => *",YE("150ms ease-in"))]);let Pme=(()=>{class n{constructor(){this.isOpen=!1,this.eventClicked=new $e,this.trackByEventId=E6,this.validateDrag=gP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-open-day-events","role","application",4,"ngIf"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"event","customTemplate","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"]],template:function(e,i){if(1&e&&(xe(0,Cge,1,1,"ng-template",null,0,Co),xe(2,Dge,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",kS(2,Tge,i.events,i.eventClicked,i.isOpen,i.trackByEventId,i.validateDrag))}},dependencies:[ps,Sr,Js,Io,al,lP,m6,_6,Zd,GC,Yd],encapsulation:2,data:{animation:[Rme]}}),n})(),Ome=(()=>{class n{constructor(){this.columnHeaderClicked=new $e,this.trackByWeekDayHeaderDate=hP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass","click"]],template:function(e,i){if(1&e&&(xe(0,Sge,2,2,"ng-template",null,0,Co),xe(2,Age,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",Kw(2,xge,i.days,i.locale,i.trackByWeekDayHeaderDate))}},dependencies:[ps,Sr,Io,ZC],encapsulation:2}),n})(),Nme=(()=>{class n{constructor(e,i,r,s){this.cdr=e,this.utils=i,this.dateAdapter=s,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new $e,this.dayClicked=new $e,this.eventClicked=new $e,this.columnHeaderClicked=new $e,this.eventTimesChanged=new $e,this.trackByRowOffset=(o,a)=>this.view.days.slice(a,this.view.totalDaysVisibleInWeek).map(l=>l.date.toISOString()).join("-"),this.trackByDate=(o,a)=>a.date.toISOString(),this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays,r=e.viewDate||e.events||e.excludeDays||e.weekendDays;i&&this.refreshHeader(),e.events&&v6(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender(),(e.activeDayIsOpen||e.viewDate||e.events||e.excludeDays||e.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(e,i){this.view.days.forEach(r=>{i&&r.events.indexOf(e)>-1?r.backgroundColor=e.color&&e.color.secondary||"#D1E8FF":delete r.backgroundColor})}eventDropped(e,i,r){if(e!==r){const s=this.dateAdapter.getYear(e.date),o=this.dateAdapter.getMonth(e.date),a=this.dateAdapter.getDate(e.date),l=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(i.start,s),o),a);let c;if(i.end){const u=this.dateAdapter.differenceInSeconds(l,i.start);c=this.dateAdapter.addSeconds(i.end,u)}this.eventTimesChanged.emit({event:i,newStart:l,newEnd:c,day:e,type:nu.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(!0===this.activeDayIsOpen){const e=this.activeDay||this.viewDate;this.openDay=this.view.days.find(r=>this.dateAdapter.isSameDay(r.date,e));const i=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(i/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}}return n.\u0275fac=function(e){return new(e||n)(K(vc),K(Uy),K(Rs),K(Xd))},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[Vi],decls:4,vars:5,consts:[["role","grid",1,"cal-month-view"],[3,"days","locale","customTemplate","columnHeaderClicked"],[1,"cal-days"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate","eventClicked","drop"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked"]],template:function(e,i){1&e&&(T(0,"div",0)(1,"mwl-calendar-month-view-header",1),ae("columnHeaderClicked",function(s){return i.columnHeaderClicked.emit(s)}),I(),T(2,"div",2),xe(3,kge,5,13,"div",3),I()()),2&e&&(j(1),W("days",i.columnHeaders)("locale",i.locale)("customTemplate",i.headerTemplate),j(2),W("ngForOf",i.view.rowOffsets)("ngForTrackBy",i.trackByRowOffset))},dependencies:[ps,Sr,al,cP,Zd,GC,kme,Pme,Ome,tB,Yd],encapsulation:2}),n})(),mP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Zt({imports:[ir,$C,Yp,$C]}),n})();class Fme{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:s}){const o=gP({x:t,y:e})||r;if(i){const a=Object.assign({},this.startPosition,{left:this.startPosition.left+s.x,right:this.startPosition.right+s.x,top:this.startPosition.top+s.y,bottom:this.startPosition.bottom+s.y});if(o){const l=this.dragContainerElement.getBoundingClientRect(),c=l.top<a.top&&a.top<l.bottom,u=l.top<a.bottom&&a.bottom<l.bottom;return b6(l,a)&&(c||u)}return!1}return o}}class Lme{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),!(this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth))&&function wme(n,t){return b6(n,t)&&function bme(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}(n,t)}(this.resizeContainerElement.getBoundingClientRect(),t)}}let Vme=(()=>{class n{constructor(){this.dayHeaderClicked=new $e,this.eventDropped=new $e,this.dragEnter=new $e,this.trackByWeekDayHeaderDate=hP}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"ngClass","mwlClick","drop","dragEnter"]],template:function(e,i){if(1&e&&(xe(0,Pge,2,2,"ng-template",null,0,Co),xe(2,Oge,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",function g2(n,t,e,i,r,s,o,a,l){const c=Bi()+n,u=Te(),f=bo(u,c,e,i,r,s);return Qu(u,c+4,o,a)||f?ma(u,c+6,l?t.call(l,e,i,r,s,o,a):t(e,i,r,s,o,a)):Vm(u,c+6)}(2,Nge,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[ps,Sr,Io,cP,Zd,ZC],encapsulation:2}),n})(),Bme=(()=>{class n{constructor(){this.eventClicked=new $e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(1&e&&(xe(0,Lge,6,27,"ng-template",null,0,Co),xe(2,Vge,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",RS(2,Bge,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[Io,al,m6,_6,y6,Zd,GC,dP,Yd],encapsulation:2}),n})(),jme=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(1&e&&(xe(0,Uge,3,13,"ng-template",null,0,Co),xe(2,Hge,0,0,"ng-template",1)),2&e){const r=pr(1);j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",kS(2,zge,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[ps,Js,Io,ZC,Yd],encapsulation:2}),n})(),Ume=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new se(void 0),this.marker$=this.zone.onStable.pipe(at(()=>G5(6e4)),So(0),cx(this.columnDate$),Fe(r=>{const s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(r,l)&&l>=s&&l<=o,top:this.dateAdapter.differenceInMinutes(l,s)*a}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)(K(Xd),K(ot))},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[Vi],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(1&e&&(xe(0,Wge,1,1,"ng-template",null,0,Co),xe(2,qge,0,0,"ng-template",1),Xt(3,"async"),Xt(4,"async")),2&e){const r=pr(1);let s;j(2),W("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",function m2(n,t,e,i,r,s,o,a,l,c){const u=Bi()+n,f=Te();let m=bo(f,u,e,i,r,s);return Vw(f,u+4,o,a,l)||m?ma(f,u+7,c?t.call(c,e,i,r,s,o,a,l):t(e,i,r,s,o,a,l)):Vm(f,u+7)}(6,Gge,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,null==(s=PS(3,2,i.marker$))?null:s.isVisible,null==(s=PS(4,4,i.marker$))?null:s.top))}},dependencies:[Js,Io,JV],encapsulation:2}),n})(),D6=(()=>{class n{constructor(e,i,r,s,o){this.cdr=e,this.utils=i,this.dateAdapter=s,this.element=o,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new $e,this.eventClicked=new $e,this.eventTimesChanged=new $e,this.beforeViewRender=new $e,this.hourSegmentClicked=new $e,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=hP,this.trackByHourSegment=Eme,this.trackByHour=Cme,this.trackByWeekAllDayEvent=Dme,this.trackByWeekTimeEvent=Tme,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&v6(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&"rtl"===getComputedStyle(this.element.nativeElement).direction,this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);const r=new Map,s=[...this.events];this.timeEventResizes.forEach((o,a)=>{const l=this.getTimeEventResizedDates(a,o),c={...a,...l};r.set(c,a);const u=s.indexOf(a);s[u]=c}),this.restoreOriginalEvents(s,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);const i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);const r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:nu.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){const s=this.allDayEventResizes.get(e),o=this.rtl?-1:1;if(typeof i.edges.left<"u"){const a=Math.round(+i.edges.left/r)*o;e.offset=s.originalOffset+a,e.span=s.originalSpan-a}else if(typeof i.edges.right<"u"){const a=Math.round(+i.edges.right/r)*o;e.span=s.originalSpan+a}}allDayEventResizeEnded(e){const i=this.allDayEventResizes.get(e);if(i){const r="left"===i.edge;let s;s=r?e.offset-i.originalOffset:e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;const o=this.getAllDayEventResizedDates(e.event,s,r);this.eventTimesChanged.emit({newStart:o.start,newEnd:o.end,event:e.event,type:nu.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){(function xme(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)})(e,0,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:nu.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,s){this.dayColumnWidth=this.getDayColumnWidth(e);const o=new Fme(e,i);this.validateDrag=({x:a,y:l,transform:c})=>{const u=0===this.allDayEventResizes.size&&0===this.timeEventResizes.size&&o.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:c});if(u&&this.validateEventTimesChanged){const f=this.getDragMovedEventTimes(r,{x:a,y:l},this.dayColumnWidth,s);return this.validateEventTimesChanged({type:nu.Drag,event:r.event,newStart:f.start,newEnd:f.end})}return u},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&s&&this.view.hourColumns.forEach(a=>{const l=a.events.find(c=>c.event===r.event&&c!==r);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(e,i){const r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),s=e.event,o={...s,...r},a=this.events.map(l=>l===s?o:l);this.restoreOriginalEvents(a,new Map([[o,s]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,s=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;const{start:o,end:a}=this.getDragMovedEventTimes(e,i,r,s);(this.snapDraggedEvents||this.eventDragEnterByType[s?"time":"allDay"]>0)&&function Ame(n,t,e){const i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}(o,a,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:o,newEnd:a,event:e.event,type:nu.Drag,allDay:!s}))}refreshHeader(){this.days=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays,...pP(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit({header:this.days,...this.view})}getWeekView(e){return this.utils.getWeekView({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight,...pP(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}getDragMovedEventTimes(e,i,r,s){const o=w6(i.x,r)/r*(this.rtl?-1:1),a=s?fP(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(Qd(this.dateAdapter,e.event.start,o,this.excludeDays),a);let c;return e.event.end&&(c=this.dateAdapter.addMinutes(Qd(this.dateAdapter,e.event.end,o,this.excludeDays),a)),{start:l,end:c}}restoreOriginalEvents(e,i,r=!0){const s=this.view;r&&(this.view=this.getWeekView(e));const o=e.filter(a=>i.has(a));this.view.hourColumns.forEach((a,l)=>{s.hourColumns[l].hours.forEach((c,u)=>{c.segments.forEach((f,m)=>{a.hours[u].segments[m].cssClass=f.cssClass})}),o.forEach(c=>{const u=i.get(c),f=a.events.find(m=>m.event===(r?c:u));f?(f.event=u,f.tempEvent=c,r||(f.height=0,f.width=0)):a.events.push({event:u,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:c})})}),i.clear()}getTimeEventResizedDates(e,i){const r={start:e.start,end:C6(this.dateAdapter,e,this.minimumEventHeight)},{end:s,...o}=e,a={start:this.dateAdapter.addMinutes(r.end,-1*this.minimumEventHeight),end:C6(this.dateAdapter,o,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof i.edges.left<"u"){const c=Math.round(+i.edges.left/this.dayColumnWidth)*l,u=Qd(this.dateAdapter,r.start,c,this.excludeDays);r.start=u<a.start?u:a.start}else if(typeof i.edges.right<"u"){const c=Math.round(+i.edges.right/this.dayColumnWidth)*l,u=Qd(this.dateAdapter,r.end,c,this.excludeDays);r.end=u>a.end?u:a.end}if(typeof i.edges.top<"u"){const c=fP(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),u=this.dateAdapter.addMinutes(r.start,c);r.start=u<a.start?u:a.start}else if(typeof i.edges.bottom<"u"){const c=fP(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),u=this.dateAdapter.addMinutes(r.end,c);r.end=u>a.end?u:a.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);const s=new Lme(e,r,this.rtl);this.validateResize=({rectangle:o,edges:a})=>{const l=s.validateResize({rectangle:{...o},edges:a});if(l&&this.validateEventTimesChanged){let c;if(r){const u=this.rtl?-1:1;if(typeof a.left<"u"){const f=Math.round(+a.left/r)*u;c=this.getAllDayEventResizedDates(i.event,f,!this.rtl)}else{const f=Math.round(+a.right/r)*u;c=this.getAllDayEventResizedDates(i.event,f,this.rtl)}}else c=this.getTimeEventResizedDates(i.event,{rectangle:o,edges:a});return this.validateEventTimesChanged({type:nu.Resize,event:i.event,newStart:c.start,newEnd:c.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let s=e.start,o=e.end||e.start;return r?s=Qd(this.dateAdapter,s,i,this.excludeDays):o=Qd(this.dateAdapter,o,i,this.excludeDays),{start:s,end:o}}}return n.\u0275fac=function(e){return new(e||n)(K(vc),K(Uy),K(Rs),K(Xd),K(hn))},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[Vi],decls:8,vars:9,consts:[["role","grid",1,"cal-week-view"],[3,"days","locale","customTemplate","dayHeaderClicked","eventDropped","dragEnter"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["dayColumns",""],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],["allDayEventsContainer",""],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["eventRowContainer",""],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],["event",""],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek","eventClicked"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],[3,"ngTemplateOutlet"],["weekEventTemplate",""],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek","eventClicked"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter"]],template:function(e,i){1&e&&(T(0,"div",0)(1,"mwl-calendar-week-view-header",1),ae("dayHeaderClicked",function(s){return i.dayHeaderClicked.emit(s)})("eventDropped",function(s){return i.eventDropped({dropData:s},s.newStart,!0)})("dragEnter",function(s){return i.dateDragEnter(s.date)}),I(),xe(2,rme,7,5,"div",2),T(3,"div",3),ae("dragEnter",function(){return i.dragEnter("time")})("dragLeave",function(){return i.dragLeave("time")}),xe(4,ame,2,2,"div",4),T(5,"div",5,6),xe(7,yme,5,13,"div",7),I()()()),2&e&&(j(1),W("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),j(1),W("ngIf",i.view.allDayEventRows.length>0),j(2),W("ngIf",i.view.hourColumns.length>0&&1!==i.daysInWeek),j(1),gr("cal-resize-active",i.timeEventResizes.size>0),j(2),W("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[ps,Sr,Js,Io,d6,Jpe,lP,cP,Zd,Vme,Bme,jme,Ume],encapsulation:2}),n})(),YC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Zt({imports:[ir,h6,$C,Yp,h6,$C]}),n})(),Hme=(()=>{class n{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new $e,this.hourSegmentClicked=new $e,this.eventTimesChanged=new $e,this.beforeViewRender=new $e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ht({type:n,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender"]],template:function(e,i){1&e&&(T(0,"mwl-calendar-week-view",0),ae("eventClicked",function(s){return i.eventClicked.emit(s)})("hourSegmentClicked",function(s){return i.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return i.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return i.beforeViewRender.emit(s)}),I()),2&e&&W("daysInWeek",1)("viewDate",i.viewDate)("events",i.events)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("minimumEventHeight",i.minimumEventHeight)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("refresh",i.refresh)("locale",i.locale)("eventSnapSize",i.eventSnapSize)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("resizeCursors",i.resizeCursors)("hourSegmentTemplate",i.hourSegmentTemplate)("eventTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("snapDraggedEvents",i.snapDraggedEvents)("allDayEventsLabelTemplate",i.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",i.currentTimeMarkerTemplate)("validateEventTimesChanged",i.validateEventTimesChanged)},dependencies:[D6],encapsulation:2}),n})(),_P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Zt({imports:[ir,Yp,YC]}),n})(),T6=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||KC,i.dateFormatter||jy,i.utils||Uy,i.a11y||By]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Wt({type:n}),n.\u0275inj=Zt({imports:[Yp,mP,YC,_P,Yp,mP,YC,_P]}),n})(),I6=(()=>{class n{constructor(){this.apiUrl="https://holidays-jp.github.io/api/v1/date.json"}getHolidays(){var e=this;return(0,ye.Z)(function*(){try{const i=yield fetch(e.apiUrl);if(!i.ok)throw new Error("Network response was not ok");return yield i.json()}catch(i){throw console.error("There was an error fetching the holidays:",i),i}})()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kt(n){const t=Object.prototype.toString.call(n);return n instanceof Date||"object"==typeof n&&"[object Date]"===t?new n.constructor(+n):"number"==typeof n||"[object Number]"===t||"string"==typeof n||"[object String]"===t?new Date(n):new Date(NaN)}function Jo(n,t){return n instanceof Date?new n.constructor(t):new Date(t)}function Qp(n,t){const e=kt(n);return isNaN(t)?Jo(n,NaN):(t&&e.setDate(e.getDate()+t),e)}function yP(n,t){return Jo(n,+kt(n)+t)}Math.pow(10,8);const $me=6048e5,Wme=864e5,S6=6e4,qme=36e5;function Kme(n,t){return yP(n,t*qme)}function Zme(n,t){return yP(n,t*S6)}function Yme(n,t){return yP(n,1e3*t)}function Hy(n){const t=kt(n);return t.setHours(0,0,0,0),t}function x6(n){const t=kt(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Xme(n,t){const e=kt(n),i=kt(t),r=M6(e,i),s=Math.abs(function Qme(n,t){const e=Hy(n),i=Hy(t),r=+e-x6(e),s=+i-x6(i);return Math.round((r-s)/Wme)}(e,i));e.setDate(e.getDate()-r*s);const a=r*(s-+(M6(e,i)===-r));return 0===a?0:a}function M6(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function k6(n){return t=>{const i=(n?Math[n]:Math.trunc)(t);return 0===i?0:i}}function R6(n,t){return+kt(n)-+kt(t)}function Jme(n,t,e){const i=R6(n,t)/S6;return k6(e?.roundingMethod)(i)}function e_e(n,t,e){const i=R6(n,t)/1e3;return k6(e?.roundingMethod)(i)}function t_e(n){const t=kt(n);return t.setHours(23,59,59,999),t}function QC(n){const t=kt(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}let P6={};function O6(){return P6}function vP(n,t){const e=O6(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=kt(n),s=r.getDay(),o=6+(s<i?-7:0)-(s-i);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function n_e(n){return kt(n).getDay()}function i_e(n){return kt(n).getMonth()}function N6(n,t){return+Hy(n)==+Hy(t)}function r_e(n,t){const e=kt(n),i=kt(t);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function F6(n){const t=kt(n);return t.setMilliseconds(0),t}function s_e(n,t){return+F6(n)==+F6(t)}function o_e(n){let t;return n.forEach(function(e){const i=kt(e);(void 0===t||t<i||isNaN(Number(i)))&&(t=i)}),t||new Date(NaN)}function a_e(n,t){const e=kt(n);return e.setHours(t),e}function l_e(n,t){const e=kt(n);return e.setMinutes(t),e}function c_e(n){const t=kt(n);return t.setSeconds(0,0),t}function XC(n){const t=kt(n);return t.setDate(1),t.setHours(0,0,0,0),t}function Oa(n,t){const e=O6(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=kt(n),s=r.getDay(),o=(s<i?7:0)+s-i;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function u_e(n){return kt(n).getHours()}function d_e(n){return kt(n).getMinutes()}function h_e(n){return new Date(n).getTimezoneOffset()}function Xp(n,t){return Qp(n,7*t)}function Jd(n,t){const e=kt(n);if(isNaN(t))return Jo(n,NaN);if(!t)return e;const i=e.getDate(),r=Jo(n,e.getTime());return r.setMonth(e.getMonth()+t+1,0),i>=r.getDate()?r:(e.setFullYear(r.getFullYear(),r.getMonth(),i),e)}function Jp(n,t){return Qp(n,-t)}function p_e(n,t){return Xp(n,-t)}function g_e(n,t){return Jd(n,-t)}function JC(n){return Oa(n,{weekStartsOn:1})}function y_e(n){const t=kt(n),e=+JC(t)-+function __e(n){const t=function m_e(n){const t=kt(n),e=t.getFullYear(),i=Jo(n,0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);const r=JC(i),s=Jo(n,0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);const o=JC(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}(n),e=Jo(n,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),JC(e)}(t);return Math.round(e/$me)+1}function v_e(n,t){const e=kt(n);return e.setDate(t),e}function L6(n,t){const e=kt(n),i=e.getFullYear(),r=e.getDate(),s=Jo(n,0);s.setFullYear(i,t,15),s.setHours(0,0,0,0);const o=function b_e(n){const t=kt(n),e=t.getFullYear(),i=t.getMonth(),r=Jo(n,0);return r.setFullYear(e,i+1,0),r.setHours(0,0,0,0),r.getDate()}(s);return e.setMonth(t,Math.min(r,o)),e}function w_e(n,t){const e=kt(n);return isNaN(+e)?Jo(n,NaN):(e.setFullYear(t),e)}function E_e(n){return kt(n).getDate()}function C_e(n){return kt(n).getFullYear()}function V6(){return(0,rt.pi)((0,rt.pi)({},function f_e(){return{addDays:Qp,addHours:Kme,addMinutes:Zme,addSeconds:Yme,differenceInDays:Xme,differenceInMinutes:Jme,differenceInSeconds:e_e,endOfDay:t_e,endOfMonth:QC,endOfWeek:vP,getDay:n_e,getMonth:i_e,isSameDay:N6,isSameMonth:r_e,isSameSecond:s_e,max:o_e,setHours:a_e,setMinutes:l_e,startOfDay:Hy,startOfMinute:c_e,startOfMonth:XC,startOfWeek:Oa,getHours:u_e,getMinutes:d_e,getTimezoneOffset:h_e}}()),{addWeeks:Xp,addMonths:Jd,subDays:Jp,subWeeks:p_e,subMonths:g_e,getISOWeek:y_e,setDate:v_e,setMonth:L6,setYear:w_e,getDate:E_e,getYear:C_e})}let B6=(()=>{class n{constructor(){this.reminders={},this.subtaskReminders={}}setReminder(e,i){const r=new Date(e.startDateTime).getTime(),s=r-i,o=Date.now();if(s>o){const a=window.setTimeout(()=>{const l=this.calculateTimeRemaining(r-Date.now());alert(`\u30bf\u30b9\u30af "${e.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${l}`),delete this.reminders[e.id]},s-o);this.reminders[e.id]=a}}clearReminder(e){this.reminders[e.id]&&(clearTimeout(this.reminders[e.id]),delete this.reminders[e.id])}setSubtaskReminder(e,i,r){const s=new Date(r).getTime(),o=s-i,a=Date.now();if(o>a){const l=window.setTimeout(()=>{const c=this.calculateTimeRemaining(s-Date.now());alert(`\u30b5\u30d6\u30bf\u30b9\u30af "${e.title}" \u306e\u958b\u59cb\u6642\u9593\u304c\u8fd1\u3065\u3044\u3066\u3044\u307e\u3059\uff01\u6b8b\u308a\u6642\u9593: ${c}`),delete this.subtaskReminders[e.id]},o-a);this.subtaskReminders[e.id]=l}}clearSubtaskReminder(e){this.subtaskReminders[e.id]&&(clearTimeout(this.subtaskReminders[e.id]),delete this.subtaskReminders[e.id])}calculateTimeRemaining(e){const i=Math.floor(e/1e3),r=Math.floor(i/60),s=Math.floor(r/60),o=Math.floor(s/24);return o>0?`${o}\u65e5`:s>0?`${s}\u6642\u9593`:r>0?`${r}\u5206`:`${i}\u79d2`}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eh=(()=>{class n{constructor(e,i){this.firestore=e,this.authService=i}getProjects(){return console.log("Fetching all projects from Firestore..."),this.firestore.collection("projects").valueChanges({idField:"id"})}getProjectById(e){return console.log(`Fetching project by ID: ${e}`),this.firestore.collection("projects").doc(e).valueChanges()}addProject(e){return this.firestore.collection("projects").doc(e.id).set(e).then(()=>{console.log(`Project with ID: ${e.id} successfully added.`)}).catch(i=>{throw console.error(`Error adding project with ID: ${e.id}`,i),i})}updateProject(e){return this.firestore.collection("projects").doc(e.id).update(e).then(()=>{console.log(`Project with ID: ${e.id} successfully updated.`)}).catch(i=>{throw console.error(`Error updating project with ID: ${e.id}`,i),i})}deleteProject(e){return e.id?(console.log(`Deleting project with ID: ${e.id}`),this.firestore.collection("projects").doc(e.id).delete().then(()=>console.log(`Project deleted successfully with ID: ${e.id}`)).catch(i=>{throw console.error(`Error deleting project with ID: ${e.id}`,i),i})):(console.error("Project ID is missing, cannot delete project",e),Promise.reject("Project ID is missing"))}addMemberToProject(e,i){return i?(console.log(`Adding member with ID: ${i} to project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({members:Os.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>console.log(`Member with ID: ${i} added to project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error adding member with ID: ${i} to project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot add member to project",e),Promise.reject("User ID is undefined"))}removeMemberFromProject(e,i){return i?(console.log(`Removing member with ID: ${i} from project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({members:Os.Z.firestore.FieldValue.arrayRemove(i)}).then(()=>console.log(`Member with ID: ${i} removed from project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error removing member with ID: ${i} from project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot remove member from project",e),Promise.reject("User ID is undefined"))}addOwnerToProject(e,i){return i?(console.log(`Adding owner with ID: ${i} to project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({owners:Os.Z.firestore.FieldValue.arrayUnion(i)}).then(()=>console.log(`Owner with ID: ${i} added to project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error adding owner with ID: ${i} to project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot add owner to project",e),Promise.reject("User ID is undefined"))}removeOwnerFromProject(e,i){return i?(console.log(`Removing owner with ID: ${i} from project with ID: ${e}`),this.firestore.collection("projects").doc(e).update({owners:Os.Z.firestore.FieldValue.arrayRemove(i)}).then(()=>console.log(`Owner with ID: ${i} removed from project with ID: ${e} successfully`)).catch(r=>{throw console.error(`Error removing owner with ID: ${i} from project with ID: ${e}`,r),r})):(console.error("User ID is undefined, cannot remove owner from project",e),Promise.reject("User ID is undefined"))}getProjectsByOwnerOrMember(){return this.authService.user$.pipe(at(e=>e?sd([this.firestore.collection("projects",s=>s.where("owners","array-contains",e.uid)).valueChanges({idField:"id"}),this.firestore.collection("projects",s=>s.where("members","array-contains",e.uid)).valueChanges({idField:"id"})]).pipe(Fe(([s,o])=>{const a=[...s,...o];return Array.from(new Set(a.map(c=>c.id))).map(c=>a.find(u=>u.id===c))})):be([])))}static#e=this.\u0275fac=function(i){return new(i||n)(te(Pd),te(Yo))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function D_e(n,t){if(1&n&&(T(0,"option",29),F(1),I()),2&n){const e=t.$implicit;W("value",e.id),j(1),nt(e.name)}}function T_e(n,t){if(1&n&&(T(0,"option",29),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function I_e(n,t){if(1&n){const e=_t();T(0,"div")(1,"label"),F(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),I(),T(3,"input",41),ae("ngModelChange",function(r){return he(e),fe(J(3).editedTask.repeatSettings.daysOffsetFromEnd=r)}),I()()}if(2&n){const e=J(3);j(3),W("ngModel",e.editedTask.repeatSettings.daysOffsetFromEnd)}}function S_e(n,t){if(1&n){const e=_t();T(0,"div"),F(1),T(2,"button",5),ae("click",function(){const s=he(e).$implicit;return fe(J(3).removeExcludeDate(s))}),F(3,"\u524a\u9664"),I()()}if(2&n){const e=t.$implicit;j(1),cs(" ",e," ")}}function A_e(n,t){if(1&n){const e=_t();T(0,"div",6)(1,"span",7),F(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),I(),T(3,"span",8)(4,"div",30)(5,"div")(6,"label"),F(7,"\u983b\u5ea6:"),I(),T(8,"select",10),ae("ngModelChange",function(r){return he(e),fe(J(2).editedTask.repeatSettings.frequency=r)}),T(9,"option",31),F(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),I(),T(11,"option",32),F(12,"\u6bce\u65e5"),I(),T(13,"option",33),F(14,"\u6bce\u9031"),I(),T(15,"option",34),F(16,"\u6bce\u6708"),I(),T(17,"option",35),F(18,"\u6bce\u5e74"),I(),T(19,"option",36),F(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),I()()(),xe(21,I_e,4,1,"div",37),T(22,"div")(23,"label"),F(24,"\u7d42\u4e86\u65e5:"),I(),T(25,"input",38),ae("ngModelChange",function(r){return he(e),fe(J(2).editedTask.repeatSettings.endDate=r)}),I()(),T(26,"div")(27,"label"),F(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),I(),T(29,"input",39),ae("ngModelChange",function(r){return he(e),fe(J(2).editedTask.repeatSettings.businessDaysOnly=r)}),I()(),T(30,"div")(31,"label"),F(32,"\u9664\u5916\u65e5:"),I(),T(33,"input",38),ae("ngModelChange",function(r){return he(e),fe(J(2).excludeDate=r)}),I(),T(34,"button",5),ae("click",function(){return he(e),fe(J(2).addExcludeDate())}),F(35,"\u8ffd\u52a0"),I(),xe(36,S_e,4,1,"div",40),I()()()()}if(2&n){const e=J(2);j(8),W("ngModel",e.editedTask.repeatSettings.frequency),j(13),W("ngIf","monthlyFromEnd"===e.editedTask.repeatSettings.frequency),j(4),W("ngModel",e.editedTask.repeatSettings.endDate),j(4),W("ngModel",e.editedTask.repeatSettings.businessDaysOnly),j(4),W("ngModel",e.excludeDate),j(3),W("ngForOf",e.editedTask.repeatSettings.excludeDates)}}const x_e=function(n){return{selected:n}},M_e=function(n){return{"background-color":n}};function k_e(n,t){if(1&n){const e=_t();T(0,"div",42),ae("click",function(){const s=he(e).$implicit;return fe(J(2).selectColor(s))}),I()}if(2&n){const e=t.$implicit,i=J(2);W("ngClass",Ir(2,x_e,i.editedTask.tagColor===e))("ngStyle",Ir(4,M_e,e))}}function R_e(n,t){if(1&n){const e=_t();T(0,"li",43)(1,"span",44),F(2),I(),T(3,"button",5),ae("click",function(){const s=he(e).index;return fe(J(2).deleteSubtask(s))}),F(4,"\u524a\u9664"),I()()}if(2&n){const e=t.$implicit;j(2),nt(e.title)}}function P_e(n,t){if(1&n){const e=_t();T(0,"div",1)(1,"div",2)(2,"h2",3),F(3),I(),T(4,"div",4)(5,"button",5),ae("click",function(){return he(e),fe(J().saveTask())}),F(6,"\u4fdd\u5b58"),I(),T(7,"button",5),ae("click",function(){return he(e),fe(J().duplicateTask())}),F(8,"\u8907\u88fd"),I(),T(9,"button",5),ae("click",function(){return he(e),fe(J().cancel())}),F(10,"\u30ad\u30e3\u30f3\u30bb\u30eb"),I()()(),T(11,"div",6)(12,"span",7),F(13,"\u30bf\u30a4\u30c8\u30eb:"),I(),T(14,"span",8)(15,"input",9),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.title=r)}),I()()(),T(16,"div",6)(17,"span",7),F(18,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),I(),T(19,"span",8)(20,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.projectId=r)}),T(21,"option",11),F(22,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),I(),xe(23,D_e,2,2,"option",12),I()()(),T(24,"div",6)(25,"span",7),F(26,"\u8aac\u660e:"),I(),T(27,"span",8)(28,"textarea",13),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.description=r)}),I()()(),T(29,"div",6)(30,"span",7),F(31,"\u958b\u59cb\u65e5\u6642:"),I(),T(32,"span",8)(33,"input",14),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.startDateTime=r)}),I()()(),T(34,"div",6)(35,"span",7),F(36,"\u7d42\u4e86\u65e5\u6642:"),I(),T(37,"span",8)(38,"input",14),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.endDateTime=r)}),I()()(),T(39,"div",6)(40,"span",7),F(41,"\u901a\u77e5"),I(),T(42,"span",8)(43,"input",15),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.reminderTime.value=r)}),I(),T(44,"select",16),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.reminderTime.unit=r)}),xe(45,T_e,2,2,"option",12),I()()(),xe(46,A_e,37,6,"div",17),T(47,"div",6)(48,"span",7),F(49,"\u512a\u5148\u5ea6:"),I(),T(50,"span",8)(51,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.priority=r)}),T(52,"option",18),F(53,"\u4f4e"),I(),T(54,"option",19),F(55,"\u4e2d"),I(),T(56,"option",20),F(57,"\u9ad8"),I()()()(),T(58,"div",6)(59,"span",7),F(60,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),I(),T(61,"span",8)(62,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.status=r)}),T(63,"option",21),F(64,"\u672a\u7740\u624b"),I(),T(65,"option",22),F(66,"\u9032\u884c\u4e2d"),I(),T(67,"option",23),F(68,"\u5b8c\u4e86"),I()()()(),T(69,"div",6)(70,"span",7),F(71,"\u30bf\u30b0:"),I(),T(72,"span",8)(73,"input",24),ae("ngModelChange",function(r){return he(e),fe(J().editedTask.tag=r)}),I()()(),T(74,"div",6)(75,"span",7),F(76,"\u30bf\u30b0\u306e\u8272:"),I(),T(77,"span",8)(78,"div",25),xe(79,k_e,1,6,"div",26),I()()(),T(80,"div",27)(81,"h6"),F(82,"\u30b5\u30d6\u30bf\u30b9\u30af"),I(),T(83,"button",5),ae("click",function(){return he(e),fe(J().addSubtask())}),F(84,"\u30b5\u30d6\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),I(),T(85,"ul"),xe(86,R_e,5,1,"li",28),I()()()}if(2&n){const e=J();j(3),cs("",e.task.title," \u306e\u8a73\u7d30"),j(12),W("ngModel",e.editedTask.title),j(5),W("ngModel",e.editedTask.projectId),j(3),W("ngForOf",e.projects),j(5),W("ngModel",e.editedTask.description),j(5),W("ngModel",e.editedTask.startDateTime),j(5),W("ngModel",e.editedTask.endDateTime),j(5),W("ngModel",e.editedTask.reminderTime.value),j(1),W("ngModel",e.editedTask.reminderTime.unit),j(1),W("ngForOf",e.reminderUnits),j(1),W("ngIf",e.editedTask.repeatSettings),j(5),W("ngModel",e.editedTask.priority),j(11),W("ngModel",e.editedTask.status),j(11),W("ngModel",e.editedTask.tag),j(6),W("ngForOf",e.colors),j(7),W("ngForOf",e.editedTask.subtasks)}}let zy=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.reminderService=i,this.projectService=r,this.dialogRef=s,this.data=o,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",console.log("TaskDetailComponent constructor called"),o&&o.task?(this.task=o.task,this.originalTask={...o.task},this.editedTask={...o.task,subtasks:[...o.task.subtasks]},console.log("TaskDetailComponent received task data:",this.task)):(this.task={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:""},this.originalTask={...this.task},this.editedTask={...this.task,subtasks:[...this.task.subtasks]},console.log("Task initialized to default:",this.task))}ngOnInit(){console.log("TaskDetailComponent ngOnInit called"),this.projects$=this.projectService.getProjects(),this.projects$.subscribe(e=>{this.projects=e,console.log("Projects loaded:",this.projects)}),this.editedTask.reminderTime||(this.editedTask.reminderTime={value:null,unit:"\u5206"}),this.editedTask.subtasks||(this.editedTask.subtasks=[]),console.log("Loaded existing task:",this.editedTask)}saveTask(){var e=this;return(0,ye.Z)(function*(){if(console.log("saveTask called"),console.log("Task before save:",e.editedTask),e.editedTask.reminderTime&&null!==e.editedTask.reminderTime.value){const i=e.calculateReminderTime({value:e.editedTask.reminderTime.value,unit:e.editedTask.reminderTime.unit});e.reminderService.setReminder(e.editedTask,i)}try{console.log("Task before update/add:",e.editedTask),e.editedTask.id?(yield e.taskService.updateTask(e.editedTask),console.log("Task updated:",e.editedTask)):(yield e.taskService.addTask(e.editedTask),console.log("New task added:",e.editedTask)),e.dialogRef.close(e.editedTask),console.log("Dialog closed with task:",e.editedTask)}catch(i){console.error("Error updating task:",i)}})()}duplicateTask(){var e=this;return(0,ye.Z)(function*(){console.log("duplicateTask called"),yield e.taskService.duplicateTask(e.editedTask),e.dialogRef.close(),console.log("Dialog closed after duplicating task")})()}addSubtask(){console.log("addSubtask called"),this.editedTask.subtasks||(this.editedTask.subtasks=[]);const e={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"};this.editedTask.subtasks.push(e),console.log("New subtask added:",e)}deleteSubtask(e){console.log("deleteSubtask called"),this.editedTask.subtasks&&(this.editedTask.subtasks.splice(e,1),console.log("Subtask deleted at index:",e))}cancel(){console.log("cancel called"),this.dialogRef.close(this.originalTask),console.log("Dialog closed with original task:",this.originalTask)}selectColor(e){this.editedTask.tagColor=e,console.log("Color selected:",e)}addExcludeDate(){console.log("addExcludeDate called"),this.editedTask.repeatSettings||(this.editedTask.repeatSettings={frequency:"none",businessDaysOnly:!1,excludeDates:[]}),this.editedTask.repeatSettings.excludeDates||(this.editedTask.repeatSettings.excludeDates=[]),this.excludeDate&&(this.editedTask.repeatSettings.excludeDates.push(this.excludeDate),console.log("Exclude date before reset:",this.excludeDate),console.log("Updated exclude dates:",this.editedTask.repeatSettings.excludeDates),this.excludeDate="")}removeExcludeDate(e){console.log("removeExcludeDate called"),this.editedTask.repeatSettings&&this.editedTask.repeatSettings.excludeDates&&(this.editedTask.repeatSettings.excludeDates=this.editedTask.repeatSettings.excludeDates.filter(i=>i!==e),console.log("Exclude date removed:",e),console.log("Updated exclude dates:",this.editedTask.repeatSettings.excludeDates))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(i){return new(i||n)(K(th),K(B6),K(eh),K(zp),K(OC))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-task-detail"]],inputs:{task:"task"},standalone:!0,features:[Wr],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"subtask-container"],["class","subtask-item",4,"ngFor","ngForOf"],[3,"value"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"],[1,"subtask-item"],[1,"subtask-title"]],template:function(i,r){1&i&&xe(0,P_e,87,16,"div",0),2&i&&W("ngIf",r.editedTask)},dependencies:[ir,ps,Sr,Js,al,Bs,Lp,Vp,so,EC,Gc,Qc,oo,CC,Vs],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})(),th=(()=>{class n{constructor(e,i,r,s){this.firestore=e,this.holidayService=i,this.dialog=r,this.authService=s,this.currentDialogRefs={},this.taskUpdatedSource=new se(null),this.taskUpdated$=this.taskUpdatedSource.asObservable()}getCurrentUserId(){return this.authService.getCurrentUserId()}getUserTasks(){return this.authService.user$.pipe(at(e=>e?this.firestore.collection(`users/${e.uid}/tasks`).snapshotChanges().pipe(Fe(i=>i.map(r=>{const s=r.payload.doc.data();return{id:r.payload.doc.id,title:s.title,completed:s.completed,description:s.description,priority:s.priority,startDateTime:s.startDateTime,endDateTime:s.endDateTime,tag:s.tag,selected:s.selected,tagColor:s.tagColor,status:s.status,subtasks:s.subtasks,reminderTime:s.reminderTime,projectId:s.projectId,repeatSettings:s.repeatSettings,userId:s.userId}}))):be([])))}getTasksByUserId(e){return this.firestore.collection(`users/${e}/tasks`).valueChanges()}getTasks(){const e=this.getCurrentUserId();return e?this.firestore.collection(`users/${e}/tasks`).valueChanges():be([])}addTask(e){const i=this.getCurrentUserId();if(i){const r=this.firestore.createId(),s={...e,id:r,userId:i};return this.firestore.collection(`users/${i}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}return Promise.reject("User not authenticated")}updateTask(e){const i=this.getCurrentUserId();if(i)return console.log("Updating task for user:",i,e),console.log("Exclude dates before update:",e.repeatSettings?.excludeDates),this.firestore.collection(`users/${e.userId}/tasks`).doc(e.id).set(e,{merge:!0}).then(()=>{console.log("Task successfully updated in Firestore:",e),console.log("Exclude dates after update:",e.repeatSettings?.excludeDates),this.taskUpdatedSource.next()}).catch(r=>{throw console.error("Error updating task in Firestore:",r),r});{const r="User not authenticated";return console.error(r),Promise.reject(r)}}duplicateTask(e){const i=this.getCurrentUserId();if(i){const r=this.generateId(),s={...e,id:r,userId:i};return this.firestore.collection(`users/${i}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}return Promise.reject("User not authenticated")}deleteTask(e){return this.firestore.collection(`users/${e.userId}/tasks`).doc(e.id).delete().then(()=>{this.taskUpdatedSource.next()})}openTaskDetail(e){if(console.log("openTaskDetail called"),this.currentDialogRefs[e.id])return void console.log("Task detail is already open for this task:",e.id);const i=this.dialog.open(zy,{data:{task:e}});this.currentDialogRefs[e.id]=i,i.afterClosed().subscribe(()=>{console.log("Dialog closed for task:",e.id),delete this.currentDialogRefs[e.id]})}generateRecurringTasks(){var e=this;return(0,ye.Z)(function*(){const i=(new Date).toISOString().split("T")[0];try{const r=yield e.holidayService.getHolidays(),s=yield e.firestore.collection("tasks").get().toPromise();s&&!s.empty&&s.forEach(o=>{const a=o.data();a.repeatSettings&&"monthlyFromEnd"===a.repeatSettings.frequency&&e.generateMonthlyFromEndTasks(a,i,r)})}catch(r){console.error("Failed to generate recurring tasks:",r)}})()}generateMonthlyFromEndTasks(e,i,r){let s=new Date(e.startDateTime);const o=e.repeatSettings.endDate?new Date(e.repeatSettings.endDate):null;for(;s.toISOString().split("T")[0]<=i&&(!o||s<=o);){let l=Jp(QC(s),e.repeatSettings.daysOffsetFromEnd);e.repeatSettings.businessDaysOnly&&(l=this.adjustForHolidaysAndWeekends(l,r)),l.toISOString().split("T")[0]<=i&&this.createTaskInstance(e,l.toISOString()),s.setMonth(s.getMonth()+1)}}adjustForHolidaysAndWeekends(e,i){for(;i.includes(e.toISOString().split("T")[0])||0===e.getDay()||6===e.getDay();)e.setDate(e.getDate()-1);return e}createTaskInstance(e,i){const r=this.generateId(),s={...e,id:r,startDateTime:i};this.firestore.collection(`users/${e.userId}/tasks`).doc(r).set(s).then(()=>{this.taskUpdatedSource.next()})}generateId(){return Math.random().toString(36).substr(2,9)}getTasksByProjectIds(e){return 0===e.length?be([]):(console.log("Fetching tasks for project IDs:",e),this.authService.user$.pipe(at(i=>i?sd(e.map(s=>this.firestore.collection(`users/${i.uid}/tasks`,o=>(console.log(`Querying tasks for projectId: ${s}`),o.where("projectId","==",s))).valueChanges())).pipe(Fe(s=>{const o=s.flat();return console.log("Fetched tasks:",o),o})):be([]))))}static#e=this.\u0275fac=function(i){return new(i||n)(te(Pd),te(I6),te(Ry),te(Yo))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O_e(n,t){if(1&n&&(T(0,"option",22),F(1),I()),2&n){const e=t.$implicit;W("value",e.id),j(1),nt(e.name)}}function N_e(n,t){if(1&n&&(T(0,"option",22),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function F_e(n,t){if(1&n){const e=_t();T(0,"div",6)(1,"span",7),F(2,"\u901a\u77e5:"),I(),T(3,"span",8)(4,"input",23),ae("ngModelChange",function(r){return he(e),fe(J(2).newTask.reminderTime.value=r)}),I(),T(5,"select",24),ae("ngModelChange",function(r){return he(e),fe(J(2).newTask.reminderTime.unit=r)}),xe(6,N_e,2,2,"option",12),I()()()}if(2&n){const e=J(2);j(4),W("ngModel",e.newTask.reminderTime.value),j(1),W("ngModel",e.newTask.reminderTime.unit),j(1),W("ngForOf",e.reminderUnits)}}function L_e(n,t){if(1&n){const e=_t();T(0,"div")(1,"label"),F(2,"\u6708\u672b\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u65e5\u6570:"),I(),T(3,"input",36),ae("ngModelChange",function(r){return he(e),fe(J(3).newTask.repeatSettings.daysOffsetFromEnd=r)}),I()()}if(2&n){const e=J(3);j(3),W("ngModel",e.newTask.repeatSettings.daysOffsetFromEnd)}}function V_e(n,t){if(1&n){const e=_t();T(0,"div"),F(1),T(2,"button",5),ae("click",function(){const s=he(e).$implicit;return fe(J(3).removeExcludeDate(s))}),F(3,"\u524a\u9664"),I()()}if(2&n){const e=t.$implicit;j(1),cs(" ",e," ")}}function B_e(n,t){if(1&n){const e=_t();T(0,"div",6)(1,"span",7),F(2,"\u7e70\u308a\u8fd4\u3057\u8a2d\u5b9a:"),I(),T(3,"span",8)(4,"div",25)(5,"div")(6,"label"),F(7,"\u983b\u5ea6:"),I(),T(8,"select",10),ae("ngModelChange",function(r){return he(e),fe(J(2).newTask.repeatSettings.frequency=r)}),T(9,"option",26),F(10,"\u7e70\u308a\u8fd4\u3055\u306a\u3044"),I(),T(11,"option",27),F(12,"\u6bce\u65e5"),I(),T(13,"option",28),F(14,"\u6bce\u9031"),I(),T(15,"option",29),F(16,"\u6bce\u6708"),I(),T(17,"option",30),F(18,"\u6bce\u5e74"),I(),T(19,"option",31),F(20,"\u6708\u672b\u304b\u3089\u6307\u5b9a\u65e5"),I()()(),xe(21,L_e,4,1,"div",32),T(22,"div")(23,"label"),F(24,"\u7d42\u4e86\u65e5:"),I(),T(25,"input",33),ae("ngModelChange",function(r){return he(e),fe(J(2).newTask.repeatSettings.endDate=r)}),I()(),T(26,"div")(27,"label"),F(28,"\u795d\u65e5\u3068\u4f11\u65e5\u3092\u9664\u5916:"),I(),T(29,"input",34),ae("ngModelChange",function(r){return he(e),fe(J(2).newTask.repeatSettings.businessDaysOnly=r)}),I()(),T(30,"div")(31,"label"),F(32,"\u9664\u5916\u65e5:"),I(),T(33,"input",33),ae("ngModelChange",function(r){return he(e),fe(J(2).excludeDate=r)}),I(),T(34,"button",5),ae("click",function(){return he(e),fe(J(2).addExcludeDate())}),F(35,"\u8ffd\u52a0"),I(),xe(36,V_e,4,1,"div",35),I()()()()}if(2&n){const e=J(2);j(8),W("ngModel",e.newTask.repeatSettings.frequency),j(13),W("ngIf","monthlyFromEnd"===e.newTask.repeatSettings.frequency),j(4),W("ngModel",e.newTask.repeatSettings.endDate),j(4),W("ngModel",e.newTask.repeatSettings.businessDaysOnly),j(4),W("ngModel",e.excludeDate),j(3),W("ngForOf",e.newTask.repeatSettings.excludeDates)}}const j_e=function(n){return{selected:n}},U_e=function(n){return{"background-color":n}};function H_e(n,t){if(1&n){const e=_t();T(0,"div",37),ae("click",function(){const s=he(e).$implicit;return fe(J(2).selectColor(s))}),I()}if(2&n){const e=t.$implicit,i=J(2);W("ngClass",Ir(2,j_e,i.newTask.tagColor===e))("ngStyle",Ir(4,U_e,e))}}function z_e(n,t){if(1&n){const e=_t();T(0,"div",1)(1,"div",2)(2,"h2",3),F(3,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),I(),T(4,"div",4)(5,"button",5),ae("click",function(){return he(e),fe(J().saveTask())}),F(6,"\u4fdd\u5b58"),I(),T(7,"button",5),ae("click",function(){return he(e),fe(J().cancel())}),F(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),I()()(),T(9,"div",6)(10,"span",7),F(11,"\u30bf\u30a4\u30c8\u30eb:"),I(),T(12,"span",8)(13,"input",9),ae("ngModelChange",function(r){return he(e),fe(J().newTask.title=r)}),I()()(),T(14,"div",6)(15,"span",7),F(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:"),I(),T(17,"span",8)(18,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().newTask.projectId=r)}),T(19,"option",11),F(20,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e"),I(),xe(21,O_e,2,2,"option",12),I()()(),T(22,"div",6)(23,"span",7),F(24,"\u8aac\u660e:"),I(),T(25,"span",8)(26,"textarea",13),ae("ngModelChange",function(r){return he(e),fe(J().newTask.description=r)}),I()()(),T(27,"div",6)(28,"span",7),F(29,"\u958b\u59cb\u65e5\u6642:"),I(),T(30,"span",8)(31,"input",14),ae("ngModelChange",function(r){return he(e),fe(J().newTask.startDateTime=r)}),I()()(),T(32,"div",6)(33,"span",7),F(34,"\u7d42\u4e86\u65e5\u6642:"),I(),T(35,"span",8)(36,"input",14),ae("ngModelChange",function(r){return he(e),fe(J().newTask.endDateTime=r)}),I()()(),xe(37,F_e,7,3,"div",15),xe(38,B_e,37,6,"div",15),T(39,"div",6)(40,"span",7),F(41,"\u512a\u5148\u5ea6:"),I(),T(42,"span",8)(43,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().newTask.priority=r)}),T(44,"option",16),F(45,"\u4f4e"),I(),T(46,"option",17),F(47,"\u4e2d"),I(),T(48,"option",18),F(49,"\u9ad8"),I()()()(),T(50,"div",6)(51,"span",7),F(52,"\u30bf\u30b0:"),I(),T(53,"span",8)(54,"input",19),ae("ngModelChange",function(r){return he(e),fe(J().newTask.tag=r)}),I()()(),T(55,"div",6)(56,"span",7),F(57,"\u30bf\u30b0\u306e\u8272:"),I(),T(58,"span",8)(59,"div",20),xe(60,H_e,1,6,"div",21),I()()()()}if(2&n){const e=J();j(13),W("ngModel",e.newTask.title),j(5),W("ngModel",e.newTask.projectId),j(3),W("ngForOf",e.projects),j(5),W("ngModel",e.newTask.description),j(5),W("ngModel",e.newTask.startDateTime),j(5),W("ngModel",e.newTask.endDateTime),j(1),W("ngIf",e.newTask.reminderTime),j(1),W("ngIf",e.newTask.repeatSettings),j(5),W("ngModel",e.newTask.priority),j(11),W("ngModel",e.newTask.tag),j(6),W("ngForOf",e.colors)}}let bP=(()=>{class n{constructor(e,i,r,s){this.dialogRef=e,this.reminderService=i,this.projectService=r,this.taskService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.reminderUnits=["\u5206","\u6642\u9593","\u65e5","\u9031"],this.projects$=null,this.projects=[],this.excludeDate="",this.currentUserUid=null,this.newTask={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",daysOffsetFromEnd:1,endDate:"",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:0,unit:"\u5206"},userId:""}}ngOnInit(){const e=this.taskService.getCurrentUserId();e&&(this.newTask.userId=e,this.currentUserUid=e),this.projects$=this.projectService.getProjects(),this.projects$.subscribe(i=>{this.projects=i.filter(r=>r.members.includes(this.currentUserUid)||r.owners.includes(this.currentUserUid))})}saveTask(){var e=this;return(0,ye.Z)(function*(){try{if(e.newTask.startDateTime&&e.newTask.reminderTime&&null!==e.newTask.reminderTime.value){const i=e.calculateReminderTime({value:e.newTask.reminderTime.value,unit:e.newTask.reminderTime.unit});e.reminderService.setReminder(e.newTask,i)}yield e.taskService.addTask(e.newTask),e.dialogRef.close(e.newTask)}catch(i){console.error("Failed to save task:",i)}})()}cancel(){this.dialogRef.close()}selectColor(e){this.newTask.tagColor=e}addExcludeDate(){this.excludeDate&&(this.newTask.repeatSettings?.excludeDates?.push(this.excludeDate),this.excludeDate="")}removeExcludeDate(e){this.newTask.repeatSettings?.excludeDates&&(this.newTask.repeatSettings.excludeDates=this.newTask.repeatSettings.excludeDates.filter(i=>i!==e))}generateId(){return Math.random().toString(36).substr(2,9)}calculateReminderTime(e){const{value:i,unit:r}=e;switch(r){case"\u5206":return 60*i*1e3;case"\u6642\u9593":return 60*i*60*1e3;case"\u65e5":return 24*i*60*60*1e3;case"\u9031":return 7*i*24*60*60*1e3;default:return 0}}static#e=this.\u0275fac=function(i){return new(i||n)(K(zp),K(B6),K(eh),K(th))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-task-add"]],standalone:!0,features:[Wr],decls:1,vars:1,consts:[["class","task-detail-container",4,"ngIf"],[1,"task-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],["class","detail-row",4,"ngIf"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","1",1,"reminder-input",3,"ngModel","ngModelChange"],[1,"reminder-select",3,"ngModel","ngModelChange"],[1,"repeat-settings"],["value","none"],["value","daily"],["value","weekly"],["value","monthly"],["value","yearly"],["value","monthlyFromEnd"],[4,"ngIf"],["type","date",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"color-option",3,"ngClass","ngStyle","click"]],template:function(i,r){1&i&&xe(0,z_e,61,11,"div",0),2&i&&W("ngIf",r.newTask)},dependencies:[ir,ps,Sr,Js,al,Bs,Lp,Vp,so,EC,Gc,Qc,oo,CC,Vs],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0;color:#777}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0;padding:8px;border:1px solid #ddd;border-radius:4px}.reminder-input[_ngcontent-%COMP%], .reminder-select[_ngcontent-%COMP%]{width:48%;box-sizing:border-box;margin:0;height:40px}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.subtask-container[_ngcontent-%COMP%]{margin-top:20px}.subtask-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.subtask-title[_ngcontent-%COMP%]{flex-grow:1}"]})}return n})();function eD(n,t){let e=kt(n);return isNaN(+e)?Jo(n,NaN):(null!=t.year&&e.setFullYear(t.year),null!=t.month&&(e=L6(e,t.month)),null!=t.date&&e.setDate(t.date),null!=t.hours&&e.setHours(t.hours),null!=t.minutes&&e.setMinutes(t.minutes),null!=t.seconds&&e.setSeconds(t.seconds),null!=t.milliseconds&&e.setMilliseconds(t.milliseconds),e)}function j6(n,t){return Jd(n,12*t)}function wP(n){const t=kt(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function G_e(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function K_e(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function Z_e(n,t){if(1&n){const e=_t();T(0,"div",18)(1,"h3"),F(2),Xt(3,"date"),I(),T(4,"mwl-calendar-month-view",15),ae("eventClicked",function(r){return he(e),fe(J(2).handleEvent("Clicked",r.event))}),I()()}if(2&n){const e=J(2);j(2),nt(pi(3,3,e.compareDate,"yyyy\u5e74MM\u6708")),j(2),W("viewDate",e.compareDate)("events",e.allEvents)}}const EP=function(n){return{"compare-active":n}},CP=function(n){return{"full-width":n}};function Y_e(n,t){if(1&n){const e=_t();T(0,"div")(1,"div",5)(2,"label",6),F(3,"\u5e74:"),I(),T(4,"select",7),ae("ngModelChange",function(r){return he(e),fe(J().selectedYear=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(5,G_e,2,2,"option",8),I(),T(6,"label",9),F(7,"\u6708:"),I(),T(8,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().selectedMonth=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(9,K_e,2,2,"option",8),I(),T(10,"label",11),F(11,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),I(),T(12,"input",12),ae("ngModelChange",function(r){return he(e),fe(J().compareMode=r)})("change",function(){return he(e),fe(J().toggleCompareMode())}),I()(),T(13,"div",13)(14,"div",14)(15,"h3"),F(16),Xt(17,"date"),I(),T(18,"mwl-calendar-month-view",15),ae("eventClicked",function(r){return he(e),fe(J().handleEvent("Clicked",r.event))}),I()(),xe(19,Z_e,5,6,"div",16),I()()}if(2&n){const e=J();j(4),W("ngModel",e.selectedYear),j(1),W("ngForOf",e.years),j(3),W("ngModel",e.selectedMonth),j(1),W("ngForOf",e.months),j(3),W("ngModel",e.compareMode),j(1),W("ngClass",Ir(14,EP,e.compareMode)),j(1),W("ngClass",Ir(16,CP,!e.compareMode)),j(2),nt(pi(17,11,e.viewDate,"yyyy\u5e74MM\u6708")),j(2),W("viewDate",e.viewDate)("events",e.allEvents),j(1),W("ngIf",e.compareMode)}}function Q_e(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function X_e(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function J_e(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function eye(n,t){if(1&n){const e=_t();T(0,"div",18)(1,"h3"),F(2),I(),T(3,"mwl-calendar-week-view",15),ae("eventClicked",function(r){return he(e),fe(J(2).handleEvent("Clicked",r.event))}),I()()}if(2&n){const e=J(2);j(2),nt(e.getCompareWeekRange()),j(1),W("viewDate",e.compareDate)("events",e.getNonHolidayEvents())}}function tye(n,t){if(1&n){const e=_t();T(0,"div")(1,"div",5)(2,"label",6),F(3,"\u5e74:"),I(),T(4,"select",7),ae("ngModelChange",function(r){return he(e),fe(J().selectedYear=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(5,Q_e,2,2,"option",8),I(),T(6,"label",9),F(7,"\u6708:"),I(),T(8,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().selectedMonth=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(9,X_e,2,2,"option",8),I(),T(10,"label",19),F(11,"\u9031\u76ee:"),I(),T(12,"select",20),ae("ngModelChange",function(r){return he(e),fe(J().selectedWeek=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(13,J_e,2,2,"option",8),I(),T(14,"label",11),F(15,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),I(),T(16,"input",12),ae("ngModelChange",function(r){return he(e),fe(J().compareMode=r)})("change",function(){return he(e),fe(J().toggleCompareMode())}),I()(),T(17,"div",13)(18,"div",14)(19,"h3"),F(20),I(),T(21,"mwl-calendar-week-view",15),ae("eventClicked",function(r){return he(e),fe(J().handleEvent("Clicked",r.event))}),I()(),xe(22,eye,4,3,"div",16),I()()}if(2&n){const e=J();j(4),W("ngModel",e.selectedYear),j(1),W("ngForOf",e.years),j(3),W("ngModel",e.selectedMonth),j(1),W("ngForOf",e.months),j(3),W("ngModel",e.selectedWeek),j(1),W("ngForOf",e.monthWeeks),j(3),W("ngModel",e.compareMode),j(1),W("ngClass",Ir(13,EP,e.compareMode)),j(1),W("ngClass",Ir(15,CP,!e.compareMode)),j(2),nt(e.getWeekRange()),j(1),W("viewDate",e.viewDate)("events",e.getNonHolidayEvents()),j(1),W("ngIf",e.compareMode)}}function nye(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function iye(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function rye(n,t){if(1&n&&(T(0,"option",17),F(1),I()),2&n){const e=t.$implicit;W("value",e),j(1),nt(e)}}function sye(n,t){if(1&n){const e=_t();T(0,"div",18)(1,"h3"),F(2),Xt(3,"date"),I(),T(4,"mwl-calendar-day-view",15),ae("eventClicked",function(r){return he(e),fe(J(2).handleEvent("Clicked",r.event))}),I()()}if(2&n){const e=J(2);j(2),nt(pi(3,3,e.compareDate,"yyyy\u5e74MM\u6708dd\u65e5")),j(2),W("viewDate",e.compareDate)("events",e.getNonHolidayEvents())}}function oye(n,t){if(1&n){const e=_t();T(0,"div")(1,"div",5)(2,"label",6),F(3,"\u5e74:"),I(),T(4,"select",7),ae("ngModelChange",function(r){return he(e),fe(J().selectedYear=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(5,nye,2,2,"option",8),I(),T(6,"label",9),F(7,"\u6708:"),I(),T(8,"select",10),ae("ngModelChange",function(r){return he(e),fe(J().selectedMonth=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(9,iye,2,2,"option",8),I(),T(10,"label",21),F(11,"\u65e5:"),I(),T(12,"select",22),ae("ngModelChange",function(r){return he(e),fe(J().selectedDay=r)})("change",function(){return he(e),fe(J().onYearMonthOrWeekChange())}),xe(13,rye,2,2,"option",8),I(),T(14,"label",11),F(15,"\u6bd4\u8f03\u30e2\u30fc\u30c9"),I(),T(16,"input",12),ae("ngModelChange",function(r){return he(e),fe(J().compareMode=r)})("change",function(){return he(e),fe(J().toggleCompareMode())}),I()(),T(17,"div",13)(18,"div",14)(19,"h3"),F(20),Xt(21,"date"),I(),T(22,"mwl-calendar-day-view",15),ae("eventClicked",function(r){return he(e),fe(J().handleEvent("Clicked",r.event))}),I()(),xe(23,sye,5,6,"div",16),I()()}if(2&n){const e=J();j(4),W("ngModel",e.selectedYear),j(1),W("ngForOf",e.years),j(3),W("ngModel",e.selectedMonth),j(1),W("ngForOf",e.months),j(3),W("ngModel",e.selectedDay),j(1),W("ngForOf",e.daysInMonth),j(3),W("ngModel",e.compareMode),j(1),W("ngClass",Ir(16,EP,e.compareMode)),j(1),W("ngClass",Ir(18,CP,!e.compareMode)),j(2),nt(pi(21,13,e.viewDate,"yyyy\u5e74MM\u6708dd\u65e5")),j(2),W("viewDate",e.viewDate)("events",e.getNonHolidayEvents()),j(1),W("ngIf",e.compareMode)}}let aye=(()=>{class n{constructor(e,i,r){this.taskService=e,this.holidayService=i,this.dialog=r,this.view=ko.Week,this.viewDate=new Date,this.compareDate=new Date,this.events=[],this.holidayEvents=[],this.allEvents=[],this.holidays=[],this.compareMode=!1,this.selectedYear=(new Date).getFullYear(),this.selectedMonth=(new Date).getMonth()+1,this.selectedDay=(new Date).getDate(),this.selectedWeek=1,this.years=[2023,2024,2025],this.months=[1,2,3,4,5,6,7,8,9,10,11,12],this.daysInMonth=[],this.monthWeeks=[],this.CalendarView=ko}ngOnInit(){console.log("Initializing CalendarComponent..."),this.loadHolidays(),this.updateMonthWeeks(),this.updateDaysInMonth(),this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay)}loadHolidays(){console.log("Loading holidays..."),X(this.holidayService.getHolidays()).subscribe(e=>{this.holidays=Object.keys(e).map(i=>new Date(i)),this.holidayEvents=this.holidays.map(i=>({start:i,title:e[i.toISOString().split("T")[0]],color:{primary:"#e3bc08",secondary:"#FDF1BA"}})),console.log("Holidays loaded:",this.holidayEvents),this.loadEvents(),this.updateAllEvents()},e=>{console.error("Failed to load holidays:",e)})}loadEvents(){console.log("Loading events..."),this.taskService.getTasks().subscribe(e=>{this.events=this.generateEventsFromTasks(e),console.log("Events loaded:",this.events),this.updateAllEvents()})}generateEventsFromTasks(e){console.log("Generating events from tasks...");const i=[];return e.forEach(r=>{if(r.repeatSettings)i.push(...this.generateRecurringEvents(r));else{const s=new Date(r.startDateTime),o=new Date(r.endDateTime);if(isNaN(s.getTime())||isNaN(o.getTime()))return void console.error(`Invalid date for task: ${r.title}`);if(s>o)return void console.warn(`Start date is after end date for task: ${r.title}`);i.push({start:s,end:o,title:r.title,color:r.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:r})}}),console.log("Events generated:",i),i}generateRecurringEvents(e){console.log("Generating recurring events for task:",e.title);const i=[],r=new Date(e.startDateTime),s=new Date(e.endDateTime),o=e.repeatSettings;if(isNaN(r.getTime())||isNaN(s.getTime())||!o)return console.error(`Invalid date or repeat settings for task: ${e.title}`),i;if("none"===o.frequency)return i.push({start:r,end:s,title:e.title,color:e.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:e}),i;let a=r,l=s;const c=o.endDate?new Date(o.endDate):null,u=1e3;let f=0;for(;(!c||a<=c)&&f<u;){if("monthlyFromEnd"===o.frequency&&void 0!==o.daysOffsetFromEnd&&(a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd),a=eD(a,{hours:r.getHours(),minutes:r.getMinutes()}),l=eD(a,{hours:s.getHours(),minutes:s.getMinutes()})),a>l)return console.warn(`Start date is after end date for recurring task: ${e.title}`),i;!this.isExcludedDate(a,o.excludeDates)&&(!o.businessDaysOnly||!this.isHolidayOrWeekend(a))&&i.push({start:a,end:l,title:e.title,color:e.completed?{primary:"#ad2121",secondary:"#FAE3E3"}:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:e});let m=!1;for(;!m;){switch(o.frequency){case"daily":a=Qp(a,1),l=Qp(l,1),m=!0;break;case"weekly":a=Xp(a,1),l=Xp(l,1),m=!0;break;case"monthly":a=Jd(a,1),l=Jd(l,1),m=!0;break;case"yearly":a=j6(a,1),l=j6(l,1),m=!0;break;case"monthlyFromEnd":a=Jd(a,1),l=Jd(l,1),a=this.calculateMonthlyFromEndDate(a,o.daysOffsetFromEnd??0),a=eD(a,{hours:r.getHours(),minutes:r.getMinutes()}),l=eD(a,{hours:s.getHours(),minutes:s.getMinutes()}),m=!0;break;default:console.warn(`Unknown repeat frequency: ${o.frequency}`),f=u,m=!0}o.businessDaysOnly&&this.isHolidayOrWeekend(a)&&(m=!1)}f++}return f===u&&console.warn(`Max iterations reached for task: ${e.title}`),console.log("Recurring events generated:",i),i}isExcludedDate(e,i){return!!i&&i.some(r=>{const s=new Date(r);return e.getFullYear()===s.getFullYear()&&e.getMonth()===s.getMonth()&&e.getDate()===s.getDate()})}calculateMonthlyFromEndDate(e,i){let r=Jp(wP(e),i),s=0;for(let o=Jp(wP(e),i);o<=wP(e);o=Qp(o,1))this.isHolidayOrWeekend(o)&&s++;for(r=Jp(r,s);this.isHolidayOrWeekend(r);)r=Jp(r,1);return console.log(`Final target date: ${r}`),r}isHolidayOrWeekend(e){const i=e.getDay(),r=0===i||6===i,s=this.holidays.some(o=>o.getFullYear()===e.getFullYear()&&o.getMonth()===e.getMonth()&&o.getDate()===e.getDate());return console.log(`Date: ${e}, isWeekend: ${r}, isHoliday: ${s}`),r||s}updateAllEvents(){this.allEvents=[...this.events,...this.holidayEvents],console.log("All events updated:",this.allEvents)}getNonHolidayEvents(){return this.allEvents.filter(e=>!this.holidayEvents.some(i=>i.start.getTime()===e.start.getTime()))}handleEvent(e,i){console.log(`Event ${e} - ${i.title}`),i.meta&&(this.dialog.closeAll(),this.dialog.open(zy,{width:"600px",data:{task:i.meta}}).afterClosed().subscribe(s=>{s&&(console.log("Event details updated:",s),this.taskService.updateTask(s).then(()=>{this.loadEvents()}))}))}setView(e){console.log(`View changed to ${e}`),this.view=e}addTask(){console.log("Adding new task..."),this.dialog.open(bP,{width:"600px",maxHeight:"80vh",panelClass:"custom-dialog-container"}).afterClosed().subscribe(i=>{i&&(console.log("New task added:",i),this.loadEvents())})}previousPeriod(){switch(console.log("Moving to previous period..."),this.view){case ko.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()-1));break;case ko.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-7));break;case ko.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()-1))}console.log("New view date:",this.viewDate)}nextPeriod(){switch(console.log("Moving to next period..."),this.view){case ko.Month:this.viewDate=new Date(this.viewDate.setMonth(this.viewDate.getMonth()+1));break;case ko.Week:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+7));break;case ko.Day:this.viewDate=new Date(this.viewDate.setDate(this.viewDate.getDate()+1))}console.log("New view date:",this.viewDate)}getWeekRange(){const e=Oa(this.viewDate),i=vP(this.viewDate);return`${e.getFullYear()}\u5e74${("0"+(e.getMonth()+1)).slice(-2)}\u6708${("0"+e.getDate()).slice(-2)}\u65e5\uff5e${i.getFullYear()}\u5e74${("0"+(i.getMonth()+1)).slice(-2)}\u6708${("0"+i.getDate()).slice(-2)}\u65e5`}getCompareWeekRange(){const e=Oa(this.compareDate),i=vP(this.compareDate);return`${e.getFullYear()}\u5e74${("0"+(e.getMonth()+1)).slice(-2)}\u6708${("0"+e.getDate()).slice(-2)}\u65e5\uff5e${i.getFullYear()}\u5e74${("0"+(i.getMonth()+1)).slice(-2)}\u6708${("0"+i.getDate()).slice(-2)}\u65e5`}updateMonthWeeks(){const e=XC(new Date(this.selectedYear,this.selectedMonth-1)),i=QC(new Date(this.selectedYear,this.selectedMonth-1));this.monthWeeks=function $_e(n,t){const e=kt(n.start),i=kt(n.end);let r=+e>+i;const s=Oa(r?i:e,t),o=Oa(r?e:i,t);s.setHours(15),o.setHours(15);const a=+o.getTime();let l=s,c=t?.step??1;if(!c)return[];c<0&&(c=-c,r=!r);const u=[];for(;+l<=a;)l.setHours(0),u.push(kt(l)),l=Xp(l,c),l.setHours(15);return r?u.reverse():u}({start:e,end:i},{weekStartsOn:0}).map((r,s)=>s+1)}updateDaysInMonth(){const e=XC(new Date(this.selectedYear,this.selectedMonth-1)),i=QC(new Date(this.selectedYear,this.selectedMonth-1));this.daysInMonth=function W_e(n,t){const e=kt(n.start),i=kt(n.end);let r=+e>+i;const s=r?+e:+i,o=r?i:e;o.setHours(0,0,0,0);let a=t?.step??1;if(!a)return[];a<0&&(a=-a,r=!r);const l=[];for(;+o<=s;)l.push(kt(o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return r?l.reverse():l}({start:e,end:i}).map(r=>r.getDate())}onYearMonthOrWeekChange(){if(this.updateMonthWeeks(),this.updateDaysInMonth(),this.compareMode)switch(this.view){case ko.Month:this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,1);break;case ko.Week:const e=XC(new Date(this.selectedYear,this.selectedMonth-1));this.compareDate=Xp(e,this.selectedWeek-1);break;case ko.Day:this.compareDate=new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay)}}toggleCompareMode(){this.compareMode&&this.onYearMonthOrWeekChange()}getWeekNumber(e){const i=new Date(e.getFullYear(),0,1),r=Math.floor((e.getTime()-i.getTime())/864e5);return Math.ceil((r+i.getDay()+1)/7)}isSameWeek(e,i){return function q_e(n,t,e){return+Oa(n,e)==+Oa(t,e)}(e,i)}isSameDay(e,i){return N6(e,i)}static#e=this.\u0275fac=function(i){return new(i||n)(K(th),K(I6),K(Ry))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-calendar"]],standalone:!0,features:[fn([Uy,By,jy,KC,{provide:Xd,useFactory:V6}]),Wr],decls:19,vars:3,consts:[[1,"container"],[1,"button-container"],[1,"action-button",3,"click"],[1,"action-button","add-task-button",3,"click"],[4,"ngIf"],[1,"comparison-settings"],["for","year"],["id","year",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","month"],["id","month",3,"ngModel","ngModelChange","change"],["for","compare"],["type","checkbox","id","compare",3,"ngModel","ngModelChange","change"],[1,"calendar-comparison",3,"ngClass"],[1,"calendar-left",3,"ngClass"],[3,"viewDate","events","eventClicked"],["class","calendar-right",4,"ngIf"],[3,"value"],[1,"calendar-right"],["for","week"],["id","week",3,"ngModel","ngModelChange","change"],["for","day"],["id","day",3,"ngModel","ngModelChange","change"]],template:function(i,r){1&i&&(T(0,"div",0)(1,"h2"),F(2,"\u30ab\u30ec\u30f3\u30c0\u30fc"),I(),T(3,"div",1)(4,"button",2),ae("click",function(){return r.setView(r.CalendarView.Month)}),F(5,"\u6708\u30d3\u30e5\u30fc"),I(),T(6,"button",2),ae("click",function(){return r.setView(r.CalendarView.Week)}),F(7,"\u9031\u30d3\u30e5\u30fc"),I(),T(8,"button",2),ae("click",function(){return r.setView(r.CalendarView.Day)}),F(9,"\u65e5\u30d3\u30e5\u30fc"),I(),T(10,"button",2),ae("click",function(){return r.previousPeriod()}),F(11,"\u524d\u306e\u671f\u9593"),I(),T(12,"button",2),ae("click",function(){return r.nextPeriod()}),F(13,"\u6b21\u306e\u671f\u9593"),I(),T(14,"button",3),ae("click",function(){return r.addTask()}),F(15,"\u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),I()(),xe(16,Y_e,20,18,"div",4),xe(17,tye,23,17,"div",4),xe(18,oye,24,20,"div",4),I()),2&i&&(j(16),W("ngIf",r.view===r.CalendarView.Month),j(1),W("ngIf",r.view===r.CalendarView.Week),j(1),W("ngIf",r.view===r.CalendarView.Day))},dependencies:[ir,ps,Sr,Js,_0,T6,Nme,D6,Hme,Yp,mP,_P,YC,Bs,Lp,Vp,Gc,Qc,oo,Vs,Kde],styles:[".container[_ngcontent-%COMP%]{max-width:100%;margin:0;padding:20px;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:8px;height:98%;width:95%}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-start;margin-bottom:20px}.action-button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}.action-button[_ngcontent-%COMP%]:hover{background-color:#bbb}.add-task-button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:4px;cursor:pointer;background-color:#d3d3d3;color:#333}.add-task-button[_ngcontent-%COMP%]:hover{background-color:#bbb}.comparison-settings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.comparison-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:4px;font-size:12px;width:auto}.comparison-settings[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px}.calendar-comparison[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;align-items:flex-start}.calendar-left[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.calendar-right[_ngcontent-%COMP%]{width:46%;display:flex;flex-direction:column}.compare-active[_ngcontent-%COMP%]   .calendar-left[_ngcontent-%COMP%]{width:46%}.full-width[_ngcontent-%COMP%]{width:95%}"]})}return n})();function lye(n,t){if(1&n){const e=_t();T(0,"li")(1,"input",3),ae("ngModelChange",function(r){return fe(he(e).$implicit.selected=r)}),I(),F(2),I()}if(2&n){const e=t.$implicit;j(1),W("ngModel",e.selected),j(1),vS(" ",e.displayName," ",e.email," ")}}let DP=(()=>{class n{constructor(e){this.firestore=e,this.searchTerm="",this.users=[],this.userSelected=new $e}searchUsers(){this.users=[],this.firestore.collection("users",e=>e.where("email","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id,selected:!1})})}),this.firestore.collection("users",e=>e.where("displayName","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id,selected:!1})})}),this.firestore.collection("users",e=>e.where("uid","==",this.searchTerm)).get().subscribe(e=>{e.forEach(i=>{this.users.push({...i.data(),uid:i.id,selected:!1})})})}selectUsers(){const e=this.users.filter(i=>i.selected);console.log("Selected users:",e),this.userSelected.emit(e)}static#e=this.\u0275fac=function(i){return new(i||n)(K(Pd))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-user-search"]],outputs:{userSelected:"userSelected"},standalone:!0,features:[Wr],decls:8,vars:2,consts:[["type","text","placeholder","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u30e6\u30fc\u30b6\u30fcID\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u3067\u691c\u7d22",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(T(0,"div")(1,"input",0),ae("ngModelChange",function(o){return r.searchTerm=o}),I(),T(2,"button",1),ae("click",function(){return r.searchUsers()}),F(3,"\u691c\u7d22"),I(),T(4,"ul"),xe(5,lye,3,3,"li",2),I(),T(6,"button",1),ae("click",function(){return r.selectUsers()}),F(7,"\u9078\u629e\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0"),I()()),2&i&&(j(1),W("ngModel",r.searchTerm),j(4),W("ngForOf",r.users))},dependencies:[Bs,so,Gc,oo,Vs,ir,Sr]})}return n})(),TP=(()=>{class n{constructor(e){this.firestore=e}getUserById(e){return this.firestore.collection("users").doc(e).valueChanges()}static#e=this.\u0275fac=function(i){return new(i||n)(te(Pd))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const cye=function(n,t){return{"background-color":n,border:t}};function uye(n,t){if(1&n){const e=_t();T(0,"div",9),ae("click",function(){const s=he(e).$implicit;return fe(J().newProject.color=s)}),I()}if(2&n){const e=t.$implicit,i=J();W("ngStyle",tr(1,cye,e,i.newProject.color===e?"3px solid black":"1px solid #000"))}}function dye(n,t){if(1&n){const e=_t();T(0,"button",1),ae("click",function(){he(e);const r=J().$implicit;return fe(J().removeOwner(r))}),F(1,"\u524a\u9664"),I()}}function hye(n,t){if(1&n&&(T(0,"li"),F(1),xe(2,dye,2,0,"button",10),I()),2&n){const e=t.$implicit,i=J();j(1),cs(" ",e.displayName," "),j(1),W("ngIf",e.uid!==i.currentUserUid)}}function fye(n,t){if(1&n){const e=_t();T(0,"li"),F(1),T(2,"button",1),ae("click",function(){const s=he(e).$implicit;return fe(J().removeMember(s))}),F(3,"\u524a\u9664"),I()()}if(2&n){const e=t.$implicit;j(1),cs(" ",e.displayName," ")}}let U6=(()=>{class n{constructor(e,i,r,s){this.dialogRef=e,this.projectService=i,this.authService=r,this.userService=s,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.newProject={id:this.generateId(),name:"",description:"",startDate:"",endDate:"",color:"white",tasks:[],members:[],owners:[]},this.members=[],this.owners=[]}ngOnInit(){this.authService.user$.subscribe(e=>{console.log("\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u60c5\u5831:",e),this.currentUserUid=e?.uid,console.log("\u53d6\u5f97\u3057\u305f\u30e6\u30fc\u30b6\u30fcID:",this.currentUserUid),this.currentUserUid&&(this.newProject.owners.push(this.currentUserUid),console.log("\u30aa\u30fc\u30ca\u30fc\u30ea\u30b9\u30c8\u306b\u8ffd\u52a0:",this.newProject.owners),this.userService.getUserById(this.currentUserUid).subscribe(i=>{console.log("\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u53d6\u5f97:",i),i?(this.owners.push({...i,uid:this.currentUserUid}),console.log("\u30aa\u30fc\u30ca\u30fc\u60c5\u5831\u306b\u8ffd\u52a0:",this.owners)):console.error("\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u304c\u5b58\u5728\u3057\u307e\u305b\u3093:",this.currentUserUid)},i=>{console.error("\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f:",i)}))},e=>{console.error("\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f:",e)})}saveProject(){var e=this;return(0,ye.Z)(function*(){try{yield e.projectService.addProject(e.newProject),e.dialogRef.close(e.newProject)}catch(i){console.error("Error saving project:",i)}})()}cancel(){this.dialogRef.close()}addMembers(e){if(e.filter(r=>this.newProject.members.includes(r.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002");else{const r=e.filter(s=>!this.newProject.members.includes(s.uid));this.newProject.members.push(...r.map(s=>s.uid)),r.forEach(s=>{this.members.some(o=>o.uid===s.uid)||this.members.push(s)})}}addOwners(e){if(e.filter(r=>this.newProject.owners.includes(r.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002");else{const r=e.filter(s=>!this.newProject.owners.includes(s.uid));this.newProject.owners.push(...r.map(s=>s.uid)),r.forEach(s=>{this.owners.some(o=>o.uid===s.uid)||this.owners.push(s)})}}removeMember(e){e&&e.uid&&(this.newProject.members=this.newProject.members.filter(i=>i!==e.uid),this.members=this.members.filter(i=>i.uid!==e.uid))}removeOwner(e){e&&e.uid&&e.uid!==this.currentUserUid?(this.newProject.owners=this.newProject.owners.filter(i=>i!==e.uid),this.owners=this.owners.filter(i=>i.uid!==e.uid)):console.error("Cannot remove owner: user ID is undefined or user object is invalid",e)}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(i){return new(i||n)(K(zp),K(eh),K(Yo),K(TP))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-project-add"]],standalone:!0,features:[Wr],decls:43,vars:7,consts:[[1,"project-detail-container"],[3,"click"],["placeholder","\u540d\u524d",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[1,"color-option",3,"ngStyle","click"],[3,"click",4,"ngIf"]],template:function(i,r){1&i&&(T(0,"div",0)(1,"h2"),F(2,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),I(),T(3,"div")(4,"button",1),ae("click",function(){return r.saveProject()}),F(5,"\u4fdd\u5b58"),I(),T(6,"button",1),ae("click",function(){return r.cancel()}),F(7,"\u30ad\u30e3\u30f3\u30bb\u30eb"),I()(),T(8,"div")(9,"label"),F(10,"\u540d\u524d: "),T(11,"input",2),ae("ngModelChange",function(o){return r.newProject.name=o}),I()()(),T(12,"div")(13,"label"),F(14,"\u8aac\u660e: "),T(15,"textarea",3),ae("ngModelChange",function(o){return r.newProject.description=o}),I()()(),T(16,"div")(17,"label"),F(18,"\u958b\u59cb\u65e5: "),T(19,"input",4),ae("ngModelChange",function(o){return r.newProject.startDate=o}),I()()(),T(20,"div")(21,"label"),F(22,"\u7d42\u4e86\u65e5: "),T(23,"input",4),ae("ngModelChange",function(o){return r.newProject.endDate=o}),I()()(),T(24,"div")(25,"label"),F(26,"\u8272:"),I(),T(27,"div",5),xe(28,uye,1,4,"div",6),I()(),T(29,"h4"),F(30,"\u30aa\u30fc\u30ca\u30fc"),I(),T(31,"ul"),xe(32,hye,3,2,"li",7),I(),T(33,"h4"),F(34,"\u30e1\u30f3\u30d0\u30fc"),I(),T(35,"ul"),xe(36,fye,4,1,"li",7),I(),T(37,"h4"),F(38,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),I(),T(39,"app-user-search",8),ae("userSelected",function(o){return r.addMembers(o)}),I(),T(40,"h4"),F(41,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),I(),T(42,"app-user-search",8),ae("userSelected",function(o){return r.addOwners(o)}),I()()),2&i&&(j(11),W("ngModel",r.newProject.name),j(4),W("ngModel",r.newProject.description),j(4),W("ngModel",r.newProject.startDate),j(4),W("ngModel",r.newProject.endDate),j(5),W("ngForOf",r.colors),j(4),W("ngForOf",r.owners),j(4),W("ngForOf",r.members))},dependencies:[ir,Sr,Js,al,Bs,so,oo,Vs,DP],styles:[".project-detail-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;max-width:1200px;margin:0 auto;max-height:80vh;overflow-y:auto}.color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}"]})}return n})();function pye(n,t){if(1&n){const e=_t();T(0,"div")(1,"button",4),ae("click",function(){return he(e),fe(J().updateProject())}),F(2,"\u4fdd\u5b58"),I(),T(3,"button",4),ae("click",function(){return he(e),fe(J().cancel())}),F(4,"\u30ad\u30e3\u30f3\u30bb\u30eb"),I()()}}function gye(n,t){if(1&n){const e=_t();T(0,"button",4),ae("click",function(){he(e);const r=J().$implicit;return fe(J().removeOwner(r))}),F(1,"\u524a\u9664"),I()}}function mye(n,t){if(1&n&&(T(0,"li"),F(1),xe(2,gye,2,0,"button",5),I()),2&n){const e=t.$implicit,i=J();j(1),cs(" ",e.displayName," "),j(1),W("ngIf",i.isOwner&&e.uid!==i.currentUserUid)}}function _ye(n,t){if(1&n){const e=_t();T(0,"li"),F(1),T(2,"button",4),ae("click",function(){const s=he(e).$implicit;return fe(J().removeMember(s))}),F(3,"\u524a\u9664"),I()()}if(2&n){const e=t.$implicit;j(1),cs(" ",e.displayName," ")}}let H6=(()=>{class n{constructor(e,i,r,s,o){this.dialogRef=e,this.data=i,this.projectService=r,this.userService=s,this.authService=o,this.members=[],this.owners=[],this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],this.isOwner=!1,this.project=i.project,this.projectCopy=JSON.parse(JSON.stringify(this.project))}ngOnInit(){this.loadMembers(),this.loadOwners(),this.checkIfOwner(),this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid})}loadMembers(){this.members=[],this.projectCopy.members.forEach(e=>{this.userService.getUserById(e).subscribe(i=>{i&&(this.members.push({...i,uid:e}),console.log("Member loaded:",i))})})}loadOwners(){this.owners=[],this.projectCopy.owners.forEach(e=>{this.userService.getUserById(e).subscribe(i=>{i&&(this.owners.push({...i,uid:e}),console.log("Owner loaded:",i))})})}checkIfOwner(){this.authService.user$.subscribe(e=>{e&&(this.isOwner=this.projectCopy.owners.includes(e.uid))})}updateProject(){var e=this;return(0,ye.Z)(function*(){try{yield e.projectService.updateProject(e.projectCopy),e.dialogRef.close(e.projectCopy)}catch(i){console.error("Error saving project:",i),alert(`\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4fdd\u5b58\u306b\u5931\u6557\u3057\u307e\u3057\u305f: ${i.message}`)}})()}addMembers(e){if(e.filter(r=>this.projectCopy.members.includes(r.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30e1\u30f3\u30d0\u30fc\u3067\u3059\u3002");else{const r=e.filter(s=>!this.projectCopy.members.includes(s.uid));this.projectCopy.members.push(...r.map(s=>s.uid)),this.loadMembers()}}addOwners(e){if(e.filter(r=>this.projectCopy.owners.includes(r.uid)).length>0)alert("\u9078\u629e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u65e2\u306b\u30aa\u30fc\u30ca\u30fc\u3067\u3059\u3002");else{const r=e.filter(s=>!this.projectCopy.owners.includes(s.uid));this.projectCopy.owners.push(...r.map(s=>s.uid)),this.loadOwners()}}removeMember(e){e&&e.uid?(console.log("Removing member with ID:",e.uid),this.projectCopy.members=this.projectCopy.members.filter(i=>i!==e.uid),this.members=this.members.filter(i=>i.uid!==e.uid),console.log("Member removed:",e)):console.error("Cannot remove member: user ID is undefined or user object is invalid",e)}removeOwner(e){e&&e.uid&&e.uid!==this.currentUserUid?(console.log("Removing owner with ID:",e.uid),this.projectCopy.owners=this.projectCopy.owners.filter(i=>i!==e.uid),this.owners=this.owners.filter(i=>i.uid!==e.uid),console.log("Owner removed:",e)):console.error("Cannot remove owner: user ID is undefined or user object is invalid",e)}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(i){return new(i||n)(K(zp),K(OC),K(eh),K(TP),K(Yo))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-project-detail"]],standalone:!0,features:[Wr],decls:20,vars:5,consts:[[1,"project-detail-container"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"userSelected"],[3,"click"],[3,"click",4,"ngIf"]],template:function(i,r){1&i&&(T(0,"div",0)(1,"h3"),F(2),I(),xe(3,pye,5,0,"div",1),T(4,"p"),F(5),I(),T(6,"h4"),F(7,"\u30aa\u30fc\u30ca\u30fc"),I(),T(8,"ul"),xe(9,mye,3,2,"li",2),I(),T(10,"h4"),F(11,"\u30e1\u30f3\u30d0\u30fc"),I(),T(12,"ul"),xe(13,_ye,4,1,"li",2),I(),T(14,"h4"),F(15,"\u30e1\u30f3\u30d0\u30fc\u8ffd\u52a0"),I(),T(16,"app-user-search",3),ae("userSelected",function(o){return r.addMembers(o)}),I(),T(17,"h4"),F(18,"\u30aa\u30fc\u30ca\u30fc\u8ffd\u52a0"),I(),T(19,"app-user-search",3),ae("userSelected",function(o){return r.addOwners(o)}),I()()),2&i&&(j(2),nt(r.project.name),j(1),W("ngIf",r.isOwner),j(2),nt(r.project.description),j(4),W("ngForOf",r.owners),j(4),W("ngForOf",r.members))},dependencies:[ir,Sr,Js,Bs,DP],styles:[".color-dropdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;max-width:100%;justify-content:center}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;cursor:pointer;border:1px solid #ccc;border-radius:50%;transition:transform .2s,box-shadow .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 5px #0003}button[_ngcontent-%COMP%]{margin:10px 5px 0 0;padding:8px 16px;border:none;border-radius:5px;background-color:#d3d3d3;color:#333;cursor:pointer;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#bbb}.project-detail-container[_ngcontent-%COMP%]{padding:10px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;max-width:1000px;margin:0 auto;max-height:80vh;overflow-y:auto;font-size:14px}h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:10px 0}ul[_ngcontent-%COMP%]{padding-left:20px;margin:5px 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin:10px 0}.search-container[_ngcontent-%COMP%]{display:flex;gap:5px;margin:10px 0}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px;border-radius:5px;border:1px solid #ccc}.add-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin:10px 0}"]})}return n})();function yye(n,t){if(1&n&&(T(0,"span"),F(1),I()),2&n){const e=t.$implicit,i=J(2);j(1),cs(" ",(null==i.ownersMap[e]?null:i.ownersMap[e].displayName)||"Unknown Owner"," ")}}function vye(n,t){if(1&n&&(T(0,"span"),F(1),I()),2&n){const e=t.$implicit,i=J(2);j(1),cs(" ",(null==i.membersMap[e]?null:i.membersMap[e].displayName)||"Unknown Member"," ")}}function bye(n,t){if(1&n){const e=_t();T(0,"li",16)(1,"div",17)(2,"input",18),ae("ngModelChange",function(r){return fe(he(e).$implicit.selected=r)}),I(),T(3,"a",19),ae("click",function(){const s=he(e).$implicit;return fe(J(2).openTaskDetailDialog(s))}),T(4,"div",20),F(5),I(),T(6,"div",21)(7,"span",22),F(8),I(),T(9,"span",23),F(10),I(),T(11,"span",24),F(12),Xt(13,"date"),I(),T(14,"span",25),F(15),Xt(16,"date"),I(),T(17,"span",26),F(18),I(),On(19,"span",27),I()()()()}if(2&n){const e=t.$implicit,i=J().$implicit,r=J();j(2),W("ngModel",e.selected)("disabled",!r.canEdit(i)),j(3),nt(e.title),j(3),nt(e.status),j(1),W("ngClass",e.priority),j(1),nt(r.getPriorityLabel(e.priority)),j(2),nt(pi(13,11,e.startDateTime,"short")),j(3),nt(pi(16,14,e.endDateTime,"short")),j(3),nt(e.tag),j(1),wo("background-color",e.tagColor)}}function wye(n,t){if(1&n){const e=_t();T(0,"li")(1,"div",6)(2,"input",12),ae("ngModelChange",function(r){return fe(he(e).$implicit.selected=r)}),I(),T(3,"h3",13),ae("click",function(){const s=he(e).$implicit;return fe(J().openProjectDetailDialog(s))}),F(4),I(),T(5,"span",14),F(6,"\u30aa\u30fc\u30ca\u30fc: "),xe(7,yye,2,1,"span",5),I(),T(8,"span",15),F(9,"\u30e1\u30f3\u30d0\u30fc: "),xe(10,vye,2,1,"span",5),I()(),T(11,"ul",7)(12,"li",8)(13,"div",9)(14,"span",10),F(15,"\u9078\u629e"),I(),T(16,"span",10),F(17,"\u30bf\u30a4\u30c8\u30eb"),I(),T(18,"span",10),F(19,"\u30b9\u30c6\u30fc\u30bf\u30b9"),I(),T(20,"span",10),F(21,"\u512a\u5148\u5ea6"),I(),T(22,"span",10),F(23,"\u958b\u59cb\u65e5\u6642"),I(),T(24,"span",10),F(25,"\u7d42\u4e86\u65e5\u6642"),I(),T(26,"span",10),F(27,"\u30bf\u30b0"),I(),T(28,"span",10),F(29,"\u30bf\u30b0\u306e\u8272"),I()()(),xe(30,bye,20,17,"li",11),I()()}if(2&n){const e=t.$implicit,i=J();j(2),W("ngModel",e.selected)("disabled",!i.canEdit(e)),j(2),nt(e.name),j(3),W("ngForOf",e.owners),j(3),W("ngForOf",e.members),j(20),W("ngForOf",i.getTasksForProject(e.id))}}function Eye(n,t){if(1&n){const e=_t();T(0,"li",16)(1,"div",17)(2,"input",28),ae("ngModelChange",function(r){return fe(he(e).$implicit.selected=r)}),I(),T(3,"a",19),ae("click",function(){const s=he(e).$implicit;return fe(J().openTaskDetailDialog(s))}),T(4,"div",20),F(5),I(),T(6,"div",21)(7,"span",22),F(8),I(),T(9,"span",23),F(10),I(),T(11,"span",24),F(12),Xt(13,"date"),I(),T(14,"span",25),F(15),Xt(16,"date"),I(),T(17,"span",26),F(18),I(),On(19,"span",27),I()()()()}if(2&n){const e=t.$implicit,i=J();j(2),W("ngModel",e.selected),j(3),nt(e.title),j(3),nt(e.status),j(1),W("ngClass",e.priority),j(1),nt(i.getPriorityLabel(e.priority)),j(2),nt(pi(13,10,e.startDateTime,"short")),j(3),nt(pi(16,13,e.endDateTime,"short")),j(3),nt(e.tag),j(1),wo("background-color",e.tagColor)}}let Cye=(()=>{class n{constructor(e,i,r,s,o){this.taskService=e,this.projectService=i,this.userService=r,this.authService=s,this.dialog=o,this.projects=[],this.tasks=[],this.membersMap={},this.ownersMap={},this.currentUserUid=null,this.uniqueTaskIds=new Set}ngOnInit(){this.authService.user$.subscribe(e=>{this.currentUserUid=e?.uid||null,this.loadProjects()})}loadProjects(){console.log("Loading projects..."),this.projectService.getProjects().subscribe(e=>{this.projects=e.filter(i=>i.members.includes(this.currentUserUid)||i.owners.includes(this.currentUserUid)),console.log("Projects loaded:",this.projects),this.loadUsers(),this.loadTasksForProjects()})}loadTasksForProjects(){console.log("Loading tasks for each project..."),this.tasks=[],this.uniqueTaskIds.clear(),this.currentUserUid&&(this.projects.forEach(e=>{console.log(`User is a member or owner of project: ${e.id}`),this.loadTasksForUsersInProject(e.id,e.members.concat(e.owners))}),this.loadUnassignedTasks())}loadTasksForUsersInProject(e,i){i.forEach(r=>{this.taskService.getTasksByUserId(r).subscribe(s=>{s.forEach(o=>{o.projectId===e&&!this.uniqueTaskIds.has(o.id)&&(this.uniqueTaskIds.add(o.id),this.tasks.push(o))})})})}loadUnassignedTasks(){console.log("Loading unassigned tasks..."),this.taskService.getTasksByUserId(this.currentUserUid).subscribe(e=>{e.forEach(i=>{!i.projectId&&!this.uniqueTaskIds.has(i.id)&&(this.uniqueTaskIds.add(i.id),this.tasks.push(i))}),console.log("Unassigned tasks loaded:",this.tasks)})}loadUsers(){console.log("Loading users...");const e=new Set,i=new Set;this.projects.forEach(o=>{o.members&&o.members.forEach(a=>e.add(a)),o.owners&&o.owners.forEach(a=>i.add(a))});const r=Array.from(e),s=Array.from(i);console.log("Unique Member IDs:",r),console.log("Unique Owner IDs:",s),r.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.membersMap[o]=a,console.log("Added member to membersMap:",a)):console.log("User is undefined or has no UID:",a)})}),s.forEach(o=>{this.userService.getUserById(o).subscribe(a=>{a?(this.ownersMap[o]=a,console.log("Added owner to ownersMap:",a)):console.log("User is undefined or has no UID:",a)})})}openAddTaskDialog(){console.log("Opening Add Task Dialog..."),this.dialog.open(bP,{width:"400px"}).afterClosed().subscribe(i=>{i&&(console.log("Add Task Dialog closed with result:",i),this.loadTasksForProjects())})}openAddProjectDialog(){console.log("Opening Add Project Dialog..."),this.dialog.open(U6,{width:"400px"}).afterClosed().subscribe(i=>{i&&(console.log("Add Project Dialog closed with result:",i),this.loadProjects())})}deleteSelectedTasks(){console.log("Deleting selected tasks...");const i=this.tasks.filter(r=>r.selected).map(r=>{const s=this.projects.find(o=>o.id===r.projectId);return console.log("Project found:",s),s&&s.owners.includes(this.currentUserUid)?(console.log("User is owner of the project, deleting task..."),this.taskService.deleteTask(r).then(()=>{console.log("Deleted task:",r)}).catch(o=>{console.error("Error deleting task:",o)})):r.userId===this.currentUserUid?(console.log("User is the creator of the task, deleting task..."),this.taskService.deleteTask(r).then(()=>{console.log("Deleted task:",r)}).catch(o=>{console.error("Error deleting task:",o)})):(console.warn("You do not have permission to delete this task:",r),Promise.resolve())});Promise.all(i).then(()=>{this.loadTasksForProjects()}).catch(r=>{console.error("Error in deleting tasks:",r)})}deleteSelectedProjects(){console.log("Deleting selected projects..."),this.projects.filter(i=>i.selected).forEach(i=>{this.getTasksForProject(i.id).forEach(s=>{this.taskService.deleteTask(s).then(()=>{console.log("Deleted related task:",s),this.loadTasksForProjects()})}),this.projectService.deleteProject(i).then(()=>{console.log("Deleted project:",i),this.loadProjects()})})}openProjectDetailDialog(e){console.log("Opening Project Detail Dialog for project:",e),this.currentUserUid&&e.owners.includes(this.currentUserUid)?(this.dialog.closeAll(),this.dialog.open(H6,{width:"600px",data:{project:e}}).afterClosed().subscribe(r=>{r&&(console.log("Project Detail Dialog closed with result:",r),this.loadProjects())})):alert("\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30aa\u30fc\u30ca\u30fc\u3067\u306f\u306a\u3044\u305f\u3081\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\u3002")}getTasksForProject(e){return this.tasks.filter(i=>i.projectId===e)}openTaskDetailDialog(e){console.log("Opening Task Detail Dialog for task:",e),this.dialog.closeAll(),this.dialog.open(zy,{width:"600px",data:{task:e}}).afterClosed().subscribe(r=>{r&&(console.log("Task Detail Dialog closed with result:",r),this.loadTasksForProjects())})}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}canEdit(e){return!!this.currentUserUid&&e.owners.includes(this.currentUserUid)}static#e=this.\u0275fac=function(i){return new(i||n)(K(th),K(eh),K(TP),K(Yo),K(Ry))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-project-list"]],standalone:!0,features:[Wr],decls:37,vars:2,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"project-task-list-container"],[4,"ngFor","ngForOf"],[1,"project-header"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],["type","checkbox",1,"project-checkbox",3,"ngModel","disabled","ngModelChange"],[3,"click"],[1,"project-owners"],[1,"project-members"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","disabled","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(T(0,"div",0)(1,"div",1)(2,"button",2),ae("click",function(){return r.openAddTaskDialog()}),F(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),I(),T(4,"button",3),ae("click",function(){return r.openAddProjectDialog()}),F(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),I(),T(6,"button",3),ae("click",function(){return r.deleteSelectedTasks()}),F(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),I(),T(8,"button",3),ae("click",function(){return r.deleteSelectedProjects()}),F(9,"\u9078\u629e\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664"),I()(),T(10,"div",4)(11,"ul"),xe(12,wye,31,6,"li",5),T(13,"li")(14,"div",6)(15,"h3"),F(16,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7121\u6240\u5c5e"),I()(),T(17,"ul",7)(18,"li",8)(19,"div",9)(20,"span",10),F(21,"\u9078\u629e"),I(),T(22,"span",10),F(23,"\u30bf\u30a4\u30c8\u30eb"),I(),T(24,"span",10),F(25,"\u30b9\u30c6\u30fc\u30bf\u30b9"),I(),T(26,"span",10),F(27,"\u512a\u5148\u5ea6"),I(),T(28,"span",10),F(29,"\u958b\u59cb\u65e5\u6642"),I(),T(30,"span",10),F(31,"\u7d42\u4e86\u65e5\u6642"),I(),T(32,"span",10),F(33,"\u30bf\u30b0"),I(),T(34,"span",10),F(35,"\u30bf\u30b0\u306e\u8272"),I()()(),xe(36,Eye,20,16,"li",11),I()()()()()),2&i&&(j(12),W("ngForOf",r.projects),j(24),W("ngForOf",r.getTasksForProject("")))},dependencies:[ir,ps,Sr,_0,Bs,Gc,oo,Vs],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a;box-sizing:border-box;margin:0 auto}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.project-task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;box-sizing:border-box;margin:10px auto}.project-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.project-checkbox[_ngcontent-%COMP%]{margin-right:10px}.project-owners[_ngcontent-%COMP%], .project-members[_ngcontent-%COMP%]{margin-left:auto;font-size:.9em;color:#555}.project-owners[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .project-members[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;padding:5px 10px;background-color:#f0f0f0;border-radius:10px;font-size:.9em;color:#555}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 20% 15% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-start-date[_ngcontent-%COMP%], .task-end-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%], .task-tag-color[_ngcontent-%COMP%]{text-align:center;margin-left:10px}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}"]})}return n})();function IP(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function eg(n,t){const e=t?"":"none";IP(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function z6(n,t,e){IP(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function tD(n,t){return t&&"none"!=t?n+" "+t:n}function $6(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function SP(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function AP(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function xP(n,t,e){const{top:i,bottom:r,left:s,right:o}=n;return e>=i&&e<=r&&t>=s&&t<=o}function $y(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function W6(n,t,e,i){const{top:r,right:s,bottom:o,left:a,width:l,height:c}=n,u=l*t,f=c*t;return i>r-f&&i<o+f&&e>a-u&&e<s+u}class q6{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:AP(e)})})}handleScroll(t){const e=Mo(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let s,o;if(e===this._document){const c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=e.scrollTop,o=e.scrollLeft;const a=r.top-s,l=r.left-o;return this.positions.forEach((c,u)=>{c.clientRect&&e!==u&&e.contains(u)&&$y(c.clientRect,a,l)}),r.top=s,r.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function G6(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?Y6(n,t):("input"===i||"select"===i||"textarea"===i)&&Z6(n,t),K6("canvas",n,t,Y6),K6("input, textarea, select",n,t,Z6),t}function K6(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let Tye=0;function Z6(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Tye++}`)}function Y6(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const Q6=Hd({passive:!0}),nD=Hd({passive:!1}),MP=new Set(["position"]);class Sye{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=function Xc(n){return null!=n&&"false"!=`${n}`}(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>eg(i,e)))}constructor(t,e,i,r,s,o){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new ne,this._pointerMoveSubscription=Ct.EMPTY,this._pointerUpSubscription=Ct.EMPTY,this._scrollSubscription=Ct.EMPTY,this._resizeSubscription=Ct.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new ne,this.started=new ne,this.released=new ne,this.ended=new ne,this.entered=new ne,this.exited=new ne,this.dropped=new ne,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const y=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),v=this._dropContainer;if(!y)return void this._endDragSequence(a);(!v||!v.isDragging()&&!v.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const u=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=c.x-u.x+this._passiveTransform.x,f.y=c.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new q6(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>ar(i)),this._handles.forEach(i=>eg(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=ar(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,nD),e.addEventListener("touchstart",this._pointerDown,Q6),e.addEventListener("dragstart",this._nativeDragStart,nD)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?ar(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),eg(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),eg(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Wy(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(o,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),z6(i,!1,MP),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=Wy(e),s=!r&&0!==e.button,o=this._rootElement,a=Mo(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=r?VR(e):LR(e);if(a&&a.draggable&&"mousedown"===e.type&&e.preventDefault(),i||s||l||c)return;if(this._handles.length){const m=o.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=AP(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){z6(this._rootElement,!0,MP),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),o=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const s=t.matchSize?this._initialClientRect:null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),r=J6(o,this._document),this._previewRef=o,t.matchSize?eW(r,s):r.style.transform=iD(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=G6(this._rootElement),eW(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return IP(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},MP),eg(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function Dye(n){const t=getComputedStyle(n),e=SP(t,"transition-property"),i=e.find(a=>"transform"===a||"all"===a);if(!i)return 0;const r=e.indexOf(i),s=SP(t,"transition-duration"),o=SP(t,"transition-delay");return $6(s[r])+$6(o[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=o=>{(!o||Mo(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=J6(this._placeholderRef,this._document)):i=G6(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,o=Wy(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition();return{x:s.left-t.left+(o.pageX-s.left-a.left),y:s.top-t.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=Wy(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+o,f=a.bottom-(c-o);i=X6(i,a.left+s,a.right-(l-s)),r=X6(r,u,f)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,eg(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,nD),t.removeEventListener("touchstart",this._pointerDown,Q6),t.removeEventListener("dragstart",this._nativeDragStart,nD)}_applyRootElementTransform(t,e){const i=iD(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=tD(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=iD(t,e);this._preview.style.transform=tD(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,l=i.bottom-r.bottom;r.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,r.height>i.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Wy(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=Mo(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&$y(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=IR(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return ar(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function iD(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function X6(n,t,e){return Math.max(t,Math.min(e,n))}function Wy(n){return"t"===n.type[0]}function J6(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function eW(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=iD(t.left,t.top)}function tW(n,t,e){const i=qy(t,n.length-1),r=qy(e,n.length-1);if(i===r)return;const s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s}function qy(n,t){return Math.max(0,Math.min(t,n))}class Aye{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,l=s.findIndex(E=>E.drag===t),c=s[o],f=c.clientRect,m=l>o?1:-1,y=this._getItemOffsetPx(s[l].clientRect,f,m),v=this._getSiblingOffsetPx(l,s,m),w=s.slice();return tW(s,l,o),s.forEach((E,k)=>{if(w[k]===E)return;const S=E.drag===t,R=S?y:v,z=S?t.getPlaceholderElement():E.drag.getRootElement();E.offset+=R,a?(z.style.transform=tD(`translate3d(${Math.round(E.offset)}px, 0, 0)`,E.initialTransform),$y(E.clientRect,0,R)):(z.style.transform=tD(`translate3d(0, ${Math.round(E.offset)}px, 0)`,E.initialTransform),$y(E.clientRect,R,0))}),this._previousSwap.overlaps=xP(f,e,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:l,currentIndex:o}}enter(t,e,i,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,o=this._activeDraggables,a=o.indexOf(t),l=t.getPlaceholderElement();let c=o[s];if(c===t&&(c=o[s+1]),!c&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const u=c.getRootElement();u.parentElement.insertBefore(l,u),o.splice(s,0,t)}else ar(this._element).appendChild(l),o.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{$y(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:AP(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let s=r?e.left-t.left:e.top-t.top;return-1===i&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,s=e[t].clientRect,o=e[t+-1*i];let a=s[r?"width":"height"]*i;if(o){const l=r?"left":"top",c=r?"right":"bottom";-1===i?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const o=i[i.length-1].clientRect;return r?t>=o.right:e>=o.bottom}{const o=i[0].clientRect;return r?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,r){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>a!==t&&((!r||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?r.x:r.y)!==this._previousSwap.delta)&&(s?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom))));return-1!==o&&this._sortPredicate(o,t)?o:-1}}class xye{constructor(t,e,i,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ne,this.entered=new ne,this.exited=new ne,this.dropped=new ne,this.sorted=new ne,this.receivingStarted=new ne,this.receivingStopped=new ne,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Ct.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new ne,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),G5(0,L$).pipe(qr(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=ar(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new q6(i),this._sortStrategy=new Aye(this.element,e),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,s,o,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:l})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=ar(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!W6(this._clientRect,.05,e,i))return;const s=this._sortStrategy.sort(t,e,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||W6(o.clientRect,.05,t,e)&&([r,s]=function Mye(n,t,e,i){const r=rW(t,i),s=sW(t,e);let o=0,a=0;if(r){const l=n.scrollTop;1===r?l>0&&(o=1):n.scrollHeight-l>n.clientHeight&&(o=2)}if(s){const l=n.scrollLeft;1===s?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,t,e),(r||s)&&(i=a))}),!r&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};r=rW(l,e),s=sW(l,t),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=ar(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=ar(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=ar(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&xP(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!xP(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const s=ar(this.element);return r===s||s.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=IR(ar(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function rW(n,t){const{top:e,bottom:i,height:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}function sW(n,t){const{left:e,right:i,width:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}const rD=Hd({passive:!1,capture:!0});let kye=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new ne,this.pointerUp=new ne,this.scroll=new ne,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,rD)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,rD)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:rD}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:rD}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new ft(r=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&r.next(a)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),ve(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(te(ot),te(Lt))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Rye={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let kP=(()=>{class n{constructor(e,i,r,s){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,i=Rye){return new Sye(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new xye(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(i){return new(i||n)(te(Lt),te(ot),te(xR),te(kye))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jye=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({providers:[kP],imports:[MR]})}return n})();const Uye=function(n,t){return{"background-color":n,border:t}};function Hye(n,t){if(1&n){const e=_t();T(0,"div",22),ae("click",function(){const s=he(e).$implicit;return fe(J(2).selectColor(s))}),I()}if(2&n){const e=t.$implicit,i=J(2);W("ngStyle",tr(1,Uye,e,i.editedSubtask.tagColor===e?"3px solid black":"1px solid #000"))}}function zye(n,t){if(1&n){const e=_t();T(0,"div",1)(1,"div",2)(2,"h2",3),F(3),I(),T(4,"div",4)(5,"button",5),ae("click",function(){return he(e),fe(J().saveSubtask())}),F(6,"\u4fdd\u5b58"),I(),T(7,"button",5),ae("click",function(){return he(e),fe(J().cancel())}),F(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),I()()(),T(9,"div",6)(10,"span",7),F(11,"\u30bf\u30a4\u30c8\u30eb:"),I(),T(12,"span",8)(13,"input",9),ae("ngModelChange",function(r){return he(e),fe(J().editedSubtask.title=r)}),I()()(),T(14,"div",6)(15,"span",7),F(16,"\u8aac\u660e:"),I(),T(17,"span",8)(18,"textarea",10),ae("ngModelChange",function(r){return he(e),fe(J().editedSubtask.description=r)}),I()()(),T(19,"div",6)(20,"span",7),F(21,"\u958b\u59cb\u65e5\u6642:"),I(),T(22,"span",8)(23,"input",11),ae("ngModelChange",function(r){return he(e),fe(J().editedSubtask.startDateTime=r)}),I()()(),T(24,"div",6)(25,"span",7),F(26,"\u7d42\u4e86\u65e5\u6642:"),I(),T(27,"span",8)(28,"input",11),ae("ngModelChange",function(r){return he(e),fe(J().editedSubtask.endDateTime=r)}),I()()(),T(29,"div",6)(30,"span",7),F(31,"\u512a\u5148\u5ea6:"),I(),T(32,"span",8)(33,"select",12),ae("ngModelChange",function(r){return he(e),fe(J().editedSubtask.priority=r)}),T(34,"option",13),F(35,"\u4f4e"),I(),T(36,"option",14),F(37,"\u4e2d"),I(),T(38,"option",15),F(39,"\u9ad8"),I()()()(),T(40,"div",6)(41,"span",7),F(42,"\u30bf\u30b0:"),I(),T(43,"span",8)(44,"input",16),ae("ngModelChange",function(r){return he(e),fe(J().editedSubtask.tag=r)}),I()()(),T(45,"div",6)(46,"span",7),F(47,"\u30bf\u30b0\u306e\u8272:"),I(),T(48,"span",8)(49,"div",17),xe(50,Hye,1,4,"div",18),I()()(),T(51,"div",6)(52,"span",7),F(53,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),I(),T(54,"span",8)(55,"select",12),ae("ngModelChange",function(r){return he(e),fe(J().editedSubtask.status=r)}),T(56,"option",19),F(57,"\u672a\u7740\u624b"),I(),T(58,"option",20),F(59,"\u9032\u884c\u4e2d"),I(),T(60,"option",21),F(61,"\u5b8c\u4e86"),I()()()()()}if(2&n){const e=J();j(3),cs("",e.subtask.title," \u306e\u8a73\u7d30"),j(10),W("ngModel",e.editedSubtask.title),j(5),W("ngModel",e.editedSubtask.description),j(5),W("ngModel",e.editedSubtask.startDateTime),j(5),W("ngModel",e.editedSubtask.endDateTime),j(5),W("ngModel",e.editedSubtask.priority),j(11),W("ngModel",e.editedSubtask.tag),j(6),W("ngForOf",e.colors),j(5),W("ngModel",e.editedSubtask.status)}}let $ye=(()=>{class n{constructor(e,i,r){this.taskService=e,this.dialogRef=i,this.data=r,this.colors=["red","blue","green","yellow","orange","purple","pink","gray","black","white"],r&&r.subtask&&r.task?(this.subtask=r.subtask,this.task=r.task,this.editedSubtask={...this.subtask}):(this.subtask={id:this.generateId(),title:"\u65b0\u3057\u3044\u30b5\u30d6\u30bf\u30b9\u30af",completed:!1,description:"",priority:"low",startDateTime:"",endDateTime:"",tag:"",selected:!1,tagColor:"white",status:"\u672a\u7740\u624b"},this.editedSubtask={...this.subtask},this.task={id:this.generateId(),title:"",description:"",completed:!1,priority:"low",startDateTime:"",endDateTime:"",tag:"",subtasks:[],selected:!1,tagColor:"white",status:"\u672a\u7740\u624b",projectId:"",repeatSettings:{frequency:"none",businessDaysOnly:!1,excludeDates:[]},reminderTime:{value:null,unit:"\u5206"},userId:""})}ngOnInit(){this.task.subtasks||(this.task.subtasks=[])}saveSubtask(){var e=this;return(0,ye.Z)(function*(){if(!e.task||!e.task.id)return void console.error("Task is not properly initialized.");e.task.subtasks||(e.task.subtasks=[]);const i=e.task.subtasks.findIndex(r=>r.id===e.subtask.id);-1!==i?e.task.subtasks[i]={...e.editedSubtask}:e.task.subtasks.push({...e.editedSubtask}),yield e.taskService.updateTask(e.task),e.dialogRef.close(e.editedSubtask)})()}cancel(){this.dialogRef.close()}selectColor(e){this.editedSubtask.tagColor=e}generateId(){return Math.random().toString(36).substr(2,9)}static#e=this.\u0275fac=function(i){return new(i||n)(K(th),K(zp),K(OC))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-subtask-detail"]],inputs:{subtask:"subtask"},standalone:!0,features:[Wr],decls:1,vars:1,consts:[["class","subtask-detail-container",4,"ngIf"],[1,"subtask-detail-container"],[1,"header-container"],[1,"title"],[1,"button-container"],[3,"click"],[1,"detail-row"],[1,"detail-label"],[1,"detail-content"],["placeholder","\u30bf\u30a4\u30c8\u30eb",3,"ngModel","ngModelChange"],["placeholder","\u8aac\u660e",3,"ngModel","ngModelChange"],["type","datetime-local",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["placeholder","\u30bf\u30b0",3,"ngModel","ngModelChange"],[1,"color-dropdown"],["class","color-option",3,"ngStyle","click",4,"ngFor","ngForOf"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"color-option",3,"ngStyle","click"]],template:function(i,r){1&i&&xe(0,zye,62,9,"div",0),2&i&&W("ngIf",r.editedSubtask)},dependencies:[ir,Sr,Js,al,Bs,Lp,Vp,so,Qc,oo,Vs],styles:[".subtask-detail-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;overflow:auto;max-height:80vh;padding:10px;box-shadow:0 0 10px #0000001a;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;text-align:center}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:700;text-align:right;margin-right:10px}.detail-content[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center}.color-dropdown[_ngcontent-%COMP%]{display:flex;gap:5px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;cursor:pointer;transition:border .3s ease}.color-option.selected[_ngcontent-%COMP%]{border:3px solid black}.button-container[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ddd}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin:0}"]})}return n})();function Wye(n,t){if(1&n&&(T(0,"option"),F(1),I()),2&n){const e=t.$implicit;j(1),nt(e)}}function qye(n,t){if(1&n){const e=_t();T(0,"li",52)(1,"div",53),ae("click",function(){const s=he(e).$implicit,o=J().$implicit;return fe(J().openSubtaskDetailDialog(s,o))}),T(2,"input",54),ae("ngModelChange",function(r){return fe(he(e).$implicit.selected=r)})("click",function(r){return r.stopPropagation()}),I(),T(3,"span",55),F(4),I(),T(5,"span",56),F(6),I(),T(7,"span",57),F(8),I(),T(9,"span",58),F(10),Xt(11,"date"),I(),T(12,"span",59),F(13),Xt(14,"date"),I(),T(15,"span",60),F(16),I(),On(17,"span",61),I()()}if(2&n){const e=t.$implicit,i=J(2);j(2),W("ngModel",e.selected),j(2),nt(e.title),j(2),nt(e.status),j(1),W("ngClass",e.priority),j(1),nt(i.getPriorityLabel(e.priority)),j(2),nt(pi(11,10,e.startDateTime,"short")),j(3),nt(pi(14,13,e.endDateTime,"short")),j(3),nt(e.tag),j(1),wo("background-color",e.tagColor)}}function Gye(n,t){if(1&n){const e=_t();T(0,"li",37)(1,"div",38)(2,"input",39),ae("ngModelChange",function(r){return fe(he(e).$implicit.selected=r)}),I(),T(3,"a",40),ae("click",function(){const s=he(e).$implicit;return fe(J().openTaskDetailDialog(s))}),T(4,"div",41),F(5),I(),T(6,"div",42)(7,"span",43),F(8),I(),T(9,"span",44),F(10),I(),T(11,"span",45),F(12),I(),T(13,"span",46),F(14),Xt(15,"date"),I(),T(16,"span",47),F(17),Xt(18,"date"),I(),T(19,"span",48),F(20),I(),On(21,"span",49),I()()(),T(22,"ul",50),xe(23,qye,18,16,"li",51),I()()}if(2&n){const e=t.$implicit,i=J();j(2),W("ngModel",e.selected),j(3),nt(e.title),j(3),nt(i.getProjectName(e.projectId||"")),j(2),nt(e.status),j(1),W("ngClass",e.priority),j(1),nt(i.getPriorityLabel(e.priority)),j(2),nt(pi(15,12,e.startDateTime,"short")),j(3),nt(pi(18,15,e.endDateTime,"short")),j(3),nt(e.tag),j(1),wo("background-color",e.tagColor),j(2),W("ngForOf",e.subtasks)}}let Kye=(()=>{class n{constructor(e,i,r){this.taskService=e,this.projectService=i,this.dialog=r,this.tasks$=null,this.projects$=null,this.tasks=[],this.projects=[],this.tags=[],this.selectedTag="",this.selectedPriority="",this.selectedStatus="\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9",this.searchText="",this.sortOrder="startDateAsc"}ngOnInit(){this.tasks$=this.taskService.getTasks(),this.projects$=this.projectService.getProjects(),this.tasks$?.subscribe(e=>{e&&(this.tasks=e,this.tags=this.getTags())}),this.projects$?.subscribe(e=>{e&&(this.projects=e)})}filteredTasks(){const e=this.searchText.toLowerCase();return this.tasks.filter(i=>("\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"===this.selectedStatus||"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"===this.selectedStatus&&("\u672a\u7740\u624b"===i.status||"\u9032\u884c\u4e2d"===i.status)||this.selectedStatus===i.status)&&(i.title.toLowerCase().includes(e)||i.tag.toLowerCase().includes(e)||i.description.toLowerCase().includes(e)||i.subtasks.some(r=>r.title.toLowerCase().includes(e)||r.tag.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)))&&(""===this.selectedTag||i.tag===this.selectedTag||i.subtasks.some(r=>r.tag===this.selectedTag))&&(""===this.selectedPriority||i.priority===this.selectedPriority)).sort((i,r)=>this.compareTasks(i,r))}sortTasks(e){e&&(this.sortOrder=e),this.tasks.sort((i,r)=>this.compareTasks(i,r))}compareTasks(e,i){const r={high:1,medium:2,low:3,"":4},s=(l,c)=>{switch(c){case"startDateAsc":case"startDateDesc":return l.startDateTime?new Date(l.startDateTime).getTime():null;case"endDateAsc":case"endDateDesc":return l.endDateTime?new Date(l.endDateTime).getTime():null;default:return null}},o=s(e,this.sortOrder),a=s(i,this.sortOrder);return null!==o&&null!==a?o-a:null===o&&null===a?"priority"===this.sortOrder&&e.priority!==i.priority?r[e.priority]-r[i.priority]:0:null===o?1:-1}drop(e){tW(this.tasks,e.previousIndex,e.currentIndex),this.saveTasks()}getTags(){const e=new Set;return this.tasks.forEach(i=>{i.tag&&e.add(i.tag),i.subtasks.forEach(r=>{r.tag&&e.add(r.tag)})}),Array.from(e)}deleteSelectedTasks(){this.tasks=this.tasks.filter(e=>e.selected?(this.taskService.deleteTask(e),!1):(e.subtasks=e.subtasks.filter(i=>!i.selected),!0)),this.saveTasks()}getPriorityLabel(e){switch(e){case"low":return"\u4f4e";case"medium":return"\u4e2d";case"high":return"\u9ad8";default:return e}}getProjectName(e){const i=this.projects.find(r=>r.id===e);return i?i.name:""}openAddTaskDialog(){this.dialog.open(bP,{width:"400px"}).afterClosed().subscribe(i=>{i&&(this.tasks$=this.taskService.getTasks(),this.tasks$?.subscribe(r=>{r&&(this.tasks=r,this.tags=this.getTags())}))})}openAddProjectDialog(){this.dialog.open(U6,{width:"600px"}).afterClosed().subscribe(i=>{i&&(this.projects$=this.projectService.getProjects(),this.projects$?.subscribe(r=>{r&&(this.projects=r)}))})}openTaskDetailDialog(e){this.dialog.closeAll(),this.dialog.open(zy,{width:"600px",data:{task:e}}).afterClosed().subscribe(r=>{r&&(this.tasks=this.tasks.map(s=>s.id===r.id?r:s),this.saveTasks())})}openSubtaskDetailDialog(e,i){this.dialog.closeAll(),this.dialog.open($ye,{width:"400px",data:{subtask:e,task:i}}).afterClosed().subscribe(s=>{s&&(this.tasks=this.tasks.map(o=>o.id===i.id?i:o),this.saveTasks())})}saveTasks(){console.log("Tasks saved")}static#e=this.\u0275fac=function(i){return new(i||n)(K(th),K(eh),K(Ry))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-task-list"]],standalone:!0,features:[Wr],decls:85,vars:7,consts:[[1,"task-list-container"],[1,"task-actions"],[1,"add-task-btn",3,"click"],[1,"action-btn",3,"click"],[1,"task-filters"],[1,"filter-group"],["for","searchText"],["type","text","id","searchText","placeholder","\u30bf\u30b9\u30af\u3092\u691c\u7d22",1,"search-input",3,"ngModel","ngModelChange"],["for","sortPriority"],["id","sortPriority",1,"filter-btn",3,"click"],["for","sortDate"],["id","sortDate",1,"filter-select",3,"ngModel","ngModelChange","change"],["value","startDateAsc"],["value","startDateDesc"],["value","endDateAsc"],["value","endDateDesc"],["for","tagSelect"],["id","tagSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["for","prioritySelect"],["id","prioritySelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","low"],["value","medium"],["value","high"],["for","statusSelect"],["id","statusSelect",1,"filter-select",3,"ngModel","ngModelChange"],["value","\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"],["value","\u672a\u7740\u624b"],["value","\u9032\u884c\u4e2d"],["value","\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"],["value","\u5b8c\u4e86"],[1,"task-list"],[1,"task-header"],[1,"task-header-content"],[1,"task-header-item"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-item"],[1,"task-item-content"],["type","checkbox",1,"task-checkbox",3,"ngModel","ngModelChange"],[1,"task-link",3,"click"],[1,"task-title"],[1,"task-details"],[1,"task-project"],[1,"task-status"],[1,"task-priority",3,"ngClass"],[1,"task-start-date"],[1,"task-end-date"],[1,"task-tag"],[1,"task-tag-color"],[1,"subtask-list"],["class","subtask-item",4,"ngFor","ngForOf"],[1,"subtask-item"],[1,"subtask-item-content",3,"click"],["type","checkbox",1,"subtask-checkbox",3,"ngModel","ngModelChange","click"],[1,"subtask-title"],[1,"subtask-status"],[1,"subtask-priority",3,"ngClass"],[1,"subtask-start-date"],[1,"subtask-end-date"],[1,"subtask-tag"],[1,"subtask-tag-color"]],template:function(i,r){1&i&&(T(0,"div",0)(1,"div",1)(2,"button",2),ae("click",function(){return r.openAddTaskDialog()}),F(3,"\uff0b \u30bf\u30b9\u30af\u3092\u8ffd\u52a0"),I(),T(4,"button",3),ae("click",function(){return r.openAddProjectDialog()}),F(5,"\uff0b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0"),I(),T(6,"button",3),ae("click",function(){return r.deleteSelectedTasks()}),F(7,"\u9078\u629e\u3057\u305f\u30bf\u30b9\u30af\u3092\u524a\u9664"),I()(),T(8,"div",4)(9,"div",5)(10,"label",6),F(11,"\u691c\u7d22:"),I(),T(12,"input",7),ae("ngModelChange",function(o){return r.searchText=o}),I()(),T(13,"div",5)(14,"label",8),F(15,"\u512a\u5148\u5ea6\u3067\u30bd\u30fc\u30c8:"),I(),T(16,"button",9),ae("click",function(){return r.sortTasks("priority")}),F(17,"\u512a\u5148\u5ea6"),I()(),T(18,"div",5)(19,"label",10),F(20,"\u65e5\u6642\u3067\u30bd\u30fc\u30c8:"),I(),T(21,"select",11),ae("ngModelChange",function(o){return r.sortOrder=o})("change",function(){return r.sortTasks()}),T(22,"option",12),F(23,"\u958b\u59cb\u65e5\u6642\u306e\u65e9\u3044\u9806"),I(),T(24,"option",13),F(25,"\u958b\u59cb\u65e5\u6642\u306e\u9045\u3044\u9806"),I(),T(26,"option",14),F(27,"\u7d42\u4e86\u65e5\u6642\u306e\u65e9\u3044\u9806"),I(),T(28,"option",15),F(29,"\u7d42\u4e86\u65e5\u6642\u306e\u9045\u3044\u9806"),I()()(),T(30,"div",5)(31,"label",16),F(32,"\u30bf\u30b0:"),I(),T(33,"select",17),ae("ngModelChange",function(o){return r.selectedTag=o}),T(34,"option",18),F(35,"\u3059\u3079\u3066\u306e\u30bf\u30b0"),I(),xe(36,Wye,2,1,"option",19),I()(),T(37,"div",5)(38,"label",20),F(39,"\u512a\u5148\u5ea6:"),I(),T(40,"select",21),ae("ngModelChange",function(o){return r.selectedPriority=o}),T(41,"option",18),F(42,"\u3059\u3079\u3066\u306e\u512a\u5148\u5ea6"),I(),T(43,"option",22),F(44,"\u4f4e"),I(),T(45,"option",23),F(46,"\u4e2d"),I(),T(47,"option",24),F(48,"\u9ad8"),I()()(),T(49,"div",5)(50,"label",25),F(51,"\u30b9\u30c6\u30fc\u30bf\u30b9:"),I(),T(52,"select",26),ae("ngModelChange",function(o){return r.selectedStatus=o}),T(53,"option",27),F(54,"\u5168\u3066\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"),I(),T(55,"option",28),F(56,"\u672a\u7740\u624b"),I(),T(57,"option",29),F(58,"\u9032\u884c\u4e2d"),I(),T(59,"option",30),F(60,"\u672a\u7740\u624b\u3068\u9032\u884c\u4e2d"),I(),T(61,"option",31),F(62,"\u5b8c\u4e86"),I()()()(),T(63,"ul",32)(64,"li",33)(65,"div",34)(66,"span",35),F(67,"\u9078\u629e"),I(),T(68,"span",35),F(69,"\u30bf\u30a4\u30c8\u30eb"),I(),T(70,"span",35),F(71,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"),I(),T(72,"span",35),F(73,"\u30b9\u30c6\u30fc\u30bf\u30b9"),I(),T(74,"span",35),F(75,"\u512a\u5148\u5ea6"),I(),T(76,"span",35),F(77,"\u958b\u59cb\u65e5\u6642"),I(),T(78,"span",35),F(79,"\u7d42\u4e86\u65e5\u6642"),I(),T(80,"span",35),F(81,"\u30bf\u30b0"),I(),T(82,"span",35),F(83,"\u30bf\u30b0\u306e\u8272"),I()()(),xe(84,Gye,24,18,"li",36),I()()),2&i&&(j(12),W("ngModel",r.searchText),j(9),W("ngModel",r.sortOrder),j(12),W("ngModel",r.selectedTag),j(3),W("ngForOf",r.tags),j(4),W("ngModel",r.selectedPriority),j(12),W("ngModel",r.selectedStatus),j(32),W("ngForOf",r.filteredTasks()))},dependencies:[ir,ps,Sr,_0,Bs,Lp,Vp,so,Gc,Qc,oo,Vs,Dc,jye],styles:[".task-list-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.add-task-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer}.add-task-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%], .show-completed[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.filter-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#333;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.task-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-header[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-radius:4px;padding:10px;display:flex;align-items:center}.task-header-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 15% 5%;width:100%}.task-header-item[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-right:1px solid #ccc}.task-header-item[_ngcontent-%COMP%]:last-child{border-right:none}.task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:10px;padding:10px;display:flex;flex-direction:column}.task-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 10% 15% 15% 15% 5%;width:100%;align-items:center}.task-checkbox[_ngcontent-%COMP%]{text-align:center}.task-link[_ngcontent-%COMP%]{display:contents;text-decoration:none;color:inherit}.task-title[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;padding-right:10px}.task-details[_ngcontent-%COMP%]{display:contents}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.task-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.task-status[_ngcontent-%COMP%]{text-align:center}.task-priority.low[_ngcontent-%COMP%]{color:green}.task-priority.medium[_ngcontent-%COMP%]{color:orange}.task-priority.high[_ngcontent-%COMP%]{color:red}.task-due-date[_ngcontent-%COMP%], .task-tag[_ngcontent-%COMP%]{font-size:.9em;color:#555}.task-tag[_ngcontent-%COMP%]{display:inline-block;padding:2px 4px;border-radius:3px;background-color:transparent}.task-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:10px 0 0 20px}.subtask-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;margin-bottom:5px;padding:10px;display:flex;align-items:center}.subtask-item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:5% 15% 10% 10% 15% 15% 15% 15%;width:100%;align-items:center}.subtask-title[_ngcontent-%COMP%], .subtask-status[_ngcontent-%COMP%], .subtask-priority[_ngcontent-%COMP%], .subtask-start-date[_ngcontent-%COMP%], .subtask-end-date[_ngcontent-%COMP%], .subtask-tag[_ngcontent-%COMP%], .subtask-tag-color[_ngcontent-%COMP%]{text-align:center;border-right:1px solid #ccc;min-height:1em}.subtask-title[_ngcontent-%COMP%]{padding-right:10px}.subtask-tag-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid #000;margin:0 auto}.subtask-item-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}"]})}return n})();const Zye=function(){return["/register"]},Yye=function(){return["/reset-password"]};let Qye=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.password="",this.message=""}login(){this.authService.login(this.email,this.password).then(()=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u6210\u529f\u3057\u307e\u3057\u305f",this.router.navigate(["/"])}).catch(e=>{this.message="\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(K(Yo),K(Gr))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-login"]],standalone:!0,features:[Wr],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(T(0,"div")(1,"h2"),F(2,"\u30ed\u30b0\u30a4\u30f3"),I(),T(3,"form",0),ae("ngSubmit",function(){return r.login()}),T(4,"label",1),F(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),I(),T(6,"input",2),ae("ngModelChange",function(o){return r.email=o}),I(),T(7,"label",3),F(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),I(),T(9,"input",4),ae("ngModelChange",function(o){return r.password=o}),I(),T(10,"button",5),F(11,"\u30ed\u30b0\u30a4\u30f3"),I()(),T(12,"p"),F(13),I(),T(14,"p"),F(15,"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u5834\u5408\u306f\u3001"),T(16,"a",6),F(17,"\u3053\u3061\u3089"),I(),F(18,"\u304b\u3089\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),I(),T(19,"p")(20,"a",6),F(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),I()()()),2&i&&(j(6),W("ngModel",r.email),j(3),W("ngModel",r.password),j(4),nt(r.message),j(3),W("routerLink",Kn(5,Zye)),j(4),W("routerLink",Kn(6,Yye)))},dependencies:[Bs,Dy,so,oo,yy,Ud,Vs,Bd,ir,Dc,cd]})}return n})();const Xye=function(){return["/login"]},Jye=function(){return["/reset-password"]};let eve=(()=>{class n{constructor(e){this.authService=e,this.email="",this.password="",this.message=""}register(){this.authService.register(this.email,this.password).then(()=>{this.message="\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="auth/email-already-in-use"===e.code?"\u3059\u3067\u306b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059":"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(K(Yo))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-register"]],standalone:!0,features:[Wr],decls:22,vars:7,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(T(0,"div")(1,"h2"),F(2,"\u767b\u9332"),I(),T(3,"form",0),ae("ngSubmit",function(){return r.register()}),T(4,"label",1),F(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),I(),T(6,"input",2),ae("ngModelChange",function(o){return r.email=o}),I(),T(7,"label",3),F(8,"\u30d1\u30b9\u30ef\u30fc\u30c9:"),I(),T(9,"input",4),ae("ngModelChange",function(o){return r.password=o}),I(),T(10,"button",5),F(11,"\u767b\u9332"),I()(),T(12,"p"),F(13),I(),T(14,"p"),F(15,"\u65e2\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u306e\u5834\u5408\u306f\u3001"),T(16,"a",6),F(17,"\u3053\u3061\u3089"),I(),F(18,"\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),I(),T(19,"p")(20,"a",6),F(21,"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304a\u5fd8\u308c\u3067\u3059\u304b\uff1f"),I()()()),2&i&&(j(6),W("ngModel",r.email),j(3),W("ngModel",r.password),j(4),nt(r.message),j(3),W("routerLink",Kn(5,Xye)),j(4),W("routerLink",Kn(6,Jye)))},dependencies:[Bs,Dy,so,oo,yy,Ud,Vs,Bd,ir,Dc,cd]})}return n})();const tve=function(){return["/login"]};let nve=(()=>{class n{constructor(e,i){this.authService=e,this.router=i,this.email="",this.message=""}resetPassword(){this.authService.resetPassword(this.email).then(()=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}).catch(e=>{this.message="\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(K(Yo),K(Gr))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[Wr],decls:16,vars:4,consts:[[3,"ngSubmit"],["for","email"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["type","submit"],[3,"routerLink"]],template:function(i,r){1&i&&(T(0,"div")(1,"h2"),F(2,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a"),I(),T(3,"form",0),ae("ngSubmit",function(){return r.resetPassword()}),T(4,"label",1),F(5,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),I(),T(6,"input",2),ae("ngModelChange",function(o){return r.email=o}),I(),T(7,"button",3),F(8,"\u518d\u8a2d\u5b9a\u30ea\u30f3\u30af\u3092\u9001\u4fe1"),I()(),T(9,"p"),F(10),I(),T(11,"p"),F(12,"\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u623b\u308b\u5834\u5408\u306f\u3001"),T(13,"a",4),F(14,"\u3053\u3061\u3089"),I(),F(15,"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),I()()),2&i&&(j(6),W("ngModel",r.email),j(4),nt(r.message),j(3),W("routerLink",Kn(3,tve)))},dependencies:[Bs,Dy,so,oo,yy,Ud,Vs,Bd,ir,Dc,cd]})}return n})(),ive=(()=>{class n{constructor(e,i){this.authService=e,this.firestore=i,this.user={},this.profile={displayName:"",bio:"",email:"",company:"",position:"",team:""},this.userId="",this.message=""}ngOnInit(){this.authService.user$.subscribe(e=>{e&&(this.userId=e.uid,this.firestore.collection("users").doc(e.uid).valueChanges().subscribe(i=>{i&&"object"==typeof i?(this.user=e,this.profile={...i,displayName:e.displayName,email:e.email}):(this.user=e,this.profile={displayName:e.displayName,email:e.email,bio:"",company:"",position:"",team:""})}))})}updateProfile(){this.authService.updateProfile(this.profile.displayName,this.profile.bio,this.profile.company,this.profile.position,this.profile.team).then(()=>{this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u304c\u6210\u529f\u3057\u307e\u3057\u305f"}).catch(e=>{console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f",e),this.message="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f"})}static#e=this.\u0275fac=function(i){return new(i||n)(K(Yo),K(Pd))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-profile"]],standalone:!0,features:[Wr],decls:29,vars:8,consts:[[1,"profile-container"],[3,"ngSubmit"],["for","userId"],["type","text","name","userId","disabled","",3,"value"],["for","username"],["type","text","name","username","required","",3,"ngModel","ngModelChange"],["for","email"],["type","email","name","email","disabled","",3,"ngModel","ngModelChange"],["for","bio"],["name","bio",3,"ngModel","ngModelChange"],["for","company"],["type","text","name","company",3,"ngModel","ngModelChange"],["for","position"],["type","text","name","position",3,"ngModel","ngModelChange"],["for","team"],["type","text","name","team",3,"ngModel","ngModelChange"],["type","submit"]],template:function(i,r){1&i&&(T(0,"div",0)(1,"h2"),F(2,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"),I(),T(3,"form",1),ae("ngSubmit",function(){return r.updateProfile()}),T(4,"label",2),F(5,"\u30e6\u30fc\u30b6\u30fcID:"),I(),On(6,"input",3),T(7,"label",4),F(8,"\u30e6\u30fc\u30b6\u30fc\u540d:"),I(),T(9,"input",5),ae("ngModelChange",function(o){return r.profile.displayName=o}),I(),T(10,"label",6),F(11,"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9:"),I(),T(12,"input",7),ae("ngModelChange",function(o){return r.profile.email=o}),I(),T(13,"label",8),F(14,"\u81ea\u5df1\u7d39\u4ecb:"),I(),T(15,"textarea",9),ae("ngModelChange",function(o){return r.profile.bio=o}),I(),T(16,"label",10),F(17,"\u4f1a\u793e:"),I(),T(18,"input",11),ae("ngModelChange",function(o){return r.profile.company=o}),I(),T(19,"label",12),F(20,"\u5f79\u8077:"),I(),T(21,"input",13),ae("ngModelChange",function(o){return r.profile.position=o}),I(),T(22,"label",14),F(23,"\u90e8\u7f72\u307e\u305f\u306f\u30c1\u30fc\u30e0:"),I(),T(24,"input",15),ae("ngModelChange",function(o){return r.profile.team=o}),I(),T(25,"button",16),F(26,"\u66f4\u65b0"),I()(),T(27,"p"),F(28),I()()),2&i&&(j(6),W("value",r.userId),j(3),W("ngModel",r.profile.displayName),j(3),W("ngModel",r.profile.email),j(3),W("ngModel",r.profile.bio),j(3),W("ngModel",r.profile.company),j(3),W("ngModel",r.profile.position),j(3),W("ngModel",r.profile.team),j(4),nt(r.message))},dependencies:[Bs,Dy,so,oo,yy,Ud,Vs,Bd,ir,Dc],styles:[".profile-container[_ngcontent-%COMP%]{width:800px;max-width:100%;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:10px;background-color:#f9f9f9}h2[_ngcontent-%COMP%]{text-align:center;color:#333}form[_ngcontent-%COMP%]{display:block}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px;font-weight:700;color:#555}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{display:block;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#45a049}p[_ngcontent-%COMP%]{margin-top:20px;color:green;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:10px}"]})}return n})(),iu=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(){return this.authService.user$.pipe(zi(1),Fe(e=>!!e||(this.router.navigate(["/login"]),!1)))}static#e=this.\u0275fac=function(i){return new(i||n)(te(Yo),te(Gr))};static#t=this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tg(n){return n+.5|0}const Cl=(n,t,e)=>Math.max(Math.min(n,e),t);function Gy(n){return Cl(tg(2.55*n),0,255)}function ru(n){return Cl(tg(255*n),0,255)}function Dl(n){return Cl(tg(n/2.55)/100,0,1)}function uW(n){return Cl(tg(100*n),0,100)}const Ro={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},NP=[..."0123456789ABCDEF"],rve=n=>NP[15&n],sve=n=>NP[(240&n)>>4]+NP[15&n],sD=n=>(240&n)>>4==(15&n);const uve=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dW(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function dve(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function hve(n,t,e){const i=dW(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function FP(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=function fve(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}(e,i,r,u,s),l=60*l+.5),[0|l,c||0,a]}function LP(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ru)}function VP(n,t,e){return LP(dW,n,t,e)}function hW(n){return(n%360+360)%360}const fW={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pW={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let oD;const wve=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,BP=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,ng=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function aD(n,t,e){if(n){let i=FP(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,0===t?360:1)),i=VP(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function gW(n,t){return n&&Object.assign(t||{},n)}function mW(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ru(n[3]))):(t=gW(n,{r:0,g:0,b:0,a:1})).a=ru(t.a),t}function Tve(n){return"r"===n.charAt(0)?function Eve(n){const t=wve.exec(n);let i,r,s,e=255;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?Gy(o):Cl(255*o,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?Gy(i):Cl(i,0,255)),r=255&(t[4]?Gy(r):Cl(r,0,255)),s=255&(t[6]?Gy(s):Cl(s,0,255)),{r:i,g:r,b:s,a:e}}}(n):function mve(n){const t=uve.exec(n);let i,e=255;if(!t)return;t[5]!==i&&(e=t[6]?Gy(+t[5]):ru(+t[5]));const r=hW(+t[2]),s=+t[3]/100,o=+t[4]/100;return i="hwb"===t[1]?function pve(n,t,e){return LP(hve,n,t,e)}(r,s,o):"hsv"===t[1]?function gve(n,t,e){return LP(dve,n,t,e)}(r,s,o):VP(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}(n)}class ig{constructor(t){if(t instanceof ig)return t;const e=typeof t;let i;"object"===e?i=mW(t):"string"===e&&(i=function ave(n){var e,t=n.length;return"#"===n[0]&&(4===t||5===t?e={r:255&17*Ro[n[1]],g:255&17*Ro[n[2]],b:255&17*Ro[n[3]],a:5===t?17*Ro[n[4]]:255}:(7===t||9===t)&&(e={r:Ro[n[1]]<<4|Ro[n[2]],g:Ro[n[3]]<<4|Ro[n[4]],b:Ro[n[5]]<<4|Ro[n[6]],a:9===t?Ro[n[7]]<<4|Ro[n[8]]:255})),e}(t)||function bve(n){oD||(oD=function vve(){const n={},t=Object.keys(pW),e=Object.keys(fW);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,fW[s]);s=parseInt(pW[o],16),n[a]=[s>>16&255,s>>8&255,255&s]}return n}(),oD.transparent=[0,0,0,0]);const t=oD[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||Tve(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=gW(this._rgb);return t&&(t.a=Dl(t.a)),t}set rgb(t){this._rgb=mW(t)}rgbString(){return this._valid?function Cve(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Dl(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function cve(n){var t=(n=>sD(n.r)&&sD(n.g)&&sD(n.b)&&sD(n.a))(n)?rve:sve;return n?"#"+t(n.r)+t(n.g)+t(n.b)+((n,t)=>n<255?t(n):"")(n.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function yve(n){if(!n)return;const t=FP(n),e=t[0],i=uW(t[1]),r=uW(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Dl(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function Dve(n,t,e){const i=ng(Dl(n.r)),r=ng(Dl(n.g)),s=ng(Dl(n.b));return{r:ru(BP(i+e*(ng(Dl(t.r))-i))),g:ru(BP(r+e*(ng(Dl(t.g))-r))),b:ru(BP(s+e*(ng(Dl(t.b))-s))),a:n.a+e*(t.a-n.a)}}(this._rgb,t._rgb,e)),this}clone(){return new ig(this.rgb)}alpha(t){return this._rgb.a=ru(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=tg(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return aD(this._rgb,2,t),this}darken(t){return aD(this._rgb,2,-t),this}saturate(t){return aD(this._rgb,1,t),this}desaturate(t){return aD(this._rgb,1,-t),this}rotate(t){return function _ve(n,t){var e=FP(n);e[0]=hW(e[0]+t),e=VP(e),n.r=e[0],n.g=e[1],n.b=e[2]}(this._rgb,t),this}}function Tl(){}const Ive=(()=>{let n=0;return()=>n++})();function sn(n){return null===n||typeof n>"u"}function Xn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Kt(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function yi(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function ao(n,t){return yi(n)?n:t}function At(n,t){return typeof n>"u"?t:n}const _W=(n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Hn(n,t,e){if(n&&"function"==typeof n.call)return n.apply(e,t)}function En(n,t,e,i){let r,s,o;if(Xn(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Kt(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function lD(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function cD(n){if(Xn(n))return n.map(cD);if(Kt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=cD(n[e[r]]);return t}return n}function yW(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function Ave(n,t,e,i){if(!yW(n))return;const r=t[n],s=e[n];Kt(r)&&Kt(s)?Ky(r,s,i):t[n]=cD(s)}function Ky(n,t,e){const i=Xn(t)?t:[t],r=i.length;if(!Kt(n))return n;const s=(e=e||{}).merger||Ave;let o;for(let a=0;a<r;++a){if(o=i[a],!Kt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function Zy(n,t){return Ky(n,t,{merger:xve})}function xve(n,t,e){if(!yW(n))return;const i=t[n],r=e[n];Kt(i)&&Kt(r)?Zy(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=cD(r))}const vW={"":n=>n,x:n=>n.x,y:n=>n.y};function su(n,t){return(vW[t]||(vW[t]=function kve(n){const t=function Mve(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}(n);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t)))(n)}function jP(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Yy=n=>typeof n<"u",ou=n=>"function"==typeof n,bW=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0},Jn=Math.PI,ei=2*Jn,Pve=ei+Jn,uD=Number.POSITIVE_INFINITY,Ove=Jn/180,Fi=Jn/2,nh=Jn/4,wW=2*Jn/3,au=Math.log10,Na=Math.sign;function Qy(n,t,e){return Math.abs(n-t)<e}function EW(n){const t=Math.round(n);n=Qy(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(au(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function rg(n){return!isNaN(parseFloat(n))&&isFinite(n)}function CW(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function ea(n){return n*(Jn/180)}function UP(n){return n*(180/Jn)}function DW(n){if(!yi(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function TW(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*Jn&&(s+=ei),{angle:s,distance:r}}function HP(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Lve(n,t){return(n-t+Pve)%ei-Jn}function lo(n){return(n%ei+ei)%ei}function Xy(n,t,e,i){const r=lo(n),s=lo(t),o=lo(e),a=lo(s-r),l=lo(o-r),c=lo(r-s),u=lo(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function vr(n,t,e){return Math.max(t,Math.min(e,n))}function Il(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function zP(n,t,e){e=e||(o=>n[o]<t);let s,i=n.length-1,r=0;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const Sl=(n,t,e,i)=>zP(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),Bve=(n,t,e)=>zP(n,e,i=>n[i][t]>=e),IW=["push","pop","shift","splice","unshift"];function SW(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),!(i.length>0)&&(IW.forEach(s=>{delete n[s]}),delete n._chartjs)}function AW(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const xW=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function MW(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,xW.call(window,()=>{i=!1,n.apply(t,e)}))}}const $P=n=>"start"===n?"left":"end"===n?"right":"center",Jr=(n,t,e)=>"start"===n?t:"end"===n?e:(t+e)/2;function kW(n,t,e){const i=t.length;let r=0,s=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:f,maxDefined:m}=o.getUserBounds();f&&(r=vr(Math.min(Sl(a,l,c).lo,e?i:Sl(t,l,o.getPixelForValue(c)).lo),0,i-1)),s=m?vr(Math.max(Sl(a,o.axis,u,!0).hi+1,e?0:Sl(t,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function RW(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}const dD=n=>0===n||1===n,PW=(n,t,e)=>-Math.pow(2,10*(n-=1))*Math.sin((n-t)*ei/e),OW=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ei/e)+1,Jy={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*Fi),easeOutSine:n=>Math.sin(n*Fi),easeInOutSine:n=>-.5*(Math.cos(Jn*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>dD(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>dD(n)?n:PW(n,.075,.3),easeOutElastic:n=>dD(n)?n:OW(n,.075,.3),easeInOutElastic:n=>dD(n)?n:n<.5?.5*PW(2*n,.1125,.45):.5+.5*OW(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let t=1.70158;return(n/=.5)<1?n*n*((1+(t*=1.525))*n-t)*.5:.5*((n-=2)*n*((1+(t*=1.525))*n+t)+2)},easeInBounce:n=>1-Jy.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*Jy.easeInBounce(2*n):.5*Jy.easeOutBounce(2*n-1)+.5};function WP(n){if(n&&"object"==typeof n){const t=n.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function NW(n){return WP(n)?n:new ig(n)}function qP(n){return WP(n)?n:new ig(n).saturate(.5).darken(.1).hexString()}const $ve=["x","y","borderWidth","radius","tension"],Wve=["color","borderColor","backgroundColor"],FW=new Map;function ev(n,t,e){return function Kve(n,t){t=t||{};const e=n+JSON.stringify(t);let i=FW.get(e);return i||(i=new Intl.NumberFormat(n,t),FW.set(e,i)),i}(t,e).format(n)}const LW={values:n=>Xn(n)?n:""+n,numeric(n,t,e){if(0===n)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=function Zve(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}(n,e)}const o=au(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ev(n,i,l)},logarithmic(n,t,e){if(0===n)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(au(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?LW.numeric.call(this,n,t,e):""}};var hD={formatters:LW};const ih=Object.create(null),GP=Object.create(null);function tv(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function KP(n,t,e){return"string"==typeof t?Ky(tv(n,t),e):Ky(tv(n,""),t)}class Qve{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>qP(r.backgroundColor),this.hoverBorderColor=(i,r)=>qP(r.borderColor),this.hoverColor=(i,r)=>qP(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return KP(this,t,e)}get(t){return tv(this,t)}describe(t,e){return KP(GP,t,e)}override(t,e){return KP(ih,t,e)}route(t,e,i,r){const s=tv(this,t),o=tv(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[r];return Kt(l)?Object.assign({},c,l):At(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var vi=new Qve({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function qve(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),n.set("animations",{colors:{type:"color",properties:Wve},numbers:{type:"number",properties:$ve}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function Gve(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function Yve(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function fD(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function Jve(n,t,e,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,u,f,m;for(l=0;l<a;l++)if(f=e[l],null==f||Xn(f)){if(Xn(f))for(c=0,u=f.length;c<u;c++)m=f[c],null!=m&&!Xn(m)&&(o=fD(n,r,s,o,m))}else o=fD(n,r,s,o,f);n.restore();const y=s.length/2;if(y>e.length){for(l=0;l<y;l++)delete r[s[l]];s.splice(0,y)}return o}function rh(n,t,e){const i=n.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function VW(n,t){!t&&!n||((t=t||n.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function ZP(n,t,e,i){BW(n,t,e,i,null)}function BW(n,t,e,i,r){let s,o,a,l,c,u,f,m;const y=t.pointStyle,v=t.rotation,w=t.radius;let E=(v||0)*Ove;if(y&&"object"==typeof y&&(s=y.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(e,i),n.rotate(E),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),void n.restore();if(!(isNaN(w)||w<=0)){switch(n.beginPath(),y){default:r?n.ellipse(e,i,r/2,w,0,0,ei):n.arc(e,i,w,0,ei),n.closePath();break;case"triangle":u=r?r/2:w,n.moveTo(e+Math.sin(E)*u,i-Math.cos(E)*w),E+=wW,n.lineTo(e+Math.sin(E)*u,i-Math.cos(E)*w),E+=wW,n.lineTo(e+Math.sin(E)*u,i-Math.cos(E)*w),n.closePath();break;case"rectRounded":c=.516*w,l=w-c,o=Math.cos(E+nh)*l,f=Math.cos(E+nh)*(r?r/2-c:l),a=Math.sin(E+nh)*l,m=Math.sin(E+nh)*(r?r/2-c:l),n.arc(e-f,i-a,c,E-Jn,E-Fi),n.arc(e+m,i-o,c,E-Fi,E),n.arc(e+f,i+a,c,E,E+Fi),n.arc(e-m,i+o,c,E+Fi,E+Jn),n.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}E+=nh;case"rectRot":f=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,m=Math.sin(E)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+m,i-o),n.lineTo(e+f,i+a),n.lineTo(e-m,i+o),n.closePath();break;case"crossRot":E+=nh;case"cross":f=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,m=Math.sin(E)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"star":f=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,m=Math.sin(E)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o),E+=nh,f=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,m=Math.sin(E)*(r?r/2:w),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"line":o=r?r/2:Math.cos(E)*w,a=Math.sin(E)*w,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(E)*(r?r/2:w),i+Math.sin(E)*w);break;case!1:n.closePath()}n.fill(),t.borderWidth>0&&n.stroke()}}function Al(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function pD(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function gD(n){n.restore()}function ebe(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else"after"===r!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function tbe(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function ibe(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(e-s.actualBoundingBoxAscent+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function rbe(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function sh(n,t,e,i,r,s={}){const o=Xn(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(n.save(),n.font=r.string,function nbe(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),sn(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&rbe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),sn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),ibe(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function nv(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*Jn,Jn,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Jn,Fi,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Fi,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Fi,!0),n.lineTo(e+o.topLeft,i)}const sbe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,obe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function abe(n,t){const e=(""+n).match(sbe);if(!e||"normal"===e[1])return 1.2*t;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100}return t*n}const lbe=n=>+n||0;function YP(n,t){const e={},i=Kt(t),r=i?Object.keys(t):t,s=Kt(n)?i?o=>At(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=lbe(s(o));return e}function jW(n){return YP(n,{top:"y",right:"x",bottom:"y",left:"x"})}function oh(n){return YP(n,["topLeft","topRight","bottomLeft","bottomRight"])}function es(n){const t=jW(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function lr(n,t){let e=At((n=n||{}).size,(t=t||vi.font).size);"string"==typeof e&&(e=parseInt(e,10));let i=At(n.style,t.style);i&&!(""+i).match(obe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:At(n.family,t.family),lineHeight:abe(At(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:At(n.weight,t.weight),string:""};return r.string=function Xve(n){return!n||sn(n.size)||sn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(r),r}function iv(n,t,e,i){let s,o,a,r=!0;for(s=0,o=n.length;s<o;++s)if(a=n[s],void 0!==a&&(void 0!==t&&"function"==typeof a&&(a=a(t),r=!1),void 0!==e&&Xn(a)&&(a=a[e%a.length],r=!1),void 0!==a))return i&&!r&&(i.cacheable=!1),a}function lu(n,t){return Object.assign(Object.create(n),t)}function QP(n,t=[""],e,i,r=(()=>n[0])){const s=e||n;typeof i>"u"&&(i=WW("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>QP([a,...n],t,s,i)};return new Proxy(o,{deleteProperty:(a,l)=>(delete a[l],delete a._keys,delete n[0][l],!0),get:(a,l)=>HW(a,l,()=>function _be(n,t,e,i){let r;for(const s of t)if(r=WW(ube(s,n),e),typeof r<"u")return XP(n,r)?JP(e,i,n,r):r}(l,t,n,a)),getOwnPropertyDescriptor:(a,l)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(a,l)=>qW(a).includes(l),ownKeys:a=>qW(a),set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function sg(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:UW(n,i),setContext:s=>sg(n,s,e,i),override:s=>sg(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,a)=>HW(s,o,()=>function dbe(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return ou(a)&&o.isScriptable(t)&&(a=function hbe(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),XP(n,l)&&(l=JP(r._scopes,r,n,l)),l}(t,a,n,e)),Xn(a)&&a.length&&(a=function fbe(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(Kt(t[0])){const l=t,c=r._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=JP(c,r,n,u);t.push(sg(f,s,o&&o[n],a))}}return t}(t,a,n,o.isIndexable)),XP(t,a)&&(a=sg(a,r,s&&s[t],o)),a}(s,o,a)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,a)=>(n[o]=a,delete s[o],!0)})}function UW(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:ou(e)?e:()=>e,isIndexable:ou(i)?i:()=>i}}const ube=(n,t)=>n?n+jP(t):t,XP=(n,t)=>Kt(t)&&"adapters"!==n&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function HW(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||"constructor"===t)return n[t];const i=e();return n[t]=i,i}function zW(n,t,e){return ou(n)?n(t,e):n}const pbe=(n,t)=>!0===n?t:"string"==typeof n?su(t,n):void 0;function gbe(n,t,e,i,r){for(const s of t){const o=pbe(e,s);if(o){n.add(o);const a=zW(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(!1===o&&typeof i<"u"&&e!==i)return null}return!1}function JP(n,t,e,i){const r=t._rootScopes,s=zW(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=$W(a,o,e,s||e,i);return!(null===l||typeof s<"u"&&s!==e&&(l=$W(a,o,s,l,i),null===l))&&QP(Array.from(a),[""],r,s,()=>function mbe(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Xn(r)&&Kt(e)?e:r||{}}(t,e,i))}function $W(n,t,e,i,r){for(;e;)e=gbe(n,t,e,i,r);return e}function WW(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function qW(n){let t=n._keys;return t||(t=n._keys=function ybe(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}(n._scopes)),t}function GW(n,t,e,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+e,u=t[c],o[a]={r:r.parse(su(u,s),c)};return o}const vbe=Number.EPSILON||1e-14,og=(n,t)=>t<n.length&&!n[t].skip&&n[t],KW=n=>"x"===n?"y":"x";function bbe(n,t,e,i){const r=n.skip?t:n,s=t,o=e.skip?t:e,a=HP(s,r),l=HP(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=i*c,m=i*u;return{previous:{x:s.x-f*(o.x-r.x),y:s.y-f*(o.y-r.y)},next:{x:s.x+m*(o.x-r.x),y:s.y+m*(o.y-r.y)}}}function mD(n,t,e){return Math.max(Math.min(n,e),t)}function Tbe(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),"monotone"===t.cubicInterpolationMode)!function Cbe(n,t="x"){const e=KW(t),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=og(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=og(n,o+1),l){if(c){const u=c[t]-l[t];r[o]=0!==u?(c[e]-l[e])/u:0}s[o]=a?c?Na(r[o-1])!==Na(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function wbe(n,t,e){const i=n.length;let r,s,o,a,l,c=og(n,0);for(let u=0;u<i-1;++u)if(l=c,c=og(n,u+1),l&&c){if(Qy(t[u],0,vbe)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=r*o*t[u],e[u+1]=s*o*t[u])}})(n,r,s),function Ebe(n,t,e="x"){const i=KW(e),r=n.length;let s,o,a,l=og(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=og(n,c+1),!a)continue;const u=a[e],f=a[i];o&&(s=(u-o[e])/3,a[`cp1${e}`]=u-s,a[`cp1${i}`]=f-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${i}`]=f+s*t[c])}}(n,s,t)}(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=bbe(c,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&function Dbe(n,t){let e,i,r,s,o,a=Al(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&Al(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=mD(r.cp1x,t.left,t.right),r.cp1y=mD(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=mD(r.cp2x,t.left,t.right),r.cp2y=mD(r.cp2y,t.top,t.bottom)))}(n,e)}function e1(){return typeof window<"u"&&typeof document<"u"}function t1(n){let t=n.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function _D(n,t,e){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*t.parentNode[e])):i=n,i}const yD=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),Sbe=["top","right","bottom","left"];function ah(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=Sbe[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Abe=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function lh(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=yD(e),s="border-box"===r.boxSizing,o=ah(r,"padding"),a=ah(r,"border","width"),{x:l,y:c,box:u}=function xbe(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let a,l,o=!1;if(Abe(r,s,n.target))a=r,l=s;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}(n,e),f=o.left+(u&&a.left),m=o.top+(u&&a.top);let{width:y,height:v}=t;return s&&(y-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/y*e.width/i),y:Math.round((c-m)/v*e.height/i)}}const vD=n=>Math.round(10*n)/10;function ZW(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0)}const Rbe=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};e1()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function YW(n,t){const e=function Ibe(n,t){return yD(n).getPropertyValue(t)}(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ch(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Pbe(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:"middle"===i?e<.5?n.y:t.y:"after"===i?e<1?n.y:t.y:e>0?t.y:n.y}}function Obe(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=ch(n,r,e),a=ch(r,s,e),l=ch(s,t,e),c=ch(o,a,e),u=ch(a,l,e);return ch(c,u,e)}function ag(n,t,e){return n?function(n,t){return{x:e=>n+n+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,i)=>e-i,leftForLtr:(e,i)=>e-i}}(t,e):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,t)=>n+t,leftForLtr:(n,t)=>n}}function QW(n,t){let e,i;("ltr"===t||"rtl"===t)&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function XW(n,t){void 0!==t&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function JW(n){return"angle"===n?{between:Xy,compare:Lve,normalize:lo}:{between:Il,compare:(t,e)=>t-e,normalize:t=>t}}function e8({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e==0,style:r}}function t8(n,t,e){if(!e)return[n];const{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=JW(i),{start:u,end:f,loop:m,style:y}=function Lbe(n,t,e){const{property:i,start:r,end:s}=e,{between:o,normalize:a}=JW(i),l=t.length;let m,y,{start:c,end:u,loop:f}=n;if(f){for(c+=l,u+=l,m=0,y=l;m<y&&o(a(t[c%l][i]),r,s);++m)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:n.style}}(n,t,e),v=[];let k,S,R,w=!1,E=null;for(let M=u,P=u;M<=f;++M)S=t[M%o],!S.skip&&(k=c(S[i]),k!==R&&(w=l(k,r,s),null===E&&(w||l(r,R,k)&&0!==a(r,R))&&(E=0===a(k,r)?M:P),null!==E&&(!w||0===a(s,k)||l(s,R,k))&&(v.push(e8({start:E,end:M,loop:m,count:o,style:y})),E=null),P=M,R=k));return null!==E&&v.push(e8({start:E,end:f,loop:m,count:o,style:y})),v}function n8(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const s=t8(i[r],n.points,t);s.length&&e.push(...s)}return e}function r8(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Hbe(n,t){if(!t)return!1;const e=[],i=function(r,s){return WP(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}class zbe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.duration;e.listeners[r].forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=xW.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let l,o=s.length-1,a=!1;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xl=new zbe;const s8="transparent",$be={boolean:(n,t,e)=>e>.5?t:n,color(n,t,e){const i=NW(n||s8),r=i.valid&&NW(t||s8);return r&&r.valid?r.mix(i,e).hexString():t},number:(n,t,e)=>n+(t-n)*e};class Wbe{constructor(t,e,i,r){const s=e[i];r=iv([t.to,r,s,t.from]);const o=iv([t.from,s,r]);this._active=!0,this._fn=t.fn||$be[t.type||typeof o],this._easing=Jy[t.easing]||Jy.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=iv([t.to,e,r,t.from]),this._from=iv([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||e<i),!this._active)return this._target[r]=a,void this._notify(!0);e<0?this._target[r]=s:(l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class o8{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Kt(t))return;const e=Object.keys(vi.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Kt(s))return;const o={};for(const a of e)o[a]=s[a];(Xn(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=function Gbe(n,t){if(!t)return;let e=n.options;if(e)return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;n.options=t}(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&function qbe(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(t,e));continue}const u=e[c];let f=s[c];const m=i.get(c);if(f){if(m&&f.active()){f.update(m,u,a);continue}f.cancel()}m&&m.duration?(s[c]=f=new Wbe(m,t,c,u),r.push(f)):t[c]=u}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(xl.add(this._chart,i),!0):void 0}}function a8(n,t){const e=n&&n.options||{},i=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:i?s:r,end:i?r:s}}function l8(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function c8(n,t,e,i={}){const r=n.keys,s="single"===i.mode;let o,a,l,c;if(null!==t){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(i.all)continue;break}c=n.values[l],yi(c)&&(s||0===t||Na(t)===Na(c))&&(t+=c)}return t}}function u8(n,t){const e=n&&n.options.stacked;return e||void 0===e&&void 0!==t.stack}function Jbe(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function d8(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function h8(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function Qbe(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}(s,o,i),f=t.length;let m;for(let y=0;y<f;++y){const v=t[y],{[l]:w,[c]:E}=v;m=(v._stacks||(v._stacks={}))[c]=Jbe(r,u,w),m[a]=E,m._top=d8(m,o,!0,i.type),m._bottom=d8(m,o,!1,i.type),(m._visualValues||(m._visualValues={}))[a]=E}}function n1(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function rv(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[i]||void 0===s[i][e])return;delete s[i][e],void 0!==s[i]._visualValues&&void 0!==s[i]._visualValues[e]&&delete s[i]._visualValues[e]}}}const r1=n=>"reset"===n||"none"===n,f8=(n,t)=>t?n:Object.assign({},n);let cu=(()=>class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=u8(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(m,y,v,w)=>"x"===m?y:"r"===m?w:v,o=i.xAxisID=At(r.xAxisID,n1(e,"x")),a=i.yAxisID=At(r.yAxisID,n1(e,"y")),l=i.rAxisID=At(r.rAxisID,n1(e,"r")),c=i.indexAxis,u=i.iAxisID=s(c,o,a,l),f=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&SW(this._data,this),e._stacked&&rv(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(Kt(i))this._data=function Ybe(n,t){const{iScale:e,vScale:i}=t,r="x"===e.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}(i,this._cachedMeta);else if(r!==i){if(r){SW(r,this);const s=this._cachedMeta;rv(s),s._parsed=[]}i&&Object.isExtensible(i)&&function Uve(n,t){n._chartjs?n._chartjs.listeners.push(t):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),IW.forEach(e=>{const i="_onData"+jP(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...s)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=u8(i.vScale,i),i.stack!==r.stack&&(s=!0,rv(i),i.stack=r.stack),this._resyncElements(e),(s||o!==i._stacked)&&h8(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis;let f,m,y,c=0===e&&i===s.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,y=s;else{y=Xn(s[e])?this.parseArrayData(r,s,e,i):Kt(s[e])?this.parseObjectData(r,s,e,i):this.parsePrimitiveData(r,s,e,i);const v=()=>null===m[l]||u&&m[l]<u[l];for(f=0;f<i;++f)r._parsed[f+e]=m=y[f],c&&(v()&&(c=!1),u=m);r._sorted=c}a&&h8(this,y)}parsePrimitiveData(e,i,r,s){const{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),f=o===a,m=new Array(s);let y,v,w;for(y=0,v=s;y<v;++y)w=y+r,m[y]={[l]:f||o.parse(u[w],w),[c]:a.parse(i[w],w)};return m}parseArrayData(e,i,r,s){const{xScale:o,yScale:a}=e,l=new Array(s);let c,u,f,m;for(c=0,u=s;c<u;++c)f=c+r,m=i[f],l[c]={x:o.parse(m[0],f),y:a.parse(m[1],f)};return l}parseObjectData(e,i,r,s){const{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let f,m,y,v;for(f=0,m=s;f<m;++f)y=f+r,v=i[y],u[f]={x:o.parse(su(v,l),y),y:a.parse(su(v,c),y)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){const o=this._cachedMeta,a=i[e.axis];return c8({keys:l8(this.chart,!0),values:i._stacks[e.axis]._visualValues},a,o.index,{mode:r})}updateRangeFromParsed(e,i,r,s){const o=r[i.axis];let a=null===o?NaN:o;const l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=c8(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,a=s.length,l=this._getOtherScale(e),c=((n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:l8(this.chart,!0),values:null})(i,r),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=function Xbe(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(l);let y,v;function w(){v=s[y];const E=v[l.axis];return!yi(v[e.axis])||f>E||m<E}for(y=0;y<a&&(w()||(this.updateRangeFromParsed(u,e,v,c),!o));++y);if(o)for(y=a-1;y>=0;--y)if(!w()){this.updateRangeFromParsed(u,e,v,c);break}return u}getAllParsedValues(e){const i=this._cachedMeta._parsed,r=[];let s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][e.axis],yi(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=function Zbe(n){let t,e,i,r;return Kt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:!1===n}}(At(this.options.clip,function Kbe(n,t,e){if(!1===e)return!1;const i=a8(n,e),r=a8(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,o,l,c),f=l;f<l+c;++f){const m=s[f];m.hidden||(m.active&&u?a.push(m):m.draw(e,o))}for(f=0;f<a.length;++f)a[f].draw(e,o)}getStyle(e,i){const r=i?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];o=a.$context||(a.$context=function twe(n,t,e){return lu(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function ewe(n,t){return lu(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){const s="active"===i,o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&Yy(r);if(l)return f8(l,c);const u=this.chart.config,f=u.datasetElementScopeKeys(this._type,e),m=s?[`${e}Hover`,"hover",e,""]:[e,""],y=u.getOptionScopes(this.getDataset(),f),v=Object.keys(vi.elements[e]),E=u.resolveNamedOptions(y,v,()=>this.getContext(r,s,i),m);return E.$shared&&(E.$shared=c,o[a]=Object.freeze(f8(E,c))),E}_resolveAnimations(e,i,r){const s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==s.options.animation){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,i),y=f.getOptionScopes(this.getDataset(),m);c=f.createResolver(y,this.getContext(e,r,i))}const u=new o8(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||r1(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(e,i,r,s){r1(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!r1(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,r=!0){const s=this._cachedMeta,o=s.data,a=e+i;let l;const c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,i),r&&this.updateElements(o,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,i);r._stacked&&rv(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}})();function rwe(n){const t=n.iScale,e=function iwe(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=AW(i.sort((r,s)=>r-s))}return n._cache.$bar}(t,n.type);let r,s,o,a,i=t._length;const l=()=>{32767===o||-32768===o||(Yy(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function p8(n,t,e,i){return Xn(n)?function awe(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(n,t,e,i):t[e.axis]=e.parse(n,i),t}function g8(n,t,e,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,f,m;for(c=e,u=e+i;c<u;++c)m=t[c],f={},f[r.axis]=a||r.parse(o[c],c),l.push(p8(m,f,s,c));return l}function s1(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function uwe(n,t,e,i){let r=t.borderSkipped;const s={};if(!r)return void(n.borderSkipped=s);if(!0===r)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function cwe(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}(n);"middle"===r&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[m8(u,o,a,l)]=!0,r=c)),s[m8(r,o,a,l)]=!0,n.borderSkipped=s}function m8(n,t,e,i){return i?(n=function dwe(n,t,e){return n===t?e:n===e?t:n}(n,t,e),n=_8(n,e,t)):n=_8(n,t,e),n}function _8(n,t,e){return"start"===n?t:"end"===n?e:n}function hwe(n,{inflateAmount:t},e){n.inflateAmount="auto"===t?1===e?.33:0:t}let fwe=(()=>class n extends cu{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,s){return g8(e,i,r,s)}parseArrayData(e,i,r,s){return g8(e,i,r,s)}parseObjectData(e,i,r,s){const{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u="x"===o.axis?l:c,f="x"===a.axis?l:c,m=[];let y,v,w,E;for(y=r,v=r+s;y<v;++y)E=i[y],w={},w[o.axis]=o.parse(su(E,u),y),m.push(p8(su(E,f),w,a,y));return m}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);const o=r._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(e),a=o._custom,l=s1(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){const o="reset"===s,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),f=this._getRuler(),{sharedOptions:m,includeOptions:y}=this._getSharedOptions(i,s);for(let v=i;v<i+r;v++){const w=this.getParsed(v),E=o||sn(w[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(v),k=this._calculateBarIndexPixels(v,f),S=(w._stacks||{})[l.axis],R={horizontal:u,base:E.base,enableBorderRadius:!S||s1(w._custom)||a===S._top||a===S._bottom,x:u?E.head:k.center,y:u?k.center:E.head,height:u?k.size:Math.abs(E.size),width:u?Math.abs(E.size):k.size};y&&(R.options=m||this.resolveDataElementOptions(v,e[v].active?"active":s));const z=R.options||e[v].options;uwe(R,z,S,a),hwe(R,z,f.ratio),this.updateElement(e[v],v,R,s)}}_getStacks(e,i){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=r.options.stacked,a=[],l=c=>{const u=c.controller.getParsed(i),f=u&&u[c.vScale.axis];if(sn(f)||isNaN(f))return!0};for(const c of s)if((void 0===i||!l(c))&&((!1===o||-1===a.indexOf(c.stack)||void 0===o&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,r){const s=this._getStacks(e,r),o=void 0!==i?s.indexOf(i):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,r=i.iScale,s=[];let o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const l=e.barThickness;return{min:l||rwe(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),u=c._custom,f=s1(u);let w,E,m=c[i.axis],y=0,v=r?this.applyStack(i,c,r):m;v!==m&&(y=v-m,v=m),f&&(m=u.barStart,v=u.barEnd-u.barStart,0!==m&&Na(m)!==Na(u.barEnd)&&(y=0),y+=m);const k=sn(o)||f?y:o;let S=i.getPixelForValue(k);if(w=this.chart.getDataVisibility(e)?i.getPixelForValue(y+v):S,E=w-S,Math.abs(E)<a){E=function lwe(n,t,e){return 0!==n?Na(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(E,i,l)*a,m===l&&(S-=E/2);const R=i.getPixelForDecimal(0),z=i.getPixelForDecimal(1),q=Math.min(R,z),ee=Math.max(R,z);S=Math.max(Math.min(S,ee),q),w=S+E,r&&!f&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(w)-i.getValueForPixel(S))}if(S===i.getPixelForValue(l)){const R=Na(E)*i.getLineWidthForValue(l)/2;S+=R,E-=R}return{size:E,base:S,head:w,center:w+E/2}}_calculateBarIndexPixels(e,i){const r=i.scale,s=this.options,o=s.skipNull,a=At(s.maxBarThickness,1/0);let l,c;if(i.grouped){const u=o?this._getStackCount(e):i.stackCount,f="flex"===s.barThickness?function owe(n,t,e,i){const r=t.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}(e,i,s,u):function swe(n,t,e,i){const r=e.barThickness;let s,o;return sn(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}(e,i,s,u),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=f.start+f.chunk*m+f.chunk/2,c=Math.min(a,f.chunk*f.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[i.axis]&&!r[o].hidden&&r[o].draw(this._ctx)}})(),pwe=(()=>class n extends cu{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){const o=super.parsePrimitiveData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(e,i,r,s){const o=super.parseArrayData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=At(i[r+a][2],this.resolveDataElementOptions(a+r).radius);return o}parseObjectData(e,i,r,s){const o=super.parseObjectData(e,i,r,s);for(let a=0;a<o.length;a++){const l=i[r+a];o[a]._custom=At(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:r[e]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),f=a.axis,m=l.axis;for(let y=i;y<i+r;y++){const v=e[y],w=!o&&this.getParsed(y),E={},k=E[f]=o?a.getPixelForDecimal(.5):a.getPixelForValue(w[f]),S=E[m]=o?l.getBasePixel():l.getPixelForValue(w[m]);E.skip=isNaN(k)||isNaN(S),u&&(E.options=c||this.resolveDataElementOptions(y,v.active?"active":s),o&&(E.options.radius=0)),this.updateElement(v,y,E,s)}}resolveDataElementOptions(e,i){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==i&&(s.radius=0),s.radius+=At(r&&r._custom,o),s}})(),o1=(()=>class n extends cu{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let a,l,o=c=>+r[c];if(Kt(r[e])){const{key:c="value"}=this._parsing;o=u=>+su(r[u],c)}for(a=e,l=e+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return ea(this.options.rotation-90)}_getCircumference(){return ea(this.options.circumference)}_getRotationExtents(){let e=ei,i=-ei;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(((n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/t)(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:y,ratioY:v,offsetX:w,offsetY:E}=function gwe(n,t,e){let i=1,r=1,s=0,o=0;if(t<ei){const a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),m=Math.sin(l),y=(R,z,q)=>Xy(R,a,l,!0)?1:Math.max(z,z*e,q,q*e),v=(R,z,q)=>Xy(R,a,l,!0)?-1:Math.min(z,z*e,q,q*e),w=y(0,c,f),E=y(Fi,u,m),k=v(Jn,c,f),S=v(Jn+Fi,u,m);i=(w-k)/2,r=(E-S)/2,s=-(w+k)/2,o=-(E+S)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(m,f,c),R=Math.max(Math.min((r.width-a)/y,(r.height-a)/v)/2,0),z=_W(this.options.radius,R),ee=(z-Math.max(z*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=w*z,this.offsetY=E*z,s.total=this.calculateTotal(),this.outerRadius=z-ee*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ee*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/ei)}updateElements(e,i,r,s){const o="reset"===s,a=this.chart,l=a.chartArea,f=(l.left+l.right)/2,m=(l.top+l.bottom)/2,y=o&&a.options.animation.animateScale,v=y?0:this.innerRadius,w=y?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(i,s);let R,S=this._getRotation();for(R=0;R<i;++R)S+=this._circumference(R,o);for(R=i;R<i+r;++R){const z=this._circumference(R,o),q=e[R],ee={x:f+this.offsetX,y:m+this.offsetY,startAngle:S,endAngle:S+z,circumference:z,outerRadius:w,innerRadius:v};k&&(ee.options=E||this.resolveDataElementOptions(R,q.active?"active":s)),S+=z,this.updateElement(q,R,ee,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let s,r=0;for(s=0;s<i.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?ei*(Math.abs(e)/i):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=ev(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const r=this.chart;let s,o,a,l,c;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,l=a.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(At(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}})(),mwe=(()=>class n extends cu{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=kW(i,s,a);this._drawStart=l,this._drawCount=c,RW(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(i,s),y=a.axis,v=l.axis,{spanGaps:w,segment:E}=this.options,k=rg(w)?w:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||o||"none"===s,R=i+r,z=e.length;let q=i>0&&this.getParsed(i-1);for(let ee=0;ee<z;++ee){const N=e[ee],M=S?N:{};if(ee<i||ee>=R){M.skip=!0;continue}const P=this.getParsed(ee),U=sn(P[v]),V=M[y]=a.getPixelForValue(P[y],ee),H=M[v]=o||U?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,P,c):P[v],ee);M.skip=isNaN(V)||isNaN(H)||U,M.stop=ee>0&&Math.abs(P[y]-q[y])>k,E&&(M.parsed=P,M.raw=u.data[ee]),m&&(M.options=f||this.resolveDataElementOptions(ee,N.active?"active":s)),S||this.updateElement(N,ee,M,s),q=P}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}})(),y8=(()=>class n extends cu{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=ev(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,r,s){return GW.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),l=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,r,s){const o="reset"===s,a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,f=u.xCenter,m=u.yCenter,y=u.getIndexAngle(0)-.5*Jn;let w,v=y;const E=360/this.countVisibleElements();for(w=0;w<i;++w)v+=this._computeAngle(w,s,E);for(w=i;w<i+r;w++){const k=e[w];let S=v,R=v+this._computeAngle(w,s,E),z=a.getDataVisibility(w)?u.getDistanceFromCenterForValue(this.getParsed(w).r):0;v=R,o&&(c.animateScale&&(z=0),c.animateRotate&&(S=R=y));const q={x:f,y:m,innerRadius:0,outerRadius:z,startAngle:S,endAngle:R,options:this.resolveDataElementOptions(w,k.active?"active":s)};this.updateElement(k,w,q,s)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?ea(this.resolveDataElementOptions(e,i).angle||r):0}})();var _we=Object.freeze({__proto__:null,BarController:fwe,BubbleController:pwe,DoughnutController:o1,LineController:mwe,PieController:(()=>class n extends o1{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}})(),PolarAreaController:y8,RadarController:(()=>class n extends cu{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return GW.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,"resize"!==e){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:a},e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){const o=this._cachedMeta.rScale,a="reset"===s;for(let l=i;l<i+r;l++){const c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":s),f=o.getPointPositionForValue(l,this.getParsed(l).r),m=a?o.xCenter:f.x,y=a?o.yCenter:f.y,v={x:m,y,angle:f.angle,skip:isNaN(m)||isNaN(y),options:u};this.updateElement(c,l,v,s)}}})(),ScatterController:(()=>class n extends cu{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){const i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:a}=kW(i,r,s);if(this._drawStart=o,this._drawCount=a,RW(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,f=this.resolveDataElementOptions(i,s),m=this.getSharedOptions(f),y=this.includeOptions(s,m),v=a.axis,w=l.axis,{spanGaps:E,segment:k}=this.options,S=rg(E)?E:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||"none"===s;let z=i>0&&this.getParsed(i-1);for(let q=i;q<i+r;++q){const ee=e[q],N=this.getParsed(q),M=R?ee:{},P=sn(N[w]),U=M[v]=a.getPixelForValue(N[v],q),V=M[w]=o||P?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[w],q);M.skip=isNaN(U)||isNaN(V)||P,M.stop=q>0&&Math.abs(N[v]-z[v])>S,k&&(M.parsed=N,M.raw=u.data[q]),y&&(M.options=m||this.resolveDataElementOptions(q,ee.active?"active":s)),R||this.updateElement(ee,q,M,s),z=N}this.updateSharedOptions(m,s,f)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}})()});function uh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class a1{static override(t){Object.assign(a1.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return uh()}parse(){return uh()}format(){return uh()}add(){return uh()}diff(){return uh()}startOf(){return uh()}endOf(){return uh()}}var ywe__date=a1;function vwe(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const l=a._reversePixels?Bve:Sl;if(!i)return l(s,t,e);if(r._sharedOptions){const c=s[0],u="function"==typeof c.getRange&&c.getRange(t);if(u){const f=l(s,t,e-u),m=l(s,t,e+u);return{lo:f.lo,hi:m.hi}}}}return{lo:0,hi:s.length-1}}function sv(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:m}=vwe(s[a],t,o,r);for(let y=f;y<=m;++y){const v=u[y];v.skip||i(v,c,y)}}}function l1(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||sv(n,e,t,function(a,l,c){!r&&!Al(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function c1(n,t,e,i,r,s){return s||n.isPointInArea(t)?"r"!==e||i?function Ewe(n,t,e,i,r,s){let o=[];const a=function bwe(n){const t=-1!==n.indexOf("x"),e=-1!==n.indexOf("y");return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let l=Number.POSITIVE_INFINITY;return sv(n,e,t,function c(u,f,m){const y=u.inRange(t.x,t.y,r);if(i&&!y)return;const v=u.getCenterPoint(r);if(!s&&!n.isPointInArea(v)&&!y)return;const E=a(t,v);E<l?(o=[{element:u,datasetIndex:f,index:m}],l=E):E===l&&o.push({element:u,datasetIndex:f,index:m})}),o}(n,t,e,i,r,s):function wwe(n,t,e,i){let r=[];return sv(n,e,t,function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:f}=TW(o,{x:t.x,y:t.y});Xy(f,c,u)&&r.push({element:o,datasetIndex:a,index:l})}),r}(n,t,e,r):[]}function v8(n,t,e,i,r){const s=[],o="x"===e?"inXRange":"inYRange";let a=!1;return sv(n,e,t,(l,c,u)=>{l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var Cwe={evaluateInteractionItems:sv,modes:{index(n,t,e,i){const r=lh(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?l1(n,r,s,i,o):c1(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){const r=lh(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?l1(n,r,s,i,o):c1(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point:(n,t,e,i)=>l1(n,lh(t,n),e.axis||"xy",i,e.includeInvisible||!1),nearest:(n,t,e,i)=>c1(n,lh(t,n),e.axis||"xy",e.intersect,i,e.includeInvisible||!1),x:(n,t,e,i)=>v8(n,lh(t,n),"x",e.intersect,i),y:(n,t,e,i)=>v8(n,lh(t,n),"y",e.intersect,i)}};const b8=["left","top","right","bottom"];function ov(n,t){return n.filter(e=>e.pos===t)}function w8(n,t){return n.filter(e=>-1===b8.indexOf(e.pos)&&e.box.axis===t)}function av(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function E8(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function C8(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Awe(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!Kt(r)){e.size&&(n[r]-=e.size);const f=i[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?s.height:s.width),e.size=f.size/f.count,n[r]+=e.size}s.getPadding&&C8(o,s.getPadding());const a=Math.max(0,t.outerWidth-E8(o,n,"left","right")),l=Math.max(0,t.outerHeight-E8(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function Mwe(n,t){const e=t.maxPadding;return function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(n?["left","right"]:["top","bottom"])}function lv(n,t,e,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Mwe(a.horizontal,t));const{same:f,other:m}=Awe(t,e,a,i);c|=f&&r.length,u=u||m,l.fullSize||r.push(a)}return c&&lv(r,t,e,i)||u}function bD(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function D8(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,m=c.size||l.height;Yy(c.start)&&(o=c.start),l.fullSize?bD(l,r.left,o,e.outerWidth-r.right-r.left,m):bD(l,t.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*u,m=c.size||l.width;Yy(c.start)&&(s=c.start),l.fullSize?bD(l,s,r.top,m,e.outerHeight-r.bottom-r.top):bD(l,s,t.top+c.placed,m,f),c.start=s,c.placed+=f,s=l.right}}t.x=s,t.y=o}var ts={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;-1!==e&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=es(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=function Swe(n){const t=function Dwe(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(n),e=av(t.filter(c=>c.box.fullSize),!0),i=av(ov(t,"left"),!0),r=av(ov(t,"right")),s=av(ov(t,"top"),!0),o=av(ov(t,"bottom")),a=w8(t,"x"),l=w8(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ov(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(n.boxes),l=a.vertical,c=a.horizontal;En(n.boxes,w=>{"function"==typeof w.beforeLayout&&w.beforeLayout()});const u=l.reduce((w,E)=>E.box.options&&!1===E.box.options.display?w:w+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},r);C8(m,es(i));const y=Object.assign({maxPadding:m,w:s,h:o,x:r.left,y:r.top},r),v=function Iwe(n,t){const e=function Twe(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!b8.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}(l.concat(c),f);lv(a.fullSize,y,f,v),lv(l,y,f,v),lv(c,y,f,v)&&lv(l,y,f,v),function xwe(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}(y),D8(a.leftAndTop,y,f,v),y.x+=y.w,y.y+=y.h,D8(a.rightAndBottom,y,f,v),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},En(a.chartArea,w=>{const E=w.box;Object.assign(E,n.chartArea),E.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class T8{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class kwe extends T8{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const wD="$chartjs",Rwe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},I8=n=>null===n||""===n,S8=!!Rbe&&{passive:!0};function Nwe(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,S8)}function ED(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Lwe(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ED(a.addedNodes,i),o=o&&!ED(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Vwe(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ED(a.removedNodes,i),o=o&&!ED(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const cv=new Map;let A8=0;function x8(){const n=window.devicePixelRatio;n!==A8&&(A8=n,cv.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Uwe(n,t,e){const i=n.canvas,r=i&&t1(i);if(!r)return;const s=MW((a,l)=>{const c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;0===c&&0===u||s(c,u)});return o.observe(r),function Bwe(n,t){cv.size||window.addEventListener("resize",x8),cv.set(n,t)}(n,s),o}function u1(n,t,e){e&&e.disconnect(),"resize"===t&&function jwe(n){cv.delete(n),cv.size||window.removeEventListener("resize",x8)}(n)}function Hwe(n,t,e){const i=n.canvas,r=MW(s=>{null!==n.ctx&&e(function Fwe(n,t){const e=Rwe[n.type]||n.type,{x:i,y:r}=lh(n,t);return{type:e,chart:t,native:n,x:void 0!==i?i:null,y:void 0!==r?r:null}}(s,n))},n);return function Owe(n,t,e){n&&n.addEventListener(t,e,S8)}(i,t,r),r}class zwe extends T8{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function Pwe(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[wD]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",I8(r)){const s=YW(n,"width");void 0!==s&&(n.width=s)}if(I8(i))if(""===n.style.height)n.height=n.width/(t||2);else{const s=YW(n,"height");void 0!==s&&(n.height=s)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[wD])return!1;const i=e[wD].initial;["height","width"].forEach(s=>{const o=i[s];sn(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[wD],!0}addEventListener(t,e,i){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:Lwe,detach:Vwe,resize:Uwe}[e]||Hwe)(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];r&&(({attach:u1,detach:u1,resize:u1}[e]||Nwe)(t,e,r),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return function kbe(n,t,e,i){const r=yD(n),s=ah(r,"margin"),o=_D(r.maxWidth,n,"clientWidth")||uD,a=_D(r.maxHeight,n,"clientHeight")||uD,l=function Mbe(n,t,e){let i,r;if(void 0===t||void 0===e){const s=n&&t1(n);if(s){const o=s.getBoundingClientRect(),a=yD(s),l=ah(a,"border","width"),c=ah(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=_D(a.maxWidth,s,"clientWidth"),r=_D(a.maxHeight,s,"clientHeight")}else t=n.clientWidth,e=n.clientHeight}return{width:t,height:e,maxWidth:i||uD,maxHeight:r||uD}}(n,t,e);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const m=ah(r,"border","width"),y=ah(r,"padding");c-=y.width+m.width,u-=y.height+m.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=vD(Math.min(c,o,l.maxWidth)),u=vD(Math.min(u,a,l.maxHeight)),c&&!u&&(u=vD(c/2)),(void 0!==t||void 0!==e)&&i&&l.height&&u>l.height&&(u=l.height,c=vD(Math.floor(u*i))),{width:c,height:u}}(t,e,i,r)}isAttached(t){const e=t&&t1(t);return!(!e||!e.isConnected)}}class Ml{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return rg(this.x)&&rg(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}function CD(n,t,e,i,r){const s=At(i,0),o=Math.min(At(r,n.length),n.length);let l,c,u,a=0;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}const M8=(n,t,e)=>"top"===t||"left"===t?n[t]+e:n[t]-e,k8=(n,t)=>Math.min(t||n,n);function R8(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function Xwe(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let c,l=n.getPixelForTick(r);if(!(e&&(c=1===i?Math.max(l-s,o-l):0===t?(n.getPixelForTick(1)-l)/2:(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function uv(n){return n.drawTicks?n.tickLength:0}function P8(n,t){if(!n.display)return 0;const e=lr(n.font,t),i=es(n.padding);return(Xn(n.text)?n.text.length:1)*e.lineHeight+i.height}function n0e(n,t,e){let i=$P(n);return(e&&"right"!==t||!e&&"right"===t)&&(i=(n=>"left"===n?"right":"right"===n?"left":n)(i)),i}class dh extends Ml{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=ao(t,Number.POSITIVE_INFINITY),e=ao(e,Number.NEGATIVE_INFINITY),i=ao(i,Number.POSITIVE_INFINITY),r=ao(r,Number.NEGATIVE_INFINITY),{min:ao(t,i),max:ao(e,r),minDefined:yi(t),maxDefined:yi(e)}}getMinMax(t){let o,{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:ao(e,ao(i,e)),max:ao(i,ao(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Hn(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function cbe(n,t,e){const{min:i,max:r}=n,s=_W(t,(r-i)/2),o=(a,l)=>e&&0===a?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?R8(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Wwe(n,t){const e=n.options.ticks,i=function qwe(n){const t=n.options.offset,e=n._tickSize();return Math.floor(Math.min(n._length/e+(t?0:1),n._maxLength/e))}(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?function Kwe(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function Zwe(n,t,e,i){let o,r=0,s=e[0];for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}(t,c,s,o/r),c;const u=function Gwe(n,t,e){const i=function Ywe(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}(n),r=t.length/e;if(!i)return Math.max(r,1);const s=function Nve(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i==0&&(t.push(i),t.push(n/i));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}(s,t,r);if(o>0){let f,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(CD(t,c,u,sn(y)?0:a-y,a),f=0,m=o-1;f<m;f++)CD(t,c,u,s[f],s[f+1]);return CD(t,c,u,l,sn(y)?t.length:l+y),c}return CD(t,c,u),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,i,t=this.options.reverse;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Hn(this.options.afterUpdate,[this])}beforeSetDimensions(){Hn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Hn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Hn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Hn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Hn(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Hn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Hn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=k8(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let a,l,c,o=r;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const u=this._getLabelSizes(),f=u.widest.width,m=u.highest.height,y=vr(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/i:y/(i-1),f+6>a&&(a=y/(i-(t.offset?.5:1)),l=this.maxHeight-uv(t.grid)-e.padding-P8(t.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=UP(Math.min(Math.asin(vr((u.highest.height+6)/a,-1,1)),Math.asin(vr(l/c,-1,1))-Math.asin(vr(m/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Hn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Hn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=P8(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=uv(s)+l):(t.height=this.maxHeight,t.width=uv(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:m}=this._getLabelSizes(),y=2*i.padding,v=ea(this.labelRotation),w=Math.cos(v),E=Math.sin(v);a?t.height=Math.min(this.maxHeight,t.height+(i.mirror?0:E*f.width+w*m.height)+y):t.width=Math.min(this.maxWidth,t.width+(i.mirror?0:w*f.width+E*m.height)+y),this._calculatePadding(c,u,E,w)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?c?(m=r*t.width,y=i*e.height):(m=i*t.height,y=r*e.width):"start"===s?y=e.width:"end"===s?m=t.width:"inner"!==s&&(m=t.width/2,y=e.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((y-f+o)*this.width/(this.width-f),0)}else{let u=e.height/2,f=t.height/2;"start"===s?(u=0,f=t.height):"end"===s&&(u=e.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Hn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)sn(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=R8(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/k8(e,i));let f,m,y,v,w,E,k,S,R,z,q,c=0,u=0;for(f=0;f<e;f+=l){if(v=t[f].label,w=this._resolveTickFontOptions(f),r.font=E=w.string,k=s[E]=s[E]||{data:{},gc:[]},S=w.lineHeight,R=z=0,sn(v)||Xn(v)){if(Xn(v))for(m=0,y=v.length;m<y;++m)q=v[m],!sn(q)&&!Xn(q)&&(R=fD(r,k.data,k.gc,R,q),z+=S)}else R=fD(r,k.data,k.gc,R,v),z=S;o.push(R),a.push(z),c=Math.max(R,c),u=Math.max(z,u)}!function Jwe(n,t){En(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}(s,e);const ee=o.indexOf(c),N=a.indexOf(u),M=P=>({width:o[P]||0,height:a[P]||0});return{first:M(0),last:M(e-1),widest:M(ee),highest:M(N),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function Vve(n){return vr(n,-32768,32767)}(this._alignToPixels?rh(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function t0e(n,t,e){return lu(n,{tick:e,index:t,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=function e0e(n,t){return lu(n,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ea(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=uv(s),y=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,E=w/2,k=function(Ne){return rh(i,Ne,w)};let S,R,z,q,ee,N,M,P,U,V,H,$;if("top"===o)S=k(this.bottom),N=this.bottom-m,P=S-E,V=k(t.top)+E,$=t.bottom;else if("bottom"===o)S=k(this.top),V=t.top,$=k(t.bottom)-E,N=S+E,P=this.top+m;else if("left"===o)S=k(this.right),ee=this.right-m,M=S-E,U=k(t.left)+E,H=t.right;else if("right"===o)S=k(this.left),U=t.left,H=k(t.right)-E,ee=S+E,M=this.left+m;else if("x"===e){if("center"===o)S=k((t.top+t.bottom)/2+.5);else if(Kt(o)){const Ne=Object.keys(o)[0];S=k(this.chart.scales[Ne].getPixelForValue(o[Ne]))}V=t.top,$=t.bottom,N=S+E,P=N+m}else if("y"===e){if("center"===o)S=k((t.left+t.right)/2);else if(Kt(o)){const Ne=Object.keys(o)[0];S=k(this.chart.scales[Ne].getPixelForValue(o[Ne]))}ee=S-E,M=ee-m,U=t.left,H=t.right}const ct=At(r.ticks.maxTicksLimit,f),Rt=Math.max(1,Math.ceil(f/ct));for(R=0;R<f;R+=Rt){const Ne=this.getContext(R),Le=s.setContext(Ne),We=a.setContext(Ne),qe=Le.lineWidth,Yt=Le.color,Cn=We.dash||[],on=We.dashOffset,an=Le.tickWidth,$t=Le.tickColor,kr=Le.tickBorderDash||[],co=Le.tickBorderDashOffset;z=Xwe(this,R,l),void 0!==z&&(q=rh(i,z,qe),c?ee=M=U=H=q:N=P=V=$=q,y.push({tx1:ee,ty1:N,tx2:M,ty2:P,x1:U,y1:V,x2:H,y2:$,width:qe,color:Yt,borderDash:Cn,borderDashOffset:on,tickWidth:an,tickColor:$t,tickBorderDash:kr,tickBorderDashOffset:co}))}return this._ticksLength=f,this._borderValue=S,y}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,m=uv(i.grid),y=m+u,v=f?-u:y,w=-ea(this.labelRotation),E=[];let k,S,R,z,q,ee,N,M,P,U,V,H,$="middle";if("top"===r)ee=this.bottom-v,N=this._getXAxisLabelAlignment();else if("bottom"===r)ee=this.top+v,N=this._getXAxisLabelAlignment();else if("left"===r){const Rt=this._getYAxisLabelAlignment(m);N=Rt.textAlign,q=Rt.x}else if("right"===r){const Rt=this._getYAxisLabelAlignment(m);N=Rt.textAlign,q=Rt.x}else if("x"===e){if("center"===r)ee=(t.top+t.bottom)/2+y;else if(Kt(r)){const Rt=Object.keys(r)[0];ee=this.chart.scales[Rt].getPixelForValue(r[Rt])+y}N=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)q=(t.left+t.right)/2-y;else if(Kt(r)){const Rt=Object.keys(r)[0];q=this.chart.scales[Rt].getPixelForValue(r[Rt])}N=this._getYAxisLabelAlignment(m).textAlign}"y"===e&&("start"===l?$="top":"end"===l&&($="bottom"));const ct=this._getLabelSizes();for(k=0,S=a.length;k<S;++k){R=a[k],z=R.label;const Rt=s.setContext(this.getContext(k));M=this.getPixelForTick(k)+s.labelOffset,P=this._resolveTickFontOptions(k),U=P.lineHeight,V=Xn(z)?z.length:1;const Ne=V/2,Le=Rt.color,We=Rt.textStrokeColor,qe=Rt.textStrokeWidth;let Cn,Yt=N;if(o?(q=M,"inner"===N&&(Yt=k===S-1?this.options.reverse?"left":"right":0===k?this.options.reverse?"right":"left":"center"),H="top"===r?"near"===c||0!==w?-V*U+U/2:"center"===c?-ct.highest.height/2-Ne*U+U:U/2-ct.highest.height:"near"===c||0!==w?U/2:"center"===c?ct.highest.height/2-Ne*U:ct.highest.height-V*U,f&&(H*=-1),0!==w&&!Rt.showLabelBackdrop&&(q+=U/2*Math.sin(w))):(ee=M,H=(1-V)*U/2),Rt.showLabelBackdrop){const on=es(Rt.backdropPadding),an=ct.heights[k],$t=ct.widths[k];let kr=H-on.top,co=0-on.left;switch($){case"middle":kr-=an/2;break;case"bottom":kr-=an}switch(N){case"center":co-=$t/2;break;case"right":co-=$t;break;case"inner":k===S-1?co-=$t:k>0&&(co-=$t/2)}Cn={left:co,top:kr,width:$t+on.width,height:an+on.height,color:Rt.backdropColor}}E.push({label:z,font:P,textOffset:H,options:{rotation:w,color:Le,strokeColor:We,strokeWidth:qe,textAlign:Yt,textBaseline:$,translation:[q,ee],backdrop:Cn}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ea(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=t+s,l=this._getLabelSizes().widest.width;let c,u;return"left"===e?r?(u=this.right+s,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u=this.left)):"right"===e?r?(u=this.left+s,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,m;this.isHorizontal()?(c=rh(t,this.left,o)-o/2,u=rh(t,this.right,a)+a/2,f=m=l):(f=rh(t,this.top,o)-o/2,m=rh(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,f),e.lineTo(u,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&pD(i,r);const s=this.getLabelItems(t);for(const o of s)sh(i,o.label,0,o.textOffset,o.font,o.options);r&&gD(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=lr(i.font),o=es(i.padding),a=i.align;let l=s.lineHeight/2;"bottom"===e||"center"===e||Kt(e)?(l+=o.bottom,Xn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:m}=function i0e(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let m,y,v,f=0;const w=o-r,E=a-s;if(n.isHorizontal()){if(y=Jr(i,s,a),Kt(e)){const k=Object.keys(e)[0];v=u[k].getPixelForValue(e[k])+w-t}else v="center"===e?(c.bottom+c.top)/2+w-t:M8(n,e,t);m=a-s}else{if(Kt(e)){const k=Object.keys(e)[0];y=u[k].getPixelForValue(e[k])-E+t}else y="center"===e?(c.left+c.right)/2-E+t:M8(n,e,t);v=Jr(i,o,r),f="left"===e?-Fi:Fi}return{titleX:y,titleY:v,maxWidth:m,rotation:f}}(this,l,e,a);sh(t,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:m,textAlign:n0e(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=At(t.grid&&t.grid.z,-1),r=At(t.border&&t.border.z,0);return this._isVisible()&&this.draw===dh.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]:[{z:e,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){return lr(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class DD{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function o0e(n){return"id"in n&&"defaults"in n})(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function r0e(n,t,e){const i=Ky(Object.create(null),[e?vi.get(e):{},vi.get(t),n.defaults]);vi.set(t,i),n.defaultRoutes&&function s0e(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");vi.route(s,r,l,a)})}(t,n.defaultRoutes),n.descriptors&&vi.describe(t,n.descriptors)}(t,o,i),this.override&&vi.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in vi[r]&&(delete vi[r][i],this.override&&delete ih[i])}}class a0e{constructor(){this.controllers=new DD(cu,"datasets",!0),this.elements=new DD(Ml,"elements"),this.plugins=new DD(Object,"plugins"),this.scales=new DD(dh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):En(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=jP(t);Hn(i["before"+r],[],i),e[t](i),Hn(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Fa=new a0e;class l0e{constructor(){this._init=[]}notify(t,e,i,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===Hn(o[i],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){sn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=At(i.options&&i.options.plugins,{}),s=function c0e(n){const t={},e=[],i=Object.keys(Fa.plugins.items);for(let s=0;s<i.length;s++)e.push(Fa.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(i);return!1!==r||e?function d0e(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const l=a.id,c=u0e(i[l],r);null!==c&&s.push({plugin:a,options:h0e(n.config,{plugin:a,local:e[l]},c,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function u0e(n,t){return t||!1!==n?!0===n?{}:n:null}function h0e(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function d1(n,t){return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||(vi.datasets[n]||{}).indexAxis||"x"}function O8(n){if("x"===n||"y"===n||"r"===n)return n}function g0e(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function h1(n,...t){if(O8(n))return n;for(const e of t){const i=e.axis||g0e(e.position)||n.length>1&&O8(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function N8(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function F8(n){const t=n.options||(n.options={});t.plugins=At(t.plugins,{}),t.scales=function _0e(n,t){const e=ih[n.type]||{scales:{}},i=t.scales||{},r=d1(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Kt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=h1(o,a,function m0e(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return N8(n,"x",e[0])||N8(n,"y",e[0])}return{}}(o,n),vi.scales[a.type]),c=function p0e(n,t){return n===t?"_index_":"_value_"}(l,r),u=e.scales||{};s[o]=Zy(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||d1(a,t),u=(ih[a]||{}).scales||{};Object.keys(u).forEach(f=>{const m=function f0e(n,t){let e=n;return"_index_"===n?e=t:"_value_"===n&&(e="x"===t?"y":"x"),e}(f,l),y=o[m+"AxisID"]||m;s[y]=s[y]||Object.create(null),Zy(s[y],[{axis:m},i[y],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];Zy(a,[vi.scales[a.type],vi.scale])}),s}(n,t)}function L8(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const V8=new Map,B8=new Set;function TD(n,t){let e=V8.get(n);return e||(e=t(),V8.set(n,e),B8.add(e)),e}const dv=(n,t,e)=>{const i=su(t,e);void 0!==i&&n.add(i)};class v0e{constructor(t){this._config=function y0e(n){return(n=n||{}).data=L8(n.data),F8(n),n}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=L8(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),F8(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return TD(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return TD(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return TD(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return TD(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(f=>dv(l,t,f))),u.forEach(f=>dv(l,r,f)),u.forEach(f=>dv(l,ih[s]||{},f)),u.forEach(f=>dv(l,vi,f)),u.forEach(f=>dv(l,GP,f))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),B8.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,ih[e]||{},vi.datasets[e]||{},{type:e},vi,GP]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=j8(this._resolverCache,t,r);let l=o;(function w0e(n,t){const{isScriptable:e,isIndexable:i}=UW(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(ou(a)||b0e(a))||o&&Xn(a))return!0}return!1})(o,e)&&(s.$shared=!1,l=sg(o,i=ou(i)?i():i,this.createResolver(t,i,a)));for(const c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){const{resolver:s}=j8(this._resolverCache,t,i);return Kt(e)?sg(s,e,void 0,r):s}}function j8(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:QP(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const b0e=n=>Kt(n)&&Object.getOwnPropertyNames(n).some(t=>ou(n[t])),C0e=["top","bottom","left","right","chartArea"];function U8(n,t){return"top"===n||"bottom"===n||-1===C0e.indexOf(n)&&"x"===t}function H8(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function z8(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Hn(e&&e.onComplete,[n],t)}function D0e(n){const t=n.chart,e=t.options.animation;Hn(e&&e.onProgress,[n],t)}function $8(n){return e1()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ID={},W8=n=>{const t=$8(n);return Object.values(ID).filter(e=>e.canvas===t).pop()};function T0e(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function SD(n,t,e){return n.options.clip?n[e]:t[e]}let f1=(()=>class n{static defaults=vi;static instances=ID;static overrides=ih;static registry=Fa;static version="4.4.3";static getChart=W8;static register(...e){Fa.add(...e),q8()}static unregister(...e){Fa.remove(...e),q8()}constructor(e,i){const r=this.config=new v0e(i),s=$8(e),o=W8(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function $we(n){return!e1()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?kwe:zwe}(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,f=c&&c.width;this.id=Ive(),this.ctx=l,this.canvas=c,this.width=f,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new l0e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Hve(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}(m=>this.update(m),a.resizeDelay||0),this._dataChanges=[],ID[this.id]=this,l&&c?(xl.listen(this,"complete",z8),xl.listen(this,"progress",D0e),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return sn(e)?i&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ZW(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return VW(this.canvas,this.ctx),this}stop(){return xl.stop(this),this}resize(e,i){xl.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const r=this.options,a=this.platform.getMaximumSize(this.canvas,e,i,r.maintainAspectRatio&&this.aspectRatio),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ZW(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Hn(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){En(this.options.scales||{},(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{});let o=[];i&&(o=o.concat(Object.keys(i).map(a=>{const l=i[a],c=h1(a,l),u="r"===c,f="x"===c;return{options:l,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),En(o,a=>{const l=a.options,c=l.id,u=h1(c,l),f=At(l.type,a.dtype);(void 0===l.position||U8(l.position,u)!==U8(a.dposition))&&(l.position=a.dposition),s[c]=!0;let m=null;c in r&&r[c].type===f?m=r[c]:(m=new(Fa.getScale(f))({id:c,type:f,ctx:this.ctx,chart:this}),r[m.id]=m),m.init(l,e)}),En(s,(a,l)=>{a||delete r[l]}),En(r,a=>{ts.configure(this,a,a.options),ts.addBox(this,a)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(H8("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{0===i.filter(o=>o===r._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){const o=i[r];let a=this.getDatasetMeta(r);const l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||d1(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=Fa.getController(l),{datasetElementType:u,dataElementType:f}=vi.datasets[l];Object.assign(c,{dataElementType:Fa.getElement(f),datasetElementType:u&&Fa.getElement(u)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){En(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,f=this.data.datasets.length;u<f;u++){const{controller:m}=this.getDatasetMeta(u),y=!s&&-1===o.indexOf(m);m.buildOrUpdateElements(y),a=Math.max(+m.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||En(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(H8("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){En(this.scales,e=>{ts.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!bW(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:o}of i)T0e(e,s,"_removeElements"===r?-o:o)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,r=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!bW(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ts.update(this,this.width,this.height,e);const i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],En(this.boxes,s=>{r&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,ou(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(xl.has(this)?this.attached&&!xl.running(this)&&xl.start(this):(this.draw(),z8({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,r=[];let s,o;for(s=0,o=i.length;s<o;++s){const a=i[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,r=e._clip,s=!r.disabled,o=function S0e(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:SD(e,t,"left"),right:SD(e,t,"right"),top:SD(i,t,"top"),bottom:SD(i,t,"bottom")}:t}(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(s&&pD(i,{left:!1===r.left?0:o.left-r.left,right:!1===r.right?this.width:o.right+r.right,top:!1===r.top?0:o.top-r.top,bottom:!1===r.bottom?this.height:o.bottom+r.bottom}),e.controller.draw(),s&&gD(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return Al(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){const o=Cwe.modes[i];return"function"==typeof o?o(this,e,r,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],r=this._metasets;let s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=lu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!i.hidden}setDatasetVisibility(e,i){this.getDatasetMeta(e).hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){const s=r?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);Yy(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),xl.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),VW(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete ID[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};En(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(i.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){En(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},En(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){const s=r?"set":"remove";let o,a,l,c;for("dataset"===i&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],r=e.map(({datasetIndex:o,index:a})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!lD(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(i=>i.plugin.id===e).length}_updateHoverStyles(e,i,r){const s=this.options.hover,o=(c,u)=>c.filter(f=>!u.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),a=o(i,e),l=r?e:o(e,i);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,i){const r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,s))return;const o=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,i,r){const{_active:s=[],options:o}=this,l=this._getActiveElements(e,s,r,i),c=function Rve(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),u=function I0e(n,t,e,i){return e&&"mouseout"!==n.type?i?t:n:null}(e,this._lastEvent,r,c);r&&(this._lastEvent=null,Hn(o.onHover,[e,l,this],this),c&&Hn(o.onClick,[e,l,this],this));const f=!lD(l,s);return(f||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=u,f}_getActiveElements(e,i,r,s){if("mouseout"===e.type)return[];if(!r)return i;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}})();function q8(){return En(f1.instances,n=>n._plugins.invalidate())}function lg(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function AD(n,t,e,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+i+e-c,0),m=u>0?u+i+e+c:0;let y=0;const v=r-l;if(i){const Le=((u>0?u-i:0)+(f>0?f-i:0))/2;y=(v-(0!==Le?v*Le/(Le+i):v))/2}const E=(v-Math.max(.001,v*f-e/Jn)/f)/2,k=l+E+y,S=r-E-y,{outerStart:R,outerEnd:z,innerStart:q,innerEnd:ee}=function M0e(n,t,e,i){const r=function x0e(n){return YP(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{const c=(e-Math.min(s,l))*i/2;return vr(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:vr(r.innerStart,0,o),innerEnd:vr(r.innerEnd,0,o)}}(t,m,f,S-k),N=f-R,M=f-z,P=k+R/N,U=S-z/M,V=m+q,H=m+ee,$=k+q/V,ct=S-ee/H;if(n.beginPath(),s){const Rt=(P+U)/2;if(n.arc(o,a,f,P,Rt),n.arc(o,a,f,Rt,U),z>0){const qe=lg(M,U,o,a);n.arc(qe.x,qe.y,z,U,S+Fi)}const Ne=lg(H,S,o,a);if(n.lineTo(Ne.x,Ne.y),ee>0){const qe=lg(H,ct,o,a);n.arc(qe.x,qe.y,ee,S+Fi,ct+Math.PI)}const Le=(S-ee/m+(k+q/m))/2;if(n.arc(o,a,m,S-ee/m,Le,!0),n.arc(o,a,m,Le,k+q/m,!0),q>0){const qe=lg(V,$,o,a);n.arc(qe.x,qe.y,q,$+Math.PI,k-Fi)}const We=lg(N,k,o,a);if(n.lineTo(We.x,We.y),R>0){const qe=lg(N,P,o,a);n.arc(qe.x,qe.y,R,k-Fi,P)}}else{n.moveTo(o,a);const Rt=Math.cos(P)*f+o,Ne=Math.sin(P)*f+a;n.lineTo(Rt,Ne);const Le=Math.cos(U)*f+o,We=Math.sin(U)*f+a;n.lineTo(Le,We)}n.closePath()}function G8(n,t,e=t){n.lineCap=At(e.borderCapStyle,t.borderCapStyle),n.setLineDash(At(e.borderDash,t.borderDash)),n.lineDashOffset=At(e.borderDashOffset,t.borderDashOffset),n.lineJoin=At(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=At(e.borderWidth,t.borderWidth),n.strokeStyle=At(e.borderColor,t.borderColor)}function O0e(n,t,e){n.lineTo(e.x,e.y)}function K8(n,t,e={}){const i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a);return{count:i,start:l,loop:t.loop,ilen:c<l&&!(r<o&&s<o||r>a&&s>a)?i+c-l:c-l}}function F0e(n,t,e,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=K8(r,e,i),u=function N0e(n){return n.stepped?ebe:n.tension||"monotone"===n.cubicInterpolationMode?tbe:O0e}(s);let y,v,w,{move:f=!0,reverse:m}=i||{};for(y=0;y<=c;++y)v=r[(a+(m?c-y:y))%o],!v.skip&&(f?(n.moveTo(v.x,v.y),f=!1):u(n,w,v,m,s.stepped),w=v);return l&&(v=r[(a+(m?c:0))%o],u(n,w,v,m,s.stepped)),!!l}function L0e(n,t,e,i){const r=t.points,{count:s,start:o,ilen:a}=K8(r,e,i),{move:l=!0,reverse:c}=i||{};let m,y,v,w,E,k,u=0,f=0;const S=z=>(o+(c?a-z:z))%s,R=()=>{w!==E&&(n.lineTo(u,E),n.lineTo(u,w),n.lineTo(u,k))};for(l&&(y=r[S(0)],n.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=r[S(m)],y.skip)continue;const z=y.x,q=y.y,ee=0|z;ee===v?(q<w?w=q:q>E&&(E=q),u=(f*u+z)/++f):(R(),n.lineTo(z,q),v=ee,f=0,w=E=q),k=q}R()}function p1(n){const t=n.options;return n._decimated||n._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?F0e:L0e}const U0e="function"==typeof Path2D;let xD=(()=>class n extends Ml{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(Tbe(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function jbe(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=function Vbe(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,i);return function i8(n,t,e,i){return i&&i.setContext&&e?function Ube(n,t,e,i){const r=n._chart.getContext(),s=r8(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[];let u=s,f=t[0].start,m=f;function y(v,w,E,k){const S=a?-1:1;if(v!==w){for(v+=l;e[v%l].skip;)v-=S;for(;e[w%l].skip;)w+=S;v%l!=w%l&&(c.push({start:v%l,end:w%l,loop:E,style:k}),u=k,f=w%l)}}for(const v of t){f=a?f:v.start;let E,w=e[f%l];for(m=f+1;m<=v.end;m++){const k=e[m%l];E=r8(i.setContext(lu(r,{type:"segment",p0:w,p1:k,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),Hbe(E,u)&&y(f,m-1,v.loop,u),w=k,u=E}f<m-1&&y(f,m-1,v.loop,u)}return c}(n,t,e,i):t}(n,!0===i?[{start:o,end:a,loop:s}]:function Bbe(n,t,e,i){const r=n.length,s=[];let l,o=t,a=n[t];for(l=t+1;l<=e;++l){const c=n[l%r];c.skip||c.stop?a.skip||(s.push({start:t%r,end:(l-1)%r,loop:i=!1}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(e,o,a<o?a+r:a,!!n._fullLoop&&0===o&&a===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,i){const r=this.options,s=e[i],o=this.points,a=n8(this,{property:i,start:s,end:s});if(!a.length)return;const l=[],c=function V0e(n){return n.stepped?Pbe:n.tension||"monotone"===n.cubicInterpolationMode?Obe:ch}(r);let u,f;for(u=0,f=a.length;u<f;++u){const{start:m,end:y}=a[u],v=o[m],w=o[y];if(v===w){l.push(v);continue}const k=c(v,w,Math.abs((s-v[i])/(w[i]-v[i])),r.stepped);k[i]=e[i],l.push(k)}return 1===l.length?l[0]:l}pathSegment(e,i,r){return p1(this)(e,this,i,r)}path(e,i,r){const s=this.segments,o=p1(this);let a=this._loop;i=i||0,r=r||this.points.length-i;for(const l of s)a&=o(e,this,l,{start:i,end:i+r-1});return!!a}draw(e,i,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function H0e(n,t,e,i){U0e&&!t.options.segment?function B0e(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),G8(n,t.options),n.stroke(r)}(n,t,e,i):function j0e(n,t,e,i){const{segments:r,options:s}=t,o=p1(t);for(const a of r)G8(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}(n,t,e,i)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}})();function Z8(n,t,e,i){const r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}let z0e=(()=>class n extends Ml{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return Z8(this,e,"x",i)}inYRange(e,i){return Z8(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){let i=(e=e||this.options||{}).radius||0;return i=Math.max(i,i&&e.hoverRadius||0),2*(i+(i&&e.borderWidth||0))}draw(e,i){const r=this.options;this.skip||r.radius<.1||!Al(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,ZP(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}})();function Y8(n,t){const{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,u,f;return n.horizontal?(f=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-f,u=i+f):(f=s/2,a=e-f,l=e+f,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function uu(n,t,e,i){return n?0:vr(t,e,i)}function g1(n,t,e,i){const r=null===t,s=null===e,a=n&&!(r&&s)&&Y8(n,i);return a&&(r||Il(t,a.left,a.right))&&(s||Il(e,a.top,a.bottom))}function K0e(n,t){n.rect(t.x,t.y,t.w,t.h)}function m1(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0;return{x:n.x+i,y:n.y+r,w:n.w+((n.x+n.w!==e.x+e.w?t:0)-i),h:n.h+((n.y+n.h!==e.y+e.h?t:0)-r),radius:n.radius}}var Y0e=Object.freeze({__proto__:null,ArcElement:class P0e extends Ml{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=TW(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,v=At(f,l-a)>=ei||Xy(s,a,l),w=Il(o,c+m,u+m);return v&&w}getCenterPoint(t){const{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(r+s)/2,f=(o+a+c+l)/2;return{x:e+Math.cos(u)*f,y:i+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>ei?Math.floor(i/ei):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);const c=r*(1-Math.sin(Math.min(Jn,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function k0e(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){AD(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%ei||ei))}AD(n,t,e,i,l,r),n.fill()}(t,this,c,s,o),function R0e(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:m}=l,y="inner"===l.borderAlign;if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=m,y?(n.lineWidth=2*c,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let v=t.endAngle;if(s){AD(n,t,e,i,v,r);for(let w=0;w<s;++w)n.stroke();isNaN(a)||(v=o+(a%ei||ei))}y&&function A0e(n,t,e){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;n.beginPath(),n.arc(s,o,a,i-c,e+c),l>r?(c=r/l,n.arc(s,o,l,e+c,i-c,!0)):n.arc(s,o,r,e+Fi,i-Fi),n.closePath(),n.clip()}(n,t,v),s||(AD(n,t,e,i,v,r),n.stroke())}(t,this,c,s,o),t.restore()}},BarElement:class Z0e extends Ml{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=function q0e(n){const t=Y8(n),e=t.right-t.left,i=t.bottom-t.top,r=function $0e(n,t,e){const r=n.borderSkipped,s=jW(n.options.borderWidth);return{t:uu(r.top,s.top,0,e),r:uu(r.right,s.right,0,t),b:uu(r.bottom,s.bottom,0,e),l:uu(r.left,s.left,0,t)}}(n,e/2,i/2),s=function W0e(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=oh(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Kt(r);return{topLeft:uu(!l||a.top||a.left,s.topLeft,0,o),topRight:uu(!l||a.top||a.right,s.topRight,0,o),bottomLeft:uu(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:uu(!l||a.bottom||a.right,s.bottomRight,0,o)}}(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),a=function G0e(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?nv:K0e;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,m1(o,e,s)),t.clip(),a(t,m1(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,m1(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return g1(this,t,e,i)}inXRange(t,e){return g1(this,t,null,e)}inYRange(t,e){return g1(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:xD,PointElement:z0e});const _1=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Q8=_1.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function X8(n){return _1[n%_1.length]}function J8(n){return Q8[n%Q8.length]}function e9(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}var nEe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!e.forceOverride&&(e9(i)||function tEe(n){return n&&(n.borderColor||n.backgroundColor)}(r)||s&&e9(s)))return;const o=function eEe(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof o1?t=function X0e(n,t){return n.backgroundColor=n.data.map(()=>X8(t++)),t}(e,t):r instanceof y8?t=function J0e(n,t){return n.backgroundColor=n.data.map(()=>J8(t++)),t}(e,t):r&&(t=function Q0e(n,t){return n.borderColor=X8(t),n.backgroundColor=J8(t),++t}(e,t))}}(n);i.forEach(o)}};function t9(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function n9(n){n.data.datasets.forEach(t=>{t9(t)})}var oEe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled)return void n9(n);const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if("y"===iv([a,n.options.indexAxis])||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if("linear"!==u.type&&"time"!==u.type||n.options.parsing)return;let v,{start:f,count:m}=function sEe(n,t){const e=t.length;let r,i=0;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=vr(Sl(t,s.axis,o).lo,0,e-1)),r=c?vr(Sl(t,s.axis,a).hi+1,i,e)-i:e-i,{start:i,count:r}}(l,c);if(m<=(e.threshold||4*i))t9(r);else{switch(sn(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}})),e.algorithm){case"lttb":v=function iEe(n,t,e,i,r){const s=r.samples||i;if(s>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(s-2);let l=0;const c=t+e-1;let f,m,y,v,w,u=t;for(o[l++]=n[u],f=0;f<s-2;f++){let S,E=0,k=0;const R=Math.floor((f+1)*a)+1+t,z=Math.min(Math.floor((f+2)*a)+1,e)+t,q=z-R;for(S=R;S<z;S++)E+=n[S].x,k+=n[S].y;E/=q,k/=q;const ee=Math.floor(f*a)+1+t,N=Math.min(Math.floor((f+1)*a)+1,e)+t,{x:M,y:P}=n[u];for(y=v=-1,S=ee;S<N;S++)v=.5*Math.abs((M-E)*(n[S].y-P)-(M-n[S].x)*(k-P)),v>y&&(y=v,m=n[S],w=S);o[l++]=m,u=w}return o[l++]=n[c],o}(c,f,m,i,e);break;case"min-max":v=function rEe(n,t,e,i){let o,a,l,c,u,f,m,y,v,w,r=0,s=0;const E=[],S=n[t].x,z=n[t+e-1].x-S;for(o=t;o<t+e;++o){a=n[o],l=(a.x-S)/z*i,c=a.y;const q=0|l;if(q===u)c<v?(v=c,f=o):c>w&&(w=c,m=o),r=(s*r+a.x)/++s;else{const ee=o-1;if(!sn(f)&&!sn(m)){const N=Math.min(f,m),M=Math.max(f,m);N!==y&&N!==ee&&E.push({...n[N],x:r}),M!==y&&M!==ee&&E.push({...n[M],x:r})}o>0&&ee!==y&&E.push(n[ee]),E.push(a),u=q,s=0,v=w=c,f=m=y=o}}return E}(c,f,m,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=v}})},destroy(n){n9(n)}};function y1(n,t,e,i){if(i)return;let r=t[n],s=e[n];return"angle"===n&&(r=lo(r),s=lo(s)),{property:n,start:r,end:s}}function v1(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function i9(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function r9(n,t){let e=[],i=!1;return Xn(n)?(i=!0,e=n):e=function lEe(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=v1(o,a,r);const l=r[o],c=r[a];null!==i?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):null!==e&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}(n,t),e.length?new xD({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function s9(n){return n&&!1!==n.fill}function cEe(n,t,e){let r=n[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!yi(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function uEe(n,t,e){const i=function pEe(n){const t=n.options,e=t.fill;let i=At(e&&e.target,e);return void 0===i&&(i=!!t.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(Kt(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return yi(r)&&Math.floor(r)===r?function dEe(n,t,e,i){return("-"===n||"+"===n)&&(e=t+e),!(e===t||e<0||e>=i)&&e}(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function _Ee(n,t,e){const i=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:a,point:l}=yEe(s,t,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(n.push(l),!a)break}n.push(...i)}function yEe(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],s=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],f=o[u.start][e],m=o[u.end][e];if(Il(r,f,m)){a=r===f,l=r===m;break}}return{first:a,last:l,point:i}}class o9{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:ei}).end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function b1(n,t,e){const i=function vEe(n){const{chart:t,fill:e,line:i}=n;if(yi(e))return function bEe(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function gEe(n){const{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=function mEe(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);a.push(r9({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)_Ee(r,o[u],a)}return new xD({points:r,options:{}})}(n);if("shape"===e)return!0;const r=function wEe(n){return(n.scale||{}).getPointPositionForValue?function CEe(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=function fEe(n,t,e){let i;return i="start"===n?e:"end"===n?t.options.reverse?t.min:t.max:Kt(n)?n.value:t.getBaseValue(),i}(e,t,s),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,s);return new o9({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}(n):function EEe(n){const{scale:t={},fill:e}=n,i=function hEe(n,t){let e=null;return"start"===n?e=t.bottom:"end"===n?e=t.top:Kt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(yi(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}(n)}(n);return r instanceof o9?r:r9(r,i)}(t),{line:r,scale:s,axis:o}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:f=c}=l||{};i&&r.points.length&&(pD(n,e),function DEe(n,t){const{line:e,target:i,above:r,below:s,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),"x"===l&&s!==r&&(a9(n,i,o.top),l9(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),a9(n,i,o.bottom)),l9(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore()}(n,{line:r,target:i,above:u,below:f,area:e,scale:s,axis:o}),gD(n))}function a9(n,t,e){const{segments:i,points:r}=t;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],f=r[v1(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(f.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function l9(n,t){const{line:e,target:i,property:r,color:s,scale:o}=t,a=function aEe(n,t,e){const i=n.segments,r=n.points,s=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=v1(l,c,r);const u=y1(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const f=n8(t,u);for(const m of f){const y=y1(e,s[m.start],s[m.end],m.loop),v=t8(a,r,y);for(const w of v)o.push({source:w,target:m,start:{[e]:i9(u,y,"start",Math.max)},end:{[e]:i9(u,y,"end",Math.min)}})}}return o}(e,i,r);for(const{source:l,target:c,start:u,end:f}of a){const{style:{backgroundColor:m=s}={}}=l,y=!0!==i;n.save(),n.fillStyle=m,TEe(n,o,y&&y1(r,u,f)),n.beginPath();const v=!!e.pathSegment(n,l);let w;if(y){v?n.closePath():c9(n,i,f,r);const E=!!i.pathSegment(n,c,{move:v,reverse:!0});w=v&&E,w||c9(n,i,u,r)}n.closePath(),n.fill(w?"evenodd":"nonzero"),n.restore()}}function TEe(n,t,e){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=e||{};"x"===s&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function c9(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var IEe={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof xD&&(l={visible:n.isDatasetVisible(o),index:o,fill:uEe(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=cEe(r,o,e.propagate))},beforeDraw(n,t,e){const i="beforeDraw"===e.drawTime,r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&b1(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;s9(s)&&b1(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!s9(i)||"beforeDatasetDraw"!==e.drawTime||b1(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const u9=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}};class d9 extends Ml{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Hn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,r=lr(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=u9(i,s);let c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let f=t;s.textAlign="left",s.textBaseline="middle";let m=-1,y=-u;return this.legendItems.forEach((v,w)=>{const E=i+e/2+s.measureText(v.text).width;(0===w||c[c.length-1]+E+2*a>o)&&(f+=u,c[c.length-(w>0?0:1)]=0,y+=u,m++),l[w]={left:0,top:y,row:m,width:E,height:r},c[c.length-1]+=E+a}),f}_fitCols(t,e,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let f=a,m=0,y=0,v=0,w=0;return this.legendItems.forEach((E,k)=>{const{itemWidth:S,itemHeight:R}=function AEe(n,t,e,i,r){const s=function xEe(n,t,e,i){let r=n.text;return r&&"string"!=typeof r&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}(i,n,t,e),o=function MEe(n,t,e){let i=n;return"string"!=typeof t.text&&(i=h9(t,e)),i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(i,e,s,E,r);k>0&&y+R+2*a>u&&(f+=m+a,c.push({width:m,height:y}),v+=m+a,w++,m=y=0),l[k]={left:v,top:y,col:w,width:S,height:R},m=Math.max(m,S),y+=R+a}),f+=m,c.push({width:m,height:y}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=ag(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Jr(i,this.left+r,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=Jr(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Jr(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=Jr(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;pD(t,this),this._draw(),gD(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=vi.color,l=ag(t.rtl,this.left,this.width),c=lr(o.font),{padding:u}=o,f=c.size,m=f/2;let y;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:w,itemHeight:E}=u9(o,f),R=this.isHorizontal(),z=this._computeTitleHeight();y=R?{x:Jr(s,this.left+u,this.right-i[0]),y:this.top+u+z,line:0}:{x:this.left+u,y:Jr(s,this.top+z+u,this.bottom-e[0].height),line:0},QW(this.ctx,t.textDirection);const q=E+u;this.legendItems.forEach((ee,N)=>{r.strokeStyle=ee.fontColor,r.fillStyle=ee.fontColor;const M=r.measureText(ee.text).width,P=l.textAlign(ee.textAlign||(ee.textAlign=o.textAlign)),U=v+m+M;let V=y.x,H=y.y;l.setWidth(this.width),R?N>0&&V+U+u>this.right&&(H=y.y+=q,y.line++,V=y.x=Jr(s,this.left+u,this.right-i[y.line])):N>0&&H+q>this.bottom&&(V=y.x=V+e[y.line].width+u,y.line++,H=y.y=Jr(s,this.top+z+u,this.bottom-e[y.line].height)),function(ee,N,M){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;r.save();const P=At(M.lineWidth,1);if(r.fillStyle=At(M.fillStyle,a),r.lineCap=At(M.lineCap,"butt"),r.lineDashOffset=At(M.lineDashOffset,0),r.lineJoin=At(M.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=At(M.strokeStyle,a),r.setLineDash(At(M.lineDash,[])),o.usePointStyle){const U={radius:w*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:P},V=l.xPlus(ee,v/2);BW(r,U,V,N+m,o.pointStyleWidth&&v)}else{const U=N+Math.max((f-w)/2,0),V=l.leftForLtr(ee,v),H=oh(M.borderRadius);r.beginPath(),Object.values(H).some($=>0!==$)?nv(r,{x:V,y:U,w:v,h:w,radius:H}):r.rect(V,U,v,w),r.fill(),0!==P&&r.stroke()}r.restore()}(l.x(V),H,ee),V=((n,t,e,i)=>n===(i?"left":"right")?e:"center"===n?(t+e)/2:t)(P,V+v+m,R?V+U:this.right,t.rtl),function(ee,N,M){sh(r,M.text,ee,N+E/2,c,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})}(l.x(V),H,ee),R?y.x+=U+u:y.y+="string"!=typeof ee.text?h9(ee,c.lineHeight)+u:q}),XW(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=lr(e.font),r=es(e.padding);if(!e.display)return;const s=ag(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=r.top+i.size/2;let u,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+c,f=Jr(t.align,f,this.right-m);else{const v=this.columnSizes.reduce((w,E)=>Math.max(w,E.height),0);u=c+Jr(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const y=Jr(a,f,f+m);o.textAlign=s.textAlign($P(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,sh(o,e.text,y,u,i)}_computeTitleHeight(){const t=this.options.title,e=lr(t.font),i=es(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(Il(t,this.left,this.right)&&Il(e,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Il(t,r.left,r.left+r.width)&&Il(e,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function kEe(n,t){return!(("mousemove"!==n&&"mouseout"!==n||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==n&&"mouseup"!==n))}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((n,t)=>null!==n&&null!==t&&n.datasetIndex===t.datasetIndex&&n.index===t.index)(r,i);r&&!s&&Hn(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Hn(e.onHover,[t,i,this],this)}else i&&Hn(e.onClick,[t,i,this],this)}}function h9(n,t){return t*(n.text?n.text.length:0)}var REe={id:"legend",_element:d9,start(n,t,e){const i=n.legend=new d9({ctx:n.ctx,options:e,chart:n});ts.configure(n,i,e),ts.addBox(n,i)},stop(n){ts.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;ts.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),u=es(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class w1 extends Ml{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Xn(i.text)?i.text.length:1;this._padding=es(i.padding);const s=r*lr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align;let c,u,f,l=0;return this.isHorizontal()?(u=Jr(a,i,s),f=e+t,c=s-i):("left"===o.position?(u=i+t,f=Jr(a,r,e),l=-.5*Jn):(u=s-t,f=Jr(a,e,r),l=.5*Jn),c=r-e),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=lr(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);sh(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:$P(e.align),textBaseline:"middle",translation:[o,a]})}}var OEe={id:"title",_element:w1,start(n,t,e){!function PEe(n,t){const e=new w1({ctx:n.ctx,options:t,chart:n});ts.configure(n,e,t),ts.addBox(n,e),n.titleBlock=e}(n,e)},stop(n){ts.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;ts.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const MD=new WeakMap;var NEe={id:"subtitle",start(n,t,e){const i=new w1({ctx:n.ctx,options:e,chart:n});ts.configure(n,i,e),ts.addBox(n,i),MD.set(n,i)},stop(n){ts.removeBox(n,MD.get(n)),MD.delete(n)},beforeUpdate(n,t,e){const i=MD.get(n);ts.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hv={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let s,o,a,e=t.x,i=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const u=HP(t,l.getCenterPoint());u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function La(n,t){return t&&(Xn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function kl(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function FEe(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function f9(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=lr(t.bodyFont),c=lr(t.titleFont),u=lr(t.footerFont),f=s.length,m=r.length,y=i.length,v=es(t.padding);let w=v.height,E=0,k=i.reduce((z,q)=>z+q.before.length+q.lines.length+q.after.length,0);k+=n.beforeBody.length+n.afterBody.length,f&&(w+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),k&&(w+=y*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(k-y)*l.lineHeight+(k-1)*t.bodySpacing),m&&(w+=t.footerMarginTop+m*u.lineHeight+(m-1)*t.footerSpacing);let S=0;const R=function(z){E=Math.max(E,e.measureText(z).width+S)};return e.save(),e.font=c.string,En(n.title,R),e.font=l.string,En(n.beforeBody.concat(n.afterBody),R),S=t.displayColors?o+2+t.boxPadding:0,En(i,z=>{En(z.before,R),En(z.lines,R),En(z.after,R)}),S=0,e.font=u.string,En(n.footer,R),e.restore(),E+=v.width,{width:E,height:w}}function BEe(n,t,e,i){const{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function VEe(n,t,e,i){const{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if("left"===n&&r+s+o>t.width||"right"===n&&r-s-o<0)return!0}(c,n,t,e)&&(c="center"),c}function p9(n,t,e){const i=e.yAlign||t.yAlign||function LEe(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}(n,e);return{xAlign:e.xAlign||t.xAlign||BEe(n,t,e,i),yAlign:i}}function g9(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:y}=oh(o);let v=function jEe(n,t){let{x:e,width:i}=n;return"right"===t?e-=i:"center"===t&&(e-=i/2),e}(t,a);const w=function UEe(n,t,e){let{y:i,height:r}=n;return"top"===t?i+=e:i-="bottom"===t?r+e:r/2,i}(t,l,c);return"center"===l?"left"===a?v+=c:"right"===a&&(v-=c):"left"===a?v-=Math.max(u,m)+r:"right"===a&&(v+=Math.max(f,y)+r),{x:vr(v,0,i.width-t.width),y:vr(w,0,i.height-t.height)}}function kD(n,t,e){const i=es(e.padding);return"center"===t?n.x+n.width/2:"right"===t?n.x+n.width-i.right:n.x+i.left}function m9(n){return La([],kl(n))}function _9(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const y9={beforeTitle:Tl,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Tl,beforeBody:Tl,beforeLabel:Tl,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return sn(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Tl,afterBody:Tl,beforeFooter:Tl,footer:Tl,afterFooter:Tl};function js(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?y9[t].call(e,i):r}let v9=(()=>class n extends Ml{static positioners=hv;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new o8(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function HEe(n,t,e){return lu(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:r}=i,s=js(r,"beforeTitle",this,e),o=js(r,"title",this,e),a=js(r,"afterTitle",this,e);let l=[];return l=La(l,kl(s)),l=La(l,kl(o)),l=La(l,kl(a)),l}getBeforeBody(e,i){return m9(js(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:r}=i,s=[];return En(e,o=>{const a={before:[],lines:[],after:[]},l=_9(r,o);La(a.before,kl(js(l,"beforeLabel",this,o))),La(a.lines,js(l,"label",this,o)),La(a.after,kl(js(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,i){return m9(js(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:r}=i,s=js(r,"beforeFooter",this,e),o=js(r,"footer",this,e),a=js(r,"afterFooter",this,e);let l=[];return l=La(l,kl(s)),l=La(l,kl(o)),l=La(l,kl(a)),l}_createItems(e){const i=this._active,r=this.chart.data,s=[],o=[],a=[];let c,u,l=[];for(c=0,u=i.length;c<u;++c)l.push(FEe(this.chart,i[c]));return e.filter&&(l=l.filter((f,m,y)=>e.filter(f,m,y,r))),e.itemSort&&(l=l.sort((f,m)=>e.itemSort(f,m,r))),En(l,f=>{const m=_9(e.callbacks,f);s.push(js(m,"labelColor",this,f)),o.push(js(m,"labelPointStyle",this,f)),a.push(js(m,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){const r=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(s.length){const l=hv[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=f9(this,r),u=Object.assign({},l,c),f=p9(this.chart,r,u),m=g9(r,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){const o=this.getCaretPosition(e,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,r){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:m}=oh(l),{x:y,y:v}=e,{width:w,height:E}=i;let k,S,R,z,q,ee;return"center"===o?(q=v+E/2,"left"===s?(k=y,S=k-a,z=q+a,ee=q-a):(k=y+w,S=k+a,z=q-a,ee=q+a),R=k):(S="left"===s?y+Math.max(c,f)+a:"right"===s?y+w-Math.max(u,m)-a:this.caretX,"top"===o?(z=v,q=z-a,k=S-a,R=S+a):(z=v+E,q=z+a,k=S+a,R=S-a),ee=z),{x1:k,x2:S,x3:R,y1:z,y2:q,y3:ee}}drawTitle(e,i,r){const s=this.title,o=s.length;let a,l,c;if(o){const u=ag(r.rtl,this.x,this.width);for(e.x=kD(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=lr(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,i,r,s,o){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=o,f=lr(o.bodyFont),m=kD(this,"left",o),y=s.x(m),w=i.y+(c<f.lineHeight?(f.lineHeight-c)/2:0);if(o.usePointStyle){const E={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},k=s.leftForLtr(y,u)+u/2,S=w+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,ZP(e,E,k,S),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,ZP(e,E,k,S)}else{e.lineWidth=Kt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const E=s.leftForLtr(y,u),k=s.leftForLtr(s.xPlus(y,1),u-2),S=oh(a.borderRadius);Object.values(S).some(R=>0!==R)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,nv(e,{x:E,y:w,w:u,h:c,radius:S}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),nv(e,{x:k,y:w+1,w:u-2,h:c-2,radius:S}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(E,w,u,c),e.strokeRect(E,w,u,c),e.fillStyle=a.backgroundColor,e.fillRect(k,w+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:f}=r,m=lr(r.bodyFont);let y=m.lineHeight,v=0;const w=ag(r.rtl,this.x,this.width),E=function(P){i.fillText(P,w.x(e.x+v),e.y+y/2),e.y+=y+o},k=w.textAlign(a);let S,R,z,q,ee,N,M;for(i.textAlign=a,i.textBaseline="middle",i.font=m.string,e.x=kD(this,k,r),i.fillStyle=r.bodyColor,En(this.beforeBody,E),v=l&&"right"!==k?"center"===a?u/2+f:u+2+f:0,q=0,N=s.length;q<N;++q){for(S=s[q],R=this.labelTextColors[q],i.fillStyle=R,En(S.before,E),z=S.lines,l&&z.length&&(this._drawColorBox(i,e,q,w,r),y=Math.max(m.lineHeight,c)),ee=0,M=z.length;ee<M;++ee)E(z[ee]),y=m.lineHeight;En(S.after,E)}v=0,y=m.lineHeight,En(this.afterBody,E),e.y-=o}drawFooter(e,i,r){const s=this.footer,o=s.length;let a,l;if(o){const c=ag(r.rtl,this.x,this.width);for(e.x=kD(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=lr(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:f}=r,{topLeft:m,topRight:y,bottomLeft:v,bottomRight:w}=oh(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+m,c),"top"===a&&this.drawCaret(e,i,r,s),i.lineTo(l+u-y,c),i.quadraticCurveTo(l+u,c,l+u,c+y),"center"===a&&"right"===o&&this.drawCaret(e,i,r,s),i.lineTo(l+u,c+f-w),i.quadraticCurveTo(l+u,c+f,l+u-w,c+f),"bottom"===a&&this.drawCaret(e,i,r,s),i.lineTo(l+v,c+f),i.quadraticCurveTo(l,c+f,l,c+f-v),"center"===a&&"left"===o&&this.drawCaret(e,i,r,s),i.lineTo(l,c+m),i.quadraticCurveTo(l,c,l+m,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const a=hv[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=f9(this,e),c=Object.assign({},a,this._size),u=p9(i,e,c),f=g9(e,c,u,i);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=es(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,i),QW(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),XW(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const r=this._active,s=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!lD(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,r),l=this._positionChanged(a,e),c=i||!lD(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&void 0!==this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index));const a=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(e,i){const{caretX:r,caretY:s,options:o}=this,a=hv[o.position].call(this,e,i);return!1!==a&&(r!==a.x||s!==a.y)}})();var zEe={id:"tooltip",_element:v9,positioners:hv,afterInit(n,t,e){e&&(n.tooltip=new v9({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){n.tooltip&&n.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:y9},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},$Ee=Object.freeze({__proto__:null,Colors:nEe,Decimation:oEe,Filler:IEe,Legend:REe,SubTitle:NEe,Title:OEe,Tooltip:zEe});function b9(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}let KEe=(()=>class n extends dh{static id="category";static defaults={ticks:{callback:b9}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const r=this.getLabels();for(const{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(sn(e))return null;const r=this.getLabels();return((n,t)=>null===n?null:vr(Math.round(n),0,t))(i=isFinite(i)&&r[i]===e?i:function qEe(n,t,e,i){const r=n.indexOf(t);return-1===r?((n,t,e,i)=>("string"==typeof t?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(n,t,e,i):r!==n.lastIndexOf(t)?e:r}(r,e,At(i,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,i=this.max,r=this.options.offset,s=[];let o=this.getLabels();o=0===e&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=i;a++)s.push({value:a});return s}getLabelForValue(e){return b9.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}})();function w9(n,t,{horizontal:e,minRotation:i}){const r=ea(i),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+n).length)}class RD extends dh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return sn(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){const l=Na(r),c=Na(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=0===s?1:Math.abs(.05*s);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:i}=t;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function ZEe(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:m}=n,y=s||1,v=u-1,{min:w,max:E}=t,k=!sn(o),S=!sn(a),R=!sn(c),z=(E-w)/(f+1);let ee,N,M,P,q=EW((E-w)/v/y)*y;if(q<1e-14&&!k&&!S)return[{value:w},{value:E}];P=Math.ceil(E/q)-Math.floor(w/q),P>v&&(q=EW(P*q/v/y)*y),sn(l)||(ee=Math.pow(10,l),q=Math.ceil(q*ee)/ee),"ticks"===r?(N=Math.floor(w/q)*q,M=Math.ceil(E/q)*q):(N=w,M=E),k&&S&&s&&function Fve(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}((a-o)/s,q/1e3)?(P=Math.round(Math.min((a-o)/q,u)),q=(a-o)/P,N=o,M=a):R?(N=k?o:N,M=S?a:M,P=c-1,q=(M-N)/P):(P=(M-N)/q,P=Qy(P,Math.round(P),q/1e3)?Math.round(P):Math.ceil(P));const U=Math.max(DW(q),DW(N));ee=Math.pow(10,sn(l)?U:l),N=Math.round(N*ee)/ee,M=Math.round(M*ee)/ee;let V=0;for(k&&(m&&N!==o?(e.push({value:o}),N<o&&V++,Qy(Math.round((N+V*q)*ee)/ee,o,w9(o,z,n))&&V++):N<o&&V++);V<P;++V){const H=Math.round((N+V*q)*ee)/ee;if(S&&H>a)break;e.push({value:H})}return S&&m&&M!==a?e.length&&Qy(e[e.length-1].value,a,w9(a,z,n))?e[e.length-1].value=a:e.push({value:a}):(!S||M===a)&&e.push({value:M}),e}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&CW(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return ev(t,this.chart.options.locale,this.options.ticks.format)}}const fv=n=>Math.floor(au(n)),hh=(n,t)=>Math.pow(10,fv(n)+t);function E9(n){return n/Math.pow(10,fv(n))==1}function C9(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function E1(n){const t=n.ticks;if(t.display&&n.display){const e=es(t.backdropPadding);return At(t.font&&t.font.size,vi.font.size)+e.height}return 0}function eCe(n,t,e){return e=Xn(e)?e:[e],{w:Jve(n,t.string,e),h:e.length*t.lineHeight}}function D9(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function nCe(n,t,e,i,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function iCe(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),c=Math.round(UP(lo(l.angle+Fi))),u=function lCe(n,t,e){return 90===e||270===e?n-=t/2:(e>270||e<90)&&(n-=t),n}(l.y,a.h,c),f=function oCe(n){return 0===n||180===n?"center":n<180?"left":"right"}(c),m=function aCe(n,t,e){return"right"===e?n-=t:"center"===e&&(n-=t/2),n}(l.x,a.w,f);return{visible:!0,x:l.x,y:u,textAlign:f,left:m,top:u,right:m+a.w,bottom:u+a.h}}function rCe(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:s}=n;return!(Al({x:e,y:i},t)||Al({x:e,y:s},t)||Al({x:r,y:i},t)||Al({x:r,y:s},t))}function cCe(n,t,e){const{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!sn(a)){const l=oh(t.borderRadius),c=es(t.backdropPadding);n.fillStyle=a;const u=i-c.left,f=r-c.top,m=s-i+c.width,y=o-r+c.height;Object.values(l).some(v=>0!==v)?(n.beginPath(),nv(n,{x:u,y:f,w:m,h:y,radius:l}),n.fill()):n.fillRect(u,f,m,y)}}function T9(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,ei);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}const PD={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Us=Object.keys(PD);function I9(n,t){return n-t}function S9(n,t){if(sn(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return"function"==typeof i&&(o=i(o)),yi(o)||(o="string"==typeof i?e.parse(o,i):e.parse(o)),null===o?null:(r&&(o="week"!==r||!rg(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function A9(n,t,e,i){const r=Us.length;for(let s=Us.indexOf(n);s<r-1;++s){const o=PD[Us[s]];if(o.common&&Math.ceil((e-t)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=i)return Us[s]}return Us[r-1]}function x9(n,t,e){if(e){if(e.length){const{lo:i,hi:r}=zP(e,t);n[e[i]>=t?e[i]:e[r]]=!0}}else n[t]=!0}function M9(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&e?function mCe(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}(n,i,r,e):i}let C1=(()=>class n extends dh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const r=e.time||(e.time={}),s=this._adapter=new ywe__date(e.adapters.date);s.init(i),Zy(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return void 0===e?null:S9(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&c(this.getMinMax(!1))),s=yi(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=yi(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){const e=this.options,i=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,l=function jve(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}(s,o,this.max);return this._unit=i.unit||(r.autoSkip?A9(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function pCe(n,t,e,i,r){for(let s=Us.length-1;s>=Us.indexOf(e);s--){const o=Us[s];if(PD[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return Us[e?Us.indexOf(e):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function gCe(n){for(let t=Us.indexOf(n)+1,e=Us.length;t<e;++t)if(PD[Us[t]].common)return Us[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&l.reverse(),M9(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s,o,i=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),i=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;i=vr(i,0,a),r=vr(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||A9(o.minUnit,i,r,this._getLabelCapacity(i)),l=At(s.ticks.stepSize,1),c="week"===a&&o.isoWeekday,u=rg(c)||!0===c,f={};let y,v,m=i;if(u&&(m=+e.startOf(m,"isoWeek",c)),m=+e.startOf(m,u?"day":a),e.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);const w="data"===s.ticks.source&&this.getDataTimestamps();for(y=m,v=0;y<r;y=+e.add(y,l,a),v++)x9(f,y,w);return(y===r||"ticks"===s.bounds||1===v)&&x9(f,y,w),Object.keys(f).sort(I9).map(E=>+E)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}format(e,i){return this._adapter.format(e,i||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,i,r,s){const o=this.options,a=o.ticks.callback;if(a)return Hn(a,[e,i,r],this);const l=o.time.displayFormats,c=this._unit,u=this._majorUnit,m=u&&l[u],y=r[i];return this._adapter.format(e,s||(u&&m&&y&&y.major?m:c&&l[c]))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){const i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,r=this.ctx.measureText(e).width,s=ea(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(e){const i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(e,0,M9(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,r;if(e.length)return e;const s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(S9(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return AW(e.sort(I9))}})();function OD(n,t,e){let s,o,a,l,i=0,r=n.length-1;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Sl(n,"pos",t)),({pos:s,time:a}=n[i]),({pos:o,time:l}=n[r])):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Sl(n,"time",t)),({time:s,pos:a}=n[i]),({time:o,pos:l}=n[r]));const c=o-s;return c?a+(l-a)*(t-s)/c:a}var yCe=Object.freeze({__proto__:null,CategoryScale:KEe,LinearScale:class YEe extends RD{static id="linear";static defaults={ticks:{callback:hD.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=yi(t)?t:0,this.max=yi(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ea(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},LogarithmicScale:class JEe extends dh{static id="logarithmic";static defaults={ticks:{callback:hD.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=RD.prototype.parse.apply(this,[t,e]);if(0!==i)return yi(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=yi(t)?Math.max(0,t):null,this.max=yi(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!yi(this._userMin)&&(this.min=t===hh(this.min,0)?hh(this.min,-1):hh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(hh(i,-1)),o(hh(r,1)))),i<=0&&s(hh(r,-1)),r<=0&&o(hh(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,i=function XEe(n,{min:t,max:e}){t=ao(n.min,t);const i=[],r=fv(t);let s=function QEe(n,t){let i=fv(t-n);for(;C9(n,t,i)>10;)i++;for(;C9(n,t,i)<10;)i--;return Math.min(i,fv(n))}(t,e),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let f=Math.floor((c-u)/Math.pow(10,s)),m=ao(n.min,Math.round((l+u+f*Math.pow(10,s))*o)/o);for(;m<e;)i.push({value:m,major:E9(m),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),m=Math.round((l+u+f*Math.pow(10,s))*o)/o;const y=ao(n.max,m);return i.push({value:y,major:E9(y),significand:f}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&CW(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return void 0===t?"0":ev(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=au(t),this._valueRange=au(this.max)-au(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(au(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}},RadialLinearScale:class fCe extends RD{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:hD.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=es(E1(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=yi(t)&&!isNaN(t)?t:0,this.max=yi(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/E1(this.options))}generateTickLabels(t){RD.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=Hn(this.options.pointLabels.callback,[e,i],this);return r||0===r?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?function tCe(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Jn/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),f=lr(c.font),m=eCe(n.ctx,f,n._pointLabels[l]);i[l]=m;const y=lo(n.getIndexAngle(l)+a),v=Math.round(UP(y));nCe(e,t,y,D9(v,u.x,m.w,0,180),D9(v,u.y,m.h,90,270))}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=function sCe(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:E1(s)/2,additionalAngle:o?Jn/r:0};let c;for(let u=0;u<r;u++){l.padding=e[u],l.size=t[u];const f=iCe(n,u,l);i.push(f),"auto"===a&&(f.visible=rCe(f,c),f.visible&&(c=f))}return i}(n,i,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){return lo(t*(ei/(this._pointLabels.length||1))+ea(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(sn(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(sn(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function hCe(n,t,e){return lu(n,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Fi+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),T9(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&function uCe(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));cCe(e,o,s);const a=lr(o.font),{x:l,y:c,textAlign:u}=s;sh(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach((u,f)=>{if(0!==f||0===f&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const m=this.getContext(f),y=r.setContext(m),v=s.setContext(m);!function dCe(n,t,e,i,r){const s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),T9(n,e,o,i),s.closePath(),s.stroke(),s.restore())}(this,y,l,o,v)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:m}=u;!m||!f||(t.lineWidth=m,t.strokeStyle=f,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),u=lr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const f=es(c.backdropPadding);t.fillRect(-o/2-f.left,-s-u.size/2-f.top,o+f.width,u.size+f.height)}sh(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},TimeScale:C1,TimeSeriesScale:class _Ce extends C1{static id="timeseries";static defaults=C1.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=OD(e,this.min),this._tableRange=OD(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||1===i.length)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(OD(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return OD(this._table,i*this._tableRange+this._minPos,!0)}}});f1.register(_we,Y0e,$Ee,yCe);const bCe=["chartContainer"];function wCe(n,t){if(1&n&&(T(0,"div")(1,"h3"),F(2),I(),On(3,"canvas",2,3),I()),2&n){const e=t.$implicit;j(2),nt(e.name)}}function ECe(n,t){1&n&&(T(0,"div"),F(1," \u30c1\u30e3\u30fc\u30c8\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\n"),I())}const CCe=[{path:"",redirectTo:"/calendar",pathMatch:"full"},{path:"calendar",component:aye,canActivate:[iu]},{path:"projects",component:Cye,canActivate:[iu]},{path:"project/:id",component:H6,canActivate:[iu]},{path:"tasks",component:Kye,canActivate:[iu]},{path:"task/:id",component:zy,canActivate:[iu]},{path:"login",component:Qye},{path:"register",component:eve},{path:"reset-password",component:nve},{path:"profile",component:ive,canActivate:[iu]},{path:"user-search",component:DP,canActivate:[iu]},{path:"project-progress",component:(()=>{class n{constructor(e,i){this.projectService=e,this.taskService=i,this.projects=[],this.tasks$=be([]),this.statusCounts={},this.hasChartData=!1,console.log("ProjectProgressComponent constructor")}ngOnInit(){console.log("ProjectProgressComponent ngOnInit"),this.projectService.getProjectsByOwnerOrMember().subscribe(e=>{if(this.projects=e,console.log("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30fc\u30bf:",e),e&&e.length>0){const i=e.map(r=>r.id);console.log("Fetching tasks for projects:",i),this.tasks$=this.taskService.getTasksByProjectIds(i),this.tasks$.pipe(Fe(r=>(r.forEach(s=>{const o=s.projectId||"";this.statusCounts[o]||(this.statusCounts[o]={\u672a\u7740\u624b:0,\u9032\u884c\u4e2d:0,\u5b8c\u4e86:0}),this.statusCounts[o].hasOwnProperty(s.status)&&this.statusCounts[o][s.status]++}),r))).subscribe(r=>{console.log("\u30bf\u30b9\u30af\u30c7\u30fc\u30bf:",r),this.hasChartData=Object.values(this.statusCounts).some(s=>Object.values(s).some(o=>o>0)),this.hasChartData&&this.chartContainers.changes.subscribe(()=>{this.initializeCharts()})},r=>{console.error("\u30bf\u30b9\u30af\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f:",r)})}else console.log("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093")},e=>{console.error("\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f:",e)})}ngAfterViewInit(){console.log("ngAfterViewInit called"),this.initializeCharts()}initializeCharts(){this.chartContainers.forEach((e,i)=>{const s=this.projects[i].id;if(this.statusCounts[s]){const a={labels:["\u672a\u7740\u624b","\u9032\u884c\u4e2d","\u5b8c\u4e86"],datasets:[{data:[this.statusCounts[s].\u672a\u7740\u624b,this.statusCounts[s].\u9032\u884c\u4e2d,this.statusCounts[s].\u5b8c\u4e86],backgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]};new f1(e.nativeElement,{type:"pie",data:a,options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:l=>{const c=a.datasets[0].data.reduce((m,y)=>m+y,0),f=(a.datasets[0].data[l.dataIndex]/c*100).toFixed(2)+"%";return`${a.labels[l.dataIndex]}: ${f}`}}}}}})}else console.error("statusCounts is undefined for projectId:",s)})}static#e=this.\u0275fac=function(i){return new(i||n)(K(eh),K(th))};static#t=this.\u0275cmp=Ht({type:n,selectors:[["app-project-progress"]],viewQuery:function(i,r){if(1&i&&US(bCe,5),2&i){let s;td(s=nd())&&(r.chartContainers=s)}},decls:4,vars:2,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["width","800","height","400",2,"width","100%","height","400px"],["chartContainer",""]],template:function(i,r){1&i&&(T(0,"h2"),F(1,"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u9032\u6357"),I(),xe(2,wCe,5,1,"div",0),xe(3,ECe,2,0,"div",1)),2&i&&(j(2),W("ngForOf",r.projects),j(1),W("ngIf",!r.hasChartData))},styles:["canvas[_ngcontent-%COMP%]{display:block;margin:auto}"]})}return n})(),canActivate:[iu]}];(function _te(n,t){return RX({rootComponent:n,..._B(t)})})(rce,{providers:[pN(ede,Bs,Ufe,hpe,(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Wt({type:n});static#n=this.\u0275inj=Zt({imports:[Dc.forRoot(CCe),Dc]})}return n})(),T6.forRoot({provide:Xd,useFactory:V6}),Dre.initializeApp({apiKey:"AIzaSyBLib--Lb3kRU1UORbEgx76QxXWLr8rFZk",authDomain:"nozuki3rd.firebaseapp.com",projectId:"nozuki3rd",storageBucket:"nozuki3rd.appspot.com",messagingSenderId:"183357457685",appId:"1:183357457685:web:01b4a530cc30b2b310d51c"}),Xle)]}).catch(n=>console.error(n))},106:(Po,qi,wt)=>{wt.d(qi,{Z:()=>Ki});var L=wt(58),dt=wt(537),Ge=wt(534),_e=wt(879);class Ct{constructor(pt,Dt){this._delegate=pt,this.firebase=Dt,(0,Ge._addComponent)(pt,new dt.wA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ge.deleteApp)(this._delegate)))}_getService(pt,Dt=Ge._DEFAULT_ENTRY_NAME){var Zi;this._delegate.checkDestroyed();const Yi=this._delegate.container.getProvider(pt);return!Yi.isInitialized()&&"EXPLICIT"===(null===(Zi=Yi.getComponent())||void 0===Zi?void 0:Zi.instantiationMode)&&Yi.initialize(),Yi.getImmediate({identifier:Dt})}_removeServiceInstance(pt,Dt=Ge._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(Dt)}_addComponent(pt){(0,Ge._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,Ge._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ni=new L.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ce=function Vt(){const en=function Gi(en){const pt={},Dt={__esModule:!0,initializeApp:function Ln(st,ci={}){const Dn=Ge.initializeApp(st,ci);if((0,L.r3)(pt,Dn.name))return pt[Dn.name];const Se=new en(Dn,Dt);return pt[Dn.name]=Se,Se},app:Yi,registerVersion:Ge.registerVersion,setLogLevel:Ge.setLogLevel,onLog:Ge.onLog,apps:null,SDK_VERSION:Ge.SDK_VERSION,INTERNAL:{registerComponent:function _n(st){const ci=st.name,Dn=ci.replace("-compat","");if(Ge._registerComponent(st)&&"PUBLIC"===st.type){const Se=($n=Yi())=>{if("function"!=typeof $n[Dn])throw ni.create("invalid-app-argument",{appName:ci});return $n[Dn]()};void 0!==st.serviceProps&&(0,L.ZB)(Se,st.serviceProps),Dt[Dn]=Se,en.prototype[Dn]=function(...$n){return this._getService.bind(this,ci).apply(this,st.multipleInstances?$n:[])}}return"PUBLIC"===st.type?Dt[Dn]:null},removeApp:function Zi(st){delete pt[st]},useAsService:function br(st,ci){return"serverAuth"===ci?null:ci},modularAPIs:Ge}};function Yi(st){if(!(0,L.r3)(pt,st=st||Ge._DEFAULT_ENTRY_NAME))throw ni.create("no-app",{appName:st});return pt[st]}return Dt.default=Dt,Object.defineProperty(Dt,"apps",{get:function tn(){return Object.keys(pt).map(st=>pt[st])}}),Yi.App=en,Dt}(Ct);return en.INTERNAL=Object.assign(Object.assign({},en.INTERNAL),{createFirebaseNamespace:Vt,extendNamespace:function pt(Dt){(0,L.ZB)(en,Dt)},createSubscribe:L.ne,ErrorFactory:L.LL,deepExtend:L.ZB}),en}(),Re=new _e.Yd("@firebase/app-compat");if((0,L.jU)()&&void 0!==self.firebase){Re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const en=self.firebase.SDK_VERSION;en&&en.indexOf("LITE")>=0&&Re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ki=Ce;!function Qt(en){(0,Ge.registerVersion)("@firebase/app-compat","0.2.35",en)}()},534:(Po,qi,wt)=>{wt.r(qi),wt.d(qi,{FirebaseError:()=>_e.ZR,SDK_VERSION:()=>Nr,_DEFAULT_ENTRY_NAME:()=>zs,_addComponent:()=>Ws,_addOrOverwriteComponent:()=>Tn,_apps:()=>Pr,_clearComponents:()=>Or,_components:()=>Ci,_getProvider:()=>Di,_isFirebaseApp:()=>na,_isFirebaseServerApp:()=>Vl,_registerComponent:()=>Es,_removeServiceInstance:()=>yu,_serverApps:()=>$s,deleteApp:()=>ra,getApp:()=>jl,getApps:()=>vu,initializeApp:()=>ia,initializeServerApp:()=>_h,onLog:()=>X,registerVersion:()=>G,setLogLevel:()=>ve});var L=wt(861),dt=wt(537),Ge=wt(879),_e=wt(58);const Ct=(B,re)=>re.some(le=>B instanceof le);let zn,ni;const Ce=new WeakMap,Re=new WeakMap,Je=new WeakMap,Pt=new WeakMap,Qt=new WeakMap;let pt={get(B,re,le){if(B instanceof IDBTransaction){if("done"===re)return Re.get(B);if("objectStoreNames"===re)return B.objectStoreNames||Je.get(B);if("store"===re)return le.objectStoreNames[1]?void 0:le.objectStore(le.objectStoreNames[0])}return Ln(B[re])},set:(B,re,le)=>(B[re]=le,!0),has:(B,re)=>B instanceof IDBTransaction&&("done"===re||"store"===re)||re in B};function Yi(B){return"function"==typeof B?function Zi(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Vt(){return ni||(ni=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...re){return B.apply(tn(this),re),Ln(Ce.get(this))}:function(...re){return Ln(B.apply(tn(this),re))}:function(re,...le){const Ae=B.call(tn(this),re,...le);return Je.set(Ae,re.sort?re.sort():[re]),Ln(Ae)}}(B):(B instanceof IDBTransaction&&function en(B){if(Re.has(B))return;const re=new Promise((le,Ae)=>{const gt=()=>{B.removeEventListener("complete",yt),B.removeEventListener("error",xt),B.removeEventListener("abort",xt)},yt=()=>{le(),gt()},xt=()=>{Ae(B.error||new DOMException("AbortError","AbortError")),gt()};B.addEventListener("complete",yt),B.addEventListener("error",xt),B.addEventListener("abort",xt)});Re.set(B,re)}(B),Ct(B,function Gi(){return zn||(zn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,pt):B)}function Ln(B){if(B instanceof IDBRequest)return function Ki(B){const re=new Promise((le,Ae)=>{const gt=()=>{B.removeEventListener("success",yt),B.removeEventListener("error",xt)},yt=()=>{le(Ln(B.result)),gt()},xt=()=>{Ae(B.error),gt()};B.addEventListener("success",yt),B.addEventListener("error",xt)});return re.then(le=>{le instanceof IDBCursor&&Ce.set(le,B)}).catch(()=>{}),Qt.set(re,B),re}(B);if(Pt.has(B))return Pt.get(B);const re=Yi(B);return re!==B&&(Pt.set(B,re),Qt.set(re,B)),re}const tn=B=>Qt.get(B),st=["get","getKey","getAll","getAllKeys","count"],ci=["put","add","delete","clear"],Dn=new Map;function Se(B,re){if(!(B instanceof IDBDatabase)||re in B||"string"!=typeof re)return;if(Dn.get(re))return Dn.get(re);const le=re.replace(/FromIndex$/,""),Ae=re!==le,gt=ci.includes(le);if(!(le in(Ae?IDBIndex:IDBObjectStore).prototype)||!gt&&!st.includes(le))return;const yt=function(){var xt=(0,L.Z)(function*(In,...Ot){const Cs=this.transaction(In,gt?"readwrite":"readonly");let Ha=Cs.store;return Ae&&(Ha=Ha.index(Ot.shift())),(yield Promise.all([Ha[le](...Ot),gt&&Cs.done]))[0]});return function(Ot){return xt.apply(this,arguments)}}();return Dn.set(re,yt),yt}!function Dt(B){pt=B(pt)}(B=>({...B,get:(re,le,Ae)=>Se(re,le)||B.get(re,le,Ae),has:(re,le)=>!!Se(re,le)||B.has(re,le)}));class $n{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(le=>{if(function Pn(B){const re=B.getComponent();return"VERSION"===re?.type}(le)){const Ae=le.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(le=>le).join(" ")}}const ss="@firebase/app",bs="0.10.5",ft=new Ge.Yd("@firebase/app"),zs="[DEFAULT]",_u={[ss]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Pr=new Map,$s=new Map,Ci=new Map;function Ws(B,re){try{B.container.addComponent(re)}catch(le){ft.debug(`Component ${re.name} failed to register with FirebaseApp ${B.name}`,le)}}function Tn(B,re){B.container.addOrOverwriteComponent(re)}function Es(B){const re=B.name;if(Ci.has(re))return ft.debug(`There were multiple attempts to register component ${re}.`),!1;Ci.set(re,B);for(const le of Pr.values())Ws(le,B);for(const le of $s.values())Ws(le,B);return!0}function Di(B,re){const le=B.container.getProvider("heartbeat").getImmediate({optional:!0});return le&&le.triggerHeartbeat(),B.container.getProvider(re)}function yu(B,re,le=zs){Di(B,re).clearInstance(le)}function na(B){return void 0!==B.options}function Vl(B){return void 0!==B.settings}function Or(){Ci.clear()}const Ti=new _e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Bl{constructor(re,le,Ae){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},le),this._name=le.name,this._automaticDataCollectionEnabled=le.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new dt.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}class os extends Bl{constructor(re,le,Ae,gt){const yt=void 0!==le.automaticDataCollectionEnabled&&le.automaticDataCollectionEnabled,xt={name:Ae,automaticDataCollectionEnabled:yt};super(void 0!==re.apiKey?re:re.options,xt,gt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:yt},le),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,le.releaseOnDeref=void 0,G(ss,bs,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(re){this.isDeleted||(this._refCount++,void 0!==re&&this._finalizationRegistry.register(re,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ra(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ti.create("server-app-deleted")}}const Nr="10.12.2";function ia(B,re={}){let le=B;"object"!=typeof re&&(re={name:re});const Ae=Object.assign({name:zs,automaticDataCollectionEnabled:!1},re),gt=Ae.name;if("string"!=typeof gt||!gt)throw Ti.create("bad-app-name",{appName:String(gt)});if(le||(le=(0,_e.aH)()),!le)throw Ti.create("no-options");const yt=Pr.get(gt);if(yt){if((0,_e.vZ)(le,yt.options)&&(0,_e.vZ)(Ae,yt.config))return yt;throw Ti.create("duplicate-app",{appName:gt})}const xt=new dt.H0(gt);for(const Ot of Ci.values())xt.addComponent(Ot);const In=new Bl(le,Ae,xt);return Pr.set(gt,In),In}function _h(B,re){if((0,_e.jU)())throw Ti.create("invalid-server-app-environment");let le;void 0===re.automaticDataCollectionEnabled&&(re.automaticDataCollectionEnabled=!1),le=na(B)?B.options:B;const Ae=Object.assign(Object.assign({},re),le);if(void 0!==Ae.releaseOnDeref&&delete Ae.releaseOnDeref,void 0!==re.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ti.create("finalization-registry-not-supported",{});const yt=""+(Cs=JSON.stringify(Ae),[...Cs].reduce((Ha,Av)=>Math.imul(31,Ha)+Av.charCodeAt(0)|0,0)),xt=$s.get(yt);var Cs;if(xt)return xt.incRefCount(re.releaseOnDeref),xt;const In=new dt.H0(yt);for(const Cs of Ci.values())In.addComponent(Cs);const Ot=new os(le,re,yt,In);return $s.set(yt,Ot),Ot}function jl(B=zs){const re=Pr.get(B);if(!re&&B===zs&&(0,_e.aH)())return ia();if(!re)throw Ti.create("no-app",{appName:B});return re}function vu(){return Array.from(Pr.values())}function ra(B){return Q.apply(this,arguments)}function Q(){return(Q=(0,L.Z)(function*(B){let re=!1;const le=B.name;Pr.has(le)?(re=!0,Pr.delete(le)):$s.has(le)&&B.decRefCount()<=0&&($s.delete(le),re=!0),re&&(yield Promise.all(B.container.getProviders().map(Ae=>Ae.delete())),B.isDeleted=!0)})).apply(this,arguments)}function G(B,re,le){var Ae;let gt=null!==(Ae=_u[B])&&void 0!==Ae?Ae:B;le&&(gt+=`-${le}`);const yt=gt.match(/\s|\//),xt=re.match(/\s|\//);if(yt||xt){const In=[`Unable to register library "${gt}" with version "${re}":`];return yt&&In.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),yt&&xt&&In.push("and"),xt&&In.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void ft.warn(In.join(" "))}Es(new dt.wA(`${gt}-version`,()=>({library:gt,version:re}),"VERSION"))}function X(B,re){if(null!==B&&"function"!=typeof B)throw Ti.create("invalid-log-argument");(0,Ge.Am)(B,re)}function ve(B){(0,Ge.Ub)(B)}const se="firebase-heartbeat-database",be=1,Xe="firebase-heartbeat-store";let cn=null;function at(){return cn||(cn=function _n(B,re,{blocked:le,upgrade:Ae,blocking:gt,terminated:yt}={}){const xt=indexedDB.open(B,re),In=Ln(xt);return Ae&&xt.addEventListener("upgradeneeded",Ot=>{Ae(Ln(xt.result),Ot.oldVersion,Ot.newVersion,Ln(xt.transaction),Ot)}),le&&xt.addEventListener("blocked",Ot=>le(Ot.oldVersion,Ot.newVersion,Ot)),In.then(Ot=>{yt&&Ot.addEventListener("close",()=>yt()),gt&&Ot.addEventListener("versionchange",Cs=>gt(Cs.oldVersion,Cs.newVersion,Cs))}).catch(()=>{}),In}(se,be,{upgrade:(B,re)=>{if(0===re)try{B.createObjectStore(Xe)}catch(le){console.warn(le)}}}).catch(B=>{throw Ti.create("idb-open",{originalErrorMessage:B.message})})),cn}function Si(){return(Si=(0,L.Z)(function*(B){try{const le=(yield at()).transaction(Xe),Ae=yield le.objectStore(Xe).get(yn(B));return yield le.done,Ae}catch(re){if(re instanceof _e.ZR)ft.warn(re.message);else{const le=Ti.create("idb-get",{originalErrorMessage:re?.message});ft.warn(le.message)}}})).apply(this,arguments)}function Ye(B,re){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,L.Z)(function*(B,re){try{const Ae=(yield at()).transaction(Xe,"readwrite");yield Ae.objectStore(Xe).put(re,yn(B)),yield Ae.done}catch(le){if(le instanceof _e.ZR)ft.warn(le.message);else{const Ae=Ti.create("idb-set",{originalErrorMessage:le?.message});ft.warn(Ae.message)}}})).apply(this,arguments)}function yn(B){return`${B.name}!${B.options.appId}`}class dn{constructor(re){this.container=re,this._heartbeatsCache=null;const le=this.container.getProvider("app").getImmediate();this._storage=new Ul(le),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var re=this;return(0,L.Z)(function*(){var le,Ae;const yt=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=lt();if((null!=(null===(le=re._heartbeatsCache)||void 0===le?void 0:le.heartbeats)||(re._heartbeatsCache=yield re._heartbeatsCachePromise,null!=(null===(Ae=re._heartbeatsCache)||void 0===Ae?void 0:Ae.heartbeats)))&&re._heartbeatsCache.lastSentHeartbeatDate!==xt&&!re._heartbeatsCache.heartbeats.some(In=>In.date===xt))return re._heartbeatsCache.heartbeats.push({date:xt,agent:yt}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(In=>{const Ot=new Date(In.date).valueOf();return Date.now()-Ot<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,L.Z)(function*(){var le;if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null==(null===(le=re._heartbeatsCache)||void 0===le?void 0:le.heartbeats)||0===re._heartbeatsCache.heartbeats.length)return"";const Ae=lt(),{heartbeatsToSend:gt,unsentEntries:yt}=function Oo(B,re=1024){const le=[];let Ae=B.slice();for(const gt of B){const yt=le.find(xt=>xt.agent===gt.agent);if(yt){if(yt.dates.push(gt.date),yh(le)>re){yt.dates.pop();break}}else if(le.push({agent:gt.agent,dates:[gt.date]}),yh(le)>re){le.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:le,unsentEntries:Ae}}(re._heartbeatsCache.heartbeats),xt=(0,_e.L)(JSON.stringify({version:2,heartbeats:gt}));return re._heartbeatsCache.lastSentHeartbeatDate=Ae,yt.length>0?(re._heartbeatsCache.heartbeats=yt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),xt})()}}function lt(){return(new Date).toISOString().substring(0,10)}class Ul{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,L.Z)(function*(){return!!(0,_e.hl)()&&(0,_e.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,L.Z)(function*(){if(yield re._canUseIndexedDBPromise){const Ae=yield function Ii(B){return Si.apply(this,arguments)}(re.app);return Ae?.heartbeats?Ae:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(re){var le=this;return(0,L.Z)(function*(){var Ae;if(yield le._canUseIndexedDBPromise){const yt=yield le.read();return Ye(le.app,{lastSentHeartbeatDate:null!==(Ae=re.lastSentHeartbeatDate)&&void 0!==Ae?Ae:yt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var le=this;return(0,L.Z)(function*(){var Ae;if(yield le._canUseIndexedDBPromise){const yt=yield le.read();return Ye(le.app,{lastSentHeartbeatDate:null!==(Ae=re.lastSentHeartbeatDate)&&void 0!==Ae?Ae:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...re.heartbeats]})}})()}}function yh(B){return(0,_e.L)(JSON.stringify({version:2,heartbeats:B})).length}!function No(B){Es(new dt.wA("platform-logger",re=>new $n(re),"PRIVATE")),Es(new dt.wA("heartbeat",re=>new dn(re),"PRIVATE")),G(ss,bs,B),G(ss,bs,"esm2017"),G("fire-js","")}("")},537:(Po,qi,wt)=>{wt.d(qi,{H0:()=>Gi,wA:()=>Ge});var L=wt(861),dt=wt(58);class Ge{constructor(Ce,Re,Je){this.name=Ce,this.instanceFactory=Re,this.type=Je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ce){return this.instantiationMode=Ce,this}setMultipleInstances(Ce){return this.multipleInstances=Ce,this}setServiceProps(Ce){return this.serviceProps=Ce,this}setInstanceCreatedCallback(Ce){return this.onInstanceCreated=Ce,this}}const _e="[DEFAULT]";class Ct{constructor(Ce,Re){this.name=Ce,this.container=Re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ce){const Re=this.normalizeInstanceIdentifier(Ce);if(!this.instancesDeferred.has(Re)){const Je=new dt.BH;if(this.instancesDeferred.set(Re,Je),this.isInitialized(Re)||this.shouldAutoInitialize())try{const Pt=this.getOrInitializeService({instanceIdentifier:Re});Pt&&Je.resolve(Pt)}catch{}}return this.instancesDeferred.get(Re).promise}getImmediate(Ce){var Re;const Je=this.normalizeInstanceIdentifier(Ce?.identifier),Pt=null!==(Re=Ce?.optional)&&void 0!==Re&&Re;if(!this.isInitialized(Je)&&!this.shouldAutoInitialize()){if(Pt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Je})}catch(Qt){if(Pt)return null;throw Qt}}getComponent(){return this.component}setComponent(Ce){if(Ce.name!==this.name)throw Error(`Mismatching Component ${Ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ce,this.shouldAutoInitialize()){if(function ni(Vt){return"EAGER"===Vt.instantiationMode}(Ce))try{this.getOrInitializeService({instanceIdentifier:_e})}catch{}for(const[Re,Je]of this.instancesDeferred.entries()){const Pt=this.normalizeInstanceIdentifier(Re);try{const Qt=this.getOrInitializeService({instanceIdentifier:Pt});Je.resolve(Qt)}catch{}}}}clearInstance(Ce=_e){this.instancesDeferred.delete(Ce),this.instancesOptions.delete(Ce),this.instances.delete(Ce)}delete(){var Ce=this;return(0,L.Z)(function*(){const Re=Array.from(Ce.instances.values());yield Promise.all([...Re.filter(Je=>"INTERNAL"in Je).map(Je=>Je.INTERNAL.delete()),...Re.filter(Je=>"_delete"in Je).map(Je=>Je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ce=_e){return this.instances.has(Ce)}getOptions(Ce=_e){return this.instancesOptions.get(Ce)||{}}initialize(Ce={}){const{options:Re={}}=Ce,Je=this.normalizeInstanceIdentifier(Ce.instanceIdentifier);if(this.isInitialized(Je))throw Error(`${this.name}(${Je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pt=this.getOrInitializeService({instanceIdentifier:Je,options:Re});for(const[Qt,Ki]of this.instancesDeferred.entries())Je===this.normalizeInstanceIdentifier(Qt)&&Ki.resolve(Pt);return Pt}onInit(Ce,Re){var Je;const Pt=this.normalizeInstanceIdentifier(Re),Qt=null!==(Je=this.onInitCallbacks.get(Pt))&&void 0!==Je?Je:new Set;Qt.add(Ce),this.onInitCallbacks.set(Pt,Qt);const Ki=this.instances.get(Pt);return Ki&&Ce(Ki,Pt),()=>{Qt.delete(Ce)}}invokeOnInitCallbacks(Ce,Re){const Je=this.onInitCallbacks.get(Re);if(Je)for(const Pt of Je)try{Pt(Ce,Re)}catch{}}getOrInitializeService({instanceIdentifier:Ce,options:Re={}}){let Je=this.instances.get(Ce);if(!Je&&this.component&&(Je=this.component.instanceFactory(this.container,{instanceIdentifier:(Vt=Ce,Vt===_e?void 0:Vt),options:Re}),this.instances.set(Ce,Je),this.instancesOptions.set(Ce,Re),this.invokeOnInitCallbacks(Je,Ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ce,Je)}catch{}var Vt;return Je||null}normalizeInstanceIdentifier(Ce=_e){return this.component?this.component.multipleInstances?Ce:_e:Ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Gi{constructor(Ce){this.name=Ce,this.providers=new Map}addComponent(Ce){const Re=this.getProvider(Ce.name);if(Re.isComponentSet())throw new Error(`Component ${Ce.name} has already been registered with ${this.name}`);Re.setComponent(Ce)}addOrOverwriteComponent(Ce){this.getProvider(Ce.name).isComponentSet()&&this.providers.delete(Ce.name),this.addComponent(Ce)}getProvider(Ce){if(this.providers.has(Ce))return this.providers.get(Ce);const Re=new Ct(Ce,this);return this.providers.set(Ce,Re),Re}getProviders(){return Array.from(this.providers.values())}}},879:(Po,qi,wt)=>{wt.d(qi,{Am:()=>Vt,Ub:()=>Gi,Yd:()=>ni,in:()=>dt});const L=[];var dt=function(Ce){return Ce[Ce.DEBUG=0]="DEBUG",Ce[Ce.VERBOSE=1]="VERBOSE",Ce[Ce.INFO=2]="INFO",Ce[Ce.WARN=3]="WARN",Ce[Ce.ERROR=4]="ERROR",Ce[Ce.SILENT=5]="SILENT",Ce}(dt||{});const Ge={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},_e=dt.INFO,Ct={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},zn=(Ce,Re,...Je)=>{if(Re<Ce.logLevel)return;const Pt=(new Date).toISOString(),Qt=Ct[Re];if(!Qt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Re})`);console[Qt](`[${Pt}]  ${Ce.name}:`,...Je)};class ni{constructor(Re){this.name=Re,this._logLevel=_e,this._logHandler=zn,this._userLogHandler=null,L.push(this)}get logLevel(){return this._logLevel}set logLevel(Re){if(!(Re in dt))throw new TypeError(`Invalid value "${Re}" assigned to \`logLevel\``);this._logLevel=Re}setLogLevel(Re){this._logLevel="string"==typeof Re?Ge[Re]:Re}get logHandler(){return this._logHandler}set logHandler(Re){if("function"!=typeof Re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Re}get userLogHandler(){return this._userLogHandler}set userLogHandler(Re){this._userLogHandler=Re}debug(...Re){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...Re),this._logHandler(this,dt.DEBUG,...Re)}log(...Re){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...Re),this._logHandler(this,dt.VERBOSE,...Re)}info(...Re){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...Re),this._logHandler(this,dt.INFO,...Re)}warn(...Re){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...Re),this._logHandler(this,dt.WARN,...Re)}error(...Re){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...Re),this._logHandler(this,dt.ERROR,...Re)}}function Gi(Ce){L.forEach(Re=>{Re.setLogLevel(Ce)})}function Vt(Ce,Re){for(const Je of L){let Pt=null;Re&&Re.level&&(Pt=Ge[Re.level]),Je.userLogHandler=null===Ce?null:(Qt,Ki,...en)=>{const pt=en.map(Dt=>{if(null==Dt)return null;if("string"==typeof Dt)return Dt;if("number"==typeof Dt||"boolean"==typeof Dt)return Dt.toString();if(Dt instanceof Error)return Dt.message;try{return JSON.stringify(Dt)}catch{return null}}).filter(Dt=>Dt).join(" ");Ki>=(Pt??Qt.logLevel)&&Ce({level:dt[Ki].toLowerCase(),message:pt,args:en,type:Qt.name})}}}},985:(Po,qi,wt)=>{wt.r(qi);var L=wt(861),dt=wt(106),Ge=wt(534),_e=wt(58),Ct=wt(879),zn=wt(582),ni=wt(537);const Vt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ki=function Pt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},en=function Qt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new _e.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Zi=new Ct.Yd("@firebase/auth");function Ln(g,...d){Zi.logLevel<=Ct.in.ERROR&&Zi.error(`Auth (${Ge.SDK_VERSION}): ${g}`,...d)}function tn(g,...d){throw Dn(g,...d)}function _n(g,...d){return Dn(g,...d)}function br(g,d,h){const _=Object.assign(Object.assign({},en()),{[d]:h});return new _e.LL("auth","Firebase",_).create(d,{appName:g.name})}function st(g){return br(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ci(g,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&tn(g,"argument-error"),br(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dn(g,...d){if("string"!=typeof g){const h=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(h,..._)}return pt.create(g,...d)}function Se(g,d,...h){if(!g)throw Dn(d,...h)}function $n(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Ln(d),new Error(d)}function Pn(g,d){g||$n(d)}function ss(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function bs(){return"http:"===ft()||"https:"===ft()}function ft(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class ue{constructor(d,h){this.shortDelay=d,this.longDelay=h,Pn(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,_e.uI)()||(0,_e.b$)()}get(){return function Va(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bs()||(0,_e.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ge(g,d){Pn(g.emulator,"Emulator should always be set here");const{url:h}=g.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class ne{static initialize(d,h,_){this.fetchImpl=d,h&&(this.headersImpl=h),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void $n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void $n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void $n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Oe=new ue(3e4,6e4);function pe(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Pe(g,d,h,_){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,L.Z)(function*(g,d,h,_,C={}){return Fe(g,C,(0,L.Z)(function*(){let x={},Y={};_&&("GET"===d?Y=_:x={body:JSON.stringify(_)});const ie=(0,_e.xO)(Object.assign({key:g.config.apiKey},Y)).slice(1),we=yield g._getAdditionalHeaders();return we["Content-Type"]="application/json",g.languageCode&&(we["X-Firebase-Locale"]=g.languageCode),ne.fetch()(ws(g,g.config.apiHost,h,ie),Object.assign({method:d,headers:we,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Fe(g,d,h){return rt.apply(this,arguments)}function rt(){return(rt=(0,L.Z)(function*(g,d,h){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ee),d);try{const C=new Ei(g),x=yield Promise.race([h(),C.promise]);C.clearNetworkTimeout();const Y=yield x.json();if("needConfirmation"in Y)throw ui(g,"account-exists-with-different-credential",Y);if(x.ok&&!("errorMessage"in Y))return Y;{const ie=x.ok?Y.errorMessage:Y.error.message,[we,Ve]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===we)throw ui(g,"credential-already-in-use",Y);if("EMAIL_EXISTS"===we)throw ui(g,"email-already-in-use",Y);if("USER_DISABLED"===we)throw ui(g,"user-disabled",Y);const Ke=_[we]||we.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw br(g,Ke,Ve);tn(g,Ke)}}catch(C){if(C instanceof _e.ZR)throw C;tn(g,"network-request-failed",{message:String(C)})}})).apply(this,arguments)}function Tt(g,d,h,_){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,L.Z)(function*(g,d,h,_,C={}){const x=yield Pe(g,d,h,_,C);return"mfaPendingCredential"in x&&tn(g,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function ws(g,d,h,_){const C=`${d}${h}?${_}`;return g.config.emulator?ge(g.config,C):`${g.config.apiScheme}://${C}`}function ln(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ei{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,_)=>{this.timer=setTimeout(()=>_(_n(this.auth,"network-request-failed")),Oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ui(g,d,h){const _={appName:g.name};h.email&&(_.email=h.email),h.phoneNumber&&(_.phoneNumber=h.phoneNumber);const C=_n(g,d,_);return C.customData._tokenResponse=h,C}function cr(g){return void 0!==g&&void 0!==g.getResponse}function wr(g){return void 0!==g&&void 0!==g.enterprise}class Ll{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===d)return ln(h.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function ii(){return(ii=(0,L.Z)(function*(g){return(yield Pe(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gu(g,d){return ja.apply(this,arguments)}function ja(){return(ja=(0,L.Z)(function*(g,d){return Pe(g,"GET","/v2/recaptchaConfig",pe(g,d))})).apply(this,arguments)}function zs(){return(zs=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Pr(){return(Pr=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function $s(g,d){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Ws(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Di(){return(Di=(0,L.Z)(function*(g,d=!1){const h=(0,_e.m9)(g),_=yield h.getIdToken(d),C=na(_);Se(C&&C.exp&&C.auth_time&&C.iat,h.auth,"internal-error");const x="object"==typeof C.firebase?C.firebase:void 0,Y=x?.sign_in_provider;return{claims:C,token:_,authTime:Ws(yu(C.auth_time)),issuedAtTime:Ws(yu(C.iat)),expirationTime:Ws(yu(C.exp)),signInProvider:Y||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function yu(g){return 1e3*Number(g)}function na(g){const[d,h,_]=g.split(".");if(void 0===d||void 0===h||void 0===_)return Ln("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,_e.tV)(h);return C?JSON.parse(C):(Ln("Failed to decode base64 JWT payload"),null)}catch(C){return Ln("Caught error parsing JWT payload as JSON",C?.toString()),null}}function Vl(g){const d=na(g);return Se(d,"internal-error"),Se(typeof d.exp<"u","internal-error"),Se(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function Or(g,d){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,L.Z)(function*(g,d,h=!1){if(h)return d;try{return yield d}catch(_){throw _ instanceof _e.ZR&&function Ti({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class Bl{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const C=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,L.Z)(function*(){yield h.iteration()}),_)}iteration(){var d=this;return(0,L.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class os{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ws(this.lastLoginAt),this.creationTime=Ws(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nr(g){return ia.apply(this,arguments)}function ia(){return(ia=(0,L.Z)(function*(g){var d;const h=g.auth,_=yield g.getIdToken(),C=yield Or(g,$s(h,{idToken:_}));Se(C?.users.length,h,"internal-error");const x=C.users[0];g._notifyReloadListener(x);const Y=null!==(d=x.providerUserInfo)&&void 0!==d&&d.length?ra(x.providerUserInfo):[],ie=function vu(g,d){return[...g.filter(_=>!d.some(C=>C.providerId===_.providerId)),...d]}(g.providerData,Y),Ke=!!g.isAnonymous&&!(g.email&&x.passwordHash||ie?.length),Ze={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ie,metadata:new os(x.createdAt,x.lastLoginAt),isAnonymous:Ke};Object.assign(g,Ze)})).apply(this,arguments)}function jl(){return(jl=(0,L.Z)(function*(g){const d=(0,_e.m9)(g);yield Nr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ra(g){return g.map(d=>{var{providerId:h}=d,_=(0,zn._T)(d,["providerId"]);return{providerId:h,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function G(){return(G=(0,L.Z)(function*(g,d){const h=yield Fe(g,{},(0,L.Z)(function*(){const _=(0,_e.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:C,apiKey:x}=g.config,Y=ws(g,C,"/v1/token",`key=${x}`),ie=yield g._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",ne.fetch()(Y,{method:"POST",headers:ie,body:_})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function ve(){return(ve=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v2/accounts:revokeToken",pe(g,d))})).apply(this,arguments)}class se{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Se(d.idToken,"internal-error"),Se(typeof d.idToken<"u","internal-error"),Se(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):Vl(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}updateFromIdToken(d){Se(0!==d.length,"internal-error");const h=Vl(d);this.updateTokensAndExpiration(d,null,h)}getToken(d,h=!1){var _=this;return(0,L.Z)(function*(){return h||!_.accessToken||_.isExpired?(Se(_.refreshToken,d,"user-token-expired"),_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null):_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var _=this;return(0,L.Z)(function*(){const{accessToken:C,refreshToken:x,expiresIn:Y}=yield function Q(g,d){return G.apply(this,arguments)}(d,h);_.updateTokensAndExpiration(C,x,Number(Y))})()}updateTokensAndExpiration(d,h,_){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,h){const{refreshToken:_,accessToken:C,expirationTime:x}=h,Y=new se;return _&&(Se("string"==typeof _,"internal-error",{appName:d}),Y.refreshToken=_),C&&(Se("string"==typeof C,"internal-error",{appName:d}),Y.accessToken=C),x&&(Se("number"==typeof x,"internal-error",{appName:d}),Y.expirationTime=x),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new se,this.toJSON())}_performRefresh(){return $n("not implemented")}}function be(g,d){Se("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class Xe{constructor(d){var{uid:h,auth:_,stsTokenManager:C}=d,x=(0,zn._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=_,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new os(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,L.Z)(function*(){const _=yield Or(h,h.stsTokenManager.getToken(h.auth,d));return Se(_,h.auth,"internal-error"),h.accessToken!==_&&(h.accessToken=_,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),_})()}getIdTokenResult(d){return function Es(g){return Di.apply(this,arguments)}(this,d)}reload(){return function _h(g){return jl.apply(this,arguments)}(this)}_assign(d){this!==d&&(Se(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new Xe(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var _=this;return(0,L.Z)(function*(){let C=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),C=!0),h&&(yield Nr(_)),yield _.auth._persistUserIfCurrent(_),C&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,L.Z)(function*(){if((0,Ge._isFirebaseServerApp)(d.auth.app))return Promise.reject(st(d.auth));const h=yield d.getIdToken();return yield Or(d,function mu(g,d){return zs.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var _,C,x,Y,ie,we,Ve,Ke;const Ze=null!==(_=h.displayName)&&void 0!==_?_:void 0,Mn=null!==(C=h.email)&&void 0!==C?C:void 0,xs=null!==(x=h.phoneNumber)&&void 0!==x?x:void 0,sf=null!==(Y=h.photoURL)&&void 0!==Y?Y:void 0,_m=null!==(ie=h.tenantId)&&void 0!==ie?ie:void 0,iw=null!==(we=h._redirectEventId)&&void 0!==we?we:void 0,ym=null!==(Ve=h.createdAt)&&void 0!==Ve?Ve:void 0,XT=null!==(Ke=h.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:vm,emailVerified:rw,isAnonymous:af,providerData:sw,stsTokenManager:JT}=h;Se(vm&&JT,d,"internal-error");const bm=se.fromJSON(this.name,JT);Se("string"==typeof vm,d,"internal-error"),be(Ze,d.name),be(Mn,d.name),Se("boolean"==typeof rw,d,"internal-error"),Se("boolean"==typeof af,d,"internal-error"),be(xs,d.name),be(sf,d.name),be(_m,d.name),be(iw,d.name),be(ym,d.name),be(XT,d.name);const ow=new Xe({uid:vm,auth:d,email:Mn,emailVerified:rw,displayName:Ze,isAnonymous:af,photoURL:sf,phoneNumber:xs,tenantId:_m,stsTokenManager:bm,createdAt:ym,lastLoginAt:XT});return sw&&Array.isArray(sw)&&(ow.providerData=sw.map(EO=>Object.assign({},EO))),iw&&(ow._redirectEventId=iw),ow}static _fromIdTokenResponse(d,h,_=!1){return(0,L.Z)(function*(){const C=new se;C.updateFromServerResponse(h);const x=new Xe({uid:h.localId,auth:d,stsTokenManager:C,isAnonymous:_});return yield Nr(x),x})()}static _fromGetAccountInfoResponse(d,h,_){return(0,L.Z)(function*(){const C=h.users[0];Se(void 0!==C.localId,"internal-error");const x=void 0!==C.providerUserInfo?ra(C.providerUserInfo):[],Y=!(C.email&&C.passwordHash||x?.length),ie=new se;ie.updateFromIdToken(_);const we=new Xe({uid:C.localId,auth:d,stsTokenManager:ie,isAnonymous:Y}),Ve={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:x,metadata:new os(C.createdAt,C.lastLoginAt),isAnonymous:!(C.email&&C.passwordHash||x?.length)};return Object.assign(we,Ve),we})()}}const cn=new Map;function at(g){Pn(g instanceof Function,"Expected a class definition");let d=cn.get(g);return d?(Pn(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,cn.set(g,d),d)}const Si=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,L.Z)(function*(){return!0})()}_set(h,_){var C=this;return(0,L.Z)(function*(){C.storage[h]=_})()}_get(h){var _=this;return(0,L.Z)(function*(){const C=_.storage[h];return void 0===C?null:C})()}_remove(h){var _=this;return(0,L.Z)(function*(){delete _.storage[h]})()}_addListener(h,_){}_removeListener(h,_){}}return g.type="NONE",g})();function Ye(g,d,h){return`firebase:${g}:${d}:${h}`}class Wn{constructor(d,h,_){this.persistence=d,this.auth=h,this.userKey=_;const{config:C,name:x}=this.auth;this.fullUserKey=Ye(this.userKey,C.apiKey,x),this.fullPersistenceKey=Ye("persistence",C.apiKey,x),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,L.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?Xe._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,L.Z)(function*(){if(h.persistence===d)return;const _=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,_?h.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,_="authUser"){return(0,L.Z)(function*(){if(!h.length)return new Wn(at(Si),d,_);const C=(yield Promise.all(h.map(function(){var Ve=(0,L.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let x=C[0]||at(Si);const Y=Ye(_,d.config.apiKey,d.name);let ie=null;for(const Ve of h)try{const Ke=yield Ve._get(Y);if(Ke){const Ze=Xe._fromJSON(d,Ke);Ve!==x&&(ie=Ze),x=Ve;break}}catch{}const we=C.filter(Ve=>Ve._shouldAllowMigration);return x._shouldAllowMigration&&we.length?(x=we[0],ie&&(yield x._set(Y,ie.toJSON())),yield Promise.all(h.map(function(){var Ve=(0,L.Z)(function*(Ke){if(Ke!==x)try{yield Ke._remove(Y)}catch{}});return function(Ke){return Ve.apply(this,arguments)}}())),new Wn(x,d,_)):new Wn(x,d,_)})()}}function yn(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(lt(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(sa(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Ul(d))return"Blackberry";if(yh(d))return"Webos";if(bu(d))return"Safari";if((d.includes("chrome/")||dn(d))&&!d.includes("edge/"))return"Chrome";if(Oo(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function sa(g=(0,_e.z$)()){return/firefox\//i.test(g)}function bu(g=(0,_e.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function dn(g=(0,_e.z$)()){return/crios\//i.test(g)}function lt(g=(0,_e.z$)()){return/iemobile/i.test(g)}function Oo(g=(0,_e.z$)()){return/android/i.test(g)}function Ul(g=(0,_e.z$)()){return/blackberry/i.test(g)}function yh(g=(0,_e.z$)()){return/webos/i.test(g)}function No(g=(0,_e.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function Ae(g=(0,_e.z$)()){return No(g)||Oo(g)||yh(g)||Ul(g)||/windows phone/i.test(g)||lt(g)}function yt(g,d=[]){let h;switch(g){case"Browser":h=yn((0,_e.z$)());break;case"Worker":h=`${yn((0,_e.z$)())}-${g}`;break;default:h=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${Ge.SDK_VERSION}/${_}`}class xt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const _=x=>new Promise((Y,ie)=>{try{Y(d(x))}catch(we){ie(we)}});_.onAbort=h,this.queue.push(_);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,L.Z)(function*(){if(h.auth.currentUser===d)return;const _=[];try{for(const C of h.queue)yield C(d),C.onAbort&&_.push(C.onAbort)}catch(C){_.reverse();for(const x of _)try{x()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:C?.message})}})()}}function Ot(){return(Ot=(0,L.Z)(function*(g,d={}){return Pe(g,"GET","/v2/passwordPolicy",pe(g,d))})).apply(this,arguments)}class Ha{constructor(d){var h,_,C,x;const Y=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=Y.minPasswordLength)&&void 0!==h?h:6,Y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Y.maxPasswordLength),void 0!==Y.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Y.containsLowercaseCharacter),void 0!==Y.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Y.containsUppercaseCharacter),void 0!==Y.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Y.containsNumericCharacter),void 0!==Y.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Y.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(C=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==C?C:"",this.forceUpgradeOnSignin=null!==(x=d.forceUpgradeOnSignin)&&void 0!==x&&x,this.schemaVersion=d.schemaVersion}validatePassword(d){var h,_,C,x,Y,ie;const we={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,we),this.validatePasswordCharacterOptions(d,we),we.isValid&&(we.isValid=null===(h=we.meetsMinPasswordLength)||void 0===h||h),we.isValid&&(we.isValid=null===(_=we.meetsMaxPasswordLength)||void 0===_||_),we.isValid&&(we.isValid=null===(C=we.containsLowercaseLetter)||void 0===C||C),we.isValid&&(we.isValid=null===(x=we.containsUppercaseLetter)||void 0===x||x),we.isValid&&(we.isValid=null===(Y=we.containsNumericCharacter)||void 0===Y||Y),we.isValid&&(we.isValid=null===(ie=we.containsNonAlphanumericCharacter)||void 0===ie||ie),we}validatePasswordLengthOptions(d,h){const _=this.customStrengthOptions.minPasswordLength,C=this.customStrengthOptions.maxPasswordLength;_&&(h.meetsMinPasswordLength=d.length>=_),C&&(h.meetsMaxPasswordLength=d.length<=C)}validatePasswordCharacterOptions(d,h){let _;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let C=0;C<d.length;C++)_=d.charAt(C),this.updatePasswordCharacterOptionsStatuses(h,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,h,_,C,x){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=C)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=x))}}class Av{constructor(d,h,_,C){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YD(this),this.idTokenSubscription=new YD(this),this.beforeStateQueue=new xt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(d,h){var _=this;return h&&(this._popupRedirectResolver=at(h)),this._initializationPromise=this.queue((0,L.Z)(function*(){var C,x;if(!_._deleted&&(_.persistenceManager=yield Wn.create(_,d),!_._deleted)){if(null!==(C=_._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(h),_.lastNotifiedUid=(null===(x=_.currentUser)||void 0===x?void 0:x.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,L.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(d){var h=this;return(0,L.Z)(function*(){try{const _=yield $s(h,{idToken:d}),C=yield Xe._fromGetAccountInfoResponse(h,_,d);yield h.directlySetCurrentUser(C)}catch(_){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",_),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var h=this;return(0,L.Z)(function*(){var _;if((0,Ge._isFirebaseServerApp)(h.app)){const ie=h.app.settings.authIdToken;return ie?new Promise(we=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(ie).then(we,we))}):h.directlySetCurrentUser(null)}const C=yield h.assertedPersistence.getCurrentUser();let x=C,Y=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const ie=null===(_=h.redirectUser)||void 0===_?void 0:_._redirectEventId,we=x?._redirectEventId,Ve=yield h.tryRedirectSignIn(d);(!ie||ie===we)&&Ve?.user&&(x=Ve.user,Y=!0)}if(!x)return h.directlySetCurrentUser(null);if(!x._redirectEventId){if(Y)try{yield h.beforeStateQueue.runMiddleware(x)}catch(ie){x=C,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(ie))}return x?h.reloadAndSetCurrentUserOrClear(x):h.directlySetCurrentUser(null)}return Se(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===x._redirectEventId?h.directlySetCurrentUser(x):h.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(d){var h=this;return(0,L.Z)(function*(){let _=null;try{_=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,L.Z)(function*(){try{yield Nr(d)}catch(_){if("auth/network-request-failed"!==_?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Fl(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,L.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,L.Z)(function*(){if((0,Ge._isFirebaseServerApp)(h.app))return Promise.reject(st(h));const _=d?(0,_e.m9)(d):null;return _&&Se(_.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(_&&_._clone(h))})()}_updateCurrentUser(d,h=!1){var _=this;return(0,L.Z)(function*(){if(!_._deleted)return d&&Se(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),h||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,L.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,L.Z)(function*(){return(0,Ge._isFirebaseServerApp)(d.app)?Promise.reject(st(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var h=this;return(0,Ge._isFirebaseServerApp)(this.app)?Promise.reject(st(this)):this.queue((0,L.Z)(function*(){yield h.assertedPersistence.setPersistence(at(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var h=this;return(0,L.Z)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const _=h._getPasswordPolicyInternal();return _.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,L.Z)(function*(){const h=yield function In(g){return Ot.apply(this,arguments)}(d),_=new Ha(h);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new _e.LL("auth","Firebase",d())}onAuthStateChanged(d,h,_){return this.registerStateListener(this.authStateSubscription,d,h,_)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,_){return this.registerStateListener(this.idTokenSubscription,d,h,_)}authStateReady(){return new Promise((d,h)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},h)}})}revokeAccessToken(d){var h=this;return(0,L.Z)(function*(){if(h.currentUser){const _=yield h.currentUser.getIdToken(),C={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=h.tenantId&&(C.tenantId=h.tenantId),yield function X(g,d){return ve.apply(this,arguments)}(h,C)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var _=this;return(0,L.Z)(function*(){const C=yield _.getOrInitRedirectPersistenceManager(h);return null===d?C.removeCurrentUser():C.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,L.Z)(function*(){if(!h.redirectPersistenceManager){const _=d&&at(d)||h._popupRedirectResolver;Se(_,h,"argument-error"),h.redirectPersistenceManager=yield Wn.create(h,[at(_._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,L.Z)(function*(){var _,C;return h._isInitialized&&(yield h.queue((0,L.Z)(function*(){}))),(null===(_=h._currentUser)||void 0===_?void 0:_._redirectEventId)===d?h._currentUser:(null===(C=h.redirectUser)||void 0===C?void 0:C._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,L.Z)(function*(){if(d===h.currentUser)return h.queue((0,L.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,_,C){if(this._deleted)return()=>{};const x="function"==typeof h?h:h.next.bind(h);let Y=!1;const ie=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(ie,this,"internal-error"),ie.then(()=>{Y||x(this.currentUser)}),"function"==typeof h){const we=d.addObserver(h,_,C);return()=>{Y=!0,we()}}{const we=d.addObserver(h);return()=>{Y=!0,we()}}}directlySetCurrentUser(d){var h=this;return(0,L.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=yt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,L.Z)(function*(){var h;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const C=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();C&&(_["X-Firebase-Client"]=C);const x=yield d._getAppCheckToken();return x&&(_["X-Firebase-AppCheck"]=x),_})()}_getAppCheckToken(){var d=this;return(0,L.Z)(function*(){var h;const _=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return _?.error&&function Yi(g,...d){Zi.logLevel<=Ct.in.WARN&&Zi.warn(`Auth (${Ge.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function nn(g){return(0,_e.m9)(g)}class YD{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,_e.ne)(h=>this.observer=h)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vh={loadJS:()=>(0,L.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xv(g){return vh.loadJS(g)}function JD(g){return`__${g}${Math.floor(1e6*Math.random())}`}class eT{constructor(d){this.type="recaptcha-enterprise",this.auth=nn(d)}verify(d="verify",h=!1){var _=this;return(0,L.Z)(function*(){function x(){return x=(0,L.Z)(function*(ie){if(!h){if(null==ie.tenantId&&null!=ie._agentRecaptchaConfig)return ie._agentRecaptchaConfig.siteKey;if(null!=ie.tenantId&&void 0!==ie._tenantRecaptchaConfigs[ie.tenantId])return ie._tenantRecaptchaConfigs[ie.tenantId].siteKey}return new Promise(function(){var we=(0,L.Z)(function*(Ve,Ke){gu(ie,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ze=>{if(void 0!==Ze.recaptchaKey){const Mn=new Ll(Ze);return null==ie.tenantId?ie._agentRecaptchaConfig=Mn:ie._tenantRecaptchaConfigs[ie.tenantId]=Mn,Ve(Mn.siteKey)}Ke(new Error("recaptcha Enterprise site key undefined"))}).catch(Ze=>{Ke(Ze)})});return function(Ve,Ke){return we.apply(this,arguments)}}())}),x.apply(this,arguments)}function Y(ie,we,Ve){const Ke=window.grecaptcha;wr(Ke)?Ke.enterprise.ready(()=>{Ke.enterprise.execute(ie,{action:d}).then(Ze=>{we(Ze)}).catch(()=>{we("NO_RECAPTCHA")})}):Ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ie,we)=>{(function C(ie){return x.apply(this,arguments)})(_.auth).then(Ve=>{if(!h&&wr(window.grecaptcha))Y(Ve,ie,we);else{if(typeof window>"u")return void we(new Error("RecaptchaVerifier is only supported in browser"));let Ke=function Z1(){return vh.recaptchaEnterpriseScript}();0!==Ke.length&&(Ke+=Ve),xv(Ke).then(()=>{Y(Ve,ie,we)}).catch(Ze=>{we(Ze)})}}).catch(Ve=>{we(Ve)})})})()}}function tT(g,d,h){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,L.Z)(function*(g,d,h,_=!1){const C=new eT(g);let x;try{x=yield C.verify(h)}catch{x=yield C.verify(h,!0)}const Y=Object.assign({},d);return Object.assign(Y,_?{captchaResp:x}:{captchaResponse:x}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}function ke(g,d,h,_){return kv.apply(this,arguments)}function kv(){return kv=(0,L.Z)(function*(g,d,h,_){var C;if(null!==(C=g._getRecaptchaConfig())&&void 0!==C&&C.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const x=yield tT(g,d,h,"getOobCode"===h);return _(g,x)}return _(g,d).catch(function(){var x=(0,L.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ie=yield tT(g,d,h,"getOobCode"===h);return _(g,ie)}return Promise.reject(Y)});return function(Y){return x.apply(this,arguments)}}())}),kv.apply(this,arguments)}function wu(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function wh(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class zl{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return $n("not implemented")}_getIdTokenResponse(d){return $n("not implemented")}_linkToIdToken(d,h){return $n("not implemented")}_getReauthenticationResolver(d){return $n("not implemented")}}function Nt(g,d){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:resetPassword",pe(g,d))})).apply(this,arguments)}function ur(){return(ur=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Fv(g,d){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Vv(){return(Vv=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",pe(g,d))})).apply(this,arguments)}function Y1(g,d){return De.apply(this,arguments)}function De(){return(De=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithPassword",pe(g,d))})).apply(this,arguments)}function $l(g,d){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:sendOobCode",pe(g,d))})).apply(this,arguments)}function Du(){return(Du=(0,L.Z)(function*(g,d){return $l(g,d)})).apply(this,arguments)}function iT(g,d){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,L.Z)(function*(g,d){return $l(g,d)})).apply(this,arguments)}function Q1(g,d){return jv.apply(this,arguments)}function jv(){return(jv=(0,L.Z)(function*(g,d){return $l(g,d)})).apply(this,arguments)}function Uv(){return(Uv=(0,L.Z)(function*(g,d){return $l(g,d)})).apply(this,arguments)}function za(){return(za=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithEmailLink",pe(g,d))})).apply(this,arguments)}function Wl(){return(Wl=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithEmailLink",pe(g,d))})).apply(this,arguments)}class Iu extends zl{constructor(d,h,_,C=null){super("password",_),this._email=d,this._password=h,this._tenantId=C}static _fromEmailAndPassword(d,h){return new Iu(d,h,"password")}static _fromEmailAndCode(d,h,_=null){return new Iu(d,h,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,L.Z)(function*(){switch(h.signInMethod){case"password":return ke(d,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Y1);case"emailLink":return function J1(g,d){return za.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:tn(d,"internal-error")}})()}_linkToIdToken(d,h){var _=this;return(0,L.Z)(function*(){switch(_.signInMethod){case"password":return ke(d,{idToken:h,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fv);case"emailLink":return function fg(g,d){return Wl.apply(this,arguments)}(d,{idToken:h,email:_._email,oobCode:_._password});default:tn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Fo(g,d){return pg.apply(this,arguments)}function pg(){return(pg=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithIdp",pe(g,d))})).apply(this,arguments)}class Er extends zl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new Er(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):tn("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:C}=h,x=(0,zn._T)(h,["providerId","signInMethod"]);if(!_||!C)return null;const Y=new Er(_,C);return Y.idToken=x.idToken||void 0,Y.accessToken=x.accessToken||void 0,Y.secret=x.secret,Y.nonce=x.nonce,Y.pendingToken=x.pendingToken||null,Y}_getIdTokenResponse(d){return Fo(d,this.buildRequest())}_linkToIdToken(d,h){const _=this.buildRequest();return _.idToken=h,Fo(d,_)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Fo(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,_e.xO)(h)}return d}}function ho(){return(ho=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:sendVerificationCode",pe(g,d))})).apply(this,arguments)}function te(){return(te=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithPhoneNumber",pe(g,d))})).apply(this,arguments)}function He(){return(He=(0,L.Z)(function*(g,d){const h=yield Tt(g,"POST","/v1/accounts:signInWithPhoneNumber",pe(g,d));if(h.temporaryProof)throw ui(g,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Eh={USER_NOT_FOUND:"user-not-found"};function $a(){return($a=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithPhoneNumber",pe(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Eh)})).apply(this,arguments)}class Wa extends zl{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new Wa({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new Wa({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function sT(g,d){return te.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function zv(g,d){return He.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function gg(g,d){return $a.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:_,verificationCode:C}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:_,code:C}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:_,phoneNumber:C,temporaryProof:x}=d;return _||h||C||x?new Wa({verificationId:h,verificationCode:_,phoneNumber:C,temporaryProof:x}):null}}class as{constructor(d){var h,_,C,x,Y,ie;const we=(0,_e.zd)((0,_e.pd)(d)),Ve=null!==(h=we.apiKey)&&void 0!==h?h:null,Ke=null!==(_=we.oobCode)&&void 0!==_?_:null,Ze=function oT(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=we.mode)&&void 0!==C?C:null);Se(Ve&&Ke&&Ze,"argument-error"),this.apiKey=Ve,this.operation=Ze,this.code=Ke,this.continueUrl=null!==(x=we.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(Y=we.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ie=we.tenantId)&&void 0!==ie?ie:null}static parseLink(d){const h=function aT(g){const d=(0,_e.zd)((0,_e.pd)(g)).link,h=d?(0,_e.zd)((0,_e.pd)(d)).deep_link_id:null,_=(0,_e.zd)((0,_e.pd)(g)).deep_link_id;return(_?(0,_e.zd)((0,_e.pd)(_)).link:null)||_||h||d||g}(d);try{return new as(h)}catch{return null}}}let Fr=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(h,_){return Iu._fromEmailAndPassword(h,_)}static credentialWithLink(h,_){const C=as.parseLink(_);return Se(C,"argument-error"),Iu._fromEmailAndCode(h,C.code,C.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Li{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Bt extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Lo extends Bt{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Se("providerId"in h&&"signInMethod"in h,"argument-error"),Er._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Se(d.idToken||d.accessToken,"argument-error"),Er._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Lo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Lo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:_,oauthTokenSecret:C,pendingToken:x,nonce:Y,providerId:ie}=d;if(!_&&!C&&!h&&!x||!ie)return null;try{return new Lo(ie)._credential({idToken:h,accessToken:_,nonce:Y,pendingToken:x})}catch{return null}}}let Ch=(()=>{class g extends Bt{constructor(){super("facebook.com")}static credential(h){return Er._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Dh=(()=>{class g extends Bt{constructor(){super("google.com"),this.addScope("profile")}static credential(h,_){return Er._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:_})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:_,oauthAccessToken:C}=h;if(!_&&!C)return null;try{return g.credential(_,C)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),_g=(()=>{class g extends Bt{constructor(){super("github.com")}static credential(h){return Er._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class fo extends zl{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return Fo(d,this.buildRequest())}_linkToIdToken(d,h){const _=this.buildRequest();return _.idToken=h,Fo(d,_)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,Fo(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:C,pendingToken:x}=h;return _&&C&&x&&_===C?new fo(_,x):null}static _create(d,h){return new fo(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Su extends Li{constructor(d){Se(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Su.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Su.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=fo.fromJSON(d);return Se(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:_}=d;if(!h||!_)return null;try{return fo._create(_,h)}catch{return null}}}let Th=(()=>{class g extends Bt{constructor(){super("twitter.com")}static credential(h,_){return Er._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:_})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:_,oauthTokenSecret:C}=h;if(!_||!C)return null;try{return g.credential(_,C)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function yg(g,d){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signUp",pe(g,d))})).apply(this,arguments)}class dr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,_,C=!1){return(0,L.Z)(function*(){const x=yield Xe._fromIdTokenResponse(d,_,C),Y=vg(_);return new dr({user:x,providerId:Y,_tokenResponse:_,operationType:h})})()}static _forOperation(d,h,_){return(0,L.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const C=vg(_);return new dr({user:d,providerId:C,_tokenResponse:_,operationType:h})})()}}function vg(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function bg(){return(bg=(0,L.Z)(function*(g){var d;if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const h=nn(g);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new dr({user:h.currentUser,providerId:null,operationType:"signIn"});const _=yield yg(h,{returnSecureToken:!0}),C=yield dr._fromIdTokenResponse(h,"signIn",_,!0);return yield h._updateCurrentUser(C.user),C})).apply(this,arguments)}class Au extends _e.ZR{constructor(d,h,_,C){var x;super(h.code,h.message),this.operationType=_,this.user=C,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:d.name,tenantId:null!==(x=d.tenantId)&&void 0!==x?x:void 0,_serverResponse:h.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,h,_,C){return new Au(d,h,_,C)}}function qv(g,d,h,_){return("reauthenticate"===d?h._getReauthenticationResolver(g):h._getIdTokenResponse(g)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Au._fromErrorAndOperation(g,x,d,_):x})}function Gv(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function wg(){return wg=(0,L.Z)(function*(g,d){const h=(0,_e.m9)(g);yield Ah(!0,h,d);const{providerUserInfo:_}=yield function _u(g,d){return Pr.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),C=Gv(_||[]);return h.providerData=h.providerData.filter(x=>C.has(x.providerId)),C.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),wg.apply(this,arguments)}function Sh(g,d){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,L.Z)(function*(g,d,h=!1){const _=yield Or(g,d._linkToIdToken(g.auth,yield g.getIdToken()),h);return dr._forOperation(g,"link",_)})).apply(this,arguments)}function Ah(g,d,h){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,L.Z)(function*(g,d,h){yield Nr(d);const C=!1===g?"provider-already-linked":"no-such-provider";Se(Gv(d.providerData).has(h)===g,d.auth,C)})).apply(this,arguments)}function Kv(g,d){return xh.apply(this,arguments)}function xh(){return(xh=(0,L.Z)(function*(g,d,h=!1){const{auth:_}=g;if((0,Ge._isFirebaseServerApp)(_.app))return Promise.reject(st(_));const C="reauthenticate";try{const x=yield Or(g,qv(_,C,d,g),h);Se(x.idToken,_,"internal-error");const Y=na(x.idToken);Se(Y,_,"internal-error");const{sub:ie}=Y;return Se(g.uid===ie,_,"user-mismatch"),dr._forOperation(g,C,x)}catch(x){throw"auth/user-not-found"===x?.code&&tn(_,"user-mismatch"),x}})).apply(this,arguments)}function Zv(g,d){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,L.Z)(function*(g,d,h=!1){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const _="signIn",C=yield qv(g,_,d),x=yield dr._fromIdTokenResponse(g,_,C);return h||(yield g._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Mh(g,d){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,L.Z)(function*(g,d){return Zv(nn(g),d)})).apply(this,arguments)}function Yv(g,d){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,L.Z)(function*(g,d){const h=(0,_e.m9)(g);return yield Ah(!1,h,d.providerId),Sh(h,d)})).apply(this,arguments)}function Qv(g,d){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,L.Z)(function*(g,d){return Kv((0,_e.m9)(g),d)})).apply(this,arguments)}function kh(){return(kh=(0,L.Z)(function*(g,d){return Tt(g,"POST","/v1/accounts:signInWithCustomToken",pe(g,d))})).apply(this,arguments)}function Ai(){return Ai=(0,L.Z)(function*(g,d){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const h=nn(g),_=yield function lT(g,d){return kh.apply(this,arguments)}(h,{token:d,returnSecureToken:!0}),C=yield dr._fromIdTokenResponse(h,"signIn",_);return yield h._updateCurrentUser(C.user),C}),Ai.apply(this,arguments)}class Ft{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?xi._fromServerResponse(d,h):"totpInfo"in h?Qi._fromServerResponse(d,h):tn(d,"internal-error")}}class xi extends Ft{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new xi(h)}}class Qi extends Ft{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new Qi(h)}}function Bo(g,d,h){var _;Se((null===(_=h.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),Se(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Se(h.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Se(h.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Cr(g){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,L.Z)(function*(g){const d=nn(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function ql(){return(ql=(0,L.Z)(function*(g,d,h){const _=nn(g),C={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};h&&Bo(_,C,h),yield ke(_,C,"getOobCode",iT)})).apply(this,arguments)}function Ig(){return Ig=(0,L.Z)(function*(g,d,h){yield Nt((0,_e.m9)(g),{oobCode:d,newPassword:h}).catch(function(){var _=(0,L.Z)(function*(C){throw"auth/password-does-not-meet-requirements"===C.code&&Cr(g),C});return function(C){return _.apply(this,arguments)}}())}),Ig.apply(this,arguments)}function ze(){return ze=(0,L.Z)(function*(g,d){yield function Sn(g,d){return Vv.apply(this,arguments)}((0,_e.m9)(g),{oobCode:d})}),ze.apply(this,arguments)}function vt(g,d){return An.apply(this,arguments)}function An(){return(An=(0,L.Z)(function*(g,d){const h=(0,_e.m9)(g),_=yield Nt(h,{oobCode:d}),C=_.requestType;switch(Se(C,h,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(_.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(_.mfaInfo,h,"internal-error");default:Se(_.email,h,"internal-error")}let x=null;return _.mfaInfo&&(x=Ft._fromServerResponse(nn(h),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:x},operation:C}})).apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(g,d){const{data:h}=yield vt((0,_e.m9)(g),d);return h.email})).apply(this,arguments)}function oa(){return(oa=(0,L.Z)(function*(g,d,h){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const _=nn(g),Y=yield ke(_,{returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yg).catch(we=>{throw"auth/password-does-not-meet-requirements"===we.code&&Cr(g),we}),ie=yield dr._fromIdTokenResponse(_,"signIn",Y);return yield _._updateCurrentUser(ie.user),ie})).apply(this,arguments)}function la(){return(la=(0,L.Z)(function*(g,d,h){const _=nn(g),C={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function x(Y,ie){Se(ie.handleCodeInApp,_,"argument-error"),ie&&Bo(_,Y,ie)})(C,h),yield ke(_,C,"getOobCode",Q1)})).apply(this,arguments)}function Ph(){return(Ph=(0,L.Z)(function*(g,d,h){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const _=(0,_e.m9)(g),C=Fr.credentialWithLink(d,h||ss());return Se(C._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Mh(_,C)})).apply(this,arguments)}function qn(){return(qn=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:createAuthUri",pe(g,d))})).apply(this,arguments)}function ca(){return ca=(0,L.Z)(function*(g,d){const _={identifier:d,continueUri:bs()?ss():"http://localhost"},{signinMethods:C}=yield function Gl(g,d){return qn.apply(this,arguments)}((0,_e.m9)(g),_);return C||[]}),ca.apply(this,arguments)}function Ga(){return Ga=(0,L.Z)(function*(g,d){const h=(0,_e.m9)(g),C={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Bo(h.auth,C,d);const{email:x}=yield function Bv(g,d){return Du.apply(this,arguments)}(h.auth,C);x!==g.email&&(yield g.reload())}),Ga.apply(this,arguments)}function go(){return go=(0,L.Z)(function*(g,d,h){const _=(0,_e.m9)(g),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};h&&Bo(_.auth,x,h);const{email:Y}=yield function X1(g,d){return Uv.apply(this,arguments)}(_.auth,x);Y!==g.email&&(yield g.reload())}),go.apply(this,arguments)}function Ka(){return(Ka=(0,L.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Mt(){return Mt=(0,L.Z)(function*(g,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const _=(0,_e.m9)(g),x={idToken:yield _.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},Y=yield Or(_,function jo(g,d){return Ka.apply(this,arguments)}(_.auth,x));_.displayName=Y.displayName||null,_.photoURL=Y.photoUrl||null;const ie=_.providerData.find(({providerId:we})=>"password"===we);ie&&(ie.displayName=_.displayName,ie.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Y)}),Mt.apply(this,arguments)}function Ag(g,d,h){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,L.Z)(function*(g,d,h){const{auth:_}=g,x={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(x.email=d),h&&(x.password=h);const Y=yield Or(g,function Nv(g,d){return ur.apply(this,arguments)}(_,x));yield g._updateTokensIfNecessary(Y,!0)}),Ts.apply(this,arguments)}class Ks{constructor(d,h,_={}){this.isNewUser=d,this.providerId=h,this.profile=_}}class Kl extends Ks{constructor(d,h,_,C){super(d,h,_),this.username=C}}class Xi extends Ks{constructor(d,h){super(d,"facebook.com",h)}}class tO extends Kl{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Lr extends Ks{constructor(d,h){super(d,"google.com",h)}}class Dr extends Kl{constructor(d,h,_){super(d,"twitter.com",h,_)}}function xg(g){const{user:d,_tokenResponse:h}=g;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Oh(g){var d,h;if(!g)return null;const{providerId:_}=g,C=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},x=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const Y=null===(h=null===(d=na(g.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(Y)return new Ks(x,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!_)return null;switch(_){case"facebook.com":return new Xi(x,C);case"github.com":return new tO(x,C);case"google.com":return new Lr(x,C);case"twitter.com":return new Dr(x,C,g.screenName||null);case"custom":case"anonymous":return new Ks(x,null);default:return new Ks(x,_,C)}}(h)}class Yl{constructor(d,h,_){this.type=d,this.credential=h,this.user=_}static _fromIdtoken(d,h){return new Yl("enroll",d,h)}static _fromMfaPendingCredential(d){return new Yl("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,_;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Yl._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Yl._fromIdtoken(d.multiFactorSession.idToken)}return null}}class tb{constructor(d,h,_){this.session=d,this.hints=h,this.signInResolver=_}static _fromError(d,h){const _=nn(d),C=h.customData._serverResponse,x=(C.mfaInfo||[]).map(ie=>Ft._fromServerResponse(_,ie));Se(C.mfaPendingCredential,_,"internal-error");const Y=Yl._fromMfaPendingCredential(C.mfaPendingCredential);return new tb(Y,x,function(){var ie=(0,L.Z)(function*(we){const Ve=yield we._process(_,Y);delete C.mfaInfo,delete C.mfaPendingCredential;const Ke=Object.assign(Object.assign({},C),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(h.operationType){case"signIn":const Ze=yield dr._fromIdTokenResponse(_,h.operationType,Ke);return yield _._updateCurrentUser(Ze.user),Ze;case"reauthenticate":return Se(h.user,_,"internal-error"),dr._forOperation(h.user,h.operationType,Ke);default:tn(_,"internal-error")}});return function(we){return ie.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,L.Z)(function*(){return h.signInResolver(d)})()}}class Nh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(_=>Ft._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new Nh(d)}getSession(){var d=this;return(0,L.Z)(function*(){return Yl._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,h){var _=this;return(0,L.Z)(function*(){const C=d,x=yield _.getSession(),Y=yield Or(_.user,C._process(_.user.auth,x,h));return yield _.user._updateTokensIfNecessary(Y),_.user.reload()})()}unenroll(d){var h=this;return(0,L.Z)(function*(){const _="string"==typeof d?d:d.uid,C=yield h.user.getIdToken();try{const x=yield Or(h.user,function lO(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:withdraw",pe(g,d))}(h.user.auth,{idToken:C,mfaEnrollmentId:_}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Y})=>Y!==_),yield h.user._updateTokensIfNecessary(x),yield h.user.reload()}catch(x){throw x}})()}}const Fh=new WeakMap,kg="__sak";class hT{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(kg,"1"),this.storage.removeItem(kg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const gi=(()=>{class g extends hT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,_)=>this.onStorageEvent(h,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Za(){const g=(0,_e.z$)();return bu(g)||No(g)}()&&function gt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ae(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const _ of Object.keys(this.listeners)){const C=this.storage.getItem(_),x=this.localCache[_];C!==x&&h(_,x,C)}}onStorageEvent(h,_=!1){if(!h.key)return void this.forAllChangedKeys((ie,we,Ve)=>{this.notifyListeners(ie,Ve)});const C=h.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(C);if(h.newValue!==ie)null!==h.newValue?this.storage.setItem(C,h.newValue):this.storage.removeItem(C);else if(this.localCache[C]===h.newValue&&!_)return}const x=()=>{const ie=this.storage.getItem(C);!_&&this.localCache[C]===ie||this.notifyListeners(C,ie)},Y=this.storage.getItem(C);!function le(){return(0,_e.w1)()&&10===document.documentMode}()||Y===h.newValue||h.newValue===h.oldValue?x():setTimeout(x,10)}notifyListeners(h,_){this.localCache[h]=_;const C=this.listeners[h];if(C)for(const x of Array.from(C))x(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,_,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:_,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(_)}_removeListener(h,_){this.listeners[h]&&(this.listeners[h].delete(_),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,_){var C=()=>super._set,x=this;return(0,L.Z)(function*(){yield C().call(x,h,_),x.localCache[h]=JSON.stringify(_)})()}_get(h){var _=()=>super._get,C=this;return(0,L.Z)(function*(){const x=yield _().call(C,h);return C.localCache[h]=JSON.stringify(x),x})()}_remove(h){var _=()=>super._remove,C=this;return(0,L.Z)(function*(){yield _().call(C,h),delete C.localCache[h]})()}}return g.type="LOCAL",g})(),Mi=(()=>{class g extends hT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,_){}_removeListener(h,_){}}return g.type="SESSION",g})();let ib=(()=>{class g{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const _=this.receivers.find(x=>x.isListeningto(h));if(_)return _;const C=new g(h);return this.receivers.push(C),C}isListeningto(h){return this.eventTarget===h}handleEvent(h){var _=this;return(0,L.Z)(function*(){const C=h,{eventId:x,eventType:Y,data:ie}=C.data,we=_.handlersMap[Y];if(!we?.size)return;C.ports[0].postMessage({status:"ack",eventId:x,eventType:Y});const Ve=Array.from(we).map(function(){var Ze=(0,L.Z)(function*(Mn){return Mn(C.origin,ie)});return function(Mn){return Ze.apply(this,arguments)}}()),Ke=yield function nb(g){return Promise.all(g.map(function(){var d=(0,L.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(_){return{fulfilled:!1,reason:_}}});return function(h){return d.apply(this,arguments)}}()))}(Ve);C.ports[0].postMessage({status:"done",eventId:x,eventType:Y,response:Ke})})()}_subscribe(h,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(_)}_unsubscribe(h,_){this.handlersMap[h]&&_&&this.handlersMap[h].delete(_),(!_||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Ql(g="",d=10){let h="";for(let _=0;_<d;_++)h+=Math.floor(10*Math.random());return g+h}class rb{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,_=50){var C=this;return(0,L.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let Y,ie;return new Promise((we,Ve)=>{const Ke=Ql("",20);x.port1.start();const Ze=setTimeout(()=>{Ve(new Error("unsupported_event"))},_);ie={messageChannel:x,onMessage(Mn){const xs=Mn;if(xs.data.eventId===Ke)switch(xs.data.status){case"ack":clearTimeout(Ze),Y=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),we(xs.data.response);break;default:clearTimeout(Ze),clearTimeout(Y),Ve(new Error("invalid_response"))}}},C.handlers.add(ie),x.port1.addEventListener("message",ie.onMessage),C.target.postMessage({eventType:d,eventId:Ke,data:h},[x.port2])}).finally(()=>{ie&&C.removeMessageHandler(ie)})})()}}function si(){return window}function Pu(){return typeof si().WorkerGlobalScope<"u"&&"function"==typeof si().importScripts}function Lh(){return(Lh=(0,L.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ou="firebaseLocalStorageDb",Uo="firebaseLocalStorage",Og="fbase_key";class Vh{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Ng(g,d){return g.transaction([Uo],d?"readwrite":"readonly").objectStore(Uo)}function Fg(){const g=indexedDB.open(Ou,1);return new Promise((d,h)=>{g.addEventListener("error",()=>{h(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(Uo,{keyPath:Og})}catch(C){h(C)}}),g.addEventListener("success",(0,L.Z)(function*(){const _=g.result;_.objectStoreNames.contains(Uo)?d(_):(_.close(),yield function dO(){const g=indexedDB.deleteDatabase(Ou);return new Vh(g).toPromise()}(),d(yield Fg()))}))})}function lb(g,d,h){return cb.apply(this,arguments)}function cb(){return(cb=(0,L.Z)(function*(g,d,h){const _=Ng(g,!0).put({[Og]:d,value:h});return new Vh(_).toPromise()})).apply(this,arguments)}function Fu(){return(Fu=(0,L.Z)(function*(g,d){const h=Ng(g,!1).get(d),_=yield new Vh(h).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function db(g,d){const h=Ng(g,!0).delete(d);return new Vh(h).toPromise()}const Xl=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,L.Z)(function*(){return h.db||(h.db=yield Fg()),h.db})()}_withRetries(h){var _=this;return(0,L.Z)(function*(){let C=0;for(;;)try{const x=yield _._openDb();return yield h(x)}catch(x){if(C++>3)throw x;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,L.Z)(function*(){return Pu()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,L.Z)(function*(){h.receiver=ib._getInstance(function ab(){return Pu()?self:null}()),h.receiver._subscribe("keyChanged",function(){var _=(0,L.Z)(function*(C,x){return{keyProcessed:(yield h._poll()).includes(x.key)}});return function(C,x){return _.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var _=(0,L.Z)(function*(C,x){return["keyChanged"]});return function(C,x){return _.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,L.Z)(function*(){var _,C;if(h.activeServiceWorker=yield function Pg(){return Lh.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new rb(h.activeServiceWorker);const x=yield h.sender._send("ping",{},800);x&&null!==(_=x[0])&&void 0!==_&&_.fulfilled&&null!==(C=x[0])&&void 0!==C&&C.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var _=this;return(0,L.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function ob(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:h},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,L.Z)(function*(){try{if(!indexedDB)return!1;const h=yield Fg();return yield lb(h,kg,"1"),yield db(h,kg),!0}catch{}return!1})()}_withPendingWrite(h){var _=this;return(0,L.Z)(function*(){_.pendingWrites++;try{yield h()}finally{_.pendingWrites--}})()}_set(h,_){var C=this;return(0,L.Z)(function*(){return C._withPendingWrite((0,L.Z)(function*(){return yield C._withRetries(x=>lb(x,h,_)),C.localCache[h]=_,C.notifyServiceWorker(h)}))})()}_get(h){var _=this;return(0,L.Z)(function*(){const C=yield _._withRetries(x=>function ub(g,d){return Fu.apply(this,arguments)}(x,h));return _.localCache[h]=C,C})()}_remove(h){var _=this;return(0,L.Z)(function*(){return _._withPendingWrite((0,L.Z)(function*(){return yield _._withRetries(C=>db(C,h)),delete _.localCache[h],_.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,L.Z)(function*(){const _=yield h._withRetries(Y=>{const ie=Ng(Y,!1).getAll();return new Vh(ie).toPromise()});if(!_)return[];if(0!==h.pendingWrites)return[];const C=[],x=new Set;if(0!==_.length)for(const{fbase_key:Y,value:ie}of _)x.add(Y),JSON.stringify(h.localCache[Y])!==JSON.stringify(ie)&&(h.notifyListeners(Y,ie),C.push(Y));for(const Y of Object.keys(h.localCache))h.localCache[Y]&&!x.has(Y)&&(h.notifyListeners(Y,null),C.push(Y));return C})()}notifyListeners(h,_){this.localCache[h]=_;const C=this.listeners[h];if(C)for(const x of Array.from(C))x(_)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,L.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(_)}_removeListener(h,_){this.listeners[h]&&(this.listeners[h].delete(_),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),Lu=1e12;class mT{constructor(d){this.auth=d,this.counter=Lu,this._widgets=new Map}render(d,h){const _=this.counter;return this._widgets.set(_,new pb(d,this.auth.name,h||{})),this.counter++,_}reset(d){var h;const _=d||Lu;null===(h=this._widgets.get(_))||void 0===h||h.delete(),this._widgets.delete(_)}getResponse(d){var h;return(null===(h=this._widgets.get(d||Lu))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,L.Z)(function*(){var _;return null===(_=h._widgets.get(d||Lu))||void 0===_||_.execute(),""})()}}class pb{constructor(d,h,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof d?document.getElementById(d):d;Se(C,"argument-error",{appName:h}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function _T(g){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(h.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gb=JD("rcb"),yT=new ue(3e4,6e4);class Vi{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=si().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return Se(function mb(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&cr(si().grecaptcha)?Promise.resolve(si().grecaptcha):new Promise((_,C)=>{const x=si().setTimeout(()=>{C(_n(d,"network-request-failed"))},yT.get());si()[gb]=()=>{si().clearTimeout(x),delete si()[gb];const ie=si().grecaptcha;if(!ie||!cr(ie))return void C(_n(d,"internal-error"));const we=ie.render;ie.render=(Ve,Ke)=>{const Ze=we(Ve,Ke);return this.counter++,Ze},this.hostLanguage=h,_(ie)},xv(`${function QD(){return vh.recaptchaV2Script}()}?${(0,_e.xO)({onload:gb,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(x),C(_n(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=si().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vT{load(d){return(0,L.Z)(function*(){return new mT(d)})()}clearedOneInstance(){}}const _b="recaptcha",yb={theme:"light",type:"image"};class vb{constructor(d,h,_=Object.assign({},yb)){this.parameters=_,this.type=_b,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nn(d),this.isInvisible="invisible"===this.parameters.size,Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof h?document.getElementById(h):h;Se(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vT:new Vi,this.validateStartingState()}verify(){var d=this;return(0,L.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(h)||new Promise(x=>{const Y=ie=>{ie&&(d.tokenChangeListeners.delete(Y),x(ie))};d.tokenChangeListeners.add(Y),d.isInvisible&&_.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(_=>_(h)),"function"==typeof d)d(h);else if("string"==typeof d){const _=si()[d];"function"==typeof _&&_(h)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,L.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const _=document.createElement("div");h.appendChild(_),h=_}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,L.Z)(function*(){Se(bs()&&!Pu(),d.auth,"internal-error"),yield function bT(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function Ba(g){return ii.apply(this,arguments)}(d.auth);Se(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vu{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=Wa._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function Is(){return(Is=(0,L.Z)(function*(g,d,h){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const _=nn(g),C=yield Ya(_,d,(0,_e.m9)(h));return new Vu(C,x=>Mh(_,x))})).apply(this,arguments)}function Bh(){return(Bh=(0,L.Z)(function*(g,d,h){const _=(0,_e.m9)(g);yield Ah(!1,_,"phone");const C=yield Ya(_.auth,d,(0,_e.m9)(h));return new Vu(C,x=>Yv(_,x))})).apply(this,arguments)}function Bu(){return(Bu=(0,L.Z)(function*(g,d,h){const _=(0,_e.m9)(g);if((0,Ge._isFirebaseServerApp)(_.auth.app))return Promise.reject(st(_.auth));const C=yield Ya(_.auth,d,(0,_e.m9)(h));return new Vu(C,x=>Qv(_,x))})).apply(this,arguments)}function Ya(g,d,h){return fr.apply(this,arguments)}function fr(){return fr=(0,L.Z)(function*(g,d,h){var _;const C=yield h.verify();try{let x;if(Se("string"==typeof C,g,"argument-error"),Se(h.type===_b,g,"argument-error"),x="string"==typeof d?{phoneNumber:d}:d,"session"in x){const Y=x.session;if("phoneNumber"in x)return Se("enroll"===Y.type,g,"internal-error"),(yield function sO(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:start",pe(g,d))}(g,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{Se("signin"===Y.type,g,"internal-error");const ie=(null===(_=x.multiFactorHint)||void 0===_?void 0:_.uid)||x.multiFactorUid;return Se(ie,g,"missing-multi-factor-info"),(yield function hb(g,d){return Pe(g,"POST","/v2/accounts/mfaSignIn:start",pe(g,d))}(g,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function rT(g,d){return ho.apply(this,arguments)}(g,{phoneNumber:x.phoneNumber,recaptchaToken:C});return Y}}finally{h._reset()}}),fr.apply(this,arguments)}function jh(){return(jh=(0,L.Z)(function*(g,d){const h=(0,_e.m9)(g);if((0,Ge._isFirebaseServerApp)(h.auth.app))return Promise.reject(st(h.auth));yield Sh(h,d)})).apply(this,arguments)}let _o=(()=>{class g{constructor(h){this.providerId=g.PROVIDER_ID,this.auth=nn(h)}verifyPhoneNumber(h,_){return Ya(this.auth,h,(0,_e.m9)(_))}static credential(h,_){return Wa._fromVerification(h,_)}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:_,temporaryProof:C}=h;return _&&C?Wa._fromTokenResponse(_,C):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function ki(g,d){return d?at(d):(Se(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Vg extends zl{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Fo(d,this._buildIdpRequest())}_linkToIdToken(d,h){return Fo(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return Fo(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function CT(g){return Zv(g.auth,new Vg(g),g.bypassAuthState)}function DT(g){const{auth:d,user:h}=g;return Se(h,d,"internal-error"),Kv(h,new Vg(g),g.bypassAuthState)}function da(g){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,L.Z)(function*(g){const{auth:d,user:h}=g;return Se(h,d,"internal-error"),Sh(h,new Vg(g),g.bypassAuthState)})).apply(this,arguments)}class wb{constructor(d,h,_,C,x=!1){this.auth=d,this.resolver=_,this.user=C,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,L.Z)(function*(_,C){d.pendingPromise={resolve:_,reject:C};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(x){d.reject(x)}});return function(_,C){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,L.Z)(function*(){const{urlResponse:_,sessionId:C,postBody:x,tenantId:Y,error:ie,type:we}=d;if(ie)return void h.reject(ie);const Ve={auth:h.auth,requestUri:_,sessionId:C,tenantId:Y||void 0,postBody:x||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(we)(Ve))}catch(Ke){h.reject(Ke)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return CT;case"linkViaPopup":case"linkViaRedirect":return da;case"reauthViaPopup":case"reauthViaRedirect":return DT;default:tn(this.auth,"internal-error")}}resolve(d){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Eb=new ue(2e3,1e4);function Hh(){return(Hh=(0,L.Z)(function*(g,d,h){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(_n(g,"operation-not-supported-in-this-environment"));const _=nn(g);ci(g,d,Li);const C=ki(_,h);return new Bg(_,"signInViaPopup",d,C).executeNotNull()})).apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(g,d,h){const _=(0,_e.m9)(g);if((0,Ge._isFirebaseServerApp)(_.auth.app))return Promise.reject(_n(_.auth,"operation-not-supported-in-this-environment"));ci(_.auth,d,Li);const C=ki(_.auth,h);return new Bg(_.auth,"reauthViaPopup",d,C,_).executeNotNull()})).apply(this,arguments)}function Tb(){return(Tb=(0,L.Z)(function*(g,d,h){const _=(0,_e.m9)(g);ci(_.auth,d,Li);const C=ki(_.auth,h);return new Bg(_.auth,"linkViaPopup",d,C,_).executeNotNull()})).apply(this,arguments)}let Bg=(()=>{class g extends wb{constructor(h,_,C,x,Y){super(h,_,x,Y),this.provider=C,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var h=this;return(0,L.Z)(function*(){const _=yield h.execute();return Se(_,h.auth,"internal-error"),_})()}onExecution(){var h=this;return(0,L.Z)(function*(){Pn(1===h.filter.length,"Popup operations only handle one event");const _=Ql();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],_),h.authWindow.associatedEvent=_,h.resolver._originValidation(h.auth).catch(C=>{h.reject(C)}),h.resolver._isIframeWebStorageSupported(h.auth,C=>{C||h.reject(_n(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const h=()=>{var _,C;this.pollId=null!==(C=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,Eb.get())};h()}}return g.currentPopupAction=null,g})();const IT="pendingRedirect",ju=new Map;class Ib extends wb{constructor(d,h,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,L.Z)(function*(){let _=ju.get(h.auth._key());if(!_){try{const x=(yield function Jl(g,d){return jg.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;_=()=>Promise.resolve(x)}catch(C){_=()=>Promise.reject(C)}ju.set(h.auth._key(),_)}return h.bypassAuthState||ju.set(h.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,_=this;return(0,L.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(_,d);if("unknown"!==d.type){if(d.eventId){const C=yield _.auth._redirectUserForId(d.eventId);if(C)return _.user=C,h().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,L.Z)(function*(){})()}cleanUp(){}}function jg(){return(jg=(0,L.Z)(function*(g,d){const h=zt(d),_=Te(g);if(!(yield _._isAvailable()))return!1;const C="true"===(yield _._get(h));return yield _._remove(h),C})).apply(this,arguments)}function Ug(g,d){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,L.Z)(function*(g,d){return Te(g)._set(zt(d),"true")})).apply(this,arguments)}function zg(g,d){ju.set(g._key(),d)}function Te(g){return at(g._redirectPersistence)}function zt(g){return Ye(IT,g.config.apiKey,g.name)}function he(g,d,h){return function fe(g,d,h){return Ri.apply(this,arguments)}(g,d,h)}function Ri(){return(Ri=(0,L.Z)(function*(g,d,h){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const _=nn(g);ci(g,d,Li),yield _._initializationPromise;const C=ki(_,h);return yield Ug(C,_),C._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Sb(g,d,h){return function Uu(g,d,h){return Ss.apply(this,arguments)}(g,d,h)}function Ss(){return(Ss=(0,L.Z)(function*(g,d,h){const _=(0,_e.m9)(g);if(ci(_.auth,d,Li),(0,Ge._isFirebaseServerApp)(_.auth.app))return Promise.reject(st(_.auth));yield _.auth._initializationPromise;const C=ki(_.auth,h);yield Ug(C,_.auth);const x=yield Gg(_);return C._openRedirect(_.auth,d,"reauthViaRedirect",x)})).apply(this,arguments)}function $g(g,d,h){return function Wg(g,d,h){return qg.apply(this,arguments)}(g,d,h)}function qg(){return(qg=(0,L.Z)(function*(g,d,h){const _=(0,_e.m9)(g);ci(_.auth,d,Li),yield _.auth._initializationPromise;const C=ki(_.auth,h);yield Ah(!1,_,d.providerId),yield Ug(C,_.auth);const x=yield Gg(_);return C._openRedirect(_.auth,d,"linkViaRedirect",x)})).apply(this,arguments)}function zh(){return(zh=(0,L.Z)(function*(g,d){return yield nn(g)._initializationPromise,Bi(g,d,!1)})).apply(this,arguments)}function Bi(g,d){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,L.Z)(function*(g,d,h=!1){if((0,Ge._isFirebaseServerApp)(g.app))return Promise.reject(st(g));const _=nn(g),C=ki(_,d),Y=yield new Ib(_,C,h).execute();return Y&&!h&&(delete Y.user._redirectEventId,yield _._persistUserIfCurrent(Y.user),yield _._setRedirectUser(null,d)),Y})).apply(this,arguments)}function Gg(g){return ha.apply(this,arguments)}function ha(){return(ha=(0,L.Z)(function*(g){const d=Ql(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Ab{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(h=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function AT(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xb(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var _;if(d.error&&!xb(d)){const C=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";h.onError(_n(this.auth,C))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const _=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(d))}saveEventToCache(d){this.cachedEventUids.add(Kg(d)),this.lastProcessedEventTime=Date.now()}}function Kg(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function xb({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function $h(g){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,L.Z)(function*(g,d={}){return Pe(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Mb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zg=/^https?/;function Wh(){return(Wh=(0,L.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield $h(g);for(const h of d)try{if(Yg(h))return}catch{}tn(g,"unauthorized-domain")})).apply(this,arguments)}function Yg(g){const d=ss(),{protocol:h,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const Y=new URL(g);return""===Y.hostname&&""===_?"chrome-extension:"===h&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&Y.hostname===_}if(!Zg.test(h))return!1;if(Mb.test(g))return _===g;const C=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(_)}const kb=new ue(3e4,6e4);function Qg(){const g=si().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let h=0;h<g.CP.length;h++)g.CP[h]=null}let zu=null;const MT=new ue(5e3,15e3),kT="__/auth/iframe",Tr="emulator/auth/iframe",Qa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RT(g){const d=g.config;Se(d.authDomain,g,"auth-domain-config-required");const h=d.emulator?ge(d,Tr):`https://${g.config.authDomain}/${kT}`,_={apiKey:d.apiKey,appName:g.name,v:Ge.SDK_VERSION},C=Gn.get(g.config.apiHost);C&&(_.eid=C);const x=g._getFrameworks();return x.length&&(_.fw=x.join(",")),`${h}?${(0,_e.xO)(_).slice(1)}`}function Jg(){return Jg=(0,L.Z)(function*(g){const d=yield function Xg(g){return zu=zu||function Rb(g){return new Promise((d,h)=>{var _,C,x;function Y(){Qg(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Qg(),h(_n(g,"network-request-failed"))},timeout:kb.get()})}if(null!==(C=null===(_=si().gapi)||void 0===_?void 0:_.iframes)&&void 0!==C&&C.Iframe)d(gapi.iframes.getContext());else{if(null===(x=si().gapi)||void 0===x||!x.load){const ie=JD("iframefcb");return si()[ie]=()=>{gapi.load?Y():h(_n(g,"network-request-failed"))},xv(`${function XD(){return vh.gapiScript}()}?onload=${ie}`).catch(we=>h(we))}Y()}}).catch(d=>{throw zu=null,d})}(g),zu}(g),h=si().gapi;return Se(h,g,"internal-error"),d.open({where:document.body,url:RT(g),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qa,dontclear:!0},_=>new Promise(function(){var C=(0,L.Z)(function*(x,Y){yield _.restyle({setHideOnLeave:!1});const ie=_n(g,"network-request-failed"),we=si().setTimeout(()=>{Y(ie)},MT.get());function Ve(){si().clearTimeout(we),x(_)}_.ping(Ve).then(Ve,()=>{Y(ie)})});return function(x,Y){return C.apply(this,arguments)}}()))}),Jg.apply(this,arguments)}const OT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nb{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Zh="__/auth/handler",em="emulator/auth/handler",Fb=encodeURIComponent("fac");function Yh(g,d,h,_,C,x){return tm.apply(this,arguments)}function tm(){return(tm=(0,L.Z)(function*(g,d,h,_,C,x){Se(g.config.authDomain,g,"auth-domain-config-required"),Se(g.config.apiKey,g,"invalid-api-key");const Y={apiKey:g.config.apiKey,appName:g.name,authType:h,redirectUrl:_,v:Ge.SDK_VERSION,eventId:C};if(d instanceof Li){d.setDefaultLanguage(g.languageCode),Y.providerId=d.providerId||"",(0,_e.xb)(d.getCustomParameters())||(Y.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ke,Ze]of Object.entries(x||{}))Y[Ke]=Ze}if(d instanceof Bt){const Ke=d.getScopes().filter(Ze=>""!==Ze);Ke.length>0&&(Y.scopes=Ke.join(","))}g.tenantId&&(Y.tid=g.tenantId);const ie=Y;for(const Ke of Object.keys(ie))void 0===ie[Ke]&&delete ie[Ke];const we=yield g._getAppCheckToken(),Ve=we?`#${Fb}=${encodeURIComponent(we)}`:"";return`${function ec({config:g}){return g.emulator?ge(g,em):`https://${g.authDomain}/${Zh}`}(g)}?${(0,_e.xO)(ie).slice(1)}${Ve}`})).apply(this,arguments)}const Xa="webStorageSupport",FT=class NT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mi,this._completeRedirectFn=Bi,this._overrideRedirectResult=zg}_openPopup(d,h,_,C){var x=this;return(0,L.Z)(function*(){var Y;Pn(null===(Y=x.eventManagers[d._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ie=yield Yh(d,h,_,ss(),C);return function Gh(g,d,h,_=500,C=600){const x=Math.max((window.screen.availHeight-C)/2,0).toString(),Y=Math.max((window.screen.availWidth-_)/2,0).toString();let ie="";const we=Object.assign(Object.assign({},OT),{width:_.toString(),height:C.toString(),top:x,left:Y}),Ve=(0,_e.z$)().toLowerCase();h&&(ie=dn(Ve)?"_blank":h),sa(Ve)&&(d=d||"http://localhost",we.scrollbars="yes");const Ke=Object.entries(we).reduce((Mn,[xs,sf])=>`${Mn}${xs}=${sf},`,"");if(function re(g=(0,_e.z$)()){var d;return No(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Ve)&&"_self"!==ie)return function Kh(g,d){const h=document.createElement("a");h.href=g,h.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(_)}(d||"",ie),new Nb(null);const Ze=window.open(d||"",ie,Ke);Se(Ze,g,"popup-blocked");try{Ze.focus()}catch{}return new Nb(Ze)}(d,ie,Ql())})()}_openRedirect(d,h,_,C){var x=this;return(0,L.Z)(function*(){return yield x._originValidation(d),function sb(g){si().location.href=g}(yield Yh(d,h,_,ss(),C)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:C,promise:x}=this.eventManagers[h];return C?Promise.resolve(C):(Pn(x,"If manager is not set, promise should be"),x)}const _=this.initAndGetManager(d);return this.eventManagers[h]={promise:_},_.catch(()=>{delete this.eventManagers[h]}),_}initAndGetManager(d){var h=this;return(0,L.Z)(function*(){const _=yield function PT(g){return Jg.apply(this,arguments)}(d),C=new Ab(d);return _.register("authEvent",x=>(Se(x?.authEvent,d,"invalid-auth-event"),{status:C.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:C},h.iframes[d._key()]=_,C})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(Xa,{type:Xa},C=>{var x;const Y=null===(x=C?.[0])||void 0===x?void 0:x[Xa];void 0!==Y&&h(!!Y),tn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function xT(g){return Wh.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return Ae()||bu()||No()}};class nm{constructor(d){this.factorId=d}_process(d,h,_){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,_);case"signin":return this._finalizeSignIn(d,h.credential);default:return $n("unexpected MultiFactorSessionType")}}}class Lb extends nm{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Lb(d)}_finalizeEnroll(d,h,_){return function oO(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:finalize",pe(g,d))}(d,{idToken:h,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function fb(g,d){return Pe(g,"POST","/v2/accounts/mfaSignIn:finalize",pe(g,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let LT=(()=>{class g{constructor(){}static assertion(h){return Lb._fromCredential(h)}}return g.FACTOR_ID="phone",g})();var nc="@firebase/auth";class $u{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,L.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);h&&(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yo(){return window}(0,_e.Pz)("authIdTokenMaxAge"),function K1(g){vh=g}({loadJS:g=>new Promise((d,h)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=C=>{const x=_n("internal-error");x.customData=C,h(x)},_.type="text/javascript",_.charset="UTF-8",function jT(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Qh(g){(0,Ge._registerComponent)(new ni.wA("auth",(d,{options:h})=>{const _=d.getProvider("app").getImmediate(),C=d.getProvider("heartbeat"),x=d.getProvider("app-check-internal"),{apiKey:Y,authDomain:ie}=_.options;Se(Y&&!Y.includes(":"),"invalid-api-key",{appName:_.name});const we={apiKey:Y,authDomain:ie,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yt(g)},Ve=new Av(_,C,x,we);return function Rv(g,d){const h=d?.persistence||[],_=(Array.isArray(h)?h:[h]).map(at);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(Ve,h),Ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,_)=>{d.getProvider("auth-internal").initialize()})),(0,Ge._registerComponent)(new ni.wA("auth-internal",d=>{const h=nn(d.getProvider("auth").getImmediate());return new $u(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ge.registerVersion)(nc,"1.7.4",function im(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Ge.registerVersion)(nc,"1.7.4","esm2017")}("Browser");function ic(){return ic=(0,L.Z)(function*(g,d,h){var _;const{BuildInfo:C}=yo();Pn(d.sessionId,"AuthEvent did not contain a session ID");const x=yield function UT(g){return rc.apply(this,arguments)}(d.sessionId),Y={};return No()?Y.ibi=C.packageName:Oo()?Y.apn=C.packageName:tn(g,"operation-not-supported-in-this-environment"),C.displayName&&(Y.appDisplayName=C.displayName),Y.sessionId=x,Yh(g,h,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,Y)}),ic.apply(this,arguments)}function am(){return(am=(0,L.Z)(function*(g){const{BuildInfo:d}=yo(),h={};No()?h.iosBundleId=d.packageName:Oo()?h.androidPackageName=d.packageName:tn(g,"operation-not-supported-in-this-environment"),yield $h(g,h)})).apply(this,arguments)}function Xh(){return(Xh=(0,L.Z)(function*(g,d,h){const{cordova:_}=yo();let C=()=>{};try{yield new Promise((x,Y)=>{let ie=null;function we(){var Ze;x();const Mn=null===(Ze=_.plugins.browsertab)||void 0===Ze?void 0:Ze.close;"function"==typeof Mn&&Mn(),"function"==typeof h?.close&&h.close()}function Ve(){ie||(ie=window.setTimeout(()=>{Y(_n(g,"redirect-cancelled-by-user"))},2e3))}function Ke(){"visible"===document?.visibilityState&&Ve()}d.addPassiveListener(we),document.addEventListener("resume",Ve,!1),Oo()&&document.addEventListener("visibilitychange",Ke,!1),C=()=>{d.removePassiveListener(we),document.removeEventListener("resume",Ve,!1),document.removeEventListener("visibilitychange",Ke,!1),ie&&window.clearTimeout(ie)}})}finally{C()}})).apply(this,arguments)}function rc(){return(rc=(0,L.Z)(function*(g){const d=function Ja(g){if(Pn(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),h=new Uint8Array(d);for(let _=0;_<g.length;_++)h[_]=g.charCodeAt(_);return h}(g),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Wb extends Ab{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,L.Z)(function*(){yield d.initPromise})()}}function Gb(g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,L.Z)(function*(g){const d=yield qu()._get(lm(g));return d&&(yield qu()._remove(lm(g))),d})).apply(this,arguments)}function ji(){const g=[];for(let h=0;h<20;h++){const _=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return g.join("")}function qu(){return at(gi)}function lm(g){return Ye("authEvent",g.config.apiKey,g.name)}function $o(g){if(!g?.includes("?"))return{};const[d,...h]=g.split("?");return(0,_e.zd)(h.join("?"))}const Zb=class oc{constructor(){this._redirectPersistence=Mi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bi,this._overrideRedirectResult=zg}_initialize(d){var h=this;return(0,L.Z)(function*(){const _=d._key();let C=h.eventManagers.get(_);return C||(C=new Wb(d),h.eventManagers.set(_,C),h.attachCallbackListeners(d,C)),C})()}_openPopup(d){tn(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,_,C){var x=this;return(0,L.Z)(function*(){!function $b(g){var d,h,_,C,x,Y,ie,we,Ve,Ke;const Ze=yo();Se("function"==typeof(null===(d=Ze?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Se(typeof(null===(h=Ze?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Se("function"==typeof(null===(x=null===(C=null===(_=Ze?.cordova)||void 0===_?void 0:_.plugins)||void 0===C?void 0:C.browsertab)||void 0===x?void 0:x.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(we=null===(ie=null===(Y=Ze?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===we?void 0:we.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(Ke=null===(Ve=Ze?.cordova)||void 0===Ve?void 0:Ve.InAppBrowser)||void 0===Ke?void 0:Ke.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Y=yield x._initialize(d);yield Y.initialized(),Y.resetRedirect(),function ST(){ju.clear()}(),yield x._originValidation(d);const ie=function qb(g,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:ji(),postBody:null,tenantId:g.tenantId,error:_n(g,"no-auth-event")}}(d,_,C);yield function Wu(g,d){return qu()._set(lm(g),d)}(d,ie);const we=yield function Ub(g,d,h){return ic.apply(this,arguments)}(d,ie,h),Ve=yield function Hb(g){const{cordova:d}=yo();return new Promise(h=>{d.plugins.browsertab.isAvailable(_=>{let C=null;_?d.plugins.browsertab.openUrl(g):C=d.InAppBrowser.open(g,function B(g=(0,_e.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),h(C)})})}(we);return function zb(g,d,h){return Xh.apply(this,arguments)}(d,Y,Ve)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function om(g){return am.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:_,handleOpenURL:C,BuildInfo:x}=yo(),Y=setTimeout((0,L.Z)(function*(){yield Gb(d),h.onEvent(ef())}),500),ie=function(){var Ke=(0,L.Z)(function*(Ze){clearTimeout(Y);const Mn=yield Gb(d);let xs=null;Mn&&Ze?.url&&(xs=function zT(g,d){var h,_;const C=function Jh(g){const d=$o(g),h=d.link?decodeURIComponent(d.link):void 0,_=$o(h).link,C=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return $o(C).link||C||_||h||g}(d);if(C.includes("/__/auth/callback")){const x=$o(C),Y=x.firebaseError?function Kb(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,ie=null===(_=null===(h=Y?.code)||void 0===h?void 0:h.split("auth/"))||void 0===_?void 0:_[1],we=ie?_n(ie):null;return we?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:we,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:C,postBody:null}}return null}(Mn,Ze.url)),h.onEvent(xs||ef())});return function(Mn){return Ke.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ie);const we=C,Ve=`${x.packageName.toLowerCase()}://`;yo().handleOpenURL=function(){var Ke=(0,L.Z)(function*(Ze){if(Ze.toLowerCase().startsWith(Ve)&&ie({url:Ze}),"function"==typeof we)try{we(Ze)}catch(Mn){console.error(Mn)}});return function(Ze){return Ke.apply(this,arguments)}}()}};function ef(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_n("no-auth-event")}}function tf(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function WT(g=(0,_e.z$)()){return!("file:"!==tf()&&"ionic:"!==tf()&&"capacitor:"!==tf()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yb(){try{const g=self.localStorage,d=Ql();if(g)return g.setItem(d,"1"),g.removeItem(d),!function qT(g=(0,_e.z$)()){return function bO(){return(0,_e.w1)()&&11===document?.documentMode}()||function lc(g=(0,_e.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,_e.hl)()}catch{return hi()&&(0,_e.hl)()}return!1}function hi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cm(){return(function yO(){return"http:"===tf()||"https:"===tf()}()||(0,_e.ru)()||WT())&&!function vO(){return(0,_e.b$)()||(0,_e.UG)()}()&&Yb()&&!hi()}function cc(){return WT()&&typeof document<"u"}function Vr(){return(Vr=(0,L.Z)(function*(){return!!cc()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const Br={LOCAL:"local",NONE:"none",SESSION:"session"},pa=Se,dc="persistence";function Qb(g){return um.apply(this,arguments)}function um(){return(um=(0,L.Z)(function*(g){yield g._initializationPromise;const d=jr(),h=Ye(dc,g.config.apiKey,g.name);d&&d.setItem(h,g._getPersistence())})).apply(this,arguments)}function jr(){var g;try{return(null===(g=function uc(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const dm=Se;class ls{constructor(){this.browserResolver=at(FT),this.cordovaResolver=at(Zb),this.underlyingResolver=null,this._redirectPersistence=Mi,this._completeRedirectFn=Bi,this._overrideRedirectResult=zg}_initialize(d){var h=this;return(0,L.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,_,C){var x=this;return(0,L.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(d,h,_,C)})()}_openRedirect(d,h,_,C){var x=this;return(0,L.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(d,h,_,C)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return cc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,L.Z)(function*(){if(d.underlyingResolver)return;const h=yield function GT(){return Vr.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function ZT(g){return g.unwrap()}function YT(g){return Jb(g)}function Jb(g){const{_tokenResponse:d}=g instanceof _e.ZR?g.customData:g;if(!d)return null;if(!(g instanceof _e.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return _o.credentialFromResult(g);const h=d.providerId;if(!h||h===Vt.PASSWORD)return null;let _;switch(h){case Vt.GOOGLE:_=Dh;break;case Vt.FACEBOOK:_=Ch;break;case Vt.GITHUB:_=_g;break;case Vt.TWITTER:_=Th;break;default:const{oauthIdToken:C,oauthAccessToken:x,oauthTokenSecret:Y,pendingToken:ie,nonce:we}=d;return x||Y||C||ie?ie?h.startsWith("saml.")?fo._create(h,ie):Er._fromParams({providerId:h,signInMethod:h,pendingToken:ie,idToken:C,accessToken:x}):new Lo(h).credential({idToken:C,accessToken:x,rawNonce:we}):null}return g instanceof _e.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Ur(g,d){return d.catch(h=>{throw h instanceof _e.ZR&&function QT(g,d){var h;const _=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new pm(g,function rO(g,d){var h;const _=(0,_e.m9)(g),C=d;return Se(d.customData.operationType,_,"argument-error"),Se(null===(h=C.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,_,"argument-error"),tb._fromError(_,C)}(g,d));else if(_){const C=Jb(d),x=d;C&&(x.credential=C,x.tenantId=_.tenantId||void 0,x.email=_.email||void 0,x.phoneNumber=_.phoneNumber||void 0)}}(g,h),h}).then(h=>{const C=h.user;return{operationType:h.operationType,credential:YT(h),additionalUserInfo:xg(h),user:As.getOrCreate(C)}})}function hm(g,d){return fm.apply(this,arguments)}function fm(){return(fm=(0,L.Z)(function*(g,d){const h=yield d;return{verificationId:h.verificationId,confirm:_=>Ur(g,h.confirm(_))}})).apply(this,arguments)}class pm{constructor(d,h){this.resolver=h,this.auth=function Xb(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Ur(ZT(this.auth),this.resolver.resolveSignIn(d))}}class As{constructor(d){this._delegate=d,this.multiFactor=function cO(g){const d=(0,_e.m9)(g);return Fh.has(d)||Fh.set(d,Nh._fromUser(d)),Fh.get(d)}(d)}static getOrCreate(d){return As.USER_MAP.has(d)||As.USER_MAP.set(d,new As(d)),As.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,L.Z)(function*(){return Ur(h.auth,Yv(h._delegate,d))})()}linkWithPhoneNumber(d,h){var _=this;return(0,L.Z)(function*(){return hm(_.auth,function bb(g,d,h){return Bh.apply(this,arguments)}(_._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,L.Z)(function*(){return Ur(h.auth,function Db(g,d,h){return Tb.apply(this,arguments)}(h._delegate,d,ls))})()}linkWithRedirect(d){var h=this;return(0,L.Z)(function*(){return yield Qb(nn(h.auth)),$g(h._delegate,d,ls)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,L.Z)(function*(){return Ur(h.auth,Qv(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return hm(this.auth,function xn(g,d,h){return Bu.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return Ur(this.auth,function TT(g,d,h){return ut.apply(this,arguments)}(this._delegate,d,ls))}reauthenticateWithRedirect(d){var h=this;return(0,L.Z)(function*(){return yield Qb(nn(h.auth)),Sb(h._delegate,d,ls)})()}sendEmailVerification(d){return function po(g,d){return Ga.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,L.Z)(function*(){return yield function qs(g,d){return wg.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function eO(g,d){const h=(0,_e.m9)(g);return(0,Ge._isFirebaseServerApp)(h.auth.app)?Promise.reject(st(h.auth)):Ag(h,d,null)}(this._delegate,d)}updatePassword(d){return function Sg(g,d){return Ag((0,_e.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ET(g,d){return jh.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ku(g,d){return Mt.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function Jv(g,d,h){return go.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}As.USER_MAP=new WeakMap;const Gu=Se;let hc=(()=>{class g{constructor(h,_){if(this.app=h,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=h.options;Gu(C,"invalid-api-key",{appName:h.name}),Gu(C,"invalid-api-key",{appName:h.name});const x=typeof window<"u"?ls:void 0;this._delegate=_.initialize({options:{persistence:nf(C,h.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ki),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?As.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,_){!function Pv(g,d,h){const _=nn(g);Se(_._canInitEmulator,_,"emulator-config-failed"),Se(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const C=!!h?.disableWarnings,x=wu(d),{host:Y,port:ie}=function bh(g){const d=wu(g),h=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!h)return{host:"",port:null};const _=h[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(_);if(C){const x=C[1];return{host:x,port:wh(_.substr(x.length+1))}}{const[x,Y]=_.split(":");return{host:x,port:wh(Y)}}}(d);_.config.emulator={url:`${x}//${Y}${null===ie?"":`:${ie}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Y,port:ie,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function Ov(){function g(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,h,_)}applyActionCode(h){return function ri(g,d){return ze.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return vt(this._delegate,h)}confirmPasswordReset(h,_){return function cT(g,d,h){return Ig.apply(this,arguments)}(this._delegate,h,_)}createUserWithEmailAndPassword(h,_){var C=this;return(0,L.Z)(function*(){return Ur(C._delegate,function hr(g,d,h){return oa.apply(this,arguments)}(C._delegate,h,_))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function Mu(g,d){return ca.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function mt(g,d){const h=as.parseLink(d);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,L.Z)(function*(){Gu(cm(),h._delegate,"operation-not-supported-in-this-environment");const _=yield function fO(g,d){return zh.apply(this,arguments)}(h._delegate,ls);return _?Ur(h._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function ac(g,d){nn(g)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,_,C){const{next:x,error:Y,complete:ie}=ew(h,_,C);return this._delegate.onAuthStateChanged(x,Y,ie)}onIdTokenChanged(h,_,C){const{next:x,error:Y,complete:ie}=ew(h,_,C);return this._delegate.onIdTokenChanged(x,Y,ie)}sendSignInLinkToEmail(h,_){return function aa(g,d,h){return la.apply(this,arguments)}(this._delegate,h,_)}sendPasswordResetEmail(h,_){return function Xv(g,d,h){return ql.apply(this,arguments)}(this._delegate,h,_||void 0)}setPersistence(h){var _=this;return(0,L.Z)(function*(){let C;switch(function KT(g,d){pa(Object.values(Br).includes(d),g,"invalid-persistence-type"),(0,_e.b$)()?pa(d!==Br.SESSION,g,"unsupported-persistence-type"):(0,_e.UG)()?pa(d===Br.NONE,g,"unsupported-persistence-type"):hi()?pa(d===Br.NONE||d===Br.LOCAL&&(0,_e.hl)(),g,"unsupported-persistence-type"):pa(d===Br.NONE||Yb(),g,"unsupported-persistence-type")}(_._delegate,h),h){case Br.SESSION:C=Mi;break;case Br.LOCAL:C=(yield at(Xl)._isAvailable())?Xl:gi;break;case Br.NONE:C=Si;break;default:return tn("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Ur(this._delegate,function Wv(g){return bg.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Ur(this._delegate,Mh(this._delegate,h))}signInWithCustomToken(h){return Ur(this._delegate,function et(g,d){return Ai.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,_){return Ur(this._delegate,function di(g,d,h){return(0,Ge._isFirebaseServerApp)(g.app)?Promise.reject(st(g)):Mh((0,_e.m9)(g),Fr.credential(d,h)).catch(function(){var _=(0,L.Z)(function*(C){throw"auth/password-does-not-meet-requirements"===C.code&&Cr(g),C});return function(C){return _.apply(this,arguments)}}())}(this._delegate,h,_))}signInWithEmailLink(h,_){return Ur(this._delegate,function xu(g,d,h){return Ph.apply(this,arguments)}(this._delegate,h,_))}signInWithPhoneNumber(h,_){return hm(this._delegate,function wT(g,d,h){return Is.apply(this,arguments)}(this._delegate,h,_))}signInWithPopup(h){var _=this;return(0,L.Z)(function*(){return Gu(cm(),_._delegate,"operation-not-supported-in-this-environment"),Ur(_._delegate,function Cb(g,d,h){return Hh.apply(this,arguments)}(_._delegate,h,ls))})()}signInWithRedirect(h){var _=this;return(0,L.Z)(function*(){return Gu(cm(),_._delegate,"operation-not-supported-in-this-environment"),yield Qb(_._delegate),he(_._delegate,h,ls)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Gs(g,d){return qa.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Br,g})();function ew(g,d,h){let _=g;"function"!=typeof g&&({next:_,error:d,complete:h}=g);const C=_;return{next:Y=>C(Y&&As.getOrCreate(Y)),error:d,complete:h}}function nf(g,d){const h=function wO(g,d){const h=jr();if(!h)return[];const _=Ye(dc,g,d);switch(h.getItem(_)){case Br.NONE:return[Si];case Br.LOCAL:return[Xl,Mi];case Br.SESSION:return[Mi];default:return[]}}(g,d);if(typeof self<"u"&&!h.includes(Xl)&&h.push(Xl),typeof window<"u")for(const _ of[gi,Mi])h.includes(_)||h.push(_);return h.includes(Si)||h.push(Si),h}class gm{constructor(){this.providerId="phone",this._delegate=new _o(ZT(dt.Z.auth()))}static credential(d,h){return _o.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}gm.PHONE_SIGN_IN_METHOD=_o.PHONE_SIGN_IN_METHOD,gm.PROVIDER_ID=_o.PROVIDER_ID;const tw=Se;class mm{constructor(d,h,_=dt.Z.app()){var C;tw(null===(C=_.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new vb(_.auth(),d,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function nw(g){g.INTERNAL.registerComponent(new ni.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new hc(h,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fr,FacebookAuthProvider:Ch,GithubAuthProvider:_g,GoogleAuthProvider:Dh,OAuthProvider:Lo,SAMLAuthProvider:Su,PhoneAuthProvider:gm,PhoneMultiFactorGenerator:LT,RecaptchaVerifier:mm,TwitterAuthProvider:Th,Auth:hc,AuthCredential:zl,Error:_e.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.9")}(dt.Z)},861:(Po,qi,wt)=>{function L(Ge,_e,Ct,zn,ni,Gi,Vt){try{var Ce=Ge[Gi](Vt),Re=Ce.value}catch(Je){return void Ct(Je)}Ce.done?_e(Re):Promise.resolve(Re).then(zn,ni)}function dt(Ge){return function(){var _e=this,Ct=arguments;return new Promise(function(zn,ni){var Gi=Ge.apply(_e,Ct);function Vt(Re){L(Gi,zn,ni,Vt,Ce,"next",Re)}function Ce(Re){L(Gi,zn,ni,Vt,Ce,"throw",Re)}Vt(void 0)})}}wt.d(qi,{Z:()=>dt})},582:(Po,qi,wt)=>{wt.d(qi,{FC:()=>tn,KL:()=>br,_T:()=>_e,mG:()=>Je,pi:()=>Ge,qq:()=>Ln});var Ge=function(){return Ge=Object.assign||function(ge){for(var ne,Ee=1,Oe=arguments.length;Ee<Oe;Ee++)for(var pe in ne=arguments[Ee])Object.prototype.hasOwnProperty.call(ne,pe)&&(ge[pe]=ne[pe]);return ge},Ge.apply(this,arguments)};function _e(ue,ge){var ne={};for(var Ee in ue)Object.prototype.hasOwnProperty.call(ue,Ee)&&ge.indexOf(Ee)<0&&(ne[Ee]=ue[Ee]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Ee=Object.getOwnPropertySymbols(ue);Oe<Ee.length;Oe++)ge.indexOf(Ee[Oe])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ee[Oe])&&(ne[Ee[Oe]]=ue[Ee[Oe]])}return ne}function Je(ue,ge,ne,Ee){return new(ne||(ne=Promise))(function(pe,Pe){function Ut(Tt){try{rt(Ee.next(Tt))}catch(Vn){Pe(Vn)}}function Fe(Tt){try{rt(Ee.throw(Tt))}catch(Vn){Pe(Vn)}}function rt(Tt){Tt.done?pe(Tt.value):function Oe(pe){return pe instanceof ne?pe:new ne(function(Pe){Pe(pe)})}(Tt.value).then(Ut,Fe)}rt((Ee=Ee.apply(ue,ge||[])).next())})}function Ln(ue){return this instanceof Ln?(this.v=ue,this):new Ln(ue)}function tn(ue,ge,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Ee=ne.apply(ue,ge||[]),pe=[];return Oe={},Ut("next"),Ut("throw"),Ut("return",function Pe(ln){return function(Ei){return Promise.resolve(Ei).then(ln,Vn)}}),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Ut(ln,Ei){Ee[ln]&&(Oe[ln]=function(ui){return new Promise(function(cr,wr){pe.push([ln,ui,cr,wr])>1||Fe(ln,ui)})},Ei&&(Oe[ln]=Ei(Oe[ln])))}function Fe(ln,Ei){try{!function rt(ln){ln.value instanceof Ln?Promise.resolve(ln.value.v).then(Tt,Vn):ws(pe[0][2],ln)}(Ee[ln](Ei))}catch(ui){ws(pe[0][3],ui)}}function Tt(ln){Fe("next",ln)}function Vn(ln){Fe("throw",ln)}function ws(ln,Ei){ln(Ei),pe.shift(),pe.length&&Fe(pe[0][0],pe[0][1])}}function br(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,ge=ue[Symbol.asyncIterator];return ge?ge.call(ue):(ue=function en(ue){var ge="function"==typeof Symbol&&Symbol.iterator,ne=ge&&ue[ge],Ee=0;if(ne)return ne.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Ee>=ue.length&&(ue=void 0),{value:ue&&ue[Ee++],done:!ue}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),ne={},Ee("next"),Ee("throw"),Ee("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function Ee(pe){ne[pe]=ue[pe]&&function(Pe){return new Promise(function(Ut,Fe){!function Oe(pe,Pe,Ut,Fe){Promise.resolve(Fe).then(function(rt){pe({value:rt,done:Ut})},Pe)}(Ut,Fe,(Pe=ue[pe](Pe)).done,Pe.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},Po=>{Po(Po.s=655)}]);