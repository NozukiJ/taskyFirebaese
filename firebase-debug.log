[debug] [2024-07-05T11:24:42.942Z] ----------------------------------------------------------------------
[debug] [2024-07-05T11:24:42.943Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\junic\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy
[debug] [2024-07-05T11:24:42.944Z] CLI Version:   13.12.0
[debug] [2024-07-05T11:24:42.944Z] Platform:      win32
[debug] [2024-07-05T11:24:42.944Z] Node Version:  v20.14.0
[debug] [2024-07-05T11:24:42.944Z] Time:          Fri Jul 05 2024 20:24:42 GMT+0900 (日本標準時)
[debug] [2024-07-05T11:24:42.944Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-07-05T11:24:42.994Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-07-05T11:24:42.995Z] > authorizing via signed-in user (junichi.nozuki@pathoslogos.co.jp)
[debug] [2024-07-05T11:24:42.995Z] [iam] checking project nozuki3rd for permissions ["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]
[debug] [2024-07-05T11:24:42.996Z] > refreshing access token with scopes: []
[debug] [2024-07-05T11:24:42.997Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-07-05T11:24:42.997Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-07-05T11:24:43.202Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-07-05T11:24:43.202Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-07-05T11:24:43.218Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/nozuki3rd:testIamPermissions [none]
[debug] [2024-07-05T11:24:43.218Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/nozuki3rd:testIamPermissions x-goog-quota-user=projects/nozuki3rd
[debug] [2024-07-05T11:24:43.219Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/nozuki3rd:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]}
[debug] [2024-07-05T11:24:43.911Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/nozuki3rd:testIamPermissions 200
[debug] [2024-07-05T11:24:43.912Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/nozuki3rd:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]}
[debug] [2024-07-05T11:24:43.913Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/nozuki3rd [none]
[debug] [2024-07-05T11:24:44.233Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/nozuki3rd 200
[debug] [2024-07-05T11:24:44.233Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/nozuki3rd {"projectId":"nozuki3rd","projectNumber":"183357457685","displayName":"10053nozuki3rd","name":"projects/nozuki3rd","resources":{"hostingSite":"nozuki3rd","storageBucket":"nozuki3rd.appspot.com","locationId":"asia-northeast1"},"state":"ACTIVE","etag":"1_da74cd6a-440f-4c24-a286-852956efc2e7"}
[debug] [2024-07-05T11:24:47.151Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/nozuki3rd/sites pageToken=&pageSize=10
[debug] [2024-07-05T11:24:47.920Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/nozuki3rd/sites 200
[debug] [2024-07-05T11:24:47.921Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/nozuki3rd/sites {"sites":[{"name":"projects/nozuki3rd/sites/nozuki3rd","defaultUrl":"https://nozuki3rd.web.app","appId":"1:183357457685:web:aa87a4269dd360af10d51c","type":"DEFAULT_SITE"},{"name":"projects/nozuki3rd/sites/taskyy2","defaultUrl":"https://taskyy2.web.app","appId":"1:183357457685:web:01b4a530cc30b2b310d51c","type":"USER_SITE"},{"name":"projects/nozuki3rd/sites/taskyyyy","defaultUrl":"https://taskyyyy.web.app","appId":"1:183357457685:web:dfa80898c96c889810d51c","type":"USER_SITE"}]}
[debug] [2024-07-05T11:24:47.921Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:183357457685:web:01b4a530cc30b2b310d51c/config [none]
[debug] [2024-07-05T11:24:48.966Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:183357457685:web:01b4a530cc30b2b310d51c/config 200
[debug] [2024-07-05T11:24:48.967Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:183357457685:web:01b4a530cc30b2b310d51c/config {"projectId":"nozuki3rd","appId":"1:183357457685:web:01b4a530cc30b2b310d51c","storageBucket":"nozuki3rd.appspot.com","locationId":"asia-northeast1","apiKey":"AIzaSyBLib--Lb3kRU1UORbEgx76QxXWLr8rFZk","authDomain":"nozuki3rd.firebaseapp.com","messagingSenderId":"183357457685"}
[info] 
   Thank you for trying our early preview of Angular support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/angular
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2024-07-05T11:25:16.736Z] [web frameworks] effective firebase.json:  {
  "hosting": [
    {
      "site": "taskyy2",
      "source": ".",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "frameworksBackend": {
        "region": "asia-east1"
      },
      "rewrites": [
        {
          "source": "/**",
          "destination": "/index.html"
        }
      ],
      "redirects": [],
      "headers": [
        {
          "source": "/**/*.[jt]s",
          "headers": [
            {
              "key": "Set-Cookie",
              "value": "__FIREBASE_DEFAULTS__=eyJjb25maWciOnsicHJvamVjdElkIjoibm96dWtpM3JkIiwiYXBwSWQiOiIxOjE4MzM1NzQ1NzY4NTp3ZWI6MDFiNGE1MzBjYzMwYjJiMzEwZDUxYyIsInN0b3JhZ2VCdWNrZXQiOiJub3p1a2kzcmQuYXBwc3BvdC5jb20iLCJsb2NhdGlvbklkIjoiYXNpYS1ub3J0aGVhc3QxIiwiYXBpS2V5IjoiQUl6YVN5QkxpYi0tTGIza1JVMVVPUmJFZ3g3NlF4WFdMcjhyRlprIiwiYXV0aERvbWFpbiI6Im5venVraTNyZC5maXJlYmFzZWFwcC5jb20iLCJtZXNzYWdpbmdTZW5kZXJJZCI6IjE4MzM1NzQ1NzY4NSJ9fQ; SameSite=Strict; Expires=2026-05-30T22:05:16.736Z; Path=/;"
            }
          ]
        }
      ],
      "cleanUrls": true,
      "i18n": {
        "root": "/"
      },
      "public": ".firebase\\taskyy2\\hosting",
      "webFramework": "angular"
    }
  ]
}
[info] 
[info] === Deploying to 'nozuki3rd'...
[info] 
[info] i  deploying storage, firestore, hosting 
[info] i  storage: ensuring required API firebasestorage.googleapis.com is enabled... 
[debug] [2024-07-05T11:25:16.742Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/nozuki3rd/services/firebasestorage.googleapis.com [none]
[debug] [2024-07-05T11:25:16.743Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/nozuki3rd/services/firebasestorage.googleapis.com x-goog-quota-user=projects/nozuki3rd
[debug] [2024-07-05T11:25:17.797Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/nozuki3rd/services/firebasestorage.googleapis.com 200
[debug] [2024-07-05T11:25:17.798Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/nozuki3rd/services/firebasestorage.googleapis.com [omitted]
[info] +  storage: required API firebasestorage.googleapis.com is enabled 
[debug] [2024-07-05T11:25:17.800Z] >>> [apiv2][query] GET https://firebasestorage.googleapis.com/v1alpha/projects/nozuki3rd/defaultBucket [none]
[debug] [2024-07-05T11:25:18.902Z] <<< [apiv2][status] GET https://firebasestorage.googleapis.com/v1alpha/projects/nozuki3rd/defaultBucket 200
[debug] [2024-07-05T11:25:18.903Z] <<< [apiv2][body] GET https://firebasestorage.googleapis.com/v1alpha/projects/nozuki3rd/defaultBucket {"name":"projects/nozuki3rd/defaultBucket","location":"ASIA-NORTHEAST1","bucket":{"name":"projects/nozuki3rd/buckets/nozuki3rd.appspot.com"}}
[info] i  firebase.storage: checking storage.rules for compilation errors... 
[debug] [2024-07-05T11:25:18.908Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test [none]
[debug] [2024-07-05T11:25:18.908Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test [omitted]
[debug] [2024-07-05T11:25:20.021Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test 200
[debug] [2024-07-05T11:25:20.021Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test {}
[info] +  firebase.storage: rules file storage.rules compiled successfully 
[info] i  firestore: reading indexes from firestore.indexes.json... 
[info] i  cloud.firestore: checking firestore.rules for compilation errors... 
[debug] [2024-07-05T11:25:20.029Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test [none]
[debug] [2024-07-05T11:25:20.029Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test [omitted]
[debug] [2024-07-05T11:25:21.076Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test 200
[debug] [2024-07-05T11:25:21.076Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd:test {}
[info] +  cloud.firestore: rules file firestore.rules compiled successfully 
[debug] [2024-07-05T11:25:21.079Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/taskyy2/versions [none]
[debug] [2024-07-05T11:25:21.079Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/taskyy2/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase","firebase-web-framework":"angular"}}
[debug] [2024-07-05T11:25:22.271Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/taskyy2/versions 200
[debug] [2024-07-05T11:25:22.272Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/taskyy2/versions {"name":"projects/183357457685/sites/taskyy2/versions/6998f5b5dfcce942","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase","firebase-web-framework":"angular"}}
[debug] [2024-07-05T11:25:22.274Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/releases pageSize=10&pageToken=
[debug] [2024-07-05T11:25:23.312Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/releases 200
[debug] [2024-07-05T11:25:23.312Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/releases {"releases":[{"name":"projects/nozuki3rd/releases/cloud.firestore","rulesetName":"projects/nozuki3rd/rulesets/5a13676d-680b-49fb-a30b-9d1ef222292d","createTime":"2024-06-03T05:42:41.413732Z","updateTime":"2024-07-05T03:22:59.430228Z"},{"name":"projects/nozuki3rd/releases/firebase.storage/nozuki3rd.appspot.com","rulesetName":"projects/nozuki3rd/rulesets/6c1948c1-d73f-4422-aa6c-7d5a45e1f32b","createTime":"2024-06-03T05:45:37.907685Z","updateTime":"2024-07-05T02:28:28.272279Z"}]}
[debug] [2024-07-05T11:25:23.313Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets/6c1948c1-d73f-4422-aa6c-7d5a45e1f32b [none]
[debug] [2024-07-05T11:25:24.338Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets/6c1948c1-d73f-4422-aa6c-7d5a45e1f32b 200
[debug] [2024-07-05T11:25:24.339Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets/6c1948c1-d73f-4422-aa6c-7d5a45e1f32b [omitted]
[info] i  storage: latest version of storage.rules already up to date, skipping upload... 
[info] i  firestore: deploying indexes... 
[debug] [2024-07-05T11:25:24.343Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/releases pageSize=10&pageToken=
[debug] [2024-07-05T11:25:24.344Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/nozuki3rd/databases/(default)/collectionGroups/-/indexes [none]
[debug] [2024-07-05T11:25:24.827Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/nozuki3rd/databases/(default)/collectionGroups/-/indexes 200
[debug] [2024-07-05T11:25:24.827Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/nozuki3rd/databases/(default)/collectionGroups/-/indexes {"indexes":[{"name":"projects/nozuki3rd/databases/(default)/collectionGroups/tasks/indexes/CICAgOjXh4EK","queryScope":"COLLECTION_GROUP","fields":[{"fieldPath":"projectId","order":"ASCENDING"},{"fieldPath":"userId","order":"ASCENDING"},{"fieldPath":"__name__","order":"ASCENDING"}],"state":"READY"}]}
[debug] [2024-07-05T11:25:24.827Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/nozuki3rd/databases/(default)/collectionGroups/-/fields?filter=indexConfig.usesAncestorConfig=false OR ttlConfig:* [none]
[debug] [2024-07-05T11:25:24.904Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/nozuki3rd/databases/(default)/collectionGroups/-/fields?filter=indexConfig.usesAncestorConfig=false OR ttlConfig:* 200
[debug] [2024-07-05T11:25:24.904Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/nozuki3rd/databases/(default)/collectionGroups/-/fields?filter=indexConfig.usesAncestorConfig=false OR ttlConfig:* {"fields":[{"name":"projects/nozuki3rd/databases/(default)/collectionGroups/__default__/fields/*","indexConfig":{"indexes":[{"queryScope":"COLLECTION","fields":[{"fieldPath":"*","order":"ASCENDING"}],"state":"READY"},{"queryScope":"COLLECTION","fields":[{"fieldPath":"*","order":"DESCENDING"}],"state":"READY"},{"queryScope":"COLLECTION","fields":[{"fieldPath":"*","arrayConfig":"CONTAINS"}],"state":"READY"}]}}]}
[info] i  firestore: The following indexes are defined in your project but are not present in your firestore indexes file:
	(tasks) -- (projectId,ASCENDING) (userId,ASCENDING)  
[debug] [2024-07-05T11:25:25.358Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/releases 200
[debug] [2024-07-05T11:25:25.358Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/releases {"releases":[{"name":"projects/nozuki3rd/releases/cloud.firestore","rulesetName":"projects/nozuki3rd/rulesets/5a13676d-680b-49fb-a30b-9d1ef222292d","createTime":"2024-06-03T05:42:41.413732Z","updateTime":"2024-07-05T03:22:59.430228Z"},{"name":"projects/nozuki3rd/releases/firebase.storage/nozuki3rd.appspot.com","rulesetName":"projects/nozuki3rd/rulesets/6c1948c1-d73f-4422-aa6c-7d5a45e1f32b","createTime":"2024-06-03T05:45:37.907685Z","updateTime":"2024-07-05T02:28:28.272279Z"}]}
[debug] [2024-07-05T11:25:25.358Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets/5a13676d-680b-49fb-a30b-9d1ef222292d [none]
[debug] [2024-07-05T11:25:26.366Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets/5a13676d-680b-49fb-a30b-9d1ef222292d 200
[debug] [2024-07-05T11:25:26.367Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets/5a13676d-680b-49fb-a30b-9d1ef222292d [omitted]
[info] i  firestore: uploading rules firestore.rules... 
[debug] [2024-07-05T11:25:26.369Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets [none]
[debug] [2024-07-05T11:25:26.369Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets [omitted]
[debug] [2024-07-05T11:25:27.432Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets 200
[debug] [2024-07-05T11:25:27.433Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/nozuki3rd/rulesets {"name":"projects/nozuki3rd/rulesets/95696b73-e4a7-453b-83ad-fb3fa7d7520f","source":{"files":[{"content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isProjectOwnerOrMember(userId, projectId) {\n      return exists(/databases/$(database)/documents/projects/$(projectId)) &&\n             (get(/databases/$(database)/documents/projects/$(projectId)).data.owners[userId] != null ||\n              get(/databases/$(database)/documents/projects/$(projectId)).data.members[userId] != null);\n    }\n\n    // ユーザー自身のタスクに対するアクセスを許可\n    match /users/{userId}/tasks/{taskId} {\n      allow read, write: if request.auth.uid == userId || \n                          (resource.data.projectId != null && isProjectOwnerOrMember(request.auth.uid, resource.data.projectId));\n    }\n\n    // プロジェクトに対するアクセスを許可\n    match /projects/{projectId} {\n      allow read, write: if request.auth != null;\n    }\n\n    // コレクショングループクエリを許可\n    match /{document=**} {\n      allow read, write: if request.auth != null;\n    }\n\n    // ユーザーのプロフィールに対するアクセスを許可\n    match /users/{userId} {\n      allow read, update: if request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n  }\n}\n","name":"firestore.rules"}]},"createTime":"2024-07-05T11:25:27.404735Z","metadata":{"services":["cloud.firestore"]}}
[debug] [2024-07-05T11:25:27.433Z] [rules] created ruleset projects/nozuki3rd/rulesets/95696b73-e4a7-453b-83ad-fb3fa7d7520f
